(self["webpackChunkmsc_pl"]=self["webpackChunkmsc_pl"]||[]).push([[4998],{2262:function(e,o,s){"use strict";s.d(o,{B:function(){return effectScope},Bj:function(){return EffectScope},Fl:function(){return computed},IU:function(){return toRaw},Jd:function(){return pauseTracking},PG:function(){return isReactive},SU:function(){return unref},Um:function(){return shallowReactive},WL:function(){return proxyRefs},X$:function(){return trigger},X3:function(){return isProxy},XI:function(){return shallowRef},Xl:function(){return markRaw},dq:function(){return isRef},iH:function(){return ref},j:function(){return track},lk:function(){return resetTracking},qj:function(){return reactive},qq:function(){return ReactiveEffect},yT:function(){return isShallow}});var l=s(3577);let d;class EffectScope{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=d,!e&&d&&(this.index=(d.scopes||(d.scopes=[])).push(this)-1)}run(e){if(this.active){const o=d;try{return d=this,e()}finally{d=o}}else 0}on(){d=this}off(){d=this.parent}stop(e){if(this.active){let o,s;for(o=0,s=this.effects.length;o<s;o++)this.effects[o].stop();for(o=0,s=this.cleanups.length;o<s;o++)this.cleanups[o]();if(this.scopes)for(o=0,s=this.scopes.length;o<s;o++)this.scopes[o].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this.active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,o=d){o&&o.active&&o.effects.push(e)}const createDep=e=>{const o=new Set(e);return o.w=0,o.n=0,o},wasTracked=e=>(e.w&p)>0,newTracked=e=>(e.n&p)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let o=0;o<e.length;o++)e[o].w|=p},finalizeDepMarkers=e=>{const{deps:o}=e;if(o.length){let s=0;for(let l=0;l<o.length;l++){const d=o[l];wasTracked(d)&&!newTracked(d)?d.delete(e):o[s++]=d,d.w&=~p,d.n&=~p}o.length=s}},u=new WeakMap;let g=0,p=1;const m=30;let f;const _=Symbol(""),C=Symbol("");class ReactiveEffect{constructor(e,o=null,s){this.fn=e,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,s)}run(){if(!this.active)return this.fn();let e=f,o=b;while(e){if(e===this)return;e=e.parent}try{return this.parent=f,f=this,b=!0,p=1<<++g,g<=m?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{g<=m&&finalizeDepMarkers(this),p=1<<--g,f=this.parent,b=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){f===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:o}=e;if(o.length){for(let s=0;s<o.length;s++)o[s].delete(e);o.length=0}}let b=!0;const w=[];function pauseTracking(){w.push(b),b=!1}function resetTracking(){const e=w.pop();b=void 0===e||e}function track(e,o,s){if(b&&f){let o=u.get(e);o||u.set(e,o=new Map);let l=o.get(s);l||o.set(s,l=createDep());const d=void 0;trackEffects(l,d)}}function trackEffects(e,o){let s=!1;g<=m?newTracked(e)||(e.n|=p,s=!wasTracked(e)):s=!e.has(f),s&&(e.add(f),f.deps.push(e))}function trigger(e,o,s,d,g,p){const m=u.get(e);if(!m)return;let f=[];if("clear"===o)f=[...m.values()];else if("length"===s&&(0,l.kJ)(e))m.forEach(((e,o)=>{("length"===o||o>=d)&&f.push(e)}));else switch(void 0!==s&&f.push(m.get(s)),o){case"add":(0,l.kJ)(e)?(0,l.S0)(s)&&f.push(m.get("length")):(f.push(m.get(_)),(0,l._N)(e)&&f.push(m.get(C)));break;case"delete":(0,l.kJ)(e)||(f.push(m.get(_)),(0,l._N)(e)&&f.push(m.get(C)));break;case"set":(0,l._N)(e)&&f.push(m.get(_));break}if(1===f.length)f[0]&&triggerEffects(f[0]);else{const e=[];for(const o of f)o&&e.push(...o);triggerEffects(createDep(e))}}function triggerEffects(e,o){const s=(0,l.kJ)(e)?e:[...e];for(const l of s)l.computed&&triggerEffect(l,o);for(const l of s)l.computed||triggerEffect(l,o)}function triggerEffect(e,o){(e!==f||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const S=(0,l.fY)("__proto__,__v_isRef,__isVue"),y=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(l.yk)),L=createGetter(),x=createGetter(!1,!0),k=createGetter(!0),N=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach((o=>{e[o]=function(...e){const s=toRaw(this);for(let o=0,d=this.length;o<d;o++)track(s,"get",o+"");const l=s[o](...e);return-1===l||!1===l?s[o](...e.map(toRaw)):l}})),["push","pop","shift","unshift","splice"].forEach((o=>{e[o]=function(...e){pauseTracking();const s=toRaw(this)[o].apply(this,e);return resetTracking(),s}})),e}function createGetter(e=!1,o=!1){return function get(s,d,u){if("__v_isReactive"===d)return!e;if("__v_isReadonly"===d)return e;if("__v_isShallow"===d)return o;if("__v_raw"===d&&u===(e?o?U:z:o?H:V).get(s))return s;const g=(0,l.kJ)(s);if(!e&&g&&(0,l.RI)(N,d))return Reflect.get(N,d,u);const p=Reflect.get(s,d,u);return((0,l.yk)(d)?y.has(d):S(d))?p:(e||track(s,"get",d),o?p:isRef(p)?g&&(0,l.S0)(d)?p:p.value:(0,l.Kn)(p)?e?readonly(p):reactive(p):p)}}const D=createSetter(),E=createSetter(!0);function createSetter(e=!1){return function set(o,s,d,u){let g=o[s];if(isReadonly(g)&&isRef(g)&&!isRef(d))return!1;if(!e&&(isShallow(d)||isReadonly(d)||(g=toRaw(g),d=toRaw(d)),!(0,l.kJ)(o)&&isRef(g)&&!isRef(d)))return g.value=d,!0;const p=(0,l.kJ)(o)&&(0,l.S0)(s)?Number(s)<o.length:(0,l.RI)(o,s),m=Reflect.set(o,s,d,u);return o===toRaw(u)&&(p?(0,l.aU)(d,g)&&trigger(o,"set",s,d,g):trigger(o,"add",s,d)),m}}function deleteProperty(e,o){const s=(0,l.RI)(e,o),d=e[o],u=Reflect.deleteProperty(e,o);return u&&s&&trigger(e,"delete",o,void 0,d),u}function has(e,o){const s=Reflect.has(e,o);return(0,l.yk)(o)&&y.has(o)||track(e,"has",o),s}function ownKeys(e){return track(e,"iterate",(0,l.kJ)(e)?"length":_),Reflect.ownKeys(e)}const T={get:L,set:D,deleteProperty:deleteProperty,has:has,ownKeys:ownKeys},I={get:k,set(e,o){return!0},deleteProperty(e,o){return!0}},A=(0,l.l7)({},T,{get:x,set:E}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$1(e,o,s=!1,l=!1){e=e["__v_raw"];const d=toRaw(e),u=toRaw(o);s||(o!==u&&track(d,"get",o),track(d,"get",u));const{has:g}=getProto(d),p=l?toShallow:s?toReadonly:toReactive;return g.call(d,o)?p(e.get(o)):g.call(d,u)?p(e.get(u)):void(e!==d&&e.get(o))}function has$1(e,o=!1){const s=this["__v_raw"],l=toRaw(s),d=toRaw(e);return o||(e!==d&&track(l,"has",e),track(l,"has",d)),e===d?s.has(e):s.has(e)||s.has(d)}function size(e,o=!1){return e=e["__v_raw"],!o&&track(toRaw(e),"iterate",_),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const o=toRaw(this),s=getProto(o),l=s.has.call(o,e);return l||(o.add(e),trigger(o,"add",e,e)),this}function set$1(e,o){o=toRaw(o);const s=toRaw(this),{has:d,get:u}=getProto(s);let g=d.call(s,e);g||(e=toRaw(e),g=d.call(s,e));const p=u.call(s,e);return s.set(e,o),g?(0,l.aU)(o,p)&&trigger(s,"set",e,o,p):trigger(s,"add",e,o),this}function deleteEntry(e){const o=toRaw(this),{has:s,get:l}=getProto(o);let d=s.call(o,e);d||(e=toRaw(e),d=s.call(o,e));const u=l?l.call(o,e):void 0,g=o.delete(e);return d&&trigger(o,"delete",e,void 0,u),g}function clear(){const e=toRaw(this),o=0!==e.size,s=void 0,l=e.clear();return o&&trigger(e,"clear",void 0,void 0,s),l}function createForEach(e,o){return function forEach(s,l){const d=this,u=d["__v_raw"],g=toRaw(u),p=o?toShallow:e?toReadonly:toReactive;return!e&&track(g,"iterate",_),u.forEach(((e,o)=>s.call(l,p(e),p(o),d)))}}function createIterableMethod(e,o,s){return function(...d){const u=this["__v_raw"],g=toRaw(u),p=(0,l._N)(g),m="entries"===e||e===Symbol.iterator&&p,f="keys"===e&&p,b=u[e](...d),w=s?toShallow:o?toReadonly:toReactive;return!o&&track(g,"iterate",f?C:_),{next(){const{value:e,done:o}=b.next();return o?{value:e,done:o}:{value:m?[w(e[0]),w(e[1])]:w(e),done:o}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...o){return"delete"!==e&&this}}function createInstrumentations(){const e={get(e){return get$1(this,e)},get size(){return size(this)},has:has$1,add:add,set:set$1,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!1)},o={get(e){return get$1(this,e,!1,!0)},get size(){return size(this)},has:has$1,add:add,set:set$1,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!0)},s={get(e){return get$1(this,e,!0)},get size(){return size(this,!0)},has(e){return has$1.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},l={get(e){return get$1(this,e,!0,!0)},get size(){return size(this,!0)},has(e){return has$1.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)},d=["keys","values","entries",Symbol.iterator];return d.forEach((d=>{e[d]=createIterableMethod(d,!1,!1),s[d]=createIterableMethod(d,!0,!1),o[d]=createIterableMethod(d,!1,!0),l[d]=createIterableMethod(d,!0,!0)})),[e,s,o,l]}const[M,R,P,O]=createInstrumentations();function createInstrumentationGetter(e,o){const s=o?e?O:P:e?R:M;return(o,d,u)=>"__v_isReactive"===d?!e:"__v_isReadonly"===d?e:"__v_raw"===d?o:Reflect.get((0,l.RI)(s,d)&&d in o?s:o,d,u)}const F={get:createInstrumentationGetter(!1,!1)},B={get:createInstrumentationGetter(!1,!0)},W={get:createInstrumentationGetter(!0,!1)};const V=new WeakMap,H=new WeakMap,z=new WeakMap,U=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e["__v_skip"]||!Object.isExtensible(e)?0:targetTypeMap((0,l.W7)(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,T,F,V)}function shallowReactive(e){return createReactiveObject(e,!1,A,B,H)}function readonly(e){return createReactiveObject(e,!0,I,W,z)}function createReactiveObject(e,o,s,d,u){if(!(0,l.Kn)(e))return e;if(e["__v_raw"]&&(!o||!e["__v_isReactive"]))return e;const g=u.get(e);if(g)return g;const p=getTargetType(e);if(0===p)return e;const m=new Proxy(e,2===p?d:s);return u.set(e,m),m}function isReactive(e){return isReadonly(e)?isReactive(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function isReadonly(e){return!(!e||!e["__v_isReadonly"])}function isShallow(e){return!(!e||!e["__v_isShallow"])}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const o=e&&e["__v_raw"];return o?toRaw(o):e}function markRaw(e){return(0,l.Nj)(e,"__v_skip",!0),e}const toReactive=e=>(0,l.Kn)(e)?reactive(e):e,toReadonly=e=>(0,l.Kn)(e)?readonly(e):e;function trackRefValue(e){b&&f&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,o){e=toRaw(e),e.dep&&triggerEffects(e.dep)}function isRef(e){return!(!e||!0!==e.__v_isRef)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,o){return isRef(e)?e:new RefImpl(e,o)}class RefImpl{constructor(e,o){this.__v_isShallow=o,this.dep=void 0,this.__v_isRef=!0,this._rawValue=o?e:toRaw(e),this._value=o?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const o=this.__v_isShallow||isShallow(e)||isReadonly(e);e=o?e:toRaw(e),(0,l.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=o?e:toReactive(e),triggerRefValue(this,e))}}function unref(e){return isRef(e)?e.value:e}const K={get:(e,o,s)=>unref(Reflect.get(e,o,s)),set:(e,o,s,l)=>{const d=e[o];return isRef(d)&&!isRef(s)?(d.value=s,!0):Reflect.set(e,o,s,l)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,K)}var j;class ComputedRefImpl{constructor(e,o,s,l){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this[j]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,(()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!l,this["__v_isReadonly"]=s}get value(){const e=toRaw(this);return trackRefValue(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed(e,o,s=!1){let d,u;const g=(0,l.mf)(e);g?(d=e,u=l.dG):(d=e.get,u=e.set);const p=new ComputedRefImpl(d,u,g||!u,s);return p}j="__v_isReadonly"},6252:function(e,o,s){"use strict";s.d(o,{$d:function(){return callWithAsyncErrorHandling},Cn:function(){return popScopeId},FN:function(){return getCurrentInstance},Fl:function(){return computed},HY:function(){return j},JJ:function(){return provide},Ko:function(){return renderList},P$:function(){return N},Q6:function(){return getTransitionRawChildren},U2:function(){return resolveTransitionHooks},Uk:function(){return createTextVNode},Us:function(){return createRenderer},Wm:function(){return ee},Y3:function(){return nextTick},Y8:function(){return useTransitionState},YP:function(){return watch},_:function(){return createBaseVNode},aZ:function(){return defineComponent},dD:function(){return pushScopeId},f3:function(){return inject},h:function(){return h},iD:function(){return createElementBlock},ic:function(){return I},j4:function(){return createBlock},nK:function(){return setTransitionHooks},uE:function(){return createStaticVNode},up:function(){return resolveComponent},w5:function(){return withCtx},wg:function(){return openBlock}});var l=s(2262),d=s(3577);function callWithErrorHandling(e,o,s,l){let d;try{d=l?e(...l):e()}catch(u){handleError(u,o,s)}return d}function callWithAsyncErrorHandling(e,o,s,l){if((0,d.mf)(e)){const u=callWithErrorHandling(e,o,s,l);return u&&(0,d.tI)(u)&&u.catch((e=>{handleError(e,o,s)})),u}const u=[];for(let d=0;d<e.length;d++)u.push(callWithAsyncErrorHandling(e[d],o,s,l));return u}function handleError(e,o,s,l=!0){const d=o?o.vnode:null;if(o){let l=o.parent;const d=o.proxy,u=s;while(l){const o=l.ec;if(o)for(let s=0;s<o.length;s++)if(!1===o[s](e,d,u))return;l=l.parent}const g=o.appContext.config.errorHandler;if(g)return void callWithErrorHandling(g,null,10,[e,d,u])}logError(e,s,d,l)}function logError(e,o,s,l=!0){console.error(e)}let u=!1,g=!1;const p=[];let m=0;const f=[];let _=null,C=0;const b=Promise.resolve();let w=null;function nextTick(e){const o=w||b;return e?o.then(this?e.bind(this):e):o}function findInsertionIndex(e){let o=m+1,s=p.length;while(o<s){const l=o+s>>>1,d=getId(p[l]);d<e?o=l+1:s=l}return o}function queueJob(e){p.length&&p.includes(e,u&&e.allowRecurse?m+1:m)||(null==e.id?p.push(e):p.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){u||g||(g=!0,w=b.then(flushJobs))}function invalidateJob(e){const o=p.indexOf(e);o>m&&p.splice(o,1)}function queuePostFlushCb(e){(0,d.kJ)(e)?f.push(...e):_&&_.includes(e,e.allowRecurse?C+1:C)||f.push(e),queueFlush()}function flushPreFlushCbs(e,o=(u?m+1:0)){for(0;o<p.length;o++){const e=p[o];e&&e.pre&&(p.splice(o,1),o--,e())}}function flushPostFlushCbs(e){if(f.length){const e=[...new Set(f)];if(f.length=0,_)return void _.push(...e);for(_=e,_.sort(((e,o)=>getId(e)-getId(o))),C=0;C<_.length;C++)_[C]();_=null,C=0}}const getId=e=>null==e.id?1/0:e.id,comparator=(e,o)=>{const s=getId(e)-getId(o);if(0===s){if(e.pre&&!o.pre)return-1;if(o.pre&&!e.pre)return 1}return s};function flushJobs(e){g=!1,u=!0,p.sort(comparator);d.dG;try{for(m=0;m<p.length;m++){const e=p[m];e&&!1!==e.active&&callWithErrorHandling(e,null,14)}}finally{m=0,p.length=0,flushPostFlushCbs(e),u=!1,w=null,(p.length||f.length)&&flushJobs(e)}}new Set;new Map;function emit$1(e,o,...s){if(e.isUnmounted)return;const l=e.vnode.props||d.kT;let u=s;const g=o.startsWith("update:"),p=g&&o.slice(7);if(p&&p in l){const e=`${"modelValue"===p?"model":p}Modifiers`,{number:o,trim:g}=l[e]||d.kT;g&&(u=s.map((e=>e.trim()))),o&&(u=s.map(d.He))}let m;let f=l[m=(0,d.hR)(o)]||l[m=(0,d.hR)((0,d._A)(o))];!f&&g&&(f=l[m=(0,d.hR)((0,d.rs)(o))]),f&&callWithAsyncErrorHandling(f,e,6,u);const _=l[m+"Once"];if(_){if(e.emitted){if(e.emitted[m])return}else e.emitted={};e.emitted[m]=!0,callWithAsyncErrorHandling(_,e,6,u)}}function normalizeEmitsOptions(e,o,s=!1){const l=o.emitsCache,u=l.get(e);if(void 0!==u)return u;const g=e.emits;let p={},m=!1;if(!(0,d.mf)(e)){const extendEmits=e=>{const s=normalizeEmitsOptions(e,o,!0);s&&(m=!0,(0,d.l7)(p,s))};!s&&o.mixins.length&&o.mixins.forEach(extendEmits),e.extends&&extendEmits(e.extends),e.mixins&&e.mixins.forEach(extendEmits)}return g||m?((0,d.kJ)(g)?g.forEach((e=>p[e]=null)):(0,d.l7)(p,g),(0,d.Kn)(e)&&l.set(e,p),p):((0,d.Kn)(e)&&l.set(e,null),null)}function isEmitListener(e,o){return!(!e||!(0,d.F7)(o))&&(o=o.slice(2).replace(/Once$/,""),(0,d.RI)(e,o[0].toLowerCase()+o.slice(1))||(0,d.RI)(e,(0,d.rs)(o))||(0,d.RI)(e,o))}let S=null,y=null;function setCurrentRenderingInstance(e){const o=S;return S=e,y=e&&e.type.__scopeId||null,o}function pushScopeId(e){y=e}function popScopeId(){y=null}function withCtx(e,o=S,s){if(!o)return e;if(e._n)return e;const renderFnWithContext=(...s)=>{renderFnWithContext._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(o);let d;try{d=e(...s)}finally{setCurrentRenderingInstance(l),renderFnWithContext._d&&setBlockTracking(1)}return d};return renderFnWithContext._n=!0,renderFnWithContext._c=!0,renderFnWithContext._d=!0,renderFnWithContext}function renderComponentRoot(e){const{type:o,vnode:s,proxy:l,withProxy:u,props:g,propsOptions:[p],slots:m,attrs:f,emit:_,render:C,renderCache:b,data:w,setupState:S,ctx:y,inheritAttrs:L}=e;let x,k;const N=setCurrentRenderingInstance(e);try{if(4&s.shapeFlag){const e=u||l;x=normalizeVNode(C.call(e,e,b,g,S,w,y)),k=f}else{const e=o;0,x=normalizeVNode(e.length>1?e(g,{attrs:f,slots:m,emit:_}):e(g,null)),k=o.props?f:getFunctionalFallthrough(f)}}catch(E){Z.length=0,handleError(E,e,1),x=ee(q)}let D=x;if(k&&!1!==L){const e=Object.keys(k),{shapeFlag:o}=D;e.length&&7&o&&(p&&e.some(d.tR)&&(k=filterModelListeners(k,p)),D=cloneVNode(D,k))}return s.dirs&&(D=cloneVNode(D),D.dirs=D.dirs?D.dirs.concat(s.dirs):s.dirs),s.transition&&(D.transition=s.transition),x=D,setCurrentRenderingInstance(N),x}const getFunctionalFallthrough=e=>{let o;for(const s in e)("class"===s||"style"===s||(0,d.F7)(s))&&((o||(o={}))[s]=e[s]);return o},filterModelListeners=(e,o)=>{const s={};for(const l in e)(0,d.tR)(l)&&l.slice(9)in o||(s[l]=e[l]);return s};function shouldUpdateComponent(e,o,s){const{props:l,children:d,component:u}=e,{props:g,children:p,patchFlag:m}=o,f=u.emitsOptions;if(o.dirs||o.transition)return!0;if(!(s&&m>=0))return!(!d&&!p||p&&p.$stable)||l!==g&&(l?!g||hasPropsChanged(l,g,f):!!g);if(1024&m)return!0;if(16&m)return l?hasPropsChanged(l,g,f):!!g;if(8&m){const e=o.dynamicProps;for(let o=0;o<e.length;o++){const s=e[o];if(g[s]!==l[s]&&!isEmitListener(f,s))return!0}}return!1}function hasPropsChanged(e,o,s){const l=Object.keys(o);if(l.length!==Object.keys(e).length)return!0;for(let d=0;d<l.length;d++){const u=l[d];if(o[u]!==e[u]&&!isEmitListener(s,u))return!0}return!1}function updateHOCHostEl({vnode:e,parent:o},s){while(o&&o.subTree===e)(e=o.vnode).el=s,o=o.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,o){o&&o.pendingBranch?(0,d.kJ)(e)?o.effects.push(...e):o.effects.push(e):queuePostFlushCb(e)}function provide(e,o){if(ne){let s=ne.provides;const l=ne.parent&&ne.parent.provides;l===s&&(s=ne.provides=Object.create(l)),s[e]=o}else 0}function inject(e,o,s=!1){const l=ne||S;if(l){const u=null==l.parent?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides;if(u&&e in u)return u[e];if(arguments.length>1)return s&&(0,d.mf)(o)?o.call(l.proxy):o}else 0}const L={};function watch(e,o,s){return doWatch(e,o,s)}function doWatch(e,o,{immediate:s,deep:u,flush:g,onTrack:p,onTrigger:m}=d.kT){const f=ne;let _,C,b=!1,w=!1;if((0,l.dq)(e)?(_=()=>e.value,b=(0,l.yT)(e)):(0,l.PG)(e)?(_=()=>e,u=!0):(0,d.kJ)(e)?(w=!0,b=e.some((e=>(0,l.PG)(e)||(0,l.yT)(e))),_=()=>e.map((e=>(0,l.dq)(e)?e.value:(0,l.PG)(e)?traverse(e):(0,d.mf)(e)?callWithErrorHandling(e,f,2):void 0))):_=(0,d.mf)(e)?o?()=>callWithErrorHandling(e,f,2):()=>{if(!f||!f.isUnmounted)return C&&C(),callWithAsyncErrorHandling(e,f,3,[onCleanup])}:d.dG,o&&u){const e=_;_=()=>traverse(e())}let onCleanup=e=>{C=x.onStop=()=>{callWithErrorHandling(e,f,4)}};if(re)return onCleanup=d.dG,o?s&&callWithAsyncErrorHandling(o,f,3,[_(),w?[]:void 0,onCleanup]):_(),d.dG;let S=w?[]:L;const job=()=>{if(x.active)if(o){const e=x.run();(u||b||(w?e.some(((e,o)=>(0,d.aU)(e,S[o]))):(0,d.aU)(e,S)))&&(C&&C(),callWithAsyncErrorHandling(o,f,3,[e,S===L?void 0:S,onCleanup]),S=e)}else x.run()};let y;job.allowRecurse=!!o,"sync"===g?y=job:"post"===g?y=()=>K(job,f&&f.suspense):(job.pre=!0,f&&(job.id=f.uid),y=()=>queueJob(job));const x=new l.qq(_,y);return o?s?job():S=x.run():"post"===g?K(x.run.bind(x),f&&f.suspense):x.run(),()=>{x.stop(),f&&f.scope&&(0,d.Od)(f.scope.effects,x)}}function instanceWatch(e,o,s){const l=this.proxy,u=(0,d.HD)(e)?e.includes(".")?createPathGetter(l,e):()=>l[e]:e.bind(l,l);let g;(0,d.mf)(o)?g=o:(g=o.handler,s=o);const p=ne;setCurrentInstance(this);const m=doWatch(u,g.bind(l),s);return p?setCurrentInstance(p):unsetCurrentInstance(),m}function createPathGetter(e,o){const s=o.split(".");return()=>{let o=e;for(let e=0;e<s.length&&o;e++)o=o[s[e]];return o}}function traverse(e,o){if(!(0,d.Kn)(e)||e["__v_skip"])return e;if(o=o||new Set,o.has(e))return e;if(o.add(e),(0,l.dq)(e))traverse(e.value,o);else if((0,d.kJ)(e))for(let s=0;s<e.length;s++)traverse(e[s],o);else if((0,d.DM)(e)||(0,d._N)(e))e.forEach((e=>{traverse(e,o)}));else if((0,d.PO)(e))for(const s in e)traverse(e[s],o);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return E((()=>{e.isMounted=!0})),A((()=>{e.isUnmounting=!0})),e}const x=[Function,Array],k={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:x,onEnter:x,onAfterEnter:x,onEnterCancelled:x,onBeforeLeave:x,onLeave:x,onAfterLeave:x,onLeaveCancelled:x,onBeforeAppear:x,onAppear:x,onAfterAppear:x,onAppearCancelled:x},setup(e,{slots:o}){const s=getCurrentInstance(),d=useTransitionState();let u;return()=>{const g=o.default&&getTransitionRawChildren(o.default(),!0);if(!g||!g.length)return;let p=g[0];if(g.length>1){let e=!1;for(const o of g)if(o.type!==q){0,p=o,e=!0;break}}const m=(0,l.IU)(e),{mode:f}=m;if(d.isLeaving)return emptyPlaceholder(p);const _=getKeepAliveChild(p);if(!_)return emptyPlaceholder(p);const C=resolveTransitionHooks(_,m,d,s);setTransitionHooks(_,C);const b=s.subTree,w=b&&getKeepAliveChild(b);let S=!1;const{getTransitionKey:y}=_.type;if(y){const e=y();void 0===u?u=e:e!==u&&(u=e,S=!0)}if(w&&w.type!==q&&(!isSameVNodeType(_,w)||S)){const e=resolveTransitionHooks(w,m,d,s);if(setTransitionHooks(w,e),"out-in"===f)return d.isLeaving=!0,e.afterLeave=()=>{d.isLeaving=!1,s.update()},emptyPlaceholder(p);"in-out"===f&&_.type!==q&&(e.delayLeave=(e,o,s)=>{const l=getLeavingNodesForType(d,w);l[String(w.key)]=w,e._leaveCb=()=>{o(),e._leaveCb=void 0,delete C.delayedLeave},C.delayedLeave=s})}return p}}},N=k;function getLeavingNodesForType(e,o){const{leavingVNodes:s}=e;let l=s.get(o.type);return l||(l=Object.create(null),s.set(o.type,l)),l}function resolveTransitionHooks(e,o,s,l){const{appear:u,mode:g,persisted:p=!1,onBeforeEnter:m,onEnter:f,onAfterEnter:_,onEnterCancelled:C,onBeforeLeave:b,onLeave:w,onAfterLeave:S,onLeaveCancelled:y,onBeforeAppear:L,onAppear:x,onAfterAppear:k,onAppearCancelled:N}=o,D=String(e.key),E=getLeavingNodesForType(s,e),callHook=(e,o)=>{e&&callWithAsyncErrorHandling(e,l,9,o)},callAsyncHook=(e,o)=>{const s=o[1];callHook(e,o),(0,d.kJ)(e)?e.every((e=>e.length<=1))&&s():e.length<=1&&s()},T={mode:g,persisted:p,beforeEnter(o){let l=m;if(!s.isMounted){if(!u)return;l=L||m}o._leaveCb&&o._leaveCb(!0);const d=E[D];d&&isSameVNodeType(e,d)&&d.el._leaveCb&&d.el._leaveCb(),callHook(l,[o])},enter(e){let o=f,l=_,d=C;if(!s.isMounted){if(!u)return;o=x||f,l=k||_,d=N||C}let g=!1;const p=e._enterCb=o=>{g||(g=!0,callHook(o?d:l,[e]),T.delayedLeave&&T.delayedLeave(),e._enterCb=void 0)};o?callAsyncHook(o,[e,p]):p()},leave(o,l){const d=String(e.key);if(o._enterCb&&o._enterCb(!0),s.isUnmounting)return l();callHook(b,[o]);let u=!1;const g=o._leaveCb=s=>{u||(u=!0,l(),callHook(s?y:S,[o]),o._leaveCb=void 0,E[d]===e&&delete E[d])};E[d]=e,w?callAsyncHook(w,[o,g]):g()},clone(e){return resolveTransitionHooks(e,o,s,l)}};return T}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,o){6&e.shapeFlag&&e.component?setTransitionHooks(e.component.subTree,o):128&e.shapeFlag?(e.ssContent.transition=o.clone(e.ssContent),e.ssFallback.transition=o.clone(e.ssFallback)):e.transition=o}function getTransitionRawChildren(e,o=!1,s){let l=[],d=0;for(let u=0;u<e.length;u++){let g=e[u];const p=null==s?g.key:String(s)+String(null!=g.key?g.key:u);g.type===j?(128&g.patchFlag&&d++,l=l.concat(getTransitionRawChildren(g.children,o,p))):(o||g.type!==q)&&l.push(null!=p?cloneVNode(g,{key:p}):g)}if(d>1)for(let u=0;u<l.length;u++)l[u].patchFlag=-2;return l}function defineComponent(e){return(0,d.mf)(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader;const isKeepAlive=e=>e.type.__isKeepAlive;RegExp,RegExp;function matches(e,o){return(0,d.kJ)(e)?e.some((e=>matches(e,o))):(0,d.HD)(e)?e.split(",").includes(o):!!e.test&&e.test(o)}function onActivated(e,o){registerKeepAliveHook(e,"a",o)}function onDeactivated(e,o){registerKeepAliveHook(e,"da",o)}function registerKeepAliveHook(e,o,s=ne){const l=e.__wdc||(e.__wdc=()=>{let o=s;while(o){if(o.isDeactivated)return;o=o.parent}return e()});if(injectHook(o,l,s),s){let e=s.parent;while(e&&e.parent)isKeepAlive(e.parent.vnode)&&injectToKeepAliveRoot(l,o,s,e),e=e.parent}}function injectToKeepAliveRoot(e,o,s,l){const u=injectHook(o,e,l,!0);M((()=>{(0,d.Od)(l[o],u)}),s)}function resetShapeFlag(e){let o=e.shapeFlag;256&o&&(o-=256),512&o&&(o-=512),e.shapeFlag=o}function getInnerChild(e){return 128&e.shapeFlag?e.ssContent:e}function injectHook(e,o,s=ne,d=!1){if(s){const u=s[e]||(s[e]=[]),g=o.__weh||(o.__weh=(...d)=>{if(s.isUnmounted)return;(0,l.Jd)(),setCurrentInstance(s);const u=callWithAsyncErrorHandling(o,s,e,d);return unsetCurrentInstance(),(0,l.lk)(),u});return d?u.unshift(g):u.push(g),g}}const createHook=e=>(o,s=ne)=>(!re||"sp"===e)&&injectHook(e,((...e)=>o(...e)),s),D=createHook("bm"),E=createHook("m"),T=createHook("bu"),I=createHook("u"),A=createHook("bum"),M=createHook("um"),R=createHook("sp"),P=createHook("rtg"),O=createHook("rtc");function onErrorCaptured(e,o=ne){injectHook("ec",e,o)}function invokeDirectiveHook(e,o,s,d){const u=e.dirs,g=o&&o.dirs;for(let p=0;p<u.length;p++){const m=u[p];g&&(m.oldValue=g[p].value);let f=m.dir[d];f&&((0,l.Jd)(),callWithAsyncErrorHandling(f,s,8,[e.el,m,e,o]),(0,l.lk)())}}const F="components";function resolveComponent(e,o){return resolveAsset(F,e,!0,o)||e}const B=Symbol();function resolveAsset(e,o,s=!0,l=!1){const u=S||ne;if(u){const s=u.type;if(e===F){const e=getComponentName(s,!1);if(e&&(e===o||e===(0,d._A)(o)||e===(0,d.kC)((0,d._A)(o))))return s}const g=resolve(u[e]||s[e],o)||resolve(u.appContext[e],o);return!g&&l?s:g}}function resolve(e,o){return e&&(e[o]||e[(0,d._A)(o)]||e[(0,d.kC)((0,d._A)(o))])}function renderList(e,o,s,l){let u;const g=s&&s[l];if((0,d.kJ)(e)||(0,d.HD)(e)){u=new Array(e.length);for(let s=0,l=e.length;s<l;s++)u[s]=o(e[s],s,void 0,g&&g[s])}else if("number"===typeof e){0,u=new Array(e);for(let s=0;s<e;s++)u[s]=o(s+1,s,void 0,g&&g[s])}else if((0,d.Kn)(e))if(e[Symbol.iterator])u=Array.from(e,((e,s)=>o(e,s,void 0,g&&g[s])));else{const s=Object.keys(e);u=new Array(s.length);for(let l=0,d=s.length;l<d;l++){const d=s[l];u[l]=o(e[d],d,l,g&&g[l])}}else u=[];return s&&(s[l]=u),u}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,W=(0,d.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),V={get({_:e},o){const{ctx:s,setupState:u,data:g,props:p,accessCache:m,type:f,appContext:_}=e;let C;if("$"!==o[0]){const l=m[o];if(void 0!==l)switch(l){case 1:return u[o];case 2:return g[o];case 4:return s[o];case 3:return p[o]}else{if(u!==d.kT&&(0,d.RI)(u,o))return m[o]=1,u[o];if(g!==d.kT&&(0,d.RI)(g,o))return m[o]=2,g[o];if((C=e.propsOptions[0])&&(0,d.RI)(C,o))return m[o]=3,p[o];if(s!==d.kT&&(0,d.RI)(s,o))return m[o]=4,s[o];H&&(m[o]=0)}}const b=W[o];let w,S;return b?("$attrs"===o&&(0,l.j)(e,"get",o),b(e)):(w=f.__cssModules)&&(w=w[o])?w:s!==d.kT&&(0,d.RI)(s,o)?(m[o]=4,s[o]):(S=_.config.globalProperties,(0,d.RI)(S,o)?S[o]:void 0)},set({_:e},o,s){const{data:l,setupState:u,ctx:g}=e;return u!==d.kT&&(0,d.RI)(u,o)?(u[o]=s,!0):l!==d.kT&&(0,d.RI)(l,o)?(l[o]=s,!0):!(0,d.RI)(e.props,o)&&(("$"!==o[0]||!(o.slice(1)in e))&&(g[o]=s,!0))},has({_:{data:e,setupState:o,accessCache:s,ctx:l,appContext:u,propsOptions:g}},p){let m;return!!s[p]||e!==d.kT&&(0,d.RI)(e,p)||o!==d.kT&&(0,d.RI)(o,p)||(m=g[0])&&(0,d.RI)(m,p)||(0,d.RI)(l,p)||(0,d.RI)(W,p)||(0,d.RI)(u.config.globalProperties,p)},defineProperty(e,o,s){return null!=s.get?e._.accessCache[o]=0:(0,d.RI)(s,"value")&&this.set(e,o,s.value,null),Reflect.defineProperty(e,o,s)}};let H=!0;function applyOptions(e){const o=resolveMergedOptions(e),s=e.proxy,u=e.ctx;H=!1,o.beforeCreate&&callHook(o.beforeCreate,e,"bc");const{data:g,computed:p,methods:m,watch:f,provide:_,inject:C,created:b,beforeMount:w,mounted:S,beforeUpdate:y,updated:L,activated:x,deactivated:k,beforeDestroy:N,beforeUnmount:F,destroyed:B,unmounted:W,render:V,renderTracked:z,renderTriggered:U,errorCaptured:K,serverPrefetch:j,expose:G,inheritAttrs:q,components:Q,directives:Z,filters:Y}=o,J=null;if(C&&resolveInjections(C,u,J,e.appContext.config.unwrapInjectedRef),m)for(const l in m){const e=m[l];(0,d.mf)(e)&&(u[l]=e.bind(s))}if(g){0;const o=g.call(s,s);0,(0,d.Kn)(o)&&(e.data=(0,l.qj)(o))}if(H=!0,p)for(const l in p){const e=p[l],o=(0,d.mf)(e)?e.bind(s,s):(0,d.mf)(e.get)?e.get.bind(s,s):d.dG;0;const g=!(0,d.mf)(e)&&(0,d.mf)(e.set)?e.set.bind(s):d.dG,m=computed({get:o,set:g});Object.defineProperty(u,l,{enumerable:!0,configurable:!0,get:()=>m.value,set:e=>m.value=e})}if(f)for(const l in f)createWatcher(f[l],u,s,l);if(_){const e=(0,d.mf)(_)?_.call(s):_;Reflect.ownKeys(e).forEach((o=>{provide(o,e[o])}))}function registerLifecycleHook(e,o){(0,d.kJ)(o)?o.forEach((o=>e(o.bind(s)))):o&&e(o.bind(s))}if(b&&callHook(b,e,"c"),registerLifecycleHook(D,w),registerLifecycleHook(E,S),registerLifecycleHook(T,y),registerLifecycleHook(I,L),registerLifecycleHook(onActivated,x),registerLifecycleHook(onDeactivated,k),registerLifecycleHook(onErrorCaptured,K),registerLifecycleHook(O,z),registerLifecycleHook(P,U),registerLifecycleHook(A,F),registerLifecycleHook(M,W),registerLifecycleHook(R,j),(0,d.kJ)(G))if(G.length){const o=e.exposed||(e.exposed={});G.forEach((e=>{Object.defineProperty(o,e,{get:()=>s[e],set:o=>s[e]=o})}))}else e.exposed||(e.exposed={});V&&e.render===d.dG&&(e.render=V),null!=q&&(e.inheritAttrs=q),Q&&(e.components=Q),Z&&(e.directives=Z)}function resolveInjections(e,o,s=d.dG,u=!1){(0,d.kJ)(e)&&(e=normalizeInject(e));for(const g in e){const s=e[g];let p;p=(0,d.Kn)(s)?"default"in s?inject(s.from||g,s.default,!0):inject(s.from||g):inject(s),(0,l.dq)(p)&&u?Object.defineProperty(o,g,{enumerable:!0,configurable:!0,get:()=>p.value,set:e=>p.value=e}):o[g]=p}}function callHook(e,o,s){callWithAsyncErrorHandling((0,d.kJ)(e)?e.map((e=>e.bind(o.proxy))):e.bind(o.proxy),o,s)}function createWatcher(e,o,s,l){const u=l.includes(".")?createPathGetter(s,l):()=>s[l];if((0,d.HD)(e)){const s=o[e];(0,d.mf)(s)&&watch(u,s)}else if((0,d.mf)(e))watch(u,e.bind(s));else if((0,d.Kn)(e))if((0,d.kJ)(e))e.forEach((e=>createWatcher(e,o,s,l)));else{const l=(0,d.mf)(e.handler)?e.handler.bind(s):o[e.handler];(0,d.mf)(l)&&watch(u,l,e)}else 0}function resolveMergedOptions(e){const o=e.type,{mixins:s,extends:l}=o,{mixins:u,optionsCache:g,config:{optionMergeStrategies:p}}=e.appContext,m=g.get(o);let f;return m?f=m:u.length||s||l?(f={},u.length&&u.forEach((e=>mergeOptions(f,e,p,!0))),mergeOptions(f,o,p)):f=o,(0,d.Kn)(o)&&g.set(o,f),f}function mergeOptions(e,o,s,l=!1){const{mixins:d,extends:u}=o;u&&mergeOptions(e,u,s,!0),d&&d.forEach((o=>mergeOptions(e,o,s,!0)));for(const g in o)if(l&&"expose"===g);else{const l=z[g]||s&&s[g];e[g]=l?l(e[g],o[g]):o[g]}return e}const z={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,o){return o?e?function mergedDataFn(){return(0,d.l7)((0,d.mf)(e)?e.call(this,this):e,(0,d.mf)(o)?o.call(this,this):o)}:o:e}function mergeInject(e,o){return mergeObjectOptions(normalizeInject(e),normalizeInject(o))}function normalizeInject(e){if((0,d.kJ)(e)){const o={};for(let s=0;s<e.length;s++)o[e[s]]=e[s];return o}return e}function mergeAsArray(e,o){return e?[...new Set([].concat(e,o))]:o}function mergeObjectOptions(e,o){return e?(0,d.l7)((0,d.l7)(Object.create(null),e),o):o}function mergeWatchOptions(e,o){if(!e)return o;if(!o)return e;const s=(0,d.l7)(Object.create(null),e);for(const l in o)s[l]=mergeAsArray(e[l],o[l]);return s}function initProps(e,o,s,u=!1){const g={},p={};(0,d.Nj)(p,X,1),e.propsDefaults=Object.create(null),setFullProps(e,o,g,p);for(const l in e.propsOptions[0])l in g||(g[l]=void 0);s?e.props=u?g:(0,l.Um)(g):e.type.props?e.props=g:e.props=p,e.attrs=p}function updateProps(e,o,s,u){const{props:g,attrs:p,vnode:{patchFlag:m}}=e,f=(0,l.IU)(g),[_]=e.propsOptions;let C=!1;if(!(u||m>0)||16&m){let l;setFullProps(e,o,g,p)&&(C=!0);for(const u in f)o&&((0,d.RI)(o,u)||(l=(0,d.rs)(u))!==u&&(0,d.RI)(o,l))||(_?!s||void 0===s[u]&&void 0===s[l]||(g[u]=resolvePropValue(_,f,u,void 0,e,!0)):delete g[u]);if(p!==f)for(const e in p)o&&(0,d.RI)(o,e)||(delete p[e],C=!0)}else if(8&m){const s=e.vnode.dynamicProps;for(let l=0;l<s.length;l++){let u=s[l];if(isEmitListener(e.emitsOptions,u))continue;const m=o[u];if(_)if((0,d.RI)(p,u))m!==p[u]&&(p[u]=m,C=!0);else{const o=(0,d._A)(u);g[o]=resolvePropValue(_,f,o,m,e,!1)}else m!==p[u]&&(p[u]=m,C=!0)}}C&&(0,l.X$)(e,"set","$attrs")}function setFullProps(e,o,s,u){const[g,p]=e.propsOptions;let m,f=!1;if(o)for(let l in o){if((0,d.Gg)(l))continue;const _=o[l];let C;g&&(0,d.RI)(g,C=(0,d._A)(l))?p&&p.includes(C)?(m||(m={}))[C]=_:s[C]=_:isEmitListener(e.emitsOptions,l)||l in u&&_===u[l]||(u[l]=_,f=!0)}if(p){const o=(0,l.IU)(s),u=m||d.kT;for(let l=0;l<p.length;l++){const m=p[l];s[m]=resolvePropValue(g,o,m,u[m],e,!(0,d.RI)(u,m))}}return f}function resolvePropValue(e,o,s,l,u,g){const p=e[s];if(null!=p){const e=(0,d.RI)(p,"default");if(e&&void 0===l){const e=p.default;if(p.type!==Function&&(0,d.mf)(e)){const{propsDefaults:d}=u;s in d?l=d[s]:(setCurrentInstance(u),l=d[s]=e.call(null,o),unsetCurrentInstance())}else l=e}p[0]&&(g&&!e?l=!1:!p[1]||""!==l&&l!==(0,d.rs)(s)||(l=!0))}return l}function normalizePropsOptions(e,o,s=!1){const l=o.propsCache,u=l.get(e);if(u)return u;const g=e.props,p={},m=[];let f=!1;if(!(0,d.mf)(e)){const extendProps=e=>{f=!0;const[s,l]=normalizePropsOptions(e,o,!0);(0,d.l7)(p,s),l&&m.push(...l)};!s&&o.mixins.length&&o.mixins.forEach(extendProps),e.extends&&extendProps(e.extends),e.mixins&&e.mixins.forEach(extendProps)}if(!g&&!f)return(0,d.Kn)(e)&&l.set(e,d.Z6),d.Z6;if((0,d.kJ)(g))for(let C=0;C<g.length;C++){0;const e=(0,d._A)(g[C]);validatePropName(e)&&(p[e]=d.kT)}else if(g){0;for(const e in g){const o=(0,d._A)(e);if(validatePropName(o)){const s=g[e],l=p[o]=(0,d.kJ)(s)||(0,d.mf)(s)?{type:s}:s;if(l){const e=getTypeIndex(Boolean,l.type),s=getTypeIndex(String,l.type);l[0]=e>-1,l[1]=s<0||e<s,(e>-1||(0,d.RI)(l,"default"))&&m.push(o)}}}}const _=[p,m];return(0,d.Kn)(e)&&l.set(e,_),_}function validatePropName(e){return"$"!==e[0]}function getType(e){const o=e&&e.toString().match(/^\s*function (\w+)/);return o?o[1]:null===e?"null":""}function isSameType(e,o){return getType(e)===getType(o)}function getTypeIndex(e,o){return(0,d.kJ)(o)?o.findIndex((o=>isSameType(o,e))):(0,d.mf)(o)&&isSameType(o,e)?0:-1}const isInternalKey=e=>"_"===e[0]||"$stable"===e,normalizeSlotValue=e=>(0,d.kJ)(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,o,s)=>{if(o._n)return o;const l=withCtx(((...e)=>normalizeSlotValue(o(...e))),s);return l._c=!1,l},normalizeObjectSlots=(e,o,s)=>{const l=e._ctx;for(const u in e){if(isInternalKey(u))continue;const s=e[u];if((0,d.mf)(s))o[u]=normalizeSlot(u,s,l);else if(null!=s){0;const e=normalizeSlotValue(s);o[u]=()=>e}}},normalizeVNodeSlots=(e,o)=>{const s=normalizeSlotValue(o);e.slots.default=()=>s},initSlots=(e,o)=>{if(32&e.vnode.shapeFlag){const s=o._;s?(e.slots=(0,l.IU)(o),(0,d.Nj)(o,"_",s)):normalizeObjectSlots(o,e.slots={})}else e.slots={},o&&normalizeVNodeSlots(e,o);(0,d.Nj)(e.slots,X,1)},updateSlots=(e,o,s)=>{const{vnode:l,slots:u}=e;let g=!0,p=d.kT;if(32&l.shapeFlag){const e=o._;e?s&&1===e?g=!1:((0,d.l7)(u,o),s||1!==e||delete u._):(g=!o.$stable,normalizeObjectSlots(o,u)),p=o}else o&&(normalizeVNodeSlots(e,o),p={default:1});if(g)for(const d in u)isInternalKey(d)||d in p||delete u[d]};function createAppContext(){return{app:null,config:{isNativeTag:d.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let U=0;function createAppAPI(e,o){return function createApp(s,l=null){(0,d.mf)(s)||(s=Object.assign({},s)),null==l||(0,d.Kn)(l)||(l=null);const u=createAppContext(),g=new Set;let p=!1;const m=u.app={_uid:U++,_component:s,_props:l,_container:null,_context:u,_instance:null,version:ae,get config(){return u.config},set config(e){0},use(e,...o){return g.has(e)||(e&&(0,d.mf)(e.install)?(g.add(e),e.install(m,...o)):(0,d.mf)(e)&&(g.add(e),e(m,...o))),m},mixin(e){return u.mixins.includes(e)||u.mixins.push(e),m},component(e,o){return o?(u.components[e]=o,m):u.components[e]},directive(e,o){return o?(u.directives[e]=o,m):u.directives[e]},mount(d,g,f){if(!p){0;const _=ee(s,l);return _.appContext=u,g&&o?o(_,d):e(_,d,f),p=!0,m._container=d,d.__vue_app__=m,getExposeProxy(_.component)||_.component.proxy}},unmount(){p&&(e(null,m._container),delete m._container.__vue_app__)},provide(e,o){return u.provides[e]=o,m}};return m}}function setRef(e,o,s,u,g=!1){if((0,d.kJ)(e))return void e.forEach(((e,l)=>setRef(e,o&&((0,d.kJ)(o)?o[l]:o),s,u,g)));if(isAsyncWrapper(u)&&!g)return;const p=4&u.shapeFlag?getExposeProxy(u.component)||u.component.proxy:u.el,m=g?null:p,{i:f,r:_}=e;const C=o&&o.r,b=f.refs===d.kT?f.refs={}:f.refs,w=f.setupState;if(null!=C&&C!==_&&((0,d.HD)(C)?(b[C]=null,(0,d.RI)(w,C)&&(w[C]=null)):(0,l.dq)(C)&&(C.value=null)),(0,d.mf)(_))callWithErrorHandling(_,f,12,[m,b]);else{const o=(0,d.HD)(_),u=(0,l.dq)(_);if(o||u){const doSet=()=>{if(e.f){const s=o?(0,d.RI)(w,_)?w[_]:b[_]:_.value;g?(0,d.kJ)(s)&&(0,d.Od)(s,p):(0,d.kJ)(s)?s.includes(p)||s.push(p):o?(b[_]=[p],(0,d.RI)(w,_)&&(w[_]=b[_])):(_.value=[p],e.k&&(b[e.k]=_.value))}else o?(b[_]=m,(0,d.RI)(w,_)&&(w[_]=m)):u&&(_.value=m,e.k&&(b[e.k]=m))};m?(doSet.id=-1,K(doSet,s)):doSet()}else 0}}function initFeatureFlags(){}const K=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,o){initFeatureFlags();const s=(0,d.E9)();s.__VUE__=!0;const{insert:u,remove:g,patchProp:p,createElement:m,createText:f,createComment:_,setText:C,setElementText:b,parentNode:w,nextSibling:S,setScopeId:y=d.dG,insertStaticContent:L}=e,patch=(e,o,s,l=null,d=null,u=null,g=!1,p=null,m=!!o.dynamicChildren)=>{if(e===o)return;e&&!isSameVNodeType(e,o)&&(l=getNextHostNode(e),unmount(e,d,u,!0),e=null),-2===o.patchFlag&&(m=!1,o.dynamicChildren=null);const{type:f,ref:_,shapeFlag:C}=o;switch(f){case G:processText(e,o,s,l);break;case q:processCommentNode(e,o,s,l);break;case Q:null==e&&mountStaticNode(o,s,l,g);break;case j:processFragment(e,o,s,l,d,u,g,p,m);break;default:1&C?processElement(e,o,s,l,d,u,g,p,m):6&C?processComponent(e,o,s,l,d,u,g,p,m):(64&C||128&C)&&f.process(e,o,s,l,d,u,g,p,m,x)}null!=_&&d&&setRef(_,e&&e.ref,u,o||e,!o)},processText=(e,o,s,l)=>{if(null==e)u(o.el=f(o.children),s,l);else{const s=o.el=e.el;o.children!==e.children&&C(s,o.children)}},processCommentNode=(e,o,s,l)=>{null==e?u(o.el=_(o.children||""),s,l):o.el=e.el},mountStaticNode=(e,o,s,l)=>{[e.el,e.anchor]=L(e.children,o,s,l,e.el,e.anchor)},moveStaticNode=({el:e,anchor:o},s,l)=>{let d;while(e&&e!==o)d=S(e),u(e,s,l),e=d;u(o,s,l)},removeStaticNode=({el:e,anchor:o})=>{let s;while(e&&e!==o)s=S(e),g(e),e=s;g(o)},processElement=(e,o,s,l,d,u,g,p,m)=>{g=g||"svg"===o.type,null==e?mountElement(o,s,l,d,u,g,p,m):patchElement(e,o,d,u,g,p,m)},mountElement=(e,o,s,l,g,f,_,C)=>{let w,S;const{type:y,props:L,shapeFlag:x,transition:k,dirs:N}=e;if(w=e.el=m(e.type,f,L&&L.is,L),8&x?b(w,e.children):16&x&&mountChildren(e.children,w,null,l,g,f&&"foreignObject"!==y,_,C),N&&invokeDirectiveHook(e,null,l,"created"),L){for(const o in L)"value"===o||(0,d.Gg)(o)||p(w,o,null,L[o],f,e.children,l,g,unmountChildren);"value"in L&&p(w,"value",null,L.value),(S=L.onVnodeBeforeMount)&&invokeVNodeHook(S,l,e)}setScopeId(w,e,e.scopeId,_,l),N&&invokeDirectiveHook(e,null,l,"beforeMount");const D=(!g||g&&!g.pendingBranch)&&k&&!k.persisted;D&&k.beforeEnter(w),u(w,o,s),((S=L&&L.onVnodeMounted)||D||N)&&K((()=>{S&&invokeVNodeHook(S,l,e),D&&k.enter(w),N&&invokeDirectiveHook(e,null,l,"mounted")}),g)},setScopeId=(e,o,s,l,d)=>{if(s&&y(e,s),l)for(let u=0;u<l.length;u++)y(e,l[u]);if(d){let s=d.subTree;if(o===s){const o=d.vnode;setScopeId(e,o,o.scopeId,o.slotScopeIds,d.parent)}}},mountChildren=(e,o,s,l,d,u,g,p,m=0)=>{for(let f=m;f<e.length;f++){const m=e[f]=p?cloneIfMounted(e[f]):normalizeVNode(e[f]);patch(null,m,o,s,l,d,u,g,p)}},patchElement=(e,o,s,l,u,g,m)=>{const f=o.el=e.el;let{patchFlag:_,dynamicChildren:C,dirs:w}=o;_|=16&e.patchFlag;const S=e.props||d.kT,y=o.props||d.kT;let L;s&&toggleRecurse(s,!1),(L=y.onVnodeBeforeUpdate)&&invokeVNodeHook(L,s,o,e),w&&invokeDirectiveHook(o,e,s,"beforeUpdate"),s&&toggleRecurse(s,!0);const x=u&&"foreignObject"!==o.type;if(C?patchBlockChildren(e.dynamicChildren,C,f,s,l,x,g):m||patchChildren(e,o,f,null,s,l,x,g,!1),_>0){if(16&_)patchProps(f,o,S,y,s,l,u);else if(2&_&&S.class!==y.class&&p(f,"class",null,y.class,u),4&_&&p(f,"style",S.style,y.style,u),8&_){const d=o.dynamicProps;for(let o=0;o<d.length;o++){const g=d[o],m=S[g],_=y[g];_===m&&"value"!==g||p(f,g,m,_,u,e.children,s,l,unmountChildren)}}1&_&&e.children!==o.children&&b(f,o.children)}else m||null!=C||patchProps(f,o,S,y,s,l,u);((L=y.onVnodeUpdated)||w)&&K((()=>{L&&invokeVNodeHook(L,s,o,e),w&&invokeDirectiveHook(o,e,s,"updated")}),l)},patchBlockChildren=(e,o,s,l,d,u,g)=>{for(let p=0;p<o.length;p++){const m=e[p],f=o[p],_=m.el&&(m.type===j||!isSameVNodeType(m,f)||70&m.shapeFlag)?w(m.el):s;patch(m,f,_,null,l,d,u,g,!0)}},patchProps=(e,o,s,l,u,g,m)=>{if(s!==l){if(s!==d.kT)for(const f in s)(0,d.Gg)(f)||f in l||p(e,f,s[f],null,m,o.children,u,g,unmountChildren);for(const f in l){if((0,d.Gg)(f))continue;const _=l[f],C=s[f];_!==C&&"value"!==f&&p(e,f,C,_,m,o.children,u,g,unmountChildren)}"value"in l&&p(e,"value",s.value,l.value)}},processFragment=(e,o,s,l,d,g,p,m,_)=>{const C=o.el=e?e.el:f(""),b=o.anchor=e?e.anchor:f("");let{patchFlag:w,dynamicChildren:S,slotScopeIds:y}=o;y&&(m=m?m.concat(y):y),null==e?(u(C,s,l),u(b,s,l),mountChildren(o.children,s,b,d,g,p,m,_)):w>0&&64&w&&S&&e.dynamicChildren?(patchBlockChildren(e.dynamicChildren,S,s,d,g,p,m),(null!=o.key||d&&o===d.subTree)&&traverseStaticChildren(e,o,!0)):patchChildren(e,o,s,b,d,g,p,m,_)},processComponent=(e,o,s,l,d,u,g,p,m)=>{o.slotScopeIds=p,null==e?512&o.shapeFlag?d.ctx.activate(o,s,l,g,m):mountComponent(o,s,l,d,u,g,m):updateComponent(e,o,m)},mountComponent=(e,o,s,l,d,u,g)=>{const p=e.component=createComponentInstance(e,l,d);if(isKeepAlive(e)&&(p.ctx.renderer=x),setupComponent(p),p.asyncDep){if(d&&d.registerDep(p,setupRenderEffect),!e.el){const e=p.subTree=ee(q);processCommentNode(null,e,o,s)}}else setupRenderEffect(p,e,o,s,d,u,g)},updateComponent=(e,o,s)=>{const l=o.component=e.component;if(shouldUpdateComponent(e,o,s)){if(l.asyncDep&&!l.asyncResolved)return void updateComponentPreRender(l,o,s);l.next=o,invalidateJob(l.update),l.update()}else o.el=e.el,l.vnode=o},setupRenderEffect=(e,o,s,u,g,p,m)=>{const componentUpdateFn=()=>{if(e.isMounted){let o,{next:s,bu:l,u:u,parent:f,vnode:_}=e,C=s;0,toggleRecurse(e,!1),s?(s.el=_.el,updateComponentPreRender(e,s,m)):s=_,l&&(0,d.ir)(l),(o=s.props&&s.props.onVnodeBeforeUpdate)&&invokeVNodeHook(o,f,s,_),toggleRecurse(e,!0);const b=renderComponentRoot(e);0;const S=e.subTree;e.subTree=b,patch(S,b,w(S.el),getNextHostNode(S),e,g,p),s.el=b.el,null===C&&updateHOCHostEl(e,b.el),u&&K(u,g),(o=s.props&&s.props.onVnodeUpdated)&&K((()=>invokeVNodeHook(o,f,s,_)),g)}else{let l;const{el:m,props:f}=o,{bm:_,m:C,parent:b}=e,w=isAsyncWrapper(o);if(toggleRecurse(e,!1),_&&(0,d.ir)(_),!w&&(l=f&&f.onVnodeBeforeMount)&&invokeVNodeHook(l,b,o),toggleRecurse(e,!0),m&&N){const hydrateSubTree=()=>{e.subTree=renderComponentRoot(e),N(m,e.subTree,e,g,null)};w?o.type.__asyncLoader().then((()=>!e.isUnmounted&&hydrateSubTree())):hydrateSubTree()}else{0;const l=e.subTree=renderComponentRoot(e);0,patch(null,l,s,u,e,g,p),o.el=l.el}if(C&&K(C,g),!w&&(l=f&&f.onVnodeMounted)){const e=o;K((()=>invokeVNodeHook(l,b,e)),g)}(256&o.shapeFlag||b&&isAsyncWrapper(b.vnode)&&256&b.vnode.shapeFlag)&&e.a&&K(e.a,g),e.isMounted=!0,o=s=u=null}},f=e.effect=new l.qq(componentUpdateFn,(()=>queueJob(_)),e.scope),_=e.update=()=>f.run();_.id=e.uid,toggleRecurse(e,!0),_()},updateComponentPreRender=(e,o,s)=>{o.component=e;const d=e.vnode.props;e.vnode=o,e.next=null,updateProps(e,o.props,d,s),updateSlots(e,o.children,s),(0,l.Jd)(),flushPreFlushCbs(),(0,l.lk)()},patchChildren=(e,o,s,l,d,u,g,p,m=!1)=>{const f=e&&e.children,_=e?e.shapeFlag:0,C=o.children,{patchFlag:w,shapeFlag:S}=o;if(w>0){if(128&w)return void patchKeyedChildren(f,C,s,l,d,u,g,p,m);if(256&w)return void patchUnkeyedChildren(f,C,s,l,d,u,g,p,m)}8&S?(16&_&&unmountChildren(f,d,u),C!==f&&b(s,C)):16&_?16&S?patchKeyedChildren(f,C,s,l,d,u,g,p,m):unmountChildren(f,d,u,!0):(8&_&&b(s,""),16&S&&mountChildren(C,s,l,d,u,g,p,m))},patchUnkeyedChildren=(e,o,s,l,u,g,p,m,f)=>{e=e||d.Z6,o=o||d.Z6;const _=e.length,C=o.length,b=Math.min(_,C);let w;for(w=0;w<b;w++){const l=o[w]=f?cloneIfMounted(o[w]):normalizeVNode(o[w]);patch(e[w],l,s,null,u,g,p,m,f)}_>C?unmountChildren(e,u,g,!0,!1,b):mountChildren(o,s,l,u,g,p,m,f,b)},patchKeyedChildren=(e,o,s,l,u,g,p,m,f)=>{let _=0;const C=o.length;let b=e.length-1,w=C-1;while(_<=b&&_<=w){const l=e[_],d=o[_]=f?cloneIfMounted(o[_]):normalizeVNode(o[_]);if(!isSameVNodeType(l,d))break;patch(l,d,s,null,u,g,p,m,f),_++}while(_<=b&&_<=w){const l=e[b],d=o[w]=f?cloneIfMounted(o[w]):normalizeVNode(o[w]);if(!isSameVNodeType(l,d))break;patch(l,d,s,null,u,g,p,m,f),b--,w--}if(_>b){if(_<=w){const e=w+1,d=e<C?o[e].el:l;while(_<=w)patch(null,o[_]=f?cloneIfMounted(o[_]):normalizeVNode(o[_]),s,d,u,g,p,m,f),_++}}else if(_>w)while(_<=b)unmount(e[_],u,g,!0),_++;else{const S=_,y=_,L=new Map;for(_=y;_<=w;_++){const e=o[_]=f?cloneIfMounted(o[_]):normalizeVNode(o[_]);null!=e.key&&L.set(e.key,_)}let x,k=0;const N=w-y+1;let D=!1,E=0;const T=new Array(N);for(_=0;_<N;_++)T[_]=0;for(_=S;_<=b;_++){const l=e[_];if(k>=N){unmount(l,u,g,!0);continue}let d;if(null!=l.key)d=L.get(l.key);else for(x=y;x<=w;x++)if(0===T[x-y]&&isSameVNodeType(l,o[x])){d=x;break}void 0===d?unmount(l,u,g,!0):(T[d-y]=_+1,d>=E?E=d:D=!0,patch(l,o[d],s,null,u,g,p,m,f),k++)}const I=D?getSequence(T):d.Z6;for(x=I.length-1,_=N-1;_>=0;_--){const e=y+_,d=o[e],b=e+1<C?o[e+1].el:l;0===T[_]?patch(null,d,s,b,u,g,p,m,f):D&&(x<0||_!==I[x]?move(d,s,b,2):x--)}}},move=(e,o,s,l,d=null)=>{const{el:g,type:p,transition:m,children:f,shapeFlag:_}=e;if(6&_)return void move(e.component.subTree,o,s,l);if(128&_)return void e.suspense.move(o,s,l);if(64&_)return void p.move(e,o,s,x);if(p===j){u(g,o,s);for(let e=0;e<f.length;e++)move(f[e],o,s,l);return void u(e.anchor,o,s)}if(p===Q)return void moveStaticNode(e,o,s);const C=2!==l&&1&_&&m;if(C)if(0===l)m.beforeEnter(g),u(g,o,s),K((()=>m.enter(g)),d);else{const{leave:e,delayLeave:l,afterLeave:d}=m,remove=()=>u(g,o,s),performLeave=()=>{e(g,(()=>{remove(),d&&d()}))};l?l(g,remove,performLeave):performLeave()}else u(g,o,s)},unmount=(e,o,s,l=!1,d=!1)=>{const{type:u,props:g,ref:p,children:m,dynamicChildren:f,shapeFlag:_,patchFlag:C,dirs:b}=e;if(null!=p&&setRef(p,null,s,e,!0),256&_)return void o.ctx.deactivate(e);const w=1&_&&b,S=!isAsyncWrapper(e);let y;if(S&&(y=g&&g.onVnodeBeforeUnmount)&&invokeVNodeHook(y,o,e),6&_)unmountComponent(e.component,s,l);else{if(128&_)return void e.suspense.unmount(s,l);w&&invokeDirectiveHook(e,null,o,"beforeUnmount"),64&_?e.type.remove(e,o,s,d,x,l):f&&(u!==j||C>0&&64&C)?unmountChildren(f,o,s,!1,!0):(u===j&&384&C||!d&&16&_)&&unmountChildren(m,o,s),l&&remove(e)}(S&&(y=g&&g.onVnodeUnmounted)||w)&&K((()=>{y&&invokeVNodeHook(y,o,e),w&&invokeDirectiveHook(e,null,o,"unmounted")}),s)},remove=e=>{const{type:o,el:s,anchor:l,transition:d}=e;if(o===j)return void removeFragment(s,l);if(o===Q)return void removeStaticNode(e);const performRemove=()=>{g(s),d&&!d.persisted&&d.afterLeave&&d.afterLeave()};if(1&e.shapeFlag&&d&&!d.persisted){const{leave:o,delayLeave:l}=d,performLeave=()=>o(s,performRemove);l?l(e.el,performRemove,performLeave):performLeave()}else performRemove()},removeFragment=(e,o)=>{let s;while(e!==o)s=S(e),g(e),e=s;g(o)},unmountComponent=(e,o,s)=>{const{bum:l,scope:u,update:g,subTree:p,um:m}=e;l&&(0,d.ir)(l),u.stop(),g&&(g.active=!1,unmount(p,e,o,s)),m&&K(m,o),K((()=>{e.isUnmounted=!0}),o),o&&o.pendingBranch&&!o.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===o.pendingId&&(o.deps--,0===o.deps&&o.resolve())},unmountChildren=(e,o,s,l=!1,d=!1,u=0)=>{for(let g=u;g<e.length;g++)unmount(e[g],o,s,l,d)},getNextHostNode=e=>6&e.shapeFlag?getNextHostNode(e.component.subTree):128&e.shapeFlag?e.suspense.next():S(e.anchor||e.el),render=(e,o,s)=>{null==e?o._vnode&&unmount(o._vnode,null,null,!0):patch(o._vnode||null,e,o,null,null,null,s),flushPreFlushCbs(),flushPostFlushCbs(),o._vnode=e},x={p:patch,um:unmount,m:move,r:remove,mt:mountComponent,mc:mountChildren,pc:patchChildren,pbc:patchBlockChildren,n:getNextHostNode,o:e};let k,N;return o&&([k,N]=o(x)),{render:render,hydrate:k,createApp:createAppAPI(render,k)}}function toggleRecurse({effect:e,update:o},s){e.allowRecurse=o.allowRecurse=s}function traverseStaticChildren(e,o,s=!1){const l=e.children,u=o.children;if((0,d.kJ)(l)&&(0,d.kJ)(u))for(let d=0;d<l.length;d++){const e=l[d];let o=u[d];1&o.shapeFlag&&!o.dynamicChildren&&((o.patchFlag<=0||32===o.patchFlag)&&(o=u[d]=cloneIfMounted(u[d]),o.el=e.el),s||traverseStaticChildren(e,o))}}function getSequence(e){const o=e.slice(),s=[0];let l,d,u,g,p;const m=e.length;for(l=0;l<m;l++){const m=e[l];if(0!==m){if(d=s[s.length-1],e[d]<m){o[l]=d,s.push(l);continue}u=0,g=s.length-1;while(u<g)p=u+g>>1,e[s[p]]<m?u=p+1:g=p;m<e[s[u]]&&(u>0&&(o[l]=s[u-1]),s[u]=l)}}u=s.length,g=s[u-1];while(u-- >0)s[u]=g,g=o[g];return s}const isTeleport=e=>e.__isTeleport;const j=Symbol(void 0),G=Symbol(void 0),q=Symbol(void 0),Q=Symbol(void 0),Z=[];let Y=null;function openBlock(e=!1){Z.push(Y=e?null:[])}function closeBlock(){Z.pop(),Y=Z[Z.length-1]||null}let J=1;function setBlockTracking(e){J+=e}function setupBlock(e){return e.dynamicChildren=J>0?Y||d.Z6:null,closeBlock(),J>0&&Y&&Y.push(e),e}function createElementBlock(e,o,s,l,d,u){return setupBlock(createBaseVNode(e,o,s,l,d,u,!0))}function createBlock(e,o,s,l,d){return setupBlock(ee(e,o,s,l,d,!0))}function isVNode(e){return!!e&&!0===e.__v_isVNode}function isSameVNodeType(e,o){return e.type===o.type&&e.key===o.key}const X="__vInternal",normalizeKey=({key:e})=>null!=e?e:null,normalizeRef=({ref:e,ref_key:o,ref_for:s})=>null!=e?(0,d.HD)(e)||(0,l.dq)(e)||(0,d.mf)(e)?{i:S,r:e,k:o,f:!!s}:e:null;function createBaseVNode(e,o=null,s=null,l=0,u=null,g=(e===j?0:1),p=!1,m=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:o,key:o&&normalizeKey(o),ref:o&&normalizeRef(o),scopeId:y,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:l,dynamicProps:u,dynamicChildren:null,appContext:null};return m?(normalizeChildren(f,s),128&g&&e.normalize(f)):s&&(f.shapeFlag|=(0,d.HD)(s)?8:16),J>0&&!p&&Y&&(f.patchFlag>0||6&g)&&32!==f.patchFlag&&Y.push(f),f}const ee=_createVNode;function _createVNode(e,o=null,s=null,u=0,g=null,p=!1){if(e&&e!==B||(e=q),isVNode(e)){const l=cloneVNode(e,o,!0);return s&&normalizeChildren(l,s),J>0&&!p&&Y&&(6&l.shapeFlag?Y[Y.indexOf(e)]=l:Y.push(l)),l.patchFlag|=-2,l}if(isClassComponent(e)&&(e=e.__vccOpts),o){o=guardReactiveProps(o);let{class:e,style:s}=o;e&&!(0,d.HD)(e)&&(o.class=(0,d.C_)(e)),(0,d.Kn)(s)&&((0,l.X3)(s)&&!(0,d.kJ)(s)&&(s=(0,d.l7)({},s)),o.style=(0,d.j5)(s))}const m=(0,d.HD)(e)?1:isSuspense(e)?128:isTeleport(e)?64:(0,d.Kn)(e)?4:(0,d.mf)(e)?2:0;return createBaseVNode(e,o,s,u,g,m,p,!0)}function guardReactiveProps(e){return e?(0,l.X3)(e)||X in e?(0,d.l7)({},e):e:null}function cloneVNode(e,o,s=!1){const{props:l,ref:u,patchFlag:g,children:p}=e,m=o?mergeProps(l||{},o):l,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&normalizeKey(m),ref:o&&o.ref?s&&u?(0,d.kJ)(u)?u.concat(normalizeRef(o)):[u,normalizeRef(o)]:normalizeRef(o):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:p,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:o&&e.type!==j?-1===g?16:16|g:g,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor};return f}function createTextVNode(e=" ",o=0){return ee(G,null,e,o)}function createStaticVNode(e,o){const s=ee(Q,null,e);return s.staticCount=o,s}function normalizeVNode(e){return null==e||"boolean"===typeof e?ee(q):(0,d.kJ)(e)?ee(j,null,e.slice()):"object"===typeof e?cloneIfMounted(e):ee(G,null,String(e))}function cloneIfMounted(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:cloneVNode(e)}function normalizeChildren(e,o){let s=0;const{shapeFlag:l}=e;if(null==o)o=null;else if((0,d.kJ)(o))s=16;else if("object"===typeof o){if(65&l){const s=o.default;return void(s&&(s._c&&(s._d=!1),normalizeChildren(e,s()),s._c&&(s._d=!0)))}{s=32;const l=o._;l||X in o?3===l&&S&&(1===S.slots._?o._=1:(o._=2,e.patchFlag|=1024)):o._ctx=S}}else(0,d.mf)(o)?(o={default:o,_ctx:S},s=32):(o=String(o),64&l?(s=16,o=[createTextVNode(o)]):s=8);e.children=o,e.shapeFlag|=s}function mergeProps(...e){const o={};for(let s=0;s<e.length;s++){const l=e[s];for(const e in l)if("class"===e)o.class!==l.class&&(o.class=(0,d.C_)([o.class,l.class]));else if("style"===e)o.style=(0,d.j5)([o.style,l.style]);else if((0,d.F7)(e)){const s=o[e],u=l[e];!u||s===u||(0,d.kJ)(s)&&s.includes(u)||(o[e]=s?[].concat(s,u):u)}else""!==e&&(o[e]=l[e])}return o}function invokeVNodeHook(e,o,s,l=null){callWithAsyncErrorHandling(e,o,7,[s,l])}const te=createAppContext();let ie=0;function createComponentInstance(e,o,s){const u=e.type,g=(o?o.appContext:e.appContext)||te,p={uid:ie++,vnode:e,type:u,parent:o,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,scope:new l.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(g.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(u,g),emitsOptions:normalizeEmitsOptions(u,g),emit:null,emitted:null,propsDefaults:d.kT,inheritAttrs:u.inheritAttrs,ctx:d.kT,data:d.kT,props:d.kT,attrs:d.kT,slots:d.kT,refs:d.kT,setupState:d.kT,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=o?o.root:p,p.emit=emit$1.bind(null,p),e.ce&&e.ce(p),p}let ne=null;const getCurrentInstance=()=>ne||S,setCurrentInstance=e=>{ne=e,e.scope.on()},unsetCurrentInstance=()=>{ne&&ne.scope.off(),ne=null};function isStatefulComponent(e){return 4&e.vnode.shapeFlag}let oe,se,re=!1;function setupComponent(e,o=!1){re=o;const{props:s,children:l}=e.vnode,d=isStatefulComponent(e);initProps(e,s,d,o),initSlots(e,l);const u=d?setupStatefulComponent(e,o):void 0;return re=!1,u}function setupStatefulComponent(e,o){const s=e.type;e.accessCache=Object.create(null),e.proxy=(0,l.Xl)(new Proxy(e.ctx,V));const{setup:u}=s;if(u){const s=e.setupContext=u.length>1?createSetupContext(e):null;setCurrentInstance(e),(0,l.Jd)();const g=callWithErrorHandling(u,e,0,[e.props,s]);if((0,l.lk)(),unsetCurrentInstance(),(0,d.tI)(g)){if(g.then(unsetCurrentInstance,unsetCurrentInstance),o)return g.then((s=>{handleSetupResult(e,s,o)})).catch((o=>{handleError(o,e,0)}));e.asyncDep=g}else handleSetupResult(e,g,o)}else finishComponentSetup(e,o)}function handleSetupResult(e,o,s){(0,d.mf)(o)?e.type.__ssrInlineRender?e.ssrRender=o:e.render=o:(0,d.Kn)(o)&&(e.setupState=(0,l.WL)(o)),finishComponentSetup(e,s)}function finishComponentSetup(e,o,s){const u=e.type;if(!e.render){if(!o&&oe&&!u.render){const o=u.template||resolveMergedOptions(e).template;if(o){0;const{isCustomElement:s,compilerOptions:l}=e.appContext.config,{delimiters:g,compilerOptions:p}=u,m=(0,d.l7)((0,d.l7)({isCustomElement:s,delimiters:g},l),p);u.render=oe(o,m)}}e.render=u.render||d.dG,se&&se(e)}setCurrentInstance(e),(0,l.Jd)(),applyOptions(e),(0,l.lk)(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get(o,s){return(0,l.j)(e,"get","$attrs"),o[s]}})}function createSetupContext(e){const expose=o=>{e.exposed=o||{}};let o;return{get attrs(){return o||(o=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:expose}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,l.WL)((0,l.Xl)(e.exposed)),{get(o,s){return s in o?o[s]:s in W?W[s](e):void 0}}))}function getComponentName(e,o=!0){return(0,d.mf)(e)?e.displayName||e.name:e.name||o&&e.__name}function isClassComponent(e){return(0,d.mf)(e)&&"__vccOpts"in e}const computed=(e,o)=>(0,l.Fl)(e,o,re);function h(e,o,s){const l=arguments.length;return 2===l?(0,d.Kn)(o)&&!(0,d.kJ)(o)?isVNode(o)?ee(e,null,[o]):ee(e,o):ee(e,null,o):(l>3?s=Array.prototype.slice.call(arguments,2):3===l&&isVNode(s)&&(s=[s]),ee(e,o,s))}Symbol("");const ae="3.2.41"},9963:function(e,o,s){"use strict";s.d(o,{ri:function(){return createApp}});var l=s(3577),d=s(6252);s(2262);const u="http://www.w3.org/2000/svg",g="undefined"!==typeof document?document:null,p=g&&g.createElement("template"),m={insert:(e,o,s)=>{o.insertBefore(e,s||null)},remove:e=>{const o=e.parentNode;o&&o.removeChild(e)},createElement:(e,o,s,l)=>{const d=o?g.createElementNS(u,e):g.createElement(e,s?{is:s}:void 0);return"select"===e&&l&&null!=l.multiple&&d.setAttribute("multiple",l.multiple),d},createText:e=>g.createTextNode(e),createComment:e=>g.createComment(e),setText:(e,o)=>{e.nodeValue=o},setElementText:(e,o)=>{e.textContent=o},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>g.querySelector(e),setScopeId(e,o){e.setAttribute(o,"")},insertStaticContent(e,o,s,l,d,u){const g=s?s.previousSibling:o.lastChild;if(d&&(d===u||d.nextSibling)){while(1)if(o.insertBefore(d.cloneNode(!0),s),d===u||!(d=d.nextSibling))break}else{p.innerHTML=l?`<svg>${e}</svg>`:e;const d=p.content;if(l){const e=d.firstChild;while(e.firstChild)d.appendChild(e.firstChild);d.removeChild(e)}o.insertBefore(d,s)}return[g?g.nextSibling:o.firstChild,s?s.previousSibling:o.lastChild]}};function patchClass(e,o,s){const l=e._vtc;l&&(o=(o?[o,...l]:[...l]).join(" ")),null==o?e.removeAttribute("class"):s?e.setAttribute("class",o):e.className=o}function patchStyle(e,o,s){const d=e.style,u=(0,l.HD)(s);if(s&&!u){for(const e in s)setStyle(d,e,s[e]);if(o&&!(0,l.HD)(o))for(const e in o)null==s[e]&&setStyle(d,e,"")}else{const l=d.display;u?o!==s&&(d.cssText=s):o&&e.removeAttribute("style"),"_vod"in e&&(d.display=l)}}const f=/\s*!important$/;function setStyle(e,o,s){if((0,l.kJ)(s))s.forEach((s=>setStyle(e,o,s)));else if(null==s&&(s=""),o.startsWith("--"))e.setProperty(o,s);else{const d=autoPrefix(e,o);f.test(s)?e.setProperty((0,l.rs)(d),s.replace(f,""),"important"):e[d]=s}}const _=["Webkit","Moz","ms"],C={};function autoPrefix(e,o){const s=C[o];if(s)return s;let d=(0,l._A)(o);if("filter"!==d&&d in e)return C[o]=d;d=(0,l.kC)(d);for(let l=0;l<_.length;l++){const s=_[l]+d;if(s in e)return C[o]=s}return o}const b="http://www.w3.org/1999/xlink";function patchAttr(e,o,s,d,u){if(d&&o.startsWith("xlink:"))null==s?e.removeAttributeNS(b,o.slice(6,o.length)):e.setAttributeNS(b,o,s);else{const d=(0,l.Pq)(o);null==s||d&&!(0,l.yA)(s)?e.removeAttribute(o):e.setAttribute(o,d?"":s)}}function patchDOMProp(e,o,s,d,u,g,p){if("innerHTML"===o||"textContent"===o)return d&&p(d,u,g),void(e[o]=null==s?"":s);if("value"===o&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=s;const l=null==s?"":s;return e.value===l&&"OPTION"!==e.tagName||(e.value=l),void(null==s&&e.removeAttribute(o))}let m=!1;if(""===s||null==s){const d=typeof e[o];"boolean"===d?s=(0,l.yA)(s):null==s&&"string"===d?(s="",m=!0):"number"===d&&(s=0,m=!0)}try{e[o]=s}catch(f){0}m&&e.removeAttribute(o)}function addEventListener(e,o,s,l){e.addEventListener(o,s,l)}function removeEventListener(e,o,s,l){e.removeEventListener(o,s,l)}function patchEvent(e,o,s,l,d=null){const u=e._vei||(e._vei={}),g=u[o];if(l&&g)g.value=l;else{const[s,p]=parseName(o);if(l){const g=u[o]=createInvoker(l,d);addEventListener(e,s,g,p)}else g&&(removeEventListener(e,s,g,p),u[o]=void 0)}}const w=/(?:Once|Passive|Capture)$/;function parseName(e){let o;if(w.test(e)){let s;o={};while(s=e.match(w))e=e.slice(0,e.length-s[0].length),o[s[0].toLowerCase()]=!0}const s=":"===e[2]?e.slice(3):(0,l.rs)(e.slice(2));return[s,o]}let S=0;const y=Promise.resolve(),getNow=()=>S||(y.then((()=>S=0)),S=Date.now());function createInvoker(e,o){const invoker=e=>{if(e._vts){if(e._vts<=invoker.attached)return}else e._vts=Date.now();(0,d.$d)(patchStopImmediatePropagation(e,invoker.value),o,5,[e])};return invoker.value=e,invoker.attached=getNow(),invoker}function patchStopImmediatePropagation(e,o){if((0,l.kJ)(o)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},o.map((e=>o=>!o._stopped&&e&&e(o)))}return o}const L=/^on[a-z]/,patchProp=(e,o,s,d,u=!1,g,p,m,f)=>{"class"===o?patchClass(e,d,u):"style"===o?patchStyle(e,s,d):(0,l.F7)(o)?(0,l.tR)(o)||patchEvent(e,o,s,d,p):("."===o[0]?(o=o.slice(1),1):"^"===o[0]?(o=o.slice(1),0):shouldSetAsProp(e,o,d,u))?patchDOMProp(e,o,d,g,p,m,f):("true-value"===o?e._trueValue=d:"false-value"===o&&(e._falseValue=d),patchAttr(e,o,d,u))};function shouldSetAsProp(e,o,s,d){return d?"innerHTML"===o||"textContent"===o||!!(o in e&&L.test(o)&&(0,l.mf)(s)):"spellcheck"!==o&&"draggable"!==o&&"translate"!==o&&("form"!==o&&(("list"!==o||"INPUT"!==e.tagName)&&(("type"!==o||"TEXTAREA"!==e.tagName)&&((!L.test(o)||!(0,l.HD)(s))&&o in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const x="transition",k="animation",Transition=(e,{slots:o})=>(0,d.h)(d.P$,resolveTransitionProps(e),o);Transition.displayName="Transition";const N={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},D=(Transition.props=(0,l.l7)({},d.P$.props,N),(e,o=[])=>{(0,l.kJ)(e)?e.forEach((e=>e(...o))):e&&e(...o)}),hasExplicitCallback=e=>!!e&&((0,l.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function resolveTransitionProps(e){const o={};for(const l in e)l in N||(o[l]=e[l]);if(!1===e.css)return o;const{name:s="v",type:d,duration:u,enterFromClass:g=`${s}-enter-from`,enterActiveClass:p=`${s}-enter-active`,enterToClass:m=`${s}-enter-to`,appearFromClass:f=g,appearActiveClass:_=p,appearToClass:C=m,leaveFromClass:b=`${s}-leave-from`,leaveActiveClass:w=`${s}-leave-active`,leaveToClass:S=`${s}-leave-to`}=e,y=normalizeDuration(u),L=y&&y[0],x=y&&y[1],{onBeforeEnter:k,onEnter:E,onEnterCancelled:T,onLeave:I,onLeaveCancelled:A,onBeforeAppear:M=k,onAppear:R=E,onAppearCancelled:P=T}=o,finishEnter=(e,o,s)=>{removeTransitionClass(e,o?C:m),removeTransitionClass(e,o?_:p),s&&s()},finishLeave=(e,o)=>{e._isLeaving=!1,removeTransitionClass(e,b),removeTransitionClass(e,S),removeTransitionClass(e,w),o&&o()},makeEnterHook=e=>(o,s)=>{const l=e?R:E,resolve=()=>finishEnter(o,e,s);D(l,[o,resolve]),nextFrame((()=>{removeTransitionClass(o,e?f:g),addTransitionClass(o,e?C:m),hasExplicitCallback(l)||whenTransitionEnds(o,d,L,resolve)}))};return(0,l.l7)(o,{onBeforeEnter(e){D(k,[e]),addTransitionClass(e,g),addTransitionClass(e,p)},onBeforeAppear(e){D(M,[e]),addTransitionClass(e,f),addTransitionClass(e,_)},onEnter:makeEnterHook(!1),onAppear:makeEnterHook(!0),onLeave(e,o){e._isLeaving=!0;const resolve=()=>finishLeave(e,o);addTransitionClass(e,b),forceReflow(),addTransitionClass(e,w),nextFrame((()=>{e._isLeaving&&(removeTransitionClass(e,b),addTransitionClass(e,S),hasExplicitCallback(I)||whenTransitionEnds(e,d,x,resolve))})),D(I,[e,resolve])},onEnterCancelled(e){finishEnter(e,!1),D(T,[e])},onAppearCancelled(e){finishEnter(e,!0),D(P,[e])},onLeaveCancelled(e){finishLeave(e),D(A,[e])}})}function normalizeDuration(e){if(null==e)return null;if((0,l.Kn)(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const o=NumberOf(e);return[o,o]}}function NumberOf(e){const o=(0,l.He)(e);return o}function addTransitionClass(e,o){o.split(/\s+/).forEach((o=>o&&e.classList.add(o))),(e._vtc||(e._vtc=new Set)).add(o)}function removeTransitionClass(e,o){o.split(/\s+/).forEach((o=>o&&e.classList.remove(o)));const{_vtc:s}=e;s&&(s.delete(o),s.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let E=0;function whenTransitionEnds(e,o,s,l){const d=e._endId=++E,resolveIfNotStale=()=>{d===e._endId&&l()};if(s)return setTimeout(resolveIfNotStale,s);const{type:u,timeout:g,propCount:p}=getTransitionInfo(e,o);if(!u)return l();const m=u+"end";let f=0;const end=()=>{e.removeEventListener(m,onEnd),resolveIfNotStale()},onEnd=o=>{o.target===e&&++f>=p&&end()};setTimeout((()=>{f<p&&end()}),g+1),e.addEventListener(m,onEnd)}function getTransitionInfo(e,o){const s=window.getComputedStyle(e),getStyleProperties=e=>(s[e]||"").split(", "),l=getStyleProperties(x+"Delay"),d=getStyleProperties(x+"Duration"),u=getTimeout(l,d),g=getStyleProperties(k+"Delay"),p=getStyleProperties(k+"Duration"),m=getTimeout(g,p);let f=null,_=0,C=0;o===x?u>0&&(f=x,_=u,C=d.length):o===k?m>0&&(f=k,_=m,C=p.length):(_=Math.max(u,m),f=_>0?u>m?x:k:null,C=f?f===x?d.length:p.length:0);const b=f===x&&/\b(transform|all)(,|$)/.test(s[x+"Property"]);return{type:f,timeout:_,propCount:C,hasTransform:b}}function getTimeout(e,o){while(e.length<o.length)e=e.concat(e);return Math.max(...o.map(((o,s)=>toMs(o)+toMs(e[s]))))}function toMs(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function forceReflow(){return document.body.offsetHeight}new WeakMap,new WeakMap;const T=(0,l.l7)({patchProp:patchProp},m);let I;function ensureRenderer(){return I||(I=(0,d.Us)(T))}const createApp=(...e)=>{const o=ensureRenderer().createApp(...e);const{mount:s}=o;return o.mount=e=>{const d=normalizeContainer(e);if(!d)return;const u=o._component;(0,l.mf)(u)||u.render||u.template||(u.template=d.innerHTML),d.innerHTML="";const g=s(d,!1,d instanceof SVGElement);return d instanceof Element&&(d.removeAttribute("v-cloak"),d.setAttribute("data-v-app","")),g},o};function normalizeContainer(e){if((0,l.HD)(e)){const o=document.querySelector(e);return o}return e}},3577:function(e,o,s){"use strict";function makeMap(e,o){const s=Object.create(null),l=e.split(",");for(let d=0;d<l.length;d++)s[l[d]]=!0;return o?e=>!!s[e.toLowerCase()]:e=>!!s[e]}s.d(o,{C_:function(){return normalizeClass},DM:function(){return isSet},E9:function(){return getGlobalThis},F7:function(){return isOn},Gg:function(){return L},HD:function(){return isString},He:function(){return toNumber},Kn:function(){return isObject},NO:function(){return NO},Nj:function(){return def},Od:function(){return remove},PO:function(){return isPlainObject},Pq:function(){return g},RI:function(){return hasOwn},S0:function(){return isIntegerKey},W7:function(){return toRawType},WV:function(){return looseEqual},Z6:function(){return _},_A:function(){return k},_N:function(){return isMap},aU:function(){return hasChanged},dG:function(){return NOOP},e1:function(){return d},fY:function(){return makeMap},hR:function(){return T},hq:function(){return looseIndexOf},ir:function(){return invokeArrayFns},j5:function(){return normalizeStyle},kC:function(){return E},kJ:function(){return S},kT:function(){return f},l7:function(){return b},mf:function(){return isFunction},rs:function(){return D},tI:function(){return isPromise},tR:function(){return isModelListener},yA:function(){return includeBooleanAttr},yk:function(){return isSymbol},zw:function(){return toDisplayString}});const l="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",d=makeMap(l);const u="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",g=makeMap(u);function includeBooleanAttr(e){return!!e||""===e}function normalizeStyle(e){if(S(e)){const o={};for(let s=0;s<e.length;s++){const l=e[s],d=isString(l)?parseStringStyle(l):normalizeStyle(l);if(d)for(const e in d)o[e]=d[e]}return o}return isString(e)||isObject(e)?e:void 0}const p=/;(?![^(]*\))/g,m=/:(.+)/;function parseStringStyle(e){const o={};return e.split(p).forEach((e=>{if(e){const s=e.split(m);s.length>1&&(o[s[0].trim()]=s[1].trim())}})),o}function normalizeClass(e){let o="";if(isString(e))o=e;else if(S(e))for(let s=0;s<e.length;s++){const l=normalizeClass(e[s]);l&&(o+=l+" ")}else if(isObject(e))for(const s in e)e[s]&&(o+=s+" ");return o.trim()}function looseCompareArrays(e,o){if(e.length!==o.length)return!1;let s=!0;for(let l=0;s&&l<e.length;l++)s=looseEqual(e[l],o[l]);return s}function looseEqual(e,o){if(e===o)return!0;let s=isDate(e),l=isDate(o);if(s||l)return!(!s||!l)&&e.getTime()===o.getTime();if(s=isSymbol(e),l=isSymbol(o),s||l)return e===o;if(s=S(e),l=S(o),s||l)return!(!s||!l)&&looseCompareArrays(e,o);if(s=isObject(e),l=isObject(o),s||l){if(!s||!l)return!1;const d=Object.keys(e).length,u=Object.keys(o).length;if(d!==u)return!1;for(const s in e){const l=e.hasOwnProperty(s),d=o.hasOwnProperty(s);if(l&&!d||!l&&d||!looseEqual(e[s],o[s]))return!1}}return String(e)===String(o)}function looseIndexOf(e,o){return e.findIndex((e=>looseEqual(e,o)))}const toDisplayString=e=>isString(e)?e:null==e?"":S(e)||isObject(e)&&(e.toString===y||!isFunction(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,o)=>o&&o.__v_isRef?replacer(e,o.value):isMap(o)?{[`Map(${o.size})`]:[...o.entries()].reduce(((e,[o,s])=>(e[`${o} =>`]=s,e)),{})}:isSet(o)?{[`Set(${o.size})`]:[...o.values()]}:!isObject(o)||S(o)||isPlainObject(o)?o:String(o),f={},_=[],NOOP=()=>{},NO=()=>!1,C=/^on[^a-z]/,isOn=e=>C.test(e),isModelListener=e=>e.startsWith("onUpdate:"),b=Object.assign,remove=(e,o)=>{const s=e.indexOf(o);s>-1&&e.splice(s,1)},w=Object.prototype.hasOwnProperty,hasOwn=(e,o)=>w.call(e,o),S=Array.isArray,isMap=e=>"[object Map]"===toTypeString(e),isSet=e=>"[object Set]"===toTypeString(e),isDate=e=>"[object Date]"===toTypeString(e),isFunction=e=>"function"===typeof e,isString=e=>"string"===typeof e,isSymbol=e=>"symbol"===typeof e,isObject=e=>null!==e&&"object"===typeof e,isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),y=Object.prototype.toString,toTypeString=e=>y.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>"[object Object]"===toTypeString(e),isIntegerKey=e=>isString(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,L=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const o=Object.create(null);return s=>{const l=o[s];return l||(o[s]=e(s))}},x=/-(\w)/g,k=cacheStringFunction((e=>e.replace(x,((e,o)=>o?o.toUpperCase():"")))),N=/\B([A-Z])/g,D=cacheStringFunction((e=>e.replace(N,"-$1").toLowerCase())),E=cacheStringFunction((e=>e.charAt(0).toUpperCase()+e.slice(1))),T=cacheStringFunction((e=>e?`on${E(e)}`:"")),hasChanged=(e,o)=>!Object.is(e,o),invokeArrayFns=(e,o)=>{for(let s=0;s<e.length;s++)e[s](o)},def=(e,o,s)=>{Object.defineProperty(e,o,{configurable:!0,enumerable:!1,value:s})},toNumber=e=>{const o=parseFloat(e);return isNaN(o)?e:o};let I;const getGlobalThis=()=>I||(I="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{})},3908:function(e){"use strict";function assert(e){if(!e)throw new Error("Assertion error")}var o=0,s=1;function EnvGen(e,s){if(!(this instanceof EnvGen))return new EnvGen(e,s);this._audioContext=e,this._targetParam=s;var l=this;Object.defineProperty(this,"mode",{get:function(){return l._mode},set:function(o){l.MODES.indexOf(o)>=0&&(l.gate(!1,Math.max(this._lastGateTime,e.currentTime)),l._mode=o)}}),Object.defineProperty(this,"attackTime",{get:function(){return l._attackTime},set:function(e){"number"===typeof e&&!isNaN(e)&&e>0&&(l._attackTime=e)}}),Object.defineProperty(this,"decayTime",{get:function(){return l._decayTime},set:function(e){"number"===typeof e&&!isNaN(e)&&e>0&&(l._decayTime=e)}}),Object.defineProperty(this,"sustainLevel",{get:function(){return l._sustainLevel},set:function(e){"number"===typeof e&&!isNaN(e)&&e>=0&&e<=1&&(l._sustainLevel=e)}}),Object.defineProperty(this,"releaseTime",{get:function(){return l._releaseTime},set:function(e){"number"===typeof e&&!isNaN(e)&&e>0&&(l._releaseTime=e)}}),this._mode="ADSR",this._attackTime=.5,this._decayTime=1,this._sustainLevel=.5,this._releaseTime=1,this._targetParam.value=o,this._targetParam.cancelScheduledValues(0),this._targetParam.setValueAtTime(o,0),this._scheduledSegments=[{beginTime:0,beginValue:o,targetValue:o,timeConst:1}],this._lastGateTime=e.currentTime,this._lastGateState=!1}EnvGen.prototype.MODES=["AD","ASR","ADSR"],EnvGen.prototype._appendSegment=function(e,o,s,l){assert(e>=this._scheduledSegments[this._scheduledSegments.length-1].beginTime),this._targetParam.setValueAtTime(o,e),this._targetParam.setTargetAtTime(s,e,l),this._scheduledSegments.push({beginTime:e,beginValue:o,targetValue:s,timeConst:l})},EnvGen.prototype._scheduleSegmentFromTime=function(e,o,s){for(var l,d=0;d<this._scheduledSegments.length;d++)if(e>=this._scheduledSegments[d].beginTime&&(d===this._scheduledSegments.length-1||e<this._scheduledSegments[d+1].beginTime)){l=d;break}assert(void 0!==l);var u=this._scheduledSegments[l],g=u.targetValue+(u.beginValue-u.targetValue)*Math.exp((u.beginTime-e)/u.timeConst);this._scheduledSegments.length=l+1,this._targetParam.cancelScheduledValues(e),this._appendSegment(e,g,o,s)},EnvGen.prototype._scheduleSegmentFromValueThreshold=function(e,o,s){var l=this._scheduledSegments[this._scheduledSegments.length-1],d=Math.abs(Math.log((l.targetValue-e)/(l.targetValue-l.beginValue))*l.timeConst)+l.beginTime;this._appendSegment(d,e,o,s)},EnvGen.prototype._cullScheduledSegments=function(e){for(var o=0;o<this._scheduledSegments.length-1;o++)if(e<this._scheduledSegments[o+1].beginTime)break;this._scheduledSegments=this._scheduledSegments.slice(o),assert(this._scheduledSegments.length>0),assert(this._scheduledSegments[0].beginTime<=e)},EnvGen.prototype.gate=function(e,l){var d=this._audioContext.currentTime;if(l=void 0===l?d:l,l<this._lastGateTime)console.warn("Received gate with time earlier than a previous gate");else if(this._lastGateTime=l,this._lastGateState=e,this._cullScheduledSegments(d),e){var u,g=100,p=1/(1-Math.exp(-this._attackTime/g));if(this._scheduleSegmentFromTime(l,p,g),"AD"===this._mode||"ADSR"===this._mode)u="AD"===this._mode?o:this._sustainLevel,this._scheduleSegmentFromValueThreshold(s,u,this._decayTime);else"ASR"===this._mode?this._scheduleSegmentFromValueThreshold(s,s,1):assert(!1)}else"AD"===this._mode||("ASR"===this._mode||"ADSR"===this._mode?this._scheduleSegmentFromTime(l,o,this._releaseTime):assert(!1))},EnvGen.prototype.gateOn=function(e){this.gate(!0,e)},EnvGen.prototype.gateOff=function(e){this.gate(!1,e)},e.exports=EnvGen},5407:function(e,o,s){"use strict";s.d(o,{Z:function(){return O}});var l=s(1813);function normalizeStyle(e){if(f(e)){const o={};for(let s=0;s<e.length;s++){const l=e[s],d=isString(l)?parseStringStyle(l):normalizeStyle(l);if(d)for(const e in d)o[e]=d[e]}return o}return isString(e)||isObject(e)?e:void 0}const d=/;(?![^(]*\))/g,u=/:(.+)/;function parseStringStyle(e){const o={};return e.split(d).forEach((e=>{if(e){const s=e.split(u);s.length>1&&(o[s[0].trim()]=s[1].trim())}})),o}function normalizeClass(e){let o="";if(isString(e))o=e;else if(f(e))for(let s=0;s<e.length;s++){const l=normalizeClass(e[s]);l&&(o+=l+" ")}else if(isObject(e))for(const s in e)e[s]&&(o+=s+" ");return o.trim()}const g=[],NOOP=()=>{},p=/^on[^a-z]/,isOn=e=>p.test(e),m=Object.assign,f=Array.isArray,isFunction=e=>"function"===typeof e,isString=e=>"string"===typeof e,isObject=e=>null!==e&&"object"===typeof e;let _;function recordEffectScope(e,o=_){o&&o.active&&o.effects.push(e)}const createDep=e=>{const o=new Set(e);return o.w=0,o.n=0,o},wasTracked=e=>(e.w&b)>0,newTracked=e=>(e.n&b)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let o=0;o<e.length;o++)e[o].w|=b},finalizeDepMarkers=e=>{const{deps:o}=e;if(o.length){let s=0;for(let l=0;l<o.length;l++){const d=o[l];wasTracked(d)&&!newTracked(d)?d.delete(e):o[s++]=d,d.w&=~b,d.n&=~b}o.length=s}};let C=0,b=1;const w=30;let S;class ReactiveEffect{constructor(e,o=null,s){this.fn=e,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,s)}run(){if(!this.active)return this.fn();let e=S,o=y;while(e){if(e===this)return;e=e.parent}try{return this.parent=S,S=this,y=!0,b=1<<++C,C<=w?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{C<=w&&finalizeDepMarkers(this),b=1<<--C,S=this.parent,y=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){S===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:o}=e;if(o.length){for(let s=0;s<o.length;s++)o[s].delete(e);o.length=0}}let y=!0;function trackEffects(e,o){let s=!1;C<=w?newTracked(e)||(e.n|=b,s=!wasTracked(e)):s=!e.has(S),s&&(e.add(S),S.deps.push(e))}function triggerEffects(e,o){const s=f(e)?e:[...e];for(const l of s)l.computed&&triggerEffect(l);for(const l of s)l.computed||triggerEffect(l)}function triggerEffect(e,o){(e!==S||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function isReactive(e){return isReadonly(e)?isReactive(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function isReadonly(e){return!(!e||!e["__v_isReadonly"])}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const o=e&&e["__v_raw"];return o?toRaw(o):e}function trackRefValue(e){y&&S&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,o){e=toRaw(e),e.dep&&triggerEffects(e.dep)}function isRef(e){return!(!e||!0!==e.__v_isRef)}function toRefs(e){const o=f(e)?new Array(e.length):{};for(const s in e)o[s]=toRef(e,s);return o}class ObjectRefImpl{constructor(e,o,s){this._object=e,this._key=o,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}}function toRef(e,o,s){const l=e[o];return isRef(l)?l:new ObjectRefImpl(e,o,s)}class ComputedRefImpl{constructor(e,o,s,l){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(e,(()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!l,this["__v_isReadonly"]=s}get value(){const e=toRaw(this);return trackRefValue(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed$1(e,o,s=!1){let l,d;const u=isFunction(e);u?(l=e,d=NOOP):(l=e.get,d=e.set);const g=new ComputedRefImpl(l,d,u||!d,s);return g}let L=null,x=null;const isSuspense=e=>e.__isSuspense;function defineComponent(e){return isFunction(e)?{setup:e,name:e.name}:e}const k=Symbol(),isTeleport=e=>e.__isTeleport,N=Symbol(void 0),D=Symbol(void 0),E=Symbol(void 0),T=[];let I=null;function openBlock(e=!1){T.push(I=e?null:[])}function closeBlock(){T.pop(),I=T[T.length-1]||null}function setupBlock(e){return e.dynamicChildren=I||g,closeBlock(),I&&I.push(e),e}function createElementBlock(e,o,s,l,d,u){return setupBlock(createBaseVNode(e,o,s,l,d,u,!0))}function isVNode(e){return!!e&&!0===e.__v_isVNode}const A="__vInternal",normalizeKey=({key:e})=>null!=e?e:null,normalizeRef=({ref:e,ref_key:o,ref_for:s})=>null!=e?isString(e)||isRef(e)||isFunction(e)?{i:L,r:e,k:o,f:!!s}:e:null;function createBaseVNode(e,o=null,s=null,l=0,d=null,u=(e===N?0:1),g=!1,p=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:o,key:o&&normalizeKey(o),ref:o&&normalizeRef(o),scopeId:x,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:l,dynamicProps:d,dynamicChildren:null,appContext:null};return p?(normalizeChildren(m,s),128&u&&e.normalize(m)):s&&(m.shapeFlag|=isString(s)?8:16),!g&&I&&(m.patchFlag>0||6&u)&&32!==m.patchFlag&&I.push(m),m}const M=_createVNode;function _createVNode(e,o=null,s=null,l=0,d=null,u=!1){if(e&&e!==k||(e=E),isVNode(e)){const l=cloneVNode(e,o,!0);return s&&normalizeChildren(l,s),!u&&I&&(6&l.shapeFlag?I[I.indexOf(e)]=l:I.push(l)),l.patchFlag|=-2,l}if(isClassComponent(e)&&(e=e.__vccOpts),o){o=guardReactiveProps(o);let{class:e,style:s}=o;e&&!isString(e)&&(o.class=normalizeClass(e)),isObject(s)&&(isProxy(s)&&!f(s)&&(s=m({},s)),o.style=normalizeStyle(s))}const g=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,o,s,l,d,g,u,!0)}function guardReactiveProps(e){return e?isProxy(e)||A in e?m({},e):e:null}function cloneVNode(e,o,s=!1){const{props:l,ref:d,patchFlag:u,children:g}=e,p=o?mergeProps(l||{},o):l,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&normalizeKey(p),ref:o&&o.ref?s&&d?f(d)?d.concat(normalizeRef(o)):[d,normalizeRef(o)]:normalizeRef(o):d,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:g,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:o&&e.type!==N?-1===u?16:16|u:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor};return m}function createTextVNode(e=" ",o=0){return M(D,null,e,o)}function normalizeChildren(e,o){let s=0;const{shapeFlag:l}=e;if(null==o)o=null;else if(f(o))s=16;else if("object"===typeof o){if(65&l){const s=o.default;return void(s&&(s._c&&(s._d=!1),normalizeChildren(e,s()),s._c&&(s._d=!0)))}{s=32;const l=o._;l||A in o?3===l&&L&&(1===L.slots._?o._=1:(o._=2,e.patchFlag|=1024)):o._ctx=L}}else isFunction(o)?(o={default:o,_ctx:L},s=32):(o=String(o),64&l?(s=16,o=[createTextVNode(o)]):s=8);e.children=o,e.shapeFlag|=s}function mergeProps(...e){const o={};for(let s=0;s<e.length;s++){const l=e[s];for(const e in l)if("class"===e)o.class!==l.class&&(o.class=normalizeClass([o.class,l.class]));else if("style"===e)o.style=normalizeStyle([o.style,l.style]);else if(isOn(e)){const s=o[e],d=l[e];!d||s===d||f(s)&&s.includes(d)||(o[e]=s?[].concat(s,d):d)}else""!==e&&(o[e]=l[e])}return o}let R=!1;function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,o)=>computed$1(e,o,R);var _export_sfc=(e,o)=>{const s=e.__vccOpts||e;for(const[l,d]of o)s[l]=d;return s};const P=defineComponent({name:"MonacoEditor",props:{diffEditor:{type:Boolean,default:!1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"100%"},original:String,value:String,language:{type:String,default:"javascript"},theme:{type:String,default:"vs"},options:{type:Object,default(){return{}}}},emits:["editorWillMount","editorDidMount","change","update:value"],setup(e){const{width:o,height:s}=toRefs(e),l=computed((()=>{const e=o.value.toString().includes("%")?o.value:`${o.value}px`,l=s.value.toString().includes("%")?s.value:`${s.value}px`;return{width:e,height:l,"text-align":"left"}}));return{style:l}},mounted(){this.initMonaco()},beforeDestroy(){this.editor&&this.editor.dispose()},methods:{initMonaco(){this.$emit("editorWillMount",l);const{value:e,language:o,theme:s,options:d}=this;this.editor=l.editor[this.diffEditor?"createDiffEditor":"create"](this.$el,{value:e,language:o,theme:s,...d}),this.diffEditor&&this._setModel(this.value,this.original);const u=this._getEditor();u&&u.onDidChangeModelContent((e=>{const o=u.getValue();this.value!==o&&(this.$emit("change",o,e),this.$emit("update:value",o))})),this.$emit("editorDidMount",this.editor)},_setModel(e,o){const{language:s}=this,d=l.editor.createModel(o,s),u=l.editor.createModel(e,s);this.editor.setModel({original:d,modified:u})},_setValue(e){let o=this._getEditor();if(o)return o.setValue(e)},_getValue(){let e=this._getEditor();return e?e.getValue():""},_getEditor(){return this.editor?this.diffEditor?this.editor.modifiedEditor:this.editor:null},_setOriginal(){const{original:e}=this.editor.getModel();e.setValue(this.original)}},watch:{options:{deep:!0,handler(e){this.editor.updateOptions(e)}},value(){this.value!==this._getValue()&&this._setValue(this.value)},original(){this._setOriginal()},language(){if(this.editor)if(this.diffEditor){const{original:e,modified:o}=this.editor.getModel();l.editor.setModelLanguage(e,this.language),l.editor.setModelLanguage(o,this.language)}else l.editor.setModelLanguage(this.editor.getModel(),this.language)},theme(){l.editor.setTheme(this.theme)}}});function _sfc_render(e,o,s,l,d,u){return openBlock(),createElementBlock("div",{class:"monaco-editor-vue3",style:normalizeStyle(e.style)},null,4)}var O=_export_sfc(P,[["render",_sfc_render]]);O.install=e=>{e.component(O.name,O)}},2100:function(e,o,s){self["MonacoEnvironment"]=function(e){function stripTrailingSlash(e){return e.replace(/\/$/,"")}return{globalAPI:!1,getWorkerUrl:function(o,l){var d=s.p,u=(d?stripTrailingSlash(d)+"/":"")+e[l];if(/^((http:)|(https:)|(file:)|(\/\/))/.test(u)){var g=String(window.location),p=g.substr(0,g.length-window.location.hash.length-window.location.search.length-window.location.pathname.length);if(u.substring(0,p.length)!==p){/^(\/\/)/.test(u)&&(u=window.location.protocol+u);var m="/*"+l+'*/importScripts("'+u+'");',f=new Blob([m],{type:"application/javascript"});return URL.createObjectURL(f)}}return u}}}({editorWorkerService:"editor.worker.js"}),s(9477),s(236),s(1387),s(2549),s(4336),s(2102),s(5833),s(9575),s(8334),s(9079),s(9956),s(3740),s(1895),s(7107),s(6917),s(5826),s(5808),s(4125),s(1097),s(9803),s(2078),s(5817),s(2470),s(6122),s(9646),s(8077),s(4602),s(7563),s(5369),s(7830),s(7615),s(9504),s(76),s(8408),s(7061),s(7660),s(1732),s(669),s(6816),s(5048),s(2379),s(7721),s(8762),s(492),s(5662),s(4662),s(2614),s(5180),s(9607),s(1271),s(943),s(7181),s(6709),e.exports=s(2363),s(3763)},1813:function(e,o,s){self["MonacoEnvironment"]=function(e){function stripTrailingSlash(e){return e.replace(/\/$/,"")}return{globalAPI:!1,getWorkerUrl:function(o,l){var d=s.p,u=(d?stripTrailingSlash(d)+"/":"")+e[l];if(/^((http:)|(https:)|(file:)|(\/\/))/.test(u)){var g=String(window.location),p=g.substr(0,g.length-window.location.hash.length-window.location.search.length-window.location.pathname.length);if(u.substring(0,p.length)!==p){/^(\/\/)/.test(u)&&(u=window.location.protocol+u);var m="/*"+l+'*/importScripts("'+u+'");',f=new Blob([m],{type:"application/javascript"});return URL.createObjectURL(f)}}return u}}}({editorWorkerService:"editor.worker.js"}),s(9477),s(236),s(1387),s(2549),s(4336),s(2102),s(5833),s(9575),s(8334),s(9079),s(9956),s(3740),s(1895),s(7107),s(6917),s(5826),s(5808),s(4125),s(1097),s(9803),s(2078),s(5817),s(2470),s(6122),s(9646),s(8077),s(4602),s(7563),s(5369),s(7830),s(7615),s(9504),s(76),s(8408),s(7061),s(7660),s(1732),s(669),s(6816),s(5048),s(2379),s(7721),s(8762),s(492),s(5662),s(4662),s(2614),s(5180),s(9607),s(1271),s(943),s(7181),s(6709),e.exports=s(2144),s(3763)},6268:function(e,o,s){"use strict";s.r(o),s.d(o,{PixelRatio:function(){return u},getZoomFactor:function(){return getZoomFactor},isAndroid:function(){return w},isChrome:function(){return f},isElectron:function(){return b},isFirefox:function(){return p},isSafari:function(){return _},isStandalone:function(){return S},isWebKit:function(){return m},isWebkitWebView:function(){return C}});var l=s(4669),d=s(5976);class WindowManager{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}WindowManager.INSTANCE=new WindowManager;class DevicePixelRatioMonitor extends d.JT{constructor(){super(),this._onDidChange=this._register(new l.Q5),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){this._mediaQueryList&&this._mediaQueryList.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}class PixelRatioImpl extends d.JT{constructor(){super(),this._onDidChange=this._register(new l.Q5),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new DevicePixelRatioMonitor);this._register(e.onDidChange((()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)})))}get value(){return this._value}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),o=window.devicePixelRatio||1,s=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return o/s}}class PixelRatioFacade{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new PixelRatioImpl),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}const u=new PixelRatioFacade;function getZoomFactor(){return WindowManager.INSTANCE.getZoomFactor()}const g=navigator.userAgent,p=g.indexOf("Firefox")>=0,m=g.indexOf("AppleWebKit")>=0,f=g.indexOf("Chrome")>=0,_=!f&&g.indexOf("Safari")>=0,C=!f&&!_&&m,b=g.indexOf("Electron/")>=0,w=g.indexOf("Android")>=0,S=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches},161:function(e,o,s){"use strict";s.d(o,{D:function(){return u}});var l=s(6268),d=s(1432);const u={clipboard:{writeText:d.tY||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:d.tY||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>d.tY||l.isStandalone?0:navigator.keyboard||l.isSafari?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)}},3547:function(e,o,s){"use strict";s.d(o,{P$:function(){return u},TN:function(){return DragAndDropData},go:function(){return d}});var l=s(1170);const d={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:l.v.text,TERMINALS:"Terminals"};class DragAndDropData{constructor(e){this.data=e}update(){}getData(){return this.data}}const u={CurrentDragAndDropData:void 0}},5321:function(e,o,s){"use strict";s.d(o,{$:function(){return $},$Z:function(){return show},Ay:function(){return getShadowRoot},Ce:function(){return prepend},Cp:function(){return hide},D6:function(){return getClientArea},DI:function(){return N},Dx:function(){return getComputedStyle},FK:function(){return getContentWidth},Fx:function(){return findParentWithClass},GQ:function(){return S},H$:function(){return getElementsByTagName},IC:function(){return createEventEmitter},If:function(){return getContentHeight},OO:function(){return isInShadowDOM},PO:function(){return clearNode},R3:function(){return append},RE:function(){return addDisposableNonBubblingPointerOutListener},Re:function(){return isHTMLElement},Ro:function(){return Dimension},Uh:function(){return computeScreenAwareSize},Uw:function(){return isInDOM},V3:function(){return windowOpenNoOpener},Y_:function(){return addDisposableThrottledListener},_0:function(){return restoreParentsScrollTop},_h:function(){return asCSSPropertyValue},_q:function(){return ModifierKeyEmitter},dS:function(){return createStyleSheet},dp:function(){return size},fk:function(){return createCSSRule},go:function(){return trackFocus},i:function(){return getDomNodePagePosition},jL:function(){return L},j_:function(){return addDisposableNonBubblingMouseOutListener},jg:function(){return isAncestor},jt:function(){return animate},lI:function(){return y},mc:function(){return reset},mu:function(){return w},nm:function(){return addDisposableListener},q6:function(){return addDisposableGenericMouseUpListener},tw:function(){return E},u0:function(){return addDisposableGenericMouseDownListener},uB:function(){return addMatchMediaChangeListener},uN:function(){return removeCSSRulesContainingSelector},uU:function(){return hasParentWithClass},vL:function(){return saveParentsScrollTop},vY:function(){return getActiveElement},w:function(){return getTotalWidth},wY:function(){return asCSSUrl},wn:function(){return getTotalHeight},xQ:function(){return getTopLeftOffset},zB:function(){return T}});var l=s(6268),d=s(161),u=s(9069),g=s(3938),p=s(5393),m=s(7301),f=s(4669),_=s(5976),C=s(6663),b=s(1432);function clearNode(e){while(e.firstChild)e.firstChild.remove()}function isInDOM(e){var o;return null!==(o=null===e||void 0===e?void 0:e.isConnected)&&void 0!==o&&o}class DomListener{constructor(e,o,s,l){this._node=e,this._type=o,this._handler=s,this._options=l||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function addDisposableListener(e,o,s,l){return new DomListener(e,o,s,l)}function _wrapAsStandardMouseEvent(e){return function(o){return e(new g.n(o))}}function _wrapAsStandardKeyboardEvent(e){return function(o){return e(new u.y(o))}}let w=function addStandardDisposableListener(e,o,s,l){let d=s;return"click"===o||"mousedown"===o?d=_wrapAsStandardMouseEvent(s):"keydown"!==o&&"keypress"!==o&&"keyup"!==o||(d=_wrapAsStandardKeyboardEvent(s)),addDisposableListener(e,o,d,l)},S=function addStandardDisposableListener(e,o,s){let l=_wrapAsStandardMouseEvent(o);return addDisposableGenericMouseDownListener(e,l,s)};function addDisposableGenericMouseDownListener(e,o,s){return addDisposableListener(e,b.gn&&d.D.pointerEvents?E.POINTER_DOWN:E.MOUSE_DOWN,o,s)}function addDisposableGenericMouseUpListener(e,o,s){return addDisposableListener(e,b.gn&&d.D.pointerEvents?E.POINTER_UP:E.MOUSE_UP,o,s)}function addDisposableNonBubblingMouseOutListener(e,o){return addDisposableListener(e,"mouseout",(s=>{let l=s.relatedTarget;while(l&&l!==e)l=l.parentNode;l!==e&&o(s)}))}function addDisposableNonBubblingPointerOutListener(e,o){return addDisposableListener(e,"pointerout",(s=>{let l=s.relatedTarget;while(l&&l!==e)l=l.parentNode;l!==e&&o(s)}))}function createEventEmitter(e,o,s){let l=null;const handler=e=>d.fire(e),onFirstListenerAdd=()=>{l||(l=new DomListener(e,o,handler,s))},onLastListenerRemove=()=>{l&&(l.dispose(),l=null)},d=new f.Q5({onFirstListenerAdd:onFirstListenerAdd,onLastListenerRemove:onLastListenerRemove});return d}let y,L,x=null;function doRequestAnimationFrame(e){if(!x){const emulatedRequestAnimationFrame=e=>setTimeout((()=>e((new Date).getTime())),0);x=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||emulatedRequestAnimationFrame}return x.call(self,e)}class AnimationFrameQueueItem{constructor(e,o=0){this._runner=e,this.priority=o,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){(0,m.dL)(e)}}static sort(e,o){return o.priority-e.priority}}(function(){let e=[],o=null,s=!1,l=!1,animationFrameRunner=()=>{s=!1,o=e,e=[],l=!0;while(o.length>0){o.sort(AnimationFrameQueueItem.sort);let e=o.shift();e.execute()}l=!1};L=(o,l=0)=>{let d=new AnimationFrameQueueItem(o,l);return e.push(d),s||(s=!0,doRequestAnimationFrame(animationFrameRunner)),d},y=(e,s)=>{if(l){let l=new AnimationFrameQueueItem(e,s);return o.push(l),l}return L(e,s)}})();const k=8,DEFAULT_EVENT_MERGER=function(e,o){return o};class TimeoutThrottledDomListener extends _.JT{constructor(e,o,s,l=DEFAULT_EVENT_MERGER,d=k){super();let u=null,g=0,m=this._register(new p._F),invokeHandler=()=>{g=(new Date).getTime(),s(u),u=null};this._register(addDisposableListener(e,o,(e=>{u=l(u,e);let o=(new Date).getTime()-g;o>=d?(m.cancel(),invokeHandler()):m.setIfNotSet(invokeHandler,d-o)})))}}function addDisposableThrottledListener(e,o,s,l,d){return new TimeoutThrottledDomListener(e,o,s,l,d)}function getComputedStyle(e){return document.defaultView.getComputedStyle(e,null)}function getClientArea(e){if(e!==document.body)return new Dimension(e.clientWidth,e.clientHeight);if(b.gn&&window.visualViewport)return new Dimension(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Dimension(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Dimension(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Dimension(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class SizeUtils{static convertToPixels(e,o){return parseFloat(o)||0}static getDimension(e,o,s){let l=getComputedStyle(e),d="0";return l&&(d=l.getPropertyValue?l.getPropertyValue(o):l.getAttribute(s)),SizeUtils.convertToPixels(e,d)}static getBorderLeftWidth(e){return SizeUtils.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return SizeUtils.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return SizeUtils.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return SizeUtils.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return SizeUtils.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return SizeUtils.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return SizeUtils.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return SizeUtils.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return SizeUtils.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return SizeUtils.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return SizeUtils.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return SizeUtils.getDimension(e,"margin-bottom","marginBottom")}}class Dimension{constructor(e,o){this.width=e,this.height=o}with(e=this.width,o=this.height){return e!==this.width||o!==this.height?new Dimension(e,o):this}static is(e){return"object"===typeof e&&"number"===typeof e.height&&"number"===typeof e.width}static lift(e){return e instanceof Dimension?e:new Dimension(e.width,e.height)}static equals(e,o){return e===o||!(!e||!o)&&(e.width===o.width&&e.height===o.height)}}function getTopLeftOffset(e){let o=e.offsetParent,s=e.offsetTop,l=e.offsetLeft;while(null!==(e=e.parentNode)&&e!==document.body&&e!==document.documentElement){s-=e.scrollTop;const d=isShadowRoot(e)?null:getComputedStyle(e);d&&(l-="rtl"!==d.direction?e.scrollLeft:-e.scrollLeft),e===o&&(l+=SizeUtils.getBorderLeftWidth(e),s+=SizeUtils.getBorderTopWidth(e),s+=e.offsetTop,l+=e.offsetLeft,o=e.offsetParent)}return{left:l,top:s}}function size(e,o,s){"number"===typeof o&&(e.style.width=`${o}px`),"number"===typeof s&&(e.style.height=`${s}px`)}function getDomNodePagePosition(e){let o=e.getBoundingClientRect();return{left:o.left+N.scrollX,top:o.top+N.scrollY,width:o.width,height:o.height}}Dimension.None=new Dimension(0,0);const N=new class{get scrollX(){return"number"===typeof window.scrollX?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return"number"===typeof window.scrollY?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function getTotalWidth(e){let o=SizeUtils.getMarginLeft(e)+SizeUtils.getMarginRight(e);return e.offsetWidth+o}function getContentWidth(e){let o=SizeUtils.getBorderLeftWidth(e)+SizeUtils.getBorderRightWidth(e),s=SizeUtils.getPaddingLeft(e)+SizeUtils.getPaddingRight(e);return e.offsetWidth-o-s}function getContentHeight(e){let o=SizeUtils.getBorderTopWidth(e)+SizeUtils.getBorderBottomWidth(e),s=SizeUtils.getPaddingTop(e)+SizeUtils.getPaddingBottom(e);return e.offsetHeight-o-s}function getTotalHeight(e){let o=SizeUtils.getMarginTop(e)+SizeUtils.getMarginBottom(e);return e.offsetHeight+o}function isAncestor(e,o){while(e){if(e===o)return!0;e=e.parentNode}return!1}function findParentWithClass(e,o,s){while(e&&e.nodeType===e.ELEMENT_NODE){if(e.classList.contains(o))return e;if(s)if("string"===typeof s){if(e.classList.contains(s))return null}else if(e===s)return null;e=e.parentNode}return null}function hasParentWithClass(e,o,s){return!!findParentWithClass(e,o,s)}function isShadowRoot(e){return e&&!!e.host&&!!e.mode}function isInShadowDOM(e){return!!getShadowRoot(e)}function getShadowRoot(e){while(e.parentNode){if(e===document.body)return null;e=e.parentNode}return isShadowRoot(e)?e:null}function getActiveElement(){let e=document.activeElement;while(null===e||void 0===e?void 0:e.shadowRoot)e=e.shadowRoot.activeElement;return e}function createStyleSheet(e=document.getElementsByTagName("head")[0]){let o=document.createElement("style");return o.type="text/css",o.media="screen",e.appendChild(o),o}let D=null;function getSharedStyleSheet(){return D||(D=createStyleSheet()),D}function getDynamicStyleSheetRules(e){var o,s;return(null===(o=null===e||void 0===e?void 0:e.sheet)||void 0===o?void 0:o.rules)?e.sheet.rules:(null===(s=null===e||void 0===e?void 0:e.sheet)||void 0===s?void 0:s.cssRules)?e.sheet.cssRules:[]}function createCSSRule(e,o,s=getSharedStyleSheet()){s&&o&&s.sheet.insertRule(e+"{"+o+"}",0)}function removeCSSRulesContainingSelector(e,o=getSharedStyleSheet()){if(!o)return;let s=getDynamicStyleSheetRules(o),l=[];for(let d=0;d<s.length;d++){let o=s[d];-1!==o.selectorText.indexOf(e)&&l.push(d)}for(let d=l.length-1;d>=0;d--)o.sheet.deleteRule(l[d])}function isHTMLElement(e){return"object"===typeof HTMLElement?e instanceof HTMLElement:e&&"object"===typeof e&&1===e.nodeType&&"string"===typeof e.nodeName}const E={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:l.isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:l.isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:l.isWebKit?"webkitAnimationIteration":"animationiteration"},T={stop:function(e,o){e.preventDefault?e.preventDefault():e.returnValue=!1,o&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}};function saveParentsScrollTop(e){let o=[];for(let s=0;e&&e.nodeType===e.ELEMENT_NODE;s++)o[s]=e.scrollTop,e=e.parentNode;return o}function restoreParentsScrollTop(e,o){for(let s=0;e&&e.nodeType===e.ELEMENT_NODE;s++)e.scrollTop!==o[s]&&(e.scrollTop=o[s]),e=e.parentNode}class FocusTracker extends _.JT{constructor(e){super(),this._onDidFocus=this._register(new f.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new f.Q5),this.onDidBlur=this._onDidBlur.event;let o=FocusTracker.hasFocusWithin(e),s=!1;const onFocus=()=>{s=!1,o||(o=!0,this._onDidFocus.fire())},onBlur=()=>{o&&(s=!0,window.setTimeout((()=>{s&&(s=!1,o=!1,this._onDidBlur.fire())}),0))};this._refreshStateHandler=()=>{let s=FocusTracker.hasFocusWithin(e);s!==o&&(o?onBlur():onFocus())},this._register(addDisposableListener(e,E.FOCUS,onFocus,!0)),this._register(addDisposableListener(e,E.BLUR,onBlur,!0)),this._register(addDisposableListener(e,E.FOCUS_IN,(()=>this._refreshStateHandler()))),this._register(addDisposableListener(e,E.FOCUS_OUT,(()=>this._refreshStateHandler())))}static hasFocusWithin(e){const o=getShadowRoot(e),s=o?o.activeElement:document.activeElement;return isAncestor(s,e)}}function trackFocus(e){return new FocusTracker(e)}function append(e,...o){if(e.append(...o),1===o.length&&"string"!==typeof o[0])return o[0]}function prepend(e,o){return e.insertBefore(o,e.firstChild),o}function reset(e,...o){e.innerText="",append(e,...o)}const I=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var A;function _$(e,o,s,...l){let d=I.exec(o);if(!d)throw new Error("Bad use of emmet");s=Object.assign({},s||{});let u,g=d[1]||"div";return u=e!==A.HTML?document.createElementNS(e,g):document.createElement(g),d[3]&&(u.id=d[3]),d[4]&&(u.className=d[4].replace(/\./g," ").trim()),Object.keys(s).forEach((e=>{const o=s[e];"undefined"!==typeof o&&(/^on\w+$/.test(e)?u[e]=o:"selected"===e?o&&u.setAttribute(e,"true"):u.setAttribute(e,o))})),u.append(...l),u}function $(e,o,...s){return _$(A.HTML,e,o,...s)}function show(...e){for(let o of e)o.style.display="",o.removeAttribute("aria-hidden")}function hide(...e){for(let o of e)o.style.display="none",o.setAttribute("aria-hidden","true")}function getElementsByTagName(e){return Array.prototype.slice.call(document.getElementsByTagName(e),0)}function computeScreenAwareSize(e){const o=window.devicePixelRatio*e;return Math.max(1,Math.floor(o))/window.devicePixelRatio}function windowOpenNoOpener(e){window.open(e,"_blank","noopener")}function animate(e){const step=()=>{e(),o=L(step)};let o=L(step);return(0,_.OF)((()=>o.dispose()))}function asCSSUrl(e){return e?`url('${C.Gi.asBrowserUri(e).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function asCSSPropertyValue(e){return`'${e.replace(/'/g,"%27")}'`}(function(e){e["HTML"]="http://www.w3.org/1999/xhtml",e["SVG"]="http://www.w3.org/2000/svg"})(A||(A={})),$.SVG=function(e,o,...s){return _$(A.SVG,e,o,...s)},C.WX.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");class ModifierKeyEmitter extends f.Q5{constructor(){super(),this._subscriptions=new _.SL,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(addDisposableListener(window,"keydown",(e=>{if(e.defaultPrevented)return;const o=new u.y(e);if(6!==o.keyCode||!e.repeat){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(6===o.keyCode)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}}),!0)),this._subscriptions.add(addDisposableListener(window,"keyup",(e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))}),!0)),this._subscriptions.add(addDisposableListener(document.body,"mousedown",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),this._subscriptions.add(addDisposableListener(document.body,"mouseup",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),this._subscriptions.add(addDisposableListener(document.body,"mousemove",(e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)}),!0)),this._subscriptions.add(addDisposableListener(window,"blur",(()=>{this.resetKeyStatus()})))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ModifierKeyEmitter.instance||(ModifierKeyEmitter.instance=new ModifierKeyEmitter),ModifierKeyEmitter.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function addMatchMediaChangeListener(e,o){const s=window.matchMedia(e);s.addEventListener("change",o)}},4850:function(e,o,s){"use strict";s.d(o,{Y:function(){return DomEmitter},p:function(){return stopEvent}});var l=s(4669);class DomEmitter{constructor(e,o,s){const fn=e=>this.emitter.fire(e);this.emitter=new l.Q5({onFirstListenerAdd:()=>e.addEventListener(o,fn,s),onLastListenerRemove:()=>e.removeEventListener(o,fn,s)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function stopEvent(e){return e.preventDefault(),e.stopPropagation(),e}},8626:function(e,o,s){"use strict";s.d(o,{X:function(){return createFastDomNode},Z:function(){return FastDomNode}});class FastDomNode{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontStyle="",this._fontFeatureSettings="",this._textDecoration="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){-1!==this._top&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,o){this.domNode.classList.toggle(e,o),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,o){this.domNode.setAttribute(e,o)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function createFastDomNode(e){return new FastDomNode(e)}},8764:function(e,o,s){"use strict";s.d(o,{BO:function(){return renderFormattedText},IY:function(){return renderText},az:function(){return createElement}});var l=s(5321);function renderText(e,o={}){const s=createElement(o);return s.textContent=e,s}function renderFormattedText(e,o={}){const s=createElement(o);return _renderFormattedText(s,parseFormattedText(e,!!o.renderCodeSegments),o.actionHandler,o.renderCodeSegments),s}function createElement(e){const o=e.inline?"span":"div",s=document.createElement(o);return e.className&&(s.className=e.className),s}class StringStream{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function _renderFormattedText(e,o,s,d){let u;if(2===o.type)u=document.createTextNode(o.content||"");else if(3===o.type)u=document.createElement("b");else if(4===o.type)u=document.createElement("i");else if(7===o.type&&d)u=document.createElement("code");else if(5===o.type&&s){const e=document.createElement("a");s.disposables.add(l.mu(e,"click",(e=>{s.callback(String(o.index),e)}))),u=e}else 8===o.type?u=document.createElement("br"):1===o.type&&(u=e);u&&e!==u&&e.appendChild(u),u&&Array.isArray(o.children)&&o.children.forEach((e=>{_renderFormattedText(u,e,s,d)}))}function parseFormattedText(e,o){const s={type:1,children:[]};let l=0,d=s;const u=[],g=new StringStream(e);while(!g.eos()){let e=g.next();const s="\\"===e&&0!==formatTagType(g.peek(),o);if(s&&(e=g.next()),!s&&isFormatTag(e,o)&&e===g.peek()){g.advance(),2===d.type&&(d=u.pop());const s=formatTagType(e,o);if(d.type===s||5===d.type&&6===s)d=u.pop();else{const e={type:s,children:[]};5===s&&(e.index=l,l++),d.children.push(e),u.push(d),d=e}}else if("\n"===e)2===d.type&&(d=u.pop()),d.children.push({type:8});else if(2!==d.type){const o={type:2,content:e};d.children.push(o),u.push(d),d=o}else d.content+=e}return 2===d.type&&(d=u.pop()),u.length,s}function isFormatTag(e,o){return 0!==formatTagType(e,o)}function formatTagType(e,o){switch(e){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return o?7:0;default:return 0}}},7974:function(e,o,s){"use strict";s.d(o,{Z:function(){return GlobalMouseMoveMonitor},e:function(){return standardMouseMoveMerger}});var l=s(5321),d=s(262),u=s(3938),g=s(5976),p=s(1432);function standardMouseMoveMerger(e,o){let s=new u.n(o);return s.preventDefault(),{leftButton:s.leftButton,buttons:s.buttons,posx:s.posx,posy:s.posy}}class GlobalMouseMoveMonitor{constructor(){this._hooks=new g.SL,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,o){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const s=this._onStopCallback;this._onStopCallback=null,e&&s&&s(o)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,o,s,g,m){if(this.isMonitoring())return;this._mouseMoveEventMerger=s,this._mouseMoveCallback=g,this._onStopCallback=m;const f=d.E.getSameOriginWindowChain(),_=p.gn?"pointermove":"mousemove",C="mouseup",b=f.map((e=>e.window.document)),w=l.Ay(e);w&&b.unshift(w);for(const d of b)this._hooks.add(l.Y_(d,_,(e=>{e.buttons===o?this._mouseMoveCallback(e):this.stopMonitoring(!0)}),((e,o)=>this._mouseMoveEventMerger(e,o)))),this._hooks.add(l.nm(d,C,(e=>this.stopMonitoring(!0))));if(d.E.hasDifferentOriginAncestor()){let e=f[f.length-1];this._hooks.add(l.nm(e.window.document,"mouseout",(e=>{let o=new u.n(e);"html"===o.target.tagName.toLowerCase()&&this.stopMonitoring(!0)}))),this._hooks.add(l.nm(e.window.document,"mouseover",(e=>{let o=new u.n(e);"html"===o.target.tagName.toLowerCase()&&this.stopMonitoring(!0)}))),this._hooks.add(l.nm(e.window.document.body,"mouseleave",(e=>{this.stopMonitoring(!0)})))}}}},262:function(e,o,s){"use strict";s.d(o,{E:function(){return IframeUtils}});let l=!1,d=null;function getParentWindowIfSameOrigin(e){if(!e.parent||e.parent===e)return null;try{let o=e.location,s=e.parent.location;if("null"!==o.origin&&"null"!==s.origin&&o.origin!==s.origin)return l=!0,null}catch(o){return l=!0,null}return e.parent}class IframeUtils{static getSameOriginWindowChain(){if(!d){d=[];let e,o=window;do{e=getParentWindowIfSameOrigin(o),e?d.push({window:o,iframeElement:o.frameElement||null}):d.push({window:o,iframeElement:null}),o=e}while(o)}return d.slice(0)}static hasDifferentOriginAncestor(){return d||this.getSameOriginWindowChain(),l}static getPositionOfChildWindowRelativeToAncestorWindow(e,o){if(!o||e===o)return{top:0,left:0};let s=0,l=0,d=this.getSameOriginWindowChain();for(const u of d){if(s+=u.window.scrollY,l+=u.window.scrollX,u.window===o)break;if(!u.iframeElement)break;let e=u.iframeElement.getBoundingClientRect();s+=e.top,l+=e.left}return{top:s,left:l}}}},9069:function(e,o,s){"use strict";s.d(o,{y:function(){return StandardKeyboardEvent}});var l=s(6268),d=s(2258),u=s(8313),g=s(1432);function extractKeyCode(e){if(e.charCode){let o=String.fromCharCode(e.charCode).toUpperCase();return d.kL.fromString(o)}const o=e.keyCode;if(3===o)return 7;if(l.isFirefox){if(59===o)return 80;if(107===o)return 81;if(109===o)return 83;if(g.dz&&224===o)return 57}else if(l.isWebKit){if(91===o)return 57;if(g.dz&&93===o)return 57;if(!g.dz&&92===o)return 57}return d.H_[o]||0}const p=g.dz?256:2048,m=512,f=1024,_=g.dz?2048:256;class StandardKeyboardEvent{constructor(e){this._standardKeyboardEventBrand=!0;let o=e;this.browserEvent=o,this.target=o.target,this.ctrlKey=o.ctrlKey,this.shiftKey=o.shiftKey,this.altKey=o.altKey,this.metaKey=o.metaKey,this.keyCode=extractKeyCode(o),this.code=o.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode);let o=0;return this.ctrlKey&&(o|=p),this.altKey&&(o|=m),this.shiftKey&&(o|=f),this.metaKey&&(o|=_),o|=e,o}_computeRuntimeKeybinding(){let e=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode),new u.QC(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}},3938:function(e,o,s){"use strict";s.d(o,{n:function(){return StandardMouseEvent},q:function(){return StandardWheelEvent}});var l=s(6268),d=s(262),u=s(1432);class StandardMouseEvent{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=0===e.button,this.middleButton=1===e.button,this.rightButton=2===e.button,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,"dblclick"===e.type&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,"number"===typeof e.pageX?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let o=d.E.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=o.left,this.posy-=o.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class StandardWheelEvent{constructor(e,o=0,s=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=s,this.deltaX=o,e){let o=e,s=e;if("undefined"!==typeof o.wheelDeltaY)this.deltaY=o.wheelDeltaY/120;else if("undefined"!==typeof s.VERTICAL_AXIS&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if("wheel"===e.type){const o=e;o.deltaMode===o.DOM_DELTA_LINE?l.isFirefox&&!u.dz?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if("undefined"!==typeof o.wheelDeltaX)l.isSafari&&u.ED?this.deltaX=-o.wheelDeltaX/120:this.deltaX=o.wheelDeltaX/120;else if("undefined"!==typeof s.HORIZONTAL_AXIS&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if("wheel"===e.type){const o=e;o.deltaMode===o.DOM_DELTA_LINE?l.isFirefox&&!u.dz?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}},553:function(e,o,s){"use strict";s.d(o,{o:function(){return Gesture},t:function(){return l}});var l,d=s(5321),u=s(9488),g=s(9898),p=s(5976),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g};(function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend",e.Contextmenu="-monaco-gesturecontextmenu"})(l||(l={}));class Gesture extends p.JT{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(d.nm(document,"touchstart",(e=>this.onTouchStart(e)),{passive:!1})),this._register(d.nm(document,"touchend",(e=>this.onTouchEnd(e)))),this._register(d.nm(document,"touchmove",(e=>this.onTouchMove(e)),{passive:!1}))}static addTarget(e){return Gesture.isTouchDevice()?(Gesture.INSTANCE||(Gesture.INSTANCE=new Gesture),Gesture.INSTANCE.targets.push(e),{dispose:()=>{Gesture.INSTANCE.targets=Gesture.INSTANCE.targets.filter((o=>o!==e))}}):p.JT.None}static ignoreTarget(e){return Gesture.isTouchDevice()?(Gesture.INSTANCE||(Gesture.INSTANCE=new Gesture),Gesture.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Gesture.INSTANCE.ignoreTargets=Gesture.INSTANCE.ignoreTargets.filter((o=>o!==e))}}):p.JT.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let o=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let s=0,d=e.targetTouches.length;s<d;s++){let d=e.targetTouches.item(s);this.activeTouches[d.identifier]={id:d.identifier,initialTarget:d.target,initialTimeStamp:o,initialPageX:d.pageX,initialPageY:d.pageY,rollingTimestamps:[o],rollingPageX:[d.pageX],rollingPageY:[d.pageY]};let u=this.newGestureEvent(l.Start,d.target);u.pageX=d.pageX,u.pageY=d.pageY,this.dispatchEvent(u)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let o=Date.now(),s=Object.keys(this.activeTouches).length;for(let d=0,g=e.changedTouches.length;d<g;d++){let g=e.changedTouches.item(d);if(!this.activeTouches.hasOwnProperty(String(g.identifier))){console.warn("move of an UNKNOWN touch",g);continue}let p=this.activeTouches[g.identifier],m=Date.now()-p.initialTimeStamp;if(m<Gesture.HOLD_DELAY&&Math.abs(p.initialPageX-u.Gb(p.rollingPageX))<30&&Math.abs(p.initialPageY-u.Gb(p.rollingPageY))<30){let e=this.newGestureEvent(l.Tap,p.initialTarget);e.pageX=u.Gb(p.rollingPageX),e.pageY=u.Gb(p.rollingPageY),this.dispatchEvent(e)}else if(m>=Gesture.HOLD_DELAY&&Math.abs(p.initialPageX-u.Gb(p.rollingPageX))<30&&Math.abs(p.initialPageY-u.Gb(p.rollingPageY))<30){let e=this.newGestureEvent(l.Contextmenu,p.initialTarget);e.pageX=u.Gb(p.rollingPageX),e.pageY=u.Gb(p.rollingPageY),this.dispatchEvent(e)}else if(1===s){let e=u.Gb(p.rollingPageX),s=u.Gb(p.rollingPageY),l=u.Gb(p.rollingTimestamps)-p.rollingTimestamps[0],d=e-p.rollingPageX[0],g=s-p.rollingPageY[0];const m=this.targets.filter((e=>p.initialTarget instanceof Node&&e.contains(p.initialTarget)));this.inertia(m,o,Math.abs(d)/l,d>0?1:-1,e,Math.abs(g)/l,g>0?1:-1,s)}this.dispatchEvent(this.newGestureEvent(l.End,p.initialTarget)),delete this.activeTouches[g.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,o){let s=document.createEvent("CustomEvent");return s.initEvent(e,!1,!0),s.initialTarget=o,s.tapCount=0,s}dispatchEvent(e){if(e.type===l.Tap){const o=(new Date).getTime();let s=0;s=o-this._lastSetTapCountTime>Gesture.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=o,e.tapCount=s}else e.type!==l.Change&&e.type!==l.Contextmenu||(this._lastSetTapCountTime=0);for(let o=0;o<this.ignoreTargets.length;o++)if(e.initialTarget instanceof Node&&this.ignoreTargets[o].contains(e.initialTarget))return;this.targets.forEach((o=>{e.initialTarget instanceof Node&&o.contains(e.initialTarget)&&(o.dispatchEvent(e),this.dispatched=!0)}))}inertia(e,o,s,u,g,p,m,f){this.handle=d.jL((()=>{let d=Date.now(),_=d-o,C=0,b=0,w=!0;s+=Gesture.SCROLL_FRICTION*_,p+=Gesture.SCROLL_FRICTION*_,s>0&&(w=!1,C=u*s*_),p>0&&(w=!1,b=m*p*_);let S=this.newGestureEvent(l.Change);S.translationX=C,S.translationY=b,e.forEach((e=>e.dispatchEvent(S))),w||this.inertia(e,d,s,u,g+C,p,m,f+b)}))}onTouchMove(e){let o=Date.now();for(let s=0,d=e.changedTouches.length;s<d;s++){let d=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(d.identifier))){console.warn("end of an UNKNOWN touch",d);continue}let g=this.activeTouches[d.identifier],p=this.newGestureEvent(l.Change,g.initialTarget);p.translationX=d.pageX-u.Gb(g.rollingPageX),p.translationY=d.pageY-u.Gb(g.rollingPageY),p.pageX=d.pageX,p.pageY=d.pageY,this.dispatchEvent(p),g.rollingPageX.length>3&&(g.rollingPageX.shift(),g.rollingPageY.shift(),g.rollingTimestamps.shift()),g.rollingPageX.push(d.pageX),g.rollingPageY.push(d.pageY),g.rollingTimestamps.push(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Gesture.SCROLL_FRICTION=-.005,Gesture.HOLD_DELAY=700,Gesture.CLEAR_TAP_COUNT_TIME=400,__decorate([g.H],Gesture,"isTouchDevice",null)},6033:function(e,o,s){"use strict";s.d(o,{Y:function(){return BaseActionViewItem},g:function(){return ActionViewItem}});var l=s(6268),d=s(3547),u=s(5321),g=s(553),p=s(4741),m=s(5976),f=s(1432),_=s(8401),C=s(3580);class BaseActionViewItem extends m.JT{constructor(e,o,s={}){super(),this.options=s,this._context=e||this,this._action=o,o instanceof p.aU&&this._register(o.onDidChange((e=>{this.element&&this.handleActionChangeEvent(e)})))}handleActionChangeEvent(e){void 0!==e.enabled&&this.updateEnabled(),void 0!==e.checked&&this.updateChecked(),void 0!==e.class&&this.updateClass(),void 0!==e.label&&(this.updateLabel(),this.updateTooltip()),void 0!==e.tooltip&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new p.Wi)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const o=this.element=e;this._register(g.o.addTarget(e));const s=this.options&&this.options.draggable;s&&(e.draggable=!0,l.isFirefox&&this._register((0,u.nm)(e,u.tw.DRAG_START,(e=>{var o;return null===(o=e.dataTransfer)||void 0===o?void 0:o.setData(d.go.TEXT,this._action.label)})))),this._register((0,u.nm)(o,g.t.Tap,(e=>this.onClick(e,!0)))),this._register((0,u.nm)(o,u.tw.MOUSE_DOWN,(e=>{s||u.zB.stop(e,!0),this._action.enabled&&0===e.button&&o.classList.add("active")}))),f.dz&&this._register((0,u.nm)(o,u.tw.CONTEXT_MENU,(e=>{0===e.button&&!0===e.ctrlKey&&this.onClick(e)}))),this._register((0,u.nm)(o,u.tw.CLICK,(e=>{u.zB.stop(e,!0),this.options&&this.options.isMenu||this.onClick(e)}))),this._register((0,u.nm)(o,u.tw.DBLCLICK,(e=>{u.zB.stop(e,!0)}))),[u.tw.MOUSE_UP,u.tw.MOUSE_OUT].forEach((e=>{this._register((0,u.nm)(o,e,(e=>{u.zB.stop(e),o.classList.remove("active")})))}))}onClick(e,o=!1){var s;u.zB.stop(e,!0);const l=_.Jp(this._context)?(null===(s=this.options)||void 0===s?void 0:s.useEventAsContext)?e:{preserveFocus:o}:this._context;this.actionRunner.run(this._action,l)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class ActionViewItem extends BaseActionViewItem{constructor(e,o,s={}){super(e,o,s),this.options=s,this.options.icon=void 0!==s.icon&&s.icon,this.options.label=void 0===s.label||s.label,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=(0,u.R3)(this.element,(0,u.$)("a.action-label"))),this.label&&(this._action.id===p.Z0.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&((0,u.R3)(this.element,(0,u.$)("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=C.N({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}},317:function(e,o,s){"use strict";s.d(o,{o:function(){return ActionBar}});var l=s(5321),d=s(9069),u=s(6033),g=s(4741),p=s(4669),m=s(5976),f=s(8401),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class ActionBar extends m.JT{constructor(e,o={}){var s,m,f,_,C,b;let w,S;switch(super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new p.Q5),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new p.Q5({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new p.Q5),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new p.Q5),this.onBeforeRun=this._onBeforeRun.event,this.options=o,this._context=null!==(s=o.context)&&void 0!==s?s:null,this._orientation=null!==(m=this.options.orientation)&&void 0!==m?m:0,this._triggerKeys={keyDown:null!==(_=null===(f=this.options.triggerKeys)||void 0===f?void 0:f.keyDown)&&void 0!==_&&_,keys:null!==(b=null===(C=this.options.triggerKeys)||void 0===C?void 0:C.keys)&&void 0!==b?b:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new g.Wi,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun((e=>this._onDidRun.fire(e)))),this._register(this._actionRunner.onBeforeRun((e=>this._onBeforeRun.fire(e)))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",!1!==o.animated&&this.domNode.classList.add("animated"),this._orientation){case 0:w=[15],S=[17];break;case 1:w=[16],S=[18],this.domNode.className+=" vertical";break}this._register(l.nm(this.domNode,l.tw.KEY_DOWN,(e=>{const o=new d.y(e);let s=!0;const l="number"===typeof this.focusedItem?this.viewItems[this.focusedItem]:void 0;w&&(o.equals(w[0])||o.equals(w[1]))?s=this.focusPrevious():S&&(o.equals(S[0])||o.equals(S[1]))?s=this.focusNext():o.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():o.equals(14)?s=this.focusFirst():o.equals(13)?s=this.focusLast():o.equals(2)&&l instanceof u.Y&&l.trapsArrowNavigation?s=this.focusNext():this.isTriggerKeyEvent(o)?this._triggerKeys.keyDown?this.doTrigger(o):this.triggerKeyDown=!0:s=!1,s&&(o.preventDefault(),o.stopPropagation())}))),this._register(l.nm(this.domNode,l.tw.KEY_UP,(e=>{const o=new d.y(e);this.isTriggerKeyEvent(o)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(o)),o.preventDefault(),o.stopPropagation()):(o.equals(2)||o.equals(1026))&&this.updateFocusedItem()}))),this.focusTracker=this._register(l.go(this.domNode)),this._register(this.focusTracker.onDidBlur((()=>{l.vY()!==this.domNode&&l.jg(l.vY(),this.domNode)||(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)}))),this._register(this.focusTracker.onDidFocus((()=>this.updateFocusedItem()))),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role","toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const e=this.viewItems.find((e=>e instanceof u.Y&&e.isEnabled()));e instanceof u.Y&&e.setFocusable(!0)}else this.viewItems.forEach((e=>{e instanceof u.Y&&e.setFocusable(!1)}))}isTriggerKeyEvent(e){let o=!1;return this._triggerKeys.keys.forEach((s=>{o=o||e.equals(s)})),o}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const o=this.actionsList.children[e];if(l.jg(l.vY(),o)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach((o=>o.setActionContext(e)))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach((o=>o.actionRunner=e)))}getContainer(){return this.domNode}push(e,o={}){const s=Array.isArray(e)?e:[e];let d=f.hj(o.index)?o.index:null;s.forEach((e=>{const s=document.createElement("li");let g;s.className="action-item",s.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(l.nm(s,l.tw.CONTEXT_MENU,(e=>{l.zB.stop(e,!0)}))),this.options.actionViewItemProvider&&(g=this.options.actionViewItemProvider(e)),g||(g=new u.g(this.context,e,o)),g.actionRunner=this._actionRunner,g.setActionContext(this.context),g.render(s),this.focusable&&g instanceof u.Y&&0===this.viewItems.length&&g.setFocusable(!0),null===d||d<0||d>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(g),this._actionIds.push(e.id)):(this.actionsList.insertBefore(s,this.actionsList.children[d]),this.viewItems.splice(d,0,g),this._actionIds.splice(d,0,e.id),d++)})),"number"===typeof this.focusedItem&&this.focus(this.focusedItem),this.refreshRole()}clear(){(0,m.B9)(this.viewItems),this.viewItems=[],this._actionIds=[],l.PO(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}focus(e){let o,s=!1;if(void 0===e?s=!0:"number"===typeof e?o=e:"boolean"===typeof e&&(s=e),s&&"undefined"===typeof this.focusedItem){const e=this.viewItems.findIndex((e=>e.isEnabled()));this.focusedItem=-1===e?void 0:e,this.updateFocus(void 0,void 0,!0)}else void 0!==o&&(this.focusedItem=o),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if("undefined"===typeof this.focusedItem)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const o=this.focusedItem;let s;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=o,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,s=this.viewItems[this.focusedItem]}while(this.focusedItem!==o&&this.options.focusOnlyEnabledItems&&!s.isEnabled());return this.updateFocus(),!0}focusPrevious(e){if("undefined"===typeof this.focusedItem)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const o=this.focusedItem;let s;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=o,!1;this.focusedItem=this.viewItems.length-1}s=this.viewItems[this.focusedItem]}while(this.focusedItem!==o&&this.options.focusOnlyEnabledItems&&!s.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,o,s=!1){var l;"undefined"===typeof this.focusedItem&&this.actionsList.focus({preventScroll:o}),void 0!==this.previouslyFocusedItem&&this.previouslyFocusedItem!==this.focusedItem&&(null===(l=this.viewItems[this.previouslyFocusedItem])||void 0===l||l.blur());const d=void 0!==this.focusedItem&&this.viewItems[this.focusedItem];if(d){let l=!0;f.mf(d.focus)||(l=!1),this.options.focusOnlyEnabledItems&&f.mf(d.isEnabled)&&!d.isEnabled()&&(l=!1),l?(s||this.previouslyFocusedItem!==this.focusedItem)&&(d.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:o}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if("undefined"===typeof this.focusedItem)return;const o=this.viewItems[this.focusedItem];if(o instanceof u.Y){const s=null===o._context||void 0===o._context?e:o._context;this.run(o._action,s)}}run(e,o){return __awaiter(this,void 0,void 0,(function*(){yield this._actionRunner.run(e,o)}))}dispose(){(0,m.B9)(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}},5152:function(e,o,s){"use strict";s.d(o,{Z9:function(){return alert},i7:function(){return status},wW:function(){return setARIAContainer}});var l=s(5321),d=s(1432);const u=2e4;let g,p,m,f,_;function setARIAContainer(e){g=document.createElement("div"),g.className="monaco-aria-container";const createAlertContainer=()=>{const e=document.createElement("div");return e.className="monaco-alert",e.setAttribute("role","alert"),e.setAttribute("aria-atomic","true"),g.appendChild(e),e};p=createAlertContainer(),m=createAlertContainer();const createStatusContainer=()=>{const e=document.createElement("div");return e.className="monaco-status",e.setAttribute("role","complementary"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),g.appendChild(e),e};f=createStatusContainer(),_=createStatusContainer(),e.appendChild(g)}function alert(e){g&&(p.textContent!==e?(l.PO(m),insertMessage(p,e)):(l.PO(p),insertMessage(m,e)))}function status(e){g&&(d.dz?alert(e):f.textContent!==e?(l.PO(_),insertMessage(f,e)):(l.PO(f),insertMessage(_,e)))}function insertMessage(e,o){l.PO(e),o.length>u&&(o=o.substr(0,u)),e.textContent=o,e.style.visibility="hidden",e.style.visibility="visible"}},6229:function(e,o,s){"use strict";s.d(o,{X:function(){return Checkbox}});var l=s(3794),d=s(3046),u=s(1264),g=s(4669);const p={inputActiveOptionBorder:u.Il.fromHex("#007ACC00"),inputActiveOptionForeground:u.Il.fromHex("#FFFFFF"),inputActiveOptionBackground:u.Il.fromHex("#0E639C50")};class Checkbox extends l.${constructor(e){super(),this._onChange=this._register(new g.Q5),this.onChange=this._onChange.event,this._onKeyDown=this._register(new g.Q5),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},p),e),this._checked=this._opts.isChecked;const o=["monaco-custom-checkbox"];this._opts.icon&&o.push(...d.dT.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&o.push(...this._opts.actionClassName.split(" ")),this._checked&&o.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...o),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault())})),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,(e=>{if(10===e.keyCode||3===e.keyCode)return this.checked=!this._checked,this._onChange.fire(!0),void e.preventDefault();this._onKeyDown.fire(e)}))}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}},8609:function(e,o,s){"use strict";s.d(o,{a:function(){return formatRule}});var l=s(3046);function formatRule(e){let o=e.definition;while(o instanceof l.lA)o=o.definition;return`.codicon-${e.id}:before { content: '${o.fontCharacter}'; }`}},7488:function(e,o,s){"use strict";s.d(o,{Z:function(){return CountBadge}});var l=s(5321),d=s(1264),u=s(6248),g=s(2677);const p={badgeBackground:d.Il.fromHex("#4D4D4D"),badgeForeground:d.Il.fromHex("#FFFFFF")};class CountBadge{constructor(e,o){this.count=0,this.options=o||Object.create(null),(0,u.jB)(this.options,p,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=(0,l.R3)(e,(0,l.$)(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=(0,g.WU)(this.countFormat,this.count),this.element.title=(0,g.WU)(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",o=this.badgeForeground?this.badgeForeground.toString():"",s=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=o,this.element.style.borderWidth=s?"1px":"",this.element.style.borderStyle=s?"solid":"",this.element.style.borderColor=s}}}},3331:function(e,o,s){"use strict";s.d(o,{am:function(){return RegexCheckbox},n3:function(){return WholeWordsCheckbox},vk:function(){return CaseSensitiveCheckbox}});var l=s(6229),d=s(3046),u=s(3580);const g=u.N("caseDescription","Match Case"),p=u.N("wordsDescription","Match Whole Word"),m=u.N("regexDescription","Use Regular Expression");class CaseSensitiveCheckbox extends l.X{constructor(e){super({icon:d.lA.caseSensitive,title:g+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class WholeWordsCheckbox extends l.X{constructor(e){super({icon:d.lA.wholeWord,title:p+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class RegexCheckbox extends l.X{constructor(e){super({icon:d.lA.regex,title:m+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}},4650:function(e,o,s){"use strict";s.d(o,{q:function(){return HighlightedLabel}});var l=s(5321),d=s(6811),u=s(6248);class HighlightedLabel{constructor(e,o){var s;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=null!==(s=null===o||void 0===o?void 0:o.supportIcons)&&void 0!==s&&s,this.domNode=l.R3(e,l.$("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,o=[],s="",l){e||(e=""),l&&(e=HighlightedLabel.escapeNewLines(e,o)),this.didEverRender&&this.text===e&&this.title===s&&u.fS(this.highlights,o)||(this.text=e,this.title=s,this.highlights=o,this.render())}render(){const e=[];let o=0;for(const s of this.highlights){if(s.end===s.start)continue;if(o<s.start){const u=this.text.substring(o,s.start);e.push(l.$("span",void 0,...this.supportIcons?(0,d.T)(u):[u])),o=s.end}const u=this.text.substring(s.start,s.end),g=l.$("span.highlight",void 0,...this.supportIcons?(0,d.T)(u):[u]);s.extraClasses&&g.classList.add(...s.extraClasses),e.push(g),o=s.end}if(o<this.text.length){const s=this.text.substring(o);e.push(l.$("span",void 0,...this.supportIcons?(0,d.T)(s):[s]))}l.mc(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,o){let s=0,l=0;return e.replace(/\r\n|\r|\n/g,((e,d)=>{l="\r\n"===e?-1:0,d+=s;for(const s of o)s.end<=d||(s.start>=d&&(s.start+=l),s.end>=d&&(s.end+=l));return s+=l,"⏎"}))}}},489:function(e,o,s){"use strict";s.d(o,{g:function(){return IconLabel}});var l=s(5321),d=s(4650),u=s(5393),g=s(1050),p=s(9365),m=s(1212),f=s(5976),_=s(8401),C=s(3580),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function setupNativeHover(e,o){(0,_.HD)(o)?e.title=(0,m.x$)(o):(null===o||void 0===o?void 0:o.markdownNotSupportedFallback)?e.title=o.markdownNotSupportedFallback:e.removeAttribute("title")}class UpdatableHoverWidget{constructor(e,o,s){this.hoverDelegate=e,this.target=o,this.fadeInAnimation=s}update(e,o){var s;return __awaiter(this,void 0,void 0,(function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let l;if(void 0===e||(0,_.HD)(e)||e instanceof HTMLElement)l=e;else if((0,_.mf)(e.markdown)){this._hoverWidget||this.show((0,C.N)("iconLabel.loading","Loading..."),o),this._cancellationTokenSource=new g.A;const s=this._cancellationTokenSource.token;if(l=yield e.markdown(s),void 0===l&&(l=e.markdownNotSupportedFallback),this.isDisposed||s.isCancellationRequested)return}else l=null!==(s=e.markdown)&&void 0!==s?s:e.markdownNotSupportedFallback;this.show(l,o)}))}show(e,o){const s=this._hoverWidget;if(this.hasContent(e)){const l={content:e,target:this.target,showPointer:"element"===this.hoverDelegate.placement,hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!s};this._hoverWidget=this.hoverDelegate.showHover(l,o)}null===s||void 0===s||s.dispose()}hasContent(e){return!!e&&(!(0,p.Fr)(e)||!!e.value)}get isDisposed(){var e;return null===(e=this._hoverWidget)||void 0===e?void 0:e.isDisposed}dispose(){var e,o;null===(e=this._hoverWidget)||void 0===e||e.dispose(),null===(o=this._cancellationTokenSource)||void 0===o||o.dispose(!0),this._cancellationTokenSource=void 0}}function setupCustomHover(e,o,s){let d,g;const hideHover=(o,s)=>{var l;o&&(null===g||void 0===g||g.dispose(),g=void 0),s&&(null===d||void 0===d||d.dispose(),d=void 0),null===(l=e.onDidHideHover)||void 0===l||l.call(e)},triggerShowHover=(l,d,p)=>new u._F((()=>__awaiter(this,void 0,void 0,(function*(){g&&!g.isDisposed||(g=new UpdatableHoverWidget(e,p||o,l>0),yield g.update(s,d))}))),l),onMouseOver=()=>{if(d)return;const s=new f.SL,onMouseLeave=e=>hideHover(!1,e.fromElement===o);s.add(l.nm(o,l.tw.MOUSE_LEAVE,onMouseLeave,!0));const onMouseDown=()=>hideHover(!0,!0);s.add(l.nm(o,l.tw.MOUSE_DOWN,onMouseDown,!0));const u={targetElements:[o],dispose:()=>{}};if(void 0===e.placement||"mouse"===e.placement){const onMouseMove=e=>u.x=e.x+10;s.add(l.nm(o,l.tw.MOUSE_MOVE,onMouseMove,!0))}s.add(triggerShowHover(e.delay,!1,u)),d=s},p=l.nm(o,l.tw.MOUSE_OVER,onMouseOver,!0),m={show:e=>{hideHover(!1,!0),triggerShowHover(0,e)},hide:()=>{hideHover(!0,!0)},update:e=>__awaiter(this,void 0,void 0,(function*(){s=e,yield null===g||void 0===g?void 0:g.update(s)})),dispose:()=>{p.dispose(),hideHover(!0,!0)}};return m}var b=s(6248),w=s(1134);class FastLabelNode{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class IconLabel extends f.JT{constructor(e,o){super(),this.customHovers=new Map,this.domNode=this._register(new FastLabelNode(l.R3(e,l.$(".monaco-icon-label")))),this.labelContainer=l.R3(this.domNode.element,l.$(".monaco-icon-label-container"));const s=l.R3(this.labelContainer,l.$("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new FastLabelNode(l.R3(this.labelContainer,l.$("span.monaco-icon-description-container")))),(null===o||void 0===o?void 0:o.supportHighlights)||(null===o||void 0===o?void 0:o.supportIcons)?this.nameNode=new LabelWithHighlights(s,!!o.supportIcons):this.nameNode=new Label(s),(null===o||void 0===o?void 0:o.supportDescriptionHighlights)?this.descriptionNodeFactory=()=>new d.q(l.R3(this.descriptionContainer.element,l.$("span.label-description")),{supportIcons:!!o.supportIcons}):this.descriptionNodeFactory=()=>this._register(new FastLabelNode(l.R3(this.descriptionContainer.element,l.$("span.label-description")))),this.hoverDelegate=null===o||void 0===o?void 0:o.hoverDelegate}get element(){return this.domNode.element}setLabel(e,o,s){const l=["monaco-icon-label"];s&&(s.extraClasses&&l.push(...s.extraClasses),s.italic&&l.push("italic"),s.strikethrough&&l.push("strikethrough")),this.domNode.className=l.join(" "),this.setupHover((null===s||void 0===s?void 0:s.descriptionTitle)?this.labelContainer:this.element,null===s||void 0===s?void 0:s.title),this.nameNode.setLabel(e,s),(o||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof d.q?(this.descriptionNode.set(o||"",s?s.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,null===s||void 0===s?void 0:s.descriptionTitle)):(this.descriptionNode.textContent=o||"",this.setupHover(this.descriptionNode.element,(null===s||void 0===s?void 0:s.descriptionTitle)||""),this.descriptionNode.empty=!o))}setupHover(e,o){const s=this.customHovers.get(e);if(s&&(s.dispose(),this.customHovers.delete(e)),o)if(this.hoverDelegate){const s=setupCustomHover(this.hoverDelegate,e,o);s&&this.customHovers.set(e,s)}else setupNativeHover(e,o);else e.removeAttribute("title")}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class Label{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,o){if(this.label!==e||!(0,b.fS)(this.options,o))if(this.label=e,this.options=o,"string"===typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=l.R3(this.container,l.$("a.label-name",{id:null===o||void 0===o?void 0:o.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let s=0;s<e.length;s++){const d=e[s],u=(null===o||void 0===o?void 0:o.domId)&&`${null===o||void 0===o?void 0:o.domId}_${s}`;l.R3(this.container,l.$("a.label-name",{id:u,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"},d)),s<e.length-1&&l.R3(this.container,l.$("span.label-separator",void 0,(null===o||void 0===o?void 0:o.separator)||"/"))}}}}function splitMatches(e,o,s){if(!s)return;let l=0;return e.map((e=>{const d={start:l,end:l+e.length},u=s.map((e=>w.e.intersect(d,e))).filter((e=>!w.e.isEmpty(e))).map((({start:e,end:o})=>({start:e-l,end:o-l})));return l=d.end+o.length,u}))}class LabelWithHighlights{constructor(e,o){this.container=e,this.supportIcons=o,this.label=void 0,this.singleLabel=void 0}setLabel(e,o){if(this.label!==e||!(0,b.fS)(this.options,o))if(this.label=e,this.options=o,"string"===typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new d.q(l.R3(this.container,l.$("a.label-name",{id:null===o||void 0===o?void 0:o.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,null===o||void 0===o?void 0:o.matches,void 0,null===o||void 0===o?void 0:o.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const s=(null===o||void 0===o?void 0:o.separator)||"/",u=splitMatches(e,s,null===o||void 0===o?void 0:o.matches);for(let g=0;g<e.length;g++){const p=e[g],m=u?u[g]:void 0,f=(null===o||void 0===o?void 0:o.domId)&&`${null===o||void 0===o?void 0:o.domId}_${g}`,_=l.$("a.label-name",{id:f,"data-icon-label-count":e.length,"data-icon-label-index":g,role:"treeitem"}),C=new d.q(l.R3(this.container,_),{supportIcons:this.supportIcons});C.set(p,m,void 0,null===o||void 0===o?void 0:o.labelEscapeNewLines),g<e.length-1&&l.R3(_,l.$("span.label-separator",void 0,s))}}}}},6811:function(e,o,s){"use strict";s.d(o,{T:function(){return renderLabelWithIcons}});var l=s(5321),d=s(3046);const u=new RegExp(`(\\\\)?\\$\\((${d.dT.iconNameExpression}(?:${d.dT.iconModifierExpression})?)\\)`,"g");function renderLabelWithIcons(e){const o=new Array;let s,l=0,d=0;while(null!==(s=u.exec(e))){d=s.index||0,o.push(e.substring(l,d)),l=(s.index||0)+s[0].length;const[,u,g]=s;o.push(u?`$(${g})`:renderIcon({id:g}))}return l<e.length&&o.push(e.substring(l)),o}function renderIcon(e){const o=l.$("span");return o.classList.add(...d.dT.asClassNameArray(e)),o}},1338:function(e,o,s){"use strict";s.d(o,{p:function(){return HistoryInputBox},W:function(){return InputBox}});var l=s(5321),d=s(4850),u=s(8764),g=s(317),p=s(5152),m=s(3161),f=s(3794),_=s(1264),C=s(4669);class ArrayNavigator{constructor(e,o=0,s=e.length,l=o-1){this.items=e,this.start=o,this.end=s,this.index=l}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class HistoryNavigator{constructor(e=[],o=10){this._initialize(e),this._limit=o,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return 0!==this._currentPosition()?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new ArrayNavigator(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const o of e)this._history.add(o)}get _elements(){const e=[];return this._history.forEach((o=>e.push(o))),e}}var b=s(6248),w=s(3580);const S=l.$,y={inputBackground:_.Il.fromHex("#3C3C3C"),inputForeground:_.Il.fromHex("#CCCCCC"),inputValidationInfoBorder:_.Il.fromHex("#55AAFF"),inputValidationInfoBackground:_.Il.fromHex("#063B49"),inputValidationWarningBorder:_.Il.fromHex("#B89500"),inputValidationWarningBackground:_.Il.fromHex("#352A05"),inputValidationErrorBorder:_.Il.fromHex("#BE1100"),inputValidationErrorBackground:_.Il.fromHex("#5A1D1D")};class InputBox extends f.${constructor(e,o,s){var u;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new C.Q5),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new C.Q5),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=o,this.options=s||Object.create(null),(0,b.jB)(this.options,y,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=null!==(u=this.options.tooltip)&&void 0!==u?u:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=l.R3(e,S(".monaco-inputbox.idle"));let p=this.options.flexibleHeight?"textarea":"input",f=l.R3(this.element,S(".ibwrapper"));if(this.input=l.R3(f,S(p+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,(()=>this.element.classList.add("synthetic-focus"))),this.onblur(this.input,(()=>this.element.classList.remove("synthetic-focus"))),this.options.flexibleHeight){this.maxHeight="number"===typeof this.options.flexibleMaxHeight?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=l.R3(f,S("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new m.NB(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),l.R3(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll((e=>this.input.scrollTop=e.scrollTop)));const o=this._register(new d.Y(document,"selectionchange")),s=C.ju.filter(o.event,(()=>{const e=document.getSelection();return(null===e||void 0===e?void 0:e.anchorNode)===f}));this._register(s(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,(()=>this.onValueChange())),this.onblur(this.input,(()=>this.onBlur())),this.onfocus(this.input,(()=>this.onFocus())),this.ignoreGesture(this.input),setTimeout((()=>this.updateMirror()),0),this.options.actions&&(this.actionbar=this._register(new g.o(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return"number"===typeof this.cachedHeight?this.cachedHeight:l.wn(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return l.w(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let o=0;if(this.mirror){const e=parseFloat(this.mirror.style.paddingLeft||"")||0,s=parseFloat(this.mirror.style.paddingRight||"")||0;o=e+s}this.input.style.width=e-o+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if("number"!==typeof this.cachedContentHeight||"number"!==typeof this.cachedHeight||!this.scrollableElement)return;const e=this.cachedContentHeight,o=this.cachedHeight,s=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:o}),this.scrollableElement.setScrollPosition({scrollTop:s})}showMessage(e,o){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const s=this.stylesForType(this.message.type);this.element.style.border=s.border?`1px solid ${s.border}`:"",(this.hasFocus()||o)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),null===e||void 0===e?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,o,layout=()=>e.style.width=l.w(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:o=>{if(!this.message)return null;e=l.R3(o,S(".monaco-inputbox-container")),layout();const s={inline:!0,className:"monaco-inputbox-message"},d=this.message.formatContent?(0,u.BO)(this.message.content,s):(0,u.IY)(this.message.content,s);d.classList.add(this.classForType(this.message.type));const g=this.stylesForType(this.message.type);return d.style.backgroundColor=g.background?g.background.toString():"",d.style.color=g.foreground?g.foreground.toString():"",d.style.border=g.border?`1px solid ${g.border}`:"",l.R3(e,d),null},onHide:()=>{this.state="closed"},layout:layout}),o=3===this.message.type?w.N("alertErrorMessage","Error: {0}",this.message.content):2===this.message.type?w.N("alertWarningMessage","Warning: {0}",this.message.content):w.N("alertInfoMessage","Info: {0}",this.message.content),p.Z9(o),this.state="open"}_hideMessage(){this.contextViewProvider&&("open"===this.state&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,o=e.charCodeAt(e.length-1),s=10===o?" ":"",l=(e+s).replace(/\u000c/g,"");l?this.mirror.textContent=e+s:this.mirror.innerText=" ",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",o=this.inputForeground?this.inputForeground.toString():"",s=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=o,this.input.style.backgroundColor="inherit",this.input.style.color=o,this.element.style.borderWidth=s?"1px":"",this.element.style.borderStyle=s?"solid":"",this.element.style.borderColor=s}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=l.wn(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const o=this.inputElement,s=o.selectionStart,l=o.selectionEnd,d=o.value;null!==s&&null!==l&&(this.value=d.substr(0,s)+e+d.substr(l),o.setSelectionRange(s+1,s+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class HistoryInputBox extends InputBox{constructor(e,o,s){const l=w.N({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),d=` or ⇅ ${l}`,u=` (⇅ ${l})`;super(e,o,s),this.history=new HistoryNavigator(s.history,100);const addSuffix=()=>{if(s.showHistoryHint&&s.showHistoryHint()&&!this.placeholder.endsWith(d)&&!this.placeholder.endsWith(u)&&this.history.getHistory().length){const e=this.placeholder.endsWith(")")?d:u,o=this.placeholder+e;s.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=o:this.setPlaceHolder(o)}};this.observer=new MutationObserver(((e,o)=>{e.forEach((e=>{e.target.textContent||addSuffix()}))})),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,(()=>addSuffix())),this.onblur(this.input,(()=>{const resetPlaceholder=e=>{if(this.placeholder.endsWith(e)){const o=this.placeholder.slice(0,this.placeholder.length-e.length);return s.showPlaceholderOnFocus?this.placeholder=o:this.setPlaceHolder(o),!0}return!1};resetPlaceholder(u)||resetPlaceholder(d)}))}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,p.i7(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,p.i7(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}},2010:function(e,o,s){"use strict";s.d(o,{kX:function(){return ElementsDragAndDropData},Bv:function(){return ListView}});var l=s(6268),d=s(3547),u=s(5321),g=s(4850),p=s(553),m=s(3161),f=s(9488),_=s(5393),C=s(9898),b=s(4669),w=s(5976),S=s(6248),y=s(1134),L=s(6633);function groupIntersect(e,o){const s=[];for(let l of o){if(e.start>=l.range.end)continue;if(e.end<l.range.start)break;const o=y.e.intersect(e,l.range);y.e.isEmpty(o)||s.push({range:o,size:l.size})}return s}function shift({start:e,end:o},s){return{start:e+s,end:o+s}}function consolidate(e){const o=[];let s=null;for(let l of e){const e=l.range.start,d=l.range.end,u=l.size;s&&u===s.size?s.range.end=d:(s={range:{start:e,end:d},size:u},o.push(s))}return o}function concat(...e){return consolidate(e.reduce(((e,o)=>e.concat(o)),[]))}class RangeMap{constructor(){this.groups=[],this._size=0}splice(e,o,s=[]){const l=s.length-o,d=groupIntersect({start:0,end:e},this.groups),u=groupIntersect({start:e+o,end:Number.POSITIVE_INFINITY},this.groups).map((e=>({range:shift(e.range,l),size:e.size}))),g=s.map(((o,s)=>({range:{start:e+s,end:e+s+1},size:o.size})));this.groups=concat(d,g,u),this._size=this.groups.reduce(((e,o)=>e+o.size*(o.range.end-o.range.start)),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let o=0,s=0;for(let l of this.groups){const d=l.range.end-l.range.start,u=s+d*l.size;if(e<u)return o+Math.floor((e-s)/l.size);o+=d,s=u}return o}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let o=0,s=0;for(let l of this.groups){const d=l.range.end-l.range.start,u=s+d;if(e<u)return o+(e-s)*l.size;o+=d*l.size,s=u}return-1}}function removeFromParent(e){try{e.parentElement&&e.parentElement.removeChild(e)}catch(o){}}class RowCache{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let o=this.getTemplateCache(e).pop();if(!o){const s=(0,u.$)(".monaco-list-row"),l=this.getRenderer(e),d=l.renderTemplate(s);o={domNode:s,templateId:e,templateData:d}}return o}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:o,templateId:s}=e;o&&(o.classList.remove("scrolling"),removeFromParent(o));const l=this.getTemplateCache(s);l.push(e)}getTemplateCache(e){let o=this.cache.get(e);return o||(o=[],this.cache.set(e,o)),o}dispose(){this.cache.forEach(((e,o)=>{for(const s of e){const e=this.getRenderer(o);e.disposeTemplate(s.templateData),s.templateData=null}})),this.cache.clear()}getRenderer(e){const o=this.renderers.get(e);if(!o)throw new Error(`No renderer found for ${e}`);return o}}var __decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g};const x={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(e){return[e]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class ElementsDragAndDropData{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class ExternalElementsDragAndDropData{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class NativeDragAndDropData{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let o=0;o<e.files.length;o++){const s=e.files.item(o);s&&(s.size||s.type)&&this.files.push(s)}}}getData(){return{types:this.types,files:this.files}}}function equalsDragFeedback(e,o){return Array.isArray(e)&&Array.isArray(o)?(0,f.fS)(e,o):e===o}class ListViewAccessibilityProvider{constructor(e){(null===e||void 0===e?void 0:e.getSetSize)?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(e,o,s)=>s,(null===e||void 0===e?void 0:e.getPosInSet)?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(e,o)=>o+1,(null===e||void 0===e?void 0:e.getRole)?this.getRole=e.getRole.bind(e):this.getRole=e=>"listitem",(null===e||void 0===e?void 0:e.isChecked)?this.isChecked=e.isChecked.bind(e):this.isChecked=e=>{}}}class ListView{constructor(e,o,s,l=x){if(this.virtualDelegate=o,this.domId="list_id_"+ ++ListView.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new _.vp(50),this.splicing=!1,this.dragOverAnimationStopDisposable=w.JT.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=w.JT.None,this.onDragLeaveTimeout=w.JT.None,this.disposables=new w.SL,this._onDidChangeContentHeight=new b.Q5,this._horizontalScrolling=!1,l.horizontalScrolling&&l.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new RangeMap;for(const u of s)this.renderers.set(u.templateId,u);this.cache=this.disposables.add(new RowCache(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!==typeof l.mouseSupport||l.mouseSupport),this._horizontalScrolling=(0,S.CJ)(l,(e=>e.horizontalScrolling),x.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight="undefined"===typeof l.additionalScrollHeight?0:l.additionalScrollHeight,this.accessibilityProvider=new ListViewAccessibilityProvider(l.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows";const d=(0,S.CJ)(l,(e=>e.transformOptimization),x.transformOptimization);d&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(p.o.addTarget(this.rowsContainer)),this.scrollable=new L.Rm({forceIntegerValues:!0,smoothScrollDuration:(0,S.CJ)(l,(e=>e.smoothScrolling),!1)?125:0,scheduleAtNextAnimationFrame:e=>(0,u.jL)(e)}),this.scrollableElement=this.disposables.add(new m.$Z(this.rowsContainer,{alwaysConsumeMouseWheel:(0,S.CJ)(l,(e=>e.alwaysConsumeMouseWheel),x.alwaysConsumeMouseWheel),horizontal:1,vertical:(0,S.CJ)(l,(e=>e.verticalScrollMode),x.verticalScrollMode),useShadows:(0,S.CJ)(l,(e=>e.useShadows),x.useShadows),mouseWheelScrollSensitivity:l.mouseWheelScrollSensitivity,fastScrollSensitivity:l.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add((0,u.nm)(this.rowsContainer,p.t.Change,(e=>this.onTouchChange(e)))),this.disposables.add((0,u.nm)(this.scrollableElement.getDomNode(),"scroll",(e=>e.target.scrollTop=0))),this.disposables.add((0,u.nm)(this.domNode,"dragover",(e=>this.onDragOver(this.toDragEvent(e))))),this.disposables.add((0,u.nm)(this.domNode,"drop",(e=>this.onDrop(this.toDragEvent(e))))),this.disposables.add((0,u.nm)(this.domNode,"dragleave",(e=>this.onDragLeave(this.toDragEvent(e))))),this.disposables.add((0,u.nm)(this.domNode,"dragend",(e=>this.onDragEnd(e)))),this.setRowLineHeight=(0,S.CJ)(l,(e=>e.setRowLineHeight),x.setRowLineHeight),this.setRowHeight=(0,S.CJ)(l,(e=>e.setRowHeight),x.setRowHeight),this.supportDynamicHeights=(0,S.CJ)(l,(e=>e.supportDynamicHeights),x.supportDynamicHeights),this.dnd=(0,S.CJ)(l,(e=>e.dnd),x.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:(0,u.FK)(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){void 0!==e.additionalScrollHeight&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling),void 0!==e.mouseWheelScrollSensitivity&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),void 0!==e.fastScrollSensitivity&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,o,s=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,o,s)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,o,s=[]){const l=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),d={start:e,end:e+o},u=y.e.intersect(l,d),g=new Map;for(let w=u.end-1;w>=u.start;w--){const e=this.items[w];if(e.dragStartDisposable.dispose(),e.row){let o=g.get(e.templateId);o||(o=[],g.set(e.templateId,o));const s=this.renderers.get(e.templateId);s&&s.disposeElement&&s.disposeElement(e.element,w,e.row.templateData,e.size),o.push(e.row)}e.row=null}const p={start:e+o,end:this.items.length},m=y.e.intersect(p,l),f=y.e.relativeComplement(p,l),_=s.map((e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:w.JT.None,checkedDisposable:w.JT.None})));let C;0===e&&o>=this.items.length?(this.rangeMap=new RangeMap,this.rangeMap.splice(0,0,_),C=this.items,this.items=_):(this.rangeMap.splice(e,o,_),C=this.items.splice(e,o,..._));const b=s.length-o,S=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),L=shift(m,b),x=y.e.intersect(S,L);for(let w=x.start;w<x.end;w++)this.updateItemInDOM(this.items[w],w);const k=y.e.relativeComplement(L,S);for(const w of k)for(let e=w.start;e<w.end;e++)this.removeItemFromDOM(e);const N=f.map((e=>shift(e,b))),D={start:e,end:e+s.length},E=[D,...N].map((e=>y.e.intersect(S,e))),T=this.getNextToLastElement(E);for(const w of E)for(let e=w.start;e<w.end;e++){const o=this.items[e],s=g.get(o.templateId),l=null===s||void 0===s?void 0:s.pop();this.insertItemInDOM(e,T,l)}for(const w of g.values())for(const e of w)this.cache.release(e);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),C.map((e=>e.element))}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=(0,u.jL)((()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((()=>this.updateScrollWidth())):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const o of this.items)"undefined"!==typeof o.width&&(e=Math.max(e,o.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){const e=this.scrollableElement.getScrollDimensions();return e.height}element(e){return this.items[e].element}domElement(e){const o=this.items[e].row;return o&&o.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,o){let s={height:"number"===typeof e?e:(0,u.If)(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,s.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(s),"undefined"!==typeof o&&(this.renderWidth=o,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"===typeof o?o:(0,u.FK)(this.domNode)})}render(e,o,s,l,d,u=!1){const g=this.getRenderRange(o,s),p=y.e.relativeComplement(g,e),m=y.e.relativeComplement(e,g),f=this.getNextToLastElement(p);if(u){const o=y.e.intersect(e,g);for(let e=o.start;e<o.end;e++)this.updateItemInDOM(this.items[e],e)}for(const _ of p)for(let e=_.start;e<_.end;e++)this.insertItemInDOM(e,f);for(const _ of m)for(let e=_.start;e<_.end;e++)this.removeItemFromDOM(e);void 0!==l&&(this.rowsContainer.style.left=`-${l}px`),this.rowsContainer.style.top=`-${o}px`,this.horizontalScrolling&&void 0!==d&&(this.rowsContainer.style.width=`${Math.max(d,this.renderWidth)}px`),this.lastRenderTop=o,this.lastRenderHeight=s}insertItemInDOM(e,o,s){const l=this.items[e];l.row||(l.row=null!==s&&void 0!==s?s:this.cache.alloc(l.templateId));const d=this.accessibilityProvider.getRole(l.element)||"listitem";l.row.domNode.setAttribute("role",d);const g=this.accessibilityProvider.isChecked(l.element);if("boolean"===typeof g)l.row.domNode.setAttribute("aria-checked",String(!!g));else if(g){const update=e=>l.row.domNode.setAttribute("aria-checked",String(!!e));update(g.value),l.checkedDisposable=g.onDidChange(update)}l.row.domNode.parentElement||(o?this.rowsContainer.insertBefore(l.row.domNode,o):this.rowsContainer.appendChild(l.row.domNode)),this.updateItemInDOM(l,e);const p=this.renderers.get(l.templateId);if(!p)throw new Error(`No renderer found for template id ${l.templateId}`);p&&p.renderElement(l.element,e,l.row.templateData,l.size);const m=this.dnd.getDragURI(l.element);l.dragStartDisposable.dispose(),l.row.domNode.draggable=!!m,m&&(l.dragStartDisposable=(0,u.nm)(l.row.domNode,"dragstart",(e=>this.onDragStart(l.element,m,e)))),this.horizontalScrolling&&(this.measureItemWidth(l),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=l.isFirefox?"-moz-fit-content":"fit-content",e.width=(0,u.FK)(e.row.domNode);const o=window.getComputedStyle(e.row.domNode);o.paddingLeft&&(e.width+=parseFloat(o.paddingLeft)),o.paddingRight&&(e.width+=parseFloat(o.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,o){e.row.domNode.style.top=`${this.elementTop(o)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${o}`),e.row.domNode.setAttribute("data-last-element",o===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",o%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,o,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,o))),e.row.domNode.setAttribute("id",this.getElementDomId(o)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const o=this.items[e];if(o.dragStartDisposable.dispose(),o.checkedDisposable.dispose(),o.row){const s=this.renderers.get(o.templateId);s&&s.disposeElement&&s.disposeElement(o.element,e,o.row.templateData,o.size),this.cache.release(o.row),o.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){const e=this.scrollableElement.getScrollPosition();return e.scrollTop}setScrollTop(e,o){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:o})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return b.ju.map(this.disposables.add(new g.Y(this.domNode,"click")).event,(e=>this.toMouseEvent(e)))}get onMouseDblClick(){return b.ju.map(this.disposables.add(new g.Y(this.domNode,"dblclick")).event,(e=>this.toMouseEvent(e)))}get onMouseMiddleClick(){return b.ju.filter(b.ju.map(this.disposables.add(new g.Y(this.domNode,"auxclick")).event,(e=>this.toMouseEvent(e))),(e=>1===e.browserEvent.button))}get onMouseDown(){return b.ju.map(this.disposables.add(new g.Y(this.domNode,"mousedown")).event,(e=>this.toMouseEvent(e)))}get onContextMenu(){return b.ju.any(b.ju.map(this.disposables.add(new g.Y(this.domNode,"contextmenu")).event,(e=>this.toMouseEvent(e))),b.ju.map(this.disposables.add(new g.Y(this.domNode,p.t.Contextmenu)).event,(e=>this.toGestureEvent(e))))}get onTouchStart(){return b.ju.map(this.disposables.add(new g.Y(this.domNode,"touchstart")).event,(e=>this.toTouchEvent(e)))}get onTap(){return b.ju.map(this.disposables.add(new g.Y(this.rowsContainer,p.t.Tap)).event,(e=>this.toGestureEvent(e)))}toMouseEvent(e){const o=this.getItemIndexFromEventTarget(e.target||null),s="undefined"===typeof o?void 0:this.items[o],l=s&&s.element;return{browserEvent:e,index:o,element:l}}toTouchEvent(e){const o=this.getItemIndexFromEventTarget(e.target||null),s="undefined"===typeof o?void 0:this.items[o],l=s&&s.element;return{browserEvent:e,index:o,element:l}}toGestureEvent(e){const o=this.getItemIndexFromEventTarget(e.initialTarget||null),s="undefined"===typeof o?void 0:this.items[o],l=s&&s.element;return{browserEvent:e,index:o,element:l}}toDragEvent(e){const o=this.getItemIndexFromEventTarget(e.target||null),s="undefined"===typeof o?void 0:this.items[o],l=s&&s.element;return{browserEvent:e,index:o,element:l}}onScroll(e){try{const o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(o,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(o){throw console.error("Got bad scroll event:",e),o}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,o,s){if(!s.dataTransfer)return;const l=this.dnd.getDragElements(e);if(s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setData(d.go.TEXT,o),s.dataTransfer.setDragImage){let e;this.dnd.getDragLabel&&(e=this.dnd.getDragLabel(l,s)),"undefined"===typeof e&&(e=String(l.length));const o=(0,u.$)(".monaco-drag-image");o.textContent=e,document.body.appendChild(o),s.dataTransfer.setDragImage(o,-10,-10),setTimeout((()=>document.body.removeChild(o)),0)}this.currentDragData=new ElementsDragAndDropData(l),d.P$.CurrentDragAndDropData=new ExternalElementsDragAndDropData(l),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,s)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),d.P$.CurrentDragAndDropData&&"vscode-ui"===d.P$.CurrentDragAndDropData.getData())return!1;if(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(d.P$.CurrentDragAndDropData)this.currentDragData=d.P$.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new NativeDragAndDropData}const o=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop="boolean"===typeof o?o:o.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let s;if(e.browserEvent.dataTransfer.dropEffect="boolean"!==typeof o&&0===o.effect?"copy":"move",s="boolean"!==typeof o&&o.feedback?o.feedback:"undefined"===typeof e.index?[-1]:[e.index],s=(0,f.EB)(s).filter((e=>e>=-1&&e<this.length)).sort(((e,o)=>e-o)),s=-1===s[0]?[-1]:s,equalsDragFeedback(this.currentDragFeedback,s))return!0;if(this.currentDragFeedback=s,this.currentDragFeedbackDisposable.dispose(),-1===s[0])this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=(0,w.OF)((()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")}));else{for(const e of s){const o=this.items[e];o.dropTarget=!0,o.row&&o.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=(0,w.OF)((()=>{for(const e of s){const o=this.items[e];o.dropTarget=!1,o.row&&o.row.domNode.classList.remove("drop-target")}}))}return!0}onDragLeave(e){var o,s;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,_.Vg)((()=>this.clearDragOverFeedback()),100),this.currentDragData&&(null===(s=(o=this.dnd).onDragLeave)||void 0===s||s.call(o,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const o=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,d.P$.CurrentDragAndDropData=void 0,o&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),o.update(e.browserEvent.dataTransfer),this.dnd.drop(o,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,d.P$.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=w.JT.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const e=(0,u.xQ)(this.domNode).top;this.dragOverAnimationDisposable=(0,u.jt)(this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,_.Vg)((()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}),1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(void 0===this.dragOverMouseY)return;const o=this.dragOverMouseY-e,s=this.renderHeight-35;o<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(o-35))):o>s&&(this.scrollTop+=Math.min(14,Math.floor(.3*(o-s))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const o=this.scrollableElement.getDomNode();let s=e;while(s instanceof HTMLElement&&s!==this.rowsContainer&&o.contains(s)){const e=s.getAttribute("data-index");if(e){const o=Number(e);if(!isNaN(o))return o}s=s.parentElement}}getRenderRange(e,o){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+o-1)}}_rerender(e,o,s){const l=this.getRenderRange(e,o);let d,u;e===this.elementTop(l.start)?(d=l.start,u=0):l.end-l.start>1&&(d=l.start+1,u=this.elementTop(d)-e);let g=0;while(1){const p=this.getRenderRange(e,o);let m=!1;for(let e=p.start;e<p.end;e++){const o=this.probeDynamicHeight(e);0!==o&&this.rangeMap.splice(e,1,[this.items[e]]),g+=o,m=m||0!==o}if(!m){0!==g&&this.eventuallyUpdateScrollDimensions();const o=y.e.relativeComplement(l,p);for(const e of o)for(let o=e.start;o<e.end;o++)this.items[o].row&&this.removeItemFromDOM(o);const m=y.e.relativeComplement(p,l);for(const e of m)for(let o=e.start;o<e.end;o++){const e=o+1,s=e<this.items.length?this.items[e].row:null,l=s?s.domNode:null;this.insertItemInDOM(o,l)}for(let e=p.start;e<p.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if("number"===typeof d){const o=this.scrollable.getFutureScrollPosition().scrollTop-e,l=this.elementTop(d)-u+o;this.setScrollTop(l,s)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(e){const o=this.items[e];if(this.virtualDelegate.getDynamicHeight){const e=this.virtualDelegate.getDynamicHeight(o.element);if(null!==e){const s=o.size;return o.size=e,o.lastDynamicHeightWidth=this.renderWidth,e-s}}if(!o.hasDynamicHeight||o.lastDynamicHeightWidth===this.renderWidth)return 0;if(this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(o.element))return 0;const s=o.size;if(!this.setRowHeight&&o.row){let e=o.row.domNode.offsetHeight;return o.size=e,o.lastDynamicHeightWidth=this.renderWidth,e-s}const l=this.cache.alloc(o.templateId);l.domNode.style.height="",this.rowsContainer.appendChild(l.domNode);const d=this.renderers.get(o.templateId);return d&&(d.renderElement(o.element,e,l.templateData,void 0),d.disposeElement&&d.disposeElement(o.element,e,l.templateData,void 0)),o.size=l.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(o.element,o.size),o.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(l.domNode),this.cache.release(l),o.size-s}getNextToLastElement(e){const o=e[e.length-1];if(!o)return null;const s=this.items[o.end];return s&&s.row?s.row.domNode:null}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const o=this.renderers.get(e.row.templateId);o&&(o.disposeElement&&o.disposeElement(e.element,-1,e.row.templateData,void 0),o.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(0,w.B9)(this.disposables)}}ListView.InstanceCount=0,__decorate([C.H],ListView.prototype,"onMouseClick",null),__decorate([C.H],ListView.prototype,"onMouseDblClick",null),__decorate([C.H],ListView.prototype,"onMouseMiddleClick",null),__decorate([C.H],ListView.prototype,"onMouseDown",null),__decorate([C.H],ListView.prototype,"onContextMenu",null),__decorate([C.H],ListView.prototype,"onTouchStart",null),__decorate([C.H],ListView.prototype,"onTap",null)},9047:function(e,o,s){"use strict";s.d(o,{WK:function(){return E},wD:function(){return DefaultStyleController},aV:function(){return List},sx:function(){return MouseController},cK:function(){return isInputElement},hD:function(){return isMonacoEditor},wn:function(){return isSelectionRangeChangeEvent},Zo:function(){return isSelectionSingleChangeEvent}});var l=s(5321),d=s(4850),u=s(9069),g=s(553),p=s(5152);class CombinedSpliceable{constructor(e){this.spliceables=e}splice(e,o,s){this.spliceables.forEach((l=>l.splice(e,o,s)))}}var m=s(9488),f=s(5393),_=s(1264),C=s(9898),b=s(4669),w=s(5392),S=s(5976),y=s(9870),L=s(6248),x=s(1432),k=s(8401);class ListError extends Error{constructor(e,o){super(`ListError [${e}] ${o}`)}}var N,D=s(2010),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class TraitRenderer{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,o,s){const l=this.renderedElements.findIndex((e=>e.templateData===s));if(l>=0){const e=this.renderedElements[l];this.trait.unrender(s),e.index=o}else{const e={index:o,templateData:s};this.renderedElements.push(e)}this.trait.renderIndex(o,s)}splice(e,o,s){const l=[];for(const d of this.renderedElements)d.index<e?l.push(d):d.index>=e+o&&l.push({index:d.index+s-o,templateData:d.templateData});this.renderedElements=l}renderIndexes(e){for(const{index:o,templateData:s}of this.renderedElements)e.indexOf(o)>-1&&this.trait.renderIndex(o,s)}disposeTemplate(e){const o=this.renderedElements.findIndex((o=>o.templateData===e));o<0||this.renderedElements.splice(o,1)}}class Trait{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new b.Q5,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new TraitRenderer(this)}splice(e,o,s){var l;o=Math.max(0,Math.min(o,this.length-e));const d=s.length-o,u=e+o,g=[...this.sortedIndexes.filter((o=>o<e)),...s.map(((o,s)=>o?s+e:-1)).filter((e=>-1!==e)),...this.sortedIndexes.filter((e=>e>=u)).map((e=>e+d))],p=this.length+d;if(this.sortedIndexes.length>0&&0===g.length&&p>0){const o=null!==(l=this.sortedIndexes.find((o=>o>=e)))&&void 0!==l?l:p-1;g.push(Math.min(o,p-1))}this.renderer.splice(e,o,s.length),this._set(g,g),this.length=p}renderIndex(e,o){o.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,o){return this._set(e,[...e].sort(numericSort),o)}_set(e,o,s){const l=this.indexes,d=this.sortedIndexes;this.indexes=e,this.sortedIndexes=o;const u=disjunction(d,e);return this.renderer.renderIndexes(u),this._onChange.fire({indexes:e,browserEvent:s}),l}get(){return this.indexes}contains(e){return(0,m.ry)(this.sortedIndexes,e,numericSort)>=0}dispose(){(0,S.B9)(this._onChange)}}__decorate([C.H],Trait.prototype,"renderer",null);class SelectionTrait extends Trait{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,o){super.renderIndex(e,o),this.setAriaSelected&&(this.contains(e)?o.setAttribute("aria-selected","true"):o.setAttribute("aria-selected","false"))}}class TraitSpliceable{constructor(e,o,s){this.trait=e,this.view=o,this.identityProvider=s}splice(e,o,s){if(!this.identityProvider)return this.trait.splice(e,o,s.map((()=>!1)));const l=this.trait.get().map((e=>this.identityProvider.getId(this.view.element(e)).toString())),d=s.map((e=>l.indexOf(this.identityProvider.getId(e).toString())>-1));this.trait.splice(e,o,d)}}function isInputElement(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}function isMonacoEditor(e){return!!e.classList.contains("monaco-editor")||!e.classList.contains("monaco-list")&&(!!e.parentElement&&isMonacoEditor(e.parentElement))}class KeyboardController{constructor(e,o,s){this.list=e,this.view=o,this.disposables=new S.SL,this.multipleSelectionDisposables=new S.SL,this.onKeyDown.filter((e=>3===e.keyCode)).on(this.onEnter,this,this.disposables),this.onKeyDown.filter((e=>16===e.keyCode)).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter((e=>18===e.keyCode)).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter((e=>11===e.keyCode)).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter((e=>12===e.keyCode)).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter((e=>9===e.keyCode)).on(this.onEscape,this,this.disposables),!1!==s.multipleSelectionSupport&&this.onKeyDown.filter((e=>(x.dz?e.metaKey:e.ctrlKey)&&31===e.keyCode)).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return b.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keydown")).event).filter((e=>!isInputElement(e.target))).map((e=>new u.y(e)))}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter((e=>(x.dz?e.metaKey:e.ctrlKey)&&31===e.keyCode)).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const o=this.list.getFocus()[0];this.list.setAnchor(o),this.list.reveal(o),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const o=this.list.getFocus()[0];this.list.setAnchor(o),this.list.reveal(o),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const o=this.list.getFocus()[0];this.list.setAnchor(o),this.list.reveal(o),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const o=this.list.getFocus()[0];this.list.setAnchor(o),this.list.reveal(o),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection((0,m.w6)(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}__decorate([C.H],KeyboardController.prototype,"onKeyDown",null),function(e){e[e["Idle"]=0]="Idle",e[e["Typing"]=1]="Typing"}(N||(N={}));const E=new class{mightProducePrintableCharacter(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=93&&e.keyCode<=102||e.keyCode>=80&&e.keyCode<=90)}};class TypeLabelController{constructor(e,o,s,l){this.list=e,this.view=o,this.keyboardNavigationLabelProvider=s,this.delegate=l,this.enabled=!1,this.state=N.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new S.SL,this.disposables=new S.SL,this.updateOptions(e.options)}updateOptions(e){const o="undefined"===typeof e.enableKeyboardNavigation||!!e.enableKeyboardNavigation;o?this.enable():this.disable(),"undefined"!==typeof e.automaticKeyboardNavigation&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=b.ju.chain(this.enabledDisposables.add(new d.Y(this.view.domNode,"keydown")).event).filter((e=>!isInputElement(e.target))).filter((()=>this.automaticKeyboardNavigation||this.triggered)).map((e=>new u.y(e))).filter((e=>this.delegate.mightProducePrintableCharacter(e))).forEach((e=>e.preventDefault())).map((e=>e.browserEvent.key)).event,o=b.ju.debounce(e,(()=>null),800),s=b.ju.reduce(b.ju.any(e,o),((e,o)=>null===o?null:(e||"")+o));s(this.onInput,this,this.enabledDisposables),o(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const o=this.list.getFocus();if(o.length>0&&o[0]===this.previouslyFocused){const s=null===(e=this.list.options.accessibilityProvider)||void 0===e?void 0:e.getAriaLabel(this.list.element(o[0]));s&&(0,p.Z9)(s)}this.previouslyFocused=-1}onInput(e){if(!e)return this.state=N.Idle,void(this.triggered=!1);const o=this.list.getFocus(),s=o.length>0?o[0]:0,l=this.state===N.Idle?1:0;this.state=N.Typing;for(let d=0;d<this.list.length;d++){const o=(s+d+l)%this.list.length,u=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),g=u&&u.toString();if("undefined"===typeof g||(0,w.Ji)(e,g))return this.previouslyFocused=s,this.list.setFocus([o]),void this.list.reveal(o)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class DOMFocusController{constructor(e,o){this.list=e,this.view=o,this.disposables=new S.SL;const s=b.ju.chain(this.disposables.add(new d.Y(o.domNode,"keydown")).event).filter((e=>!isInputElement(e.target))).map((e=>new u.y(e)));s.filter((e=>2===e.keyCode&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey)).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const o=this.list.getFocus();if(0===o.length)return;const s=this.view.domElement(o[0]);if(!s)return;const l=s.querySelector("[tabIndex]");if(!l||!(l instanceof HTMLElement)||-1===l.tabIndex)return;const d=window.getComputedStyle(l);"hidden"!==d.visibility&&"none"!==d.display&&(e.preventDefault(),e.stopPropagation(),l.focus())}dispose(){this.disposables.dispose()}}function isSelectionSingleChangeEvent(e){return x.dz?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function isSelectionRangeChangeEvent(e){return e.browserEvent.shiftKey}function isMouseRightClick(e){return e instanceof MouseEvent&&2===e.button}const T={isSelectionSingleChangeEvent:isSelectionSingleChangeEvent,isSelectionRangeChangeEvent:isSelectionRangeChangeEvent};class MouseController{constructor(e){this.list=e,this.disposables=new S.SL,this._onPointer=new b.Q5,this.onPointer=this._onPointer.event,!1!==e.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||T),this.mouseSupport="undefined"===typeof e.options.mouseSupport||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(g.o.addTarget(e.getHTMLElement()))),b.ju.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||T))}isSelectionSingleChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(e)}isSelectionRangeChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(e)}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){isMonacoEditor(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(isMonacoEditor(e.browserEvent.target))return;const o="undefined"===typeof e.index?[]:[e.index];this.list.setFocus(o,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport)return;if(isInputElement(e.browserEvent.target)||isMonacoEditor(e.browserEvent.target))return;const o=e.index;return"undefined"===typeof o?(this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionRangeChangeEvent(e)||this.isSelectionChangeEvent(e)?this.changeSelection(e):(this.list.setFocus([o],e.browserEvent),this.list.setAnchor(o),isMouseRightClick(e.browserEvent)||this.list.setSelection([o],e.browserEvent),void this._onPointer.fire(e))}onDoubleClick(e){if(isInputElement(e.browserEvent.target)||isMonacoEditor(e.browserEvent.target))return;if(this.isSelectionChangeEvent(e))return;const o=this.list.getFocus();this.list.setSelection(o,e.browserEvent)}changeSelection(e){const o=e.index;let s=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if("undefined"===typeof s){const e=this.list.getFocus()[0];s=null!==e&&void 0!==e?e:o,this.list.setAnchor(s)}const l=Math.min(s,o),d=Math.max(s,o),u=(0,m.w6)(l,d+1),g=this.list.getSelection(),p=getContiguousRangeContaining(disjunction(g,[s]),s);if(0===p.length)return;const f=disjunction(u,relativeComplement(g,p));this.list.setSelection(f,e.browserEvent),this.list.setFocus([o],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),l=s.filter((e=>e!==o));this.list.setFocus([o]),this.list.setAnchor(o),s.length===l.length?this.list.setSelection([...l,o],e.browserEvent):this.list.setSelection(l,e.browserEvent)}}dispose(){this.disposables.dispose()}}class DefaultStyleController{constructor(e,o){this.styleElement=e,this.selectorSuffix=o}style(e){const o=this.selectorSuffix&&`.${this.selectorSuffix}`,s=[];e.listBackground&&(e.listBackground.isOpaque()?s.push(`.monaco-list${o} .monaco-list-rows { background: ${e.listBackground}; }`):x.dz||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(s.push(`.monaco-list${o}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),s.push(`.monaco-list${o}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&s.push(`.monaco-list${o}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(s.push(`.monaco-list${o}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),s.push(`.monaco-list${o}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&s.push(`.monaco-list${o}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&s.push(`.monaco-list${o}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&s.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${o}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }\n\t\t\t`),e.listFocusAndSelectionForeground&&s.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${o}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }\n\t\t\t`),e.listInactiveFocusForeground&&(s.push(`.monaco-list${o} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),s.push(`.monaco-list${o} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&s.push(`.monaco-list${o} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(s.push(`.monaco-list${o} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),s.push(`.monaco-list${o} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(s.push(`.monaco-list${o} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),s.push(`.monaco-list${o} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&s.push(`.monaco-list${o} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&s.push(`.monaco-list${o}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&s.push(`.monaco-list${o} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&s.push(`.monaco-list${o} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&s.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${o}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${o}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`),e.listInactiveFocusOutline&&s.push(`.monaco-list${o} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&s.push(`.monaco-list${o} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&s.push(`\n\t\t\t\t.monaco-list${o}.drop-target,\n\t\t\t\t.monaco-list${o} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${o} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }\n\t\t\t`),e.listFilterWidgetBackground&&s.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&s.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&s.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&s.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&s.push(`\n\t\t\t\t.monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${e.tableColumnsBorder};\n\t\t\t}`),e.tableOddRowsBackgroundColor&&s.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${e.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`),this.styleElement.textContent=s.join("\n")}}const I={listFocusBackground:_.Il.fromHex("#7FB0D0"),listActiveSelectionBackground:_.Il.fromHex("#0E639C"),listActiveSelectionForeground:_.Il.fromHex("#FFFFFF"),listActiveSelectionIconForeground:_.Il.fromHex("#FFFFFF"),listFocusAndSelectionBackground:_.Il.fromHex("#094771"),listFocusAndSelectionForeground:_.Il.fromHex("#FFFFFF"),listInactiveSelectionBackground:_.Il.fromHex("#3F3F46"),listInactiveSelectionIconForeground:_.Il.fromHex("#FFFFFF"),listHoverBackground:_.Il.fromHex("#2A2D2E"),listDropBackground:_.Il.fromHex("#383B3D"),treeIndentGuidesStroke:_.Il.fromHex("#a9a9a9"),tableColumnsBorder:_.Il.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:_.Il.fromHex("#cccccc").transparent(.04)},A={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function getContiguousRangeContaining(e,o){const s=e.indexOf(o);if(-1===s)return[];const l=[];let d=s-1;while(d>=0&&e[d]===o-(s-d))l.push(e[d--]);l.reverse(),d=s;while(d<e.length&&e[d]===o+(d-s))l.push(e[d++]);return l}function disjunction(e,o){const s=[];let l=0,d=0;while(l<e.length||d<o.length)if(l>=e.length)s.push(o[d++]);else if(d>=o.length)s.push(e[l++]);else{if(e[l]===o[d]){s.push(e[l]),l++,d++;continue}e[l]<o[d]?s.push(e[l++]):s.push(o[d++])}return s}function relativeComplement(e,o){const s=[];let l=0,d=0;while(l<e.length||d<o.length)if(l>=e.length)s.push(o[d++]);else if(d>=o.length)s.push(e[l++]);else{if(e[l]===o[d]){l++,d++;continue}e[l]<o[d]?s.push(e[l++]):d++}return s}const numericSort=(e,o)=>e-o;class PipelineRenderer{constructor(e,o){this._templateId=e,this.renderers=o}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map((o=>o.renderTemplate(e)))}renderElement(e,o,s,l){let d=0;for(const u of this.renderers)u.renderElement(e,o,s[d++],l)}disposeElement(e,o,s,l){let d=0;for(const u of this.renderers)u.disposeElement&&u.disposeElement(e,o,s[d],l),d+=1}disposeTemplate(e){let o=0;for(const s of this.renderers)s.disposeTemplate(e[o++])}}class AccessibiltyRenderer{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,o,s){const l=this.accessibilityProvider.getAriaLabel(e);l?s.setAttribute("aria-label",l):s.removeAttribute("aria-label");const d=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"===typeof d?s.setAttribute("aria-level",`${d}`):s.removeAttribute("aria-level")}disposeTemplate(e){}}class ListViewDragAndDrop{constructor(e,o){this.list=e,this.dnd=o}getDragElements(e){const o=this.list.getSelectedElements(),s=o.indexOf(e)>-1?o:[e];return s}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,o){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,o)}onDragStart(e,o){this.dnd.onDragStart&&this.dnd.onDragStart(e,o)}onDragOver(e,o,s,l){return this.dnd.onDragOver(e,o,s,l)}onDragLeave(e,o,s,l){var d,u;null===(u=(d=this.dnd).onDragLeave)||void 0===u||u.call(d,e,o,s,l)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,o,s,l){this.dnd.drop(e,o,s,l)}}class List{constructor(e,o,s,d,u=A){var g;this.user=e,this._options=u,this.focus=new Trait("focused"),this.anchor=new Trait("anchor"),this.eventBufferer=new b.E7,this._ariaLabel="",this.disposables=new S.SL,this._onDidDispose=new b.Q5,this.onDidDispose=this._onDidDispose.event;const p=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?null===(g=this._options.accessibilityProvider)||void 0===g?void 0:g.getWidgetRole():"list";this.selection=new SelectionTrait("listbox"!==p),(0,L.jB)(u,I,!1);const m=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=u.accessibilityProvider,this.accessibilityProvider&&(m.push(new AccessibiltyRenderer(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),d=d.map((e=>new PipelineRenderer(e.templateId,[...m,e])));const f=Object.assign(Object.assign({},u),{dnd:u.dnd&&new ListViewDragAndDrop(this,u.dnd)});if(this.view=new D.Bv(o,s,d,f),this.view.domNode.setAttribute("role",p),u.styleController)this.styleController=u.styleController(this.view.domId);else{const e=(0,l.dS)(this.view.domNode);this.styleController=new DefaultStyleController(e,this.view.domId)}if(this.spliceable=new CombinedSpliceable([new TraitSpliceable(this.focus,this.view,u.identityProvider),new TraitSpliceable(this.selection,this.view,u.identityProvider),new TraitSpliceable(this.anchor,this.view,u.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new DOMFocusController(this,this.view)),("boolean"!==typeof u.keyboardSupport||u.keyboardSupport)&&(this.keyboardController=new KeyboardController(this,this.view,u),this.disposables.add(this.keyboardController)),u.keyboardNavigationLabelProvider){const e=u.keyboardNavigationDelegate||E;this.typeLabelController=new TypeLabelController(this,this.view,u.keyboardNavigationLabelProvider,e),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(u),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return b.ju.map(this.eventBufferer.wrapEvent(this.focus.onChange),(e=>this.toListEvent(e)))}get onDidChangeSelection(){return b.ju.map(this.eventBufferer.wrapEvent(this.selection.onChange),(e=>this.toListEvent(e)))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const o=b.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keydown")).event).map((e=>new u.y(e))).filter((o=>e=58===o.keyCode||o.shiftKey&&68===o.keyCode)).map(d.p).filter((()=>!1)).event,s=b.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keyup")).event).forEach((()=>e=!1)).map((e=>new u.y(e))).filter((e=>58===e.keyCode||e.shiftKey&&68===e.keyCode)).map(d.p).map((({browserEvent:e})=>{const o=this.getFocus(),s=o.length?o[0]:void 0,l="undefined"!==typeof s?this.view.element(s):void 0,d="undefined"!==typeof s?this.view.domElement(s):this.view.domNode;return{index:s,element:l,anchor:d,browserEvent:e}})).event,l=b.ju.chain(this.view.onContextMenu).filter((o=>!e)).map((({element:e,index:o,browserEvent:s})=>({element:e,index:o,anchor:{x:s.pageX+1,y:s.pageY},browserEvent:s}))).event;return b.ju.any(o,s,l)}get onKeyDown(){return this.disposables.add(new d.Y(this.view.domNode,"keydown")).event}get onDidFocus(){return b.ju.signal(this.disposables.add(new d.Y(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new MouseController(this)}updateOptions(e={}){var o;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),null===(o=this.keyboardController)||void 0===o||o.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,o,s=[]){if(e<0||e>this.view.length)throw new ListError(this.user,`Invalid start index: ${e}`);if(o<0)throw new ListError(this.user,`Invalid delete count: ${o}`);0===o&&0===s.length||this.eventBufferer.bufferEvents((()=>this.spliceable.splice(e,o,s)))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,o){this.view.layout(e,o)}setSelection(e,o){for(const s of e)if(s<0||s>=this.length)throw new ListError(this.user,`Invalid index ${s}`);this.selection.set(e,o)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((e=>this.view.element(e)))}setAnchor(e){if("undefined"!==typeof e){if(e<0||e>=this.length)throw new ListError(this.user,`Invalid index ${e}`);this.anchor.set([e])}else this.anchor.set([])}getAnchor(){return(0,m.Xh)(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return"undefined"===typeof e?void 0:this.element(e)}setFocus(e,o){for(const s of e)if(s<0||s>=this.length)throw new ListError(this.user,`Invalid index ${s}`);this.focus.set(e,o)}focusNext(e=1,o=!1,s,l){if(0===this.length)return;const d=this.focus.get(),u=this.findNextIndex(d.length>0?d[0]+e:0,o,l);u>-1&&this.setFocus([u],s)}focusPrevious(e=1,o=!1,s,l){if(0===this.length)return;const d=this.focus.get(),u=this.findPreviousIndex(d.length>0?d[0]-e:0,o,l);u>-1&&this.setFocus([u],s)}focusNextPage(e,o){return __awaiter(this,void 0,void 0,(function*(){let s=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);s=0===s?0:s-1;const l=this.view.element(s),d=this.getFocusedElements()[0];if(d!==l){const l=this.findPreviousIndex(s,!1,o);l>-1&&d!==this.view.element(l)?this.setFocus([l],e):this.setFocus([s],e)}else{const l=this.view.getScrollTop();this.view.setScrollTop(l+this.view.renderHeight-this.view.elementHeight(s)),this.view.getScrollTop()!==l&&(this.setFocus([]),yield(0,f.Vs)(0),yield this.focusNextPage(e,o))}}))}focusPreviousPage(e,o){return __awaiter(this,void 0,void 0,(function*(){let s;const l=this.view.getScrollTop();s=0===l?this.view.indexAt(l):this.view.indexAfter(l-1);const d=this.view.element(s),u=this.getFocusedElements()[0];if(u!==d){const l=this.findNextIndex(s,!1,o);l>-1&&u!==this.view.element(l)?this.setFocus([l],e):this.setFocus([s],e)}else{const s=l;this.view.setScrollTop(l-this.view.renderHeight),this.view.getScrollTop()!==s&&(this.setFocus([]),yield(0,f.Vs)(0),yield this.focusPreviousPage(e,o))}}))}focusLast(e,o){if(0===this.length)return;const s=this.findPreviousIndex(this.length-1,!1,o);s>-1&&this.setFocus([s],e)}focusFirst(e,o){this.focusNth(0,e,o)}focusNth(e,o,s){if(0===this.length)return;const l=this.findNextIndex(e,!1,s);l>-1&&this.setFocus([l],o)}findNextIndex(e,o=!1,s){for(let l=0;l<this.length;l++){if(e>=this.length&&!o)return-1;if(e%=this.length,!s||s(this.element(e)))return e;e++}return-1}findPreviousIndex(e,o=!1,s){for(let l=0;l<this.length;l++){if(e<0&&!o)return-1;if(e=(this.length+e%this.length)%this.length,!s||s(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((e=>this.view.element(e)))}reveal(e,o){if(e<0||e>=this.length)throw new ListError(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),l=this.view.elementTop(e),d=this.view.elementHeight(e);if((0,k.hj)(o)){const e=d-this.view.renderHeight;this.view.setScrollTop(e*(0,y.uZ)(o,0,1)+l)}else{const e=l+d,o=s+this.view.renderHeight;l<s&&e>=o||(l<s||e>=o&&d>=this.view.renderHeight?this.view.setScrollTop(l):e>=o&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new ListError(this.user,`Invalid index ${e}`);const o=this.view.getScrollTop(),s=this.view.elementTop(e),l=this.view.elementHeight(e);if(s<o||s+l>o+this.view.renderHeight)return null;const d=l-this.view.renderHeight;return Math.abs((o-s)/d)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:o}){return{indexes:e,elements:e.map((e=>this.view.element(e))),browserEvent:o}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const o=this.focus.get();if(o.length>0){let s;(null===(e=this.accessibilityProvider)||void 0===e?void 0:e.getActiveDescendantId)&&(s=this.accessibilityProvider.getActiveDescendantId(this.view.element(o[0]))),this.view.domNode.setAttribute("aria-activedescendant",s||this.view.getElementDomId(o[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}__decorate([C.H],List.prototype,"onDidChangeFocus",null),__decorate([C.H],List.prototype,"onDidChangeSelection",null),__decorate([C.H],List.prototype,"onContextMenu",null),__decorate([C.H],List.prototype,"onKeyDown",null),__decorate([C.H],List.prototype,"onDidFocus",null)},6542:function(e,o,s){"use strict";s.d(o,{S:function(){return l}});const l="monaco-mouse-cursor-text"},3098:function(e,o,s){"use strict";s.d(o,{g:function(){return Sash},l:function(){return b}});var l=s(5321),d=s(4850),u=s(553),g=s(5393),p=s(9898),m=s(4669),f=s(5976),_=s(1432),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g};let C=!1;var b;(function(e){e["North"]="north",e["South"]="south",e["East"]="east",e["West"]="west"})(b||(b={}));let w=4;const S=new m.Q5;let y=300;const L=new m.Q5;class MouseEventFactory{constructor(){this.disposables=new f.SL}get onPointerMove(){return this.disposables.add(new d.Y(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new d.Y(window,"mouseup")).event}dispose(){this.disposables.dispose()}}__decorate([p.H],MouseEventFactory.prototype,"onPointerMove",null),__decorate([p.H],MouseEventFactory.prototype,"onPointerUp",null);class GestureEventFactory{constructor(e){this.el=e,this.disposables=new f.SL}get onPointerMove(){return this.disposables.add(new d.Y(this.el,u.t.Change)).event}get onPointerUp(){return this.disposables.add(new d.Y(this.el,u.t.End)).event}dispose(){this.disposables.dispose()}}__decorate([p.H],GestureEventFactory.prototype,"onPointerMove",null),__decorate([p.H],GestureEventFactory.prototype,"onPointerUp",null);class OrthogonalPointerEventFactory{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}__decorate([p.H],OrthogonalPointerEventFactory.prototype,"onPointerMove",null),__decorate([p.H],OrthogonalPointerEventFactory.prototype,"onPointerUp",null);const x="pointer-events-disabled";class Sash extends f.JT{constructor(e,o,s){super(),this.hoverDelay=y,this.hoverDelayer=this._register(new g.vp(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new m.Q5),this._onDidStart=this._register(new m.Q5),this._onDidChange=this._register(new m.Q5),this._onDidReset=this._register(new m.Q5),this._onDidEnd=this._register(new m.Q5),this.orthogonalStartSashDisposables=this._register(new f.SL),this.orthogonalStartDragHandleDisposables=this._register(new f.SL),this.orthogonalEndSashDisposables=this._register(new f.SL),this.orthogonalEndDragHandleDisposables=this._register(new f.SL),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=(0,l.R3)(e,(0,l.$)(".monaco-sash")),s.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${s.orthogonalEdge}`),_.dz&&this.el.classList.add("mac");const p=this._register(new d.Y(this.el,"mousedown")).event;this._register(p((e=>this.onPointerStart(e,new MouseEventFactory)),this));const b=this._register(new d.Y(this.el,"dblclick")).event;this._register(b(this.onPointerDoublePress,this));const x=this._register(new d.Y(this.el,"mouseenter")).event;this._register(x((()=>Sash.onMouseEnter(this))));const k=this._register(new d.Y(this.el,"mouseleave")).event;this._register(k((()=>Sash.onMouseLeave(this)))),this._register(u.o.addTarget(this.el));const N=m.ju.map(this._register(new d.Y(this.el,u.t.Start)).event,(e=>{var o;return Object.assign(Object.assign({},e),{target:null!==(o=e.initialTarget)&&void 0!==o?o:null})}));this._register(N((e=>this.onPointerStart(e,new GestureEventFactory(this.el))),this));const D=this._register(new d.Y(this.el,u.t.Tap)).event,E=m.ju.map(m.ju.filter(m.ju.debounce(D,((e,o)=>{var s;return{event:o,count:(null!==(s=null===e||void 0===e?void 0:e.count)&&void 0!==s?s:0)+1}}),250),(({count:e})=>2===e)),(({event:e})=>{var o;return Object.assign(Object.assign({},e),{target:null!==(o=e.initialTarget)&&void 0!==o?o:null})}));this._register(E(this.onPointerDoublePress,this)),"number"===typeof s.size?(this.size=s.size,0===s.orientation?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=w,this._register(S.event((e=>{this.size=e,this.layout()})))),this._register(L.event((e=>this.hoverDelay=e))),this.layoutProvider=o,this.orthogonalStartSash=s.orthogonalStartSash,this.orthogonalEndSash=s.orthogonalEndSash,this.orientation=s.orientation||0,1===this.orientation?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",C),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",0===e),this.el.classList.toggle("minimum",1===e),this.el.classList.toggle("maximum",2===e),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const onChange=o=>{this.orthogonalStartDragHandleDisposables.clear(),0!==o&&(this._orthogonalStartDragHandle=(0,l.R3)(this.el,(0,l.$)(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add((0,f.OF)((()=>this._orthogonalStartDragHandle.remove()))),this.orthogonalStartDragHandleDisposables.add(new d.Y(this._orthogonalStartDragHandle,"mouseenter")).event((()=>Sash.onMouseEnter(e)),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new d.Y(this._orthogonalStartDragHandle,"mouseleave")).event((()=>Sash.onMouseLeave(e)),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(onChange,this)),onChange(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const onChange=o=>{this.orthogonalEndDragHandleDisposables.clear(),0!==o&&(this._orthogonalEndDragHandle=(0,l.R3)(this.el,(0,l.$)(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add((0,f.OF)((()=>this._orthogonalEndDragHandle.remove()))),this.orthogonalEndDragHandleDisposables.add(new d.Y(this._orthogonalEndDragHandle,"mouseenter")).event((()=>Sash.onMouseEnter(e)),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new d.Y(this._orthogonalEndDragHandle,"mouseleave")).event((()=>Sash.onMouseLeave(e)),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(onChange,this)),onChange(e.state)}this._orthogonalEndSash=e}onPointerStart(e,o){l.zB.stop(e);let s=!1;if(!e.__orthogonalSashEvent){const l=this.getOrthogonalSash(e);l&&(s=!0,e.__orthogonalSashEvent=!0,l.onPointerStart(e,new OrthogonalPointerEventFactory(o)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new OrthogonalPointerEventFactory(o))),!this.state)return;const d=(0,l.H$)("iframe");for(const l of d)l.classList.add(x);const u=e.pageX,g=e.pageY,p=e.altKey,m={startX:u,currentX:u,startY:g,currentY:g,altKey:p};this.el.classList.add("active"),this._onDidStart.fire(m);const C=(0,l.dS)(this.el),updateStyle=()=>{let e="";e=s?"all-scroll":1===this.orientation?1===this.state?"s-resize":2===this.state?"n-resize":_.dz?"row-resize":"ns-resize":1===this.state?"e-resize":2===this.state?"w-resize":_.dz?"col-resize":"ew-resize",C.textContent=`* { cursor: ${e} !important; }`},b=new f.SL;updateStyle(),s||this.onDidEnablementChange.event(updateStyle,null,b);const onPointerMove=e=>{l.zB.stop(e,!1);const o={startX:u,currentX:e.pageX,startY:g,currentY:e.pageY,altKey:p};this._onDidChange.fire(o)},onPointerUp=e=>{l.zB.stop(e,!1),this.el.removeChild(C),this.el.classList.remove("active"),this._onDidEnd.fire(),b.dispose();for(const o of d)o.classList.remove(x)};o.onPointerMove(onPointerMove,null,b),o.onPointerUp(onPointerUp,null,b),b.add(o)}onPointerDoublePress(e){const o=this.getOrthogonalSash(e);o&&o._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,o=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger((()=>e.el.classList.add("hover")),e.hoverDelay).then(void 0,(()=>{})),!o&&e.linkedSash&&Sash.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,o=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!o&&e.linkedSash&&Sash.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Sash.onMouseLeave(this)}layout(){if(0===this.orientation){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(e.target&&e.target instanceof HTMLElement)return e.target.classList.contains("orthogonal-drag-handle")?e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0}dispose(){super.dispose(),this.el.remove()}}},3161:function(e,o,s){"use strict";s.d(o,{s$:function(){return DomScrollableElement},NB:function(){return ScrollableElement},$Z:function(){return SmoothScrollableElement}});var l=s(6268),d=s(5321),u=s(8626),g=s(3938),p=s(7974),m=s(3794),f=s(5393);const _=11;class ScrollbarArrow extends m.${constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px","undefined"!==typeof e.top&&(this.bgDomNode.style.top="0px"),"undefined"!==typeof e.left&&(this.bgDomNode.style.left="0px"),"undefined"!==typeof e.bottom&&(this.bgDomNode.style.bottom="0px"),"undefined"!==typeof e.right&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=_+"px",this.domNode.style.height=_+"px","undefined"!==typeof e.top&&(this.domNode.style.top=e.top+"px"),"undefined"!==typeof e.left&&(this.domNode.style.left=e.left+"px"),"undefined"!==typeof e.bottom&&(this.domNode.style.bottom=e.bottom+"px"),"undefined"!==typeof e.right&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new p.Z),this.onmousedown(this.bgDomNode,(e=>this._arrowMouseDown(e))),this.onmousedown(this.domNode,(e=>this._arrowMouseDown(e))),this._mousedownRepeatTimer=this._register(new f.zh),this._mousedownScheduleRepeatTimer=this._register(new f._F)}_arrowMouseDown(e){const scheduleRepeater=()=>{this._mousedownRepeatTimer.cancelAndSet((()=>this._onActivate()),1e3/24)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(scheduleRepeater,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,p.e,(e=>{}),(()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()})),e.preventDefault()}}var C=s(5976);class ScrollbarVisibilityController extends C.JT{constructor(e,o,s){super(),this._visibility=e,this._visibleClassName=o,this._invisibleClassName=s,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new f._F)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return 2!==this._visibility&&(3===this._visibility||this._rawShouldBeVisible)}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet((()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)}),0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}var b=s(1432);const w=140;class AbstractScrollbar extends m.${constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new ScrollbarVisibilityController(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new p.Z),this._shouldRender=!0,this.domNode=(0,u.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,(e=>this._domNodeMouseDown(e)))}_createArrow(e){const o=this._register(new ScrollbarArrow(e));this.domNode.domNode.appendChild(o.bgDomNode),this.domNode.domNode.appendChild(o.domNode)}_createSlider(e,o,s,l){this.slider=(0,u.X)(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(o),"number"===typeof s&&this.slider.setWidth(s),"number"===typeof l&&this.slider.setHeight(l),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,(e=>{e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,(()=>{})))})),this.onclick(this.slider.domNode,(e=>{e.leftButton&&e.stopPropagation()}))}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const o=this.domNode.domNode.getClientRects()[0].top,s=o+this._scrollbarState.getSliderPosition(),l=o+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),d=this._sliderMousePosition(e);s<=d&&d<=l?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,(()=>{}))):this._onMouseDown(e)}_onMouseDown(e){let o,s;if(e.target===this.domNode.domNode&&"number"===typeof e.browserEvent.offsetX&&"number"===typeof e.browserEvent.offsetY)o=e.browserEvent.offsetX,s=e.browserEvent.offsetY;else{const l=d.i(this.domNode.domNode);o=e.posx-l.left,s=e.posy-l.top}const l=this._mouseDownRelativePosition(o,s);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(l):this._scrollbarState.getDesiredScrollPositionFromOffset(l)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,(()=>{})))}_sliderMouseDown(e,o){const s=this._sliderMousePosition(e),l=this._sliderOrthogonalMousePosition(e),d=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,p.e,(e=>{const o=this._sliderOrthogonalMousePosition(e),u=Math.abs(o-l);if(b.ED&&u>w)return void this._setDesiredScrollPositionNow(d.getScrollPosition());const g=this._sliderMousePosition(e),p=g-s;this._setDesiredScrollPositionNow(d.getDesiredScrollPositionFromDelta(p))}),(()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),o()})),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const o={};this.writeScrollPosition(o,e),this._scrollable.setScrollPositionNow(o)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const S=20;class ScrollbarState{constructor(e,o,s,l,d,u){this._scrollbarSize=Math.round(o),this._oppositeScrollbarSize=Math.round(s),this._arrowSize=Math.round(e),this._visibleSize=l,this._scrollSize=d,this._scrollPosition=u,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ScrollbarState(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const o=Math.round(e);return this._visibleSize!==o&&(this._visibleSize=o,this._refreshComputedValues(),!0)}setScrollSize(e){const o=Math.round(e);return this._scrollSize!==o&&(this._scrollSize=o,this._refreshComputedValues(),!0)}setScrollPosition(e){const o=Math.round(e);return this._scrollPosition!==o&&(this._scrollPosition=o,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,o,s,l,d){const u=Math.max(0,s-e),g=Math.max(0,u-2*o),p=l>0&&l>s;if(!p)return{computedAvailableSize:Math.round(u),computedIsNeeded:p,computedSliderSize:Math.round(g),computedSliderRatio:0,computedSliderPosition:0};const m=Math.round(Math.max(S,Math.floor(s*g/l))),f=(g-m)/(l-s),_=d*f;return{computedAvailableSize:Math.round(u),computedIsNeeded:p,computedSliderSize:Math.round(m),computedSliderRatio:f,computedSliderPosition:Math.round(_)}}_refreshComputedValues(){const e=ScrollbarState._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const o=e-this._arrowSize-this._computedSliderSize/2;return Math.round(o/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const o=e-this._arrowSize;let s=this._scrollPosition;return o<this._computedSliderPosition?s-=this._visibleSize:s+=this._visibleSize,s}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const o=this._computedSliderPosition+e;return Math.round(o/this._computedSliderRatio)}}var y=s(3046);class HorizontalScrollbar extends AbstractScrollbar{constructor(e,o,s){const l=e.getScrollDimensions(),d=e.getCurrentScrollPosition();if(super({lazyRender:o.lazyRender,host:s,scrollbarState:new ScrollbarState(o.horizontalHasArrows?o.arrowSize:0,2===o.horizontal?0:o.horizontalScrollbarSize,2===o.vertical?0:o.verticalScrollbarSize,l.width,l.scrollWidth,d.scrollLeft),visibility:o.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:o.scrollByPage}),o.horizontalHasArrows){const e=(o.arrowSize-_)/2,s=(o.horizontalScrollbarSize-_)/2;this._createArrow({className:"scra",icon:y.lA.scrollbarButtonLeft,top:s,left:e,bottom:void 0,right:void 0,bgWidth:o.arrowSize,bgHeight:o.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new g.q(null,1,0))}),this._createArrow({className:"scra",icon:y.lA.scrollbarButtonRight,top:s,left:void 0,bottom:void 0,right:e,bgWidth:o.arrowSize,bgHeight:o.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new g.q(null,-1,0))})}this._createSlider(Math.floor((o.horizontalScrollbarSize-o.horizontalSliderSize)/2),0,void 0,o.horizontalSliderSize)}_updateSlider(e,o){this.slider.setWidth(e),this.slider.setLeft(o)}_renderDomNode(e,o){this.domNode.setWidth(e),this.domNode.setHeight(o),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,o){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,o){e.scrollLeft=o}updateOptions(e){this.updateScrollbarSize(2===e.horizontal?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class VerticalScrollbar extends AbstractScrollbar{constructor(e,o,s){const l=e.getScrollDimensions(),d=e.getCurrentScrollPosition();if(super({lazyRender:o.lazyRender,host:s,scrollbarState:new ScrollbarState(o.verticalHasArrows?o.arrowSize:0,2===o.vertical?0:o.verticalScrollbarSize,0,l.height,l.scrollHeight,d.scrollTop),visibility:o.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:o.scrollByPage}),o.verticalHasArrows){const e=(o.arrowSize-_)/2,s=(o.verticalScrollbarSize-_)/2;this._createArrow({className:"scra",icon:y.lA.scrollbarButtonUp,top:e,left:s,bottom:void 0,right:void 0,bgWidth:o.verticalScrollbarSize,bgHeight:o.arrowSize,onActivate:()=>this._host.onMouseWheel(new g.q(null,0,1))}),this._createArrow({className:"scra",icon:y.lA.scrollbarButtonDown,top:void 0,left:s,bottom:e,right:void 0,bgWidth:o.verticalScrollbarSize,bgHeight:o.arrowSize,onActivate:()=>this._host.onMouseWheel(new g.q(null,0,-1))})}this._createSlider(0,Math.floor((o.verticalScrollbarSize-o.verticalSliderSize)/2),o.verticalSliderSize,void 0)}_updateSlider(e,o){this.slider.setHeight(e),this.slider.setTop(o)}_renderDomNode(e,o){this.domNode.setWidth(o),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,o){return o}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,o){e.scrollTop=o}updateOptions(e){this.updateScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}var L=s(4669),x=s(6633);const k=500,N=50,D=!0;class MouseWheelClassifierItem{constructor(e,o,s){this.timestamp=e,this.deltaX=o,this.deltaY=s,this.score=0}}class MouseWheelClassifier{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(-1===this._front&&-1===this._rear)return!1;let e=1,o=0,s=1,l=this._rear;do{const d=l===this._front?e:Math.pow(2,-s);if(e-=d,o+=this._memory[l].score*d,l===this._front)break;l=(this._capacity+l-1)%this._capacity,s++}while(1);return o<=.5}accept(e,o,s){const l=new MouseWheelClassifierItem(e,o,s);l.score=this._computeScore(l),-1===this._front&&-1===this._rear?(this._memory[0]=l,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=l)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let o=.5;-1===this._front&&-1===this._rear||this._memory[this._rear];return this._isAlmostInt(e.deltaX)&&this._isAlmostInt(e.deltaY)||(o+=.25),Math.min(Math.max(o,0),1)}_isAlmostInt(e){const o=Math.abs(Math.round(e)-e);return o<.01}}MouseWheelClassifier.INSTANCE=new MouseWheelClassifier;class AbstractScrollableElement extends m.${constructor(e,o,s){super(),this._onScroll=this._register(new L.Q5),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new L.Q5),e.style.overflow="hidden",this._options=resolveOptions(o),this._scrollable=s,this._register(this._scrollable.onScroll((e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)})));const l={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new VerticalScrollbar(this._scrollable,this._options,l)),this._horizontalScrollbar=this._register(new HorizontalScrollbar(this._scrollable,this._options,l)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=(0,u.X)(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=(0,u.X)(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=(0,u.X)(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,(e=>this._onMouseOver(e))),this.onnonbubblingmouseout(this._listenOnDomNode,(e=>this._onMouseOut(e))),this._hideTimeout=this._register(new f._F),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=(0,C.B9)(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,b.dz&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){"undefined"!==typeof e.handleMouseWheel&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),"undefined"!==typeof e.mouseWheelScrollSensitivity&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),"undefined"!==typeof e.fastScrollSensitivity&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),"undefined"!==typeof e.scrollPredominantAxis&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),"undefined"!==typeof e.horizontal&&(this._options.horizontal=e.horizontal),"undefined"!==typeof e.vertical&&(this._options.vertical=e.vertical),"undefined"!==typeof e.horizontalScrollbarSize&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),"undefined"!==typeof e.verticalScrollbarSize&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),"undefined"!==typeof e.scrollByPage&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){const o=this._mouseWheelToDispose.length>0;if(o!==e&&(this._mouseWheelToDispose=(0,C.B9)(this._mouseWheelToDispose),e)){const onMouseWheel=e=>{this._onMouseWheel(new g.q(e))};this._mouseWheelToDispose.push(d.nm(this._listenOnDomNode,d.tw.MOUSE_WHEEL,onMouseWheel,{passive:!1}))}}_onMouseWheel(e){const o=MouseWheelClassifier.INSTANCE;if(D){const s=window.devicePixelRatio/(0,l.getZoomFactor)();b.ED||b.IJ?o.accept(Date.now(),e.deltaX/s,e.deltaY/s):o.accept(Date.now(),e.deltaX,e.deltaY)}let s=!1;if(e.deltaY||e.deltaX){let l=e.deltaY*this._options.mouseWheelScrollSensitivity,d=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(l)>=Math.abs(d)?d=0:l=0),this._options.flipAxes&&([l,d]=[d,l]);const u=!b.dz&&e.browserEvent&&e.browserEvent.shiftKey;!this._options.scrollYToX&&!u||d||(d=l,l=0),e.browserEvent&&e.browserEvent.altKey&&(d*=this._options.fastScrollSensitivity,l*=this._options.fastScrollSensitivity);const g=this._scrollable.getFutureScrollPosition();let p={};if(l){const e=N*l,o=g.scrollTop-(e<0?Math.floor(e):Math.ceil(e));this._verticalScrollbar.writeScrollPosition(p,o)}if(d){const e=N*d,o=g.scrollLeft-(e<0?Math.floor(e):Math.ceil(e));this._horizontalScrollbar.writeScrollPosition(p,o)}if(p=this._scrollable.validateScrollPosition(p),g.scrollLeft!==p.scrollLeft||g.scrollTop!==p.scrollTop){const e=D&&this._options.mouseWheelSmoothScroll&&o.isPhysicalMouseWheel();e?this._scrollable.setScrollPositionSmooth(p):this._scrollable.setScrollPositionNow(p),s=!0}}let d=s;!d&&this._options.alwaysConsumeMouseWheel&&(d=!0),!d&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(d=!0),d&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),o=e.scrollTop>0,s=e.scrollLeft>0,l=s?" left":"",d=o?" top":"",u=s||o?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${l}`),this._topShadowDomNode.setClassName(`shadow${d}`),this._topLeftShadowDomNode.setClassName(`shadow${u}${d}${l}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet((()=>this._hide()),k)}}class ScrollableElement extends AbstractScrollableElement{constructor(e,o){o=o||{},o.mouseWheelSmoothScroll=!1;const s=new x.Rm({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:e=>d.jL(e)});super(e,o,s),this._register(s)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class SmoothScrollableElement extends AbstractScrollableElement{constructor(e,o,s){super(e,o,s)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class DomScrollableElement extends AbstractScrollableElement{constructor(e,o){o=o||{},o.mouseWheelSmoothScroll=!1;const s=new x.Rm({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:e=>d.jL(e)});super(e,o,s),this._register(s),this._element=e,this.onScroll((e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function resolveOptions(e){const o={lazyRender:"undefined"!==typeof e.lazyRender&&e.lazyRender,className:"undefined"!==typeof e.className?e.className:"",useShadows:"undefined"===typeof e.useShadows||e.useShadows,handleMouseWheel:"undefined"===typeof e.handleMouseWheel||e.handleMouseWheel,flipAxes:"undefined"!==typeof e.flipAxes&&e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:"undefined"!==typeof e.consumeMouseWheelIfScrollbarIsNeeded&&e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:"undefined"!==typeof e.alwaysConsumeMouseWheel&&e.alwaysConsumeMouseWheel,scrollYToX:"undefined"!==typeof e.scrollYToX&&e.scrollYToX,mouseWheelScrollSensitivity:"undefined"!==typeof e.mouseWheelScrollSensitivity?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:"undefined"!==typeof e.fastScrollSensitivity?e.fastScrollSensitivity:5,scrollPredominantAxis:"undefined"===typeof e.scrollPredominantAxis||e.scrollPredominantAxis,mouseWheelSmoothScroll:"undefined"===typeof e.mouseWheelSmoothScroll||e.mouseWheelSmoothScroll,arrowSize:"undefined"!==typeof e.arrowSize?e.arrowSize:11,listenOnDomNode:"undefined"!==typeof e.listenOnDomNode?e.listenOnDomNode:null,horizontal:"undefined"!==typeof e.horizontal?e.horizontal:1,horizontalScrollbarSize:"undefined"!==typeof e.horizontalScrollbarSize?e.horizontalScrollbarSize:10,horizontalSliderSize:"undefined"!==typeof e.horizontalSliderSize?e.horizontalSliderSize:0,horizontalHasArrows:"undefined"!==typeof e.horizontalHasArrows&&e.horizontalHasArrows,vertical:"undefined"!==typeof e.vertical?e.vertical:1,verticalScrollbarSize:"undefined"!==typeof e.verticalScrollbarSize?e.verticalScrollbarSize:10,verticalHasArrows:"undefined"!==typeof e.verticalHasArrows&&e.verticalHasArrows,verticalSliderSize:"undefined"!==typeof e.verticalSliderSize?e.verticalSliderSize:0,scrollByPage:"undefined"!==typeof e.scrollByPage&&e.scrollByPage};return o.horizontalSliderSize="undefined"!==typeof e.horizontalSliderSize?e.horizontalSliderSize:o.horizontalScrollbarSize,o.verticalSliderSize="undefined"!==typeof e.verticalSliderSize?e.verticalSliderSize:o.verticalScrollbarSize,b.dz&&(o.className+=" mac"),o}},3937:function(e,o,s){"use strict";s.d(o,{M:function(){return y},z:function(){return SplitView}});var l=s(5321),d=s(3098),u=s(3161),g=s(9488),p=s(1264),m=s(4669),f=s(5976),_=s(9870),C=s(6633),b=s(8401);const w={separatorBorder:p.Il.transparent};class ViewItem{constructor(e,o,s,l){this.container=e,this.view=o,this.disposable=l,this._cachedVisibleSize=void 0,"number"===typeof s?(this._size=s,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=s.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return"undefined"===typeof this._cachedVisibleSize}setVisible(e,o){e!==this.visible&&(e?(this.size=(0,_.uZ)(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"===typeof o?o:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,o){this.layoutContainer(e),this.view.layout(this.size,e,o)}dispose(){return this.disposable.dispose(),this.view}}class VerticalViewItem extends ViewItem{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class HorizontalViewItem extends ViewItem{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var S,y;(function(e){e[e["Idle"]=0]="Idle",e[e["Busy"]=1]="Busy"})(S||(S={})),function(e){function Split(e){return{type:"split",index:e}}function Invisible(e){return{type:"invisible",cachedVisibleSize:e}}e.Distribute={type:"distribute"},e.Split=Split,e.Invisible=Invisible}(y||(y={}));class SplitView extends f.JT{constructor(e,o={}){var s,d,g,p,f;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=S.Idle,this._onDidSashChange=this._register(new m.Q5),this._onDidSashReset=this._register(new m.Q5),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=null!==(s=o.orientation)&&void 0!==s?s:0,this.inverseAltBehavior=null!==(d=o.inverseAltBehavior)&&void 0!==d&&d,this.proportionalLayout=null===(g=o.proportionalLayout)||void 0===g||g,this.getSashOrthogonalSize=o.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(0===this.orientation?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=(0,l.R3)(this.el,(0,l.$)(".sash-container")),this.viewContainer=(0,l.$)(".split-view-container"),this.scrollable=new C.Rm({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:l.jL}),this.scrollableElement=this._register(new u.$Z(this.viewContainer,{vertical:0===this.orientation?null!==(p=o.scrollbarVisibility)&&void 0!==p?p:1:2,horizontal:1===this.orientation?null!==(f=o.scrollbarVisibility)&&void 0!==f?f:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll((e=>{this.viewContainer.scrollTop=e.scrollTop,this.viewContainer.scrollLeft=e.scrollLeft}))),(0,l.R3)(this.el,this.scrollableElement.getDomNode()),this.style(o.styles||w),o.descriptor&&(this.size=o.descriptor.size,o.descriptor.views.forEach(((e,o)=>{const s=b.o8(e.visible)||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},l=e.view;this.doAddView(l,s,o,!0)})),this.contentSize=this.viewItems.reduce(((e,o)=>e+o.size),0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const o of this.sashItems)o.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const o of this.sashItems)o.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,o,s=this.viewItems.length,l){this.doAddView(e,o,s,l)}layout(e,o){const s=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=o,this.proportions)for(let l=0;l<this.viewItems.length;l++){const o=this.viewItems[l];o.size=(0,_.uZ)(Math.round(this.proportions[l]*e),o.minimumSize,o.maximumSize)}else{const o=(0,g.w6)(this.viewItems.length),l=o.filter((e=>1===this.viewItems[e].priority)),d=o.filter((e=>2===this.viewItems[e].priority));this.resize(this.viewItems.length-1,e-s,void 0,l,d)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map((e=>e.size/this.contentSize)))}onSashStart({sash:e,start:o,alt:s}){for(const l of this.viewItems)l.enabled=!1;const d=this.sashItems.findIndex((o=>o.sash===e)),u=(0,f.F8)((0,l.nm)(document.body,"keydown",(e=>resetSashDragState(this.sashDragState.current,e.altKey))),(0,l.nm)(document.body,"keyup",(()=>resetSashDragState(this.sashDragState.current,!1)))),resetSashDragState=(e,o)=>{const s=this.viewItems.map((e=>e.size));let l,p,m=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(o=!o),o){const e=d===this.sashItems.length-1;if(e){const e=this.viewItems[d];m=(e.minimumSize-e.size)/2,f=(e.maximumSize-e.size)/2}else{const e=this.viewItems[d+1];m=(e.size-e.maximumSize)/2,f=(e.size-e.minimumSize)/2}}if(!o){const e=(0,g.w6)(d,-1),o=(0,g.w6)(d+1,this.viewItems.length),u=e.reduce(((e,o)=>e+(this.viewItems[o].minimumSize-s[o])),0),m=e.reduce(((e,o)=>e+(this.viewItems[o].viewMaximumSize-s[o])),0),f=0===o.length?Number.POSITIVE_INFINITY:o.reduce(((e,o)=>e+(s[o]-this.viewItems[o].minimumSize)),0),_=0===o.length?Number.NEGATIVE_INFINITY:o.reduce(((e,o)=>e+(s[o]-this.viewItems[o].viewMaximumSize)),0),C=Math.max(u,_),b=Math.min(f,m),w=this.findFirstSnapIndex(e),S=this.findFirstSnapIndex(o);if("number"===typeof w){const e=this.viewItems[w],o=Math.floor(e.viewMinimumSize/2);l={index:w,limitDelta:e.visible?C-o:C+o,size:e.size}}if("number"===typeof S){const e=this.viewItems[S],o=Math.floor(e.viewMinimumSize/2);p={index:S,limitDelta:e.visible?b+o:b-o,size:e.size}}}this.sashDragState={start:e,current:e,index:d,sizes:s,minDelta:m,maxDelta:f,alt:o,snapBefore:l,snapAfter:p,disposable:u}};resetSashDragState(o,s)}onSashChange({current:e}){const{index:o,start:s,sizes:l,alt:d,minDelta:u,maxDelta:g,snapBefore:p,snapAfter:m}=this.sashDragState;this.sashDragState.current=e;const f=e-s,_=this.resize(o,f,l,void 0,void 0,u,g,p,m);if(d){const e=o===this.sashItems.length-1,s=this.viewItems.map((e=>e.size)),l=e?o:o+1,d=this.viewItems[l],u=d.size-d.maximumSize,g=d.size-d.minimumSize,p=e?o-1:o+1;this.resize(p,-_,s,void 0,void 0,u,g)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const o of this.viewItems)o.enabled=!0}onViewChange(e,o){const s=this.viewItems.indexOf(e);s<0||s>=this.viewItems.length||(o="number"===typeof o?o:e.size,o=(0,_.uZ)(o,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&s>0?(this.resize(s-1,Math.floor((e.size-o)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=o,this.relayout([s],void 0)))}resizeView(e,o){if(this.state!==S.Idle)throw new Error("Cant modify splitview");if(this.state=S.Busy,e<0||e>=this.viewItems.length)return;const s=(0,g.w6)(this.viewItems.length).filter((o=>o!==e)),l=[...s.filter((e=>1===this.viewItems[e].priority)),e],d=s.filter((e=>2===this.viewItems[e].priority)),u=this.viewItems[e];o=Math.round(o),o=(0,_.uZ)(o,u.minimumSize,Math.min(u.maximumSize,this.size)),u.size=o,this.relayout(l,d),this.state=S.Idle}distributeViewSizes(){const e=[];let o=0;for(const g of this.viewItems)g.maximumSize-g.minimumSize>0&&(e.push(g),o+=g.size);const s=Math.floor(o/e.length);for(const g of e)g.size=(0,_.uZ)(s,g.minimumSize,g.maximumSize);const l=(0,g.w6)(this.viewItems.length),d=l.filter((e=>1===this.viewItems[e].priority)),u=l.filter((e=>2===this.viewItems[e].priority));this.relayout(d,u)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,o,s=this.viewItems.length,u){if(this.state!==S.Idle)throw new Error("Cant modify splitview");this.state=S.Busy;const p=(0,l.$)(".split-view-view");s===this.viewItems.length?this.viewContainer.appendChild(p):this.viewContainer.insertBefore(p,this.viewContainer.children.item(s));const _=e.onDidChange((e=>this.onViewChange(y,e))),C=(0,f.OF)((()=>this.viewContainer.removeChild(p))),b=(0,f.F8)(_,C);let w;w="number"===typeof o?o:"split"===o.type?this.getViewSize(o.index)/2:"invisible"===o.type?{cachedVisibleSize:o.cachedVisibleSize}:e.minimumSize;const y=0===this.orientation?new VerticalViewItem(p,e,w,b):new HorizontalViewItem(p,e,w,b);if(this.viewItems.splice(s,0,y),this.viewItems.length>1){let e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const o=0===this.orientation?new d.g(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},e),{orientation:1})):new d.g(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},e),{orientation:0})),l=0===this.orientation?e=>({sash:o,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:o,start:e.startX,current:e.currentX,alt:e.altKey}),u=m.ju.map(o.onDidStart,l),p=u(this.onSashStart,this),_=m.ju.map(o.onDidChange,l),C=_(this.onSashChange,this),b=m.ju.map(o.onDidEnd,(()=>this.sashItems.findIndex((e=>e.sash===o)))),w=b(this.onSashEnd,this),S=o.onDidReset((()=>{const e=this.sashItems.findIndex((e=>e.sash===o)),s=(0,g.w6)(e,-1),l=(0,g.w6)(e+1,this.viewItems.length),d=this.findFirstSnapIndex(s),u=this.findFirstSnapIndex(l);("number"!==typeof d||this.viewItems[d].visible)&&("number"!==typeof u||this.viewItems[u].visible)&&this._onDidSashReset.fire(e)})),y=(0,f.F8)(p,C,w,S,o),L={sash:o,disposable:y};this.sashItems.splice(s-1,0,L)}let L;p.appendChild(e.element),"number"!==typeof o&&"split"===o.type&&(L=[o.index]),u||this.relayout([s],L),this.state=S.Idle,u||"number"===typeof o||"distribute"!==o.type||this.distributeViewSizes()}relayout(e,o){const s=this.viewItems.reduce(((e,o)=>e+o.size),0);this.resize(this.viewItems.length-1,this.size-s,void 0,e,o),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,o,s=this.viewItems.map((e=>e.size)),l,d,u=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY,m,f){if(e<0||e>=this.viewItems.length)return 0;const C=(0,g.w6)(e,-1),b=(0,g.w6)(e+1,this.viewItems.length);if(d)for(const _ of d)(0,g.zI)(C,_),(0,g.zI)(b,_);if(l)for(const _ of l)(0,g.al)(C,_),(0,g.al)(b,_);const w=C.map((e=>this.viewItems[e])),S=C.map((e=>s[e])),y=b.map((e=>this.viewItems[e])),L=b.map((e=>s[e])),x=C.reduce(((e,o)=>e+(this.viewItems[o].minimumSize-s[o])),0),k=C.reduce(((e,o)=>e+(this.viewItems[o].maximumSize-s[o])),0),N=0===b.length?Number.POSITIVE_INFINITY:b.reduce(((e,o)=>e+(s[o]-this.viewItems[o].minimumSize)),0),D=0===b.length?Number.NEGATIVE_INFINITY:b.reduce(((e,o)=>e+(s[o]-this.viewItems[o].maximumSize)),0),E=Math.max(x,D,u),T=Math.min(N,k,p);let I=!1;if(m){const e=this.viewItems[m.index],s=o>=m.limitDelta;I=s!==e.visible,e.setVisible(s,m.size)}if(!I&&f){const e=this.viewItems[f.index],s=o<f.limitDelta;I=s!==e.visible,e.setVisible(s,f.size)}if(I)return this.resize(e,o,s,l,d,u,p);o=(0,_.uZ)(o,E,T);for(let g=0,A=o;g<w.length;g++){const e=w[g],o=(0,_.uZ)(S[g]+A,e.minimumSize,e.maximumSize),s=o-S[g];A-=s,e.size=o}for(let g=0,A=o;g<y.length;g++){const e=y[g],o=(0,_.uZ)(L[g]-A,e.minimumSize,e.maximumSize),s=o-L[g];A+=s,e.size=o}return o}distributeEmptySpace(e){const o=this.viewItems.reduce(((e,o)=>e+o.size),0);let s=this.size-o;const l=(0,g.w6)(this.viewItems.length-1,-1),d=l.filter((e=>1===this.viewItems[e].priority)),u=l.filter((e=>2===this.viewItems[e].priority));for(const p of u)(0,g.zI)(l,p);for(const p of d)(0,g.al)(l,p);"number"===typeof e&&(0,g.al)(l,e);for(let g=0;0!==s&&g<l.length;g++){const e=this.viewItems[l[g]],o=(0,_.uZ)(e.size+s,e.minimumSize,e.maximumSize),d=o-e.size;s-=d,e.size=o}}layoutViews(){this.contentSize=this.viewItems.reduce(((e,o)=>e+o.size),0);let e=0;for(const o of this.viewItems)o.layout(e,this.layoutContext),e+=o.size;this.sashItems.forEach((e=>e.sash.layout())),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){0===this.orientation?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const o=this.viewItems.map((o=>e=o.size-o.minimumSize>0||e));e=!1;const s=this.viewItems.map((o=>e=o.maximumSize-o.size>0||e)),l=[...this.viewItems].reverse();e=!1;const d=l.map((o=>e=o.size-o.minimumSize>0||e)).reverse();e=!1;const u=l.map((o=>e=o.maximumSize-o.size>0||e)).reverse();let p=0;for(let m=0;m<this.sashItems.length;m++){const{sash:e}=this.sashItems[m],l=this.viewItems[m];p+=l.size;const f=!(o[m]&&u[m+1]),_=!(s[m]&&d[m+1]);if(f&&_){const s=(0,g.w6)(m,-1),l=(0,g.w6)(m+1,this.viewItems.length),u=this.findFirstSnapIndex(s),f=this.findFirstSnapIndex(l),_="number"===typeof u&&!this.viewItems[u].visible,C="number"===typeof f&&!this.viewItems[f].visible;_&&d[m]&&(p>0||this.startSnappingEnabled)?e.state=1:C&&o[m]&&(p<this.contentSize||this.endSnappingEnabled)?e.state=2:e.state=0}else e.state=f&&!_?1:!f&&_?2:3}}getSashPosition(e){let o=0;for(let s=0;s<this.sashItems.length;s++)if(o+=this.viewItems[s].size,this.sashItems[s].sash===e)return o;return 0}findFirstSnapIndex(e){for(const o of e){const e=this.viewItems[o];if(e.visible&&e.snap)return o}for(const o of e){const e=this.viewItems[o];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return o}}dispose(){super.dispose(),(0,f.B9)(this.viewItems),this.viewItems=[],this.sashItems.forEach((e=>e.disposable.dispose())),this.sashItems=[]}}},3794:function(e,o,s){"use strict";s.d(o,{$:function(){return Widget}});var l=s(5321),d=s(9069),u=s(3938),g=s(553),p=s(5976);class Widget extends p.JT{onclick(e,o){this._register(l.nm(e,l.tw.CLICK,(e=>o(new u.n(e)))))}onmousedown(e,o){this._register(l.nm(e,l.tw.MOUSE_DOWN,(e=>o(new u.n(e)))))}onmouseover(e,o){this._register(l.nm(e,l.tw.MOUSE_OVER,(e=>o(new u.n(e)))))}onnonbubblingmouseout(e,o){this._register(l.j_(e,(e=>o(new u.n(e)))))}onkeydown(e,o){this._register(l.nm(e,l.tw.KEY_DOWN,(e=>o(new d.y(e)))))}onkeyup(e,o){this._register(l.nm(e,l.tw.KEY_UP,(e=>o(new d.y(e)))))}oninput(e,o){this._register(l.nm(e,l.tw.INPUT,o))}onblur(e,o){this._register(l.nm(e,l.tw.BLUR,o))}onfocus(e,o){this._register(l.nm(e,l.tw.FOCUS,o))}ignoreGesture(e){g.o.ignoreTarget(e)}}},4741:function(e,o,s){"use strict";s.d(o,{Wi:function(){return ActionRunner},Z0:function(){return Separator},aU:function(){return Action},eZ:function(){return EmptySubmenuAction},wY:function(){return SubmenuAction}});var l=s(4669),d=s(5976),u=s(3580),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class Action extends d.JT{constructor(e,o="",s="",d=!0,u){super(),this._onDidChange=this._register(new l.Q5),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=o,this._cssClass=s,this._enabled=d,this._actionCallback=u}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,o){return __awaiter(this,void 0,void 0,(function*(){this._actionCallback&&(yield this._actionCallback(e))}))}}class ActionRunner extends d.JT{constructor(){super(...arguments),this._onBeforeRun=this._register(new l.Q5),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new l.Q5),this.onDidRun=this._onDidRun.event}run(e,o){return __awaiter(this,void 0,void 0,(function*(){if(!e.enabled)return;let s;this._onBeforeRun.fire({action:e});try{yield this.runAction(e,o)}catch(l){s=l}this._onDidRun.fire({action:e,error:s})}))}runAction(e,o){return __awaiter(this,void 0,void 0,(function*(){yield e.run(o)}))}}class Separator extends Action{constructor(e){super(Separator.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Separator.ID="vs.actions.separator";class SubmenuAction{constructor(e,o,s,l){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=o,this.class=l,this._actions=s}get actions(){return this._actions}dispose(){}run(){return __awaiter(this,void 0,void 0,(function*(){}))}}class EmptySubmenuAction extends Action{constructor(){super(EmptySubmenuAction.ID,u.N("submenu.empty","(empty)"),void 0,!1)}}EmptySubmenuAction.ID="vs.actions.empty"},9488:function(e,o,s){"use strict";function tail(e,o=0){return e[e.length-(1+o)]}function tail2(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}function equals(e,o,s=((e,o)=>e===o)){if(e===o)return!0;if(!e||!o)return!1;if(e.length!==o.length)return!1;for(let l=0,d=e.length;l<d;l++)if(!s(e[l],o[l]))return!1;return!0}function binarySearch(e,o,s){let l=0,d=e.length-1;while(l<=d){const u=(l+d)/2|0,g=s(e[u],o);if(g<0)l=u+1;else{if(!(g>0))return u;d=u-1}}return-(l+1)}function findFirstInSorted(e,o){let s=0,l=e.length;if(0===l)return 0;while(s<l){const d=Math.floor((s+l)/2);o(e[d])?l=d:s=d+1}return s}function quickSelect(e,o,s){if(e|=0,e>=o.length)throw new TypeError("invalid index");let l=o[Math.floor(o.length*Math.random())],d=[],u=[],g=[];for(let p of o){const e=s(p,l);e<0?d.push(p):e>0?u.push(p):g.push(p)}return e<d.length?quickSelect(e,d,s):e<d.length+g.length?g[0]:quickSelect(e-(d.length+g.length),u,s)}function groupBy(e,o){const s=[];let l;for(const d of e.slice(0).sort(o))l&&0===o(l[0],d)?l.push(d):(l=[d],s.push(l));return s}function coalesce(e){return e.filter((e=>!!e))}function isFalsyOrEmpty(e){return!Array.isArray(e)||0===e.length}function isNonEmptyArray(e){return Array.isArray(e)&&e.length>0}function distinct(e,o=(e=>e)){const s=new Set;return e.filter((e=>{const l=o(e);return!s.has(l)&&(s.add(l),!0)}))}function findLast(e,o){const s=lastIndex(e,o);if(-1!==s)return e[s]}function lastIndex(e,o){for(let s=e.length-1;s>=0;s--){const l=e[s];if(o(l))return s}return-1}function firstOrDefault(e,o){return e.length>0?e[0]:o}function flatten(e){return[].concat(...e)}function range(e,o){let s="number"===typeof o?e:0;"number"===typeof o?s=e:(s=0,o=e);const l=[];if(s<=o)for(let d=s;d<o;d++)l.push(d);else for(let d=s;d>o;d--)l.push(d);return l}function arrayInsert(e,o,s){const l=e.slice(0,o),d=e.slice(o);return l.concat(s,d)}function pushToStart(e,o){const s=e.indexOf(o);s>-1&&(e.splice(s,1),e.unshift(o))}function pushToEnd(e,o){const s=e.indexOf(o);s>-1&&(e.splice(s,1),e.push(o))}function asArray(e){return Array.isArray(e)?e:[e]}function insertInto(e,o,s){const l=getActualStartIndex(e,o),d=e.length,u=s.length;e.length=d+u;for(let g=d-1;g>=l;g--)e[g+u]=e[g];for(let g=0;g<u;g++)e[g+l]=s[g]}function splice(e,o,s,l){const d=getActualStartIndex(e,o),u=e.splice(d,s);return insertInto(e,d,l),u}function getActualStartIndex(e,o){return o<0?Math.max(o+e.length,0):Math.min(o,e.length)}function compareBy(e,o){return(s,l)=>o(e(s),e(l))}s.d(o,{Dc:function(){return findMaxBy},EB:function(){return distinct},Gb:function(){return tail},H9:function(){return ArrayQueue},HW:function(){return quickSelect},JH:function(){return tail2},Of:function(){return isNonEmptyArray},VJ:function(){return findMinBy},XY:function(){return isFalsyOrEmpty},Xh:function(){return firstOrDefault},Zv:function(){return arrayInsert},_2:function(){return asArray},al:function(){return pushToEnd},dF:function(){return findLast},db:function(){return splice},fS:function(){return equals},fv:function(){return numberComparator},jV:function(){return findLastMaxBy},kX:function(){return coalesce},lG:function(){return findFirstInSorted},ry:function(){return binarySearch},tT:function(){return compareBy},vM:function(){return groupBy},w6:function(){return range},xH:function(){return flatten},zI:function(){return pushToStart}});const numberComparator=(e,o)=>e-o;function findMaxBy(e,o){if(0===e.length)return;let s=e[0];for(let l=1;l<e.length;l++){const d=e[l];o(d,s)>0&&(s=d)}return s}function findLastMaxBy(e,o){if(0===e.length)return;let s=e[0];for(let l=1;l<e.length;l++){const d=e[l];o(d,s)>=0&&(s=d)}return s}function findMinBy(e,o){return findMaxBy(e,((e,s)=>-o(e,s)))}class ArrayQueue{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let o=this.firstIdx;while(o<this.items.length&&e(this.items[o]))o++;const s=o===this.firstIdx?null:this.items.slice(this.firstIdx,o);return this.firstIdx=o,s}takeFromEndWhile(e){let o=this.lastIdx;while(o>=0&&e(this.items[o]))o--;const s=o===this.lastIdx?null:this.items.slice(o+1,this.lastIdx+1);return this.lastIdx=o,s}peek(){return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const o=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,o}}},5146:function(e,o,s){"use strict";function ok(e,o){if(!e)throw new Error(o?`Assertion failed (${o})`:"Assertion Failed")}s.d(o,{ok:function(){return ok}})},5393:function(e,o,s){"use strict";s.d(o,{Aq:function(){return AsyncIterableObject},CR:function(){return DeferredPromise},J8:function(){return isThenable},PG:function(){return createCancelablePromise},Ps:function(){return first},To:function(){return f},Ue:function(){return IdleValue},Vg:function(){return disposableTimeout},Vs:function(){return timeout},_F:function(){return TimeoutTimer},eP:function(){return raceCancellation},jT:function(){return _},ne:function(){return m},pY:function(){return RunOnceScheduler},rH:function(){return ThrottledDelayer},vp:function(){return Delayer},zS:function(){return createCancelableAsyncIterable},zh:function(){return IntervalTimer}});var l=s(1050),d=s(7301),u=s(4669),g=s(5976),p=s(1432),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))},__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=e[Symbol.asyncIterator];return s?s.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o);function verb(s){o[s]=e[s]&&function(o){return new Promise((function(l,d){o=e[s](o),settle(l,d,o.done,o.value)}))}}function settle(e,o,s,l){Promise.resolve(l).then((function(o){e({value:o,done:s})}),o)}};function isThenable(e){return!!e&&"function"===typeof e.then}function createCancelablePromise(e){const o=new l.A,s=e(o.token),u=new Promise(((e,l)=>{const u=o.token.onCancellationRequested((()=>{u.dispose(),o.dispose(),l(new d.FU)}));Promise.resolve(s).then((s=>{u.dispose(),o.dispose(),e(s)}),(e=>{u.dispose(),o.dispose(),l(e)}))}));return new class{cancel(){o.cancel()}then(e,o){return u.then(e,o)}catch(e){return this.then(void 0,e)}finally(e){return u.finally(e)}}}function raceCancellation(e,o,s){return new Promise(((l,d)=>{const u=o.onCancellationRequested((()=>{u.dispose(),l(s)}));e.then(l,d).finally((()=>u.dispose()))}))}class Throttler{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const onComplete=()=>{this.queuedPromise=null;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise((e=>{this.activePromise.then(onComplete,onComplete).then(e)}))}return new Promise(((e,o)=>{this.queuedPromise.then(e,o)}))}return this.activePromise=e(),new Promise(((e,o)=>{this.activePromise.then((o=>{this.activePromise=null,e(o)}),(e=>{this.activePromise=null,o(e)}))}))}}const timeoutDeferred=(e,o)=>{let s=!0;const l=setTimeout((()=>{s=!1,o()}),e);return{isTriggered:()=>s,dispose:()=>{clearTimeout(l),s=!1}}},microtaskDeferred=e=>{let o=!0;return queueMicrotask((()=>{o&&(o=!1,e())})),{isTriggered:()=>o,dispose:()=>{o=!1}}},m=Symbol("MicrotaskDelay");class Delayer{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,o=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,o)=>{this.doResolve=e,this.doReject=o})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}})));const fn=()=>{var e;this.deferred=null,null===(e=this.doResolve)||void 0===e||e.call(this,null)};return this.deferred=o===m?microtaskDeferred(fn):timeoutDeferred(o,fn),this.completionPromise}isTriggered(){var e;return!!(null===(e=this.deferred)||void 0===e?void 0:e.isTriggered())}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new d.FU),this.completionPromise=null)}cancelTimeout(){var e;null===(e=this.deferred)||void 0===e||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class ThrottledDelayer{constructor(e){this.delayer=new Delayer(e),this.throttler=new Throttler}trigger(e,o){return this.delayer.trigger((()=>this.throttler.queue(e)),o)}dispose(){this.delayer.dispose()}}function timeout(e,o){return o?new Promise(((s,l)=>{const u=setTimeout((()=>{g.dispose(),s()}),e),g=o.onCancellationRequested((()=>{clearTimeout(u),g.dispose(),l(new d.FU)}))})):createCancelablePromise((o=>timeout(e,o)))}function disposableTimeout(e,o=0){const s=setTimeout(e,o);return(0,g.OF)((()=>clearTimeout(s)))}function first(e,o=(e=>!!e),s=null){let l=0;const d=e.length,loop=()=>{if(l>=d)return Promise.resolve(s);const u=e[l++],g=Promise.resolve(u());return g.then((e=>o(e)?Promise.resolve(e):loop()))};return loop()}class TimeoutTimer{constructor(e,o){this._token=-1,"function"===typeof e&&"number"===typeof o&&this.setIfNotSet(e,o)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,o){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),o)}setIfNotSet(e,o){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),o))}}class IntervalTimer{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,o){this.cancel(),this._token=setInterval((()=>{e()}),o)}}class RunOnceScheduler{constructor(e,o){this.timeoutToken=-1,this.runner=e,this.timeout=o,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let f;(function(){f="function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback?e=>{(0,p.fn)((()=>{if(o)return;const s=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))}));let o=!1;return{dispose(){o||(o=!0)}}}:(e,o)=>{const s=requestIdleCallback(e,"number"===typeof o?{timeout:o}:void 0);let l=!1;return{dispose(){l||(l=!0,cancelIdleCallback(s))}}}})();class IdleValue{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(o){this._error=o}finally{this._didRun=!0}},this._handle=f((()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class DeferredPromise{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise(((e,o)=>{this.completeCallback=e,this.errorCallback=o}))}get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise((o=>{this.completeCallback(e),this.resolved=!0,o()}))}cancel(){new Promise((e=>{this.errorCallback(new d.FU),this.rejected=!0,e()}))}}var _;(function(e){function settled(e){return __awaiter(this,void 0,void 0,(function*(){let o;const s=yield Promise.all(e.map((e=>e.then((e=>e),(e=>{o||(o=e)})))));if("undefined"!==typeof o)throw o;return s}))}function withAsyncBody(e){return new Promise(((o,s)=>__awaiter(this,void 0,void 0,(function*(){try{yield e(o,s)}catch(l){s(l)}}))))}e.settled=settled,e.withAsyncBody=withAsyncBody})(_||(_={}));class AsyncIterableObject{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new u.Q5,queueMicrotask((()=>__awaiter(this,void 0,void 0,(function*(){const o={emitOne:e=>this.emitOne(e),emitMany:e=>this.emitMany(e),reject:e=>this.reject(e)};try{yield Promise.resolve(e(o)),this.resolve()}catch(s){this.reject(s)}finally{o.emitOne=void 0,o.emitMany=void 0,o.reject=void 0}}))))}static fromArray(e){return new AsyncIterableObject((o=>{o.emitMany(e)}))}static fromPromise(e){return new AsyncIterableObject((o=>__awaiter(this,void 0,void 0,(function*(){o.emitMany(yield e)}))))}static fromPromises(e){return new AsyncIterableObject((o=>__awaiter(this,void 0,void 0,(function*(){yield Promise.all(e.map((e=>__awaiter(this,void 0,void 0,(function*(){return o.emitOne(yield e)})))))}))))}static merge(e){return new AsyncIterableObject((o=>__awaiter(this,void 0,void 0,(function*(){yield Promise.all(e.map((e=>{var s,l;return __awaiter(this,void 0,void 0,(function*(){var d,u;try{for(s=__asyncValues(e);l=yield s.next(),!l.done;){const e=l.value;o.emitOne(e)}}catch(g){d={error:g}}finally{try{l&&!l.done&&(u=s.return)&&(yield u.call(s))}finally{if(d)throw d.error}}}))})))}))))}[Symbol.asyncIterator](){let e=0;return{next:()=>__awaiter(this,void 0,void 0,(function*(){do{if(2===this._state)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(1===this._state)return{done:!0,value:void 0};yield u.ju.toPromise(this._onStateChanged.event)}while(1)}))}}static map(e,o){return new AsyncIterableObject((s=>__awaiter(this,void 0,void 0,(function*(){var l,d;try{for(var u,g=__asyncValues(e);u=yield g.next(),!u.done;){const e=u.value;s.emitOne(o(e))}}catch(p){l={error:p}}finally{try{u&&!u.done&&(d=g.return)&&(yield d.call(g))}finally{if(l)throw l.error}}}))))}map(e){return AsyncIterableObject.map(this,e)}static filter(e,o){return new AsyncIterableObject((s=>__awaiter(this,void 0,void 0,(function*(){var l,d;try{for(var u,g=__asyncValues(e);u=yield g.next(),!u.done;){const e=u.value;o(e)&&s.emitOne(e)}}catch(p){l={error:p}}finally{try{u&&!u.done&&(d=g.return)&&(yield d.call(g))}finally{if(l)throw l.error}}}))))}filter(e){return AsyncIterableObject.filter(this,e)}static coalesce(e){return AsyncIterableObject.filter(e,(e=>!!e))}coalesce(){return AsyncIterableObject.coalesce(this)}static toPromise(e){var o,s,l,d;return __awaiter(this,void 0,void 0,(function*(){const u=[];try{for(o=__asyncValues(e);s=yield o.next(),!s.done;){const e=s.value;u.push(e)}}catch(g){l={error:g}}finally{try{s&&!s.done&&(d=o.return)&&(yield d.call(o))}finally{if(l)throw l.error}}return u}))}toPromise(){return AsyncIterableObject.toPromise(this)}emitOne(e){0===this._state&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){0===this._state&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){0===this._state&&(this._state=1,this._onStateChanged.fire())}reject(e){0===this._state&&(this._state=2,this._error=e,this._onStateChanged.fire())}}AsyncIterableObject.EMPTY=AsyncIterableObject.fromArray([]);class CancelableAsyncIterableObject extends AsyncIterableObject{constructor(e,o){super(o),this._source=e}cancel(){this._source.cancel()}}function createCancelableAsyncIterable(e){const o=new l.A,s=e(o.token);return new CancelableAsyncIterableObject(o,(e=>__awaiter(this,void 0,void 0,(function*(){var l,u;const g=o.token.onCancellationRequested((()=>{g.dispose(),o.dispose(),e.reject(new d.FU)}));try{try{for(var p,m=__asyncValues(s);p=yield m.next(),!p.done;){const s=p.value;if(o.token.isCancellationRequested)return;e.emitOne(s)}}catch(f){l={error:f}}finally{try{p&&!p.done&&(u=m.return)&&(yield u.call(m))}finally{if(l)throw l.error}}g.dispose(),o.dispose()}catch(_){g.dispose(),o.dispose(),e.reject(_)}}))))}},3060:function(e,o,s){"use strict";s.d(o,{Ag:function(){return readUInt32BE},Cg:function(){return writeUInt8},KN:function(){return VSBuffer},Q$:function(){return readUInt8},T4:function(){return writeUInt32BE},mP:function(){return readUInt16LE},oq:function(){return writeUInt16LE}});const l="undefined"!==typeof Buffer;let d;class VSBuffer{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return l&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new VSBuffer(e)}toString(){return l?this.buffer.toString():(d||(d=new TextDecoder),d.decode(this.buffer))}}function readUInt16LE(e,o){return e[o+0]<<0>>>0|e[o+1]<<8>>>0}function writeUInt16LE(e,o,s){e[s+0]=255&o,o>>>=8,e[s+1]=255&o}function readUInt32BE(e,o){return e[o]*Math.pow(2,24)+e[o+1]*Math.pow(2,16)+e[o+2]*Math.pow(2,8)+e[o+3]}function writeUInt32BE(e,o,s){e[s+3]=o,o>>>=8,e[s+2]=o,o>>>=8,e[s+1]=o,o>>>=8,e[s]=o}function readUInt8(e,o){return e[o]}function writeUInt8(e,o,s){e[s]=o}},1050:function(e,o,s){"use strict";s.d(o,{A:function(){return CancellationTokenSource},T:function(){return u}});var l=s(4669);const d=Object.freeze((function(e,o){const s=setTimeout(e.bind(o),0);return{dispose(){clearTimeout(s)}}}));var u;(function(e){function isCancellationToken(o){return o===e.None||o===e.Cancelled||(o instanceof MutableToken||!(!o||"object"!==typeof o)&&("boolean"===typeof o.isCancellationRequested&&"function"===typeof o.onCancellationRequested))}e.isCancellationToken=isCancellationToken,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:l.ju.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:d})})(u||(u={}));class MutableToken{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?d:(this._emitter||(this._emitter=new l.Q5),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class CancellationTokenSource{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new MutableToken),this._token}cancel(){this._token?this._token instanceof MutableToken&&this._token.cancel():this._token=u.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof MutableToken&&this._token.dispose():this._token=u.None}}},3046:function(e,o,s){"use strict";function getCodiconAriaLabel(e){return e?e.replace(/\$\((.*?)\)/g,((e,o)=>` ${o} `)).trim():""}s.d(o,{JL:function(){return getCodiconAriaLabel},dT:function(){return l},lA:function(){return Codicon}});class Codicon{constructor(e,o,s){this.id=e,this.definition=o,this.description=s,Codicon._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return Codicon._allCodicons}}var l;Codicon._allCodicons=[],Codicon.add=new Codicon("add",{fontCharacter:"\\ea60"}),Codicon.plus=new Codicon("plus",Codicon.add.definition),Codicon.gistNew=new Codicon("gist-new",Codicon.add.definition),Codicon.repoCreate=new Codicon("repo-create",Codicon.add.definition),Codicon.lightbulb=new Codicon("lightbulb",{fontCharacter:"\\ea61"}),Codicon.lightBulb=new Codicon("light-bulb",{fontCharacter:"\\ea61"}),Codicon.repo=new Codicon("repo",{fontCharacter:"\\ea62"}),Codicon.repoDelete=new Codicon("repo-delete",{fontCharacter:"\\ea62"}),Codicon.gistFork=new Codicon("gist-fork",{fontCharacter:"\\ea63"}),Codicon.repoForked=new Codicon("repo-forked",{fontCharacter:"\\ea63"}),Codicon.gitPullRequest=new Codicon("git-pull-request",{fontCharacter:"\\ea64"}),Codicon.gitPullRequestAbandoned=new Codicon("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),Codicon.recordKeys=new Codicon("record-keys",{fontCharacter:"\\ea65"}),Codicon.keyboard=new Codicon("keyboard",{fontCharacter:"\\ea65"}),Codicon.tag=new Codicon("tag",{fontCharacter:"\\ea66"}),Codicon.tagAdd=new Codicon("tag-add",{fontCharacter:"\\ea66"}),Codicon.tagRemove=new Codicon("tag-remove",{fontCharacter:"\\ea66"}),Codicon.person=new Codicon("person",{fontCharacter:"\\ea67"}),Codicon.personFollow=new Codicon("person-follow",{fontCharacter:"\\ea67"}),Codicon.personOutline=new Codicon("person-outline",{fontCharacter:"\\ea67"}),Codicon.personFilled=new Codicon("person-filled",{fontCharacter:"\\ea67"}),Codicon.gitBranch=new Codicon("git-branch",{fontCharacter:"\\ea68"}),Codicon.gitBranchCreate=new Codicon("git-branch-create",{fontCharacter:"\\ea68"}),Codicon.gitBranchDelete=new Codicon("git-branch-delete",{fontCharacter:"\\ea68"}),Codicon.sourceControl=new Codicon("source-control",{fontCharacter:"\\ea68"}),Codicon.mirror=new Codicon("mirror",{fontCharacter:"\\ea69"}),Codicon.mirrorPublic=new Codicon("mirror-public",{fontCharacter:"\\ea69"}),Codicon.star=new Codicon("star",{fontCharacter:"\\ea6a"}),Codicon.starAdd=new Codicon("star-add",{fontCharacter:"\\ea6a"}),Codicon.starDelete=new Codicon("star-delete",{fontCharacter:"\\ea6a"}),Codicon.starEmpty=new Codicon("star-empty",{fontCharacter:"\\ea6a"}),Codicon.comment=new Codicon("comment",{fontCharacter:"\\ea6b"}),Codicon.commentAdd=new Codicon("comment-add",{fontCharacter:"\\ea6b"}),Codicon.alert=new Codicon("alert",{fontCharacter:"\\ea6c"}),Codicon.warning=new Codicon("warning",{fontCharacter:"\\ea6c"}),Codicon.search=new Codicon("search",{fontCharacter:"\\ea6d"}),Codicon.searchSave=new Codicon("search-save",{fontCharacter:"\\ea6d"}),Codicon.logOut=new Codicon("log-out",{fontCharacter:"\\ea6e"}),Codicon.signOut=new Codicon("sign-out",{fontCharacter:"\\ea6e"}),Codicon.logIn=new Codicon("log-in",{fontCharacter:"\\ea6f"}),Codicon.signIn=new Codicon("sign-in",{fontCharacter:"\\ea6f"}),Codicon.eye=new Codicon("eye",{fontCharacter:"\\ea70"}),Codicon.eyeUnwatch=new Codicon("eye-unwatch",{fontCharacter:"\\ea70"}),Codicon.eyeWatch=new Codicon("eye-watch",{fontCharacter:"\\ea70"}),Codicon.circleFilled=new Codicon("circle-filled",{fontCharacter:"\\ea71"}),Codicon.primitiveDot=new Codicon("primitive-dot",{fontCharacter:"\\ea71"}),Codicon.closeDirty=new Codicon("close-dirty",{fontCharacter:"\\ea71"}),Codicon.debugBreakpoint=new Codicon("debug-breakpoint",{fontCharacter:"\\ea71"}),Codicon.debugBreakpointDisabled=new Codicon("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),Codicon.debugHint=new Codicon("debug-hint",{fontCharacter:"\\ea71"}),Codicon.primitiveSquare=new Codicon("primitive-square",{fontCharacter:"\\ea72"}),Codicon.edit=new Codicon("edit",{fontCharacter:"\\ea73"}),Codicon.pencil=new Codicon("pencil",{fontCharacter:"\\ea73"}),Codicon.info=new Codicon("info",{fontCharacter:"\\ea74"}),Codicon.issueOpened=new Codicon("issue-opened",{fontCharacter:"\\ea74"}),Codicon.gistPrivate=new Codicon("gist-private",{fontCharacter:"\\ea75"}),Codicon.gitForkPrivate=new Codicon("git-fork-private",{fontCharacter:"\\ea75"}),Codicon.lock=new Codicon("lock",{fontCharacter:"\\ea75"}),Codicon.mirrorPrivate=new Codicon("mirror-private",{fontCharacter:"\\ea75"}),Codicon.close=new Codicon("close",{fontCharacter:"\\ea76"}),Codicon.removeClose=new Codicon("remove-close",{fontCharacter:"\\ea76"}),Codicon.x=new Codicon("x",{fontCharacter:"\\ea76"}),Codicon.repoSync=new Codicon("repo-sync",{fontCharacter:"\\ea77"}),Codicon.sync=new Codicon("sync",{fontCharacter:"\\ea77"}),Codicon.clone=new Codicon("clone",{fontCharacter:"\\ea78"}),Codicon.desktopDownload=new Codicon("desktop-download",{fontCharacter:"\\ea78"}),Codicon.beaker=new Codicon("beaker",{fontCharacter:"\\ea79"}),Codicon.microscope=new Codicon("microscope",{fontCharacter:"\\ea79"}),Codicon.vm=new Codicon("vm",{fontCharacter:"\\ea7a"}),Codicon.deviceDesktop=new Codicon("device-desktop",{fontCharacter:"\\ea7a"}),Codicon.file=new Codicon("file",{fontCharacter:"\\ea7b"}),Codicon.fileText=new Codicon("file-text",{fontCharacter:"\\ea7b"}),Codicon.more=new Codicon("more",{fontCharacter:"\\ea7c"}),Codicon.ellipsis=new Codicon("ellipsis",{fontCharacter:"\\ea7c"}),Codicon.kebabHorizontal=new Codicon("kebab-horizontal",{fontCharacter:"\\ea7c"}),Codicon.mailReply=new Codicon("mail-reply",{fontCharacter:"\\ea7d"}),Codicon.reply=new Codicon("reply",{fontCharacter:"\\ea7d"}),Codicon.organization=new Codicon("organization",{fontCharacter:"\\ea7e"}),Codicon.organizationFilled=new Codicon("organization-filled",{fontCharacter:"\\ea7e"}),Codicon.organizationOutline=new Codicon("organization-outline",{fontCharacter:"\\ea7e"}),Codicon.newFile=new Codicon("new-file",{fontCharacter:"\\ea7f"}),Codicon.fileAdd=new Codicon("file-add",{fontCharacter:"\\ea7f"}),Codicon.newFolder=new Codicon("new-folder",{fontCharacter:"\\ea80"}),Codicon.fileDirectoryCreate=new Codicon("file-directory-create",{fontCharacter:"\\ea80"}),Codicon.trash=new Codicon("trash",{fontCharacter:"\\ea81"}),Codicon.trashcan=new Codicon("trashcan",{fontCharacter:"\\ea81"}),Codicon.history=new Codicon("history",{fontCharacter:"\\ea82"}),Codicon.clock=new Codicon("clock",{fontCharacter:"\\ea82"}),Codicon.folder=new Codicon("folder",{fontCharacter:"\\ea83"}),Codicon.fileDirectory=new Codicon("file-directory",{fontCharacter:"\\ea83"}),Codicon.symbolFolder=new Codicon("symbol-folder",{fontCharacter:"\\ea83"}),Codicon.logoGithub=new Codicon("logo-github",{fontCharacter:"\\ea84"}),Codicon.markGithub=new Codicon("mark-github",{fontCharacter:"\\ea84"}),Codicon.github=new Codicon("github",{fontCharacter:"\\ea84"}),Codicon.terminal=new Codicon("terminal",{fontCharacter:"\\ea85"}),Codicon.console=new Codicon("console",{fontCharacter:"\\ea85"}),Codicon.repl=new Codicon("repl",{fontCharacter:"\\ea85"}),Codicon.zap=new Codicon("zap",{fontCharacter:"\\ea86"}),Codicon.symbolEvent=new Codicon("symbol-event",{fontCharacter:"\\ea86"}),Codicon.error=new Codicon("error",{fontCharacter:"\\ea87"}),Codicon.stop=new Codicon("stop",{fontCharacter:"\\ea87"}),Codicon.variable=new Codicon("variable",{fontCharacter:"\\ea88"}),Codicon.symbolVariable=new Codicon("symbol-variable",{fontCharacter:"\\ea88"}),Codicon.array=new Codicon("array",{fontCharacter:"\\ea8a"}),Codicon.symbolArray=new Codicon("symbol-array",{fontCharacter:"\\ea8a"}),Codicon.symbolModule=new Codicon("symbol-module",{fontCharacter:"\\ea8b"}),Codicon.symbolPackage=new Codicon("symbol-package",{fontCharacter:"\\ea8b"}),Codicon.symbolNamespace=new Codicon("symbol-namespace",{fontCharacter:"\\ea8b"}),Codicon.symbolObject=new Codicon("symbol-object",{fontCharacter:"\\ea8b"}),Codicon.symbolMethod=new Codicon("symbol-method",{fontCharacter:"\\ea8c"}),Codicon.symbolFunction=new Codicon("symbol-function",{fontCharacter:"\\ea8c"}),Codicon.symbolConstructor=new Codicon("symbol-constructor",{fontCharacter:"\\ea8c"}),Codicon.symbolBoolean=new Codicon("symbol-boolean",{fontCharacter:"\\ea8f"}),Codicon.symbolNull=new Codicon("symbol-null",{fontCharacter:"\\ea8f"}),Codicon.symbolNumeric=new Codicon("symbol-numeric",{fontCharacter:"\\ea90"}),Codicon.symbolNumber=new Codicon("symbol-number",{fontCharacter:"\\ea90"}),Codicon.symbolStructure=new Codicon("symbol-structure",{fontCharacter:"\\ea91"}),Codicon.symbolStruct=new Codicon("symbol-struct",{fontCharacter:"\\ea91"}),Codicon.symbolParameter=new Codicon("symbol-parameter",{fontCharacter:"\\ea92"}),Codicon.symbolTypeParameter=new Codicon("symbol-type-parameter",{fontCharacter:"\\ea92"}),Codicon.symbolKey=new Codicon("symbol-key",{fontCharacter:"\\ea93"}),Codicon.symbolText=new Codicon("symbol-text",{fontCharacter:"\\ea93"}),Codicon.symbolReference=new Codicon("symbol-reference",{fontCharacter:"\\ea94"}),Codicon.goToFile=new Codicon("go-to-file",{fontCharacter:"\\ea94"}),Codicon.symbolEnum=new Codicon("symbol-enum",{fontCharacter:"\\ea95"}),Codicon.symbolValue=new Codicon("symbol-value",{fontCharacter:"\\ea95"}),Codicon.symbolRuler=new Codicon("symbol-ruler",{fontCharacter:"\\ea96"}),Codicon.symbolUnit=new Codicon("symbol-unit",{fontCharacter:"\\ea96"}),Codicon.activateBreakpoints=new Codicon("activate-breakpoints",{fontCharacter:"\\ea97"}),Codicon.archive=new Codicon("archive",{fontCharacter:"\\ea98"}),Codicon.arrowBoth=new Codicon("arrow-both",{fontCharacter:"\\ea99"}),Codicon.arrowDown=new Codicon("arrow-down",{fontCharacter:"\\ea9a"}),Codicon.arrowLeft=new Codicon("arrow-left",{fontCharacter:"\\ea9b"}),Codicon.arrowRight=new Codicon("arrow-right",{fontCharacter:"\\ea9c"}),Codicon.arrowSmallDown=new Codicon("arrow-small-down",{fontCharacter:"\\ea9d"}),Codicon.arrowSmallLeft=new Codicon("arrow-small-left",{fontCharacter:"\\ea9e"}),Codicon.arrowSmallRight=new Codicon("arrow-small-right",{fontCharacter:"\\ea9f"}),Codicon.arrowSmallUp=new Codicon("arrow-small-up",{fontCharacter:"\\eaa0"}),Codicon.arrowUp=new Codicon("arrow-up",{fontCharacter:"\\eaa1"}),Codicon.bell=new Codicon("bell",{fontCharacter:"\\eaa2"}),Codicon.bold=new Codicon("bold",{fontCharacter:"\\eaa3"}),Codicon.book=new Codicon("book",{fontCharacter:"\\eaa4"}),Codicon.bookmark=new Codicon("bookmark",{fontCharacter:"\\eaa5"}),Codicon.debugBreakpointConditionalUnverified=new Codicon("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),Codicon.debugBreakpointConditional=new Codicon("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),Codicon.debugBreakpointConditionalDisabled=new Codicon("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),Codicon.debugBreakpointDataUnverified=new Codicon("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),Codicon.debugBreakpointData=new Codicon("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),Codicon.debugBreakpointDataDisabled=new Codicon("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),Codicon.debugBreakpointLogUnverified=new Codicon("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),Codicon.debugBreakpointLog=new Codicon("debug-breakpoint-log",{fontCharacter:"\\eaab"}),Codicon.debugBreakpointLogDisabled=new Codicon("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),Codicon.briefcase=new Codicon("briefcase",{fontCharacter:"\\eaac"}),Codicon.broadcast=new Codicon("broadcast",{fontCharacter:"\\eaad"}),Codicon.browser=new Codicon("browser",{fontCharacter:"\\eaae"}),Codicon.bug=new Codicon("bug",{fontCharacter:"\\eaaf"}),Codicon.calendar=new Codicon("calendar",{fontCharacter:"\\eab0"}),Codicon.caseSensitive=new Codicon("case-sensitive",{fontCharacter:"\\eab1"}),Codicon.check=new Codicon("check",{fontCharacter:"\\eab2"}),Codicon.checklist=new Codicon("checklist",{fontCharacter:"\\eab3"}),Codicon.chevronDown=new Codicon("chevron-down",{fontCharacter:"\\eab4"}),Codicon.dropDownButton=new Codicon("drop-down-button",Codicon.chevronDown.definition),Codicon.chevronLeft=new Codicon("chevron-left",{fontCharacter:"\\eab5"}),Codicon.chevronRight=new Codicon("chevron-right",{fontCharacter:"\\eab6"}),Codicon.chevronUp=new Codicon("chevron-up",{fontCharacter:"\\eab7"}),Codicon.chromeClose=new Codicon("chrome-close",{fontCharacter:"\\eab8"}),Codicon.chromeMaximize=new Codicon("chrome-maximize",{fontCharacter:"\\eab9"}),Codicon.chromeMinimize=new Codicon("chrome-minimize",{fontCharacter:"\\eaba"}),Codicon.chromeRestore=new Codicon("chrome-restore",{fontCharacter:"\\eabb"}),Codicon.circleOutline=new Codicon("circle-outline",{fontCharacter:"\\eabc"}),Codicon.debugBreakpointUnverified=new Codicon("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),Codicon.circleSlash=new Codicon("circle-slash",{fontCharacter:"\\eabd"}),Codicon.circuitBoard=new Codicon("circuit-board",{fontCharacter:"\\eabe"}),Codicon.clearAll=new Codicon("clear-all",{fontCharacter:"\\eabf"}),Codicon.clippy=new Codicon("clippy",{fontCharacter:"\\eac0"}),Codicon.closeAll=new Codicon("close-all",{fontCharacter:"\\eac1"}),Codicon.cloudDownload=new Codicon("cloud-download",{fontCharacter:"\\eac2"}),Codicon.cloudUpload=new Codicon("cloud-upload",{fontCharacter:"\\eac3"}),Codicon.code=new Codicon("code",{fontCharacter:"\\eac4"}),Codicon.collapseAll=new Codicon("collapse-all",{fontCharacter:"\\eac5"}),Codicon.colorMode=new Codicon("color-mode",{fontCharacter:"\\eac6"}),Codicon.commentDiscussion=new Codicon("comment-discussion",{fontCharacter:"\\eac7"}),Codicon.compareChanges=new Codicon("compare-changes",{fontCharacter:"\\eafd"}),Codicon.creditCard=new Codicon("credit-card",{fontCharacter:"\\eac9"}),Codicon.dash=new Codicon("dash",{fontCharacter:"\\eacc"}),Codicon.dashboard=new Codicon("dashboard",{fontCharacter:"\\eacd"}),Codicon.database=new Codicon("database",{fontCharacter:"\\eace"}),Codicon.debugContinue=new Codicon("debug-continue",{fontCharacter:"\\eacf"}),Codicon.debugDisconnect=new Codicon("debug-disconnect",{fontCharacter:"\\ead0"}),Codicon.debugPause=new Codicon("debug-pause",{fontCharacter:"\\ead1"}),Codicon.debugRestart=new Codicon("debug-restart",{fontCharacter:"\\ead2"}),Codicon.debugStart=new Codicon("debug-start",{fontCharacter:"\\ead3"}),Codicon.debugStepInto=new Codicon("debug-step-into",{fontCharacter:"\\ead4"}),Codicon.debugStepOut=new Codicon("debug-step-out",{fontCharacter:"\\ead5"}),Codicon.debugStepOver=new Codicon("debug-step-over",{fontCharacter:"\\ead6"}),Codicon.debugStop=new Codicon("debug-stop",{fontCharacter:"\\ead7"}),Codicon.debug=new Codicon("debug",{fontCharacter:"\\ead8"}),Codicon.deviceCameraVideo=new Codicon("device-camera-video",{fontCharacter:"\\ead9"}),Codicon.deviceCamera=new Codicon("device-camera",{fontCharacter:"\\eada"}),Codicon.deviceMobile=new Codicon("device-mobile",{fontCharacter:"\\eadb"}),Codicon.diffAdded=new Codicon("diff-added",{fontCharacter:"\\eadc"}),Codicon.diffIgnored=new Codicon("diff-ignored",{fontCharacter:"\\eadd"}),Codicon.diffModified=new Codicon("diff-modified",{fontCharacter:"\\eade"}),Codicon.diffRemoved=new Codicon("diff-removed",{fontCharacter:"\\eadf"}),Codicon.diffRenamed=new Codicon("diff-renamed",{fontCharacter:"\\eae0"}),Codicon.diff=new Codicon("diff",{fontCharacter:"\\eae1"}),Codicon.discard=new Codicon("discard",{fontCharacter:"\\eae2"}),Codicon.editorLayout=new Codicon("editor-layout",{fontCharacter:"\\eae3"}),Codicon.emptyWindow=new Codicon("empty-window",{fontCharacter:"\\eae4"}),Codicon.exclude=new Codicon("exclude",{fontCharacter:"\\eae5"}),Codicon.extensions=new Codicon("extensions",{fontCharacter:"\\eae6"}),Codicon.eyeClosed=new Codicon("eye-closed",{fontCharacter:"\\eae7"}),Codicon.fileBinary=new Codicon("file-binary",{fontCharacter:"\\eae8"}),Codicon.fileCode=new Codicon("file-code",{fontCharacter:"\\eae9"}),Codicon.fileMedia=new Codicon("file-media",{fontCharacter:"\\eaea"}),Codicon.filePdf=new Codicon("file-pdf",{fontCharacter:"\\eaeb"}),Codicon.fileSubmodule=new Codicon("file-submodule",{fontCharacter:"\\eaec"}),Codicon.fileSymlinkDirectory=new Codicon("file-symlink-directory",{fontCharacter:"\\eaed"}),Codicon.fileSymlinkFile=new Codicon("file-symlink-file",{fontCharacter:"\\eaee"}),Codicon.fileZip=new Codicon("file-zip",{fontCharacter:"\\eaef"}),Codicon.files=new Codicon("files",{fontCharacter:"\\eaf0"}),Codicon.filter=new Codicon("filter",{fontCharacter:"\\eaf1"}),Codicon.flame=new Codicon("flame",{fontCharacter:"\\eaf2"}),Codicon.foldDown=new Codicon("fold-down",{fontCharacter:"\\eaf3"}),Codicon.foldUp=new Codicon("fold-up",{fontCharacter:"\\eaf4"}),Codicon.fold=new Codicon("fold",{fontCharacter:"\\eaf5"}),Codicon.folderActive=new Codicon("folder-active",{fontCharacter:"\\eaf6"}),Codicon.folderOpened=new Codicon("folder-opened",{fontCharacter:"\\eaf7"}),Codicon.gear=new Codicon("gear",{fontCharacter:"\\eaf8"}),Codicon.gift=new Codicon("gift",{fontCharacter:"\\eaf9"}),Codicon.gistSecret=new Codicon("gist-secret",{fontCharacter:"\\eafa"}),Codicon.gist=new Codicon("gist",{fontCharacter:"\\eafb"}),Codicon.gitCommit=new Codicon("git-commit",{fontCharacter:"\\eafc"}),Codicon.gitCompare=new Codicon("git-compare",{fontCharacter:"\\eafd"}),Codicon.gitMerge=new Codicon("git-merge",{fontCharacter:"\\eafe"}),Codicon.githubAction=new Codicon("github-action",{fontCharacter:"\\eaff"}),Codicon.githubAlt=new Codicon("github-alt",{fontCharacter:"\\eb00"}),Codicon.globe=new Codicon("globe",{fontCharacter:"\\eb01"}),Codicon.grabber=new Codicon("grabber",{fontCharacter:"\\eb02"}),Codicon.graph=new Codicon("graph",{fontCharacter:"\\eb03"}),Codicon.gripper=new Codicon("gripper",{fontCharacter:"\\eb04"}),Codicon.heart=new Codicon("heart",{fontCharacter:"\\eb05"}),Codicon.home=new Codicon("home",{fontCharacter:"\\eb06"}),Codicon.horizontalRule=new Codicon("horizontal-rule",{fontCharacter:"\\eb07"}),Codicon.hubot=new Codicon("hubot",{fontCharacter:"\\eb08"}),Codicon.inbox=new Codicon("inbox",{fontCharacter:"\\eb09"}),Codicon.issueClosed=new Codicon("issue-closed",{fontCharacter:"\\eba4"}),Codicon.issueReopened=new Codicon("issue-reopened",{fontCharacter:"\\eb0b"}),Codicon.issues=new Codicon("issues",{fontCharacter:"\\eb0c"}),Codicon.italic=new Codicon("italic",{fontCharacter:"\\eb0d"}),Codicon.jersey=new Codicon("jersey",{fontCharacter:"\\eb0e"}),Codicon.json=new Codicon("json",{fontCharacter:"\\eb0f"}),Codicon.kebabVertical=new Codicon("kebab-vertical",{fontCharacter:"\\eb10"}),Codicon.key=new Codicon("key",{fontCharacter:"\\eb11"}),Codicon.law=new Codicon("law",{fontCharacter:"\\eb12"}),Codicon.lightbulbAutofix=new Codicon("lightbulb-autofix",{fontCharacter:"\\eb13"}),Codicon.linkExternal=new Codicon("link-external",{fontCharacter:"\\eb14"}),Codicon.link=new Codicon("link",{fontCharacter:"\\eb15"}),Codicon.listOrdered=new Codicon("list-ordered",{fontCharacter:"\\eb16"}),Codicon.listUnordered=new Codicon("list-unordered",{fontCharacter:"\\eb17"}),Codicon.liveShare=new Codicon("live-share",{fontCharacter:"\\eb18"}),Codicon.loading=new Codicon("loading",{fontCharacter:"\\eb19"}),Codicon.location=new Codicon("location",{fontCharacter:"\\eb1a"}),Codicon.mailRead=new Codicon("mail-read",{fontCharacter:"\\eb1b"}),Codicon.mail=new Codicon("mail",{fontCharacter:"\\eb1c"}),Codicon.markdown=new Codicon("markdown",{fontCharacter:"\\eb1d"}),Codicon.megaphone=new Codicon("megaphone",{fontCharacter:"\\eb1e"}),Codicon.mention=new Codicon("mention",{fontCharacter:"\\eb1f"}),Codicon.milestone=new Codicon("milestone",{fontCharacter:"\\eb20"}),Codicon.mortarBoard=new Codicon("mortar-board",{fontCharacter:"\\eb21"}),Codicon.move=new Codicon("move",{fontCharacter:"\\eb22"}),Codicon.multipleWindows=new Codicon("multiple-windows",{fontCharacter:"\\eb23"}),Codicon.mute=new Codicon("mute",{fontCharacter:"\\eb24"}),Codicon.noNewline=new Codicon("no-newline",{fontCharacter:"\\eb25"}),Codicon.note=new Codicon("note",{fontCharacter:"\\eb26"}),Codicon.octoface=new Codicon("octoface",{fontCharacter:"\\eb27"}),Codicon.openPreview=new Codicon("open-preview",{fontCharacter:"\\eb28"}),Codicon.package_=new Codicon("package",{fontCharacter:"\\eb29"}),Codicon.paintcan=new Codicon("paintcan",{fontCharacter:"\\eb2a"}),Codicon.pin=new Codicon("pin",{fontCharacter:"\\eb2b"}),Codicon.play=new Codicon("play",{fontCharacter:"\\eb2c"}),Codicon.run=new Codicon("run",{fontCharacter:"\\eb2c"}),Codicon.plug=new Codicon("plug",{fontCharacter:"\\eb2d"}),Codicon.preserveCase=new Codicon("preserve-case",{fontCharacter:"\\eb2e"}),Codicon.preview=new Codicon("preview",{fontCharacter:"\\eb2f"}),Codicon.project=new Codicon("project",{fontCharacter:"\\eb30"}),Codicon.pulse=new Codicon("pulse",{fontCharacter:"\\eb31"}),Codicon.question=new Codicon("question",{fontCharacter:"\\eb32"}),Codicon.quote=new Codicon("quote",{fontCharacter:"\\eb33"}),Codicon.radioTower=new Codicon("radio-tower",{fontCharacter:"\\eb34"}),Codicon.reactions=new Codicon("reactions",{fontCharacter:"\\eb35"}),Codicon.references=new Codicon("references",{fontCharacter:"\\eb36"}),Codicon.refresh=new Codicon("refresh",{fontCharacter:"\\eb37"}),Codicon.regex=new Codicon("regex",{fontCharacter:"\\eb38"}),Codicon.remoteExplorer=new Codicon("remote-explorer",{fontCharacter:"\\eb39"}),Codicon.remote=new Codicon("remote",{fontCharacter:"\\eb3a"}),Codicon.remove=new Codicon("remove",{fontCharacter:"\\eb3b"}),Codicon.replaceAll=new Codicon("replace-all",{fontCharacter:"\\eb3c"}),Codicon.replace=new Codicon("replace",{fontCharacter:"\\eb3d"}),Codicon.repoClone=new Codicon("repo-clone",{fontCharacter:"\\eb3e"}),Codicon.repoForcePush=new Codicon("repo-force-push",{fontCharacter:"\\eb3f"}),Codicon.repoPull=new Codicon("repo-pull",{fontCharacter:"\\eb40"}),Codicon.repoPush=new Codicon("repo-push",{fontCharacter:"\\eb41"}),Codicon.report=new Codicon("report",{fontCharacter:"\\eb42"}),Codicon.requestChanges=new Codicon("request-changes",{fontCharacter:"\\eb43"}),Codicon.rocket=new Codicon("rocket",{fontCharacter:"\\eb44"}),Codicon.rootFolderOpened=new Codicon("root-folder-opened",{fontCharacter:"\\eb45"}),Codicon.rootFolder=new Codicon("root-folder",{fontCharacter:"\\eb46"}),Codicon.rss=new Codicon("rss",{fontCharacter:"\\eb47"}),Codicon.ruby=new Codicon("ruby",{fontCharacter:"\\eb48"}),Codicon.saveAll=new Codicon("save-all",{fontCharacter:"\\eb49"}),Codicon.saveAs=new Codicon("save-as",{fontCharacter:"\\eb4a"}),Codicon.save=new Codicon("save",{fontCharacter:"\\eb4b"}),Codicon.screenFull=new Codicon("screen-full",{fontCharacter:"\\eb4c"}),Codicon.screenNormal=new Codicon("screen-normal",{fontCharacter:"\\eb4d"}),Codicon.searchStop=new Codicon("search-stop",{fontCharacter:"\\eb4e"}),Codicon.server=new Codicon("server",{fontCharacter:"\\eb50"}),Codicon.settingsGear=new Codicon("settings-gear",{fontCharacter:"\\eb51"}),Codicon.settings=new Codicon("settings",{fontCharacter:"\\eb52"}),Codicon.shield=new Codicon("shield",{fontCharacter:"\\eb53"}),Codicon.smiley=new Codicon("smiley",{fontCharacter:"\\eb54"}),Codicon.sortPrecedence=new Codicon("sort-precedence",{fontCharacter:"\\eb55"}),Codicon.splitHorizontal=new Codicon("split-horizontal",{fontCharacter:"\\eb56"}),Codicon.splitVertical=new Codicon("split-vertical",{fontCharacter:"\\eb57"}),Codicon.squirrel=new Codicon("squirrel",{fontCharacter:"\\eb58"}),Codicon.starFull=new Codicon("star-full",{fontCharacter:"\\eb59"}),Codicon.starHalf=new Codicon("star-half",{fontCharacter:"\\eb5a"}),Codicon.symbolClass=new Codicon("symbol-class",{fontCharacter:"\\eb5b"}),Codicon.symbolColor=new Codicon("symbol-color",{fontCharacter:"\\eb5c"}),Codicon.symbolCustomColor=new Codicon("symbol-customcolor",{fontCharacter:"\\eb5c"}),Codicon.symbolConstant=new Codicon("symbol-constant",{fontCharacter:"\\eb5d"}),Codicon.symbolEnumMember=new Codicon("symbol-enum-member",{fontCharacter:"\\eb5e"}),Codicon.symbolField=new Codicon("symbol-field",{fontCharacter:"\\eb5f"}),Codicon.symbolFile=new Codicon("symbol-file",{fontCharacter:"\\eb60"}),Codicon.symbolInterface=new Codicon("symbol-interface",{fontCharacter:"\\eb61"}),Codicon.symbolKeyword=new Codicon("symbol-keyword",{fontCharacter:"\\eb62"}),Codicon.symbolMisc=new Codicon("symbol-misc",{fontCharacter:"\\eb63"}),Codicon.symbolOperator=new Codicon("symbol-operator",{fontCharacter:"\\eb64"}),Codicon.symbolProperty=new Codicon("symbol-property",{fontCharacter:"\\eb65"}),Codicon.wrench=new Codicon("wrench",{fontCharacter:"\\eb65"}),Codicon.wrenchSubaction=new Codicon("wrench-subaction",{fontCharacter:"\\eb65"}),Codicon.symbolSnippet=new Codicon("symbol-snippet",{fontCharacter:"\\eb66"}),Codicon.tasklist=new Codicon("tasklist",{fontCharacter:"\\eb67"}),Codicon.telescope=new Codicon("telescope",{fontCharacter:"\\eb68"}),Codicon.textSize=new Codicon("text-size",{fontCharacter:"\\eb69"}),Codicon.threeBars=new Codicon("three-bars",{fontCharacter:"\\eb6a"}),Codicon.thumbsdown=new Codicon("thumbsdown",{fontCharacter:"\\eb6b"}),Codicon.thumbsup=new Codicon("thumbsup",{fontCharacter:"\\eb6c"}),Codicon.tools=new Codicon("tools",{fontCharacter:"\\eb6d"}),Codicon.triangleDown=new Codicon("triangle-down",{fontCharacter:"\\eb6e"}),Codicon.triangleLeft=new Codicon("triangle-left",{fontCharacter:"\\eb6f"}),Codicon.triangleRight=new Codicon("triangle-right",{fontCharacter:"\\eb70"}),Codicon.triangleUp=new Codicon("triangle-up",{fontCharacter:"\\eb71"}),Codicon.twitter=new Codicon("twitter",{fontCharacter:"\\eb72"}),Codicon.unfold=new Codicon("unfold",{fontCharacter:"\\eb73"}),Codicon.unlock=new Codicon("unlock",{fontCharacter:"\\eb74"}),Codicon.unmute=new Codicon("unmute",{fontCharacter:"\\eb75"}),Codicon.unverified=new Codicon("unverified",{fontCharacter:"\\eb76"}),Codicon.verified=new Codicon("verified",{fontCharacter:"\\eb77"}),Codicon.versions=new Codicon("versions",{fontCharacter:"\\eb78"}),Codicon.vmActive=new Codicon("vm-active",{fontCharacter:"\\eb79"}),Codicon.vmOutline=new Codicon("vm-outline",{fontCharacter:"\\eb7a"}),Codicon.vmRunning=new Codicon("vm-running",{fontCharacter:"\\eb7b"}),Codicon.watch=new Codicon("watch",{fontCharacter:"\\eb7c"}),Codicon.whitespace=new Codicon("whitespace",{fontCharacter:"\\eb7d"}),Codicon.wholeWord=new Codicon("whole-word",{fontCharacter:"\\eb7e"}),Codicon.window=new Codicon("window",{fontCharacter:"\\eb7f"}),Codicon.wordWrap=new Codicon("word-wrap",{fontCharacter:"\\eb80"}),Codicon.zoomIn=new Codicon("zoom-in",{fontCharacter:"\\eb81"}),Codicon.zoomOut=new Codicon("zoom-out",{fontCharacter:"\\eb82"}),Codicon.listFilter=new Codicon("list-filter",{fontCharacter:"\\eb83"}),Codicon.listFlat=new Codicon("list-flat",{fontCharacter:"\\eb84"}),Codicon.listSelection=new Codicon("list-selection",{fontCharacter:"\\eb85"}),Codicon.selection=new Codicon("selection",{fontCharacter:"\\eb85"}),Codicon.listTree=new Codicon("list-tree",{fontCharacter:"\\eb86"}),Codicon.debugBreakpointFunctionUnverified=new Codicon("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),Codicon.debugBreakpointFunction=new Codicon("debug-breakpoint-function",{fontCharacter:"\\eb88"}),Codicon.debugBreakpointFunctionDisabled=new Codicon("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),Codicon.debugStackframeActive=new Codicon("debug-stackframe-active",{fontCharacter:"\\eb89"}),Codicon.debugStackframeDot=new Codicon("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),Codicon.debugStackframe=new Codicon("debug-stackframe",{fontCharacter:"\\eb8b"}),Codicon.debugStackframeFocused=new Codicon("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),Codicon.debugBreakpointUnsupported=new Codicon("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),Codicon.symbolString=new Codicon("symbol-string",{fontCharacter:"\\eb8d"}),Codicon.debugReverseContinue=new Codicon("debug-reverse-continue",{fontCharacter:"\\eb8e"}),Codicon.debugStepBack=new Codicon("debug-step-back",{fontCharacter:"\\eb8f"}),Codicon.debugRestartFrame=new Codicon("debug-restart-frame",{fontCharacter:"\\eb90"}),Codicon.callIncoming=new Codicon("call-incoming",{fontCharacter:"\\eb92"}),Codicon.callOutgoing=new Codicon("call-outgoing",{fontCharacter:"\\eb93"}),Codicon.menu=new Codicon("menu",{fontCharacter:"\\eb94"}),Codicon.expandAll=new Codicon("expand-all",{fontCharacter:"\\eb95"}),Codicon.feedback=new Codicon("feedback",{fontCharacter:"\\eb96"}),Codicon.groupByRefType=new Codicon("group-by-ref-type",{fontCharacter:"\\eb97"}),Codicon.ungroupByRefType=new Codicon("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),Codicon.account=new Codicon("account",{fontCharacter:"\\eb99"}),Codicon.bellDot=new Codicon("bell-dot",{fontCharacter:"\\eb9a"}),Codicon.debugConsole=new Codicon("debug-console",{fontCharacter:"\\eb9b"}),Codicon.library=new Codicon("library",{fontCharacter:"\\eb9c"}),Codicon.output=new Codicon("output",{fontCharacter:"\\eb9d"}),Codicon.runAll=new Codicon("run-all",{fontCharacter:"\\eb9e"}),Codicon.syncIgnored=new Codicon("sync-ignored",{fontCharacter:"\\eb9f"}),Codicon.pinned=new Codicon("pinned",{fontCharacter:"\\eba0"}),Codicon.githubInverted=new Codicon("github-inverted",{fontCharacter:"\\eba1"}),Codicon.debugAlt=new Codicon("debug-alt",{fontCharacter:"\\eb91"}),Codicon.serverProcess=new Codicon("server-process",{fontCharacter:"\\eba2"}),Codicon.serverEnvironment=new Codicon("server-environment",{fontCharacter:"\\eba3"}),Codicon.pass=new Codicon("pass",{fontCharacter:"\\eba4"}),Codicon.stopCircle=new Codicon("stop-circle",{fontCharacter:"\\eba5"}),Codicon.playCircle=new Codicon("play-circle",{fontCharacter:"\\eba6"}),Codicon.record=new Codicon("record",{fontCharacter:"\\eba7"}),Codicon.debugAltSmall=new Codicon("debug-alt-small",{fontCharacter:"\\eba8"}),Codicon.vmConnect=new Codicon("vm-connect",{fontCharacter:"\\eba9"}),Codicon.cloud=new Codicon("cloud",{fontCharacter:"\\ebaa"}),Codicon.merge=new Codicon("merge",{fontCharacter:"\\ebab"}),Codicon.exportIcon=new Codicon("export",{fontCharacter:"\\ebac"}),Codicon.graphLeft=new Codicon("graph-left",{fontCharacter:"\\ebad"}),Codicon.magnet=new Codicon("magnet",{fontCharacter:"\\ebae"}),Codicon.notebook=new Codicon("notebook",{fontCharacter:"\\ebaf"}),Codicon.redo=new Codicon("redo",{fontCharacter:"\\ebb0"}),Codicon.checkAll=new Codicon("check-all",{fontCharacter:"\\ebb1"}),Codicon.pinnedDirty=new Codicon("pinned-dirty",{fontCharacter:"\\ebb2"}),Codicon.passFilled=new Codicon("pass-filled",{fontCharacter:"\\ebb3"}),Codicon.circleLargeFilled=new Codicon("circle-large-filled",{fontCharacter:"\\ebb4"}),Codicon.circleLargeOutline=new Codicon("circle-large-outline",{fontCharacter:"\\ebb5"}),Codicon.combine=new Codicon("combine",{fontCharacter:"\\ebb6"}),Codicon.gather=new Codicon("gather",{fontCharacter:"\\ebb6"}),Codicon.table=new Codicon("table",{fontCharacter:"\\ebb7"}),Codicon.variableGroup=new Codicon("variable-group",{fontCharacter:"\\ebb8"}),Codicon.typeHierarchy=new Codicon("type-hierarchy",{fontCharacter:"\\ebb9"}),Codicon.typeHierarchySub=new Codicon("type-hierarchy-sub",{fontCharacter:"\\ebba"}),Codicon.typeHierarchySuper=new Codicon("type-hierarchy-super",{fontCharacter:"\\ebbb"}),Codicon.gitPullRequestCreate=new Codicon("git-pull-request-create",{fontCharacter:"\\ebbc"}),Codicon.runAbove=new Codicon("run-above",{fontCharacter:"\\ebbd"}),Codicon.runBelow=new Codicon("run-below",{fontCharacter:"\\ebbe"}),Codicon.notebookTemplate=new Codicon("notebook-template",{fontCharacter:"\\ebbf"}),Codicon.debugRerun=new Codicon("debug-rerun",{fontCharacter:"\\ebc0"}),Codicon.workspaceTrusted=new Codicon("workspace-trusted",{fontCharacter:"\\ebc1"}),Codicon.workspaceUntrusted=new Codicon("workspace-untrusted",{fontCharacter:"\\ebc2"}),Codicon.workspaceUnspecified=new Codicon("workspace-unspecified",{fontCharacter:"\\ebc3"}),Codicon.terminalCmd=new Codicon("terminal-cmd",{fontCharacter:"\\ebc4"}),Codicon.terminalDebian=new Codicon("terminal-debian",{fontCharacter:"\\ebc5"}),Codicon.terminalLinux=new Codicon("terminal-linux",{fontCharacter:"\\ebc6"}),Codicon.terminalPowershell=new Codicon("terminal-powershell",{fontCharacter:"\\ebc7"}),Codicon.terminalTmux=new Codicon("terminal-tmux",{fontCharacter:"\\ebc8"}),Codicon.terminalUbuntu=new Codicon("terminal-ubuntu",{fontCharacter:"\\ebc9"}),Codicon.terminalBash=new Codicon("terminal-bash",{fontCharacter:"\\ebca"}),Codicon.arrowSwap=new Codicon("arrow-swap",{fontCharacter:"\\ebcb"}),Codicon.copy=new Codicon("copy",{fontCharacter:"\\ebcc"}),Codicon.personAdd=new Codicon("person-add",{fontCharacter:"\\ebcd"}),Codicon.filterFilled=new Codicon("filter-filled",{fontCharacter:"\\ebce"}),Codicon.wand=new Codicon("wand",{fontCharacter:"\\ebcf"}),Codicon.debugLineByLine=new Codicon("debug-line-by-line",{fontCharacter:"\\ebd0"}),Codicon.inspect=new Codicon("inspect",{fontCharacter:"\\ebd1"}),Codicon.layers=new Codicon("layers",{fontCharacter:"\\ebd2"}),Codicon.layersDot=new Codicon("layers-dot",{fontCharacter:"\\ebd3"}),Codicon.layersActive=new Codicon("layers-active",{fontCharacter:"\\ebd4"}),Codicon.compass=new Codicon("compass",{fontCharacter:"\\ebd5"}),Codicon.compassDot=new Codicon("compass-dot",{fontCharacter:"\\ebd6"}),Codicon.compassActive=new Codicon("compass-active",{fontCharacter:"\\ebd7"}),Codicon.azure=new Codicon("azure",{fontCharacter:"\\ebd8"}),Codicon.issueDraft=new Codicon("issue-draft",{fontCharacter:"\\ebd9"}),Codicon.gitPullRequestClosed=new Codicon("git-pull-request-closed",{fontCharacter:"\\ebda"}),Codicon.gitPullRequestDraft=new Codicon("git-pull-request-draft",{fontCharacter:"\\ebdb"}),Codicon.debugAll=new Codicon("debug-all",{fontCharacter:"\\ebdc"}),Codicon.debugCoverage=new Codicon("debug-coverage",{fontCharacter:"\\ebdd"}),Codicon.runErrors=new Codicon("run-errors",{fontCharacter:"\\ebde"}),Codicon.folderLibrary=new Codicon("folder-library",{fontCharacter:"\\ebdf"}),Codicon.debugContinueSmall=new Codicon("debug-continue-small",{fontCharacter:"\\ebe0"}),Codicon.beakerStop=new Codicon("beaker-stop",{fontCharacter:"\\ebe1"}),Codicon.graphLine=new Codicon("graph-line",{fontCharacter:"\\ebe2"}),Codicon.graphScatter=new Codicon("graph-scatter",{fontCharacter:"\\ebe3"}),Codicon.pieChart=new Codicon("pie-chart",{fontCharacter:"\\ebe4"}),Codicon.bracket=new Codicon("bracket",Codicon.json.definition),Codicon.bracketDot=new Codicon("bracket-dot",{fontCharacter:"\\ebe5"}),Codicon.bracketError=new Codicon("bracket-error",{fontCharacter:"\\ebe6"}),Codicon.lockSmall=new Codicon("lock-small",{fontCharacter:"\\ebe7"}),Codicon.azureDevops=new Codicon("azure-devops",{fontCharacter:"\\ebe8"}),Codicon.verifiedFilled=new Codicon("verified-filled",{fontCharacter:"\\ebe9"}),Codicon.newLine=new Codicon("newline",{fontCharacter:"\\ebea"}),Codicon.layout=new Codicon("layout",{fontCharacter:"\\ebeb"}),Codicon.layoutActivitybarLeft=new Codicon("layout-activitybar-left",{fontCharacter:"\\ebec"}),Codicon.layoutActivitybarRight=new Codicon("layout-activitybar-right",{fontCharacter:"\\ebed"}),Codicon.layoutPanelLeft=new Codicon("layout-panel-left",{fontCharacter:"\\ebee"}),Codicon.layoutPanelCenter=new Codicon("layout-panel-center",{fontCharacter:"\\ebef"}),Codicon.layoutPanelJustify=new Codicon("layout-panel-justify",{fontCharacter:"\\ebf0"}),Codicon.layoutPanelRight=new Codicon("layout-panel-right",{fontCharacter:"\\ebf1"}),Codicon.layoutPanel=new Codicon("layout-panel",{fontCharacter:"\\ebf2"}),Codicon.layoutSidebarLeft=new Codicon("layout-sidebar-left",{fontCharacter:"\\ebf3"}),Codicon.layoutSidebarRight=new Codicon("layout-sidebar-right",{fontCharacter:"\\ebf4"}),Codicon.layoutStatusbar=new Codicon("layout-statusbar",{fontCharacter:"\\ebf5"}),Codicon.layoutMenubar=new Codicon("layout-menubar",{fontCharacter:"\\ebf6"}),Codicon.layoutCentered=new Codicon("layout-centered",{fontCharacter:"\\ebf7"}),Codicon.target=new Codicon("target",{fontCharacter:"\\ebf8"}),Codicon.indent=new Codicon("indent",{fontCharacter:"\\ebf9"}),Codicon.recordSmall=new Codicon("record-small",{fontCharacter:"\\ebfa"}),Codicon.errorSmall=new Codicon("error-small",{fontCharacter:"\\ebfb"}),Codicon.arrowCircleDown=new Codicon("arrow-circle-down",{fontCharacter:"\\ebfc"}),Codicon.arrowCircleLeft=new Codicon("arrow-circle-left",{fontCharacter:"\\ebfd"}),Codicon.arrowCircleRight=new Codicon("arrow-circle-right",{fontCharacter:"\\ebfe"}),Codicon.arrowCircleUp=new Codicon("arrow-circle-up",{fontCharacter:"\\ebff"}),Codicon.dialogError=new Codicon("dialog-error",Codicon.error.definition),Codicon.dialogWarning=new Codicon("dialog-warning",Codicon.warning.definition),Codicon.dialogInfo=new Codicon("dialog-info",Codicon.info.definition),Codicon.dialogClose=new Codicon("dialog-close",Codicon.close.definition),Codicon.treeItemExpanded=new Codicon("tree-item-expanded",Codicon.chevronDown.definition),Codicon.treeFilterOnTypeOn=new Codicon("tree-filter-on-type-on",Codicon.listFilter.definition),Codicon.treeFilterOnTypeOff=new Codicon("tree-filter-on-type-off",Codicon.listSelection.definition),Codicon.treeFilterClear=new Codicon("tree-filter-clear",Codicon.close.definition),Codicon.treeItemLoading=new Codicon("tree-item-loading",Codicon.loading.definition),Codicon.menuSelection=new Codicon("menu-selection",Codicon.check.definition),Codicon.menuSubmenu=new Codicon("menu-submenu",Codicon.chevronRight.definition),Codicon.menuBarMore=new Codicon("menubar-more",Codicon.more.definition),Codicon.scrollbarButtonLeft=new Codicon("scrollbar-button-left",Codicon.triangleLeft.definition),Codicon.scrollbarButtonRight=new Codicon("scrollbar-button-right",Codicon.triangleRight.definition),Codicon.scrollbarButtonUp=new Codicon("scrollbar-button-up",Codicon.triangleUp.definition),Codicon.scrollbarButtonDown=new Codicon("scrollbar-button-down",Codicon.triangleDown.definition),Codicon.toolBarMore=new Codicon("toolbar-more",Codicon.more.definition),Codicon.quickInputBack=new Codicon("quick-input-back",Codicon.arrowLeft.definition),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const o=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function asClassNameArray(e){if(e instanceof Codicon)return["codicon","codicon-"+e.id];const s=o.exec(e.id);if(!s)return asClassNameArray(Codicon.error);let[,l,d]=s;const u=["codicon","codicon-"+l];return d&&u.push("codicon-modifier-"+d.substr(1)),u}function asClassName(e){return asClassNameArray(e).join(" ")}function asCSSSelector(e){return"."+asClassNameArray(e).join(".")}e.asClassNameArray=asClassNameArray,e.asClassName=asClassName,e.asCSSSelector=asCSSSelector}(l||(l={}))},6626:function(e,o,s){"use strict";s.d(o,{E:function(){return forEach},r:function(){return SetMap}});const l=Object.prototype.hasOwnProperty;function forEach(e,o){for(let s in e)if(l.call(e,s)){const l=o({key:s,value:e[s]},(function(){delete e[s]}));if(!1===l)return}}class SetMap{constructor(){this.map=new Map}add(e,o){let s=this.map.get(e);s||(s=new Set,this.map.set(e,s)),s.add(o)}delete(e,o){const s=this.map.get(e);s&&(s.delete(o),0===s.size&&this.map.delete(e))}forEach(e,o){const s=this.map.get(e);s&&s.forEach(o)}}},1264:function(e,o,s){"use strict";function roundFloat(e,o){const s=Math.pow(10,o);return Math.round(e*s)/s}s.d(o,{Il:function(){return Color},VS:function(){return RGBA},tx:function(){return HSVA}});class RGBA{constructor(e,o,s,l=1){this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,e)),this.g=0|Math.min(255,Math.max(0,o)),this.b=0|Math.min(255,Math.max(0,s)),this.a=roundFloat(Math.max(Math.min(1,l),0),3)}static equals(e,o){return e.r===o.r&&e.g===o.g&&e.b===o.b&&e.a===o.a}}class HSLA{constructor(e,o,s,l){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=roundFloat(Math.max(Math.min(1,o),0),3),this.l=roundFloat(Math.max(Math.min(1,s),0),3),this.a=roundFloat(Math.max(Math.min(1,l),0),3)}static equals(e,o){return e.h===o.h&&e.s===o.s&&e.l===o.l&&e.a===o.a}static fromRGBA(e){const o=e.r/255,s=e.g/255,l=e.b/255,d=e.a,u=Math.max(o,s,l),g=Math.min(o,s,l);let p=0,m=0;const f=(g+u)/2,_=u-g;if(_>0){switch(m=Math.min(f<=.5?_/(2*f):_/(2-2*f),1),u){case o:p=(s-l)/_+(s<l?6:0);break;case s:p=(l-o)/_+2;break;case l:p=(o-s)/_+4;break}p*=60,p=Math.round(p)}return new HSLA(p,m,f,d)}static _hue2rgb(e,o,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(o-e)*s:s<.5?o:s<2/3?e+(o-e)*(2/3-s)*6:e}static toRGBA(e){const o=e.h/360,{s:s,l:l,a:d}=e;let u,g,p;if(0===s)u=g=p=l;else{const e=l<.5?l*(1+s):l+s-l*s,d=2*l-e;u=HSLA._hue2rgb(d,e,o+1/3),g=HSLA._hue2rgb(d,e,o),p=HSLA._hue2rgb(d,e,o-1/3)}return new RGBA(Math.round(255*u),Math.round(255*g),Math.round(255*p),d)}}class HSVA{constructor(e,o,s,l){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=roundFloat(Math.max(Math.min(1,o),0),3),this.v=roundFloat(Math.max(Math.min(1,s),0),3),this.a=roundFloat(Math.max(Math.min(1,l),0),3)}static equals(e,o){return e.h===o.h&&e.s===o.s&&e.v===o.v&&e.a===o.a}static fromRGBA(e){const o=e.r/255,s=e.g/255,l=e.b/255,d=Math.max(o,s,l),u=Math.min(o,s,l),g=d-u,p=0===d?0:g/d;let m;return m=0===g?0:d===o?((s-l)/g%6+6)%6:d===s?(l-o)/g+2:(o-s)/g+4,new HSVA(Math.round(60*m),p,d,e.a)}static toRGBA(e){const{h:o,s:s,v:l,a:d}=e,u=l*s,g=u*(1-Math.abs(o/60%2-1)),p=l-u;let[m,f,_]=[0,0,0];return o<60?(m=u,f=g):o<120?(m=g,f=u):o<180?(f=u,_=g):o<240?(f=g,_=u):o<300?(m=g,_=u):o<=360&&(m=u,_=g),m=Math.round(255*(m+p)),f=Math.round(255*(f+p)),_=Math.round(255*(_+p)),new RGBA(m,f,_,d)}}class Color{constructor(e){if(!e)throw new Error("Color needs a value");if(e instanceof RGBA)this.rgba=e;else if(e instanceof HSLA)this._hsla=e,this.rgba=HSLA.toRGBA(e);else{if(!(e instanceof HSVA))throw new Error("Invalid color ctor argument");this._hsva=e,this.rgba=HSVA.toRGBA(e)}}static fromHex(e){return Color.Format.CSS.parseHex(e)||Color.red}get hsla(){return this._hsla?this._hsla:HSLA.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:HSVA.fromRGBA(this.rgba)}equals(e){return!!e&&RGBA.equals(this.rgba,e.rgba)&&HSLA.equals(this.hsla,e.hsla)&&HSVA.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Color._relativeLuminanceForComponent(this.rgba.r),o=Color._relativeLuminanceForComponent(this.rgba.g),s=Color._relativeLuminanceForComponent(this.rgba.b),l=.2126*e+.7152*o+.0722*s;return roundFloat(l,4)}static _relativeLuminanceForComponent(e){const o=e/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}isLighter(){const e=(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3;return e>=128}isLighterThan(e){const o=this.getRelativeLuminance(),s=e.getRelativeLuminance();return o>s}isDarkerThan(e){const o=this.getRelativeLuminance(),s=e.getRelativeLuminance();return o<s}lighten(e){return new Color(new HSLA(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Color(new HSLA(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:o,g:s,b:l,a:d}=this.rgba;return new Color(new RGBA(o,s,l,d*e))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new Color(new RGBA(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=Color.Format.CSS.format(this)),this._toString}static getLighterColor(e,o,s){if(e.isLighterThan(o))return e;s=s||.5;const l=e.getRelativeLuminance(),d=o.getRelativeLuminance();return s=s*(d-l)/d,e.lighten(s)}static getDarkerColor(e,o,s){if(e.isDarkerThan(o))return e;s=s||.5;const l=e.getRelativeLuminance(),d=o.getRelativeLuminance();return s=s*(l-d)/l,e.darken(s)}}Color.white=new Color(new RGBA(255,255,255,1)),Color.black=new Color(new RGBA(0,0,0,1)),Color.red=new Color(new RGBA(255,0,0,1)),Color.blue=new Color(new RGBA(0,0,255,1)),Color.green=new Color(new RGBA(0,255,0,1)),Color.cyan=new Color(new RGBA(0,255,255,1)),Color.lightgrey=new Color(new RGBA(211,211,211,1)),Color.transparent=new Color(new RGBA(0,0,0,0)),function(e){let o;(function(o){let s;(function(o){function formatRGB(o){return 1===o.rgba.a?`rgb(${o.rgba.r}, ${o.rgba.g}, ${o.rgba.b})`:e.Format.CSS.formatRGBA(o)}function formatRGBA(e){return`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${+e.rgba.a.toFixed(2)})`}function formatHSL(o){return 1===o.hsla.a?`hsl(${o.hsla.h}, ${(100*o.hsla.s).toFixed(2)}%, ${(100*o.hsla.l).toFixed(2)}%)`:e.Format.CSS.formatHSLA(o)}function formatHSLA(e){return`hsla(${e.hsla.h}, ${(100*e.hsla.s).toFixed(2)}%, ${(100*e.hsla.l).toFixed(2)}%, ${e.hsla.a.toFixed(2)})`}function _toTwoDigitHex(e){const o=e.toString(16);return 2!==o.length?"0"+o:o}function formatHex(e){return`#${_toTwoDigitHex(e.rgba.r)}${_toTwoDigitHex(e.rgba.g)}${_toTwoDigitHex(e.rgba.b)}`}function formatHexA(o,s=!1){return s&&1===o.rgba.a?e.Format.CSS.formatHex(o):`#${_toTwoDigitHex(o.rgba.r)}${_toTwoDigitHex(o.rgba.g)}${_toTwoDigitHex(o.rgba.b)}${_toTwoDigitHex(Math.round(255*o.rgba.a))}`}function format(o){return o.isOpaque()?e.Format.CSS.formatHex(o):e.Format.CSS.formatRGBA(o)}function parseHex(o){const s=o.length;if(0===s)return null;if(35!==o.charCodeAt(0))return null;if(7===s){const s=16*_parseHexDigit(o.charCodeAt(1))+_parseHexDigit(o.charCodeAt(2)),l=16*_parseHexDigit(o.charCodeAt(3))+_parseHexDigit(o.charCodeAt(4)),d=16*_parseHexDigit(o.charCodeAt(5))+_parseHexDigit(o.charCodeAt(6));return new e(new RGBA(s,l,d,1))}if(9===s){const s=16*_parseHexDigit(o.charCodeAt(1))+_parseHexDigit(o.charCodeAt(2)),l=16*_parseHexDigit(o.charCodeAt(3))+_parseHexDigit(o.charCodeAt(4)),d=16*_parseHexDigit(o.charCodeAt(5))+_parseHexDigit(o.charCodeAt(6)),u=16*_parseHexDigit(o.charCodeAt(7))+_parseHexDigit(o.charCodeAt(8));return new e(new RGBA(s,l,d,u/255))}if(4===s){const s=_parseHexDigit(o.charCodeAt(1)),l=_parseHexDigit(o.charCodeAt(2)),d=_parseHexDigit(o.charCodeAt(3));return new e(new RGBA(16*s+s,16*l+l,16*d+d))}if(5===s){const s=_parseHexDigit(o.charCodeAt(1)),l=_parseHexDigit(o.charCodeAt(2)),d=_parseHexDigit(o.charCodeAt(3)),u=_parseHexDigit(o.charCodeAt(4));return new e(new RGBA(16*s+s,16*l+l,16*d+d,(16*u+u)/255))}return null}function _parseHexDigit(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}o.formatRGB=formatRGB,o.formatRGBA=formatRGBA,o.formatHSL=formatHSL,o.formatHSLA=formatHSLA,o.formatHex=formatHex,o.formatHexA=formatHexA,o.format=format,o.parseHex=parseHex})(s=o.CSS||(o.CSS={}))})(o=e.Format||(e.Format={}))}(Color||(Color={}))},9898:function(e,o,s){"use strict";function memoize(e,o,s){let l=null,d=null;if("function"===typeof s.value?(l="value",d=s.value,0!==d.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"===typeof s.get&&(l="get",d=s.get),!d)throw new Error("not supported");const u=`$memoize$${o}`;s[l]=function(...e){return this.hasOwnProperty(u)||Object.defineProperty(this,u,{configurable:!1,enumerable:!1,writable:!1,value:d.apply(this,e)}),this[u]}}s.d(o,{H:function(){return memoize}})},2571:function(e,o,s){"use strict";s.d(o,{Hs:function(){return LcsDiff},a$:function(){return stringDiff}});class DiffChange{constructor(e,o,s,l){this.originalStart=e,this.originalLength=o,this.modifiedStart=s,this.modifiedLength=l}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}var l=s(9954);class StringDiffSequence{constructor(e){this.source=e}getElements(){const e=this.source,o=new Int32Array(e.length);for(let s=0,l=e.length;s<l;s++)o[s]=e.charCodeAt(s);return o}}function stringDiff(e,o,s){return new LcsDiff(new StringDiffSequence(e),new StringDiffSequence(o)).ComputeDiff(s).changes}class Debug{static Assert(e,o){if(!e)throw new Error(o)}}class MyArray{static Copy(e,o,s,l,d){for(let u=0;u<d;u++)s[l+u]=e[o+u]}static Copy2(e,o,s,l,d){for(let u=0;u<d;u++)s[l+u]=e[o+u]}}class DiffChangeHelper{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new DiffChange(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,o){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,o),this.m_originalCount++}AddModifiedElement(e,o){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,o),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class LcsDiff{constructor(e,o,s=null){this.ContinueProcessingPredicate=s,this._originalSequence=e,this._modifiedSequence=o;const[l,d,u]=LcsDiff._getElements(e),[g,p,m]=LcsDiff._getElements(o);this._hasStrings=u&&m,this._originalStringElements=l,this._originalElementsOrHash=d,this._modifiedStringElements=g,this._modifiedElementsOrHash=p,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&"string"===typeof e[0]}static _getElements(e){const o=e.getElements();if(LcsDiff._isStringArray(o)){const e=new Int32Array(o.length);for(let s=0,d=o.length;s<d;s++)e[s]=(0,l.Cv)(o[s],0);return[o,e,!0]}return o instanceof Int32Array?[[],o,!1]:[[],new Int32Array(o),!1]}ElementsAreEqual(e,o){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[o]&&(!this._hasStrings||this._originalStringElements[e]===this._modifiedStringElements[o])}ElementsAreStrictEqual(e,o){if(!this.ElementsAreEqual(e,o))return!1;const s=LcsDiff._getStrictElement(this._originalSequence,e),l=LcsDiff._getStrictElement(this._modifiedSequence,o);return s===l}static _getStrictElement(e,o){return"function"===typeof e.getStrictElement?e.getStrictElement(o):null}OriginalElementsAreEqual(e,o){return this._originalElementsOrHash[e]===this._originalElementsOrHash[o]&&(!this._hasStrings||this._originalStringElements[e]===this._originalStringElements[o])}ModifiedElementsAreEqual(e,o){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[o]&&(!this._hasStrings||this._modifiedStringElements[e]===this._modifiedStringElements[o])}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,o,s,l,d){const u=[!1];let g=this.ComputeDiffRecursive(e,o,s,l,u);return d&&(g=this.PrettifyChanges(g)),{quitEarly:u[0],changes:g}}ComputeDiffRecursive(e,o,s,l,d){d[0]=!1;while(e<=o&&s<=l&&this.ElementsAreEqual(e,s))e++,s++;while(o>=e&&l>=s&&this.ElementsAreEqual(o,l))o--,l--;if(e>o||s>l){let d;return s<=l?(Debug.Assert(e===o+1,"originalStart should only be one more than originalEnd"),d=[new DiffChange(e,0,s,l-s+1)]):e<=o?(Debug.Assert(s===l+1,"modifiedStart should only be one more than modifiedEnd"),d=[new DiffChange(e,o-e+1,s,0)]):(Debug.Assert(e===o+1,"originalStart should only be one more than originalEnd"),Debug.Assert(s===l+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}const u=[0],g=[0],p=this.ComputeRecursionPoint(e,o,s,l,u,g,d),m=u[0],f=g[0];if(null!==p)return p;if(!d[0]){const u=this.ComputeDiffRecursive(e,m,s,f,d);let g=[];return g=d[0]?[new DiffChange(m+1,o-(m+1)+1,f+1,l-(f+1)+1)]:this.ComputeDiffRecursive(m+1,o,f+1,l,d),this.ConcatenateChanges(u,g)}return[new DiffChange(e,o-e+1,s,l-s+1)]}WALKTRACE(e,o,s,l,d,u,g,p,m,f,_,C,b,w,S,y,L,x){let k=null,N=null,D=new DiffChangeHelper,E=o,T=s,I=b[0]-y[0]-l,A=-1073741824,M=this.m_forwardHistory.length-1;do{const o=I+e;o===E||o<T&&m[o-1]<m[o+1]?(_=m[o+1],w=_-I-l,_<A&&D.MarkNextChange(),A=_,D.AddModifiedElement(_+1,w),I=o+1-e):(_=m[o-1]+1,w=_-I-l,_<A&&D.MarkNextChange(),A=_-1,D.AddOriginalElement(_,w+1),I=o-1-e),M>=0&&(m=this.m_forwardHistory[M],e=m[0],E=1,T=m.length-1)}while(--M>=-1);if(k=D.getReverseChanges(),x[0]){let e=b[0]+1,o=y[0]+1;if(null!==k&&k.length>0){const s=k[k.length-1];e=Math.max(e,s.getOriginalEnd()),o=Math.max(o,s.getModifiedEnd())}N=[new DiffChange(e,C-e+1,o,S-o+1)]}else{D=new DiffChangeHelper,E=u,T=g,I=b[0]-y[0]-p,A=1073741824,M=L?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const e=I+d;e===E||e<T&&f[e-1]>=f[e+1]?(_=f[e+1]-1,w=_-I-p,_>A&&D.MarkNextChange(),A=_+1,D.AddOriginalElement(_+1,w+1),I=e+1-d):(_=f[e-1],w=_-I-p,_>A&&D.MarkNextChange(),A=_,D.AddModifiedElement(_+1,w+1),I=e-1-d),M>=0&&(f=this.m_reverseHistory[M],d=f[0],E=1,T=f.length-1)}while(--M>=-1);N=D.getChanges()}return this.ConcatenateChanges(k,N)}ComputeRecursionPoint(e,o,s,l,d,u,g){let p=0,m=0,f=0,_=0,C=0,b=0;e--,s--,d[0]=0,u[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const w=o-e+(l-s),S=w+1,y=new Int32Array(S),L=new Int32Array(S),x=l-s,k=o-e,N=e-s,D=o-l,E=k-x,T=E%2===0;y[x]=e,L[k]=o,g[0]=!1;for(let I=1;I<=w/2+1;I++){let w=0,E=0;f=this.ClipDiagonalBound(x-I,I,x,S),_=this.ClipDiagonalBound(x+I,I,x,S);for(let e=f;e<=_;e+=2){p=e===f||e<_&&y[e-1]<y[e+1]?y[e+1]:y[e-1]+1,m=p-(e-x)-N;const s=p;while(p<o&&m<l&&this.ElementsAreEqual(p+1,m+1))p++,m++;if(y[e]=p,p+m>w+E&&(w=p,E=m),!T&&Math.abs(e-k)<=I-1&&p>=L[e])return d[0]=p,u[0]=m,s<=L[e]&&I<=1448?this.WALKTRACE(x,f,_,N,k,C,b,D,y,L,p,o,d,m,l,u,T,g):null}const A=(w-e+(E-s)-I)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(w,A))return g[0]=!0,d[0]=w,u[0]=E,A>0&&I<=1448?this.WALKTRACE(x,f,_,N,k,C,b,D,y,L,p,o,d,m,l,u,T,g):(e++,s++,[new DiffChange(e,o-e+1,s,l-s+1)]);C=this.ClipDiagonalBound(k-I,I,k,S),b=this.ClipDiagonalBound(k+I,I,k,S);for(let S=C;S<=b;S+=2){p=S===C||S<b&&L[S-1]>=L[S+1]?L[S+1]-1:L[S-1],m=p-(S-k)-D;const w=p;while(p>e&&m>s&&this.ElementsAreEqual(p,m))p--,m--;if(L[S]=p,T&&Math.abs(S-x)<=I&&p<=y[S])return d[0]=p,u[0]=m,w>=y[S]&&I<=1448?this.WALKTRACE(x,f,_,N,k,C,b,D,y,L,p,o,d,m,l,u,T,g):null}if(I<=1447){let e=new Int32Array(_-f+2);e[0]=x-f+1,MyArray.Copy2(y,f,e,1,_-f+1),this.m_forwardHistory.push(e),e=new Int32Array(b-C+2),e[0]=k-C+1,MyArray.Copy2(L,C,e,1,b-C+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(x,f,_,N,k,C,b,D,y,L,p,o,d,m,l,u,T,g)}PrettifyChanges(e){for(let o=0;o<e.length;o++){const s=e[o],l=o<e.length-1?e[o+1].originalStart:this._originalElementsOrHash.length,d=o<e.length-1?e[o+1].modifiedStart:this._modifiedElementsOrHash.length,u=s.originalLength>0,g=s.modifiedLength>0;while(s.originalStart+s.originalLength<l&&s.modifiedStart+s.modifiedLength<d&&(!u||this.OriginalElementsAreEqual(s.originalStart,s.originalStart+s.originalLength))&&(!g||this.ModifiedElementsAreEqual(s.modifiedStart,s.modifiedStart+s.modifiedLength))){const e=this.ElementsAreStrictEqual(s.originalStart,s.modifiedStart),o=this.ElementsAreStrictEqual(s.originalStart+s.originalLength,s.modifiedStart+s.modifiedLength);if(o&&!e)break;s.originalStart++,s.modifiedStart++}let p=[null];o<e.length-1&&this.ChangesOverlap(e[o],e[o+1],p)&&(e[o]=p[0],e.splice(o+1,1),o--)}for(let o=e.length-1;o>=0;o--){const s=e[o];let l=0,d=0;if(o>0){const s=e[o-1];l=s.originalStart+s.originalLength,d=s.modifiedStart+s.modifiedLength}const u=s.originalLength>0,g=s.modifiedLength>0;let p=0,m=this._boundaryScore(s.originalStart,s.originalLength,s.modifiedStart,s.modifiedLength);for(let e=1;;e++){const o=s.originalStart-e,f=s.modifiedStart-e;if(o<l||f<d)break;if(u&&!this.OriginalElementsAreEqual(o,o+s.originalLength))break;if(g&&!this.ModifiedElementsAreEqual(f,f+s.modifiedLength))break;const _=o===l&&f===d,C=(_?5:0)+this._boundaryScore(o,s.originalLength,f,s.modifiedLength);C>m&&(m=C,p=e)}s.originalStart-=p,s.modifiedStart-=p;const f=[null];o>0&&this.ChangesOverlap(e[o-1],e[o],f)&&(e[o-1]=f[0],e.splice(o,1),o++)}if(this._hasStrings)for(let o=1,s=e.length;o<s;o++){const s=e[o-1],l=e[o],d=l.originalStart-s.originalStart-s.originalLength,u=s.originalStart,g=l.originalStart+l.originalLength,p=g-u,m=s.modifiedStart,f=l.modifiedStart+l.modifiedLength,_=f-m;if(d<5&&p<20&&_<20){const e=this._findBetterContiguousSequence(u,p,m,_,d);if(e){const[o,u]=e;o===s.originalStart+s.originalLength&&u===s.modifiedStart+s.modifiedLength||(s.originalLength=o-s.originalStart,s.modifiedLength=u-s.modifiedStart,l.originalStart=o+d,l.modifiedStart=u+d,l.originalLength=g-l.originalStart,l.modifiedLength=f-l.modifiedStart)}}}return e}_findBetterContiguousSequence(e,o,s,l,d){if(o<d||l<d)return null;const u=e+o-d+1,g=s+l-d+1;let p=0,m=0,f=0;for(let _=e;_<u;_++)for(let e=s;e<g;e++){const o=this._contiguousSequenceScore(_,e,d);o>0&&o>p&&(p=o,m=_,f=e)}return p>0?[m,f]:null}_contiguousSequenceScore(e,o,s){let l=0;for(let d=0;d<s;d++){if(!this.ElementsAreEqual(e+d,o+d))return 0;l+=this._originalStringElements[e+d].length}return l}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,o){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(o>0){const s=e+o;if(this._OriginalIsBoundary(s-1)||this._OriginalIsBoundary(s))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,o){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(o>0){const s=e+o;if(this._ModifiedIsBoundary(s-1)||this._ModifiedIsBoundary(s))return!0}return!1}_boundaryScore(e,o,s,l){const d=this._OriginalRegionIsBoundary(e,o)?1:0,u=this._ModifiedRegionIsBoundary(s,l)?1:0;return d+u}ConcatenateChanges(e,o){let s=[];if(0===e.length||0===o.length)return o.length>0?o:e;if(this.ChangesOverlap(e[e.length-1],o[0],s)){const l=new Array(e.length+o.length-1);return MyArray.Copy(e,0,l,0,e.length-1),l[e.length-1]=s[0],MyArray.Copy(o,1,l,e.length,o.length-1),l}{const s=new Array(e.length+o.length);return MyArray.Copy(e,0,s,0,e.length),MyArray.Copy(o,0,s,e.length,o.length),s}}ChangesOverlap(e,o,s){if(Debug.Assert(e.originalStart<=o.originalStart,"Left change is not less than or equal to right change"),Debug.Assert(e.modifiedStart<=o.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=o.originalStart||e.modifiedStart+e.modifiedLength>=o.modifiedStart){const l=e.originalStart;let d=e.originalLength;const u=e.modifiedStart;let g=e.modifiedLength;return e.originalStart+e.originalLength>=o.originalStart&&(d=o.originalStart+o.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=o.modifiedStart&&(g=o.modifiedStart+o.modifiedLength-e.modifiedStart),s[0]=new DiffChange(l,d,u,g),!0}return s[0]=null,!1}ClipDiagonalBound(e,o,s,l){if(e>=0&&e<l)return e;const d=s,u=l-s-1,g=o%2===0;if(e<0){const e=d%2===0;return g===e?0:1}{const e=u%2===0;return g===e?l-1:l-2}}}},7301:function(e,o,s){"use strict";s.d(o,{B8:function(){return NotSupportedError},Cp:function(){return onUnexpectedExternalError},F0:function(){return canceled},FU:function(){return CancellationError},L6:function(){return illegalState},b1:function(){return illegalArgument},dL:function(){return onUnexpectedError},n2:function(){return isCancellationError},ri:function(){return transformErrorForSerialization}});class ErrorHandler{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}emit(e){this.listeners.forEach((o=>{o(e)}))}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const l=new ErrorHandler;function onUnexpectedError(e){isCancellationError(e)||l.onUnexpectedError(e)}function onUnexpectedExternalError(e){isCancellationError(e)||l.onUnexpectedExternalError(e)}function transformErrorForSerialization(e){if(e instanceof Error){let{name:o,message:s}=e;const l=e.stacktrace||e.stack;return{$isError:!0,name:o,message:s,stack:l}}return e}const d="Canceled";function isCancellationError(e){return e instanceof CancellationError||e instanceof Error&&e.name===d&&e.message===d}class CancellationError extends Error{constructor(){super(d),this.name=this.message}}function canceled(){const e=new Error(d);return e.name=e.message,e}function illegalArgument(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function illegalState(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}class NotSupportedError extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}},4669:function(e,o,s){"use strict";s.d(o,{D0:function(){return DebounceEmitter},E7:function(){return EventBufferer},K3:function(){return PauseableEmitter},Q5:function(){return Emitter},ZD:function(){return Relay},ju:function(){return f}});var l=s(7301),d=s(5976),u=s(1741),g=s(4013);let p=!1,m=!1;var f;(function(e){function _addLeakageTraceLogic(e){if(m){const{onListenerDidAdd:o}=e,s=Stacktrace.create();let l=0;e.onListenerDidAdd=()=>{2===++l&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),s.print()),null===o||void 0===o||o()}}}function once(e){return(o,s=null,l)=>{let d,u=!1;return d=e((e=>{if(!u)return d?d.dispose():u=!0,o.call(s,e)}),null,l),u&&d.dispose(),d}}function map(e,o,s){return snapshot(((s,l=null,d)=>e((e=>s.call(l,o(e))),null,d)),s)}function forEach(e,o,s){return snapshot(((s,l=null,d)=>e((e=>{o(e),s.call(l,e)}),null,d)),s)}function filter(e,o,s){return snapshot(((s,l=null,d)=>e((e=>o(e)&&s.call(l,e)),null,d)),s)}function signal(e){return e}function any(...e){return(o,s=null,l)=>(0,d.F8)(...e.map((e=>e((e=>o.call(s,e)),null,l))))}function reduce(e,o,s,l){let d=s;return map(e,(e=>(d=o(d,e),d)),l)}function snapshot(e,o){let s;const l={onFirstListenerAdd(){s=e(d.fire,d)},onLastListenerRemove(){s.dispose()}};o||_addLeakageTraceLogic(l);const d=new Emitter(l);return o&&o.add(d),d.event}function debounce(e,o,s=100,l=!1,d,u){let g,p,m,f=0;const _={leakWarningThreshold:d,onFirstListenerAdd(){g=e((e=>{f++,p=o(p,e),l&&!m&&(C.fire(p),p=void 0),clearTimeout(m),m=setTimeout((()=>{const e=p;p=void 0,m=void 0,(!l||f>1)&&C.fire(e),f=0}),s)}))},onLastListenerRemove(){g.dispose()}};u||_addLeakageTraceLogic(_);const C=new Emitter(_);return u&&u.add(C),C.event}function latch(e,o=((e,o)=>e===o),s){let l,d=!0;return filter(e,(e=>{const s=d||!o(e,l);return d=!1,l=e,s}),s)}function split(o,s,l){return[e.filter(o,s,l),e.filter(o,(e=>!s(e)),l)]}function buffer(e,o=!1,s=[]){let l=s.slice(),d=e((e=>{l?l.push(e):u.fire(e)}));const flush=()=>{l&&l.forEach((e=>u.fire(e))),l=null},u=new Emitter({onFirstListenerAdd(){d||(d=e((e=>u.fire(e))))},onFirstListenerDidAdd(){l&&(o?setTimeout(flush):flush())},onLastListenerRemove(){d&&d.dispose(),d=null}});return u.event}e.None=()=>d.JT.None,e.once=once,e.map=map,e.forEach=forEach,e.filter=filter,e.signal=signal,e.any=any,e.reduce=reduce,e.debounce=debounce,e.latch=latch,e.split=split,e.buffer=buffer;class ChainableEvent{constructor(e){this.event=e}map(e){return new ChainableEvent(map(this.event,e))}forEach(e){return new ChainableEvent(forEach(this.event,e))}filter(e){return new ChainableEvent(filter(this.event,e))}reduce(e,o){return new ChainableEvent(reduce(this.event,e,o))}latch(){return new ChainableEvent(latch(this.event))}debounce(e,o=100,s=!1,l){return new ChainableEvent(debounce(this.event,e,o,s,l))}on(e,o,s){return this.event(e,o,s)}once(e,o,s){return once(this.event)(e,o,s)}}function chain(e){return new ChainableEvent(e)}function fromNodeEventEmitter(e,o,s=(e=>e)){const fn=(...e)=>l.fire(s(...e)),onFirstListenerAdd=()=>e.on(o,fn),onLastListenerRemove=()=>e.removeListener(o,fn),l=new Emitter({onFirstListenerAdd:onFirstListenerAdd,onLastListenerRemove:onLastListenerRemove});return l.event}function fromDOMEventEmitter(e,o,s=(e=>e)){const fn=(...e)=>l.fire(s(...e)),onFirstListenerAdd=()=>e.addEventListener(o,fn),onLastListenerRemove=()=>e.removeEventListener(o,fn),l=new Emitter({onFirstListenerAdd:onFirstListenerAdd,onLastListenerRemove:onLastListenerRemove});return l.event}function toPromise(e){return new Promise((o=>once(e)(o)))}function runAndSubscribe(e,o){return o(void 0),e((e=>o(e)))}function runAndSubscribeWithStore(e,o){let s=null;function run(e){null===s||void 0===s||s.dispose(),s=new d.SL,o(e,s)}run(void 0);const l=e((e=>run(e)));return(0,d.OF)((()=>{l.dispose(),null===s||void 0===s||s.dispose()}))}e.chain=chain,e.fromNodeEventEmitter=fromNodeEventEmitter,e.fromDOMEventEmitter=fromDOMEventEmitter,e.toPromise=toPromise,e.runAndSubscribe=runAndSubscribe,e.runAndSubscribeWithStore=runAndSubscribeWithStore})(f||(f={}));class EventProfiling{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${EventProfiling._idPool++}`}start(e){this._stopWatch=new g.G(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}EventProfiling._idPool=0;let _=-1;class LeakageMonitor{constructor(e,o=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=o,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(e,o){let s=_;if("number"===typeof this.customThreshold&&(s=this.customThreshold),s<=0||o<s)return;this._stacks||(this._stacks=new Map);const l=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,l+1),this._warnCountdown-=1,this._warnCountdown<=0){let e;this._warnCountdown=.5*s;let l=0;for(const[o,s]of this._stacks)(!e||l<s)&&(e=o,l=s);console.warn(`[${this.name}] potential listener LEAK detected, having ${o} listeners already. MOST frequent listener (${l}):`),console.warn(e)}return()=>{const o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}}class Stacktrace{constructor(e){this.value=e}static create(){var e;return new Stacktrace(null!==(e=(new Error).stack)&&void 0!==e?e:"")}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class Listener{constructor(e,o,s){this.callback=e,this.callbackThis=o,this.stack=s,this.subscription=new d.dt}invoke(e){this.callback.call(this.callbackThis,e)}}class Emitter{constructor(e){var o;this._disposed=!1,this._options=e,this._leakageMon=_>0?new LeakageMonitor(this._options&&this._options.leakWarningThreshold):void 0,this._perfMon=(null===(o=this._options)||void 0===o?void 0:o._profName)?new EventProfiling(this._options._profName):void 0}dispose(){var e,o,s,l;if(!this._disposed){if(this._disposed=!0,this._listeners){if(p){const e=Array.from(this._listeners);queueMicrotask((()=>{var o;for(const s of e)s.subscription.isset()&&(s.subscription.unset(),null===(o=s.stack)||void 0===o||o.print())}))}this._listeners.clear()}null===(e=this._deliveryQueue)||void 0===e||e.clear(),null===(s=null===(o=this._options)||void 0===o?void 0:o.onLastListenerRemove)||void 0===s||s.call(o),null===(l=this._leakageMon)||void 0===l||l.dispose()}}get event(){return this._event||(this._event=(e,o,s)=>{var l,g,m;this._listeners||(this._listeners=new u.S);const f=this._listeners.isEmpty();let _,C;f&&(null===(l=this._options)||void 0===l?void 0:l.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this),this._leakageMon&&this._listeners.size>=30&&(C=Stacktrace.create(),_=this._leakageMon.check(C,this._listeners.size+1)),p&&(C=null!==C&&void 0!==C?C:Stacktrace.create());const b=new Listener(e,o,C),w=this._listeners.push(b);f&&(null===(g=this._options)||void 0===g?void 0:g.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),(null===(m=this._options)||void 0===m?void 0:m.onListenerDidAdd)&&this._options.onListenerDidAdd(this,e,o);const S=b.subscription.set((()=>{if(_&&_(),!this._disposed&&(w(),this._options&&this._options.onLastListenerRemove)){const e=this._listeners&&!this._listeners.isEmpty();e||this._options.onLastListenerRemove(this)}}));return s instanceof d.SL?s.add(S):Array.isArray(s)&&s.push(S),S}),this._event}fire(e){var o,s;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new u.S);for(let o of this._listeners)this._deliveryQueue.push([o,e]);null===(o=this._perfMon)||void 0===o||o.start(this._deliveryQueue.size);while(this._deliveryQueue.size>0){const[e,o]=this._deliveryQueue.shift();try{e.invoke(o)}catch(d){(0,l.dL)(d)}}null===(s=this._perfMon)||void 0===s||s.stop()}}}class PauseableEmitter extends Emitter{constructor(e){super(e),this._isPaused=0,this._eventQueue=new u.S,this._mergeFn=null===e||void 0===e?void 0:e.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0===--this._isPaused)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else while(!this._isPaused&&0!==this._eventQueue.size)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}}class DebounceEmitter extends PauseableEmitter{constructor(e){var o;super(e),this._delay=null!==(o=e.delay)&&void 0!==o?o:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout((()=>{this._handle=void 0,this.resume()}),this._delay)),super.fire(e)}}class EventBufferer{constructor(){this.buffers=[]}wrapEvent(e){return(o,s,l)=>e((e=>{const l=this.buffers[this.buffers.length-1];l?l.push((()=>o.call(s,e))):o.call(s,e)}),void 0,l)}bufferEvents(e){const o=[];this.buffers.push(o);const s=e();return this.buffers.pop(),o.forEach((e=>e())),s}}class Relay{constructor(){this.listening=!1,this.inputEvent=f.None,this.inputEventListener=d.JT.None,this.emitter=new Emitter({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}},5527:function(e,o,s){"use strict";s.d(o,{KM:function(){return isEqualOrParent},ej:function(){return toSlashes},fn:function(){return toPosixPath},oP:function(){return hasDriveLetter},vY:function(){return isRootOrDriveLetter},yj:function(){return getRoot}});var l=s(5336),d=s(1432),u=s(2677);function isPathSeparator(e){return 47===e||92===e}function toSlashes(e){return e.replace(/[\\/]/g,l.KR.sep)}function toPosixPath(e){return-1===e.indexOf("/")&&(e=toSlashes(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function getRoot(e,o=l.KR.sep){if(!e)return"";const s=e.length,d=e.charCodeAt(0);if(isPathSeparator(d)){if(isPathSeparator(e.charCodeAt(1))&&!isPathSeparator(e.charCodeAt(2))){let l=3;const d=l;for(;l<s;l++)if(isPathSeparator(e.charCodeAt(l)))break;if(d!==l&&!isPathSeparator(e.charCodeAt(l+1)))for(l+=1;l<s;l++)if(isPathSeparator(e.charCodeAt(l)))return e.slice(0,l+1).replace(/[\\/]/g,o)}return o}if(isWindowsDriveLetter(d)&&58===e.charCodeAt(1))return isPathSeparator(e.charCodeAt(2))?e.slice(0,2)+o:e.slice(0,2);let u=e.indexOf("://");if(-1!==u)for(u+=3;u<s;u++)if(isPathSeparator(e.charCodeAt(u)))return e.slice(0,u+1);return""}function isEqualOrParent(e,o,s,d=l.ir){if(e===o)return!0;if(!e||!o)return!1;if(o.length>e.length)return!1;if(s){const s=(0,u.ok)(e,o);if(!s)return!1;if(o.length===e.length)return!0;let l=o.length;return o.charAt(o.length-1)===d&&l--,e.charAt(l)===d}return o.charAt(o.length-1)!==d&&(o+=d),0===e.indexOf(o)}function isWindowsDriveLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function isRootOrDriveLetter(e){const o=(0,l.Fv)(e);return d.ED?!(e.length>3)&&(hasDriveLetter(o)&&(2===e.length||92===o.charCodeAt(2))):o===l.KR.sep}function hasDriveLetter(e,o){const s=void 0!==o?o:d.ED;return!!s&&(isWindowsDriveLetter(e.charCodeAt(0))&&58===e.charCodeAt(1))}},5392:function(e,o,s){"use strict";s.d(o,{CL:function(){return x},EW:function(){return fuzzyScore},Ji:function(){return u},KZ:function(){return matchesWords},Oh:function(){return matchesFuzzy},ir:function(){return matchesContiguousSubString},jB:function(){return anyScore},l7:function(){return fuzzyScoreGracefulAggressive},mB:function(){return createMatches},or:function(){return or}});var l=s(3702),d=s(2677);function or(...e){return function(o,s){for(let l=0,d=e.length;l<d;l++){const d=e[l](o,s);if(d)return d}return null}}_matchesPrefix.bind(void 0,!1);const u=_matchesPrefix.bind(void 0,!0);function _matchesPrefix(e,o,s){if(!s||s.length<o.length)return null;let l;return l=e?d.ok(s,o):0===s.indexOf(o),l?o.length>0?[{start:0,end:o.length}]:[]:null}function matchesContiguousSubString(e,o){const s=o.toLowerCase().indexOf(e.toLowerCase());return-1===s?null:[{start:s,end:s+e.length}]}function matchesSubString(e,o){return _matchesSubString(e.toLowerCase(),o.toLowerCase(),0,0)}function _matchesSubString(e,o,s,l){if(s===e.length)return[];if(l===o.length)return null;if(e[s]===o[l]){let d=null;return(d=_matchesSubString(e,o,s+1,l+1))?join({start:l,end:l+1},d):null}return _matchesSubString(e,o,s,l+1)}function isLower(e){return 97<=e&&e<=122}function isUpper(e){return 65<=e&&e<=90}function isNumber(e){return 48<=e&&e<=57}function isWhitespace(e){return 32===e||9===e||10===e||13===e}const g=new Set;function isWordSeparator(e){return isWhitespace(e)||g.has(e)}function charactersMatch(e,o){return e===o||isWordSeparator(e)&&isWordSeparator(o)}function isAlphanumeric(e){return isLower(e)||isUpper(e)||isNumber(e)}function join(e,o){return 0===o.length?o=[e]:e.end===o[0].start?o[0].start=e.start:o.unshift(e),o}function nextAnchor(e,o){for(let s=o;s<e.length;s++){const o=e.charCodeAt(s);if(isUpper(o)||isNumber(o)||s>0&&!isAlphanumeric(e.charCodeAt(s-1)))return s}return e.length}function _matchesCamelCase(e,o,s,l){if(s===e.length)return[];if(l===o.length)return null;if(e[s]!==o[l].toLowerCase())return null;{let d=null,u=l+1;d=_matchesCamelCase(e,o,s+1,l+1);while(!d&&(u=nextAnchor(o,u))<o.length)d=_matchesCamelCase(e,o,s+1,u),u++;return null===d?null:join({start:l,end:l+1},d)}}function analyzeCamelCaseWord(e){let o=0,s=0,l=0,d=0,u=0;for(let _=0;_<e.length;_++)u=e.charCodeAt(_),isUpper(u)&&o++,isLower(u)&&s++,isAlphanumeric(u)&&l++,isNumber(u)&&d++;const g=o/e.length,p=s/e.length,m=l/e.length,f=d/e.length;return{upperPercent:g,lowerPercent:p,alphaPercent:m,numericPercent:f}}function isUpperCaseWord(e){const{upperPercent:o,lowerPercent:s}=e;return 0===s&&o>.6}function isCamelCaseWord(e){const{upperPercent:o,lowerPercent:s,alphaPercent:l,numericPercent:d}=e;return s>.2&&o<.8&&l>.6&&d<.2}function isCamelCasePattern(e){let o=0,s=0,l=0,d=0;for(let u=0;u<e.length;u++)l=e.charCodeAt(u),isUpper(l)&&o++,isLower(l)&&s++,isWhitespace(l)&&d++;return 0!==o&&0!==s||0!==d?o<=5:e.length<=30}function matchesCamelCase(e,o){if(!o)return null;if(o=o.trim(),0===o.length)return null;if(!isCamelCasePattern(e))return null;if(o.length>60)return null;const s=analyzeCamelCaseWord(o);if(!isCamelCaseWord(s)){if(!isUpperCaseWord(s))return null;o=o.toLowerCase()}let l=null,d=0;e=e.toLowerCase();while(d<o.length&&null===(l=_matchesCamelCase(e,o,0,d)))d=nextAnchor(o,d+1);return l}function matchesWords(e,o,s=!1){if(!o||0===o.length)return null;let l=null,d=0;e=e.toLowerCase(),o=o.toLowerCase();while(d<o.length&&null===(l=_matchesWords(e,o,0,d,s)))d=nextWord(o,d+1);return l}function _matchesWords(e,o,s,l,d){if(s===e.length)return[];if(l===o.length)return null;if(charactersMatch(e.charCodeAt(s),o.charCodeAt(l))){let u=null,g=l+1;if(u=_matchesWords(e,o,s+1,l+1,d),!d)while(!u&&(g=nextWord(o,g))<o.length)u=_matchesWords(e,o,s+1,g,d),g++;return null===u?null:join({start:l,end:l+1},u)}return null}function nextWord(e,o){for(let s=o;s<e.length;s++)if(isWordSeparator(e.charCodeAt(s))||s>0&&isWordSeparator(e.charCodeAt(s-1)))return s;return e.length}"()[]{}<>`'\"-/;:,.?!".split("").forEach((e=>g.add(e.charCodeAt(0))));const p=or(u,matchesCamelCase,matchesContiguousSubString),m=or(u,matchesCamelCase,matchesSubString),f=new l.z6(1e4);function matchesFuzzy(e,o,s=!1){if("string"!==typeof e||"string"!==typeof o)return null;let l=f.get(e);l||(l=new RegExp(d.un(e),"i"),f.set(e,l));const u=l.exec(o);return u?[{start:u.index,end:u.index+u[0].length}]:s?m(e,o):p(e,o)}function anyScore(e,o,s,l,d,u){const g=Math.min(13,e.length);for(;s<g;s++){const g=fuzzyScore(e,o,s,l,d,u,!1);if(g)return g}return[0,u]}function createMatches(e){if("undefined"===typeof e)return[];const o=[],s=e[1];for(let l=e.length-1;l>1;l--){const d=e[l]+s,u=o[o.length-1];u&&u.end===d?u.end=d+1:o.push({start:d,end:d+1})}return o}const _=128;function initTable(){const e=[],o=[];for(let s=0;s<=_;s++)o[s]=0;for(let s=0;s<=_;s++)e.push(o.slice(0));return e}function initArr(e){const o=[];for(let s=0;s<=e;s++)o[s]=0;return o}const C=initArr(2*_),b=initArr(2*_),w=initTable(),S=initTable(),y=initTable(),L=!1;function printTable(e,o,s,l,d){function pad(e,o,s=" "){while(e.length<o)e=s+e;return e}let u=` |   |${l.split("").map((e=>pad(e,3))).join("|")}\n`;for(let g=0;g<=s;g++)u+=0===g?" |":`${o[g-1]}|`,u+=e[g].slice(0,d+1).map((e=>pad(e.toString(),3))).join("|")+"\n";return u}function printTables(e,o,s,l){e=e.substr(o),s=s.substr(l),console.log(printTable(S,e,e.length,s,s.length)),console.log(printTable(y,e,e.length,s,s.length)),console.log(printTable(w,e,e.length,s,s.length))}function isSeparatorAtPos(e,o){if(o<0||o>=e.length)return!1;const s=e.codePointAt(o);switch(s){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!d.C8(s)}}function isWhitespaceAtPos(e,o){if(o<0||o>=e.length)return!1;const s=e.charCodeAt(o);switch(s){case 32:case 9:return!0;default:return!1}}function isUpperCaseAtPos(e,o,s){return o[e]!==s[e]}function isPatternInWord(e,o,s,l,d,u,g=!1){while(o<s&&d<u)e[o]===l[d]&&(g&&(C[o]=d),o+=1),d+=1;return o===s}var x;function fuzzyScore(e,o,s,l,d,u,g){const p=e.length>_?_:e.length,m=l.length>_?_:l.length;if(s>=p||u>=m||p-s>m-u)return;if(!isPatternInWord(o,s,p,d,u,m,!0))return;_fillInMaxWordMatchPos(p,m,s,u,o,d);let f=1,x=1,k=s,N=u;const D=[!1];for(f=1,k=s;k<p;f++,k++){const g=C[k],_=b[k],L=k+1<p?b[k+1]:m;for(x=g-u+1,N=g;N<L;x++,N++){let p=Number.MIN_SAFE_INTEGER,C=!1;N<=_&&(p=_doScore(e,o,k,s,l,d,N,m,u,0===w[f-1][x-1],D));let b=0;p!==Number.MAX_SAFE_INTEGER&&(C=!0,b=p+S[f-1][x-1]);const L=N>g,E=L?S[f][x-1]+(w[f][x-1]>0?-5:0):0,T=N>g+1&&w[f][x-1]>0,I=T?S[f][x-2]+(w[f][x-2]>0?-5:0):0;if(T&&(!L||I>=E)&&(!C||I>=b))S[f][x]=I,y[f][x]=3,w[f][x]=0;else if(L&&(!C||E>=b))S[f][x]=E,y[f][x]=2,w[f][x]=0;else{if(!C)throw new Error("not possible");S[f][x]=b,y[f][x]=1,w[f][x]=w[f-1][x-1]+1}}}if(L&&printTables(e,s,l,u),!D[0]&&!g)return;f--,x--;const E=[S[f][x],u];let T=0,I=0;while(f>=1){let e=x;do{const o=y[f][e];if(3===o)e-=2;else{if(2!==o)break;e-=1}}while(e>=1);T>1&&o[s+f-1]===d[u+x-1]&&!isUpperCaseAtPos(e+u-1,l,d)&&T+1>w[f][e]&&(e=x),e===x?T++:T=1,I||(I=e),f--,x=e-1,E.push(x)}m===p&&(E[0]+=2);const A=I-p;return E[0]-=A,E}function _fillInMaxWordMatchPos(e,o,s,l,d,u){let g=e-1,p=o-1;while(g>=s&&p>=l)d[g]===u[p]&&(b[g]=p,g--),p--}function _doScore(e,o,s,l,d,u,g,p,m,f,_){if(o[s]!==u[g])return Number.MIN_SAFE_INTEGER;let C=1,b=!1;return g===s-l?C=e[s]===d[g]?7:5:!isUpperCaseAtPos(g,d,u)||0!==g&&isUpperCaseAtPos(g-1,d,u)?!isSeparatorAtPos(u,g)||0!==g&&isSeparatorAtPos(u,g-1)?(isSeparatorAtPos(u,g-1)||isWhitespaceAtPos(u,g-1))&&(C=5,b=!0):C=5:(C=e[s]===d[g]?7:5,b=!0),C>1&&s===l&&(_[0]=!0),b||(b=isUpperCaseAtPos(g,d,u)||isSeparatorAtPos(u,g-1)||isWhitespaceAtPos(u,g-1)),s===l?g>m&&(C-=b?3:5):C+=f?b?2:0:b?0:1,g+1===p&&(C-=b?3:5),C}function fuzzyScoreGracefulAggressive(e,o,s,l,d,u,g){return fuzzyScoreWithPermutations(e,o,s,l,d,u,!0,g)}function fuzzyScoreWithPermutations(e,o,s,l,d,u,g,p){let m=fuzzyScore(e,o,s,l,d,u,p);if(m&&!g)return m;if(e.length>=3){const o=Math.min(7,e.length-1);for(let g=s+1;g<o;g++){const o=nextTypoPermutation(e,g);if(o){const e=fuzzyScore(o,o.toLowerCase(),s,l,d,u,p);e&&(e[0]-=3,(!m||e[0]>m[0])&&(m=e))}}}return m}function nextTypoPermutation(e,o){if(o+1>=e.length)return;const s=e[o],l=e[o+1];return s!==l?e.slice(0,o)+l+s+e.slice(o+2):void 0}(function(e){function isDefault(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}e.Default=[-100,0],e.isDefault=isDefault})(x||(x={}))},8289:function(e,o,s){"use strict";function once(e){const o=this;let s,l=!1;return function(){return l||(l=!0,s=e.apply(o,arguments)),s}}s.d(o,{I:function(){return once}})},9954:function(e,o,s){"use strict";s.d(o,{Cv:function(){return stringHash},SP:function(){return doHash},vp:function(){return hash},yP:function(){return StringSHA1}});var l=s(2677);function hash(e){return doHash(e,0)}function doHash(e,o){switch(typeof e){case"object":return null===e?numberHash(349,o):Array.isArray(e)?arrayHash(e,o):objectHash(e,o);case"string":return stringHash(e,o);case"boolean":return booleanHash(e,o);case"number":return numberHash(e,o);case"undefined":return numberHash(937,o);default:return numberHash(617,o)}}function numberHash(e,o){return(o<<5)-o+e|0}function booleanHash(e,o){return numberHash(e?433:863,o)}function stringHash(e,o){o=numberHash(149417,o);for(let s=0,l=e.length;s<l;s++)o=numberHash(e.charCodeAt(s),o);return o}function arrayHash(e,o){return o=numberHash(104579,o),e.reduce(((e,o)=>doHash(o,e)),o)}function objectHash(e,o){return o=numberHash(181387,o),Object.keys(e).sort().reduce(((o,s)=>(o=stringHash(s,o),doHash(e[s],o))),o)}function leftRotate(e,o,s=32){const l=s-o,d=~((1<<l)-1);return(e<<o|(d&e)>>>l)>>>0}function fill(e,o=0,s=e.byteLength,l=0){for(let d=0;d<s;d++)e[o+d]=l}function leftPad(e,o,s="0"){while(e.length<o)e=s+e;return e}function toHexString(e,o=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""):leftPad((e>>>0).toString(16),o/4)}class StringSHA1{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const o=e.length;if(0===o)return;const s=this._buff;let d,u,g=this._buffLen,p=this._leftoverHighSurrogate;0!==p?(d=p,u=-1,p=0):(d=e.charCodeAt(0),u=0);while(1){let m=d;if(l.ZG(d)){if(!(u+1<o)){p=d;break}{const o=e.charCodeAt(u+1);l.YK(o)?(u++,m=l.rL(d,o)):m=65533}}else l.YK(d)&&(m=65533);if(g=this._push(s,g,m),u++,!(u<o))break;d=e.charCodeAt(u)}this._buffLen=g,this._leftoverHighSurrogate=p}_push(e,o,s){return s<128?e[o++]=s:s<2048?(e[o++]=192|(1984&s)>>>6,e[o++]=128|(63&s)>>>0):s<65536?(e[o++]=224|(61440&s)>>>12,e[o++]=128|(4032&s)>>>6,e[o++]=128|(63&s)>>>0):(e[o++]=240|(1835008&s)>>>18,e[o++]=128|(258048&s)>>>12,e[o++]=128|(4032&s)>>>6,e[o++]=128|(63&s)>>>0),o>=64&&(this._step(),o-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),o}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),toHexString(this._h0)+toHexString(this._h1)+toHexString(this._h2)+toHexString(this._h3)+toHexString(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,fill(this._buff,this._buffLen),this._buffLen>56&&(this._step(),fill(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=StringSHA1._bigBlock32,o=this._buffDV;for(let _=0;_<64;_+=4)e.setUint32(_,o.getUint32(_,!1),!1);for(let _=64;_<320;_+=4)e.setUint32(_,leftRotate(e.getUint32(_-12,!1)^e.getUint32(_-32,!1)^e.getUint32(_-56,!1)^e.getUint32(_-64,!1),1),!1);let s,l,d,u=this._h0,g=this._h1,p=this._h2,m=this._h3,f=this._h4;for(let _=0;_<80;_++)_<20?(s=g&p|~g&m,l=1518500249):_<40?(s=g^p^m,l=1859775393):_<60?(s=g&p|g&m|p&m,l=2400959708):(s=g^p^m,l=3395469782),d=leftRotate(u,5)+s+f+l+e.getUint32(4*_,!1)&4294967295,f=m,m=p,p=leftRotate(g,30),g=u,u=d;this._h0=this._h0+u&4294967295,this._h1=this._h1+g&4294967295,this._h2=this._h2+p&4294967295,this._h3=this._h3+m&4294967295,this._h4=this._h4+f&4294967295}}StringSHA1._bigBlock32=new DataView(new ArrayBuffer(320))},9365:function(e,o,s){"use strict";s.d(o,{CP:function(){return isEmptyMarkdownString},Fr:function(){return isMarkdownString},W5:function(){return MarkdownString},oR:function(){return removeMarkdownEscapes},v1:function(){return parseHrefAndDimensions}});var l=s(7301),d=s(1212);class MarkdownString{constructor(e="",o=!1){var s,d,u;if(this.value=e,"string"!==typeof this.value)throw(0,l.b1)("value");"boolean"===typeof o?(this.isTrusted=o,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=null!==(s=o.isTrusted)&&void 0!==s?s:void 0,this.supportThemeIcons=null!==(d=o.supportThemeIcons)&&void 0!==d&&d,this.supportHtml=null!==(u=o.supportHtml)&&void 0!==u&&u)}appendText(e,o=0){return this.value+=escapeMarkdownSyntaxTokens(this.supportThemeIcons?(0,d.Qo)(e):e).replace(/([ \t]+)/g,((e,o)=>"&nbsp;".repeat(o.length))).replace(/\>/gm,"\\>").replace(/\n/g,1===o?"\\\n":"\n\n"),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,o){return this.value+="\n```",this.value+=e,this.value+="\n",this.value+=o,this.value+="\n```\n",this}}function isEmptyMarkdownString(e){return isMarkdownString(e)?!e.value:!Array.isArray(e)||e.every(isEmptyMarkdownString)}function isMarkdownString(e){return e instanceof MarkdownString||!(!e||"object"!==typeof e)&&("string"===typeof e.value&&("boolean"===typeof e.isTrusted||void 0===e.isTrusted)&&("boolean"===typeof e.supportThemeIcons||void 0===e.supportThemeIcons))}function escapeMarkdownSyntaxTokens(e){return e.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function removeMarkdownEscapes(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1"):e}function parseHrefAndDimensions(e){const o=[],s=e.split("|").map((e=>e.trim()));e=s[0];const l=s[1];if(l){const e=/height=(\d+)/.exec(l),s=/width=(\d+)/.exec(l),d=e?e[1]:"",u=s?s[1]:"",g=isFinite(parseInt(u)),p=isFinite(parseInt(d));g&&o.push(`width="${u}"`),p&&o.push(`height="${d}"`)}return{href:e,dimensions:o}}},1212:function(e,o,s){"use strict";s.d(o,{Gt:function(){return matchesFuzzyIconAware},Ho:function(){return parseLabelWithIcons},Qo:function(){return escapeIcons},f$:function(){return markdownEscapeEscapedIcons},x$:function(){return stripIcons}});var l=s(3046),d=s(5392),u=s(2677);const g="$(",p=new RegExp(`\\$\\(${l.dT.iconNameExpression}(?:${l.dT.iconModifierExpression})?\\)`,"g"),m=new RegExp(l.dT.iconNameCharacter),f=new RegExp(`(\\\\)?${p.source}`,"g");function escapeIcons(e){return e.replace(f,((e,o)=>o?e:`\\${e}`))}const _=new RegExp(`\\\\${p.source}`,"g");function markdownEscapeEscapedIcons(e){return e.replace(_,(e=>`\\${e}`))}const C=new RegExp(`(\\s)?(\\\\)?${p.source}(\\s)?`,"g");function stripIcons(e){return-1===e.indexOf(g)?e:e.replace(C,((e,o,s,l)=>s?e:o||l||""))}function parseLabelWithIcons(e){const o=e.indexOf(g);return-1===o?{text:e}:doParseLabelWithIcons(e,o)}function doParseLabelWithIcons(e,o){const s=[];let l="";function appendChars(e){if(e){l+=e;for(const o of e)s.push(_)}}let d,u,p=-1,f="",_=0,C=o;const b=e.length;appendChars(e.substr(0,o));while(C<b){if(d=e[C],u=e[C+1],d===g[0]&&u===g[1])p=C,appendChars(f),f=g,C++;else if(")"===d&&-1!==p){const e=C-p+1;_+=e,p=-1,f=""}else-1!==p?m.test(d)?f+=d:(appendChars(f),p=-1,f=""):appendChars(d);C++}return appendChars(f),{text:l,iconOffsets:s}}function matchesFuzzyIconAware(e,o,s=!1){const{text:l,iconOffsets:g}=o;if(!g||0===g.length)return(0,d.Oh)(e,l,s);const p=(0,u.j3)(l," "),m=l.length-p.length,f=(0,d.Oh)(e,p,s);if(f)for(const d of f){const e=g[d.start+m]+m;d.start+=e,d.end+=e}return f}},4742:function(e,o,s){"use strict";s.d(o,{R:function(){return IdGenerator},a:function(){return l}});class IdGenerator{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const l=new IdGenerator("id#")},3725:function(e,o,s){"use strict";var l;s.d(o,{$:function(){return l}}),function(e){function is(e){return e&&"object"===typeof e&&"function"===typeof e[Symbol.iterator]}e.is=is;const o=Object.freeze([]);function empty(){return o}function*single(e){yield e}function from(e){return e||o}function isEmpty(e){return!e||!0===e[Symbol.iterator]().next().done}function first(e){return e[Symbol.iterator]().next().value}function some(e,o){for(const s of e)if(o(s))return!0;return!1}function find(e,o){for(const s of e)if(o(s))return s}function*filter(e,o){for(const s of e)o(s)&&(yield s)}function*map(e,o){let s=0;for(const l of e)yield o(l,s++)}function*concat(...e){for(const o of e)for(const e of o)yield e}function*concatNested(e){for(const o of e)for(const e of o)yield e}function reduce(e,o,s){let l=s;for(const d of e)l=o(l,d);return l}function*slice(e,o,s=e.length){for(o<0&&(o+=e.length),s<0?s+=e.length:s>e.length&&(s=e.length);o<s;o++)yield e[o]}function consume(o,s=Number.POSITIVE_INFINITY){const l=[];if(0===s)return[l,o];const d=o[Symbol.iterator]();for(let u=0;u<s;u++){const o=d.next();if(o.done)return[l,e.empty()];l.push(o.value)}return[l,{[Symbol.iterator](){return d}}]}function equals(e,o,s=((e,o)=>e===o)){const l=e[Symbol.iterator](),d=o[Symbol.iterator]();while(1){const e=l.next(),o=d.next();if(e.done!==o.done)return!1;if(e.done)return!0;if(!s(e.value,o.value))return!1}}e.empty=empty,e.single=single,e.from=from,e.isEmpty=isEmpty,e.first=first,e.some=some,e.find=find,e.filter=filter,e.map=map,e.concat=concat,e.concatNested=concatNested,e.reduce=reduce,e.slice=slice,e.consume=consume,e.equals=equals}(l||(l={}))},2258:function(e,o,s){"use strict";s.d(o,{H_:function(){return g},Vd:function(){return C},gx:function(){return KeyChord},kL:function(){return w}});class KeyCodeStrMap{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,o){this._keyCodeToStr[e]=o,this._strToKeyCode[o.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const l=new KeyCodeStrMap,d=new KeyCodeStrMap,u=new KeyCodeStrMap,g=new Array(230),p={},m=[],f=Object.create(null),_=Object.create(null),C=[],b=[];for(let S=0;S<=193;S++)C[S]=-1;for(let S=0;S<=127;S++)b[S]=-1;var w;function KeyChord(e,o){const s=(65535&o)<<16>>>0;return(e|s)>>>0}(function(){const e="",o=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",e,e],[0,1,1,"Hyper",0,e,0,e,e,e],[0,1,2,"Super",0,e,0,e,e,e],[0,1,3,"Fn",0,e,0,e,e,e],[0,1,4,"FnLock",0,e,0,e,e,e],[0,1,5,"Suspend",0,e,0,e,e,e],[0,1,6,"Resume",0,e,0,e,e,e],[0,1,7,"Turbo",0,e,0,e,e,e],[0,1,8,"Sleep",0,e,0,"VK_SLEEP",e,e],[0,1,9,"WakeUp",0,e,0,e,e,e],[31,0,10,"KeyA",31,"A",65,"VK_A",e,e],[32,0,11,"KeyB",32,"B",66,"VK_B",e,e],[33,0,12,"KeyC",33,"C",67,"VK_C",e,e],[34,0,13,"KeyD",34,"D",68,"VK_D",e,e],[35,0,14,"KeyE",35,"E",69,"VK_E",e,e],[36,0,15,"KeyF",36,"F",70,"VK_F",e,e],[37,0,16,"KeyG",37,"G",71,"VK_G",e,e],[38,0,17,"KeyH",38,"H",72,"VK_H",e,e],[39,0,18,"KeyI",39,"I",73,"VK_I",e,e],[40,0,19,"KeyJ",40,"J",74,"VK_J",e,e],[41,0,20,"KeyK",41,"K",75,"VK_K",e,e],[42,0,21,"KeyL",42,"L",76,"VK_L",e,e],[43,0,22,"KeyM",43,"M",77,"VK_M",e,e],[44,0,23,"KeyN",44,"N",78,"VK_N",e,e],[45,0,24,"KeyO",45,"O",79,"VK_O",e,e],[46,0,25,"KeyP",46,"P",80,"VK_P",e,e],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",e,e],[48,0,27,"KeyR",48,"R",82,"VK_R",e,e],[49,0,28,"KeyS",49,"S",83,"VK_S",e,e],[50,0,29,"KeyT",50,"T",84,"VK_T",e,e],[51,0,30,"KeyU",51,"U",85,"VK_U",e,e],[52,0,31,"KeyV",52,"V",86,"VK_V",e,e],[53,0,32,"KeyW",53,"W",87,"VK_W",e,e],[54,0,33,"KeyX",54,"X",88,"VK_X",e,e],[55,0,34,"KeyY",55,"Y",89,"VK_Y",e,e],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",e,e],[22,0,36,"Digit1",22,"1",49,"VK_1",e,e],[23,0,37,"Digit2",23,"2",50,"VK_2",e,e],[24,0,38,"Digit3",24,"3",51,"VK_3",e,e],[25,0,39,"Digit4",25,"4",52,"VK_4",e,e],[26,0,40,"Digit5",26,"5",53,"VK_5",e,e],[27,0,41,"Digit6",27,"6",54,"VK_6",e,e],[28,0,42,"Digit7",28,"7",55,"VK_7",e,e],[29,0,43,"Digit8",29,"8",56,"VK_8",e,e],[30,0,44,"Digit9",30,"9",57,"VK_9",e,e],[21,0,45,"Digit0",21,"0",48,"VK_0",e,e],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",e,e],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",e,e],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",e,e],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",e,e],[10,1,50,"Space",10,"Space",32,"VK_SPACE",e,e],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,e,0,e,e,e],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",e,e],[59,1,64,"F1",59,"F1",112,"VK_F1",e,e],[60,1,65,"F2",60,"F2",113,"VK_F2",e,e],[61,1,66,"F3",61,"F3",114,"VK_F3",e,e],[62,1,67,"F4",62,"F4",115,"VK_F4",e,e],[63,1,68,"F5",63,"F5",116,"VK_F5",e,e],[64,1,69,"F6",64,"F6",117,"VK_F6",e,e],[65,1,70,"F7",65,"F7",118,"VK_F7",e,e],[66,1,71,"F8",66,"F8",119,"VK_F8",e,e],[67,1,72,"F9",67,"F9",120,"VK_F9",e,e],[68,1,73,"F10",68,"F10",121,"VK_F10",e,e],[69,1,74,"F11",69,"F11",122,"VK_F11",e,e],[70,1,75,"F12",70,"F12",123,"VK_F12",e,e],[0,1,76,"PrintScreen",0,e,0,e,e,e],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",e,e],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",e,e],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",e,e],[14,1,80,"Home",14,"Home",36,"VK_HOME",e,e],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",e,e],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",e,e],[13,1,83,"End",13,"End",35,"VK_END",e,e],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",e,e],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",e],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",e],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",e],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",e],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",e,e],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",e,e],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",e,e],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",e,e],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",e,e],[3,1,94,"NumpadEnter",3,e,0,e,e,e],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",e,e],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",e,e],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",e,e],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",e,e],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",e,e],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",e,e],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",e,e],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",e,e],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",e,e],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",e,e],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",e,e],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",e,e],[58,1,107,"ContextMenu",58,"ContextMenu",93,e,e,e],[0,1,108,"Power",0,e,0,e,e,e],[0,1,109,"NumpadEqual",0,e,0,e,e,e],[71,1,110,"F13",71,"F13",124,"VK_F13",e,e],[72,1,111,"F14",72,"F14",125,"VK_F14",e,e],[73,1,112,"F15",73,"F15",126,"VK_F15",e,e],[74,1,113,"F16",74,"F16",127,"VK_F16",e,e],[75,1,114,"F17",75,"F17",128,"VK_F17",e,e],[76,1,115,"F18",76,"F18",129,"VK_F18",e,e],[77,1,116,"F19",77,"F19",130,"VK_F19",e,e],[0,1,117,"F20",0,e,0,"VK_F20",e,e],[0,1,118,"F21",0,e,0,"VK_F21",e,e],[0,1,119,"F22",0,e,0,"VK_F22",e,e],[0,1,120,"F23",0,e,0,"VK_F23",e,e],[0,1,121,"F24",0,e,0,"VK_F24",e,e],[0,1,122,"Open",0,e,0,e,e,e],[0,1,123,"Help",0,e,0,e,e,e],[0,1,124,"Select",0,e,0,e,e,e],[0,1,125,"Again",0,e,0,e,e,e],[0,1,126,"Undo",0,e,0,e,e,e],[0,1,127,"Cut",0,e,0,e,e,e],[0,1,128,"Copy",0,e,0,e,e,e],[0,1,129,"Paste",0,e,0,e,e,e],[0,1,130,"Find",0,e,0,e,e,e],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",e,e],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",e,e],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",e,e],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",e,e],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",e,e],[0,1,136,"KanaMode",0,e,0,e,e,e],[0,0,137,"IntlYen",0,e,0,e,e,e],[0,1,138,"Convert",0,e,0,e,e,e],[0,1,139,"NonConvert",0,e,0,e,e,e],[0,1,140,"Lang1",0,e,0,e,e,e],[0,1,141,"Lang2",0,e,0,e,e,e],[0,1,142,"Lang3",0,e,0,e,e,e],[0,1,143,"Lang4",0,e,0,e,e,e],[0,1,144,"Lang5",0,e,0,e,e,e],[0,1,145,"Abort",0,e,0,e,e,e],[0,1,146,"Props",0,e,0,e,e,e],[0,1,147,"NumpadParenLeft",0,e,0,e,e,e],[0,1,148,"NumpadParenRight",0,e,0,e,e,e],[0,1,149,"NumpadBackspace",0,e,0,e,e,e],[0,1,150,"NumpadMemoryStore",0,e,0,e,e,e],[0,1,151,"NumpadMemoryRecall",0,e,0,e,e,e],[0,1,152,"NumpadMemoryClear",0,e,0,e,e,e],[0,1,153,"NumpadMemoryAdd",0,e,0,e,e,e],[0,1,154,"NumpadMemorySubtract",0,e,0,e,e,e],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",e,e],[0,1,156,"NumpadClearEntry",0,e,0,e,e,e],[5,1,0,e,5,"Ctrl",17,"VK_CONTROL",e,e],[4,1,0,e,4,"Shift",16,"VK_SHIFT",e,e],[6,1,0,e,6,"Alt",18,"VK_MENU",e,e],[57,1,0,e,57,"Meta",0,"VK_COMMAND",e,e],[5,1,157,"ControlLeft",5,e,0,"VK_LCONTROL",e,e],[4,1,158,"ShiftLeft",4,e,0,"VK_LSHIFT",e,e],[6,1,159,"AltLeft",6,e,0,"VK_LMENU",e,e],[57,1,160,"MetaLeft",57,e,0,"VK_LWIN",e,e],[5,1,161,"ControlRight",5,e,0,"VK_RCONTROL",e,e],[4,1,162,"ShiftRight",4,e,0,"VK_RSHIFT",e,e],[6,1,163,"AltRight",6,e,0,"VK_RMENU",e,e],[57,1,164,"MetaRight",57,e,0,"VK_RWIN",e,e],[0,1,165,"BrightnessUp",0,e,0,e,e,e],[0,1,166,"BrightnessDown",0,e,0,e,e,e],[0,1,167,"MediaPlay",0,e,0,e,e,e],[0,1,168,"MediaRecord",0,e,0,e,e,e],[0,1,169,"MediaFastForward",0,e,0,e,e,e],[0,1,170,"MediaRewind",0,e,0,e,e,e],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",e,e],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",e,e],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",e,e],[0,1,174,"Eject",0,e,0,e,e,e],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",e,e],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",e,e],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",e,e],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",e,e],[0,1,179,"LaunchApp1",0,e,0,"VK_MEDIA_LAUNCH_APP1",e,e],[0,1,180,"SelectTask",0,e,0,e,e,e],[0,1,181,"LaunchScreenSaver",0,e,0,e,e,e],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",e,e],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",e,e],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",e,e],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",e,e],[0,1,186,"BrowserStop",0,e,0,"VK_BROWSER_STOP",e,e],[0,1,187,"BrowserRefresh",0,e,0,"VK_BROWSER_REFRESH",e,e],[0,1,188,"BrowserFavorites",0,e,0,"VK_BROWSER_FAVORITES",e,e],[0,1,189,"ZoomToggle",0,e,0,e,e,e],[0,1,190,"MailReply",0,e,0,e,e,e],[0,1,191,"MailForward",0,e,0,e,e,e],[0,1,192,"MailSend",0,e,0,e,e,e],[109,1,0,e,109,"KeyInComposition",229,e,e,e],[111,1,0,e,111,"ABNT_C2",194,"VK_ABNT_C2",e,e],[91,1,0,e,91,"OEM_8",223,"VK_OEM_8",e,e],[0,1,0,e,0,e,0,"VK_KANA",e,e],[0,1,0,e,0,e,0,"VK_HANGUL",e,e],[0,1,0,e,0,e,0,"VK_JUNJA",e,e],[0,1,0,e,0,e,0,"VK_FINAL",e,e],[0,1,0,e,0,e,0,"VK_HANJA",e,e],[0,1,0,e,0,e,0,"VK_KANJI",e,e],[0,1,0,e,0,e,0,"VK_CONVERT",e,e],[0,1,0,e,0,e,0,"VK_NONCONVERT",e,e],[0,1,0,e,0,e,0,"VK_ACCEPT",e,e],[0,1,0,e,0,e,0,"VK_MODECHANGE",e,e],[0,1,0,e,0,e,0,"VK_SELECT",e,e],[0,1,0,e,0,e,0,"VK_PRINT",e,e],[0,1,0,e,0,e,0,"VK_EXECUTE",e,e],[0,1,0,e,0,e,0,"VK_SNAPSHOT",e,e],[0,1,0,e,0,e,0,"VK_HELP",e,e],[0,1,0,e,0,e,0,"VK_APPS",e,e],[0,1,0,e,0,e,0,"VK_PROCESSKEY",e,e],[0,1,0,e,0,e,0,"VK_PACKET",e,e],[0,1,0,e,0,e,0,"VK_DBE_SBCSCHAR",e,e],[0,1,0,e,0,e,0,"VK_DBE_DBCSCHAR",e,e],[0,1,0,e,0,e,0,"VK_ATTN",e,e],[0,1,0,e,0,e,0,"VK_CRSEL",e,e],[0,1,0,e,0,e,0,"VK_EXSEL",e,e],[0,1,0,e,0,e,0,"VK_EREOF",e,e],[0,1,0,e,0,e,0,"VK_PLAY",e,e],[0,1,0,e,0,e,0,"VK_ZOOM",e,e],[0,1,0,e,0,e,0,"VK_NONAME",e,e],[0,1,0,e,0,e,0,"VK_PA1",e,e],[0,1,0,e,0,e,0,"VK_OEM_CLEAR",e,e]];let s=[],w=[];for(const S of o){const[e,o,y,L,x,k,N,D,E,T]=S;if(w[y]||(w[y]=!0,m[y]=L,f[L]=y,_[L.toLowerCase()]=y,o&&(C[y]=x,0!==x&&3!==x&&5!==x&&4!==x&&6!==x&&57!==x&&(b[x]=y))),!s[x]){if(s[x]=!0,!k)throw new Error(`String representation missing for key code ${x} around scan code ${L}`);l.define(x,k),d.define(x,E||k),u.define(x,T||E||k)}N&&(g[N]=x),D&&(p[D]=x)}b[3]=46})(),function(e){function toString(e){return l.keyCodeToStr(e)}function fromString(e){return l.strToKeyCode(e)}function toUserSettingsUS(e){return d.keyCodeToStr(e)}function toUserSettingsGeneral(e){return u.keyCodeToStr(e)}function fromUserSettings(e){return d.strToKeyCode(e)||u.strToKeyCode(e)}function toElectronAccelerator(e){if(e>=93&&e<=108)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return l.keyCodeToStr(e)}e.toString=toString,e.fromString=fromString,e.toUserSettingsUS=toUserSettingsUS,e.toUserSettingsGeneral=toUserSettingsGeneral,e.fromUserSettings=fromUserSettings,e.toElectronAccelerator=toElectronAccelerator}(w||(w={}))},8030:function(e,o,s){"use strict";s.d(o,{X4:function(){return u},jC:function(){return g},xo:function(){return d}});var l=s(3580);class ModifierLabelProvider{constructor(e,o,s=o){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=o,this.modifierLabels[3]=s}toLabel(e,o,s){if(0===o.length)return null;const l=[];for(let d=0,u=o.length;d<u;d++){const u=o[d],g=s(u);if(null===g)return null;l[d]=_simpleAsString(u,g,this.modifierLabels[e])}return l.join(" ")}}const d=new ModifierLabelProvider({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:l.N({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:l.N({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:l.N({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:l.N({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:l.N({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:l.N({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:l.N({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:l.N({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),u=new ModifierLabelProvider({ctrlKey:l.N({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:l.N({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:l.N({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:l.N({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:l.N({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:l.N({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:l.N({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:l.N({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:l.N({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:l.N({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:l.N({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:l.N({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),g=new ModifierLabelProvider({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});new ModifierLabelProvider({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function _simpleAsString(e,o,s){if(null===o)return"";const l=[];return e.ctrlKey&&l.push(s.ctrlKey),e.shiftKey&&l.push(s.shiftKey),e.altKey&&l.push(s.altKey),e.metaKey&&l.push(s.metaKey),""!==o&&l.push(o),l.join(s.separator)}},8313:function(e,o,s){"use strict";s.d(o,{BQ:function(){return ResolvedKeybindingPart},QC:function(){return SimpleKeybinding},X_:function(){return ChordKeybinding},f1:function(){return ResolvedKeybinding},gm:function(){return createKeybinding}});var l=s(7301);function createKeybinding(e,o){if(0===e)return null;const s=(65535&e)>>>0,l=(4294901760&e)>>>16;return new ChordKeybinding(0!==l?[createSimpleKeybinding(s,o),createSimpleKeybinding(l,o)]:[createSimpleKeybinding(s,o)])}function createSimpleKeybinding(e,o){const s=!!(2048&e),l=!!(256&e),d=2===o?l:s,u=!!(1024&e),g=!!(512&e),p=2===o?s:l,m=255&e;return new SimpleKeybinding(d,u,g,p,m)}class SimpleKeybinding{constructor(e,o,s,l,d){this.ctrlKey=e,this.shiftKey=o,this.altKey=s,this.metaKey=l,this.keyCode=d}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}toChord(){return new ChordKeybinding([this])}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}class ChordKeybinding{constructor(e){if(0===e.length)throw(0,l.b1)("parts");this.parts=e}}class ResolvedKeybindingPart{constructor(e,o,s,l,d,u){this.ctrlKey=e,this.shiftKey=o,this.altKey=s,this.metaKey=l,this.keyLabel=d,this.keyAriaLabel=u}}class ResolvedKeybinding{}},8843:function(e,o,s){"use strict";s.d(o,{D:function(){return normalizeDriveLetter},p:function(){return getBaseLabel}});var l=s(5527),d=s(6663),u=s(1432),g=s(5935),p=s(666);function getBaseLabel(e){if(!e)return;"string"===typeof e&&(e=p.o.file(e));const o=(0,g.EZ)(e)||(e.scheme===d.lg.file?e.fsPath:e.path);return u.ED&&(0,l.vY)(o)?normalizeDriveLetter(o):o}function normalizeDriveLetter(e,o){return(0,l.oP)(e,o)?e.charAt(0).toUpperCase()+e.slice(1):e}Object.create(null)},9579:function(e,o,s){"use strict";s.d(o,{o:function(){return Lazy}});class Lazy{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}},5976:function(e,o,s){"use strict";s.d(o,{B9:function(){return dispose},F8:function(){return combinedDisposable},JT:function(){return Disposable},Jz:function(){return ImmortalReference},OF:function(){return toDisposable},SL:function(){return DisposableStore},Wf:function(){return isDisposable},XK:function(){return MutableDisposable},dk:function(){return markAsSingleton},dt:function(){return SafeDisposable}});var l=s(8289),d=s(3725);const u=!1;let g=null;function setDisposableTracker(e){g=e}if(u){const e="__is_disposable_tracked__";setDisposableTracker(new class{trackDisposable(o){const s=new Error("Potentially leaked disposable").stack;setTimeout((()=>{o[e]||console.log(s)}),3e3)}setParent(o,s){if(o&&o!==Disposable.None)try{o[e]=!0}catch(l){}}markAsDisposed(o){if(o&&o!==Disposable.None)try{o[e]=!0}catch(s){}}markAsSingleton(e){}})}function trackDisposable(e){return null===g||void 0===g||g.trackDisposable(e),e}function markAsDisposed(e){null===g||void 0===g||g.markAsDisposed(e)}function setParentOfDisposable(e,o){null===g||void 0===g||g.setParent(e,o)}function setParentOfDisposables(e,o){if(g)for(const s of e)g.setParent(s,o)}function markAsSingleton(e){return null===g||void 0===g||g.markAsSingleton(e),e}class MultiDisposeError extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function isDisposable(e){return"function"===typeof e.dispose&&0===e.dispose.length}function dispose(e){if(d.$.is(e)){let s=[];for(const l of e)if(l)try{l.dispose()}catch(o){s.push(o)}if(1===s.length)throw s[0];if(s.length>1)throw new MultiDisposeError(s);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function combinedDisposable(...e){const o=toDisposable((()=>dispose(e)));return setParentOfDisposables(e,o),o}function toDisposable(e){const o=trackDisposable({dispose:(0,l.I)((()=>{markAsDisposed(o),e()}))});return o}class DisposableStore{constructor(){this._toDispose=new Set,this._isDisposed=!1,trackDisposable(this)}dispose(){this._isDisposed||(markAsDisposed(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{dispose(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return setParentOfDisposable(e,this),this._isDisposed?DisposableStore.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}DisposableStore.DISABLE_DISPOSED_WARNING=!1;class Disposable{constructor(){this._store=new DisposableStore,trackDisposable(this),setParentOfDisposable(this._store,this)}dispose(){markAsDisposed(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Disposable.None=Object.freeze({dispose(){}});class MutableDisposable{constructor(){this._isDisposed=!1,trackDisposable(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var o;this._isDisposed||e===this._value||(null===(o=this._value)||void 0===o||o.dispose(),e&&setParentOfDisposable(e,this),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,markAsDisposed(this),null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e&&setParentOfDisposable(e,null),e}}class SafeDisposable{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1,trackDisposable(this)}set(e){let o=e;return this.unset=()=>o=void 0,this.isset=()=>void 0!==o,this.dispose=()=>{o&&(o(),o=void 0,markAsDisposed(this))},this}}class ImmortalReference{constructor(e){this.object=e}dispose(){}}},1741:function(e,o,s){"use strict";s.d(o,{S:function(){return LinkedList}});class Node{constructor(e){this.element=e,this.next=Node.Undefined,this.prev=Node.Undefined}}Node.Undefined=new Node(void 0);class LinkedList{constructor(){this._first=Node.Undefined,this._last=Node.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Node.Undefined}clear(){let e=this._first;while(e!==Node.Undefined){const o=e.next;e.prev=Node.Undefined,e.next=Node.Undefined,e=o}this._first=Node.Undefined,this._last=Node.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,o){const s=new Node(e);if(this._first===Node.Undefined)this._first=s,this._last=s;else if(o){const e=this._last;this._last=s,s.prev=e,e.next=s}else{const e=this._first;this._first=s,s.next=e,e.prev=s}this._size+=1;let l=!1;return()=>{l||(l=!0,this._remove(s))}}shift(){if(this._first!==Node.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Node.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Node.Undefined&&e.next!==Node.Undefined){const o=e.prev;o.next=e.next,e.next.prev=o}else e.prev===Node.Undefined&&e.next===Node.Undefined?(this._first=Node.Undefined,this._last=Node.Undefined):e.next===Node.Undefined?(this._last=this._last.prev,this._last.next=Node.Undefined):e.prev===Node.Undefined&&(this._first=this._first.next,this._first.prev=Node.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;while(e!==Node.Undefined)yield e.element,e=e.next}}},3702:function(e,o,s){"use strict";s.d(o,{Id:function(){return TernarySearchTree},Y9:function(){return ResourceMap},z6:function(){return LRUCache}});var l,d,u=s(2677);class StringIterator{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const o=e.charCodeAt(0),s=this._value.charCodeAt(this._pos);return o-s}value(){return this._value[this._pos]}}class ConfigKeysIterator{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const o=this._value.charCodeAt(this._to);if(46===o){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?(0,u.TT)(e,this._value,0,e.length,this._from,this._to):(0,u.j_)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class PathIterator{constructor(e=!0,o=!0){this._splitOnBackslash=e,this._caseSensitive=o}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let o=e.length-1;o>=0;o--,this._valueLen--){const e=this._value.charCodeAt(o);if(!(47===e||this._splitOnBackslash&&92===e))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const o=this._value.charCodeAt(this._to);if(47===o||this._splitOnBackslash&&92===o){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?(0,u.TT)(e,this._value,0,e.length,this._from,this._to):(0,u.j_)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class UriIterator{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new PathIterator(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return(0,u.zY)(e,this._value.scheme);if(2===this._states[this._stateIdx])return(0,u.zY)(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return(0,u.qu)(e,this._value.query);if(5===this._states[this._stateIdx])return(0,u.qu)(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}}class TernarySearchTreeNode{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,o;return null!==(o=null===(e=this.left)||void 0===e?void 0:e.height)&&void 0!==o?o:0}get heightRight(){var e,o;return null!==(o=null===(e=this.right)||void 0===e?void 0:e.height)&&void 0!==o?o:0}}class TernarySearchTree{constructor(e){this._iter=e}static forUris(e=(()=>!1)){return new TernarySearchTree(new UriIterator(e))}static forStrings(){return new TernarySearchTree(new StringIterator)}static forConfigKeys(){return new TernarySearchTree(new ConfigKeysIterator)}clear(){this._root=void 0}set(e,o){const s=this._iter.reset(e);let l;this._root||(this._root=new TernarySearchTreeNode,this._root.segment=s.value());const d=[];l=this._root;while(1){const e=s.cmp(l.segment);if(e>0)l.left||(l.left=new TernarySearchTreeNode,l.left.segment=s.value()),d.push([-1,l]),l=l.left;else if(e<0)l.right||(l.right=new TernarySearchTreeNode,l.right.segment=s.value()),d.push([1,l]),l=l.right;else{if(!s.hasNext())break;s.next(),l.mid||(l.mid=new TernarySearchTreeNode,l.mid.segment=s.value()),d.push([0,l]),l=l.mid}}const u=l.value;l.value=o,l.key=e;for(let g=d.length-1;g>=0;g--){const e=d[g][1];e.updateHeight();const o=e.balanceFactor();if(o<-1||o>1){const o=d[g][0],s=d[g+1][0];if(1===o&&1===s)d[g][1]=e.rotateLeft();else if(-1===o&&-1===s)d[g][1]=e.rotateRight();else if(1===o&&-1===s)e.right=d[g+1][1]=d[g+1][1].rotateRight(),d[g][1]=e.rotateLeft();else{if(-1!==o||1!==s)throw new Error;e.left=d[g+1][1]=d[g+1][1].rotateLeft(),d[g][1]=e.rotateRight()}if(g>0)switch(d[g-1][0]){case-1:d[g-1][1].left=d[g][1];break;case 1:d[g-1][1].right=d[g][1];break;case 0:d[g-1][1].mid=d[g][1];break}else this._root=d[0][1]}}return u}get(e){var o;return null===(o=this._getNode(e))||void 0===o?void 0:o.value}_getNode(e){const o=this._iter.reset(e);let s=this._root;while(s){const e=o.cmp(s.segment);if(e>0)s=s.left;else if(e<0)s=s.right;else{if(!o.hasNext())break;o.next(),s=s.mid}}return s}has(e){const o=this._getNode(e);return!(void 0===(null===o||void 0===o?void 0:o.value)&&void 0===(null===o||void 0===o?void 0:o.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,o){var s;const l=this._iter.reset(e),d=[];let u=this._root;while(u){const e=l.cmp(u.segment);if(e>0)d.push([-1,u]),u=u.left;else if(e<0)d.push([1,u]),u=u.right;else{if(!l.hasNext())break;l.next(),d.push([0,u]),u=u.mid}}if(u){if(o?(u.left=void 0,u.mid=void 0,u.right=void 0,u.height=1):(u.key=void 0,u.value=void 0),!u.mid&&!u.value)if(u.left&&u.right){const e=this._min(u.right),{key:o,value:s,segment:l}=e;this._delete(e.key,!1),u.key=o,u.value=s,u.segment=l}else{const e=null!==(s=u.left)&&void 0!==s?s:u.right;if(d.length>0){const[o,s]=d[d.length-1];switch(o){case-1:s.left=e;break;case 0:s.mid=e;break;case 1:s.right=e;break}}else this._root=e}for(let e=d.length-1;e>=0;e--){const o=d[e][1];o.updateHeight();const s=o.balanceFactor();if(s>1?(o.right.balanceFactor()>=0||(o.right=o.right.rotateRight()),d[e][1]=o.rotateLeft()):s<-1&&(o.left.balanceFactor()<=0||(o.left=o.left.rotateLeft()),d[e][1]=o.rotateRight()),e>0)switch(d[e-1][0]){case-1:d[e-1][1].left=d[e][1];break;case 1:d[e-1][1].right=d[e][1];break;case 0:d[e-1][1].mid=d[e][1];break}else this._root=d[0][1]}}}_min(e){while(e.left)e=e.left;return e}findSubstr(e){const o=this._iter.reset(e);let s,l=this._root;while(l){const e=o.cmp(l.segment);if(e>0)l=l.left;else if(e<0)l=l.right;else{if(!o.hasNext())break;o.next(),s=l.value||s,l=l.mid}}return l&&l.value||s}findSuperstr(e){const o=this._iter.reset(e);let s=this._root;while(s){const e=o.cmp(s.segment);if(e>0)s=s.left;else if(e<0)s=s.right;else{if(!o.hasNext())return s.mid?this._entries(s.mid):void 0;o.next(),s=s.mid}}}forEach(e){for(const[o,s]of this)e(s,o)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class ResourceMapEntry{constructor(e,o){this.uri=e,this.value=o}}class ResourceMap{constructor(e,o){this[l]="ResourceMap",e instanceof ResourceMap?(this.map=new Map(e.map),this.toKey=null!==o&&void 0!==o?o:ResourceMap.defaultToKey):(this.map=new Map,this.toKey=null!==e&&void 0!==e?e:ResourceMap.defaultToKey)}set(e,o){return this.map.set(this.toKey(e),new ResourceMapEntry(e,o)),this}get(e){var o;return null===(o=this.map.get(this.toKey(e)))||void 0===o?void 0:o.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,o){"undefined"!==typeof o&&(e=e.bind(o));for(let[s,l]of this.map)e(l.value,l.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(l=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}ResourceMap.defaultToKey=e=>e.toString();class LinkedMap{constructor(){this[d]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,o=0){const s=this._map.get(e);if(s)return 0!==o&&this.touch(s,o),s.value}set(e,o,s=0){let l=this._map.get(e);if(l)l.value=o,0!==s&&this.touch(l,s);else{switch(l={key:e,value:o,next:void 0,previous:void 0},s){case 0:this.addItemLast(l);break;case 1:this.addItemFirst(l);break;case 2:this.addItemLast(l);break;default:this.addItemLast(l);break}this._map.set(e,l),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const o=this._map.get(e);if(o)return this._map.delete(e),this.removeItem(o),this._size--,o.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,o){const s=this._state;let l=this._head;while(l){if(o?e.bind(o)(l.value,l.key,this):e(l.value,l.key,this),this._state!==s)throw new Error("LinkedMap got modified during iteration.");l=l.next}}keys(){const e=this,o=this._state;let s=this._head;const l={[Symbol.iterator](){return l},next(){if(e._state!==o)throw new Error("LinkedMap got modified during iteration.");if(s){const e={value:s.key,done:!1};return s=s.next,e}return{value:void 0,done:!0}}};return l}values(){const e=this,o=this._state;let s=this._head;const l={[Symbol.iterator](){return l},next(){if(e._state!==o)throw new Error("LinkedMap got modified during iteration.");if(s){const e={value:s.value,done:!1};return s=s.next,e}return{value:void 0,done:!0}}};return l}entries(){const e=this,o=this._state;let s=this._head;const l={[Symbol.iterator](){return l},next(){if(e._state!==o)throw new Error("LinkedMap got modified during iteration.");if(s){const e={value:[s.key,s.value],done:!1};return s=s.next,e}return{value:void 0,done:!0}}};return l}[(d=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let o=this._head,s=this.size;while(o&&s>e)this._map.delete(o.key),o=o.next,s--;this._head=o,this._size=s,o&&(o.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const o=e.next,s=e.previous;if(!o||!s)throw new Error("Invalid list");o.previous=s,s.next=o}e.next=void 0,e.previous=void 0,this._state++}touch(e,o){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===o||2===o)if(1===o){if(e===this._head)return;const o=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(o.previous=s,s.next=o),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===o){if(e===this._tail)return;const o=e.next,s=e.previous;e===this._head?(o.previous=void 0,this._head=o):(o.previous=s,s.next=o),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((o,s)=>{e.push([s,o])})),e}fromJSON(e){this.clear();for(const[o,s]of e)this.set(o,s)}}class LRUCache extends LinkedMap{constructor(e,o=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,o),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,o=2){return super.get(e,o)}peek(e){return super.get(e,0)}set(e,o){return super.set(e,o,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},3897:function(e,o,s){"use strict";s.d(o,{Q:function(){return parse}});var l=s(3060),d=s(666);function parse(e){let o=JSON.parse(e);return o=revive(o),o}function revive(e,o=0){if(!e||o>200)return e;if("object"===typeof e){switch(e.$mid){case 1:return d.o.revive(e);case 2:return new RegExp(e.source,e.flags);case 14:return new Date(e.source)}if(e instanceof l.KN||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let s=0;s<e.length;++s)e[s]=revive(e[s],o+1);else for(const s in e)Object.hasOwnProperty.call(e,s)&&(e[s]=revive(e[s],o+1))}return e}},1170:function(e,o,s){"use strict";var l;s.d(o,{v:function(){return l}}),function(e){e.text="text/plain",e.binary="application/octet-stream",e.unknown="application/unknown",e.markdown="text/markdown",e.latex="text/latex",e.uriList="text/uri-list"}(l||(l={}))},6663:function(e,o,s){"use strict";s.d(o,{Gi:function(){return m},WX:function(){return p},lg:function(){return l}});var l,d=s(1432),u=s(666);(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.userData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebook="vscode-notebook",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeInteractive="vscode-interactive",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls"})(l||(l={}));const g="tkn";class RemoteAuthoritiesImpl{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const o=e.authority;let s=this._hosts[o];s&&-1!==s.indexOf(":")&&(s=`[${s}]`);const p=this._ports[o],m=this._connectionTokens[o];let f=`path=${encodeURIComponent(e.path)}`;return"string"===typeof m&&(f+=`&${g}=${encodeURIComponent(m)}`),u.o.from({scheme:d.$L?this._preferredWebSchema:l.vscodeRemoteResource,authority:`${s}:${p}`,path:"/vscode-remote-resource",query:f})}}const p=new RemoteAuthoritiesImpl;class FileAccessImpl{asBrowserUri(e,o){const s=this.toUri(e,o);return s.scheme===l.vscodeRemote?p.rewrite(s):s.scheme===l.file&&(d.tY||d.n2&&d.li.origin===`${l.vscodeFileResource}://${FileAccessImpl.FALLBACK_AUTHORITY}`)?s.with({scheme:l.vscodeFileResource,authority:s.authority||FileAccessImpl.FALLBACK_AUTHORITY,query:null,fragment:null}):s}toUri(e,o){return u.o.isUri(e)?e:u.o.parse(o.toUrl(e))}}FileAccessImpl.FALLBACK_AUTHORITY="vscode-app";const m=new FileAccessImpl},9870:function(e,o,s){"use strict";function clamp(e,o,s){return Math.min(Math.max(e,o),s)}s.d(o,{N:function(){return SlidingWindowAverage},nM:function(){return MovingAverage},uZ:function(){return clamp}});class MovingAverage{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class SlidingWindowAverage{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const o=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=o,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}},6248:function(e,o,s){"use strict";s.d(o,{CJ:function(){return getOrDefault},I8:function(){return deepClone},_A:function(){return deepFreeze},fS:function(){return equals},jB:function(){return mixin},rs:function(){return cloneAndChange}});var l=s(8401);function deepClone(e){if(!e||"object"!==typeof e)return e;if(e instanceof RegExp)return e;const o=Array.isArray(e)?[]:{};return Object.keys(e).forEach((s=>{e[s]&&"object"===typeof e[s]?o[s]=deepClone(e[s]):o[s]=e[s]})),o}function deepFreeze(e){if(!e||"object"!==typeof e)return e;const o=[e];while(o.length>0){const e=o.shift();Object.freeze(e);for(const s in e)if(d.call(e,s)){const l=e[s];"object"!==typeof l||Object.isFrozen(l)||o.push(l)}}return e}const d=Object.prototype.hasOwnProperty;function cloneAndChange(e,o){return _cloneAndChange(e,o,new Set)}function _cloneAndChange(e,o,s){if((0,l.Jp)(e))return e;const u=o(e);if("undefined"!==typeof u)return u;if((0,l.kJ)(e)){const l=[];for(const d of e)l.push(_cloneAndChange(d,o,s));return l}if((0,l.Kn)(e)){if(s.has(e))throw new Error("Cannot clone recursive data-structure");s.add(e);const l={};for(let u in e)d.call(e,u)&&(l[u]=_cloneAndChange(e[u],o,s));return s.delete(e),l}return e}function mixin(e,o,s=!0){return(0,l.Kn)(e)?((0,l.Kn)(o)&&Object.keys(o).forEach((d=>{d in e?s&&((0,l.Kn)(e[d])&&(0,l.Kn)(o[d])?mixin(e[d],o[d],s):e[d]=o[d]):e[d]=o[d]})),e):o}function equals(e,o){if(e===o)return!0;if(null===e||void 0===e||null===o||void 0===o)return!1;if(typeof e!==typeof o)return!1;if("object"!==typeof e)return!1;if(Array.isArray(e)!==Array.isArray(o))return!1;let s,l;if(Array.isArray(e)){if(e.length!==o.length)return!1;for(s=0;s<e.length;s++)if(!equals(e[s],o[s]))return!1}else{const d=[];for(l in e)d.push(l);d.sort();const u=[];for(l in o)u.push(l);if(u.sort(),!equals(d,u))return!1;for(s=0;s<d.length;s++)if(!equals(e[d[s]],o[d[s]]))return!1}return!0}function getOrDefault(e,o,s){const l=o(e);return"undefined"===typeof l?s:l}},5336:function(e,o,s){"use strict";s.d(o,{EZ:function(){return T},XX:function(){return E},DZ:function(){return I},Fv:function(){return k},KR:function(){return x},Gf:function(){return D},DB:function(){return N},ir:function(){return A},Ku:function(){return L}});var l=s(1432);let d;if("undefined"!==typeof l.li.vscode&&"undefined"!==typeof l.li.vscode.process){const e=l.li.vscode.process;d={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else d="undefined"!==typeof process?{get platform(){return process.platform},get arch(){return process.arch},get env(){return{NODE_ENV:"production",BASE_URL:""}},cwd(){return{NODE_ENV:"production",BASE_URL:""}["VSCODE_CWD"]||process.cwd()}}:{get platform(){return l.ED?"win32":l.dz?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const u=d.cwd,g=(d.env,d.platform),p=65,m=97,f=90,_=122,C=46,b=47,w=92,S=58,y=63;class ErrorInvalidArgType extends Error{constructor(e,o,s){let l;"string"===typeof o&&0===o.indexOf("not ")?(l="must not be",o=o.replace(/^not /,"")):l="must be";const d=-1!==e.indexOf(".")?"property":"argument";let u=`The "${e}" ${d} ${l} of type ${o}`;u+=". Received type "+typeof s,super(u),this.code="ERR_INVALID_ARG_TYPE"}}function validateString(e,o){if("string"!==typeof e)throw new ErrorInvalidArgType(o,"string",e)}function isPathSeparator(e){return e===b||e===w}function isPosixPathSeparator(e){return e===b}function isWindowsDeviceRoot(e){return e>=p&&e<=f||e>=m&&e<=_}function normalizeString(e,o,s,l){let d="",u=0,g=-1,p=0,m=0;for(let f=0;f<=e.length;++f){if(f<e.length)m=e.charCodeAt(f);else{if(l(m))break;m=b}if(l(m)){if(g===f-1||1===p);else if(2===p){if(d.length<2||2!==u||d.charCodeAt(d.length-1)!==C||d.charCodeAt(d.length-2)!==C){if(d.length>2){const e=d.lastIndexOf(s);-1===e?(d="",u=0):(d=d.slice(0,e),u=d.length-1-d.lastIndexOf(s)),g=f,p=0;continue}if(0!==d.length){d="",u=0,g=f,p=0;continue}}o&&(d+=d.length>0?`${s}..`:"..",u=2)}else d.length>0?d+=`${s}${e.slice(g+1,f)}`:d=e.slice(g+1,f),u=f-g-1;g=f,p=0}else m===C&&-1!==p?++p:p=-1}return d}function _format(e,o){if(null===o||"object"!==typeof o)throw new ErrorInvalidArgType("pathObject","Object",o);const s=o.dir||o.root,l=o.base||`${o.name||""}${o.ext||""}`;return s?s===o.root?`${s}${l}`:`${s}${e}${l}`:l}const L={resolve(...e){let o="",s="",l=!1;for(let d=e.length-1;d>=-1;d--){let g;if(d>=0){if(g=e[d],validateString(g,"path"),0===g.length)continue}else 0===o.length?g=u():(g={NODE_ENV:"production",BASE_URL:""}[`=${o}`]||u(),(void 0===g||g.slice(0,2).toLowerCase()!==o.toLowerCase()&&g.charCodeAt(2)===w)&&(g=`${o}\\`));const p=g.length;let m=0,f="",_=!1;const C=g.charCodeAt(0);if(1===p)isPathSeparator(C)&&(m=1,_=!0);else if(isPathSeparator(C))if(_=!0,isPathSeparator(g.charCodeAt(1))){let e=2,o=e;while(e<p&&!isPathSeparator(g.charCodeAt(e)))e++;if(e<p&&e!==o){const s=g.slice(o,e);o=e;while(e<p&&isPathSeparator(g.charCodeAt(e)))e++;if(e<p&&e!==o){o=e;while(e<p&&!isPathSeparator(g.charCodeAt(e)))e++;e!==p&&e===o||(f=`\\\\${s}\\${g.slice(o,e)}`,m=e)}}}else m=1;else isWindowsDeviceRoot(C)&&g.charCodeAt(1)===S&&(f=g.slice(0,2),m=2,p>2&&isPathSeparator(g.charCodeAt(2))&&(_=!0,m=3));if(f.length>0)if(o.length>0){if(f.toLowerCase()!==o.toLowerCase())continue}else o=f;if(l){if(o.length>0)break}else if(s=`${g.slice(m)}\\${s}`,l=_,_&&o.length>0)break}return s=normalizeString(s,!l,"\\",isPathSeparator),l?`${o}\\${s}`:`${o}${s}`||"."},normalize(e){validateString(e,"path");const o=e.length;if(0===o)return".";let s,l=0,d=!1;const u=e.charCodeAt(0);if(1===o)return isPosixPathSeparator(u)?"\\":e;if(isPathSeparator(u))if(d=!0,isPathSeparator(e.charCodeAt(1))){let d=2,u=d;while(d<o&&!isPathSeparator(e.charCodeAt(d)))d++;if(d<o&&d!==u){const g=e.slice(u,d);u=d;while(d<o&&isPathSeparator(e.charCodeAt(d)))d++;if(d<o&&d!==u){u=d;while(d<o&&!isPathSeparator(e.charCodeAt(d)))d++;if(d===o)return`\\\\${g}\\${e.slice(u)}\\`;d!==u&&(s=`\\\\${g}\\${e.slice(u,d)}`,l=d)}}}else l=1;else isWindowsDeviceRoot(u)&&e.charCodeAt(1)===S&&(s=e.slice(0,2),l=2,o>2&&isPathSeparator(e.charCodeAt(2))&&(d=!0,l=3));let g=l<o?normalizeString(e.slice(l),!d,"\\",isPathSeparator):"";return 0!==g.length||d||(g="."),g.length>0&&isPathSeparator(e.charCodeAt(o-1))&&(g+="\\"),void 0===s?d?`\\${g}`:g:d?`${s}\\${g}`:`${s}${g}`},isAbsolute(e){validateString(e,"path");const o=e.length;if(0===o)return!1;const s=e.charCodeAt(0);return isPathSeparator(s)||o>2&&isWindowsDeviceRoot(s)&&e.charCodeAt(1)===S&&isPathSeparator(e.charCodeAt(2))},join(...e){if(0===e.length)return".";let o,s;for(let u=0;u<e.length;++u){const l=e[u];validateString(l,"path"),l.length>0&&(void 0===o?o=s=l:o+=`\\${l}`)}if(void 0===o)return".";let l=!0,d=0;if("string"===typeof s&&isPathSeparator(s.charCodeAt(0))){++d;const e=s.length;e>1&&isPathSeparator(s.charCodeAt(1))&&(++d,e>2&&(isPathSeparator(s.charCodeAt(2))?++d:l=!1))}if(l){while(d<o.length&&isPathSeparator(o.charCodeAt(d)))d++;d>=2&&(o=`\\${o.slice(d)}`)}return L.normalize(o)},relative(e,o){if(validateString(e,"from"),validateString(o,"to"),e===o)return"";const s=L.resolve(e),l=L.resolve(o);if(s===l)return"";if(e=s.toLowerCase(),o=l.toLowerCase(),e===o)return"";let d=0;while(d<e.length&&e.charCodeAt(d)===w)d++;let u=e.length;while(u-1>d&&e.charCodeAt(u-1)===w)u--;const g=u-d;let p=0;while(p<o.length&&o.charCodeAt(p)===w)p++;let m=o.length;while(m-1>p&&o.charCodeAt(m-1)===w)m--;const f=m-p,_=g<f?g:f;let C=-1,b=0;for(;b<_;b++){const s=e.charCodeAt(d+b);if(s!==o.charCodeAt(p+b))break;s===w&&(C=b)}if(b!==_){if(-1===C)return l}else{if(f>_){if(o.charCodeAt(p+b)===w)return l.slice(p+b+1);if(2===b)return l.slice(p+b)}g>_&&(e.charCodeAt(d+b)===w?C=b:2===b&&(C=3)),-1===C&&(C=0)}let S="";for(b=d+C+1;b<=u;++b)b!==u&&e.charCodeAt(b)!==w||(S+=0===S.length?"..":"\\..");return p+=C,S.length>0?`${S}${l.slice(p,m)}`:(l.charCodeAt(p)===w&&++p,l.slice(p,m))},toNamespacedPath(e){if("string"!==typeof e)return e;if(0===e.length)return"";const o=L.resolve(e);if(o.length<=2)return e;if(o.charCodeAt(0)===w){if(o.charCodeAt(1)===w){const e=o.charCodeAt(2);if(e!==y&&e!==C)return`\\\\?\\UNC\\${o.slice(2)}`}}else if(isWindowsDeviceRoot(o.charCodeAt(0))&&o.charCodeAt(1)===S&&o.charCodeAt(2)===w)return`\\\\?\\${o}`;return e},dirname(e){validateString(e,"path");const o=e.length;if(0===o)return".";let s=-1,l=0;const d=e.charCodeAt(0);if(1===o)return isPathSeparator(d)?e:".";if(isPathSeparator(d)){if(s=l=1,isPathSeparator(e.charCodeAt(1))){let d=2,u=d;while(d<o&&!isPathSeparator(e.charCodeAt(d)))d++;if(d<o&&d!==u){u=d;while(d<o&&isPathSeparator(e.charCodeAt(d)))d++;if(d<o&&d!==u){u=d;while(d<o&&!isPathSeparator(e.charCodeAt(d)))d++;if(d===o)return e;d!==u&&(s=l=d+1)}}}}else isWindowsDeviceRoot(d)&&e.charCodeAt(1)===S&&(s=o>2&&isPathSeparator(e.charCodeAt(2))?3:2,l=s);let u=-1,g=!0;for(let p=o-1;p>=l;--p)if(isPathSeparator(e.charCodeAt(p))){if(!g){u=p;break}}else g=!1;if(-1===u){if(-1===s)return".";u=s}return e.slice(0,u)},basename(e,o){void 0!==o&&validateString(o,"ext"),validateString(e,"path");let s,l=0,d=-1,u=!0;if(e.length>=2&&isWindowsDeviceRoot(e.charCodeAt(0))&&e.charCodeAt(1)===S&&(l=2),void 0!==o&&o.length>0&&o.length<=e.length){if(o===e)return"";let g=o.length-1,p=-1;for(s=e.length-1;s>=l;--s){const m=e.charCodeAt(s);if(isPathSeparator(m)){if(!u){l=s+1;break}}else-1===p&&(u=!1,p=s+1),g>=0&&(m===o.charCodeAt(g)?-1===--g&&(d=s):(g=-1,d=p))}return l===d?d=p:-1===d&&(d=e.length),e.slice(l,d)}for(s=e.length-1;s>=l;--s)if(isPathSeparator(e.charCodeAt(s))){if(!u){l=s+1;break}}else-1===d&&(u=!1,d=s+1);return-1===d?"":e.slice(l,d)},extname(e){validateString(e,"path");let o=0,s=-1,l=0,d=-1,u=!0,g=0;e.length>=2&&e.charCodeAt(1)===S&&isWindowsDeviceRoot(e.charCodeAt(0))&&(o=l=2);for(let p=e.length-1;p>=o;--p){const o=e.charCodeAt(p);if(isPathSeparator(o)){if(!u){l=p+1;break}}else-1===d&&(u=!1,d=p+1),o===C?-1===s?s=p:1!==g&&(g=1):-1!==s&&(g=-1)}return-1===s||-1===d||0===g||1===g&&s===d-1&&s===l+1?"":e.slice(s,d)},format:_format.bind(null,"\\"),parse(e){validateString(e,"path");const o={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return o;const s=e.length;let l=0,d=e.charCodeAt(0);if(1===s)return isPathSeparator(d)?(o.root=o.dir=e,o):(o.base=o.name=e,o);if(isPathSeparator(d)){if(l=1,isPathSeparator(e.charCodeAt(1))){let o=2,d=o;while(o<s&&!isPathSeparator(e.charCodeAt(o)))o++;if(o<s&&o!==d){d=o;while(o<s&&isPathSeparator(e.charCodeAt(o)))o++;if(o<s&&o!==d){d=o;while(o<s&&!isPathSeparator(e.charCodeAt(o)))o++;o===s?l=o:o!==d&&(l=o+1)}}}}else if(isWindowsDeviceRoot(d)&&e.charCodeAt(1)===S){if(s<=2)return o.root=o.dir=e,o;if(l=2,isPathSeparator(e.charCodeAt(2))){if(3===s)return o.root=o.dir=e,o;l=3}}l>0&&(o.root=e.slice(0,l));let u=-1,g=l,p=-1,m=!0,f=e.length-1,_=0;for(;f>=l;--f)if(d=e.charCodeAt(f),isPathSeparator(d)){if(!m){g=f+1;break}}else-1===p&&(m=!1,p=f+1),d===C?-1===u?u=f:1!==_&&(_=1):-1!==u&&(_=-1);return-1!==p&&(-1===u||0===_||1===_&&u===p-1&&u===g+1?o.base=o.name=e.slice(g,p):(o.name=e.slice(g,u),o.base=e.slice(g,p),o.ext=e.slice(u,p))),o.dir=g>0&&g!==l?e.slice(0,g-1):o.root,o},sep:"\\",delimiter:";",win32:null,posix:null},x={resolve(...e){let o="",s=!1;for(let l=e.length-1;l>=-1&&!s;l--){const d=l>=0?e[l]:u();validateString(d,"path"),0!==d.length&&(o=`${d}/${o}`,s=d.charCodeAt(0)===b)}return o=normalizeString(o,!s,"/",isPosixPathSeparator),s?`/${o}`:o.length>0?o:"."},normalize(e){if(validateString(e,"path"),0===e.length)return".";const o=e.charCodeAt(0)===b,s=e.charCodeAt(e.length-1)===b;return e=normalizeString(e,!o,"/",isPosixPathSeparator),0===e.length?o?"/":s?"./":".":(s&&(e+="/"),o?`/${e}`:e)},isAbsolute(e){return validateString(e,"path"),e.length>0&&e.charCodeAt(0)===b},join(...e){if(0===e.length)return".";let o;for(let s=0;s<e.length;++s){const l=e[s];validateString(l,"path"),l.length>0&&(void 0===o?o=l:o+=`/${l}`)}return void 0===o?".":x.normalize(o)},relative(e,o){if(validateString(e,"from"),validateString(o,"to"),e===o)return"";if(e=x.resolve(e),o=x.resolve(o),e===o)return"";const s=1,l=e.length,d=l-s,u=1,g=o.length-u,p=d<g?d:g;let m=-1,f=0;for(;f<p;f++){const l=e.charCodeAt(s+f);if(l!==o.charCodeAt(u+f))break;l===b&&(m=f)}if(f===p)if(g>p){if(o.charCodeAt(u+f)===b)return o.slice(u+f+1);if(0===f)return o.slice(u+f)}else d>p&&(e.charCodeAt(s+f)===b?m=f:0===f&&(m=0));let _="";for(f=s+m+1;f<=l;++f)f!==l&&e.charCodeAt(f)!==b||(_+=0===_.length?"..":"/..");return`${_}${o.slice(u+m)}`},toNamespacedPath(e){return e},dirname(e){if(validateString(e,"path"),0===e.length)return".";const o=e.charCodeAt(0)===b;let s=-1,l=!0;for(let d=e.length-1;d>=1;--d)if(e.charCodeAt(d)===b){if(!l){s=d;break}}else l=!1;return-1===s?o?"/":".":o&&1===s?"//":e.slice(0,s)},basename(e,o){void 0!==o&&validateString(o,"ext"),validateString(e,"path");let s,l=0,d=-1,u=!0;if(void 0!==o&&o.length>0&&o.length<=e.length){if(o===e)return"";let g=o.length-1,p=-1;for(s=e.length-1;s>=0;--s){const m=e.charCodeAt(s);if(m===b){if(!u){l=s+1;break}}else-1===p&&(u=!1,p=s+1),g>=0&&(m===o.charCodeAt(g)?-1===--g&&(d=s):(g=-1,d=p))}return l===d?d=p:-1===d&&(d=e.length),e.slice(l,d)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===b){if(!u){l=s+1;break}}else-1===d&&(u=!1,d=s+1);return-1===d?"":e.slice(l,d)},extname(e){validateString(e,"path");let o=-1,s=0,l=-1,d=!0,u=0;for(let g=e.length-1;g>=0;--g){const p=e.charCodeAt(g);if(p!==b)-1===l&&(d=!1,l=g+1),p===C?-1===o?o=g:1!==u&&(u=1):-1!==o&&(u=-1);else if(!d){s=g+1;break}}return-1===o||-1===l||0===u||1===u&&o===l-1&&o===s+1?"":e.slice(o,l)},format:_format.bind(null,"/"),parse(e){validateString(e,"path");const o={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return o;const s=e.charCodeAt(0)===b;let l;s?(o.root="/",l=1):l=0;let d=-1,u=0,g=-1,p=!0,m=e.length-1,f=0;for(;m>=l;--m){const o=e.charCodeAt(m);if(o!==b)-1===g&&(p=!1,g=m+1),o===C?-1===d?d=m:1!==f&&(f=1):-1!==d&&(f=-1);else if(!p){u=m+1;break}}if(-1!==g){const l=0===u&&s?1:u;-1===d||0===f||1===f&&d===g-1&&d===u+1?o.base=o.name=e.slice(l,g):(o.name=e.slice(l,d),o.base=e.slice(l,g),o.ext=e.slice(d,g))}return u>0?o.dir=e.slice(0,u-1):s&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};x.win32=L.win32=L,x.posix=L.posix=x;const k="win32"===g?L.normalize:x.normalize,N="win32"===g?L.resolve:x.resolve,D="win32"===g?L.relative:x.relative,E="win32"===g?L.dirname:x.dirname,T="win32"===g?L.basename:x.basename,I="win32"===g?L.extname:x.extname,A="win32"===g?L.sep:x.sep},1432:function(e,o,s){"use strict";var l;s.d(o,{$L:function(){return P},ED:function(){return I},G6:function(){return G},IJ:function(){return M},OS:function(){return H},dK:function(){return W},dz:function(){return A},fn:function(){return V},gn:function(){return F},i7:function(){return K},li:function(){return k},n2:function(){return O},r:function(){return isLittleEndian},tY:function(){return R},un:function(){return q},vU:function(){return j}});const d="en";let u,g,p=!1,m=!1,f=!1,_=!1,C=!1,b=!1,w=!1,S=!1,y=!1,L=d,x=null;const k="object"===typeof self?self:"object"===typeof s.g?s.g:{};let N;"undefined"!==typeof k.vscode&&"undefined"!==typeof k.vscode.process?N=k.vscode.process:"undefined"!==typeof process&&(N=process);const D="string"===typeof(null===(l=null===N||void 0===N?void 0:N.versions)||void 0===l?void 0:l.electron),E=D&&"renderer"===(null===N||void 0===N?void 0:N.type);if("object"!==typeof navigator||E)if("object"===typeof N){p="win32"===N.platform,m="darwin"===N.platform,f="linux"===N.platform,_=f&&!!N.env["SNAP"]&&!!N.env["SNAP_REVISION"],w=D,y=!!N.env["CI"]||!!N.env["BUILD_ARTIFACTSTAGINGDIRECTORY"],u=d,L=d;const e=N.env["VSCODE_NLS_CONFIG"];if(e)try{const o=JSON.parse(e),s=o.availableLanguages["*"];u=o.locale,L=s||d,x=o._translationsConfigFile}catch(Q){}C=!0}else console.error("Unable to resolve platform.");else g=navigator.userAgent,p=g.indexOf("Windows")>=0,m=g.indexOf("Macintosh")>=0,S=(g.indexOf("Macintosh")>=0||g.indexOf("iPad")>=0||g.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,f=g.indexOf("Linux")>=0,b=!0,u=navigator.language,L=u;let T=0;m?T=1:p?T=3:f&&(T=2);const I=p,A=m,M=f,R=C,P=b,O=b&&"function"===typeof k.importScripts,F=S,B=g,W=L,V=(()=>{if("function"===typeof k.postMessage&&!k.importScripts){let e=[];k.addEventListener("message",(o=>{if(o.data&&o.data.vscodeScheduleAsyncWork)for(let s=0,l=e.length;s<l;s++){const l=e[s];if(l.id===o.data.vscodeScheduleAsyncWork)return e.splice(s,1),void l.callback()}}));let o=0;return s=>{const l=++o;e.push({id:l,callback:s}),k.postMessage({vscodeScheduleAsyncWork:l},"*")}}return e=>setTimeout(e)})(),H=m||S?2:p?1:3;let z=!0,U=!1;function isLittleEndian(){if(!U){U=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const o=new Uint16Array(e.buffer);z=513===o[0]}return z}const K=!!(B&&B.indexOf("Chrome")>=0),j=!!(B&&B.indexOf("Firefox")>=0),G=!!(!K&&B&&B.indexOf("Safari")>=0),q=!!(B&&B.indexOf("Edg/")>=0);B&&B.indexOf("Android")},1134:function(e,o,s){"use strict";var l;s.d(o,{e:function(){return l}}),function(e){function intersect(e,o){if(e.start>=o.end||o.start>=e.end)return{start:0,end:0};const s=Math.max(e.start,o.start),l=Math.min(e.end,o.end);return l-s<=0?{start:0,end:0}:{start:s,end:l}}function isEmpty(e){return e.end-e.start<=0}function intersects(e,o){return!isEmpty(intersect(e,o))}function relativeComplement(e,o){const s=[],l={start:e.start,end:Math.min(o.start,e.end)},d={start:Math.max(o.end,e.start),end:e.end};return isEmpty(l)||s.push(l),isEmpty(d)||s.push(d),s}e.intersect=intersect,e.isEmpty=isEmpty,e.intersects=intersects,e.relativeComplement=relativeComplement}(l||(l={}))},5935:function(e,o,s){"use strict";s.d(o,{AH:function(){return L},DZ:function(){return w},EZ:function(){return b},Hx:function(){return C},SF:function(){return f},Vb:function(){return D},Vo:function(){return y},XX:function(){return S},Xy:function(){return _},i3:function(){return x},z_:function(){return originalFSPath}});var l=s(5527),d=s(6663),u=s(5336),g=s(1432),p=s(2677),m=s(666);function originalFSPath(e){return(0,m.q)(e,!0)}class ExtUri{constructor(e){this._ignorePathCasing=e}compare(e,o,s=!1){return e===o?0:(0,p.qu)(this.getComparisonKey(e,s),this.getComparisonKey(o,s))}isEqual(e,o,s=!1){return e===o||!(!e||!o)&&this.getComparisonKey(e,s)===this.getComparisonKey(o,s)}getComparisonKey(e,o=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:o?null:void 0}).toString()}isEqualOrParent(e,o,s=!1){if(e.scheme===o.scheme){if(e.scheme===d.lg.file)return l.KM(originalFSPath(e),originalFSPath(o),this._ignorePathCasing(e))&&e.query===o.query&&(s||e.fragment===o.fragment);if(k(e.authority,o.authority))return l.KM(e.path,o.path,this._ignorePathCasing(e),"/")&&e.query===o.query&&(s||e.fragment===o.fragment)}return!1}joinPath(e,...o){return m.o.joinPath(e,...o)}basenameOrAuthority(e){return b(e)||e.authority}basename(e){return u.KR.basename(e.path)}extname(e){return u.KR.extname(e.path)}dirname(e){if(0===e.path.length)return e;let o;return e.scheme===d.lg.file?o=m.o.file(u.XX(originalFSPath(e))).path:(o=u.KR.dirname(e.path),e.authority&&o.length&&47!==o.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),o="/")),e.with({path:o})}normalizePath(e){if(!e.path.length)return e;let o;return o=e.scheme===d.lg.file?m.o.file(u.Fv(originalFSPath(e))).path:u.KR.normalize(e.path),e.with({path:o})}relativePath(e,o){if(e.scheme!==o.scheme||!k(e.authority,o.authority))return;if(e.scheme===d.lg.file){const s=u.Gf(originalFSPath(e),originalFSPath(o));return g.ED?l.ej(s):s}let s=e.path||"/",p=o.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const o=Math.min(s.length,p.length);e<o;e++)if(s.charCodeAt(e)!==p.charCodeAt(e)&&s.charAt(e).toLowerCase()!==p.charAt(e).toLowerCase())break;s=p.substr(0,e)+s.substr(e)}return u.KR.relative(s,p)}resolvePath(e,o){if(e.scheme===d.lg.file){const s=m.o.file(u.DB(originalFSPath(e),o));return e.with({authority:s.authority,path:s.path})}return o=l.fn(o),e.with({path:u.KR.resolve(e.path,o)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,o){return e===o||void 0!==e&&void 0!==o&&(0,p.qq)(e,o)}hasTrailingPathSeparator(e,o=u.ir){if(e.scheme===d.lg.file){const s=originalFSPath(e);return s.length>l.yj(s).length&&s[s.length-1]===o}{const o=e.path;return o.length>1&&47===o.charCodeAt(o.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,o=u.ir){return N(e,o)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,o=u.ir){let s=!1;if(e.scheme===d.lg.file){const d=originalFSPath(e);s=void 0!==d&&d.length===l.yj(d).length&&d[d.length-1]===o}else{o="/";const l=e.path;s=1===l.length&&47===l.charCodeAt(l.length-1)}return s||N(e,o)?e:e.with({path:e.path+"/"})}}const f=new ExtUri((()=>!1)),_=(new ExtUri((e=>e.scheme!==d.lg.file||!g.IJ)),new ExtUri((e=>!0)),f.isEqual.bind(f)),C=(f.isEqualOrParent.bind(f),f.getComparisonKey.bind(f),f.basenameOrAuthority.bind(f)),b=f.basename.bind(f),w=f.extname.bind(f),S=f.dirname.bind(f),y=f.joinPath.bind(f),L=f.normalizePath.bind(f),x=(f.relativePath.bind(f),f.resolvePath.bind(f)),k=(f.isAbsolutePath.bind(f),f.isEqualAuthority.bind(f)),N=f.hasTrailingPathSeparator.bind(f);f.removeTrailingPathSeparator.bind(f),f.addTrailingPathSeparator.bind(f);var D;(function(e){function parseMetaData(o){const s=new Map,l=o.path.substring(o.path.indexOf(";")+1,o.path.lastIndexOf(";"));l.split(";").forEach((e=>{const[o,l]=e.split(":");o&&l&&s.set(o,l)}));const d=o.path.substring(0,o.path.indexOf(";"));return d&&s.set(e.META_DATA_MIME,d),s}e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=parseMetaData})(D||(D={}))},6633:function(e,o,s){"use strict";s.d(o,{Rm:function(){return Scrollable}});var l=s(4669),d=s(5976);class ScrollState{constructor(e,o,s,l,d,u,g){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(o|=0,s|=0,l|=0,d|=0,u|=0,g|=0),this.rawScrollLeft=l,this.rawScrollTop=g,o<0&&(o=0),l+o>s&&(l=s-o),l<0&&(l=0),d<0&&(d=0),g+d>u&&(g=u-d),g<0&&(g=0),this.width=o,this.scrollWidth=s,this.scrollLeft=l,this.height=d,this.scrollHeight=u,this.scrollTop=g}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,o){return new ScrollState(this._forceIntegerValues,"undefined"!==typeof e.width?e.width:this.width,"undefined"!==typeof e.scrollWidth?e.scrollWidth:this.scrollWidth,o?this.rawScrollLeft:this.scrollLeft,"undefined"!==typeof e.height?e.height:this.height,"undefined"!==typeof e.scrollHeight?e.scrollHeight:this.scrollHeight,o?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new ScrollState(this._forceIntegerValues,this.width,this.scrollWidth,"undefined"!==typeof e.scrollLeft?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,"undefined"!==typeof e.scrollTop?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,o){const s=this.width!==e.width,l=this.scrollWidth!==e.scrollWidth,d=this.scrollLeft!==e.scrollLeft,u=this.height!==e.height,g=this.scrollHeight!==e.scrollHeight,p=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:o,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:s,scrollWidthChanged:l,scrollLeftChanged:d,heightChanged:u,scrollHeightChanged:g,scrollTopChanged:p}}}class Scrollable extends d.JT{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new l.Q5),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new ScrollState(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,o){const s=this._state.withScrollDimensions(e,o);this._setState(s,Boolean(this._smoothScrolling)),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const o=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(o,!1)}setScrollPositionSmooth(e,o){if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:"undefined"===typeof e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:"undefined"===typeof e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};const s=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===s.scrollLeft&&this._smoothScrolling.to.scrollTop===s.scrollTop)return;let l;l=o?new SmoothScrollingOperation(this._smoothScrolling.from,s,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,s,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=l}else{const o=this._state.withScrollPosition(e);this._smoothScrolling=SmoothScrollingOperation.start(this._state,o,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),o=this._state.withScrollPosition(e);return this._setState(o,!0),this._smoothScrolling?e.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))):void 0}_setState(e,o){const s=this._state;s.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(s,o)))}}class SmoothScrollingUpdate{constructor(e,o,s){this.scrollLeft=e,this.scrollTop=o,this.isDone=s}}function createEaseOutCubic(e,o){const s=o-e;return function(o){return e+s*easeOutCubic(o)}}function createComposed(e,o,s){return function(l){return l<s?e(l/s):o((l-s)/(1-s))}}class SmoothScrollingOperation{constructor(e,o,s,l){this.from=e,this.to=o,this.duration=l,this.startTime=s,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,o,s){const l=Math.abs(e-o);if(l>2.5*s){let l,d;return e<o?(l=e+.75*s,d=o-.75*s):(l=e-.75*s,d=o+.75*s),createComposed(createEaseOutCubic(e,l),createEaseOutCubic(d,o),.33)}return createEaseOutCubic(e,o)}dispose(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const o=(e-this.startTime)/this.duration;if(o<1){const e=this.scrollLeft(o),s=this.scrollTop(o);return new SmoothScrollingUpdate(e,s,!1)}return new SmoothScrollingUpdate(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,o,s){return SmoothScrollingOperation.start(e,o,s)}static start(e,o,s){s+=10;const l=Date.now()-10;return new SmoothScrollingOperation(e,o,l,s)}}function easeInCubic(e){return Math.pow(e,3)}function easeOutCubic(e){return 1-easeInCubic(1-e)}},4603:function(e,o,s){"use strict";var l,d=s(2677);(function(e){e[e["Ignore"]=0]="Ignore",e[e["Info"]=1]="Info",e[e["Warning"]=2]="Warning",e[e["Error"]=3]="Error"})(l||(l={})),function(e){const o="error",s="warning",l="warn",u="info",g="ignore";function fromValue(g){return g?d.qq(o,g)?e.Error:d.qq(s,g)||d.qq(l,g)?e.Warning:d.qq(u,g)?e.Info:e.Ignore:e.Ignore}function toString(l){switch(l){case e.Error:return o;case e.Warning:return s;case e.Info:return u;default:return g}}e.fromValue=fromValue,e.toString=toString}(l||(l={})),o["Z"]=l},4013:function(e,o,s){"use strict";s.d(o,{G:function(){return StopWatch}});var l=s(1432);const d=l.li.performance&&"function"===typeof l.li.performance.now;class StopWatch{constructor(e){this._highResolution=d&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new StopWatch(e)}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?l.li.performance.now():Date.now()}}},2677:function(e,o,s){"use strict";s.d(o,{ZK:function(){return AmbiguousCharacters},W1:function(){return GraphemeIterator},vU:function(){return InvisibleCharacters},Qe:function(){return m},c1:function(){return f},Mh:function(){return commonPrefixLength},P1:function(){return commonSuffixLength},qu:function(){return compare},zY:function(){return compareIgnoreCase},TT:function(){return compareSubstring},j_:function(){return compareSubstringIgnoreCase},rL:function(){return computeCodePoint},Ut:function(){return containsRTL},ab:function(){return containsUnusualLineTerminators},Kw:function(){return containsUppercaseCharacter},un:function(){return convertSimple2RegExpPattern},GF:function(){return createRegExp},qq:function(){return equalsIgnoreCase},YU:function(){return strings_escape},ec:function(){return escapeRegExpCharacters},LC:function(){return firstNonWhitespaceIndex},WU:function(){return format},J_:function(){return getCharContainingOffset},V8:function(){return getLeadingWhitespace},oH:function(){return getLeftDeleteOffset},ZH:function(){return getNextCodePoint},$i:function(){return isBasicASCII},C8:function(){return isEmojiImprecise},m5:function(){return isFalsyOrWhitespace},K7:function(){return isFullWidthCharacter},ZG:function(){return isHighSurrogate},YK:function(){return isLowSurrogate},mK:function(){return isLowerAsciiLetter},df:function(){return isUpperAsciiLetter},ow:function(){return lastNonWhitespaceIndex},j3:function(){return ltrim},vH:function(){return nextCharLength},B4:function(){return _},HO:function(){return prevCharLength},mr:function(){return regExpFlags},IO:function(){return regExpLeadsToEndlessLoop},oL:function(){return rtrim},PJ:function(){return singleLetterHash},uq:function(){return splitLines},ok:function(){return startsWithIgnoreCase},uS:function(){return startsWithUTF8BOM},R1:function(){return stripWildcards},fy:function(){return trim}});class LRUCachedComputed{constructor(e){this.computeFn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const o=JSON.stringify(e);return this.lastArgKey!==o&&(this.lastArgKey=o,this.lastCache=this.computeFn(e)),this.lastCache}}var l,d=s(9579);function isFalsyOrWhitespace(e){return!e||"string"!==typeof e||0===e.trim().length}const u=/{(\d+)}/g;function format(e,...o){return 0===o.length?e:e.replace(u,(function(e,s){const l=parseInt(s,10);return isNaN(l)||l<0||l>=o.length?e:o[l]}))}function strings_escape(e){return e.replace(/[<>&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}))}function escapeRegExpCharacters(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function trim(e,o=" "){const s=ltrim(e,o);return rtrim(s,o)}function ltrim(e,o){if(!e||!o)return e;const s=o.length;if(0===s||0===e.length)return e;let l=0;while(e.indexOf(o,l)===l)l+=s;return e.substring(l)}function rtrim(e,o){if(!e||!o)return e;const s=o.length,l=e.length;if(0===s||0===l)return e;let d=l,u=-1;while(1){if(u=e.lastIndexOf(o,d-1),-1===u||u+s!==d)break;if(0===u)return"";d=u}return e.substring(0,d)}function convertSimple2RegExpPattern(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function stripWildcards(e){return e.replace(/\*/g,"")}function createRegExp(e,o,s={}){if(!e)throw new Error("Cannot create regex from empty string");o||(e=escapeRegExpCharacters(e)),s.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let l="";return s.global&&(l+="g"),s.matchCase||(l+="i"),s.multiline&&(l+="m"),s.unicode&&(l+="u"),new RegExp(e,l)}function regExpLeadsToEndlessLoop(e){if("^"===e.source||"^$"===e.source||"$"===e.source||"^\\s*$"===e.source)return!1;const o=e.exec("");return!(!o||0!==e.lastIndex)}function regExpFlags(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")}function splitLines(e){return e.split(/\r\n|\r|\n/)}function firstNonWhitespaceIndex(e){for(let o=0,s=e.length;o<s;o++){const s=e.charCodeAt(o);if(32!==s&&9!==s)return o}return-1}function getLeadingWhitespace(e,o=0,s=e.length){for(let l=o;l<s;l++){const s=e.charCodeAt(l);if(32!==s&&9!==s)return e.substring(o,l)}return e.substring(o,s)}function lastNonWhitespaceIndex(e,o=e.length-1){for(let s=o;s>=0;s--){const o=e.charCodeAt(s);if(32!==o&&9!==o)return s}return-1}function compare(e,o){return e<o?-1:e>o?1:0}function compareSubstring(e,o,s=0,l=e.length,d=0,u=o.length){for(;s<l&&d<u;s++,d++){let l=e.charCodeAt(s),u=o.charCodeAt(d);if(l<u)return-1;if(l>u)return 1}const g=l-s,p=u-d;return g<p?-1:g>p?1:0}function compareIgnoreCase(e,o){return compareSubstringIgnoreCase(e,o,0,e.length,0,o.length)}function compareSubstringIgnoreCase(e,o,s=0,l=e.length,d=0,u=o.length){for(;s<l&&d<u;s++,d++){let g=e.charCodeAt(s),p=o.charCodeAt(d);if(g===p)continue;if(g>=128||p>=128)return compareSubstring(e.toLowerCase(),o.toLowerCase(),s,l,d,u);isLowerAsciiLetter(g)&&(g-=32),isLowerAsciiLetter(p)&&(p-=32);const m=g-p;if(0!==m)return m}const g=l-s,p=u-d;return g<p?-1:g>p?1:0}function isLowerAsciiLetter(e){return e>=97&&e<=122}function isUpperAsciiLetter(e){return e>=65&&e<=90}function equalsIgnoreCase(e,o){return e.length===o.length&&0===compareSubstringIgnoreCase(e,o)}function startsWithIgnoreCase(e,o){const s=o.length;return!(o.length>e.length)&&0===compareSubstringIgnoreCase(e,o,0,s)}function commonPrefixLength(e,o){let s,l=Math.min(e.length,o.length);for(s=0;s<l;s++)if(e.charCodeAt(s)!==o.charCodeAt(s))return s;return l}function commonSuffixLength(e,o){let s,l=Math.min(e.length,o.length);const d=e.length-1,u=o.length-1;for(s=0;s<l;s++)if(e.charCodeAt(d-s)!==o.charCodeAt(u-s))return s;return l}function isHighSurrogate(e){return 55296<=e&&e<=56319}function isLowSurrogate(e){return 56320<=e&&e<=57343}function computeCodePoint(e,o){return o-56320+(e-55296<<10)+65536}function getNextCodePoint(e,o,s){const l=e.charCodeAt(s);if(isHighSurrogate(l)&&s+1<o){const o=e.charCodeAt(s+1);if(isLowSurrogate(o))return computeCodePoint(l,o)}return l}function getPrevCodePoint(e,o){const s=e.charCodeAt(o-1);if(isLowSurrogate(s)&&o>1){const l=e.charCodeAt(o-2);if(isHighSurrogate(l))return computeCodePoint(l,s)}return s}class CodePointIterator{constructor(e,o=0){this._str=e,this._len=e.length,this._offset=o}get offset(){return this._offset}setOffset(e){this._offset=e}prevCodePoint(){const e=getPrevCodePoint(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=getNextCodePoint(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class GraphemeIterator{constructor(e,o=0){this._iterator=new CodePointIterator(e,o)}get offset(){return this._iterator.offset}nextGraphemeLength(){const e=GraphemeBreakTree.getInstance(),o=this._iterator,s=o.offset;let l=e.getGraphemeBreakType(o.nextCodePoint());while(!o.eol()){const s=o.offset,d=e.getGraphemeBreakType(o.nextCodePoint());if(breakBetweenGraphemeBreakType(l,d)){o.setOffset(s);break}l=d}return o.offset-s}prevGraphemeLength(){const e=GraphemeBreakTree.getInstance(),o=this._iterator,s=o.offset;let l=e.getGraphemeBreakType(o.prevCodePoint());while(o.offset>0){const s=o.offset,d=e.getGraphemeBreakType(o.prevCodePoint());if(breakBetweenGraphemeBreakType(d,l)){o.setOffset(s);break}l=d}return s-o.offset}eol(){return this._iterator.eol()}}function nextCharLength(e,o){const s=new GraphemeIterator(e,o);return s.nextGraphemeLength()}function prevCharLength(e,o){const s=new GraphemeIterator(e,o);return s.prevGraphemeLength()}function getCharContainingOffset(e,o){o>0&&isLowSurrogate(e.charCodeAt(o))&&o--;const s=o+nextCharLength(e,o),l=s-prevCharLength(e,s);return[l,s]}const g=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function containsRTL(e){return g.test(e)}const p=/^[\t\n\r\x20-\x7E]*$/;function isBasicASCII(e){return p.test(e)}const m=/[\u2028\u2029]/;function containsUnusualLineTerminators(e){return m.test(e)}function isFullWidthCharacter(e){return e>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function isEmojiImprecise(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129008||e>=129280&&e<=129535||e>=129648&&e<=129782}const f=String.fromCharCode(65279);function startsWithUTF8BOM(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}function containsUppercaseCharacter(e,o=!1){return!!e&&(o&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e)}function singleLetterHash(e){const o=26;return e%=2*o,e<o?String.fromCharCode(97+e):String.fromCharCode(65+e-o)}function breakBetweenGraphemeBreakType(e,o){return 0===e?5!==o&&7!==o:(2!==e||3!==o)&&(4===e||2===e||3===e||(4===o||2===o||3===o||(8!==e||8!==o&&9!==o&&11!==o&&12!==o)&&((11!==e&&9!==e||9!==o&&10!==o)&&((12!==e&&10!==e||10!==o)&&(5!==o&&13!==o&&(7!==o&&(1!==e&&((13!==e||14!==o)&&(6!==e||6!==o)))))))))}class GraphemeBreakTree{constructor(){this._data=getGraphemeBreakRawData()}static getInstance(){return GraphemeBreakTree._INSTANCE||(GraphemeBreakTree._INSTANCE=new GraphemeBreakTree),GraphemeBreakTree._INSTANCE}getGraphemeBreakType(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;const o=this._data,s=o.length/3;let l=1;while(l<=s)if(e<o[3*l])l*=2;else{if(!(e>o[3*l+1]))return o[3*l+2];l=2*l+1}return 0}}function getGraphemeBreakRawData(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function getLeftDeleteOffset(e,o){if(0===e)return 0;const s=getOffsetBeforeLastEmojiComponent(e,o);if(void 0!==s)return s;const l=new CodePointIterator(o,e);return l.prevCodePoint(),l.offset}function getOffsetBeforeLastEmojiComponent(e,o){const s=new CodePointIterator(o,e);let l=s.prevCodePoint();while(isEmojiModifier(l)||65039===l||8419===l){if(0===s.offset)return;l=s.prevCodePoint()}if(!isEmojiImprecise(l))return;let d=s.offset;if(d>0){const e=s.prevCodePoint();8205===e&&(d=s.offset)}return d}function isEmojiModifier(e){return 127995<=e&&e<=127999}GraphemeBreakTree._INSTANCE=null;const _=" ";class AmbiguousCharacters{constructor(e){this.confusableDictionary=e}static getInstance(e){return AmbiguousCharacters.cache.get(Array.from(e))}static getLocales(){return AmbiguousCharacters._locales.getValue()}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}l=AmbiguousCharacters,AmbiguousCharacters.ambiguousCharacterData=new d.o((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))),AmbiguousCharacters.cache=new LRUCachedComputed((e=>{function arrayToMap(e){const o=new Map;for(let s=0;s<e.length;s+=2)o.set(e[s],e[s+1]);return o}function mergeMaps(e,o){const s=new Map(e);for(const[l,d]of o)s.set(l,d);return s}function intersectMaps(e,o){if(!e)return o;const s=new Map;for(const[l,d]of e)o.has(l)&&s.set(l,d);return s}const o=l.ambiguousCharacterData.getValue();let s,d=e.filter((e=>!e.startsWith("_")&&e in o));0===d.length&&(d=["_default"]);for(const l of d){const e=arrayToMap(o[l]);s=intersectMaps(s,e)}const u=arrayToMap(o["_common"]),g=mergeMaps(u,s);return new AmbiguousCharacters(g)})),AmbiguousCharacters._locales=new d.o((()=>Object.keys(AmbiguousCharacters.ambiguousCharacterData.getValue()).filter((e=>!e.startsWith("_")))));class InvisibleCharacters{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(InvisibleCharacters.getRawData())),this._data}static isInvisibleCharacter(e){return InvisibleCharacters.getData().has(e)}static get codePoints(){return InvisibleCharacters.getData()}}InvisibleCharacters._data=void 0},8401:function(e,o,s){"use strict";function isArray(e){return Array.isArray(e)}function isString(e){return"string"===typeof e}function isObject(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function isNumber(e){return"number"===typeof e&&!isNaN(e)}function isIterable(e){return!!e&&"function"===typeof e[Symbol.iterator]}function isBoolean(e){return!0===e||!1===e}function isUndefined(e){return"undefined"===typeof e}function isDefined(e){return!isUndefinedOrNull(e)}function isUndefinedOrNull(e){return isUndefined(e)||null===e}function assertType(e,o){if(!e)throw new Error(o?`Unexpected type, expected '${o}'`:"Unexpected type")}function assertIsDefined(e){if(isUndefinedOrNull(e))throw new Error("Assertion Failed: argument is undefined or null");return e}function isFunction(e){return"function"===typeof e}function validateConstraints(e,o){const s=Math.min(e.length,o.length);for(let l=0;l<s;l++)validateConstraint(e[l],o[l])}function validateConstraint(e,o){if(isString(o)){if(typeof e!==o)throw new Error(`argument does not match constraint: typeof ${o}`)}else if(isFunction(o)){try{if(e instanceof o)return}catch(s){}if(!isUndefinedOrNull(e)&&e.constructor===o)return;if(1===o.length&&!0===o.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function getAllPropertyNames(e){let o=[],s=Object.getPrototypeOf(e);while(Object.prototype!==s)o=o.concat(Object.getOwnPropertyNames(s)),s=Object.getPrototypeOf(s);return o}function getAllMethodNames(e){const o=[];for(const s of getAllPropertyNames(e))"function"===typeof e[s]&&o.push(s);return o}function createProxyObject(e,o){const createProxyMethod=e=>function(){const s=Array.prototype.slice.call(arguments,0);return o(e,s)};let s={};for(const l of e)s[l]=createProxyMethod(l);return s}function withNullAsUndefined(e){return null===e?void 0:e}function assertNever(e,o="Unreachable"){throw new Error(o)}s.d(o,{$E:function(){return getAllMethodNames},$K:function(){return isDefined},D8:function(){return validateConstraints},HD:function(){return isString},IU:function(){return createProxyObject},Jp:function(){return isUndefinedOrNull},Kn:function(){return isObject},TW:function(){return isIterable},cW:function(){return assertIsDefined},f6:function(){return withNullAsUndefined},hj:function(){return isNumber},jn:function(){return isBoolean},kJ:function(){return isArray},mf:function(){return isFunction},o8:function(){return isUndefined},p_:function(){return assertType},vE:function(){return assertNever}})},5427:function(e,o,s){"use strict";function toUint8(e){return e<0?0:e>255?255:0|e}function toUint32(e){return e<0?0:e>4294967295?4294967295:0|e}s.d(o,{A:function(){return toUint32},K:function(){return toUint8}})},666:function(e,o,s){"use strict";s.d(o,{o:function(){return URI},q:function(){return uriToFsPath}});var l=s(5336),d=s(1432);const u=/^\w[\w\d+.-]*$/,g=/^\//,p=/^\/\//;function _validateUri(e,o){if(!e.scheme&&o)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!u.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!g.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}function _schemeFix(e,o){return e||o?e:"file"}function _referenceResolution(e,o){switch(e){case"https":case"http":case"file":o?o[0]!==f&&(o=f+o):o=f;break}return o}const m="",f="/",_=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class URI{constructor(e,o,s,l,d,u=!1){"object"===typeof e?(this.scheme=e.scheme||m,this.authority=e.authority||m,this.path=e.path||m,this.query=e.query||m,this.fragment=e.fragment||m):(this.scheme=_schemeFix(e,u),this.authority=o||m,this.path=_referenceResolution(this.scheme,s||m),this.query=l||m,this.fragment=d||m,_validateUri(this,u))}static isUri(e){return e instanceof URI||!!e&&("string"===typeof e.authority&&"string"===typeof e.fragment&&"string"===typeof e.path&&"string"===typeof e.query&&"string"===typeof e.scheme&&"string"===typeof e.fsPath&&"function"===typeof e.with&&"function"===typeof e.toString)}get fsPath(){return uriToFsPath(this,!1)}with(e){if(!e)return this;let{scheme:o,authority:s,path:l,query:d,fragment:u}=e;return void 0===o?o=this.scheme:null===o&&(o=m),void 0===s?s=this.authority:null===s&&(s=m),void 0===l?l=this.path:null===l&&(l=m),void 0===d?d=this.query:null===d&&(d=m),void 0===u?u=this.fragment:null===u&&(u=m),o===this.scheme&&s===this.authority&&l===this.path&&d===this.query&&u===this.fragment?this:new Uri(o,s,l,d,u)}static parse(e,o=!1){const s=_.exec(e);return s?new Uri(s[2]||m,percentDecode(s[4]||m),percentDecode(s[5]||m),percentDecode(s[7]||m),percentDecode(s[9]||m),o):new Uri(m,m,m,m,m)}static file(e){let o=m;if(d.ED&&(e=e.replace(/\\/g,f)),e[0]===f&&e[1]===f){const s=e.indexOf(f,2);-1===s?(o=e.substring(2),e=f):(o=e.substring(2,s),e=e.substring(s)||f)}return new Uri("file",o,e,m,m)}static from(e){const o=new Uri(e.scheme,e.authority,e.path,e.query,e.fragment);return _validateUri(o,!0),o}static joinPath(e,...o){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let s;return s=d.ED&&"file"===e.scheme?URI.file(l.Ku.join(uriToFsPath(e,!0),...o)).path:l.KR.join(e.path,...o),e.with({path:s})}toString(e=!1){return _asFormatted(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof URI)return e;{const o=new Uri(e);return o._formatted=e.external,o._fsPath=e._sep===C?e.fsPath:null,o}}return e}}const C=d.ED?1:void 0;class Uri extends URI{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=uriToFsPath(this,!1)),this._fsPath}toString(e=!1){return e?_asFormatted(this,!0):(this._formatted||(this._formatted=_asFormatted(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=C),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const b={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function encodeURIComponentFast(e,o){let s,l=-1;for(let d=0;d<e.length;d++){const u=e.charCodeAt(d);if(u>=97&&u<=122||u>=65&&u<=90||u>=48&&u<=57||45===u||46===u||95===u||126===u||o&&47===u)-1!==l&&(s+=encodeURIComponent(e.substring(l,d)),l=-1),void 0!==s&&(s+=e.charAt(d));else{void 0===s&&(s=e.substr(0,d));const o=b[u];void 0!==o?(-1!==l&&(s+=encodeURIComponent(e.substring(l,d)),l=-1),s+=o):-1===l&&(l=d)}}return-1!==l&&(s+=encodeURIComponent(e.substring(l))),void 0!==s?s:e}function encodeURIComponentMinimal(e){let o;for(let s=0;s<e.length;s++){const l=e.charCodeAt(s);35===l||63===l?(void 0===o&&(o=e.substr(0,s)),o+=b[l]):void 0!==o&&(o+=e[s])}return void 0!==o?o:e}function uriToFsPath(e,o){let s;return s=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?o?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,d.ED&&(s=s.replace(/\//g,"\\")),s}function _asFormatted(e,o){const s=o?encodeURIComponentMinimal:encodeURIComponentFast;let l="",{scheme:d,authority:u,path:g,query:p,fragment:m}=e;if(d&&(l+=d,l+=":"),(u||"file"===d)&&(l+=f,l+=f),u){let e=u.indexOf("@");if(-1!==e){const o=u.substr(0,e);u=u.substr(e+1),e=o.indexOf(":"),-1===e?l+=s(o,!1):(l+=s(o.substr(0,e),!1),l+=":",l+=s(o.substr(e+1),!1)),l+="@"}u=u.toLowerCase(),e=u.indexOf(":"),-1===e?l+=s(u,!1):(l+=s(u.substr(0,e),!1),l+=u.substr(e))}if(g){if(g.length>=3&&47===g.charCodeAt(0)&&58===g.charCodeAt(2)){const e=g.charCodeAt(1);e>=65&&e<=90&&(g=`/${String.fromCharCode(e+32)}:${g.substr(3)}`)}else if(g.length>=2&&58===g.charCodeAt(1)){const e=g.charCodeAt(0);e>=65&&e<=90&&(g=`${String.fromCharCode(e+32)}:${g.substr(2)}`)}l+=s(g,!0)}return p&&(l+="?",l+=s(p,!1)),m&&(l+="#",l+=o?m:encodeURIComponentFast(m,!1)),l}function decodeURIComponentGraceful(e){try{return decodeURIComponent(e)}catch(o){return e.length>3?e.substr(0,3)+decodeURIComponentGraceful(e.substr(3)):e}}const w=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function percentDecode(e){return e.match(w)?e.replace(w,(e=>decodeURIComponentGraceful(e))):e}},7746:function(e,o,s){"use strict";s.d(o,{Jq:function(){return d},X5:function(){return l},jG:function(){return u}});const l={ctrlCmd:!1,alt:!1};var d,u;(function(e){e[e["Blur"]=1]="Blur",e[e["Gesture"]=2]="Gesture",e[e["Other"]=3]="Other"})(d||(d={})),function(e){e[e["NONE"]=0]="NONE",e[e["FIRST"]=1]="FIRST",e[e["SECOND"]=2]="SECOND",e[e["LAST"]=3]="LAST"}(u||(u={}));class QuickPickItemScorerAccessor{constructor(e){this.options=e}}new QuickPickItemScorerAccessor},5552:function(e,o,s){"use strict";s.d(o,{H:function(){return registerLanguage}});var l=s(2100),d=Object.defineProperty,u=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,__reExport=(e,o,s,l)=>{if(o&&"object"===typeof o||"function"===typeof o)for(let m of g(o))p.call(e,m)||!s&&"default"===m||d(e,m,{get:()=>o[m],enumerable:!(l=u(o,m))||l.enumerable});return e},m={};
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/__reExport(m,l);var f={},_={},C=class{static getOrCreate(e){return _[e]||(_[e]=new C(e)),_[e]}_languageId;_loadingTriggered;_lazyLoadPromise;_lazyLoadPromiseResolve;_lazyLoadPromiseReject;constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise(((e,o)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=o}))}load(){return this._loadingTriggered||(this._loadingTriggered=!0,f[this._languageId].loader().then((e=>this._lazyLoadPromiseResolve(e)),(e=>this._lazyLoadPromiseReject(e)))),this._lazyLoadPromise}};function registerLanguage(e){const o=e.id;f[o]=e,m.languages.register(e);const s=C.getOrCreate(o);m.languages.registerTokensProviderFactory(o,{create:async()=>{const e=await s.load();return e.language}}),m.languages.onLanguage(o,(async()=>{const e=await s.load();m.languages.setLanguageConfiguration(o,e.conf)}))}},3763:function(e,o,s){"use strict";s.r(o);var l=s(5552);
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/(0,l.H)({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>s.e(1134).then(s.bind(s,5810))})},2136:function(e,o,s){"use strict";s.d(o,{N:function(){return applyFontInfo}});var l=s(6268),d=s(8626),u=s(4141);function applyFontInfo(e,o){e instanceof d.Z?(e.setFontFamily(o.getMassagedFontFamily(l.isSafari?u.hL.fontFamily:null)),e.setFontWeight(o.fontWeight),e.setFontSize(o.fontSize),e.setFontFeatureSettings(o.fontFeatureSettings),e.setLineHeight(o.lineHeight),e.setLetterSpacing(o.letterSpacing)):(e.style.fontFamily=o.getMassagedFontFamily(l.isSafari?u.hL.fontFamily:null),e.style.fontWeight=o.fontWeight,e.style.fontSize=o.fontSize+"px",e.style.fontFeatureSettings=o.fontFeatureSettings,e.style.lineHeight=o.lineHeight+"px",e.style.letterSpacing=o.letterSpacing+"px")}},4534:function(e,o,s){"use strict";s.d(o,{I:function(){return ElementSizeObserver}});var l=s(5976),d=s(4669);class ElementSizeObserver extends l.JT{constructor(e,o){super(),this._onDidChange=this._register(new d.Q5),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,o)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver((e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()})),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,o){let s=0,l=0;o?(s=o.width,l=o.height):this._referenceDomElement&&(s=this._referenceDomElement.clientWidth,l=this._referenceDomElement.clientHeight),s=Math.max(5,s),l=Math.max(5,l),this._width===s&&this._height===l||(this._width=s,this._height=l,e&&this._onDidChange.fire())}}},6059:function(e,o,s){"use strict";s.d(o,{g:function(){return f}});var l=s(6268),d=s(4669),u=s(5976),g=s(2136);class CharWidthRequest{constructor(e,o){this.chr=e,this.type=o,this.width=0}fulfill(e){this.width=e}}class DomCharWidthReader{constructor(e,o){this._bareFontInfo=e,this._requests=o,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const o=document.createElement("div");(0,g.N)(o,this._bareFontInfo),e.appendChild(o);const s=document.createElement("div");(0,g.N)(s,this._bareFontInfo),s.style.fontWeight="bold",e.appendChild(s);const l=document.createElement("div");(0,g.N)(l,this._bareFontInfo),l.style.fontStyle="italic",e.appendChild(l);const d=[];for(const u of this._requests){let e;0===u.type&&(e=o),2===u.type&&(e=s),1===u.type&&(e=l),e.appendChild(document.createElement("br"));const g=document.createElement("span");DomCharWidthReader._render(g,u),e.appendChild(g),d.push(g)}this._container=e,this._testElements=d}static _render(e,o){if(" "===o.chr){let o=" ";for(let e=0;e<8;e++)o+=o;e.innerText=o}else{let s=o.chr;for(let e=0;e<8;e++)s+=s;e.textContent=s}}_readFromDomElements(){for(let e=0,o=this._requests.length;e<o;e++){const o=this._requests[e],s=this._testElements[e];o.fulfill(s.offsetWidth/256)}}}function readCharWidths(e,o){const s=new DomCharWidthReader(e,o);s.read()}var p=s(4141),m=s(7374);class FontMeasurementsImpl extends u.JT{constructor(){super(),this._onDidChange=this._register(new d.Q5),this.onDidChange=this._onDidChange.event,this._cache=new FontMeasurementsCache,this._evictUntrustedReadingsTimeout=-1}dispose(){-1!==this._evictUntrustedReadingsTimeout&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new FontMeasurementsCache,this._onDidChange.fire()}_writeToCache(e,o){this._cache.put(e,o),o.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=window.setTimeout((()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()}),5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let o=!1;for(const s of e)s.isTrusted||(o=!0,this._cache.remove(s));o&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let o=this._actualReadFontInfo(e);(o.typicalHalfwidthCharacterWidth<=2||o.typicalFullwidthCharacterWidth<=2||o.spaceWidth<=2||o.maxDigitWidth<=2)&&(o=new m.pR({pixelRatio:l.PixelRatio.value,fontFamily:o.fontFamily,fontWeight:o.fontWeight,fontSize:o.fontSize,fontFeatureSettings:o.fontFeatureSettings,lineHeight:o.lineHeight,letterSpacing:o.letterSpacing,isMonospace:o.isMonospace,typicalHalfwidthCharacterWidth:Math.max(o.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(o.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:o.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(o.spaceWidth,5),middotWidth:Math.max(o.middotWidth,5),wsmiddotWidth:Math.max(o.wsmiddotWidth,5),maxDigitWidth:Math.max(o.maxDigitWidth,5)},!1)),this._writeToCache(e,o)}return this._cache.get(e)}_createRequest(e,o,s,l){const d=new CharWidthRequest(e,o);return s.push(d),l&&l.push(d),d}_actualReadFontInfo(e){const o=[],s=[],d=this._createRequest("n",0,o,s),u=this._createRequest("ｍ",0,o,null),g=this._createRequest(" ",0,o,s),f=this._createRequest("0",0,o,s),_=this._createRequest("1",0,o,s),C=this._createRequest("2",0,o,s),b=this._createRequest("3",0,o,s),w=this._createRequest("4",0,o,s),S=this._createRequest("5",0,o,s),y=this._createRequest("6",0,o,s),L=this._createRequest("7",0,o,s),x=this._createRequest("8",0,o,s),k=this._createRequest("9",0,o,s),N=this._createRequest("→",0,o,s),D=this._createRequest("￫",0,o,null),E=this._createRequest("·",0,o,s),T=this._createRequest(String.fromCharCode(11825),0,o,null),I="|/-_ilm%";for(let l=0,p=I.length;l<p;l++)this._createRequest(I.charAt(l),0,o,s),this._createRequest(I.charAt(l),1,o,s),this._createRequest(I.charAt(l),2,o,s);readCharWidths(e,o);const A=Math.max(f.width,_.width,C.width,b.width,w.width,S.width,y.width,L.width,x.width,k.width);let M=e.fontFeatureSettings===p.n0.OFF;const R=s[0].width;for(let l=1,p=s.length;M&&l<p;l++){const e=R-s[l].width;if(e<-.001||e>.001){M=!1;break}}let P=!0;return M&&D.width!==R&&(P=!1),D.width>N.width&&(P=!1),new m.pR({pixelRatio:l.PixelRatio.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:M,typicalHalfwidthCharacterWidth:d.width,typicalFullwidthCharacterWidth:u.width,canUseHalfwidthRightwardsArrow:P,spaceWidth:g.width,middotWidth:E.width,wsmiddotWidth:T.width,maxDigitWidth:A},!0)}}class FontMeasurementsCache{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const o=e.getId();return!!this._values[o]}get(e){const o=e.getId();return this._values[o]}put(e,o){const s=e.getId();this._keys[s]=e,this._values[s]=o}remove(e){const o=e.getId();delete this._keys[o],delete this._values[o]}getValues(){return Object.keys(this._keys).map((e=>this._values[e]))}}const f=new FontMeasurementsImpl},7940:function(e,o,s){"use strict";s.d(o,{n:function(){return d}});var l=s(4669);class TabFocusImpl{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new l.Q5,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}}const d=new TabFocusImpl},5715:function(e,o,s){"use strict";s.d(o,{Fz:function(){return TextAreaInput},Nl:function(){return InMemoryClipboardMetadataManager},RA:function(){return S},Tj:function(){return TextAreaWrapper},pd:function(){return l}});var l,d=s(6268),u=s(5321),g=s(9069),p=s(5393),m=s(4669),f=s(5976),_=s(1170),C=s(2677),b=s(5887),w=s(3860);(function(e){e.Tap="-monaco-textarea-synthetic-tap"})(l||(l={}));const S={forceCopyWithSyntaxHighlighting:!1};class InMemoryClipboardMetadataManager{constructor(){this._lastState=null}set(e,o){this._lastState={lastCopiedValue:e,data:o}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}InMemoryClipboardMetadataManager.INSTANCE=new InMemoryClipboardMetadataManager;class CompositionContext{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const o={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,o}}class TextAreaInput extends f.JT{constructor(e,o,s,l){super(),this._host=e,this._textArea=o,this._OS=s,this._browser=l,this._onFocus=this._register(new m.Q5),this.onFocus=this._onFocus.event,this._onBlur=this._register(new m.Q5),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new m.Q5),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new m.Q5),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new m.Q5),this.onCut=this._onCut.event,this._onPaste=this._register(new m.Q5),this.onPaste=this._onPaste.event,this._onType=this._register(new m.Q5),this.onType=this._onType.event,this._onCompositionStart=this._register(new m.Q5),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new m.Q5),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new m.Q5),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new m.Q5),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new p.pY((()=>this._onCut.fire()),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new p.pY((()=>this.writeScreenReaderContent("asyncFocusGain")),0)),this._textAreaState=b.un.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let d=null;this._register(this._textArea.onKeyDown((e=>{const o=new g.y(e);(109===o.keyCode||this._currentComposition&&1===o.keyCode)&&o.stopPropagation(),o.equals(9)&&o.preventDefault(),d=o,this._onKeyDown.fire(o)}))),this._register(this._textArea.onKeyUp((e=>{const o=new g.y(e);this._onKeyUp.fire(o)}))),this._register(this._textArea.onCompositionStart((e=>{b.al&&console.log("[compositionstart]",e);const o=new CompositionContext;if(this._currentComposition)this._currentComposition=o;else{if(this._currentComposition=o,2===this._OS&&d&&d.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data&&("ArrowRight"===d.code||"ArrowLeft"===d.code))return b.al&&console.log("[compositionstart] Handling long press case on macOS + arrow key",e),o.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:e.data});this._browser.isAndroid,this._onCompositionStart.fire({data:e.data})}}))),this._register(this._textArea.onCompositionUpdate((e=>{b.al&&console.log("[compositionupdate]",e);const o=this._currentComposition;if(!o)return;if(this._browser.isAndroid){const o=b.un.readFromTextArea(this._textArea),s=b.un.deduceAndroidCompositionInput(this._textAreaState,o);return this._textAreaState=o,this._onType.fire(s),void this._onCompositionUpdate.fire(e)}const s=o.handleCompositionUpdate(e.data);this._textAreaState=b.un.readFromTextArea(this._textArea),this._onType.fire(s),this._onCompositionUpdate.fire(e)}))),this._register(this._textArea.onCompositionEnd((e=>{b.al&&console.log("[compositionend]",e);const o=this._currentComposition;if(!o)return;if(this._currentComposition=null,this._browser.isAndroid){const e=b.un.readFromTextArea(this._textArea),o=b.un.deduceAndroidCompositionInput(this._textAreaState,e);return this._textAreaState=e,this._onType.fire(o),void this._onCompositionEnd.fire()}const s=o.handleCompositionUpdate(e.data);this._textAreaState=b.un.readFromTextArea(this._textArea),this._onType.fire(s),this._onCompositionEnd.fire()}))),this._register(this._textArea.onInput((e=>{if(b.al&&console.log("[input]",e),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const o=b.un.readFromTextArea(this._textArea),s=b.un.deduceInput(this._textAreaState,o,2===this._OS);0===s.replacePrevCharCnt&&1===s.text.length&&C.ZG(s.text.charCodeAt(0))||(this._textAreaState=o,""===s.text&&0===s.replacePrevCharCnt&&0===s.replaceNextCharCnt&&0===s.positionDelta||this._onType.fire(s))}))),this._register(this._textArea.onCut((e=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()}))),this._register(this._textArea.onCopy((e=>{this._ensureClipboardGetsEditorSelection(e)}))),this._register(this._textArea.onPaste((e=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),e.preventDefault(),!e.clipboardData)return;let[o,s]=ClipboardEventUtils.getTextData(e.clipboardData);o&&(s=s||InMemoryClipboardMetadataManager.INSTANCE.get(o),this._onPaste.fire({text:o,metadata:s}))}))),this._register(this._textArea.onFocus((()=>{const e=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!e&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()}))),this._register(this._textArea.onBlur((()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(this._textArea.onSyntheticTap((()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let e=0;return u.nm(document,"selectionchange",(o=>{if(!this._hasFocus)return;if(this._currentComposition)return;if(!this._browser.isChrome)return;const s=Date.now(),l=s-e;if(e=s,l<5)return;const d=s-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),d<100)return;if(!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const u=this._textArea.getValue();if(this._textAreaState.value!==u)return;const g=this._textArea.getSelectionStart(),p=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===g&&this._textAreaState.selectionEnd===p)return;const m=this._textAreaState.deduceEditorPosition(g),f=this._host.deduceModelPosition(m[0],m[1],m[2]),_=this._textAreaState.deduceEditorPosition(p),C=this._host.deduceModelPosition(_[0],_[1],_[2]),b=new w.Y(f.lineNumber,f.column,C.lineNumber,C.column);this._onSelectionChangeRequest.fire(b)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,o){this._hasFocus||(o=o.collapseSelection()),o.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=o}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const o=this._host.getDataToCopy(),s={version:1,isFromEmptySelection:o.isFromEmptySelection,multicursorText:o.multicursorText,mode:o.mode};InMemoryClipboardMetadataManager.INSTANCE.set(this._browser.isFirefox?o.text.replace(/\r\n/g,"\n"):o.text,s),e.preventDefault(),e.clipboardData&&ClipboardEventUtils.setTextData(e.clipboardData,o.text,o.html,s)}}class ClipboardEventUtils{static getTextData(e){const o=e.getData(_.v.text);let s=null;const l=e.getData("vscode-editor-data");if("string"===typeof l)try{s=JSON.parse(l),1!==s.version&&(s=null)}catch(d){}return[o,s]}static setTextData(e,o,s,l){e.setData(_.v.text,o),"string"===typeof s&&e.setData("text/html",s),e.setData("vscode-editor-data",JSON.stringify(l))}}class TextAreaWrapper extends f.JT{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(u.IC(this._actual,"keydown")).event,this.onKeyUp=this._register(u.IC(this._actual,"keyup")).event,this.onCompositionStart=this._register(u.IC(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(u.IC(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(u.IC(this._actual,"compositionend")).event,this.onInput=this._register(u.IC(this._actual,"input")).event,this.onCut=this._register(u.IC(this._actual,"cut")).event,this.onCopy=this._register(u.IC(this._actual,"copy")).event,this.onPaste=this._register(u.IC(this._actual,"paste")).event,this.onFocus=this._register(u.IC(this._actual,"focus")).event,this.onBlur=this._register(u.IC(this._actual,"blur")).event,this._onSyntheticTap=this._register(new m.Q5),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(u.nm(this._actual,l.Tap,(()=>this._onSyntheticTap.fire())))}hasFocus(){const e=u.Ay(this._actual);return e?e.activeElement===this._actual:!!u.Uw(this._actual)&&document.activeElement===this._actual}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,o){const s=this._actual;s.value!==o&&(this.setIgnoreSelectionChangeTime("setValue"),s.value=o)}getSelectionStart(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,o,s){const l=this._actual;let g=null;const p=u.Ay(l);g=p?p.activeElement:document.activeElement;const m=g===l,f=l.selectionStart,_=l.selectionEnd;if(m&&f===o&&_===s)d.isFirefox&&window.parent!==window&&l.focus();else{if(m)return this.setIgnoreSelectionChangeTime("setSelectionRange"),l.setSelectionRange(o,s),void(d.isFirefox&&window.parent!==window&&l.focus());try{const e=u.vL(l);this.setIgnoreSelectionChangeTime("setSelectionRange"),l.focus(),l.setSelectionRange(o,s),u._0(l,e)}catch(C){}}}}},5887:function(e,o,s){"use strict";s.d(o,{al:function(){return g},ee:function(){return PagedScreenReaderStrategy},un:function(){return TextAreaState}});var l=s(2677),d=s(187),u=s(4314);const g=!1;class TextAreaState{constructor(e,o,s,l,d){this.value=e,this.selectionStart=o,this.selectionEnd=s,this.selectionStartPosition=l,this.selectionEndPosition=d}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e){return new TextAreaState(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new TextAreaState(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,o,s){g&&console.log(`writeToTextArea ${e}: ${this.toString()}`),o.setValue(e,this.value),s&&o.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const o=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,o,-1)}if(e>=this.selectionEnd){const o=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,o,1)}const o=this.value.substring(this.selectionStart,e);if(-1===o.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(this.selectionStartPosition,o,1);const s=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,s,-1)}_finishDeduceEditorPosition(e,o,s){let l=0,d=-1;while(-1!==(d=o.indexOf("\n",d+1)))l++;return[e,s*o.length,l]}static deduceInput(e,o,s){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};g&&(console.log("------------------------deduceInput"),console.log(`PREVIOUS STATE: ${e.toString()}`),console.log(`CURRENT STATE: ${o.toString()}`));const d=Math.min(l.Mh(e.value,o.value),e.selectionStart,o.selectionStart),u=Math.min(l.P1(e.value,o.value),e.value.length-e.selectionEnd,o.value.length-o.selectionEnd),p=e.value.substring(d,e.value.length-u),m=o.value.substring(d,o.value.length-u),f=e.selectionStart-d,_=e.selectionEnd-d,C=o.selectionStart-d,b=o.selectionEnd-d;if(g&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${p}>, selectionStart: ${f}, selectionEnd: ${_}`),console.log(`AFTER DIFFING CURRENT STATE: <${m}>, selectionStart: ${C}, selectionEnd: ${b}`)),C===b){const o=e.selectionStart-d;return g&&console.log(`REMOVE PREVIOUS: ${o} chars`),{text:m,replacePrevCharCnt:o,replaceNextCharCnt:0,positionDelta:0}}const w=_-f;return{text:m,replacePrevCharCnt:w,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,o){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(g&&(console.log("------------------------deduceAndroidCompositionInput"),console.log(`PREVIOUS STATE: ${e.toString()}`),console.log(`CURRENT STATE: ${o.toString()}`)),e.value===o.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:o.selectionEnd-e.selectionEnd};const s=Math.min(l.Mh(e.value,o.value),e.selectionEnd),d=Math.min(l.P1(e.value,o.value),e.value.length-e.selectionEnd),u=e.value.substring(s,e.value.length-d),p=o.value.substring(s,o.value.length-d),m=e.selectionStart-s,f=e.selectionEnd-s,_=o.selectionStart-s,C=o.selectionEnd-s;return g&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${u}>, selectionStart: ${m}, selectionEnd: ${f}`),console.log(`AFTER DIFFING CURRENT STATE: <${p}>, selectionStart: ${_}, selectionEnd: ${C}`)),{text:p,replacePrevCharCnt:f,replaceNextCharCnt:u.length-f,positionDelta:C-p.length}}}TextAreaState.EMPTY=new TextAreaState("",0,0,null,null);class PagedScreenReaderStrategy{static _getPageOfLine(e,o){return Math.floor((e-1)/o)}static _getRangeForPage(e,o){const s=e*o,l=s+1,d=s+o;return new u.e(l,1,d+1,1)}static fromEditorSelection(e,o,s,l,g){const p=PagedScreenReaderStrategy._getPageOfLine(s.startLineNumber,l),m=PagedScreenReaderStrategy._getRangeForPage(p,l),f=PagedScreenReaderStrategy._getPageOfLine(s.endLineNumber,l),_=PagedScreenReaderStrategy._getRangeForPage(f,l),C=m.intersectRanges(new u.e(1,1,s.startLineNumber,s.startColumn));let b=o.getValueInRange(C,1);const w=o.getLineCount(),S=o.getLineMaxColumn(w),y=_.intersectRanges(new u.e(s.endLineNumber,s.endColumn,w,S));let L,x=o.getValueInRange(y,1);if(p===f||p+1===f)L=o.getValueInRange(s,1);else{const e=m.intersectRanges(s),l=_.intersectRanges(s);L=o.getValueInRange(e,1)+String.fromCharCode(8230)+o.getValueInRange(l,1)}if(g){const e=500;b.length>e&&(b=b.substring(b.length-e,b.length)),x.length>e&&(x=x.substring(0,e)),L.length>2*e&&(L=L.substring(0,e)+String.fromCharCode(8230)+L.substring(L.length-e,L.length))}return new TextAreaState(b+L+x,b.length,b.length+L.length,new d.L(s.startLineNumber,s.startColumn),new d.L(s.endLineNumber,s.endColumn))}}},2549:function(e,o,s){"use strict";s.r(o),s.d(o,{CoreEditingCommands:function(){return I},CoreEditorCommand:function(){return CoreEditorCommand},CoreNavigationCommands:function(){return E},EditorScroll_:function(){return N},RevealLine_:function(){return D}});var l=s(3580),d=s(6268),u=s(8401),g=s(5152),p=s(6830),m=s(1640),f=s(5343),_=s(187),C=s(4314);class ColumnSelection{static columnSelect(e,o,s,l,d,u){const g=Math.abs(d-s)+1,p=s>d,m=l>u,b=l<u,w=[];for(let S=0;S<g;S++){const d=s+(p?-S:S),g=e.columnFromVisibleColumn(o,d,l),y=e.columnFromVisibleColumn(o,d,u),L=e.visibleColumnFromColumn(o,new _.L(d,g)),x=e.visibleColumnFromColumn(o,new _.L(d,y));if(b){if(L>u)continue;if(x<l)continue}if(m){if(x>l)continue;if(L<u)continue}w.push(new f.rS(new C.e(d,g,d,g),0,new _.L(d,y),0))}if(0===w.length)for(let S=0;S<g;S++){const e=s+(p?-S:S),l=o.getLineMaxColumn(e);w.push(new f.rS(new C.e(e,l,e,l),0,new _.L(e,l),0))}return{viewStates:w,reversed:p,fromLineNumber:s,fromVisualColumn:l,toLineNumber:d,toVisualColumn:u}}static columnSelectLeft(e,o,s){let l=s.toViewVisualColumn;return l>0&&l--,ColumnSelection.columnSelect(e,o,s.fromViewLineNumber,s.fromViewVisualColumn,s.toViewLineNumber,l)}static columnSelectRight(e,o,s){let l=0;const d=Math.min(s.fromViewLineNumber,s.toViewLineNumber),u=Math.max(s.fromViewLineNumber,s.toViewLineNumber);for(let p=d;p<=u;p++){const s=o.getLineMaxColumn(p),d=e.visibleColumnFromColumn(o,new _.L(p,s));l=Math.max(l,d)}let g=s.toViewVisualColumn;return g<l&&g++,this.columnSelect(e,o,s.fromViewLineNumber,s.fromViewVisualColumn,s.toViewLineNumber,g)}static columnSelectUp(e,o,s,l){const d=l?e.pageSize:1,u=Math.max(1,s.toViewLineNumber-d);return this.columnSelect(e,o,s.fromViewLineNumber,s.fromViewVisualColumn,u,s.toViewVisualColumn)}static columnSelectDown(e,o,s,l){const d=l?e.pageSize:1,u=Math.min(o.getLineCount(),s.toViewLineNumber+d);return this.columnSelect(e,o,s.fromViewLineNumber,s.fromViewVisualColumn,u,s.toViewVisualColumn)}}var b=s(9436),w=s(8108),S=s(4729),y=s(9102),L=s(8819),x=s(9989);const k=0;class CoreEditorCommand extends p._l{runEditorCommand(e,o,s){const l=o._getViewModel();l&&this.runCoreEditorCommand(l,s||{})}}var N,D,E;(function(e){const isEditorScrollArgs=function(e){if(!u.Kn(e))return!1;const o=e;return!!u.HD(o.to)&&(!(!u.o8(o.by)&&!u.HD(o.by))&&(!(!u.o8(o.value)&&!u.hj(o.value))&&!(!u.o8(o.revealCursor)&&!u.jn(o.revealCursor))))};function parse(o){let s,l;switch(o.to){case e.RawDirection.Up:s=1;break;case e.RawDirection.Down:s=2;break;default:return null}switch(o.by){case e.RawUnit.Line:l=1;break;case e.RawUnit.WrappedLine:l=2;break;case e.RawUnit.Page:l=3;break;case e.RawUnit.HalfPage:l=4;break;default:l=2}const d=Math.floor(o.value||1),u=!!o.revealCursor;return{direction:s,unit:l,value:d,revealCursor:u,select:!!o.select}}e.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:isEditorScrollArgs,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Down:"down"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"},e.parse=parse})(N||(N={})),function(e){const isRevealLineArgs=function(e){if(!u.Kn(e))return!1;const o=e;return!(!u.hj(o.lineNumber)&&!u.HD(o.lineNumber))&&!(!u.o8(o.at)&&!u.HD(o.at))};e.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:isRevealLineArgs,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(D||(D={}));class EditorOrNativeTextInputCommand{constructor(e){e.addImplementation(1e4,"code-editor",((e,o)=>{const s=e.get(m.$).getFocusedCodeEditor();return!(!s||!s.hasTextFocus())&&this._runEditorCommand(e,s,o)})),e.addImplementation(1e3,"generic-dom-input-textarea",((e,o)=>{const s=document.activeElement;return!!(s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0)&&(this.runDOMCommand(),!0)})),e.addImplementation(0,"generic-dom",((e,o)=>{const s=e.get(m.$).getActiveCodeEditor();return!!s&&(s.focus(),this._runEditorCommand(e,s,o))}))}_runEditorCommand(e,o,s){const l=this.runEditorCommand(e,o,s);return l||!0}}(function(e){class BaseMoveToCommand extends CoreEditorCommand{constructor(e){super(e),this._minimalReveal=e.minimalReveal,this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement();const s=e.setCursorStates(o.source,3,[w.P.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,o.position,o.viewPosition)]);s&&e.revealPrimaryCursor(o.source,!0,this._minimalReveal)}}e.MoveTo=(0,p.fK)(new BaseMoveToCommand({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=(0,p.fK)(new BaseMoveToCommand({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class ColumnSelectCommand extends CoreEditorCommand{runCoreEditorCommand(e,o){e.model.pushStackElement();const s=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),o);e.setCursorStates(o.source,3,s.viewStates.map((e=>f.Vi.fromViewState(e)))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:s.fromLineNumber,fromViewVisualColumn:s.fromVisualColumn,toViewLineNumber:s.toLineNumber,toViewVisualColumn:s.toVisualColumn}),s.reversed?e.revealTopMostCursor(o.source):e.revealBottomMostCursor(o.source)}}e.ColumnSelect=(0,p.fK)(new class extends ColumnSelectCommand{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,o,s,l){const d=e.model.validatePosition(l.position),u=e.coordinatesConverter.validateViewPosition(new _.L(l.viewPosition.lineNumber,l.viewPosition.column),d),g=l.doColumnSelect?s.fromViewLineNumber:u.lineNumber,p=l.doColumnSelect?s.fromViewVisualColumn:l.mouseColumn-1;return ColumnSelection.columnSelect(e.cursorConfig,e,g,p,u.lineNumber,l.mouseColumn-1)}}),e.CursorColumnSelectLeft=(0,p.fK)(new class extends ColumnSelectCommand{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,o,s,l){return ColumnSelection.columnSelectLeft(e.cursorConfig,e,s)}}),e.CursorColumnSelectRight=(0,p.fK)(new class extends ColumnSelectCommand{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,o,s,l){return ColumnSelection.columnSelectRight(e.cursorConfig,e,s)}});class ColumnSelectUpCommand extends ColumnSelectCommand{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,o,s,l){return ColumnSelection.columnSelectUp(e.cursorConfig,e,s,this._isPaged)}}e.CursorColumnSelectUp=(0,p.fK)(new ColumnSelectUpCommand({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=(0,p.fK)(new ColumnSelectUpCommand({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:3595,linux:{primary:0}}}));class ColumnSelectDownCommand extends ColumnSelectCommand{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,o,s,l){return ColumnSelection.columnSelectDown(e.cursorConfig,e,s,this._isPaged)}}e.CursorColumnSelectDown=(0,p.fK)(new ColumnSelectDownCommand({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=(0,p.fK)(new ColumnSelectDownCommand({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:3596,linux:{primary:0}}}));class CursorMoveImpl extends CoreEditorCommand{constructor(){super({id:"cursorMove",precondition:void 0,description:w.N.description})}runCoreEditorCommand(e,o){const s=w.N.parse(o);s&&this._runCursorMove(e,o.source,s)}_runCursorMove(e,o,s){e.model.pushStackElement(),e.setCursorStates(o,3,CursorMoveImpl._move(e,e.getCursorStates(),s)),e.revealPrimaryCursor(o,!0)}static _move(e,o,s){const l=s.select,d=s.value;switch(s.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return w.P.simpleMove(e,o,s.direction,l,d,s.unit);case 11:case 13:case 12:case 14:return w.P.viewportMove(e,o,s.direction,l,d);default:return null}}}e.CursorMoveImpl=CursorMoveImpl,e.CursorMove=(0,p.fK)(new CursorMoveImpl);class CursorMoveBasedCommand extends CoreEditorCommand{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,o){let s=this._staticArgs;-1===this._staticArgs.value&&(s={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:o.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(o.source,3,w.P.simpleMove(e,e.getCursorStates(),s.direction,s.select,s.value,s.unit)),e.revealPrimaryCursor(o.source,!0)}}e.CursorLeft=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:1039}})),e.CursorRight=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:1041}})),e.CursorUp=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:11}})),e.CursorPageUpSelect=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:1035}})),e.CursorDown=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:12}})),e.CursorPageDownSelect=(0,p.fK)(new CursorMoveBasedCommand({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:1036}})),e.CreateCursor=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,o){let s;s=o.wholeLine?w.P.line(e,e.getPrimaryCursorState(),!1,o.position,o.viewPosition):w.P.moveTo(e,e.getPrimaryCursorState(),!1,o.position,o.viewPosition);const l=e.getCursorStates();if(l.length>1){const d=s.modelState?s.modelState.position:null,u=s.viewState?s.viewState.position:null;for(let s=0,g=l.length;s<g;s++){const g=l[s];if((!d||g.modelState.selection.containsPosition(d))&&(!u||g.viewState.selection.containsPosition(u)))return l.splice(s,1),e.model.pushStackElement(),void e.setCursorStates(o.source,3,l)}}l.push(s),e.model.pushStackElement(),e.setCursorStates(o.source,3,l)}}),e.LastCursorMoveToSelect=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,o){const s=e.getLastAddedCursorIndex(),l=e.getCursorStates(),d=l.slice(0);d[s]=w.P.moveTo(e,l[s],!0,o.position,o.viewPosition),e.model.pushStackElement(),e.setCursorStates(o.source,3,d)}});class HomeCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,w.P.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(o.source,!0)}}e.CursorHome=(0,p.fK)(new HomeCommand({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=(0,p.fK)(new HomeCommand({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class LineStartCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(o.source,!0)}_exec(e){const o=[];for(let s=0,l=e.length;s<l;s++){const l=e[s],d=l.modelState.position.lineNumber;o[s]=f.Vi.fromModelState(l.modelState.move(this._inSelectionMode,d,1,0))}return o}}e.CursorLineStart=(0,p.fK)(new LineStartCommand({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=(0,p.fK)(new LineStartCommand({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:0,mac:{primary:1311}}}));class EndCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,w.P.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,o.sticky||!1)),e.revealPrimaryCursor(o.source,!0)}}e.CursorEnd=(0,p.fK)(new EndCommand({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:k,kbExpr:y.u.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:l.N("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=(0,p.fK)(new EndCommand({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:k,kbExpr:y.u.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:l.N("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class LineEndCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(o.source,!0)}_exec(e,o){const s=[];for(let l=0,d=o.length;l<d;l++){const d=o[l],u=d.modelState.position.lineNumber,g=e.model.getLineMaxColumn(u);s[l]=f.Vi.fromModelState(d.modelState.move(this._inSelectionMode,u,g,0))}return s}}e.CursorLineEnd=(0,p.fK)(new LineEndCommand({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=(0,p.fK)(new LineEndCommand({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:0,mac:{primary:1315}}}));class TopCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,w.P.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(o.source,!0)}}e.CursorTop=(0,p.fK)(new TopCommand({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=(0,p.fK)(new TopCommand({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:3086,mac:{primary:3088}}}));class BottomCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,w.P.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(o.source,!0)}}e.CursorBottom=(0,p.fK)(new BottomCommand({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=(0,p.fK)(new BottomCommand({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:3085,mac:{primary:3090}}}));class EditorScrollImpl extends CoreEditorCommand{constructor(){super({id:"editorScroll",precondition:void 0,description:N.description})}runCoreEditorCommand(e,o){const s=N.parse(o);s&&this._runEditorScroll(e,o.source,s)}_runEditorScroll(e,o,s){const l=this._computeDesiredScrollTop(e,s);if(s.revealCursor){const d=e.getCompletelyVisibleViewRangeAtScrollTop(l);e.setCursorStates(o,3,[w.P.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),d,s.select)])}e.viewLayout.setScrollPosition({scrollTop:l},0)}_computeDesiredScrollTop(e,o){if(1===o.unit){const s=e.getCompletelyVisibleViewRange(),l=e.coordinatesConverter.convertViewRangeToModelRange(s);let d;d=1===o.direction?Math.max(1,l.startLineNumber-o.value):Math.min(e.model.getLineCount(),l.startLineNumber+o.value);const u=e.coordinatesConverter.convertModelPositionToViewPosition(new _.L(d,1));return e.viewLayout.getVerticalOffsetForLineNumber(u.lineNumber)}let s;s=3===o.unit?e.cursorConfig.pageSize*o.value:4===o.unit?Math.round(e.cursorConfig.pageSize/2)*o.value:o.value;const l=(1===o.direction?-1:1)*s;return e.viewLayout.getCurrentScrollTop()+l*e.cursorConfig.lineHeight}}e.EditorScrollImpl=EditorScrollImpl,e.EditorScroll=(0,p.fK)(new EditorScrollImpl),e.ScrollLineUp=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(o,s){e.EditorScroll._runEditorScroll(o,s.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageUp=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(o,s){e.EditorScroll._runEditorScroll(o,s.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),e.ScrollLineDown=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(o,s){e.EditorScroll._runEditorScroll(o,s.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageDown=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(o,s){e.EditorScroll._runEditorScroll(o,s.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class WordCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,[w.P.word(e,e.getPrimaryCursorState(),this._inSelectionMode,o.position)]),e.revealPrimaryCursor(o.source,!0)}}e.WordSelect=(0,p.fK)(new WordCommand({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=(0,p.fK)(new WordCommand({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,o){const s=e.getLastAddedCursorIndex(),l=e.getCursorStates(),d=l.slice(0),u=l[s];d[s]=w.P.word(e,u,u.modelState.hasSelection(),o.position),e.model.pushStackElement(),e.setCursorStates(o.source,3,d)}});class LineCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,[w.P.line(e,e.getPrimaryCursorState(),this._inSelectionMode,o.position,o.viewPosition)]),e.revealPrimaryCursor(o.source,!1)}}e.LineSelect=(0,p.fK)(new LineCommand({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=(0,p.fK)(new LineCommand({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class LastCursorLineCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,o){const s=e.getLastAddedCursorIndex(),l=e.getCursorStates(),d=l.slice(0);d[s]=w.P.line(e,l[s],this._inSelectionMode,o.position,o.viewPosition),e.model.pushStackElement(),e.setCursorStates(o.source,3,d)}}e.LastCursorLineSelect=(0,p.fK)(new LastCursorLineCommand({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=(0,p.fK)(new LastCursorLineCommand({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"cancelSelection",precondition:y.u.hasNonEmptySelection,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,[w.P.cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(o.source,!0)}}),e.RemoveSecondaryCursors=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"removeSecondaryCursors",precondition:y.u.hasMultipleSelections,kbOpts:{weight:k+1,kbExpr:y.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(o.source,!0),(0,g.i7)(l.N("removedCursor","Removed secondary cursors"))}}),e.RevealLine=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"revealLine",precondition:void 0,description:D.description})}runCoreEditorCommand(e,o){const s=o,l=s.lineNumber||0;let d="number"===typeof l?l+1:parseInt(l)+1;d<1&&(d=1);const u=e.model.getLineCount();d>u&&(d=u);const g=new C.e(d,1,d,e.model.getLineMaxColumn(d));let p=0;if(s.at)switch(s.at){case D.RawAtArgument.Top:p=3;break;case D.RawAtArgument.Center:p=1;break;case D.RawAtArgument.Bottom:p=4;break;default:break}const m=e.coordinatesConverter.convertModelRangeToViewRange(g);e.revealRange(o.source,!1,m,p,0)}}),e.SelectAll=new class extends EditorOrNativeTextInputCommand{constructor(){super(p.Sq)}runDOMCommand(){d.isFirefox&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(e,o,s){const l=o._getViewModel();l&&this.runCoreEditorCommand(l,s)}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[w.P.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=(0,p.fK)(new class extends CoreEditorCommand{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,o){e.model.pushStackElement(),e.setCursorStates(o.source,3,[f.Vi.fromModelSelection(o.selection)])}})})(E||(E={}));const T=L.Ao.and(y.u.textInputFocus,y.u.columnSelection);function registerColumnSelection(e,o){x.W.registerKeybindingRule({id:e,primary:o,when:T,weight:k+1})}function registerCommand(e){return e.register(),e}var I;registerColumnSelection(E.CursorColumnSelectLeft.id,1039),registerColumnSelection(E.CursorColumnSelectRight.id,1041),registerColumnSelection(E.CursorColumnSelectUp.id,1040),registerColumnSelection(E.CursorColumnSelectPageUp.id,1035),registerColumnSelection(E.CursorColumnSelectDown.id,1042),registerColumnSelection(E.CursorColumnSelectPageDown.id,1036),function(e){class CoreEditingCommand extends p._l{runEditorCommand(e,o,s){const l=o._getViewModel();l&&this.runCoreEditingCommand(o,l,s||{})}}e.CoreEditingCommand=CoreEditingCommand,e.LineBreakInsert=(0,p.fK)(new class extends CoreEditingCommand{constructor(){super({id:"lineBreakInsert",precondition:y.u.writable,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,o,s){e.pushUndoStop(),e.executeCommands(this.id,S.u.lineBreakInsert(o.cursorConfig,o.model,o.getCursorStates().map((e=>e.modelState.selection))))}}),e.Outdent=(0,p.fK)(new class extends CoreEditingCommand{constructor(){super({id:"outdent",precondition:y.u.writable,kbOpts:{weight:k,kbExpr:L.Ao.and(y.u.editorTextFocus,y.u.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,o,s){e.pushUndoStop(),e.executeCommands(this.id,S.u.outdent(o.cursorConfig,o.model,o.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.Tab=(0,p.fK)(new class extends CoreEditingCommand{constructor(){super({id:"tab",precondition:y.u.writable,kbOpts:{weight:k,kbExpr:L.Ao.and(y.u.editorTextFocus,y.u.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,o,s){e.pushUndoStop(),e.executeCommands(this.id,S.u.tab(o.cursorConfig,o.model,o.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.DeleteLeft=(0,p.fK)(new class extends CoreEditingCommand{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,o,s){const[l,d]=b.A.deleteLeft(o.getPrevEditOperationType(),o.cursorConfig,o.model,o.getCursorStates().map((e=>e.modelState.selection)),o.getCursorAutoClosedCharacters());l&&e.pushUndoStop(),e.executeCommands(this.id,d),o.setPrevEditOperationType(2)}}),e.DeleteRight=(0,p.fK)(new class extends CoreEditingCommand{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:k,kbExpr:y.u.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,o,s){const[l,d]=b.A.deleteRight(o.getPrevEditOperationType(),o.cursorConfig,o.model,o.getCursorStates().map((e=>e.modelState.selection)));l&&e.pushUndoStop(),e.executeCommands(this.id,d),o.setPrevEditOperationType(3)}}),e.Undo=new class extends EditorOrNativeTextInputCommand{constructor(){super(p.n_)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(e,o,s){if(o.hasModel()&&!0!==o.getOption(81))return o.getModel().undo()}},e.Redo=new class extends EditorOrNativeTextInputCommand{constructor(){super(p.kz)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(e,o,s){if(o.hasModel()&&!0!==o.getOption(81))return o.getModel().redo()}}}(I||(I={}));class EditorHandlerCommand extends p.mY{constructor(e,o,s){super({id:e,precondition:void 0,description:s}),this._handlerId=o}runCommand(e,o){const s=e.get(m.$).getFocusedCodeEditor();s&&s.trigger("keyboard",this._handlerId,o)}}function registerOverwritableCommand(e,o){registerCommand(new EditorHandlerCommand("default:"+e,e)),registerCommand(new EditorHandlerCommand(e,e,o))}registerOverwritableCommand("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),registerOverwritableCommand("replacePreviousChar"),registerOverwritableCommand("compositionType"),registerOverwritableCommand("compositionStart"),registerOverwritableCommand("compositionEnd"),registerOverwritableCommand("paste"),registerOverwritableCommand("cut")},5520:function(e,o,s){"use strict";s.d(o,{CL:function(){return isCodeEditor},Pi:function(){return getCodeEditor},QI:function(){return isDiffEditor}});var l=s(6518);function isCodeEditor(e){return!(!e||"function"!==typeof e.getEditorType)&&e.getEditorType()===l.g.ICodeEditor}function isDiffEditor(e){return!(!e||"function"!==typeof e.getEditorType)&&e.getEditorType()===l.g.IDiffEditor}function getCodeEditor(e){return isCodeEditor(e)?e:isDiffEditor(e)?e.getModifiedEditor():null}},9994:function(e,o,s){"use strict";s.d(o,{N5:function(){return EditorMouseEventFactory},Pp:function(){return createCoordinatesRelativeToEditor},YN:function(){return PageCoordinates},gy:function(){return EditorMouseEvent},iB:function(){return GlobalEditorMouseMoveMonitor},kG:function(){return createEditorPagePosition},rU:function(){return ClientCoordinates},t7:function(){return DynamicCssRules},tC:function(){return EditorPointerEventFactory}});var l=s(5321),d=s(7974),u=s(3938),g=s(5393),p=s(5976),m=s(3910);class PageCoordinates{constructor(e,o){this.x=e,this.y=o,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new ClientCoordinates(this.x-l.DI.scrollX,this.y-l.DI.scrollY)}}class ClientCoordinates{constructor(e,o){this.clientX=e,this.clientY=o,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new PageCoordinates(this.clientX+l.DI.scrollX,this.clientY+l.DI.scrollY)}}class EditorPagePosition{constructor(e,o,s,l){this.x=e,this.y=o,this.width=s,this.height=l,this._editorPagePositionBrand=void 0}}class CoordinatesRelativeToEditor{constructor(e,o){this.x=e,this.y=o,this._positionRelativeToEditorBrand=void 0}}function createEditorPagePosition(e){const o=l.i(e);return new EditorPagePosition(o.left,o.top,o.width,o.height)}function createCoordinatesRelativeToEditor(e,o,s){const l=o.width/e.offsetWidth,d=o.height/e.offsetHeight,u=(s.x-o.x)/l,g=(s.y-o.y)/d;return new CoordinatesRelativeToEditor(u,g)}class EditorMouseEvent extends u.n{constructor(e,o){super(e),this._editorMouseEventBrand=void 0,this.pos=new PageCoordinates(this.posx,this.posy),this.editorPos=createEditorPagePosition(o),this.relativePos=createCoordinatesRelativeToEditor(o,this.editorPos,this.pos)}}class EditorMouseEventFactory{constructor(e){this._editorViewDomNode=e}_create(e){return new EditorMouseEvent(e,this._editorViewDomNode)}onContextMenu(e,o){return l.nm(e,"contextmenu",(e=>{o(this._create(e))}))}onMouseUp(e,o){return l.nm(e,"mouseup",(e=>{o(this._create(e))}))}onMouseDown(e,o){return l.nm(e,"mousedown",(e=>{o(this._create(e))}))}onMouseLeave(e,o){return l.j_(e,(e=>{o(this._create(e))}))}onMouseMoveThrottled(e,o,s,d){const myMerger=(e,o)=>s(e,this._create(o));return l.Y_(e,"mousemove",o,myMerger,d)}}class EditorPointerEventFactory{constructor(e){this._editorViewDomNode=e}_create(e){return new EditorMouseEvent(e,this._editorViewDomNode)}onPointerUp(e,o){return l.nm(e,"pointerup",(e=>{o(this._create(e))}))}onPointerDown(e,o){return l.nm(e,"pointerdown",(e=>{o(this._create(e))}))}onPointerLeave(e,o){return l.RE(e,(e=>{o(this._create(e))}))}onPointerMoveThrottled(e,o,s,d){const myMerger=(e,o)=>s(e,this._create(o));return l.Y_(e,"pointermove",o,myMerger,d)}}class GlobalEditorMouseMoveMonitor extends p.JT{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new d.Z),this._keydownListener=null}startMonitoring(e,o,s,d,u){this._keydownListener=l.mu(document,"keydown",(e=>{const o=e.toKeybinding();o.isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,e.browserEvent)}),!0);const myMerger=(e,o)=>s(e,new EditorMouseEvent(o,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,o,myMerger,d,(e=>{this._keydownListener.dispose(),u(e)}))}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class DynamicCssRules{constructor(e){this._editor=e,this._instanceId=++DynamicCssRules._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new g.pY((()=>this.garbageCollect()),1e3)}createClassNameRef(e){const o=this.getOrCreateRule(e);return o.increaseRefCount(),{className:o.className,dispose:()=>{o.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const o=this.computeUniqueKey(e);let s=this._rules.get(o);if(!s){const d=this._counter++;s=new RefCountedCssRule(o,`dyn-rule-${this._instanceId}-${d}`,l.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(o,s)}return s}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}DynamicCssRules._idPool=0;class RefCountedCssRule{constructor(e,o,s,d){this.key=e,this.className=o,this.properties=d,this._referenceCount=0,this._styleElement=l.dS(s),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,o){let s=`.${e} {`;for(const l in o){const e=o[l];let d;d="object"===typeof e?`var(${(0,m.QO2)(e.id)})`:e;const u=camelToDashes(l);s+=`\n\t${u}: ${d};`}return s+="\n}",s}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function camelToDashes(e){return e.replace(/(^[A-Z])/,(([e])=>e.toLowerCase())).replace(/([A-Z])/g,(([e])=>`-${e.toLowerCase()}`))}},6830:function(e,o,s){"use strict";s.d(o,{AJ:function(){return MultiCommand},QG:function(){return registerInstantiatedEditorAction},Qr:function(){return registerEditorAction},R6:function(){return EditorAction},Sq:function(){return T},Uc:function(){return l},_K:function(){return registerEditorContribution},_l:function(){return EditorCommand},fK:function(){return registerEditorCommand},jY:function(){return MultiEditorAction},kz:function(){return E},mY:function(){return Command},n_:function(){return D},rn:function(){return registerMultiEditorAction},sb:function(){return registerModelAndPositionCommand}});var l,d=s(3580),u=s(666),g=s(1640),p=s(187),m=s(3733),f=s(8216),_=s(4144),C=s(4565),b=s(8819),w=s(2065),S=s(9989),y=s(9872),L=s(829),x=s(8401),k=s(3557);class Command{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const o of e){let e=o.kbExpr;this.precondition&&(e=e?b.Ao.and(e,this.precondition):this.precondition);const s={id:this.id,weight:o.weight,args:o.args,when:e,primary:o.primary,secondary:o.secondary,win:o.win,linux:o.linux,mac:o.mac};S.W.registerKeybindingRule(s)}}C.P0.registerCommand({id:this.id,handler:(e,o)=>this.runCommand(e,o),description:this._description})}_registerMenuItem(e){_.BH.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class MultiCommand extends Command{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,o,s){return this._implementations.push({priority:e,name:o,implementation:s}),this._implementations.sort(((e,o)=>o.priority-e.priority)),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===s)return void this._implementations.splice(e,1)}}}runCommand(e,o){const s=e.get(k.VZ);s.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const l of this._implementations){const d=l.implementation(e,o);if(d){if(s.trace(`Command '${this.id}' was handled by '${l.name}'.`),"boolean"===typeof d)return;return d}}s.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class ProxyCommand extends Command{constructor(e,o){super(o),this.command=e}runCommand(e,o){return this.command.runCommand(e,o)}}class EditorCommand extends Command{static bindToContribution(e){return class EditorControllerCommandImpl extends EditorCommand{constructor(e){super(e),this._callback=e.handler}runEditorCommand(o,s,l){const d=e(s);d&&this._callback(d,l)}}}runCommand(e,o){const s=e.get(g.$),l=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(l)return l.invokeWithinContext((e=>{const s=e.get(b.i6);if(s.contextMatchesRules((0,x.f6)(this.precondition)))return this.runEditorCommand(e,l,o)}))}}class EditorAction extends EditorCommand{constructor(e){super(EditorAction.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let o;function withDefaults(o){return o.menuId||(o.menuId=_.eH.EditorContext),o.title||(o.title=e.label),o.when=b.Ao.and(e.precondition,o.when),o}return o=Array.isArray(e.menuOpts)?e.menuOpts:e.menuOpts?[e.menuOpts]:[],Array.isArray(e.contextMenuOpts)?o.push(...e.contextMenuOpts.map(withDefaults)):e.contextMenuOpts&&o.push(withDefaults(e.contextMenuOpts)),e.menuOpts=o,e}runEditorCommand(e,o,s){return this.reportTelemetry(e,o),this.run(e,o,s||{})}reportTelemetry(e,o){e.get(L.b).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class MultiEditorAction extends EditorAction{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,o){return this._implementations.push([e,o]),this._implementations.sort(((e,o)=>o[0]-e[0])),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e][1]===o)return void this._implementations.splice(e,1)}}}run(e,o,s){for(const l of this._implementations){const d=l[1](e,o,s);if(d){if("boolean"===typeof d)return;return d}}}}function registerModelAndPositionCommand(e,o){C.P0.registerCommand(e,(function(e,...s){const l=e.get(w.TG),[d,g]=s;(0,x.p_)(u.o.isUri(d)),(0,x.p_)(p.L.isIPosition(g));const _=e.get(m.q).getModel(d);if(_){const e=p.L.lift(g);return l.invokeFunction(o,_,e,...s.slice(2))}return e.get(f.S).createModelReference(d).then((e=>new Promise(((d,u)=>{try{const u=l.invokeFunction(o,e.object.textEditorModel,p.L.lift(g),s.slice(2));d(u)}catch(m){u(m)}})).finally((()=>{e.dispose()}))))}))}function registerEditorCommand(e){return EditorContributionRegistry.INSTANCE.registerEditorCommand(e),e}function registerEditorAction(e){const o=new e;return EditorContributionRegistry.INSTANCE.registerEditorAction(o),o}function registerMultiEditorAction(e){return EditorContributionRegistry.INSTANCE.registerEditorAction(e),e}function registerInstantiatedEditorAction(e){EditorContributionRegistry.INSTANCE.registerEditorAction(e)}function registerEditorContribution(e,o){EditorContributionRegistry.INSTANCE.registerEditorContribution(e,o)}(function(e){function getEditorCommand(e){return EditorContributionRegistry.INSTANCE.getEditorCommand(e)}function getEditorActions(){return EditorContributionRegistry.INSTANCE.getEditorActions()}function getEditorContributions(){return EditorContributionRegistry.INSTANCE.getEditorContributions()}function getSomeEditorContributions(e){return EditorContributionRegistry.INSTANCE.getEditorContributions().filter((o=>e.indexOf(o.id)>=0))}function getDiffEditorContributions(){return EditorContributionRegistry.INSTANCE.getDiffEditorContributions()}e.getEditorCommand=getEditorCommand,e.getEditorActions=getEditorActions,e.getEditorContributions=getEditorContributions,e.getSomeEditorContributions=getSomeEditorContributions,e.getDiffEditorContributions=getDiffEditorContributions})(l||(l={}));const N={EditorCommonContributions:"editor.contributions"};class EditorContributionRegistry{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,o){this.editorContributions.push({id:e,ctor:o})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}function registerCommand(e){return e.register(),e}EditorContributionRegistry.INSTANCE=new EditorContributionRegistry,y.B.add(N.EditorCommonContributions,EditorContributionRegistry.INSTANCE);const D=registerCommand(new MultiCommand({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:_.eH.MenubarEditMenu,group:"1_do",title:d.N({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:_.eH.CommandPalette,group:"",title:d.N("undo","Undo"),order:1}]}));registerCommand(new ProxyCommand(D,{id:"default:undo",precondition:void 0}));const E=registerCommand(new MultiCommand({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:_.eH.MenubarEditMenu,group:"1_do",title:d.N({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:_.eH.CommandPalette,group:"",title:d.N("redo","Redo"),order:1}]}));registerCommand(new ProxyCommand(E,{id:"default:redo",precondition:void 0}));const T=registerCommand(new MultiCommand({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:_.eH.MenubarSelectionMenu,group:"1_basic",title:d.N({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:_.eH.CommandPalette,group:"",title:d.N("selectAll","Select All"),order:1}]}))},6007:function(e,o,s){"use strict";s.d(o,{Gl:function(){return ResourceTextEdit},fo:function(){return ResourceEdit},vu:function(){return g}});var l=s(2065),d=s(666),u=s(8401);const g=(0,l.yh)("IWorkspaceEditService");function isWorkspaceFileEdit(e){return(0,u.Kn)(e)&&(Boolean(e.newUri)||Boolean(e.oldUri))}function isWorkspaceTextEdit(e){return(0,u.Kn)(e)&&d.o.isUri(e.resource)&&(0,u.Kn)(e.edit)}class ResourceEdit{constructor(e){this.metadata=e}static convert(e){return e.edits.map((e=>{if(isWorkspaceTextEdit(e))return new ResourceTextEdit(e.resource,e.edit,e.modelVersionId,e.metadata);if(isWorkspaceFileEdit(e))return new ResourceFileEdit(e.oldUri,e.newUri,e.options,e.metadata);throw new Error("Unsupported edit")}))}}class ResourceTextEdit extends ResourceEdit{constructor(e,o,s,l){super(l),this.resource=e,this.textEdit=o,this.versionId=s}}class ResourceFileEdit extends ResourceEdit{constructor(e,o,s,l){super(l),this.oldResource=e,this.newResource=o,this.options=s}}},1640:function(e,o,s){"use strict";s.d(o,{$:function(){return d}});var l=s(2065);const d=(0,l.yh)("codeEditorService")},3407:function(e,o,s){"use strict";s.d(o,{Z:function(){return StableEditorScrollState}});class StableEditorScrollState{constructor(e,o,s){this._visiblePosition=e,this._visiblePositionScrollDelta=o,this._cursorPosition=s}static capture(e){let o=null,s=0;if(0!==e.getScrollTop()){const l=e.getVisibleRanges();if(l.length>0){o=l[0].getStartPosition();const d=e.getTopForPosition(o.lineNumber,o.column);s=e.getScrollTop()-d}}return new StableEditorScrollState(o,s,e.getPosition())}restore(e){if(this._visiblePosition){const o=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(o+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const o=e.getPosition();if(!this._cursorPosition||!o)return;const s=e.getTopForLineNumber(o.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+s)}}},9182:function(e,o,s){"use strict";s.d(o,{Gm:function(){return at}});var l=s(6357),d=s(6830),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let u=class MarkerDecorationsContribution{constructor(e,o){}dispose(){}};u.ID="editor.contrib.markerDecorations",u=__decorate([__param(1,l.i)],u),(0,d._K)(u.ID,u);var g=s(3580),p=s(5321),m=s(7301),f=s(4669),_=s(5976),C=s(6663),b=s(6268),w=s(9488),S=s(6248),y=s(1432),L=s(4534),x=s(6059),k=s(6626);function migrateOptions(e){const o=e.wordWrap;!0===o?e.wordWrap="on":!1===o&&(e.wordWrap="off");const s=e.lineNumbers;!0===s?e.lineNumbers="on":!1===s&&(e.lineNumbers="off");const l=e.autoClosingBrackets;!1===l&&(e.autoClosingBrackets="never",e.autoClosingQuotes="never",e.autoSurround="never");const d=e.cursorBlinking;"visible"===d&&(e.cursorBlinking="solid");const u=e.renderWhitespace;!0===u?e.renderWhitespace="boundary":!1===u&&(e.renderWhitespace="none");const g=e.renderLineHighlight;!0===g?e.renderLineHighlight="line":!1===g&&(e.renderLineHighlight="none");const p=e.acceptSuggestionOnEnter;!0===p?e.acceptSuggestionOnEnter="on":!1===p&&(e.acceptSuggestionOnEnter="off");const m=e.tabCompletion;!1===m?e.tabCompletion="off":!0===m&&(e.tabCompletion="onlySnippets");const f=e.suggest;if(f&&"object"===typeof f.filteredTypes&&f.filteredTypes){const e={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};(0,k.E)(e,(e=>{const o=f.filteredTypes[e.key];!1===o&&(f[e.value]=o)}))}const _=e.hover;!0===_?e.hover={enabled:!0}:!1===_&&(e.hover={enabled:!1});const C=e.parameterHints;!0===C?e.parameterHints={enabled:!0}:!1===C&&(e.parameterHints={enabled:!1});const b=e.autoIndent;!0===b?e.autoIndent="full":!1===b&&(e.autoIndent="advanced");const w=e.matchBrackets;!0===w?e.matchBrackets="always":!1===w&&(e.matchBrackets="never");const{renderIndentGuides:S,highlightActiveIndentGuide:y}=e;e.guides||(e.guides={}),void 0!==S&&(e.guides.indentation=!!S),void 0!==y&&(e.guides.highlightActiveIndentation=!!y)}var N=s(7940),D=s(4141),E=s(2334),T=s(7374),I=s(1106),editorConfiguration_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},editorConfiguration_param=function(e,o){return function(s,l){o(s,l,e)}};let A=class EditorConfiguration extends _.JT{constructor(e,o,s,l){super(),this._accessibilityService=l,this._onDidChange=this._register(new f.Q5),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new f.Q5),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new D.LJ,this.isSimpleWidget=e,this._containerObserver=this._register(new L.I(s,o.dimension)),this._rawOptions=deepCloneAndMigrateOptions(o),this._validatedOptions=EditorOptionsUtil.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(10)&&this._containerObserver.startObserving(),this._register(E.C.onDidChangeZoomLevel((()=>this._recomputeOptions()))),this._register(N.n.onDidChangeTabFocus((()=>this._recomputeOptions()))),this._register(this._containerObserver.onDidChange((()=>this._recomputeOptions()))),this._register(x.g.onDidChange((()=>this._recomputeOptions()))),this._register(b.PixelRatio.onDidChange((()=>this._recomputeOptions()))),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized((()=>this._recomputeOptions())))}_recomputeOptions(){const e=this._computeOptions(),o=EditorOptionsUtil.checkEquals(this.options,e);null!==o&&(this.options=e,this._onDidChangeFast.fire(o),this._onDidChange.fire(o))}_computeOptions(){const e=this._readEnvConfiguration(),o=T.E4.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),s=this._readFontInfo(o),l={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:s,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:N.n.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return EditorOptionsUtil.computeOptions(this._validatedOptions,l)}_readEnvConfiguration(){return{extraEditorClassName:getExtraEditorClassName(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:b.isWebKit||b.isFirefox,pixelRatio:b.PixelRatio.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return x.g.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const o=deepCloneAndMigrateOptions(e),s=EditorOptionsUtil.applyUpdate(this._rawOptions,o);s&&(this._validatedOptions=EditorOptionsUtil.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const o=digitCount(e);this._lineNumbersDigitCount!==o&&(this._lineNumbersDigitCount=o,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}};function digitCount(e){let o=0;while(e)e=Math.floor(e/10),o++;return o||1}function getExtraEditorClassName(){let e="";return b.isSafari||b.isWebkitWebView||(e+="no-user-select "),b.isSafari&&(e+="no-minimap-shadow "),y.dz&&(e+="mac "),e}A=editorConfiguration_decorate([editorConfiguration_param(3,I.F)],A);class ValidatedEditorOptions{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,o){this._values[e]=o}}class ComputedEditorOptions{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,o){this._values[e]=o}}class EditorOptionsUtil{static validateOptions(e){const o=new ValidatedEditorOptions;for(const s of D.Bc){const l="_never_"===s.name?void 0:e[s.name];o._write(s.id,s.validate(l))}return o}static computeOptions(e,o){const s=new ComputedEditorOptions;for(const l of D.Bc)s._write(l.id,l.compute(o,s,e._read(l.id)));return s}static _deepEquals(e,o){if("object"!==typeof e||"object"!==typeof o||!e||!o)return e===o;if(Array.isArray(e)||Array.isArray(o))return!(!Array.isArray(e)||!Array.isArray(o))&&w.fS(e,o);if(Object.keys(e).length!==Object.keys(o).length)return!1;for(const s in e)if(!EditorOptionsUtil._deepEquals(e[s],o[s]))return!1;return!0}static checkEquals(e,o){const s=[];let l=!1;for(const d of D.Bc){const u=!EditorOptionsUtil._deepEquals(e._read(d.id),o._read(d.id));s[d.id]=u,u&&(l=!0)}return l?new D.Bb(s):null}static applyUpdate(e,o){let s=!1;for(const l of D.Bc)if(o.hasOwnProperty(l.name)){const d=l.applyUpdate(e[l.name],o[l.name]);e[l.name]=d.newValue,s=s||d.didChange}return s}}function deepCloneAndMigrateOptions(e){const o=S.I8(e);return migrateOptions(o),o}var M=s(1640),R=s(3860),P=s(8626),O=s(553),F=s(3938),B=s(5393),W=s(9994);class ViewEventHandler extends _.JT{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let o=!1;for(let s=0,l=e.length;s<l;s++){const l=e[s];switch(l.type){case 0:this.onCompositionStart(l)&&(o=!0);break;case 1:this.onCompositionEnd(l)&&(o=!0);break;case 2:this.onConfigurationChanged(l)&&(o=!0);break;case 3:this.onCursorStateChanged(l)&&(o=!0);break;case 4:this.onDecorationsChanged(l)&&(o=!0);break;case 5:this.onFlushed(l)&&(o=!0);break;case 6:this.onFocusChanged(l)&&(o=!0);break;case 7:this.onLanguageConfigurationChanged(l)&&(o=!0);break;case 8:this.onLineMappingChanged(l)&&(o=!0);break;case 9:this.onLinesChanged(l)&&(o=!0);break;case 10:this.onLinesDeleted(l)&&(o=!0);break;case 11:this.onLinesInserted(l)&&(o=!0);break;case 12:this.onRevealRangeRequest(l)&&(o=!0);break;case 13:this.onScrollChanged(l)&&(o=!0);break;case 15:this.onTokensChanged(l)&&(o=!0);break;case 14:this.onThemeChanged(l)&&(o=!0);break;case 16:this.onTokensColorsChanged(l)&&(o=!0);break;case 17:this.onZonesChanged(l)&&(o=!0);break;default:console.info("View received unknown event: "),console.info(l)}}o&&(this._shouldRender=!0)}}class ViewPart extends ViewEventHandler{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class PartFingerprints{static write(e,o){e.setAttribute("data-mprt",String(o))}static read(e){const o=e.getAttribute("data-mprt");return null===o?0:parseInt(o,10)}static collect(e,o){const s=[];let l=0;while(e&&e!==document.body){if(e===o)break;e.nodeType===e.ELEMENT_NODE&&(s[l++]=this.read(e)),e=e.parentElement}const d=new Uint8Array(l);for(let u=0;u<l;u++)d[u]=s[l-u-1];return d}}class RestrictedRenderingContext{constructor(e,o){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=o,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const s=this._viewLayout.getCurrentViewport();this.scrollTop=s.top,this.scrollLeft=s.left,this.viewportWidth=s.width,this.viewportHeight=s.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class RenderingContext extends RestrictedRenderingContext{constructor(e,o,s){super(e,o),this._renderingContextBrand=void 0,this._viewLines=s}linesVisibleRangesForRange(e,o){return this._viewLines.linesVisibleRangesForRange(e,o)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class LineVisibleRanges{constructor(e,o,s){this.outsideRenderedLine=e,this.lineNumber=o,this.ranges=s}}class HorizontalRange{constructor(e,o){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(o)}static from(e){const o=new Array(e.length);for(let s=0,l=e.length;s<l;s++){const l=e[s];o[s]=new HorizontalRange(l.left,l.width)}return o}toString(){return`[${this.left},${this.width}]`}}class FloatHorizontalRange{constructor(e,o){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=o}toString(){return`[${this.left},${this.width}]`}static compare(e,o){return e.left-o.left}}class HorizontalPosition{constructor(e,o){this.outsideRenderedLine=e,this.originalLeft=o,this.left=Math.round(this.originalLeft)}}class VisibleRanges{constructor(e,o){this.outsideRenderedLine=e,this.ranges=o}}class RangeUtil{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,o){e.selectNodeContents(o)}static _readClientRects(e,o,s,l,d){const u=this._createRange();try{return u.setStart(e,o),u.setEnd(s,l),u.getClientRects()}catch(g){return null}finally{this._detachRange(u,d)}}static _mergeAdjacentRanges(e){if(1===e.length)return e;e.sort(FloatHorizontalRange.compare);const o=[];let s=0,l=e[0];for(let d=1,u=e.length;d<u;d++){const u=e[d];l.left+l.width+.9>=u.left?l.width=Math.max(l.width,u.left+u.width-l.left):(o[s++]=l,l=u)}return o[s++]=l,o}static _createHorizontalRangesFromClientRects(e,o,s){if(!e||0===e.length)return null;const l=[];for(let d=0,u=e.length;d<u;d++){const u=e[d];l[d]=new FloatHorizontalRange(Math.max(0,(u.left-o)/s),u.width/s)}return this._mergeAdjacentRanges(l)}static readHorizontalRanges(e,o,s,l,d,u,g,p){const m=0,f=e.children.length-1;if(m>f)return null;if(o=Math.min(f,Math.max(m,o)),l=Math.min(f,Math.max(m,l)),o===l&&s===d&&0===s&&!e.children[o].firstChild){const s=e.children[o].getClientRects();return this._createHorizontalRangesFromClientRects(s,u,g)}o!==l&&l>0&&0===d&&(l--,d=1073741824);let _=e.children[o].firstChild,C=e.children[l].firstChild;if(_&&C||(!_&&0===s&&o>0&&(_=e.children[o-1].firstChild,s=1073741824),!C&&0===d&&l>0&&(C=e.children[l-1].firstChild,d=1073741824)),!_||!C)return null;s=Math.min(_.textContent.length,Math.max(0,s)),d=Math.min(C.textContent.length,Math.max(0,d));const b=this._readClientRects(_,s,C,d,p);return this._createHorizontalRangesFromClientRects(b,u,g)}}var V=s(2550),H=s(7736),z=s(2321);const U=function(){return!!y.tY||!(y.IJ||b.isFirefox||b.isSafari)}();let K=!0;class DomReadingContext{constructor(e,o){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=o}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}class ViewLineOptions{constructor(e,o){this.themeType=o;const s=e.options,l=s.get(44);this.renderWhitespace=s.get(88),this.renderControlCharacters=s.get(83),this.spaceWidth=l.spaceWidth,this.middotWidth=l.middotWidth,this.wsmiddotWidth=l.wsmiddotWidth,this.useMonospaceOptimizations=l.isMonospace&&!s.get(29),this.canUseHalfwidthRightwardsArrow=l.canUseHalfwidthRightwardsArrow,this.lineHeight=s.get(59),this.stopRenderingLineAfter=s.get(105),this.fontLigatures=s.get(45)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class ViewLine{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=(0,P.X)(e)}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return(this._options.themeType===z.e.HIGH_CONTRAST||"selection"===this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}renderLine(e,o,s,l){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;const d=s.getViewLineRenderingData(e),u=this._options,g=V.Kp.filter(d.inlineDecorations,e,d.minColumn,d.maxColumn);let p=null;if(u.themeType===z.e.HIGH_CONTRAST||"selection"===this._options.renderWhitespace){const o=s.selections;for(const s of o){if(s.endLineNumber<e||s.startLineNumber>e)continue;const o=s.startLineNumber===e?s.startColumn:d.minColumn,l=s.endLineNumber===e?s.endColumn:d.maxColumn;o<l&&(u.themeType===z.e.HIGH_CONTRAST||"selection"!==this._options.renderWhitespace?g.push(new V.Kp(o,l,"inline-selected-text",0)):(p||(p=[]),p.push(new H.zG(o-1,l-1))))}}const m=new H.IJ(u.useMonospaceOptimizations,u.canUseHalfwidthRightwardsArrow,d.content,d.continuesWithWrappedLine,d.isBasicASCII,d.containsRTL,d.minColumn-1,d.tokens,g,d.tabSize,d.startVisibleColumn,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,u.stopRenderingLineAfter,u.renderWhitespace,u.renderControlCharacters,u.fontLigatures!==D.n0.OFF,p);if(this._renderedViewLine&&this._renderedViewLine.input.equals(m))return!1;l.appendASCIIString('<div style="top:'),l.appendASCIIString(String(o)),l.appendASCIIString("px;height:"),l.appendASCIIString(String(this._options.lineHeight)),l.appendASCIIString('px;" class="'),l.appendASCIIString(ViewLine.CLASS_NAME),l.appendASCIIString('">');const f=(0,H.d1)(m,l);l.appendASCIIString("</div>");let _=null;return K&&U&&d.isBasicASCII&&u.useMonospaceOptimizations&&0===f.containsForeignElements&&d.content.length<300&&m.lineTokens.getCount()<100&&(_=new FastRenderedViewLine(this._renderedViewLine?this._renderedViewLine.domNode:null,m,f.characterMapping)),_||(_=j(this._renderedViewLine?this._renderedViewLine.domNode:null,m,f.characterMapping,f.containsRTL,f.containsForeignElements)),this._renderedViewLine=_,!0}layoutLine(e,o){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(o),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){return!!this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine?this._renderedViewLine.monospaceAssumptionsAreValid():K}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,o,s,l){if(!this._renderedViewLine)return null;o=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,o)),s=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,s));const d=this._renderedViewLine.input.stopRenderingLineAfter;let u=!1;-1!==d&&o>d+1&&s>d+1&&(u=!0),-1!==d&&o>d+1&&(o=d+1),-1!==d&&s>d+1&&(s=d+1);const g=this._renderedViewLine.getVisibleRangesForRange(e,o,s,l);return g&&g.length>0?new VisibleRanges(u,g):null}getColumnOfNodeOffset(e,o,s){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,o,s):1}}ViewLine.CLASS_NAME="view-line";class FastRenderedViewLine{constructor(e,o,s){this.domNode=e,this.input=o,this._characterMapping=s,this._charWidth=o.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return K;const e=this.getWidth(),o=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-o)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),K=!1),K}toSlowRenderedLine(){return j(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,o,s,l){const d=this._getCharPosition(o),u=this._getCharPosition(s);return[new FloatHorizontalRange(d,u-d)]}_getCharPosition(e){const o=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*o}getColumnOfNodeOffset(e,o,s){const l=o.textContent.length;let d=-1;while(o)o=o.previousSibling,d++;return this._characterMapping.getColumn(new H.Nd(d,s),l)}}class RenderedViewLine{constructor(e,o,s,l,d){if(this.domNode=e,this.input=o,this._characterMapping=s,this._isWhitespaceOnly=/^\s*$/.test(o.lineContent),this._containsForeignElements=d,this._cachedWidth=-1,this._pixelOffsetCache=null,!l||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let e=0,o=this._characterMapping.length;e<=o;e++)this._pixelOffsetCache[e]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return-1!==this._cachedWidth}getVisibleRangesForRange(e,o,s,l){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){const d=this._readPixelOffset(this.domNode,e,o,l);if(-1===d)return null;const u=this._readPixelOffset(this.domNode,e,s,l);return-1===u?null:[new FloatHorizontalRange(d,u-d)]}return this._readVisibleRangesForRange(this.domNode,e,o,s,l)}_readVisibleRangesForRange(e,o,s,l,d){if(s===l){const l=this._readPixelOffset(e,o,s,d);return-1===l?null:[new FloatHorizontalRange(l,0)]}return this._readRawVisibleRangesForRange(e,s,l,d)}_readPixelOffset(e,o,s,l){if(0===this._characterMapping.length){if(0===this._containsForeignElements)return 0;if(2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth();const o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(null!==this._pixelOffsetCache){const d=this._pixelOffsetCache[s];if(-1!==d)return d;const u=this._actualReadPixelOffset(e,o,s,l);return this._pixelOffsetCache[s]=u,u}return this._actualReadPixelOffset(e,o,s,l)}_actualReadPixelOffset(e,o,s,l){if(0===this._characterMapping.length){const o=RangeUtil.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,l.clientRectDeltaLeft,l.clientRectScale,l.endNode);return o&&0!==o.length?o[0].left:-1}if(s===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth();const d=this._characterMapping.getDomPosition(s),u=RangeUtil.readHorizontalRanges(this._getReadingTarget(e),d.partIndex,d.charIndex,d.partIndex,d.charIndex,l.clientRectDeltaLeft,l.clientRectScale,l.endNode);if(!u||0===u.length)return-1;const g=u[0].left;if(this.input.isBasicASCII){const e=this._characterMapping.getAbsoluteOffset(s),o=Math.round(this.input.spaceWidth*e);if(Math.abs(o-g)<=1)return o}return g}_readRawVisibleRangesForRange(e,o,s,l){if(1===o&&s===this._characterMapping.length)return[new FloatHorizontalRange(0,this.getWidth())];const d=this._characterMapping.getDomPosition(o),u=this._characterMapping.getDomPosition(s);return RangeUtil.readHorizontalRanges(this._getReadingTarget(e),d.partIndex,d.charIndex,u.partIndex,u.charIndex,l.clientRectDeltaLeft,l.clientRectScale,l.endNode)}getColumnOfNodeOffset(e,o,s){const l=o.textContent.length;let d=-1;while(o)o=o.previousSibling,d++;return this._characterMapping.getColumn(new H.Nd(d,s),l)}}class WebKitRenderedViewLine extends RenderedViewLine{_readVisibleRangesForRange(e,o,s,l,d){const u=super._readVisibleRangesForRange(e,o,s,l,d);if(!u||0===u.length||s===l||1===s&&l===this._characterMapping.length)return u;if(!this.input.containsRTL){const s=this._readPixelOffset(e,o,l,d);if(-1!==s){const e=u[u.length-1];e.left<s&&(e.width=s-e.left)}}return u}}const j=function(){return b.isWebKit?createWebKitRenderedLine:createNormalRenderedLine}();function createWebKitRenderedLine(e,o,s,l,d){return new WebKitRenderedViewLine(e,o,s,l,d)}function createNormalRenderedLine(e,o,s,l,d){return new RenderedViewLine(e,o,s,l,d)}var G,q=s(187),Q=s(4314),Z=s(7988),Y=s(7128);class UnknownHitTestResult{constructor(e=null){this.hitTarget=e,this.type=0}}class ContentHitTestResult{constructor(e,o,s){this.position=e,this.spanNode=o,this.injectedText=s,this.type=1}}(function(e){function createFromDOMInfo(e,o,s){const l=e.getPositionFromDOMInfo(o,s);return l?new ContentHitTestResult(l,o,null):new UnknownHitTestResult(o)}e.createFromDOMInfo=createFromDOMInfo})(G||(G={}));class PointerHandlerLastRenderData{constructor(e,o){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=o}}class MouseTarget{static _deduceRage(e,o=null){return!o&&e?new Q.e(e.lineNumber,e.column,e.lineNumber,e.column):null!==o&&void 0!==o?o:null}static createUnknown(e,o,s){return{type:0,element:e,mouseColumn:o,position:s,range:this._deduceRage(s)}}static createTextarea(e,o){return{type:1,element:e,mouseColumn:o,position:null,range:null}}static createMargin(e,o,s,l,d,u){return{type:e,element:o,mouseColumn:s,position:l,range:d,detail:u}}static createViewZone(e,o,s,l,d){return{type:e,element:o,mouseColumn:s,position:l,range:this._deduceRage(l),detail:d}}static createContentText(e,o,s,l,d){return{type:6,element:e,mouseColumn:o,position:s,range:this._deduceRage(s,l),detail:d}}static createContentEmpty(e,o,s,l){return{type:7,element:e,mouseColumn:o,position:s,range:this._deduceRage(s),detail:l}}static createContentWidget(e,o,s){return{type:9,element:e,mouseColumn:o,position:null,range:null,detail:s}}static createScrollbar(e,o,s){return{type:11,element:e,mouseColumn:o,position:s,range:this._deduceRage(s)}}static createOverlayWidget(e,o,s){return{type:12,element:e,mouseColumn:o,position:null,range:null,detail:s}}static createOutsideEditor(e,o){return{type:13,element:null,mouseColumn:e,position:o,range:this._deduceRage(o)}}static _typeToString(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class ElementPath{static isTextArea(e){return 2===e.length&&3===e[0]&&6===e[1]}static isChildOfViewLines(e){return e.length>=4&&3===e[0]&&7===e[3]}static isStrictChildOfViewLines(e){return e.length>4&&3===e[0]&&7===e[3]}static isChildOfScrollableElement(e){return e.length>=2&&3===e[0]&&5===e[1]}static isChildOfMinimap(e){return e.length>=2&&3===e[0]&&8===e[1]}static isChildOfContentWidgets(e){return e.length>=4&&3===e[0]&&1===e[3]}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&2===e[0]}static isChildOfOverlayWidgets(e){return e.length>=2&&3===e[0]&&4===e[1]}}class HitTestContext{constructor(e,o,s){this.viewModel=e.viewModel;const l=e.configuration.options;this.layoutInfo=l.get(131),this.viewDomNode=o.viewDomNode,this.lineHeight=l.get(59),this.stickyTabStops=l.get(104),this.typicalHalfwidthCharacterWidth=l.get(44).typicalHalfwidthCharacterWidth,this.lastRenderData=s,this._context=e,this._viewHelper=o}getZoneAtCoord(e){return HitTestContext.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,o){const s=e.viewLayout.getWhitespaceAtVerticalOffset(o);if(s){const l=s.verticalOffset+s.height/2,d=e.viewModel.getLineCount();let u,g=null,p=null;return s.afterLineNumber!==d&&(p=new q.L(s.afterLineNumber+1,1)),s.afterLineNumber>0&&(g=new q.L(s.afterLineNumber,e.viewModel.getLineMaxColumn(s.afterLineNumber))),u=null===p?g:null===g?p:o<l?g:p,{viewZoneId:s.id,afterLineNumber:s.afterLineNumber,positionBefore:g,positionAfter:p,position:u}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const e=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(e);return{range:new Q.e(e,o,e,o),isAfterLines:!0}}const o=this._context.viewLayout.getLineNumberAtVerticalOffset(e),s=this._context.viewModel.getLineMaxColumn(o);return{range:new Q.e(o,1,o,s),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,o){return HitTestContext._findAttribute(e,o,this._viewHelper.viewDomNode)}static _findAttribute(e,o,s){while(e&&e!==document.body){if(e.hasAttribute&&e.hasAttribute(o))return e.getAttribute(o);if(e===s)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,o){return this._viewHelper.visibleRangeForPosition(e,o)}getPositionFromDOMInfo(e,o){return this._viewHelper.getPositionFromDOMInfo(e,o)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class BareHitTestRequest{constructor(e,o,s,l){this.editorPos=o,this.pos=s,this.relativePos=l,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,MouseTargetFactory._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class HitTestRequest extends BareHitTestRequest{constructor(e,o,s,l,d){super(e,o,s,l),this._ctx=e,d?(this.target=d,this.targetPath=PartFingerprints.collect(d,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\n\ttarget: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Z.i.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return MouseTarget.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return MouseTarget.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,o,s,l){return MouseTarget.createMargin(e,this.target,this._getMouseColumn(o),o,s,l)}fulfillViewZone(e,o,s){return MouseTarget.createViewZone(e,this.target,this._getMouseColumn(o),o,s)}fulfillContentText(e,o,s){return MouseTarget.createContentText(this.target,this._getMouseColumn(e),e,o,s)}fulfillContentEmpty(e,o){return MouseTarget.createContentEmpty(this.target,this._getMouseColumn(e),e,o)}fulfillContentWidget(e){return MouseTarget.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return MouseTarget.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return MouseTarget.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new HitTestRequest(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}const J={isAfterLines:!0};function createEmptyContentDataInLines(e){return{isAfterLines:!1,horizontalDistanceToText:e}}class MouseTargetFactory{constructor(e,o){this._context=e,this._viewHelper=o}mouseTargetIsWidget(e){const o=e.target,s=PartFingerprints.collect(o,this._viewHelper.viewDomNode);return!(!ElementPath.isChildOfContentWidgets(s)&&!ElementPath.isChildOfOverflowingContentWidgets(s))||!!ElementPath.isChildOfOverlayWidgets(s)}createMouseTarget(e,o,s,l,d){const u=new HitTestContext(this._context,this._viewHelper,e),g=new HitTestRequest(u,o,s,l,d);try{const e=MouseTargetFactory._createMouseTarget(u,g,!1);return e}catch(p){return g.fulfillUnknown()}}static _createMouseTarget(e,o,s){if(null===o.target){if(s)return o.fulfillUnknown();const l=MouseTargetFactory._doHitTest(e,o);return 1===l.type?MouseTargetFactory.createMouseTargetFromHitTestPosition(e,o,l.spanNode,l.position,l.injectedText):this._createMouseTarget(e,o.withTarget(l.hitTarget),!0)}const l=o;let d=null;return d=d||MouseTargetFactory._hitTestContentWidget(e,l),d=d||MouseTargetFactory._hitTestOverlayWidget(e,l),d=d||MouseTargetFactory._hitTestMinimap(e,l),d=d||MouseTargetFactory._hitTestScrollbarSlider(e,l),d=d||MouseTargetFactory._hitTestViewZone(e,l),d=d||MouseTargetFactory._hitTestMargin(e,l),d=d||MouseTargetFactory._hitTestViewCursor(e,l),d=d||MouseTargetFactory._hitTestTextArea(e,l),d=d||MouseTargetFactory._hitTestViewLines(e,l,s),d=d||MouseTargetFactory._hitTestScrollbar(e,l),d||o.fulfillUnknown()}static _hitTestContentWidget(e,o){if(ElementPath.isChildOfContentWidgets(o.targetPath)||ElementPath.isChildOfOverflowingContentWidgets(o.targetPath)){const s=e.findAttribute(o.target,"widgetId");return s?o.fulfillContentWidget(s):o.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,o){if(ElementPath.isChildOfOverlayWidgets(o.targetPath)){const s=e.findAttribute(o.target,"widgetId");return s?o.fulfillOverlayWidget(s):o.fulfillUnknown()}return null}static _hitTestViewCursor(e,o){if(o.target){const s=e.lastRenderData.lastViewCursorsRenderData;for(const e of s)if(o.target===e.domNode)return o.fulfillContentText(e.position,null,{mightBeForeignElement:!1,injectedText:null})}if(o.isInContentArea){const s=e.lastRenderData.lastViewCursorsRenderData,l=o.mouseContentHorizontalOffset,d=o.mouseVerticalOffset;for(const u of s){if(l<u.contentLeft)continue;if(l>u.contentLeft+u.width)continue;const s=e.getVerticalOffsetForLineNumber(u.position.lineNumber);if(s<=d&&d<=s+u.height)return o.fulfillContentText(u.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,o){const s=e.getZoneAtCoord(o.mouseVerticalOffset);if(s){const e=o.isInContentArea?8:5;return o.fulfillViewZone(e,s.position,s)}return null}static _hitTestTextArea(e,o){return ElementPath.isTextArea(o.targetPath)?e.lastRenderData.lastTextareaPosition?o.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):o.fulfillTextarea():null}static _hitTestMargin(e,o){if(o.isInMarginArea){const s=e.getFullLineRangeAtCoord(o.mouseVerticalOffset),l=s.range.getStartPosition();let d=Math.abs(o.relativePos.x);const u={isAfterLines:s.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:d};return d-=e.layoutInfo.glyphMarginLeft,d<=e.layoutInfo.glyphMarginWidth?o.fulfillMargin(2,l,s.range,u):(d-=e.layoutInfo.glyphMarginWidth,d<=e.layoutInfo.lineNumbersWidth?o.fulfillMargin(3,l,s.range,u):(d-=e.layoutInfo.lineNumbersWidth,o.fulfillMargin(4,l,s.range,u)))}return null}static _hitTestViewLines(e,o,s){if(!ElementPath.isChildOfViewLines(o.targetPath))return null;if(e.isInTopPadding(o.mouseVerticalOffset))return o.fulfillContentEmpty(new q.L(1,1),J);if(e.isAfterLines(o.mouseVerticalOffset)||e.isInBottomPadding(o.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),l=e.viewModel.getLineMaxColumn(s);return o.fulfillContentEmpty(new q.L(s,l),J)}if(s){if(ElementPath.isStrictChildOfViewLines(o.targetPath)){const s=e.getLineNumberAtVerticalOffset(o.mouseVerticalOffset);if(0===e.viewModel.getLineLength(s)){const l=e.getLineWidth(s),d=createEmptyContentDataInLines(o.mouseContentHorizontalOffset-l);return o.fulfillContentEmpty(new q.L(s,1),d)}const l=e.getLineWidth(s);if(o.mouseContentHorizontalOffset>=l){const d=createEmptyContentDataInLines(o.mouseContentHorizontalOffset-l),u=new q.L(s,e.viewModel.getLineMaxColumn(s));return o.fulfillContentEmpty(u,d)}}return o.fulfillUnknown()}const l=MouseTargetFactory._doHitTest(e,o);return 1===l.type?MouseTargetFactory.createMouseTargetFromHitTestPosition(e,o,l.spanNode,l.position,l.injectedText):this._createMouseTarget(e,o.withTarget(l.hitTarget),!0)}static _hitTestMinimap(e,o){if(ElementPath.isChildOfMinimap(o.targetPath)){const s=e.getLineNumberAtVerticalOffset(o.mouseVerticalOffset),l=e.viewModel.getLineMaxColumn(s);return o.fulfillScrollbar(new q.L(s,l))}return null}static _hitTestScrollbarSlider(e,o){if(ElementPath.isChildOfScrollableElement(o.targetPath)&&o.target&&1===o.target.nodeType){const s=o.target.className;if(s&&/\b(slider|scrollbar)\b/.test(s)){const s=e.getLineNumberAtVerticalOffset(o.mouseVerticalOffset),l=e.viewModel.getLineMaxColumn(s);return o.fulfillScrollbar(new q.L(s,l))}}return null}static _hitTestScrollbar(e,o){if(ElementPath.isChildOfScrollableElement(o.targetPath)){const s=e.getLineNumberAtVerticalOffset(o.mouseVerticalOffset),l=e.viewModel.getLineMaxColumn(s);return o.fulfillScrollbar(new q.L(s,l))}return null}getMouseColumn(e){const o=this._context.configuration.options,s=o.get(131),l=this._context.viewLayout.getCurrentScrollLeft()+e.x-s.contentLeft;return MouseTargetFactory._getMouseColumn(l,o.get(44).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,o){if(e<0)return 1;const s=Math.round(e/o);return s+1}static createMouseTargetFromHitTestPosition(e,o,s,l,d){const u=l.lineNumber,g=l.column,p=e.getLineWidth(u);if(o.mouseContentHorizontalOffset>p){const e=createEmptyContentDataInLines(o.mouseContentHorizontalOffset-p);return o.fulfillContentEmpty(l,e)}const m=e.visibleRangeForPosition(u,g);if(!m)return o.fulfillUnknown(l);const f=m.left;if(o.mouseContentHorizontalOffset===f)return o.fulfillContentText(l,null,{mightBeForeignElement:!!d,injectedText:d});const _=[];if(_.push({offset:m.left,column:g}),g>1){const o=e.visibleRangeForPosition(u,g-1);o&&_.push({offset:o.left,column:g-1})}const C=e.viewModel.getLineMaxColumn(u);if(g<C){const o=e.visibleRangeForPosition(u,g+1);o&&_.push({offset:o.left,column:g+1})}_.sort(((e,o)=>e.offset-o.offset));const b=o.pos.toClientCoordinates(),w=s.getBoundingClientRect(),S=w.left<=b.clientX&&b.clientX<=w.right;for(let y=1;y<_.length;y++){const e=_[y-1],s=_[y];if(e.offset<=o.mouseContentHorizontalOffset&&o.mouseContentHorizontalOffset<=s.offset){const g=new Q.e(u,e.column,u,s.column);return o.fulfillContentText(l,g,{mightBeForeignElement:!S||!!d,injectedText:d})}}return o.fulfillContentText(l,null,{mightBeForeignElement:!S||!!d,injectedText:d})}static _doHitTestWithCaretRangeFromPoint(e,o){const s=e.getLineNumberAtVerticalOffset(o.mouseVerticalOffset),l=e.getVerticalOffsetForLineNumber(s),d=l+Math.floor(e.lineHeight/2);let u=o.pos.y+(d-o.mouseVerticalOffset);u<=o.editorPos.y&&(u=o.editorPos.y+1),u>=o.editorPos.y+o.editorPos.height&&(u=o.editorPos.y+o.editorPos.height-1);const g=new W.YN(o.pos.x,u),p=this._actualDoHitTestWithCaretRangeFromPoint(e,g.toClientCoordinates());return 1===p.type?p:this._actualDoHitTestWithCaretRangeFromPoint(e,o.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,o){const s=p.Ay(e.viewDomNode);let l;if(l=s?"undefined"===typeof s.caretRangeFromPoint?shadowCaretRangeFromPoint(s,o.clientX,o.clientY):s.caretRangeFromPoint(o.clientX,o.clientY):document.caretRangeFromPoint(o.clientX,o.clientY),!l||!l.startContainer)return new UnknownHitTestResult;const d=l.startContainer;if(d.nodeType===d.TEXT_NODE){const o=d.parentNode,s=o?o.parentNode:null,u=s?s.parentNode:null,g=u&&u.nodeType===u.ELEMENT_NODE?u.className:null;return g===ViewLine.CLASS_NAME?G.createFromDOMInfo(e,o,l.startOffset):new UnknownHitTestResult(d.parentNode)}if(d.nodeType===d.ELEMENT_NODE){const o=d.parentNode,s=o?o.parentNode:null,l=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;return l===ViewLine.CLASS_NAME?G.createFromDOMInfo(e,d,d.textContent.length):new UnknownHitTestResult(d)}return new UnknownHitTestResult}static _doHitTestWithCaretPositionFromPoint(e,o){const s=document.caretPositionFromPoint(o.clientX,o.clientY);if(s.offsetNode.nodeType===s.offsetNode.TEXT_NODE){const o=s.offsetNode.parentNode,l=o?o.parentNode:null,d=l?l.parentNode:null,u=d&&d.nodeType===d.ELEMENT_NODE?d.className:null;return u===ViewLine.CLASS_NAME?G.createFromDOMInfo(e,s.offsetNode.parentNode,s.offset):new UnknownHitTestResult(s.offsetNode.parentNode)}if(s.offsetNode.nodeType===s.offsetNode.ELEMENT_NODE){const o=s.offsetNode.parentNode,l=o&&o.nodeType===o.ELEMENT_NODE?o.className:null,d=o?o.parentNode:null,u=d&&d.nodeType===d.ELEMENT_NODE?d.className:null;if(l===ViewLine.CLASS_NAME){const o=s.offsetNode.childNodes[Math.min(s.offset,s.offsetNode.childNodes.length-1)];if(o)return G.createFromDOMInfo(e,o,0)}else if(u===ViewLine.CLASS_NAME)return G.createFromDOMInfo(e,s.offsetNode,0)}return new UnknownHitTestResult(s.offsetNode)}static _snapToSoftTabBoundary(e,o){const s=o.getLineContent(e.lineNumber),{tabSize:l}=o.model.getOptions(),d=Y.l.atomicPosition(s,e.column-1,l,2);return-1!==d?new q.L(e.lineNumber,d+1):e}static _doHitTest(e,o){let s=new UnknownHitTestResult;if("function"===typeof document.caretRangeFromPoint?s=this._doHitTestWithCaretRangeFromPoint(e,o):document.caretPositionFromPoint&&(s=this._doHitTestWithCaretPositionFromPoint(e,o.pos.toClientCoordinates())),1===s.type){const o=e.viewModel.getInjectedTextAt(s.position),l=e.viewModel.normalizePosition(s.position,2);!o&&l.equals(s.position)||(s=new ContentHitTestResult(l,s.spanNode,o))}return 1===s.type&&e.stickyTabStops&&(s=new ContentHitTestResult(this._snapToSoftTabBoundary(s.position,e.viewModel),s.spanNode,s.injectedText)),s}}function shadowCaretRangeFromPoint(e,o,s){const l=document.createRange();let d=e.elementFromPoint(o,s);if(null!==d){while(d&&d.firstChild&&d.firstChild.nodeType!==d.firstChild.TEXT_NODE&&d.lastChild&&d.lastChild.firstChild)d=d.lastChild;const e=d.getBoundingClientRect(),s=window.getComputedStyle(d,null).getPropertyValue("font"),u=d.innerText;let g,p=e.left,m=0;if(o>e.left+e.width)m=u.length;else{const e=CharWidthReader.getInstance();for(let l=0;l<u.length+1;l++){if(g=e.getCharWidth(u.charAt(l),s)/2,p+=g,o<p){m=l;break}p+=g}}l.setStart(d.firstChild,m),l.setEnd(d.firstChild,m)}return l}class CharWidthReader{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return CharWidthReader._INSTANCE||(CharWidthReader._INSTANCE=new CharWidthReader),CharWidthReader._INSTANCE}getCharWidth(e,o){const s=e+o;if(this._cache[s])return this._cache[s];const l=this._canvas.getContext("2d");l.font=o;const d=l.measureText(e),u=d.width;return this._cache[s]=u,u}}function createMouseMoveEventMerger(e){return function(o,s){let l=!1;return e&&(l=e.mouseTargetIsWidget(s)),l||s.preventDefault(),s}}CharWidthReader._INSTANCE=null;class MouseHandler extends ViewEventHandler{constructor(e,o,s){super(),this._context=e,this.viewController=o,this.viewHelper=s,this.mouseTargetFactory=new MouseTargetFactory(this._context,s),this._mouseDownOperation=this._register(new MouseDownOperation(this._context,this.viewController,this.viewHelper,((e,o)=>this._createMouseTarget(e,o)),(e=>this._getMouseColumn(e)))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(131).height;const l=new W.N5(this.viewHelper.viewDomNode);this._register(l.onContextMenu(this.viewHelper.viewDomNode,(e=>this._onContextMenu(e,!0)))),this._register(l.onMouseMoveThrottled(this.viewHelper.viewDomNode,(e=>this._onMouseMove(e)),createMouseMoveEventMerger(this.mouseTargetFactory),MouseHandler.MOUSE_MOVE_MINIMUM_TIME)),this._register(l.onMouseUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(l.onMouseLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e)))),this._register(l.onMouseDown(this.viewHelper.viewDomNode,(e=>this._onMouseDown(e))));const onMouseWheel=e=>{if(this.viewController.emitMouseWheel(e),!this._context.configuration.options.get(68))return;const o=new F.q(e),s=y.dz?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey;if(s){const e=E.C.getZoomLevel(),s=o.deltaY>0?1:-1;E.C.setZoomLevel(e+s),o.preventDefault(),o.stopPropagation()}};this._register(p.nm(this.viewHelper.viewDomNode,p.tw.MOUSE_WHEEL,onMouseWheel,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(131)){const e=this._context.configuration.options.get(131).height;this._height!==e&&(this._height=e,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,o){const s=new W.rU(e,o),l=s.toPageCoordinates(),d=(0,W.kG)(this.viewHelper.viewDomNode);if(l.y<d.y||l.y>d.y+d.height||l.x<d.x||l.x>d.x+d.width)return null;const u=(0,W.Pp)(this.viewHelper.viewDomNode,d,l);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),d,l,u,null)}_createMouseTarget(e,o){let s=e.target;if(!this.viewHelper.viewDomNode.contains(s)){const o=p.Ay(this.viewHelper.viewDomNode);o&&(s=o.elementsFromPoint(e.posx,e.posy).find((e=>this.viewHelper.viewDomNode.contains(e))))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,o?s:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,o){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,o)})}_onMouseMove(e){if(this._mouseDownOperation.isActive())return;const o=e.timestamp;o<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const o=this._createMouseTarget(e,!0),s=6===o.type||7===o.type,l=2===o.type||3===o.type||4===o.type,d=3===o.type,u=this._context.configuration.options.get(98),g=8===o.type||5===o.type,p=9===o.type;let m=e.leftButton||e.middleButton;y.dz&&e.leftButton&&e.ctrlKey&&(m=!1);const focus=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(m&&(s||d&&u))focus(),this._mouseDownOperation.start(o.type,e);else if(l)e.preventDefault();else if(g){const s=o.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(s.viewZoneId)&&(focus(),this._mouseDownOperation.start(o.type,e),e.preventDefault())}else p&&this.viewHelper.shouldSuppressMouseDownOnWidget(o.detail)&&(focus(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:o})}}MouseHandler.MOUSE_MOVE_MINIMUM_TIME=100;class MouseDownOperation extends _.JT{constructor(e,o,s,l,d){super(),this._context=e,this._viewController=o,this._viewHelper=s,this._createMouseTarget=l,this._getMouseColumn=d,this._mouseMoveMonitor=this._register(new W.iB(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new B._F),this._mouseState=new MouseDownState,this._currentSelection=new R.Y(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const o=this._findMousePosition(e,!0);o&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:o}):this._dispatchMouse(o,!0))}start(e,o){this._lastMouseEvent=o,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(o),this._mouseState.setModifiers(o);const s=this._findMousePosition(o,!0);if(!s||!s.position)return;this._mouseState.trySetCount(o.detail,s.position),o.detail=this._mouseState.count;const l=this._context.configuration.options;if(!l.get(81)&&l.get(31)&&!l.get(18)&&!this._mouseState.altKey&&o.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===s.type&&s.position&&this._currentSelection.containsPosition(s.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(o.target,o.buttons,createMouseMoveEventMerger(null),(e=>this._onMouseDownThenMove(e)),(e=>{const o=this._findMousePosition(this._lastMouseEvent,!0);e&&e instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:o?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,o.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(o.target,o.buttons,createMouseMoveEventMerger(null),(e=>this._onMouseDownThenMove(e)),(()=>this._stop())))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet((()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))}),10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const o=e.editorPos,s=this._context.viewModel,l=this._context.viewLayout,d=this._getMouseColumn(e);if(e.posy<o.y){const s=Math.max(l.getCurrentScrollTop()-(o.y-e.posy),0),u=HitTestContext.getZoneAtCoord(this._context,s);if(u){const e=this._helpPositionJumpOverViewZone(u);if(e)return MouseTarget.createOutsideEditor(d,e)}const g=l.getLineNumberAtVerticalOffset(s);return MouseTarget.createOutsideEditor(d,new q.L(g,1))}if(e.posy>o.y+o.height){const o=l.getCurrentScrollTop()+e.relativePos.y,u=HitTestContext.getZoneAtCoord(this._context,o);if(u){const e=this._helpPositionJumpOverViewZone(u);if(e)return MouseTarget.createOutsideEditor(d,e)}const g=l.getLineNumberAtVerticalOffset(o);return MouseTarget.createOutsideEditor(d,new q.L(g,s.getLineMaxColumn(g)))}const u=l.getLineNumberAtVerticalOffset(l.getCurrentScrollTop()+e.relativePos.y);return e.posx<o.x?MouseTarget.createOutsideEditor(d,new q.L(u,1)):e.posx>o.x+o.width?MouseTarget.createOutsideEditor(d,new q.L(u,s.getLineMaxColumn(u))):null}_findMousePosition(e,o){const s=this._getPositionOutsideEditor(e);if(s)return s;const l=this._createMouseTarget(e,o),d=l.position;if(!d)return null;if(8===l.type||5===l.type){const e=this._helpPositionJumpOverViewZone(l.detail);if(e)return MouseTarget.createViewZone(l.type,l.element,l.mouseColumn,e,l.detail)}return l}_helpPositionJumpOverViewZone(e){const o=new q.L(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),s=e.positionBefore,l=e.positionAfter;return s&&l?s.isBefore(o)?s:l:null}_dispatchMouse(e,o){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:o,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:6===e.type&&null!==e.detail.injectedText})}}class MouseDownState{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,o){const s=(new Date).getTime();s-this._lastSetMouseDownCountTime>MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=s,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(o)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=o,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var X=s(161),ee=s(5715);class PointerEventHandler extends MouseHandler{constructor(e,o,s){super(e,o,s),this._register(O.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(p.nm(this.viewHelper.linesContentDomNode,O.t.Tap,(e=>this.onTap(e)))),this._register(p.nm(this.viewHelper.linesContentDomNode,O.t.Change,(e=>this.onChange(e)))),this._register(p.nm(this.viewHelper.linesContentDomNode,O.t.Contextmenu,(e=>this._onContextMenu(new W.gy(e,this.viewHelper.viewDomNode),!1)))),this._lastPointerType="mouse",this._register(p.nm(this.viewHelper.linesContentDomNode,"pointerdown",(e=>{const o=e.pointerType;this._lastPointerType="mouse"!==o?"touch"===o?"touch":"pen":"mouse"})));const l=new W.tC(this.viewHelper.viewDomNode);this._register(l.onPointerMoveThrottled(this.viewHelper.viewDomNode,(e=>this._onMouseMove(e)),createMouseMoveEventMerger(this.mouseTargetFactory),MouseHandler.MOUSE_MOVE_MINIMUM_TIME)),this._register(l.onPointerUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(l.onPointerLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e)))),this._register(l.onPointerDown(this.viewHelper.viewDomNode,(e=>this._onMouseDown(e))))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const o=this._createMouseTarget(new W.gy(e,this.viewHelper.viewDomNode),!1);o.position&&this.viewController.dispatchMouse({position:o.position,mouseColumn:o.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===o.type&&null!==o.detail.injectedText})}onChange(e){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){"touch"!==e.browserEvent.pointerType&&super._onMouseDown(e)}}class TouchHandler extends MouseHandler{constructor(e,o,s){super(e,o,s),this._register(O.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(p.nm(this.viewHelper.linesContentDomNode,O.t.Tap,(e=>this.onTap(e)))),this._register(p.nm(this.viewHelper.linesContentDomNode,O.t.Change,(e=>this.onChange(e)))),this._register(p.nm(this.viewHelper.linesContentDomNode,O.t.Contextmenu,(e=>this._onContextMenu(new W.gy(e,this.viewHelper.viewDomNode),!1))))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const o=this._createMouseTarget(new W.gy(e,this.viewHelper.viewDomNode),!1);if(o.position){const e=document.createEvent("CustomEvent");e.initEvent(ee.pd.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(e),this.viewController.moveTo(o.position)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class PointerHandler extends _.JT{constructor(e,o,s){super(),y.gn&&X.D.pointerEvents?this.handler=this._register(new PointerEventHandler(e,o,s)):window.TouchEvent?this.handler=this._register(new TouchHandler(e,o,s)):this.handler=this._register(new MouseHandler(e,o,s))}getTargetAtClientPoint(e,o){return this.handler.getTargetAtClientPoint(e,o)}}var te=s(2677),ie=s(2136),ne=s(5887);class DynamicViewOverlay extends ViewEventHandler{}var oe=s(8625),se=s(7781);class LineNumbersOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new q.L(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(59);const o=e.get(60);this._renderLineNumbers=o.renderType,this._renderCustomLineNumbers=o.renderFn,this._renderFinalNewline=e.get(84);const s=e.get(131);this._lineNumbersLeft=s.lineNumbersLeft,this._lineNumbersWidth=s.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const o=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(o);let s=!1;return this._activeLineNumber!==o.lineNumber&&(this._activeLineNumber=o.lineNumber,s=!0),2!==this._renderLineNumbers&&3!==this._renderLineNumbers||(s=!0),s}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const o=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q.L(e,1));if(1!==o.column)return"";const s=o.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(s);if(2===this._renderLineNumbers){const e=Math.abs(this._lastCursorModelPosition.lineNumber-s);return 0===e?'<span class="relative-current-line-number">'+s+"</span>":String(e)}return 3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===s||s%10===0?String(s):"":String(s)}prepareRender(e){if(0===this._renderLineNumbers)return void(this._renderResult=null);const o=y.IJ?this._lineHeight%2===0?" lh-even":" lh-odd":"",s=e.visibleRange.startLineNumber,l=e.visibleRange.endLineNumber,d='<div class="'+LineNumbersOverlay.CLASS_NAME+o+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',u=this._context.viewModel.getLineCount(),g=[];for(let p=s;p<=l;p++){const e=p-s;if(!this._renderFinalNewline&&p===u&&0===this._context.viewModel.getLineLength(p)){g[e]="";continue}const l=this._getLineRenderLineNumber(p);l?p===this._activeLineNumber?g[e]='<div class="active-line-number '+LineNumbersOverlay.CLASS_NAME+o+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+l+"</div>":g[e]=d+l+"</div>":g[e]=""}this._renderResult=g}render(e,o){if(!this._renderResult)return"";const s=o-e;return s<0||s>=this._renderResult.length?"":this._renderResult[s]}}LineNumbersOverlay.CLASS_NAME="line-numbers",(0,se.Ic)(((e,o)=>{const s=e.getColor(oe.hw);s&&o.addRule(`.monaco-editor .line-numbers { color: ${s}; }`);const l=e.getColor(oe.DD);l&&o.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${l}; }`)}));class Margin extends ViewPart{constructor(e){super(e);const o=this._context.configuration.options,s=o.get(131);this._canUseLayerHinting=!o.get(28),this._contentLeft=s.contentLeft,this._glyphMarginLeft=s.glyphMarginLeft,this._glyphMarginWidth=s.glyphMarginWidth,this._domNode=(0,P.X)(document.createElement("div")),this._domNode.setClassName(Margin.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=(0,P.X)(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Margin.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(131);return this._canUseLayerHinting=!o.get(28),this._contentLeft=s.contentLeft,this._glyphMarginLeft=s.glyphMarginLeft,this._glyphMarginWidth=s.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const o=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-o);const s=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(s),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(s)}}Margin.CLASS_NAME="glyph-margin",Margin.OUTER_CLASS_NAME="margin";var re=s(4929),ae=s(6542),le=s(3155),ce=s(1264);class VisibleTextAreaData{constructor(e,o,s,l,d){this._context=e,this.modelLineNumber=o,this.distanceToModelLineStart=s,this.widthOfHiddenLineTextBefore=l,this.distanceToModelLineEnd=d,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const o=new q.L(this.modelLineNumber,this.distanceToModelLineStart+1),s=new q.L(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(this._previousPresentation=e||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const de=b.isFirefox;class TextAreaHandler extends ViewPart{constructor(e,o,s){super(e),this._primaryCursorPosition=new q.L(1,1),this._primaryCursorVisibleRange=null,this._viewController=o,this._visibleRangeProvider=s,this._scrollLeft=0,this._scrollTop=0;const l=this._context.configuration.options,d=l.get(131);this._setAccessibilityOptions(l),this._contentLeft=d.contentLeft,this._contentWidth=d.contentWidth,this._contentHeight=d.height,this._fontInfo=l.get(44),this._lineHeight=l.get(59),this._emptySelectionClipboard=l.get(32),this._copyWithSyntaxHighlighting=l.get(21),this._visibleTextArea=null,this._selections=[new R.Y(1,1,1,1)],this._modelSelections=[new R.Y(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,P.X)(document.createElement("textarea")),PartFingerprints.write(this.textArea,6),this.textArea.setClassName(`inputarea ${ae.S}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(l)),this.textArea.setAttribute("tabindex",String(l.get(112))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",g.N("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),l.get(30)&&l.get(81)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=(0,P.X)(document.createElement("div")),this.textAreaCover.setPosition("absolute");const u={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:e=>this._context.viewModel.getLineMaxColumn(e),getValueInRange:(e,o)=>this._context.viewModel.getValueInRange(e,o)},p={getDataToCopy:()=>{const e=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,y.ED),o=this._context.viewModel.model.getEOL(),s=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),l=Array.isArray(e)?e:null,d=Array.isArray(e)?e.join(o):e;let u,g=null;if(ee.RA.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&d.length<65536){const e=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);e&&(u=e.html,g=e.mode)}return{isFromEmptySelection:s,multicursorText:l,text:d,html:u,mode:g}},getScreenReaderContent:e=>{if(1===this._accessibilitySupport){if(y.dz){const e=this._selections[0];if(e.isEmpty()){const o=e.getStartPosition();let s=this._getWordBeforePosition(o);if(0===s.length&&(s=this._getCharacterBeforePosition(o)),s.length>0)return new ne.un(s,s.length,s.length,o,o)}}return ne.un.EMPTY}if(b.isAndroid){const e=this._selections[0];if(e.isEmpty()){const o=e.getStartPosition(),[s,l]=this._getAndroidWordAtPosition(o);if(s.length>0)return new ne.un(s,l,l,o,o)}return ne.un.EMPTY}return ne.ee.fromEditorSelection(e,u,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(e,o,s)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(e,o,s)},m=this._register(new ee.Tj(this.textArea.domNode));this._textAreaInput=this._register(new ee.Fz(p,m,y.OS,b)),this._register(this._textAreaInput.onKeyDown((e=>{this._viewController.emitKeyDown(e)}))),this._register(this._textAreaInput.onKeyUp((e=>{this._viewController.emitKeyUp(e)}))),this._register(this._textAreaInput.onPaste((e=>{let o=!1,s=null,l=null;e.metadata&&(o=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,s="undefined"!==typeof e.metadata.multicursorText?e.metadata.multicursorText:null,l=e.metadata.mode),this._viewController.paste(e.text,o,s,l)}))),this._register(this._textAreaInput.onCut((()=>{this._viewController.cut()}))),this._register(this._textAreaInput.onType((e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?(ne.al&&console.log(` => compositionType: <<${e.text}>>, ${e.replacePrevCharCnt}, ${e.replaceNextCharCnt}, ${e.positionDelta}`),this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta)):(ne.al&&console.log(` => type: <<${e.text}>>`),this._viewController.type(e.text))}))),this._register(this._textAreaInput.onSelectionChangeRequest((e=>{this._viewController.setSelection(e)}))),this._register(this._textAreaInput.onCompositionStart((e=>{const o=this.textArea.domNode,s=this._modelSelections[0],{distanceToModelLineStart:l,widthOfHiddenTextBefore:d}=(()=>{const e=o.value.substring(0,Math.min(o.selectionStart,o.selectionEnd)),l=e.lastIndexOf("\n"),d=e.substring(l+1),u=d.lastIndexOf("\t"),g=d.length-u-1,p=s.getStartPosition(),m=Math.min(p.column-1,g),f=p.column-1-m,_=d.substring(0,d.length-m),C=measureText(_,this._fontInfo);return{distanceToModelLineStart:f,widthOfHiddenTextBefore:C}})(),{distanceToModelLineEnd:u}=(()=>{const e=o.value.substring(Math.max(o.selectionStart,o.selectionEnd)),l=e.indexOf("\n"),d=-1===l?e:e.substring(0,l),u=d.indexOf("\t"),g=-1===u?d.length:d.length-u-1,p=s.getEndPosition(),m=Math.min(this._context.viewModel.model.getLineMaxColumn(p.lineNumber)-p.column,g),f=this._context.viewModel.model.getLineMaxColumn(p.lineNumber)-p.column-m;return{distanceToModelLineEnd:f}})();this._context.viewModel.revealRange("keyboard",!0,Q.e.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new VisibleTextAreaData(this._context,s.startLineNumber,l,d,u),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${ae.S} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()}))),this._register(this._textAreaInput.onCompositionUpdate((e=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())}))),this._register(this._textAreaInput.onCompositionEnd((()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${ae.S}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()}))),this._register(this._textAreaInput.onFocus((()=>{this._context.viewModel.setHasFocus(!0)}))),this._register(this._textAreaInput.onBlur((()=>{this._context.viewModel.setHasFocus(!1)})))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const o='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',s=this._context.viewModel.getLineContent(e.lineNumber),l=(0,re.u)(o);let d=!0,u=e.column,g=!0,p=e.column,m=0;while(m<50&&(d||g)){if(d&&u<=1&&(d=!1),d){const e=s.charCodeAt(u-2),o=l.get(e);0!==o?d=!1:u--}if(g&&p>s.length&&(g=!1),g){const e=s.charCodeAt(p-1),o=l.get(e);0!==o?g=!1:p++}m++}return[s.substring(u-1,p-1),e.column-u]}_getWordBeforePosition(e){const o=this._context.viewModel.getLineContent(e.lineNumber),s=(0,re.u)(this._context.configuration.options.get(117));let l=e.column,d=0;while(l>1){const u=o.charCodeAt(l-2),g=s.get(u);if(0!==g||d>50)return o.substring(l-1,e.column-1);d++,l--}return o.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const o=this._context.viewModel.getLineContent(e.lineNumber),s=o.charAt(e.column-2);if(!te.ZG(s.charCodeAt(0)))return s}return""}_getAriaLabel(e){const o=e.get(2);return 1===o?g.N("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",y.IJ?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const o=e.get(3);2===this._accessibilitySupport&&o===D.BH.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=o}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(131);return this._setAccessibilityOptions(o),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._contentHeight=s.height,this._fontInfo=o.get(44),this._lineHeight=o.get(59),this._emptySelectionClipboard=o.get(32),this._copyWithSyntaxHighlighting=o.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("tabindex",String(o.get(112))),(e.hasChanged(30)||e.hasChanged(81))&&(o.get(30)&&o.get(81)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new q.L(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea&&this._visibleTextArea.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){const e=this._visibleTextArea.visibleTextareaStart,o=this._visibleTextArea.visibleTextareaEnd,s=this._visibleTextArea.startPosition,l=this._visibleTextArea.endPosition;if(s&&l&&e&&o&&o.left>=this._scrollLeft&&e.left<=this._scrollLeft+this._contentWidth){const d=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,u=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let g=this._visibleTextArea.widthOfHiddenLineTextBefore,p=this._contentLeft+e.left-this._scrollLeft,m=o.left-e.left+1;if(p<this._contentLeft){const e=this._contentLeft-p;p+=e,g+=e,m-=e}m>this._contentWidth&&(m=this._contentWidth);const f=this._context.viewModel.getViewLineData(s.lineNumber),_=f.tokens.findTokenIndexAtOffset(s.column-1),C=f.tokens.findTokenIndexAtOffset(l.column-1),b=_===C,w=this._visibleTextArea.definePresentation(b?f.tokens.getPresentation(_):null);this.textArea.domNode.scrollTop=u*this._lineHeight,this.textArea.domNode.scrollLeft=g,this._doRender({lastRenderPosition:null,top:d,left:p,width:m,height:this._lineHeight,useCover:!1,color:(le.RW.getColorMap()||[])[w.foreground],italic:w.italic,bold:w.bold,underline:w.underline,strikethrough:w.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const o=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(o<0||o>this._contentHeight)this._renderAtTopLeft();else if(y.dz){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:o,left:e,width:de?0:1,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const s=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=s*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:o,left:e,width:de?0:1,height:de?0:1,useCover:!1})}_newlinecount(e){let o=0,s=-1;do{if(s=e.indexOf("\n",s+1),-1===s)break;o++}while(1);return o}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:de?0:1,height:de?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const o=this.textArea,s=this.textAreaCover;(0,ie.N)(o,this._fontInfo),o.setTop(e.top),o.setLeft(e.left),o.setWidth(e.width),o.setHeight(e.height),o.setColor(e.color?ce.Il.Format.CSS.formatHex(e.color):""),o.setFontStyle(e.italic?"italic":""),e.bold&&o.setFontWeight("bold"),o.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),s.setTop(e.useCover?e.top:0),s.setLeft(e.useCover?e.left:0),s.setWidth(e.useCover?e.width:0),s.setHeight(e.useCover?e.height:0);const l=this._context.configuration.options;l.get(50)?s.setClassName("monaco-editor-background textAreaCover "+Margin.OUTER_CLASS_NAME):0!==l.get(60).renderType?s.setClassName("monaco-editor-background textAreaCover "+LineNumbersOverlay.CLASS_NAME):s.setClassName("monaco-editor-background textAreaCover")}}function measureText(e,o){if(0===e.length)return 0;const s=document.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const l=document.createElement("span");(0,ie.N)(l,o),l.style.whiteSpace="pre",l.append(e),s.appendChild(l),document.body.appendChild(s);const d=l.offsetWidth;return document.body.removeChild(s),d}var he=s(2549);class ViewController{constructor(e,o,s,l){this.configuration=e,this.viewModel=o,this.userInputEvents=s,this.commandDelegate=l}paste(e,o,s,l){this.commandDelegate.paste(e,o,s,l)}type(e){this.commandDelegate.type(e)}compositionType(e,o,s,l){this.commandDelegate.compositionType(e,o,s,l)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){he.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const o=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<o?new q.L(e.lineNumber,o):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(70)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(70)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const o=this.configuration.options,s=y.IJ&&o.get(96),l=o.get(18);e.middleButton&&!s?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||l?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){he.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){he.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,o,s){e=this._validateViewColumn(e),he.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:o,doColumnSelect:s})}_createCursor(e,o){e=this._validateViewColumn(e),he.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:o})}_lastCursorMoveToSelect(e){he.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){he.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){he.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){he.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){he.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){he.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){he.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){he.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){he.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class ViewUserInputEvents{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return ViewUserInputEvents.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,o){const s=Object.assign({},e);return s.position&&(s.position=o.convertViewPositionToModelPosition(s.position)),s.range&&(s.range=o.convertViewRangeToModelRange(s.range)),s}}var ue,ge=s(72);class RenderedLinesCollection{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,o){this._lines=o,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const o=e-this._rendLineNumberStart;if(o<0||o>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[o]}onLinesDeleted(e,o){if(0===this.getCount())return null;const s=this.getStartLineNumber(),l=this.getEndLineNumber();if(o<s){const s=o-e+1;return this._rendLineNumberStart-=s,null}if(e>l)return null;let d=0,u=0;for(let p=s;p<=l;p++){const s=p-this._rendLineNumberStart;e<=p&&p<=o&&(0===u?(d=s,u=1):u++)}if(e<s){let l=0;l=o<s?o-e+1:s-e,this._rendLineNumberStart-=l}const g=this._lines.splice(d,u);return g}onLinesChanged(e,o){if(0===this.getCount())return!1;const s=this.getStartLineNumber(),l=this.getEndLineNumber();let d=!1;for(let u=e;u<=o;u++)u>=s&&u<=l&&(this._lines[u-this._rendLineNumberStart].onContentChanged(),d=!0);return d}onLinesInserted(e,o){if(0===this.getCount())return null;const s=o-e+1,l=this.getStartLineNumber(),d=this.getEndLineNumber();if(e<=l)return this._rendLineNumberStart+=s,null;if(e>d)return null;if(s+e>d){const o=this._lines.splice(e-this._rendLineNumberStart,d-e+1);return o}const u=[];for(let _=0;_<s;_++)u[_]=this._createLine();const g=e-this._rendLineNumberStart,p=this._lines.slice(0,g),m=this._lines.slice(g,this._lines.length-s),f=this._lines.slice(this._lines.length-s,this._lines.length);return this._lines=p.concat(u).concat(m),f}onTokensChanged(e){if(0===this.getCount())return!1;const o=this.getStartLineNumber(),s=this.getEndLineNumber();let l=!1;for(let d=0,u=e.length;d<u;d++){const u=e[d];if(u.toLineNumber<o||u.fromLineNumber>s)continue;const g=Math.max(o,u.fromLineNumber),p=Math.min(s,u.toLineNumber);for(let e=g;e<=p;e++){const o=e-this._rendLineNumberStart;this._lines[o].onTokensChanged(),l=!0}}return l}}class VisibleLinesCollection{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new RenderedLinesCollection((()=>this._host.createVisibleLine()))}_createDomNode(){const e=(0,P.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(131)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const o=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(o)for(let s=0,l=o.length;s<l;s++){const e=o[s].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onLinesInserted(e){const o=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(o)for(let s=0,l=o.length;s<l;s++){const e=o[s].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const o=this._linesCollection._get(),s=new ViewLayerRenderer(this.domNode.domNode,this._host,e),l={rendLineNumberStart:o.rendLineNumberStart,lines:o.lines,linesLength:o.lines.length},d=s.render(l,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(d.rendLineNumberStart,d.lines)}}class ViewLayerRenderer{constructor(e,o,s){this.domNode=e,this.host=o,this.viewportData=s}render(e,o,s,l){const d={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(d.rendLineNumberStart+d.linesLength-1<o||s<d.rendLineNumberStart){d.rendLineNumberStart=o,d.linesLength=s-o+1,d.lines=[];for(let e=o;e<=s;e++)d.lines[e-o]=this.host.createVisibleLine();return this._finishRendering(d,!0,l),d}if(this._renderUntouchedLines(d,Math.max(o-d.rendLineNumberStart,0),Math.min(s-d.rendLineNumberStart,d.linesLength-1),l,o),d.rendLineNumberStart>o){const e=o,u=Math.min(s,d.rendLineNumberStart-1);e<=u&&(this._insertLinesBefore(d,e,u,l,o),d.linesLength+=u-e+1)}else if(d.rendLineNumberStart<o){const e=Math.min(d.linesLength,o-d.rendLineNumberStart);e>0&&(this._removeLinesBefore(d,e),d.linesLength-=e)}if(d.rendLineNumberStart=o,d.rendLineNumberStart+d.linesLength-1<s){const e=d.rendLineNumberStart+d.linesLength,u=s;e<=u&&(this._insertLinesAfter(d,e,u,l,o),d.linesLength+=u-e+1)}else if(d.rendLineNumberStart+d.linesLength-1>s){const e=Math.max(0,s-d.rendLineNumberStart+1),o=d.linesLength-1,l=o-e+1;l>0&&(this._removeLinesAfter(d,l),d.linesLength-=l)}return this._finishRendering(d,!1,l),d}_renderUntouchedLines(e,o,s,l,d){const u=e.rendLineNumberStart,g=e.lines;for(let p=o;p<=s;p++){const e=u+p;g[p].layoutLine(e,l[e-d])}}_insertLinesBefore(e,o,s,l,d){const u=[];let g=0;for(let p=o;p<=s;p++)u[g++]=this.host.createVisibleLine();e.lines=u.concat(e.lines)}_removeLinesBefore(e,o){for(let s=0;s<o;s++){const o=e.lines[s].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(0,o)}_insertLinesAfter(e,o,s,l,d){const u=[];let g=0;for(let p=o;p<=s;p++)u[g++]=this.host.createVisibleLine();e.lines=e.lines.concat(u)}_removeLinesAfter(e,o){const s=e.linesLength-o;for(let l=0;l<o;l++){const o=e.lines[s+l].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(s,o)}_finishRenderingNewLines(e,o,s,l){ViewLayerRenderer._ttPolicy&&(s=ViewLayerRenderer._ttPolicy.createHTML(s));const d=this.domNode.lastChild;o||!d?this.domNode.innerHTML=s:d.insertAdjacentHTML("afterend",s);let u=this.domNode.lastChild;for(let g=e.linesLength-1;g>=0;g--){const o=e.lines[g];l[g]&&(o.setDomNode(u),u=u.previousSibling)}}_finishRenderingInvalidLines(e,o,s){const l=document.createElement("div");ViewLayerRenderer._ttPolicy&&(o=ViewLayerRenderer._ttPolicy.createHTML(o)),l.innerHTML=o;for(let d=0;d<e.linesLength;d++){const o=e.lines[d];if(s[d]){const e=l.firstChild,s=o.getDomNode();s.parentNode.replaceChild(e,s),o.setDomNode(e)}}}_finishRendering(e,o,s){const l=ViewLayerRenderer._sb,d=e.linesLength,u=e.lines,g=e.rendLineNumberStart,p=[];{l.reset();let m=!1;for(let e=0;e<d;e++){const o=u[e];p[e]=!1;const d=o.getDomNode();if(d)continue;const f=o.renderLine(e+g,s[e],this.viewportData,l);f&&(p[e]=!0,m=!0)}m&&this._finishRenderingNewLines(e,o,l.build(),p)}{l.reset();let o=!1;const m=[];for(let e=0;e<d;e++){const d=u[e];if(m[e]=!1,p[e])continue;const f=d.renderLine(e+g,s[e],this.viewportData,l);f&&(m[e]=!0,o=!0)}o&&this._finishRenderingInvalidLines(e,l.build(),m)}}}ViewLayerRenderer._ttPolicy=null===(ue=window.trustedTypes)||void 0===ue?void 0:ue.createPolicy("editorViewLayer",{createHTML:e=>e}),ViewLayerRenderer._sb=(0,ge.l$)(1e5);class ViewOverlays extends ViewPart{constructor(e){super(e),this._visibleLines=new VisibleLinesCollection(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,o=this._dynamicOverlays.length;e<o;e++){const o=this._dynamicOverlays[e];if(o.shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,o=this._dynamicOverlays.length;e<o;e++){const o=this._dynamicOverlays[e];o.dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new ViewOverlayLine(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let l=o;l<=s;l++){const o=this._visibleLines.getVisibleLine(l);o.onConfigurationChanged(e)}return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const o=this._dynamicOverlays.filter((e=>e.shouldRender()));for(let s=0,l=o.length;s<l;s++){const l=o[s];l.prepareRender(e),l.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class ViewOverlayLine{constructor(e,o){this._configuration=e,this._lineHeight=this._configuration.options.get(59),this._dynamicOverlays=o,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=(0,P.X)(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(59)}renderLine(e,o,s,l){let d="";for(let u=0,g=this._dynamicOverlays.length;u<g;u++){const o=this._dynamicOverlays[u];d+=o.render(s.startLineNumber,e)}return this._renderedContent!==d&&(this._renderedContent=d,l.appendASCIIString('<div style="position:absolute;top:'),l.appendASCIIString(String(o)),l.appendASCIIString("px;width:100%;height:"),l.appendASCIIString(String(this._lineHeight)),l.appendASCIIString('px;">'),l.appendASCIIString(d),l.appendASCIIString("</div>"),!0)}layoutLine(e,o){this._domNode&&(this._domNode.setTop(o),this._domNode.setHeight(this._lineHeight))}}class ContentViewOverlays extends ViewOverlays{constructor(e){super(e);const o=this._context.configuration.options,s=o.get(131);this._contentWidth=s.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(131);return this._contentWidth=s.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class MarginViewOverlays extends ViewOverlays{constructor(e){super(e);const o=this._context.configuration.options,s=o.get(131);this._contentLeft=s.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,ie.N)(this.domNode,o.get(44))}onConfigurationChanged(e){const o=this._context.configuration.options;(0,ie.N)(this.domNode,o.get(44));const s=o.get(131);return this._contentLeft=s.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const o=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(o),this.domNode.setWidth(this._contentLeft)}}class Coordinate{constructor(e,o){this._coordinateBrand=void 0,this.top=e,this.left=o}}class ViewContentWidgets extends ViewPart{constructor(e,o){super(e),this._viewDomNode=o,this._widgets={},this.domNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const o=Object.keys(this._widgets);for(const s of o)this._widgets[s].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const o=Object.keys(this._widgets);for(const s of o)this._widgets[s].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const o=new Widget(this._context,this._viewDomNode,e);this._widgets[o.id]=o,o.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(o.domNode):this.domNode.appendChild(o.domNode),this.setShouldRender()}setWidgetPosition(e,o,s){const l=this._widgets[e.getId()];l.setPosition(o,s),this.setShouldRender()}removeWidget(e){const o=e.getId();if(this._widgets.hasOwnProperty(o)){const e=this._widgets[o];delete this._widgets[o];const s=e.domNode.domNode;s.parentNode.removeChild(s),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}onBeforeRender(e){const o=Object.keys(this._widgets);for(const s of o)this._widgets[s].onBeforeRender(e)}prepareRender(e){const o=Object.keys(this._widgets);for(const s of o)this._widgets[s].prepareRender(e)}render(e){const o=Object.keys(this._widgets);for(const s of o)this._widgets[s].render(e)}}class Widget{constructor(e,o,s){this._context=e,this._viewDomNode=o,this._actual=s,this.domNode=(0,P.X)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const l=this._context.configuration.options,d=l.get(131);this._fixedOverflowWidgets=l.get(36),this._contentWidth=d.contentWidth,this._contentLeft=d.contentLeft,this._lineHeight=l.get(59),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const o=this._context.configuration.options;if(this._lineHeight=o.get(59),e.hasChanged(131)){const e=o.get(131);this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const e=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(e.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(e.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(e))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,o){this._setPosition(e),this._preference=o,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,o,s,l,d){const u=e.top,g=u,p=o.top+this._lineHeight,m=d.viewportHeight-p,f=u-l,_=g>=l,C=p,b=m>=l;let w=e.left,S=o.left;return w+s>d.scrollLeft+d.viewportWidth&&(w=d.scrollLeft+d.viewportWidth-s),S+s>d.scrollLeft+d.viewportWidth&&(S=d.scrollLeft+d.viewportWidth-s),w<d.scrollLeft&&(w=d.scrollLeft),S<d.scrollLeft&&(S=d.scrollLeft),{fitsAbove:_,aboveTop:f,aboveLeft:w,fitsBelow:b,belowTop:C,belowLeft:S}}_layoutHorizontalSegmentInPage(e,o,s,l){const d=Math.max(0,o.left-l),u=Math.min(o.left+o.width+l,e.width);let g=o.left+s-p.DI.scrollX;if(g+l>u){const e=g-(u-l);g-=e,s-=e}if(g<d){const e=g-d;g-=e,s-=e}return[s,g]}_layoutBoxInPage(e,o,s,l,d){const u=e.top-l,g=o.top+this._lineHeight,m=p.i(this._viewDomNode.domNode),f=m.top+u-p.DI.scrollY,_=m.top+g-p.DI.scrollY,C=p.D6(document.body),[b,w]=this._layoutHorizontalSegmentInPage(C,m,e.left-d.scrollLeft+this._contentLeft,s),[S,y]=this._layoutHorizontalSegmentInPage(C,m,o.left-d.scrollLeft+this._contentLeft,s),L=22,x=22,k=f>=L,N=_+l<=C.height-x;return this._fixedOverflowWidgets?{fitsAbove:k,aboveTop:Math.max(f,L),aboveLeft:w,fitsBelow:N,belowTop:_,belowLeft:y}:{fitsAbove:k,aboveTop:u,aboveLeft:b,fitsBelow:N,belowTop:g,belowLeft:S}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Coordinate(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const o=e.linesVisibleRangesForRange(this._viewRange,!1);if(!o||0===o.length)return[null,null];let s=o[0],l=o[0];for(const _ of o)_.lineNumber<s.lineNumber&&(s=_),_.lineNumber>l.lineNumber&&(l=_);let d=1073741824;for(const _ of s.ranges)_.left<d&&(d=_.left);let u=1073741824;for(const _ of l.ranges)_.left<u&&(u=_.left);const g=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.scrollTop,p=new Coordinate(g,d),m=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop,f=new Coordinate(m,u);return[p,f]}_prepareRenderWidget(e){if(!this._preference||0===this._preference.length)return null;const[o,s]=this._getTopAndBottomLeft(e);if(!o||!s)return null;if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){let e=null;if("function"===typeof this._actual.beforeRender&&(e=safeInvoke(this._actual.beforeRender,this._actual)),e)this._cachedDomNodeOffsetWidth=e.width,this._cachedDomNodeOffsetHeight=e.height;else{const e=this.domNode.domNode;this._cachedDomNodeOffsetWidth=e.offsetWidth,this._cachedDomNodeOffsetHeight=e.offsetHeight}}let l;l=this.allowEditorOverflow?this._layoutBoxInPage(o,s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(o,s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let d=1;d<=2;d++)for(const e of this._preference)if(1===e){if(!l)return null;if(2===d||l.fitsAbove)return{coordinate:new Coordinate(l.aboveTop,l.aboveLeft),position:1}}else{if(2!==e)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(o),position:0}:{coordinate:o,position:0};if(!l)return null;if(2===d||l.fitsBelow)return{coordinate:new Coordinate(l.belowTop,l.belowLeft),position:2}}return null}onBeforeRender(e){this._viewRange&&this._preference&&(this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void("function"===typeof this._actual.afterRender&&safeInvoke(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"===typeof this._actual.afterRender&&safeInvoke(this._actual.afterRender,this._actual,this._renderData.position)}}function safeInvoke(e,o,...s){try{return e.call(o,...s)}catch(ue){return null}}class AbstractLineHighlightOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e;const o=this._context.configuration.options,s=o.get(131);this._lineHeight=o.get(59),this._renderLineHighlight=o.get(85),this._renderLineHighlightOnlyWhenFocus=o.get(86),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new R.Y(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const o=this._selections.map((e=>e.positionLineNumber));o.sort(((e,o)=>e-o)),w.fS(this._cursorLineNumbers,o)||(this._cursorLineNumbers=o,e=!0);const s=this._selections.every((e=>e.isEmpty()));return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(131);return this._lineHeight=o.get(59),this._renderLineHighlight=o.get(85),this._renderLineHighlightOnlyWhenFocus=o.get(86),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}prepareRender(e){if(!this._shouldRenderThis())return void(this._renderData=null);const o=this._renderOne(e),s=e.visibleRange.startLineNumber,l=e.visibleRange.endLineNumber,d=this._cursorLineNumbers.length;let u=0;const g=[];for(let p=s;p<=l;p++){const e=p-s;while(u<d&&this._cursorLineNumbers[u]<p)u++;u<d&&this._cursorLineNumbers[u]===p?g[e]=o:g[e]=""}this._renderData=g}render(e,o){if(!this._renderData)return"";const s=o-e;return s>=this._renderData.length?"":this._renderData[s]}_shouldRenderInMargin(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class CurrentLineHighlightOverlay extends AbstractLineHighlightOverlay{_renderOne(e){const o="current-line"+(this._shouldRenderOther()?" current-line-both":"");return`<div class="${o}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class CurrentLineMarginHighlightOverlay extends AbstractLineHighlightOverlay{_renderOne(e){const o="current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"");return`<div class="${o}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}(0,se.Ic)(((e,o)=>{const s=e.getColor(oe.Kh);if(s&&(o.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${s}; }`),o.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${s}; border: none; }`)),!s||s.isTransparent()||e.defines(oe.Mm)){const s=e.getColor(oe.Mm);s&&(o.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${s}; }`),o.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${s}; }`),"hc"===e.type&&(o.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),o.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}}));class DecorationsOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e;const o=this._context.configuration.options;this._lineHeight=o.get(59),this._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const o=this._context.configuration.options;return this._lineHeight=o.get(59),this._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const o=e.getDecorationsInViewport();let s=[],l=0;for(let p=0,m=o.length;p<m;p++){const e=o[p];e.options.className&&(s[l++]=e)}s=s.sort(((e,o)=>{if(e.options.zIndex<o.options.zIndex)return-1;if(e.options.zIndex>o.options.zIndex)return 1;const s=e.options.className,l=o.options.className;return s<l?-1:s>l?1:Q.e.compareRangesUsingStarts(e.range,o.range)}));const d=e.visibleRange.startLineNumber,u=e.visibleRange.endLineNumber,g=[];for(let p=d;p<=u;p++){const e=p-d;g[e]=""}this._renderWholeLineDecorations(e,s,g),this._renderNormalDecorations(e,s,g),this._renderResult=g}_renderWholeLineDecorations(e,o,s){const l=String(this._lineHeight),d=e.visibleRange.startLineNumber,u=e.visibleRange.endLineNumber;for(let g=0,p=o.length;g<p;g++){const e=o[g];if(!e.options.isWholeLine)continue;const p='<div class="cdr '+e.options.className+'" style="left:0;width:100%;height:'+l+'px;"></div>',m=Math.max(e.range.startLineNumber,d),f=Math.min(e.range.endLineNumber,u);for(let o=m;o<=f;o++){const e=o-d;s[e]+=p}}}_renderNormalDecorations(e,o,s){const l=String(this._lineHeight),d=e.visibleRange.startLineNumber;let u=null,g=!1,p=null;for(let m=0,f=o.length;m<f;m++){const f=o[m];if(f.options.isWholeLine)continue;const _=f.options.className,C=Boolean(f.options.showIfCollapsed);let b=f.range;C&&1===b.endColumn&&b.endLineNumber!==b.startLineNumber&&(b=new Q.e(b.startLineNumber,b.startColumn,b.endLineNumber-1,this._context.viewModel.getLineMaxColumn(b.endLineNumber-1))),u===_&&g===C&&Q.e.areIntersectingOrTouching(p,b)?p=Q.e.plusRange(p,b):(null!==u&&this._renderNormalDecoration(e,p,u,g,l,d,s),u=_,g=C,p=b)}null!==u&&this._renderNormalDecoration(e,p,u,g,l,d,s)}_renderNormalDecoration(e,o,s,l,d,u,g){const p=e.linesVisibleRangesForRange(o,"findMatch"===s);if(p)for(let m=0,f=p.length;m<f;m++){const e=p[m];if(e.outsideRenderedLine)continue;const o=e.lineNumber-u;if(l&&1===e.ranges.length){const o=e.ranges[0];if(o.width<this._typicalHalfwidthCharacterWidth){const s=Math.round(o.left+o.width/2),l=Math.max(0,Math.round(s-this._typicalHalfwidthCharacterWidth/2));e.ranges[0]=new HorizontalRange(l,this._typicalHalfwidthCharacterWidth)}}for(let l=0,u=e.ranges.length;l<u;l++){const u=e.ranges[l],p='<div class="cdr '+s+'" style="left:'+String(u.left)+"px;width:"+String(u.width)+"px;height:"+d+'px;"></div>';g[o]+=p}}}render(e,o){if(!this._renderResult)return"";const s=o-e;return s<0||s>=this._renderResult.length?"":this._renderResult[s]}}var pe=s(3161),me=s(3910);class EditorScrollbar extends ViewPart{constructor(e,o,s,l){super(e);const d=this._context.configuration.options,u=d.get(92),g=d.get(67),m=d.get(34),f=d.get(95),_={listenOnDomNode:s.domNode,className:"editor-scrollable "+(0,se.m6)(e.theme.type),useShadows:!1,lazyRender:!0,vertical:u.vertical,horizontal:u.horizontal,verticalHasArrows:u.verticalHasArrows,horizontalHasArrows:u.horizontalHasArrows,verticalScrollbarSize:u.verticalScrollbarSize,verticalSliderSize:u.verticalSliderSize,horizontalScrollbarSize:u.horizontalScrollbarSize,horizontalSliderSize:u.horizontalSliderSize,handleMouseWheel:u.handleMouseWheel,alwaysConsumeMouseWheel:u.alwaysConsumeMouseWheel,arrowSize:u.arrowSize,mouseWheelScrollSensitivity:g,fastScrollSensitivity:m,scrollPredominantAxis:f,scrollByPage:u.scrollByPage};this.scrollbar=this._register(new pe.$Z(o.domNode,_,this._context.viewLayout.getScrollable())),PartFingerprints.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=(0,P.X)(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const onBrowserDesperateReveal=(e,o,s)=>{const l={};if(o){const o=e.scrollTop;o&&(l.scrollTop=this._context.viewLayout.getCurrentScrollTop()+o,e.scrollTop=0)}if(s){const o=e.scrollLeft;o&&(l.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+o,e.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(l,1)};this._register(p.nm(s.domNode,"scroll",(e=>onBrowserDesperateReveal(s.domNode,!0,!0)))),this._register(p.nm(o.domNode,"scroll",(e=>onBrowserDesperateReveal(o.domNode,!0,!1)))),this._register(p.nm(l.domNode,"scroll",(e=>onBrowserDesperateReveal(l.domNode,!0,!1)))),this._register(p.nm(this.scrollbarDomNode.domNode,"scroll",(e=>onBrowserDesperateReveal(this.scrollbarDomNode.domNode,!0,!1))))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,o=e.get(131);this.scrollbarDomNode.setLeft(o.contentLeft);const s=e.get(65),l=s.side;"right"===l?this.scrollbarDomNode.setWidth(o.contentWidth+o.minimap.minimapWidth):this.scrollbarDomNode.setWidth(o.contentWidth),this.scrollbarDomNode.setHeight(o.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(92)||e.hasChanged(67)||e.hasChanged(34)){const e=this._context.configuration.options,o=e.get(92),s=e.get(67),l=e.get(34),d=e.get(95),u={vertical:o.vertical,horizontal:o.horizontal,verticalScrollbarSize:o.verticalScrollbarSize,horizontalScrollbarSize:o.horizontalScrollbarSize,scrollByPage:o.scrollByPage,handleMouseWheel:o.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:l,scrollPredominantAxis:d};this.scrollbar.updateOptions(u)}return e.hasChanged(131)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+(0,se.m6)(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}(0,se.Ic)(((e,o)=>{const s=e.getColor(me._wn);s&&o.addRule(`\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tbox-shadow: ${s} 0 6px 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tbox-shadow: ${s} 6px 0 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\tbox-shadow: ${s} 6px 6px 6px -6px inset;\n\t\t\t}\n\t\t`);const l=e.getColor(me.etL);l&&o.addRule(`\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\tbackground: ${l};\n\t\t\t}\n\t\t`);const d=e.getColor(me.ABB);d&&o.addRule(`\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\tbackground: ${d};\n\t\t\t}\n\t\t`);const u=e.getColor(me.ynu);u&&o.addRule(`\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\tbackground: ${u};\n\t\t\t}\n\t\t`)}));class DecorationToRender{constructor(e,o,s){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+o,this.className=String(s)}}class DedupOverlay extends DynamicViewOverlay{_render(e,o,s){const l=[];for(let g=e;g<=o;g++){const o=g-e;l[o]=[]}if(0===s.length)return l;s.sort(((e,o)=>e.className===o.className?e.startLineNumber===o.startLineNumber?e.endLineNumber-o.endLineNumber:e.startLineNumber-o.startLineNumber:e.className<o.className?-1:1));let d=null,u=0;for(let g=0,p=s.length;g<p;g++){const p=s[g],m=p.className;let f=Math.max(p.startLineNumber,e)-e;const _=Math.min(p.endLineNumber,o)-e;d===m?(f=Math.max(u+1,f),u=Math.max(u,_)):(d=m,u=_);for(let e=f;e<=u;e++)l[e].push(d)}return l}}class GlyphMarginOverlay extends DedupOverlay{constructor(e){super(),this._context=e;const o=this._context.configuration.options,s=o.get(131);this._lineHeight=o.get(59),this._glyphMargin=o.get(50),this._glyphMarginLeft=s.glyphMarginLeft,this._glyphMarginWidth=s.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(131);return this._lineHeight=o.get(59),this._glyphMargin=o.get(50),this._glyphMarginLeft=s.glyphMarginLeft,this._glyphMarginWidth=s.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const o=e.getDecorationsInViewport(),s=[];let l=0;for(let d=0,u=o.length;d<u;d++){const e=o[d],u=e.options.glyphMarginClassName;u&&(s[l++]=new DecorationToRender(e.range.startLineNumber,e.range.endLineNumber,u))}return s}prepareRender(e){if(!this._glyphMargin)return void(this._renderResult=null);const o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,l=this._render(o,s,this._getDecorations(e)),d=this._lineHeight.toString(),u=this._glyphMarginLeft.toString(),g=this._glyphMarginWidth.toString(),p='" style="left:'+u+"px;width:"+g+"px;height:"+d+'px;"></div>',m=[];for(let f=o;f<=s;f++){const e=f-o,s=l[e];0===s.length?m[e]="":m[e]='<div class="cgmr codicon '+s.join(" ")+p}this._renderResult=m}render(e,o){if(!this._renderResult)return"";const s=o-e;return s<0||s>=this._renderResult.length?"":this._renderResult[s]}}var fe=s(8401),_e=s(3153),Ce=s(5094);class IndentGuidesOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e,this._primaryPosition=null;const o=this._context.configuration.options,s=o.get(132),l=o.get(44);this._lineHeight=o.get(59),this._spaceWidth=l.spaceWidth,this._maxIndentLeft=-1===s.wrappingColumn?-1:s.wrappingColumn*l.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=o.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(132),l=o.get(44);return this._lineHeight=o.get(59),this._spaceWidth=l.spaceWidth,this._maxIndentLeft=-1===s.wrappingColumn?-1:s.wrappingColumn*l.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=o.get(13),!0}onCursorStateChanged(e){var o;const s=e.selections[0],l=s.getPosition();return!(null===(o=this._primaryPosition)||void 0===o?void 0:o.equals(l))&&(this._primaryPosition=l,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var o,s,l,d;if(!this._bracketPairGuideOptions.indentation&&!1===this._bracketPairGuideOptions.bracketPairs)return void(this._renderResult=null);const u=e.visibleRange.startLineNumber,g=e.visibleRange.endLineNumber,p=e.scrollWidth,m=this._lineHeight,f=this._primaryPosition,_=this.getGuidesByLine(u,g,f),C=[];for(let b=u;b<=g;b++){const g=b-u,f=_[g];let w="";const S=null!==(s=null===(o=e.visibleRangeForPosition(new q.L(b,1)))||void 0===o?void 0:o.left)&&void 0!==s?s:0;for(const o of f){const s=S+(o.visibleColumn-1)*this._spaceWidth;if(s>p||this._maxIndentLeft>0&&s>this._maxIndentLeft)break;const u=o.horizontalLine?o.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",g=o.horizontalLine?(null!==(d=null===(l=e.visibleRangeForPosition(new q.L(b,o.horizontalLine.endColumn)))||void 0===l?void 0:l.left)&&void 0!==d?d:s+this._spaceWidth)-s:this._spaceWidth;w+=`<div class="core-guide ${o.className} ${u}" style="left:${s}px;height:${m}px;width:${g}px"></div>`}C[g]=w}this._renderResult=C}getGuidesByLine(e,o,s){const l=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.viewModel.getBracketGuidesInRangeByLine(e,o,s,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?Ce.s6.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?Ce.s6.EnabledForActive:Ce.s6.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,d=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,o):null;let u=0,g=0,p=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&s){const l=this._context.viewModel.getActiveIndentGuide(s.lineNumber,e,o);u=l.startLineNumber,g=l.endLineNumber,p=l.indent}const{indentSize:m}=this._context.viewModel.model.getOptions(),f=[];for(let _=e;_<=o;_++){const o=new Array;f.push(o);const s=l?l[_-e]:[],C=new w.H9(s),b=d?d[_-e]:[];for(let e=1;e<=b;e++){const l=(e-1)*m+1,d=0===s.length&&u<=_&&_<=g&&e===p;o.push(...C.takeWhile((e=>e.visibleColumn<l))||[]);const f=C.peek();f&&f.visibleColumn===l&&!f.horizontalLine||o.push(new Ce.UO(l,d?"core-guide-indent-active":"core-guide-indent",null))}o.push(...C.takeWhile((e=>!0))||[])}return f}render(e,o){if(!this._renderResult)return"";const s=o-e;return s<0||s>=this._renderResult.length?"":this._renderResult[s]}}function transparentToUndefined(e){if(!e||!e.isTransparent())return e}(0,se.Ic)(((e,o)=>{const s=e.getColor(oe.tR);s&&o.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${s} inset; }`);const l=e.getColor(oe.Ym)||s;l&&o.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${l} inset; }`);const d=[{bracketColor:oe.zJ,guideColor:oe.oV,guideColorActive:oe.Qb},{bracketColor:oe.Vs,guideColor:oe.m$,guideColorActive:oe.m3},{bracketColor:oe.CE,guideColor:oe.DS,guideColorActive:oe.To},{bracketColor:oe.UP,guideColor:oe.lS,guideColorActive:oe.L7},{bracketColor:oe.r0,guideColor:oe.Jn,guideColorActive:oe.HV},{bracketColor:oe.m1,guideColor:oe.YF,guideColorActive:oe.f9}],u=new _e.W,g=d.map((o=>{var s,l;const d=e.getColor(o.bracketColor),u=e.getColor(o.guideColor),g=e.getColor(o.guideColorActive),p=transparentToUndefined(null!==(s=transparentToUndefined(u))&&void 0!==s?s:null===d||void 0===d?void 0:d.transparent(.3)),m=transparentToUndefined(null!==(l=transparentToUndefined(g))&&void 0!==l?l:d);if(p&&m)return{guideColor:p,guideColorActive:m}})).filter(fe.$K);if(g.length>0){for(let e=0;e<30;e++){const s=g[e%g.length];o.addRule(`.monaco-editor .${u.getInlineClassNameOfLevel(e).replace(/ /g,".")} { --guide-color: ${s.guideColor}; --guide-color-active: ${s.guideColorActive}; }`)}o.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),o.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),o.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),o.addRule(`.monaco-editor .vertical.${u.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),o.addRule(`.monaco-editor .horizontal-top.${u.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),o.addRule(`.monaco-editor .horizontal-bottom.${u.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}}));class LastRenderedData{constructor(){this._currentVisibleRange=new Q.e(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class HorizontalRevealRangeRequest{constructor(e,o,s,l,d,u,g){this.minimalReveal=e,this.lineNumber=o,this.startColumn=s,this.endColumn=l,this.startScrollTop=d,this.stopScrollTop=u,this.scrollType=g,this.type="range",this.minLineNumber=o,this.maxLineNumber=o}}class HorizontalRevealSelectionsRequest{constructor(e,o,s,l,d){this.minimalReveal=e,this.selections=o,this.startScrollTop=s,this.stopScrollTop=l,this.scrollType=d,this.type="selections";let u=o[0].startLineNumber,g=o[0].endLineNumber;for(let p=1,m=o.length;p<m;p++){const e=o[p];u=Math.min(u,e.startLineNumber),g=Math.max(g,e.endLineNumber)}this.minLineNumber=u,this.maxLineNumber=g}}class ViewLines extends ViewPart{constructor(e,o){super(e),this._linesContent=o,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new VisibleLinesCollection(this),this.domNode=this._visibleLines.domNode;const s=this._context.configuration,l=this._context.configuration.options,d=l.get(44),u=l.get(132),g=l.get(131);this._lineHeight=l.get(59),this._typicalHalfwidthCharacterWidth=d.typicalHalfwidthCharacterWidth,this._isViewportWrapping=u.isViewportWrapping,this._revealHorizontalRightPadding=l.get(89),this._horizontalScrollbarHeight=g.horizontalScrollbarHeight,this._cursorSurroundingLines=l.get(25),this._cursorSurroundingLinesStyle=l.get(26),this._canUseLayerHinting=!l.get(28),this._viewLineOptions=new ViewLineOptions(s,this._context.theme.type),PartFingerprints.write(this.domNode,7),this.domNode.setClassName(`view-lines ${ae.S}`),(0,ie.N)(this.domNode,d),this._maxLineWidth=0,this._asyncUpdateLineWidths=new B.pY((()=>{this._updateLineWidthsSlow()}),200),this._asyncCheckMonospaceFontAssumptions=new B.pY((()=>{this._checkMonospaceFontAssumptions()}),2e3),this._lastRenderedData=new LastRenderedData,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new ViewLine(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(132)&&(this._maxLineWidth=0);const o=this._context.configuration.options,s=o.get(44),l=o.get(132),d=o.get(131);return this._lineHeight=o.get(59),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=l.isViewportWrapping,this._revealHorizontalRightPadding=o.get(89),this._horizontalScrollbarHeight=d.horizontalScrollbarHeight,this._cursorSurroundingLines=o.get(25),this._cursorSurroundingLinesStyle=o.get(26),this._canUseLayerHinting=!o.get(28),(0,ie.N)(this.domNode,s),this._onOptionsMaybeChanged(),e.hasChanged(131)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,o=new ViewLineOptions(e,this._context.theme.type);if(!this._viewLineOptions.equals(o)){this._viewLineOptions=o;const e=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=e;o<=s;o++){const e=this._visibleLines.getVisibleLine(o);e.onOptionsChanged(this._viewLineOptions)}return!0}return!1}onCursorStateChanged(e){const o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();let l=!1;for(let d=o;d<=s;d++)l=this._visibleLines.getVisibleLine(d).onSelectionChanged()||l;return l}onDecorationsChanged(e){{const e=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();for(let s=e;s<=o;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const o=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,o}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const o=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===o)return!1;let s=this._context.viewLayout.validateScrollPosition({scrollTop:o});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?s={scrollTop:s.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new HorizontalRevealRangeRequest(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),s.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new HorizontalRevealSelectionsRequest(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),s.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const l=Math.abs(this._context.viewLayout.getCurrentScrollTop()-s.scrollTop),d=l<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(s,d),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const o=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),s=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<o||e.scrollTop>s)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,o){const s=this._getViewLineDomNode(e);if(null===s)return null;const l=this._getLineNumberFor(s);if(-1===l)return null;if(l<1||l>this._context.viewModel.getLineCount())return null;if(1===this._context.viewModel.getLineMaxColumn(l))return new q.L(l,1);const d=this._visibleLines.getStartLineNumber(),u=this._visibleLines.getEndLineNumber();if(l<d||l>u)return null;let g=this._visibleLines.getVisibleLine(l).getColumnOfNodeOffset(l,e,o);const p=this._context.viewModel.getLineMinColumn(l);return g<p&&(g=p),new q.L(l,g)}_getViewLineDomNode(e){while(e&&1===e.nodeType){if(e.className===ViewLine.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let l=o;l<=s;l++){const o=this._visibleLines.getVisibleLine(l);if(e===o.getDomNode())return l}return-1}getLineWidth(e){const o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();return e<o||e>s?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,o){if(this.shouldRender())return null;const s=e.endLineNumber,l=Q.e.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!l)return null;let d=[],u=0;const g=new DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot);let p=0;o&&(p=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q.L(l.startLineNumber,1)).lineNumber);const m=this._visibleLines.getStartLineNumber(),f=this._visibleLines.getEndLineNumber();for(let _=l.startLineNumber;_<=l.endLineNumber;_++){if(_<m||_>f)continue;const e=_===l.startLineNumber?l.startColumn:1,C=_===l.endLineNumber?l.endColumn:this._context.viewModel.getLineMaxColumn(_),b=this._visibleLines.getVisibleLine(_).getVisibleRangesForRange(_,e,C,g);if(b){if(o&&_<s){const e=p;p=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q.L(_+1,1)).lineNumber,e!==p&&(b.ranges[b.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}d[u++]=new LineVisibleRanges(b.outsideRenderedLine,_,HorizontalRange.from(b.ranges))}}return 0===u?null:d}_visibleRangesForLineRange(e,o,s){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,o,s,new DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const o=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return o?new HorizontalPosition(o.outsideRenderedLine,o.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();let l=1,d=!0;for(let u=o;u<=s;u++){const o=this._visibleLines.getVisibleLine(u);!e||o.getWidthIsFast()?l=Math.max(l,o.getWidth()):d=!1}return d&&1===o&&s===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(l),d}_checkMonospaceFontAssumptions(){let e=-1,o=-1;const s=this._visibleLines.getStartLineNumber(),l=this._visibleLines.getEndLineNumber();for(let d=s;d<=l;d++){const s=this._visibleLines.getVisibleLine(d);if(s.needsMonospaceFontCheck()){const l=s.getWidth();l>o&&(o=l,e=d)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let d=s;d<=l;d++){const e=this._visibleLines.getVisibleLine(d);e.onMonospaceAssumptionsInvalidated()}}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const o=this._horizontalRevealRequest;if(e.startLineNumber<=o.minLineNumber&&o.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const e=this._computeScrollLeftToReveal(o);e&&(this._isViewportWrapping||this._ensureMaxLineWidth(e.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},o.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),y.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const e=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();for(let s=e;s<=o;s++){const e=this._visibleLines.getVisibleLine(s);if(e.needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const o=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-o),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const o=Math.ceil(e);this._maxLineWidth<o&&(this._maxLineWidth=o,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,o,s,l,d,u){const g=e.top,p=e.height,m=g+p;let f,_,C;if(d&&d.length>0){let e=d[0].startLineNumber,o=d[0].endLineNumber;for(let s=1,l=d.length;s<l;s++){const l=d[s];e=Math.min(e,l.startLineNumber),o=Math.max(o,l.endLineNumber)}f=!1,_=this._context.viewLayout.getVerticalOffsetForLineNumber(e),C=this._context.viewLayout.getVerticalOffsetForLineNumber(o)+this._lineHeight}else{if(!l)return-1;f=!0,_=this._context.viewLayout.getVerticalOffsetForLineNumber(l.startLineNumber),C=this._context.viewLayout.getVerticalOffsetForLineNumber(l.endLineNumber)+this._lineHeight}const b=("mouse"===o||s)&&"default"===this._cursorSurroundingLinesStyle;if(b)s||(_-=this._lineHeight);else{const e=Math.min(p/this._lineHeight/2,this._cursorSurroundingLines);_-=e*this._lineHeight,C+=Math.max(0,e-1)*this._lineHeight}let w;if(0!==u&&4!==u||(C+=s?this._horizontalScrollbarHeight:this._lineHeight),C-_>p){if(!f)return-1;w=_}else if(5===u||6===u)if(6===u&&g<=_&&C<=m)w=g;else{const e=Math.max(5*this._lineHeight,.2*p),o=_-e,s=C-p;w=Math.max(s,o)}else if(1===u||2===u)if(2===u&&g<=_&&C<=m)w=g;else{const e=(_+C)/2;w=Math.max(0,e-p/2)}else w=this._computeMinimumScrolling(g,m,_,C,3===u,4===u);return w}_computeScrollLeftToReveal(e){const o=this._context.viewLayout.getCurrentViewport(),s=o.left,l=s+o.width;let d=1073741824,u=0;if("range"===e.type){const o=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!o)return null;for(const e of o.ranges)d=Math.min(d,Math.round(e.left)),u=Math.max(u,Math.round(e.left+e.width))}else for(const p of e.selections){if(p.startLineNumber!==p.endLineNumber)return null;const e=this._visibleRangesForLineRange(p.startLineNumber,p.startColumn,p.endColumn);if(!e)return null;for(const o of e.ranges)d=Math.min(d,Math.round(o.left)),u=Math.max(u,Math.round(o.left+o.width))}if(e.minimalReveal||(d=Math.max(0,d-ViewLines.HORIZONTAL_EXTRA_PX),u+=this._revealHorizontalRightPadding),"selections"===e.type&&u-d>o.width)return null;const g=this._computeMinimumScrolling(s,l,d,u);return{scrollLeft:g,maxHorizontalOffset:u}}_computeMinimumScrolling(e,o,s,l,d,u){e|=0,o|=0,s|=0,l|=0,d=!!d,u=!!u;const g=o-e,p=l-s;return p<g?d?s:u?Math.max(0,l-g):s<e?s:l>o?Math.max(0,l-g):e:s}}ViewLines.HORIZONTAL_EXTRA_PX=30;class LinesDecorationsOverlay extends DedupOverlay{constructor(e){super(),this._context=e;const o=this._context.configuration.options,s=o.get(131);this._decorationsLeft=s.decorationsLeft,this._decorationsWidth=s.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(131);return this._decorationsLeft=s.decorationsLeft,this._decorationsWidth=s.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const o=e.getDecorationsInViewport(),s=[];let l=0;for(let d=0,u=o.length;d<u;d++){const e=o[d],u=e.options.linesDecorationsClassName;u&&(s[l++]=new DecorationToRender(e.range.startLineNumber,e.range.endLineNumber,u));const g=e.options.firstLineDecorationClassName;g&&(s[l++]=new DecorationToRender(e.range.startLineNumber,e.range.startLineNumber,g))}return s}prepareRender(e){const o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,l=this._render(o,s,this._getDecorations(e)),d=this._decorationsLeft.toString(),u=this._decorationsWidth.toString(),g='" style="left:'+d+"px;width:"+u+'px;"></div>',p=[];for(let m=o;m<=s;m++){const e=m-o,s=l[e];let d="";for(let o=0,l=s.length;o<l;o++)d+='<div class="cldr '+s[o]+g;p[e]=d}this._renderResult=p}render(e,o){return this._renderResult?this._renderResult[o-e]:""}}class MarginViewLineDecorationsOverlay extends DedupOverlay{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const o=e.getDecorationsInViewport(),s=[];let l=0;for(let d=0,u=o.length;d<u;d++){const e=o[d],u=e.options.marginClassName;u&&(s[l++]=new DecorationToRender(e.range.startLineNumber,e.range.endLineNumber,u))}return s}prepareRender(e){const o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,l=this._render(o,s,this._getDecorations(e)),d=[];for(let u=o;u<=s;u++){const e=u-o,s=l[e];let g="";for(let o=0,l=s.length;o<l;o++)g+='<div class="cmdr '+s[o]+'" style=""></div>';d[e]=g}this._renderResult=d}render(e,o){return this._renderResult?this._renderResult[o-e]:""}}var ve=s(7974);class RGBA8{constructor(e,o,s,l){this._rgba8Brand=void 0,this.r=RGBA8._clamp(e),this.g=RGBA8._clamp(o),this.b=RGBA8._clamp(s),this.a=RGBA8._clamp(l)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:0|e}}RGBA8.Empty=new RGBA8(0,0,0,0);class MinimapTokensColorTracker extends _.JT{constructor(){super(),this._onDidChange=new f.Q5,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(le.RW.onDidChange((e=>{e.changedColorMap&&this._updateColorMap()})))}static getInstance(){return this._INSTANCE||(this._INSTANCE=(0,_.dk)(new MinimapTokensColorTracker)),this._INSTANCE}_updateColorMap(){const e=le.RW.getColorMap();if(!e)return this._colors=[RGBA8.Empty],void(this._backgroundIsLight=!0);this._colors=[RGBA8.Empty];for(let s=1;s<e.length;s++){const o=e[s].rgba;this._colors[s]=new RGBA8(o.r,o.g,o.b,Math.round(255*o.a))}const o=e[2].getRelativeLuminance();this._backgroundIsLight=o>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}MinimapTokensColorTracker._INSTANCE=null;var be=s(1118);const we=(()=>{const e=[];for(let o=32;o<=126;o++)e.push(o);return e.push(65533),e})(),getCharIndex=(e,o)=>(e-=32,e<0||e>96?o<=2?(e+96)%96:95:e);var Se=s(5427);class MinimapCharRenderer{constructor(e,o){this.scale=o,this._minimapCharRendererBrand=void 0,this.charDataNormal=MinimapCharRenderer.soften(e,.8),this.charDataLight=MinimapCharRenderer.soften(e,50/60)}static soften(e,o){const s=new Uint8ClampedArray(e.length);for(let l=0,d=e.length;l<d;l++)s[l]=(0,Se.K)(e[l]*o);return s}renderChar(e,o,s,l,d,u,g,p,m,f,_){const C=1*this.scale,b=2*this.scale,w=_?1:b;if(o+C>e.width||s+w>e.height)return void console.warn("bad render request outside image data");const S=f?this.charDataLight:this.charDataNormal,y=getCharIndex(l,m),L=4*e.width,x=g.r,k=g.g,N=g.b,D=d.r-x,E=d.g-k,T=d.b-N,I=Math.max(u,p),A=e.data;let M=y*C*b,R=s*L+4*o;for(let P=0;P<w;P++){let e=R;for(let o=0;o<C;o++){const o=S[M++]/255*(u/255);A[e++]=x+D*o,A[e++]=k+E*o,A[e++]=N+T*o,A[e++]=I}R+=L}}blockRenderChar(e,o,s,l,d,u,g,p){const m=1*this.scale,f=2*this.scale,_=p?1:f;if(o+m>e.width||s+_>e.height)return void console.warn("bad render request outside image data");const C=4*e.width,b=d/255*.5,w=u.r,S=u.g,y=u.b,L=l.r-w,x=l.g-S,k=l.b-y,N=w+L*b,D=S+x*b,E=y+k*b,T=Math.max(d,g),I=e.data;let A=s*C+4*o;for(let M=0;M<_;M++){let e=A;for(let o=0;o<m;o++)I[e++]=N,I[e++]=D,I[e++]=E,I[e++]=T;A+=C}}}var ye=s(8289);const Le={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},decodeData=e=>{const o=new Uint8ClampedArray(e.length/2);for(let s=0;s<e.length;s+=2)o[s>>1]=Le[e[s]]<<4|15&Le[e[s+1]];return o},xe={1:(0,ye.I)((()=>decodeData("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792"))),2:(0,ye.I)((()=>decodeData("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")))};class MinimapCharRendererFactory{static create(e,o){if(this.lastCreated&&e===this.lastCreated.scale&&o===this.lastFontFamily)return this.lastCreated;let s;return s=xe[e]?new MinimapCharRenderer(xe[e](),e):MinimapCharRendererFactory.createFromSampleData(MinimapCharRendererFactory.createSampleData(o).data,e),this.lastFontFamily=o,this.lastCreated=s,s}static createSampleData(e){const o=document.createElement("canvas"),s=o.getContext("2d");o.style.height="16px",o.height=16,o.width=960,o.style.width="960px",s.fillStyle="#ffffff",s.font=`bold 16px ${e}`,s.textBaseline="middle";let l=0;for(const d of we)s.fillText(String.fromCharCode(d),l,8),l+=10;return s.getImageData(0,0,960,16)}static createFromSampleData(e,o){const s=61440;if(e.length!==s)throw new Error("Unexpected source in MinimapCharRenderer");const l=MinimapCharRendererFactory._downsample(e,o);return new MinimapCharRenderer(l,o)}static _downsampleChar(e,o,s,l,d){const u=1*d,g=2*d;let p=l,m=0;for(let f=0;f<g;f++){const l=f/g*16,d=(f+1)/g*16;for(let g=0;g<u;g++){const f=g/u*10,_=(g+1)/u*10;let C=0,b=0;for(let s=l;s<d;s++){const l=o+3840*Math.floor(s),d=1-(s-Math.floor(s));for(let o=f;o<_;o++){const s=1-(o-Math.floor(o)),u=l+4*Math.floor(o),g=s*d;b+=g,C+=e[u]*e[u+3]/255*g}}const w=C/b;m=Math.max(m,w),s[p++]=(0,Se.K)(w)}}return m}static _downsample(e,o){const s=2*o*1*o,l=96*s,d=new Uint8ClampedArray(l);let u=0,g=0,p=0;for(let m=0;m<96;m++)p=Math.max(p,this._downsampleChar(e,g,d,u,o)),u+=s,g+=40;if(p>0){const e=255/p;for(let o=0;o<l;o++)d[o]*=e}return d}}var ke=s(4973);const Ne=140,De=2;class MinimapOptions{constructor(e,o,s){const l=e.options,d=l.get(129),u=l.get(131),g=u.minimap,p=l.get(44),m=l.get(65);this.renderMinimap=g.renderMinimap,this.size=m.size,this.minimapHeightIsEditorHeight=g.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=l.get(94),this.showSlider=m.showSlider,this.pixelRatio=d,this.typicalHalfwidthCharacterWidth=p.typicalHalfwidthCharacterWidth,this.lineHeight=l.get(59),this.minimapLeft=g.minimapLeft,this.minimapWidth=g.minimapWidth,this.minimapHeight=u.height,this.canvasInnerWidth=g.minimapCanvasInnerWidth,this.canvasInnerHeight=g.minimapCanvasInnerHeight,this.canvasOuterWidth=g.minimapCanvasOuterWidth,this.canvasOuterHeight=g.minimapCanvasOuterHeight,this.isSampling=g.minimapIsSampling,this.editorHeight=u.height,this.fontScale=g.minimapScale,this.minimapLineHeight=g.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=(0,ye.I)((()=>MinimapCharRendererFactory.create(this.fontScale,p.fontFamily))),this.defaultBackgroundColor=s.getColor(2),this.backgroundColor=MinimapOptions._getMinimapBackground(o,this.defaultBackgroundColor),this.foregroundAlpha=MinimapOptions._getMinimapForegroundOpacity(o)}static _getMinimapBackground(e,o){const s=e.getColor(me.kVY);return s?new RGBA8(s.rgba.r,s.rgba.g,s.rgba.b,Math.round(255*s.rgba.a)):o}static _getMinimapForegroundOpacity(e){const o=e.getColor(me.Itd);return o?RGBA8._clamp(Math.round(255*o.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class MinimapLayout{constructor(e,o,s,l,d,u,g,p){this.scrollTop=e,this.scrollHeight=o,this.sliderNeeded=s,this._computedSliderRatio=l,this.sliderTop=d,this.sliderHeight=u,this.startLineNumber=g,this.endLineNumber=p}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,o,s,l,d,u,g,p,m,f,_){const C=e.pixelRatio,b=e.minimapLineHeight,w=Math.floor(e.canvasInnerHeight/b),S=e.lineHeight;if(e.minimapHeightIsEditorHeight){const o=p*e.lineHeight+(e.scrollBeyondLastLine?d-e.lineHeight:0),s=Math.max(1,Math.floor(d*d/o)),l=Math.max(0,e.minimapHeight-s),u=l/(f-d),_=m*u,C=l>0,b=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new MinimapLayout(m,f,C,u,_,s,1,Math.min(g,b))}let y,L;if(u&&s!==g){const e=s-o+1;y=Math.floor(e*b/C)}else{const e=d/S;y=Math.floor(e*b/C)}L=e.scrollBeyondLastLine?(g-1)*b/C:Math.max(0,g*b/C-y),L=Math.min(e.minimapHeight-y,L);const x=L/(f-d),k=m*x;let N=0;if(e.scrollBeyondLastLine){const e=d/S;N=e-1}if(w>=g+N){const e=1,o=g,s=L>0;return new MinimapLayout(m,f,s,x,k,y,e,o)}{let e=Math.max(1,Math.floor(o-k*C/b));_&&_.scrollHeight===f&&(_.scrollTop>m&&(e=Math.min(e,_.startLineNumber)),_.scrollTop<m&&(e=Math.max(e,_.startLineNumber)));const s=Math.min(g,e+w-1),d=(m-l)/S,u=(o-e+d)*b/C;return new MinimapLayout(m,f,!0,x,u,y,e,s)}}}class MinimapLine{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}MinimapLine.INVALID=new MinimapLine(-1);class RenderData{constructor(e,o,s){this.renderedLayout=e,this._imageData=o,this._renderedLines=new RenderedLinesCollection((()=>MinimapLine.INVALID)),this._renderedLines._set(e.startLineNumber,s)}linesEquals(e){if(!this.scrollEquals(e))return!1;const o=this._renderedLines._get(),s=o.lines;for(let l=0,d=s.length;l<d;l++)if(-1===s[l].dy)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,o){return this._renderedLines.onLinesChanged(e,o)}onLinesDeleted(e,o){this._renderedLines.onLinesDeleted(e,o)}onLinesInserted(e,o){this._renderedLines.onLinesInserted(e,o)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class MinimapBuffers{constructor(e,o,s,l){this._backgroundFillData=MinimapBuffers._createBackgroundFillData(o,s,l),this._buffers=[e.createImageData(o,s),e.createImageData(o,s)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,o,s){const l=s.r,d=s.g,u=s.b,g=s.a,p=new Uint8ClampedArray(e*o*4);let m=0;for(let f=0;f<o;f++)for(let o=0;o<e;o++)p[m]=l,p[m+1]=d,p[m+2]=u,p[m+3]=g,m+=4;return p}}class MinimapSamplingState{constructor(e,o){this.samplingRatio=e,this.minimapLines=o}static compute(e,o,s){if(0===e.renderMinimap||!e.isSampling)return[null,[]];const l=e.pixelRatio,d=e.lineHeight,u=e.scrollBeyondLastLine,{minimapLineCount:g}=D.gk.computeContainedMinimapLineCount({viewLineCount:o,scrollBeyondLastLine:u,height:e.editorHeight,lineHeight:d,pixelRatio:l}),p=o/g,m=p/2;if(!s||0===s.minimapLines.length){const e=[];if(e[0]=1,g>1){for(let o=0,s=g-1;o<s;o++)e[o]=Math.round(o*p+m);e[g-1]=o}return[new MinimapSamplingState(p,e),[]]}const f=s.minimapLines,_=f.length,C=[];let b=0,w=0,S=1;const y=10;let L=[],x=null;for(let k=0;k<g;k++){const e=Math.max(S,Math.round(k*p)),s=Math.max(e,Math.round((k+1)*p));while(b<_&&f[b]<e){if(L.length<y){const e=b+1+w;x&&"deleted"===x.type&&x._oldIndex===b-1?x.deleteToLineNumber++:(x={type:"deleted",_oldIndex:b,deleteFromLineNumber:e,deleteToLineNumber:e},L.push(x)),w--}b++}let l;if(b<_&&f[b]<=s)l=f[b],b++;else if(l=0===k?1:k+1===g?o:Math.round(k*p+m),L.length<y){const e=b+1+w;x&&"inserted"===x.type&&x._i===k-1?x.insertToLineNumber++:(x={type:"inserted",_i:k,insertFromLineNumber:e,insertToLineNumber:e},L.push(x)),w++}C[k]=l,S=l}if(L.length<y)while(b<_){const e=b+1+w;x&&"deleted"===x.type&&x._oldIndex===b-1?x.deleteToLineNumber++:(x={type:"deleted",_oldIndex:b,deleteFromLineNumber:e,deleteToLineNumber:e},L.push(x)),w--,b++}else L=[{type:"flush"}];return[new MinimapSamplingState(p,C),L]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,o){let s=this.modelLineToMinimapLine(e)-1;while(s>0&&this.minimapLines[s-1]>=e)s--;let l=this.modelLineToMinimapLine(o)-1;while(l+1<this.minimapLines.length&&this.minimapLines[l+1]<=o)l++;if(s===l){const l=this.minimapLines[s];if(l<e||l>o)return null}return[s+1,l+1]}decorationLineRangeToMinimapLineRange(e,o){let s=this.modelLineToMinimapLine(e),l=this.modelLineToMinimapLine(o);return e!==o&&l===s&&(l===this.minimapLines.length?s>1&&s--:l++),[s,l]}onLinesDeleted(e){const o=e.toLineNumber-e.fromLineNumber+1;let s=this.minimapLines.length,l=0;for(let d=this.minimapLines.length-1;d>=0;d--){if(this.minimapLines[d]<e.fromLineNumber)break;this.minimapLines[d]<=e.toLineNumber?(this.minimapLines[d]=Math.max(1,e.fromLineNumber-1),s=Math.min(s,d),l=Math.max(l,d)):this.minimapLines[d]-=o}return[s,l]}onLinesInserted(e){const o=e.toLineNumber-e.fromLineNumber+1;for(let s=this.minimapLines.length-1;s>=0;s--){if(this.minimapLines[s]<e.fromLineNumber)break;this.minimapLines[s]+=o}}}class Minimap extends ViewPart{constructor(e){super(e),this.tokensColorTracker=MinimapTokensColorTracker.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new MinimapOptions(this._context.configuration,this._context.theme,this.tokensColorTracker);const[o]=MinimapSamplingState.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=o,this._shouldCheckSampling=!1,this._actual=new InnerMinimap(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new MinimapOptions(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const o=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return!!o&&this._actual.onLinesChanged(o[0],o[1])}return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[o,s]=this._samplingState.onLinesDeleted(e);return o<=s&&this._actual.onLinesChanged(o+1,s+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const o=[];for(const s of e.ranges){const e=this._samplingState.modelLineRangeToMinimapLineRange(s.fromLineNumber,s.toLineNumber);e&&o.push({fromLineNumber:e[0],toLineNumber:e[1]})}return!!o.length&&this._actual.onTokensChanged(o)}return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;this._samplingState&&(o=this._samplingState.modelLineToMinimapLine(o),s=this._samplingState.modelLineToMinimapLine(s));const l={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:o,viewportEndLineNumber:s,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(o),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(l)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[o,s]=MinimapSamplingState.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=o,e&&this._samplingState)for(const l of s)switch(l.type){case"deleted":this._actual.onLinesDeleted(l.deleteFromLineNumber,l.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(l.insertFromLineNumber,l.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,o,s){if(this._samplingState){const l=[];for(let d=0,u=o-e+1;d<u;d++)s[d]?l[d]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+d-1]):l[d]=null;return l}return this._context.viewModel.getMinimapLinesRenderingData(e,o,s).data}getSelections(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[o,s]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new R.Y(o,e.startColumn,s,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,o){let s;if(this._samplingState){const l=this._samplingState.minimapLines[e-1],d=this._samplingState.minimapLines[o-1];s=new Q.e(l,1,d,this._context.viewModel.getLineMaxColumn(d))}else s=new Q.e(e,1,o,this._context.viewModel.getLineMaxColumn(o));const l=this._context.viewModel.getDecorationsInViewport(s);if(this._samplingState){const e=[];for(const o of l){if(!o.options.minimap)continue;const s=o.range,l=this._samplingState.modelLineToMinimapLine(s.startLineNumber),d=this._samplingState.modelLineToMinimapLine(s.endLineNumber);e.push(new be.$l(new Q.e(l,s.startColumn,d,s.endColumn),o.options))}return e}return l}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new Q.e(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class InnerMinimap extends _.JT{constructor(e,o){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=o,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(me.ov3),this._domNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=(0,P.X)(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=(0,P.X)(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=(0,P.X)(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=(0,P.X)(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=(0,P.X)(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=p.mu(this._domNode.domNode,"mousedown",(e=>{e.preventDefault();const o=this._model.options.renderMinimap;if(0===o)return;if(!this._lastRenderData)return;if("proportional"!==this._model.options.size){if(e.leftButton&&this._lastRenderData){const o=p.i(this._slider.domNode),s=o.top+o.height/2;this._startSliderDragging(e.buttons,e.posx,s,e.posy,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,l=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*e.browserEvent.offsetY,d=Math.floor(l/s);let u=d+this._lastRenderData.renderedLayout.startLineNumber;u=Math.min(u,this._model.getLineCount()),this._model.revealLineNumber(u)})),this._sliderMouseMoveMonitor=new ve.Z,this._sliderMouseDownListener=p.mu(this._slider.domNode,"mousedown",(e=>{e.preventDefault(),e.stopPropagation(),e.leftButton&&this._lastRenderData&&this._startSliderDragging(e.buttons,e.posx,e.posy,e.posy,this._lastRenderData.renderedLayout)})),this._gestureDisposable=O.o.addTarget(this._domNode.domNode),this._sliderTouchStartListener=p.nm(this._domNode.domNode,O.t.Start,(e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(e))}),{passive:!1}),this._sliderTouchMoveListener=p.nm(this._domNode.domNode,O.t.Change,(e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(e)}),{passive:!1}),this._sliderTouchEndListener=p.mu(this._domNode.domNode,O.t.End,(e=>{e.preventDefault(),e.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)}))}_startSliderDragging(e,o,s,l,d){this._slider.toggleClassName("active",!0);const handleMouseMove=(e,l)=>{const u=Math.abs(l-o);if(y.ED&&u>Ne)return void this._model.setScrollTop(d.scrollTop);const g=e-s;this._model.setScrollTop(d.getDesiredScrollTopFromDelta(g))};l!==s&&handleMouseMove(l,o),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,ve.e,(e=>handleMouseMove(e.posy,e.posx)),(()=>{this._slider.toggleClassName("active",!1)}))}scrollDueToTouchEvent(e){const o=this._domNode.domNode.getBoundingClientRect().top,s=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-o);this._model.setScrollTop(s)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return"always"===this._model.options.showSlider?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new MinimapBuffers(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,o){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,o)}onLinesDeleted(e,o){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,o),!0}onLinesInserted(e,o){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,o),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(me.ov3),this._renderDecorations=!0,!0}onTokensChanged(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){const o=this._model.options.renderMinimap;if(0===o)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const s=MinimapLayout.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(s.sliderNeeded?"block":"none"),this._slider.setTop(s.sliderTop),this._slider.setHeight(s.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(s.sliderHeight),this.renderDecorations(s),this._lastRenderData=this.renderLines(s)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const o=this._model.getSelections();o.sort(Q.e.compareRangesUsingStarts);const s=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);s.sort(((e,o)=>(e.options.zIndex||0)-(o.options.zIndex||0)));const{canvasInnerWidth:l,canvasInnerHeight:d}=this._model.options,u=this._model.options.minimapLineHeight,g=this._model.options.minimapCharWidth,p=this._model.getOptions().tabSize,m=this._decorationsCanvas.domNode.getContext("2d");m.clearRect(0,0,l,d);const f=new ContiguousLineMap(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(m,o,f,e,u),this._renderDecorationsLineHighlights(m,s,f,e,u);const _=new ContiguousLineMap(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(m,o,_,e,u,p,g,l),this._renderDecorationsHighlights(m,s,_,e,u,p,g,l)}}_renderSelectionLineHighlights(e,o,s,l,d){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let u=0,g=0;for(const p of o){const o=Math.max(l.startLineNumber,p.startLineNumber),m=Math.min(l.endLineNumber,p.endLineNumber);if(o>m)continue;for(let e=o;e<=m;e++)s.set(e,!0);const f=(o-l.startLineNumber)*d,_=(m-l.startLineNumber)*d+d;g>=f||(g>u&&e.fillRect(D.y0,u,e.canvas.width,g-u),u=f),g=_}g>u&&e.fillRect(D.y0,u,e.canvas.width,g-u)}_renderDecorationsLineHighlights(e,o,s,l,d){const u=new Map;for(let g=o.length-1;g>=0;g--){const p=o[g],m=p.options.minimap;if(!m||m.position!==ke.F5.Inline)continue;const f=Math.max(l.startLineNumber,p.range.startLineNumber),_=Math.min(l.endLineNumber,p.range.endLineNumber);if(f>_)continue;const C=m.getColor(this._theme.value);if(!C||C.isTransparent())continue;let b=u.get(C.toString());b||(b=C.transparent(.5).toString(),u.set(C.toString(),b)),e.fillStyle=b;for(let o=f;o<=_;o++){if(s.has(o))continue;s.set(o,!0);const u=(f-l.startLineNumber)*d;e.fillRect(D.y0,u,e.canvas.width,d)}}}_renderSelectionsHighlights(e,o,s,l,d,u,g,p){if(this._selectionColor&&!this._selectionColor.isTransparent())for(const m of o){const o=Math.max(l.startLineNumber,m.startLineNumber),f=Math.min(l.endLineNumber,m.endLineNumber);if(!(o>f))for(let _=o;_<=f;_++)this.renderDecorationOnLine(e,s,m,this._selectionColor,l,_,d,d,u,g,p)}}_renderDecorationsHighlights(e,o,s,l,d,u,g,p){for(const m of o){const o=m.options.minimap;if(!o)continue;const f=Math.max(l.startLineNumber,m.range.startLineNumber),_=Math.min(l.endLineNumber,m.range.endLineNumber);if(f>_)continue;const C=o.getColor(this._theme.value);if(C&&!C.isTransparent())for(let b=f;b<=_;b++)switch(o.position){case ke.F5.Inline:this.renderDecorationOnLine(e,s,m.range,C,l,b,d,d,u,g,p);continue;case ke.F5.Gutter:{const o=(b-l.startLineNumber)*d,s=2;this.renderDecoration(e,C,s,o,De,d);continue}}}}renderDecorationOnLine(e,o,s,l,d,u,g,p,m,f,_){const C=(u-d.startLineNumber)*p;if(C+g<0||C>this._model.options.canvasInnerHeight)return;const{startLineNumber:b,endLineNumber:w}=s,S=b===u?s.startColumn:1,y=w===u?s.endColumn:this._model.getLineMaxColumn(u),L=this.getXOffsetForPosition(o,u,S,m,f,_),x=this.getXOffsetForPosition(o,u,y,m,f,_);this.renderDecoration(e,l,L,C,x-L,g)}getXOffsetForPosition(e,o,s,l,d,u){if(1===s)return D.y0;const g=(s-1)*d;if(g>=u)return u;let p=e.get(o);if(!p){const s=this._model.getLineContent(o);p=[D.y0];let g=D.y0;for(let e=1;e<s.length+1;e++){const o=s.charCodeAt(e-1),m=9===o?l*d:te.K7(o)?2*d:d,f=g+m;if(f>=u){p[e]=u;break}p[e]=f,g=f}e.set(o,p)}return s-1<p.length?p[s-1]:u}renderDecoration(e,o,s,l,d,u){e.fillStyle=o&&o.toString()||"",e.fillRect(s,l,d,u)}renderLines(e){const o=e.startLineNumber,s=e.endLineNumber,l=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const o=this._lastRenderData._get();return new RenderData(e,o.imageData,o.lines)}const d=this._getBuffer();if(!d)return null;const[u,g,p]=InnerMinimap._renderUntouchedLines(d,o,s,l,this._lastRenderData),m=this._model.getMinimapLinesRenderingData(o,s,p),f=this._model.getOptions().tabSize,_=this._model.options.defaultBackgroundColor,C=this._model.options.backgroundColor,b=this._model.options.foregroundAlpha,w=this._model.tokensColorTracker,S=w.backgroundIsLight(),y=this._model.options.renderMinimap,L=this._model.options.charRenderer(),x=this._model.options.fontScale,k=this._model.options.minimapCharWidth,N=1===y?2:3,D=N*x,E=l>D?Math.floor((l-D)/2):0,T=C.a/255,I=new RGBA8(Math.round((C.r-_.r)*T+_.r),Math.round((C.g-_.g)*T+_.g),Math.round((C.b-_.b)*T+_.b),255);let A=0;const M=[];for(let B=0,W=s-o+1;B<W;B++)p[B]&&InnerMinimap._renderLine(d,I,C.a,S,y,k,w,b,L,A,E,f,m[B],x,l),M[B]=new MinimapLine(A),A+=l;const R=-1===u?0:u,P=-1===g?d.height:g,O=P-R,F=this._canvas.domNode.getContext("2d");return F.putImageData(d,0,0,0,R,d.width,O),new RenderData(e,d,M)}static _renderUntouchedLines(e,o,s,l,d){const u=[];if(!d){for(let e=0,l=s-o+1;e<l;e++)u[e]=!0;return[-1,-1,u]}const g=d._get(),p=g.imageData.data,m=g.rendLineNumberStart,f=g.lines,_=f.length,C=e.width,b=e.data,w=(s-o+1)*l*C*4;let S=-1,y=-1,L=-1,x=-1,k=-1,N=-1,D=0;for(let I=o;I<=s;I++){const e=I-o,s=I-m,d=s>=0&&s<_?f[s].dy:-1;if(-1===d){u[e]=!0,D+=l;continue}const g=d*C*4,E=(d+l)*C*4,T=D*C*4,A=(D+l)*C*4;x===g&&N===T?(x=E,N=A):(-1!==L&&(b.set(p.subarray(L,x),k),-1===S&&0===L&&L===k&&(S=x),-1===y&&x===w&&L===k&&(y=L)),L=g,x=E,k=T,N=A),u[e]=!1,D+=l}-1!==L&&(b.set(p.subarray(L,x),k),-1===S&&0===L&&L===k&&(S=x),-1===y&&x===w&&L===k&&(y=L));const E=-1===S?-1:S/(4*C),T=-1===y?-1:y/(4*C);return[E,T,u]}static _renderLine(e,o,s,l,d,u,g,p,m,f,_,C,b,w,S){const y=b.content,L=b.tokens,x=e.width-u,k=1===S;let N=D.y0,E=0,T=0;for(let D=0,I=L.getCount();D<I;D++){const b=L.getEndOffset(D),S=L.getForeground(D),I=g.getColor(S);for(;E<b;E++){if(N>x)return;const g=y.charCodeAt(E);if(9===g){const e=C-(E+T)%C;T+=e-1,N+=e*u}else if(32===g)N+=u;else{const C=te.K7(g)?2:1;for(let b=0;b<C;b++)if(2===d?m.blockRenderChar(e,N,f+_,I,p,o,s,k):m.renderChar(e,N,f+_,g,I,p,o,s,w,l,k),N+=u,N>x)return}}}}}class ContiguousLineMap{constructor(e,o,s){this._startLineNumber=e,this._endLineNumber=o,this._defaultValue=s,this._values=[];for(let l=0,d=this._endLineNumber-this._startLineNumber+1;l<d;l++)this._values[l]=s}has(e){return this.get(e)!==this._defaultValue}set(e,o){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=o)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}(0,se.Ic)(((e,o)=>{const s=e.getColor(me.CA6);s&&o.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${s}; }`);const l=e.getColor(me.Xy4);l&&o.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${l}; }`);const d=e.getColor(me.brw);d&&o.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${d}; }`);const u=e.getColor(me._wn);u&&o.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${u} -6px 0 6px -6px inset; }`)}));class ViewOverlayWidgets extends ViewPart{constructor(e){super(e);const o=this._context.configuration.options,s=o.get(131);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._domNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(131);return this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,!0}addWidget(e){const o=(0,P.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:o},o.setPosition("absolute"),o.setAttribute("widgetId",e.getId()),this._domNode.appendChild(o),this.setShouldRender()}setWidgetPosition(e,o){const s=this._widgets[e.getId()];return s.preference!==o&&(s.preference=o,this.setShouldRender(),!0)}removeWidget(e){const o=e.getId();if(this._widgets.hasOwnProperty(o)){const e=this._widgets[o],s=e.domNode.domNode;delete this._widgets[o],s.parentNode.removeChild(s),this.setShouldRender()}}_renderWidget(e){const o=e.domNode;if(null!==e.preference)if(0===e.preference)o.setTop(0),o.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(1===e.preference){const e=o.domNode.clientHeight;o.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight),o.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else 2===e.preference&&(o.setTop(0),o.domNode.style.right="50%");else o.unsetTop()}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const o=Object.keys(this._widgets);for(let s=0,l=o.length;s<l;s++){const e=o[s];this._renderWidget(this._widgets[e])}}}class Settings{constructor(e,o){const s=e.options;this.lineHeight=s.get(59),this.pixelRatio=s.get(129),this.overviewRulerLanes=s.get(74),this.renderBorder=s.get(73);const l=o.getColor(oe.zw);this.borderColor=l?l.toString():null,this.hideCursor=s.get(52);const d=o.getColor(oe.n0);this.cursorColor=d?d.transparent(.7).toString():null,this.themeType=o.type;const u=s.get(65),g=u.enabled,p=u.side,m=g?o.getColor(oe.e_)||le.RW.getDefaultBackground():null;this.backgroundColor=null===m||"left"===p?null:ce.Il.Format.CSS.formatHex(m);const f=s.get(131),_=f.overviewRuler;this.top=_.top,this.right=_.right,this.domWidth=_.width,this.domHeight=_.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[C,b]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=C,this.w=b}_initLanes(e,o,s){const l=o-e;if(s>=3){const o=Math.floor(l/3),s=Math.floor(l/3),d=l-o-s,u=e,g=u+o,p=u+o+d;return[[0,u,g,u,p,u,g,u],[0,o,d,o+d,s,o+d+s,d+s,o+d+s]]}if(2===s){const o=Math.floor(l/2),s=l-o,d=e,u=d+o;return[[0,d,d,d,u,d,d,d],[0,o,o,o,s,o+s,o+s,o+s]]}{const o=e,s=l;return[[0,o,o,o,o,o,o,o],[0,s,s,s,s,s,s,s]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class DecorationsOverviewRuler extends ViewPart{constructor(e){super(e),this._domNode=(0,P.X)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=le.RW.onDidChange((e=>{e.changedColorMap&&this._updateSettings(!0)})),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const o=new Settings(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(o))&&(this._settings=o,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let o=0,s=e.selections.length;o<s;o++)this._cursorPositions[o]=e.selections[o].getPosition();return this._cursorPositions.sort(q.L.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(0===this._settings.overviewRulerLanes)return this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),void this._domNode.setDisplay("none");this._domNode.setDisplay("block");const e=this._settings.canvasWidth,o=this._settings.canvasHeight,s=this._settings.lineHeight,l=this._context.viewLayout,d=this._context.viewLayout.getScrollHeight(),u=o/d,g=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),p=6*this._settings.pixelRatio|0,m=p/2|0,f=this._domNode.domNode.getContext("2d");null===this._settings.backgroundColor?f.clearRect(0,0,e,o):(f.fillStyle=this._settings.backgroundColor,f.fillRect(0,0,e,o));const _=this._settings.x,C=this._settings.w;g.sort(be.SQ.cmp);for(const b of g){const e=b.color,d=b.data;f.fillStyle=e;let g=0,w=0,S=0;for(let b=0,y=d.length/3;b<y;b++){const e=d[3*b],y=d[3*b+1],L=d[3*b+2];let x=l.getVerticalOffsetForLineNumber(y)*u|0,k=(l.getVerticalOffsetForLineNumber(L)+s)*u|0;const N=k-x;if(N<p){let e=(x+k)/2|0;e<m?e=m:e+m>o&&(e=o-m),x=e-m,k=e+m}x>S+1||e!==g?(0!==b&&f.fillRect(_[g],w,C[g],S-w),g=e,w=x,S=k):k>S&&(S=k)}f.fillRect(_[g],w,C[g],S-w)}if(!this._settings.hideCursor&&this._settings.cursorColor){const e=2*this._settings.pixelRatio|0,s=e/2|0,d=this._settings.x[7],g=this._settings.w[7];f.fillStyle=this._settings.cursorColor;let p=-100,m=-100;for(let _=0,C=this._cursorPositions.length;_<C;_++){const C=this._cursorPositions[_];let b=l.getVerticalOffsetForLineNumber(C.lineNumber)*u|0;b<s?b=s:b+s>o&&(b=o-s);const w=b-s,S=w+e;w>m+1?(0!==_&&f.fillRect(d,p,g,m-p),p=w,m=S):S>m&&(m=S)}f.fillRect(d,p,g,m-p)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(f.beginPath(),f.lineWidth=1,f.strokeStyle=this._settings.borderColor,f.moveTo(0,0),f.lineTo(0,o),f.stroke(),f.moveTo(0,0),f.lineTo(e,0),f.stroke())}}var Ee=s(665);class OverviewRuler extends ViewEventHandler{constructor(e,o){super(),this._context=e;const s=this._context.configuration.options;this._domNode=(0,P.X)(document.createElement("canvas")),this._domNode.setClassName(o),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new Ee.Tj((e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e))),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(s.get(59)),this._zoneManager.setPixelRatio(s.get(129)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const o=this._context.configuration.options;return e.hasChanged(59)&&(this._zoneManager.setLineHeight(o.get(59)),this._render()),e.hasChanged(129)&&(this._zoneManager.setPixelRatio(o.get(129)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let o=!1;o=this._zoneManager.setDOMWidth(e.width)||o,o=this._zoneManager.setDOMHeight(e.height)||o,o&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(0===this._zoneManager.getOuterHeight())return!1;const e=this._zoneManager.getCanvasWidth(),o=this._zoneManager.getCanvasHeight(),s=this._zoneManager.resolveColorZones(),l=this._zoneManager.getId2Color(),d=this._domNode.domNode.getContext("2d");return d.clearRect(0,0,e,o),s.length>0&&this._renderOneLane(d,s,l,e),!0}_renderOneLane(e,o,s,l){let d=0,u=0,g=0;for(const p of o){const o=p.colorId,m=p.from,f=p.to;o!==d?(e.fillRect(0,u,l,g-u),d=o,e.fillStyle=s[d],u=m,g=f):g>=m?g=Math.max(g,f):(e.fillRect(0,u,l,g-u),u=m,g=f)}e.fillRect(0,u,l,g-u)}}class Rulers extends ViewPart{constructor(e){super(e),this.domNode=(0,P.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const o=this._context.configuration.options;this._rulers=o.get(91),this._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const o=this._context.configuration.options;return this._rulers=o.get(91),this._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,o=this._rulers.length;if(e===o)return;if(e<o){const{tabSize:s}=this._context.viewModel.model.getOptions(),l=s;let d=o-e;while(d>0){const e=(0,P.X)(document.createElement("div"));e.setClassName("view-ruler"),e.setWidth(l),this.domNode.appendChild(e),this._renderedRulers.push(e),d--}return}let s=e-o;while(s>0){const e=this._renderedRulers.pop();this.domNode.removeChild(e),s--}}render(e){this._ensureRulersCount();for(let o=0,s=this._rulers.length;o<s;o++){const s=this._renderedRulers[o],l=this._rulers[o];s.setBoxShadow(l.color?`1px 0 0 0 ${l.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(l.column*this._typicalHalfwidthCharacterWidth)}}}(0,se.Ic)(((e,o)=>{const s=e.getColor(oe.zk);s&&o.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${s} inset; }`)}));class ScrollDecorationViewPart extends ViewPart{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const o=this._context.configuration.options,s=o.get(92);this._useShadows=s.useShadows,this._domNode=(0,P.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){const e=this._context.configuration.options,o=e.get(131);0===o.minimap.renderMinimap||o.minimap.minimapWidth>0&&0===o.minimap.minimapLeft?this._width=o.width:this._width=o.width-o.minimap.minimapWidth-o.verticalScrollbarWidth}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(92);return this._useShadows=s.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}(0,se.Ic)(((e,o)=>{const s=e.getColor(me._wn);s&&o.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${s} 0 6px 6px -6px inset; }`)}));class HorizontalRangeWithStyle{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class LineVisibleRangesWithStyle{constructor(e,o){this.lineNumber=e,this.ranges=o}}function toStyledRange(e){return new HorizontalRangeWithStyle(e)}function toStyled(e){return new LineVisibleRangesWithStyle(e.lineNumber,e.ranges.map(toStyledRange))}class SelectionsOverlay extends DynamicViewOverlay{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const o=this._context.configuration.options;this._lineHeight=o.get(59),this._roundedSelection=o.get(90),this._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const o=this._context.configuration.options;return this._lineHeight=o.get(59),this._roundedSelection=o.get(90),this._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let o=0,s=e.length;o<s;o++){const s=e[o];if(s.ranges.length>1)return!0}return!1}_enrichVisibleRangesWithStyle(e,o,s){const l=this._typicalHalfwidthCharacterWidth/4;let d=null,u=null;if(s&&s.length>0&&o.length>0){const l=o[0].lineNumber;if(l===e.startLineNumber)for(let e=0;!d&&e<s.length;e++)s[e].lineNumber===l&&(d=s[e].ranges[0]);const g=o[o.length-1].lineNumber;if(g===e.endLineNumber)for(let e=s.length-1;!u&&e>=0;e--)s[e].lineNumber===g&&(u=s[e].ranges[0]);d&&!d.startStyle&&(d=null),u&&!u.startStyle&&(u=null)}for(let g=0,p=o.length;g<p;g++){const e=o[g].ranges[0],s=e.left,m=e.left+e.width,f={top:0,bottom:0},_={top:0,bottom:0};if(g>0){const e=o[g-1].ranges[0].left,d=o[g-1].ranges[0].left+o[g-1].ranges[0].width;abs(s-e)<l?f.top=2:s>e&&(f.top=1),abs(m-d)<l?_.top=2:e<m&&m<d&&(_.top=1)}else d&&(f.top=d.startStyle.top,_.top=d.endStyle.top);if(g+1<p){const e=o[g+1].ranges[0].left,d=o[g+1].ranges[0].left+o[g+1].ranges[0].width;abs(s-e)<l?f.bottom=2:e<s&&s<d&&(f.bottom=1),abs(m-d)<l?_.bottom=2:m<d&&(_.bottom=1)}else u&&(f.bottom=u.startStyle.bottom,_.bottom=u.endStyle.bottom);e.startStyle=f,e.endStyle=_}}_getVisibleRangesWithStyle(e,o,s){const l=o.linesVisibleRangesForRange(e,!0)||[],d=l.map(toStyled),u=this._visibleRangesHaveGaps(d);return!u&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(o.visibleRange,d,s),d}_createSelectionPiece(e,o,s,l,d){return'<div class="cslr '+s+'" style="top:'+e.toString()+"px;left:"+l.toString()+"px;width:"+d.toString()+"px;height:"+o+'px;"></div>'}_actualRenderOneSelection(e,o,s,l){if(0===l.length)return;const d=!!l[0].ranges[0].startStyle,u=this._lineHeight.toString(),g=(this._lineHeight-1).toString(),p=l[0].lineNumber,m=l[l.length-1].lineNumber;for(let f=0,_=l.length;f<_;f++){const _=l[f],C=_.lineNumber,b=C-o,w=s&&(C===m||C===p)?g:u,S=s&&C===p?1:0;let y="",L="";for(let e=0,o=_.ranges.length;e<o;e++){const o=_.ranges[e];if(d){const e=o.startStyle,s=o.endStyle;if(1===e.top||1===e.bottom){y+=this._createSelectionPiece(S,w,SelectionsOverlay.SELECTION_CLASS_NAME,o.left-SelectionsOverlay.ROUNDED_PIECE_WIDTH,SelectionsOverlay.ROUNDED_PIECE_WIDTH);let s=SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;1===e.top&&(s+=" "+SelectionsOverlay.SELECTION_TOP_RIGHT),1===e.bottom&&(s+=" "+SelectionsOverlay.SELECTION_BOTTOM_RIGHT),y+=this._createSelectionPiece(S,w,s,o.left-SelectionsOverlay.ROUNDED_PIECE_WIDTH,SelectionsOverlay.ROUNDED_PIECE_WIDTH)}if(1===s.top||1===s.bottom){y+=this._createSelectionPiece(S,w,SelectionsOverlay.SELECTION_CLASS_NAME,o.left+o.width,SelectionsOverlay.ROUNDED_PIECE_WIDTH);let e=SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;1===s.top&&(e+=" "+SelectionsOverlay.SELECTION_TOP_LEFT),1===s.bottom&&(e+=" "+SelectionsOverlay.SELECTION_BOTTOM_LEFT),y+=this._createSelectionPiece(S,w,e,o.left+o.width,SelectionsOverlay.ROUNDED_PIECE_WIDTH)}}let s=SelectionsOverlay.SELECTION_CLASS_NAME;if(d){const e=o.startStyle,l=o.endStyle;0===e.top&&(s+=" "+SelectionsOverlay.SELECTION_TOP_LEFT),0===e.bottom&&(s+=" "+SelectionsOverlay.SELECTION_BOTTOM_LEFT),0===l.top&&(s+=" "+SelectionsOverlay.SELECTION_TOP_RIGHT),0===l.bottom&&(s+=" "+SelectionsOverlay.SELECTION_BOTTOM_RIGHT)}L+=this._createSelectionPiece(S,w,s,o.left,o.width)}e[b][0]+=y,e[b][1]+=L}}prepareRender(e){const o=[],s=e.visibleRange.startLineNumber,l=e.visibleRange.endLineNumber;for(let u=s;u<=l;u++){const e=u-s;o[e]=["",""]}const d=[];for(let u=0,g=this._selections.length;u<g;u++){const l=this._selections[u];if(l.isEmpty()){d[u]=null;continue}const g=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[u]);d[u]=g,this._actualRenderOneSelection(o,s,this._selections.length>1,g)}this._previousFrameVisibleRangesWithStyle=d,this._renderResult=o.map((([e,o])=>e+o))}render(e,o){if(!this._renderResult)return"";const s=o-e;return s<0||s>=this._renderResult.length?"":this._renderResult[s]}}function abs(e){return e<0?-e:e}SelectionsOverlay.SELECTION_CLASS_NAME="selected-text",SelectionsOverlay.SELECTION_TOP_LEFT="top-left-radius",SelectionsOverlay.SELECTION_BOTTOM_LEFT="bottom-left-radius",SelectionsOverlay.SELECTION_TOP_RIGHT="top-right-radius",SelectionsOverlay.SELECTION_BOTTOM_RIGHT="bottom-right-radius",SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",SelectionsOverlay.ROUNDED_PIECE_WIDTH=10,(0,se.Ic)(((e,o)=>{const s=e.getColor(me.hEj);s&&o.addRule(`.monaco-editor .focused .selected-text { background-color: ${s}; }`);const l=e.getColor(me.ES4);l&&o.addRule(`.monaco-editor .selected-text { background-color: ${l}; }`);const d=e.getColor(me.yb5);d&&!d.isTransparent()&&o.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${d}; }`)}));class ViewCursorRenderData{constructor(e,o,s,l,d,u){this.top=e,this.left=o,this.width=s,this.height=l,this.textContent=d,this.textContentClassName=u}}class ViewCursor{constructor(e){this._context=e;const o=this._context.configuration.options,s=o.get(44);this._cursorStyle=o.get(24),this._lineHeight=o.get(59),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(o.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,P.X)(document.createElement("div")),this._domNode.setClassName(`cursor ${ae.S}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,ie.N)(this._domNode,s),this._domNode.setDisplay("none"),this._position=new q.L(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(44);return this._cursorStyle=o.get(24),this._lineHeight=o.get(59),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(o.get(27),this._typicalHalfwidthCharacterWidth),(0,ie.N)(this._domNode,s),!0}onCursorPositionChanged(e){return this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:o}=this._position,s=this._context.viewModel.getLineContent(e),[l,d]=te.J_(s,o-1);return[new q.L(e,l+1),s.substring(l,d)]}_prepareRender(e){let o="";const[s,l]=this._getGraphemeAwarePosition();if(this._cursorStyle===D.d2.Line||this._cursorStyle===D.d2.LineThin){const d=e.visibleRangeForPosition(s);if(!d||d.outsideRenderedLine)return null;let u;this._cursorStyle===D.d2.Line?(u=p.Uh(this._lineCursorWidth>0?this._lineCursorWidth:2),u>2&&(o=l)):u=p.Uh(1);let g=d.left;u>=2&&g>=1&&(g-=1);const m=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new ViewCursorRenderData(m,g,u,this._lineHeight,o,"")}const d=e.linesVisibleRangesForRange(new Q.e(s.lineNumber,s.column,s.lineNumber,s.column+l.length),!1);if(!d||0===d.length)return null;const u=d[0];if(u.outsideRenderedLine||0===u.ranges.length)return null;const g=u.ranges[0],m=g.width<1?this._typicalHalfwidthCharacterWidth:g.width;let f="";if(this._cursorStyle===D.d2.Block){const e=this._context.viewModel.getViewLineData(s.lineNumber);o=l;const d=e.tokens.findTokenIndexAtOffset(s.column-1);f=e.tokens.getClassName(d)}let _=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,C=this._lineHeight;return this._cursorStyle!==D.d2.Underline&&this._cursorStyle!==D.d2.UnderlineThin||(_+=this._lineHeight-2,C=2),new ViewCursorRenderData(_,g.left,m,C,o,f)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${ae.S} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class ViewCursors extends ViewPart{constructor(e){super(e);const o=this._context.configuration.options;this._readOnly=o.get(81),this._cursorBlinking=o.get(22),this._cursorStyle=o.get(24),this._cursorSmoothCaretAnimation=o.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new ViewCursor(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=(0,P.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new B._F,this._cursorFlatBlinkInterval=new B.zh,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const o=this._context.configuration.options;this._readOnly=o.get(81),this._cursorBlinking=o.get(22),this._cursorStyle=o.get(24),this._cursorSmoothCaretAnimation=o.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let s=0,l=this._secondaryCursors.length;s<l;s++)this._secondaryCursors[s].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,o){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<o.length){const e=o.length-this._secondaryCursors.length;for(let o=0;o<e;o++){const e=new ViewCursor(this._context);this._domNode.domNode.insertBefore(e.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(e)}}else if(this._secondaryCursors.length>o.length){const e=this._secondaryCursors.length-o.length;for(let o=0;o<e;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<o.length;s++)this._secondaryCursors[s].onCursorPositionChanged(o[s])}onCursorStateChanged(e){const o=[];for(let l=0,d=e.selections.length;l<d;l++)o[l]=e.selections[l].getPosition();this._onCursorPositionChanged(o[0],o.slice(1));const s=e.selections[0].isEmpty();return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const shouldRender=o=>{for(let s=0,l=e.ranges.length;s<l;s++)if(e.ranges[s].fromLineNumber<=o.lineNumber&&o.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(shouldRender(this._primaryCursor.getPosition()))return!0;for(const o of this._secondaryCursors)if(shouldRender(o.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),o=0===e,s=5===e;o?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),o||s||(1===e?this._cursorFlatBlinkInterval.cancelAndSet((()=>{this._isVisible?this._hide():this._show()}),ViewCursors.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet((()=>{this._blinkingEnabled=!0,this._updateDomClassName()}),ViewCursors.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case D.d2.Line:e+=" cursor-line-style";break;case D.d2.Block:e+=" cursor-block-style";break;case D.d2.Underline:e+=" cursor-underline-style";break;case D.d2.LineThin:e+=" cursor-line-thin-style";break;case D.d2.BlockOutline:e+=" cursor-block-outline-style";break;case D.d2.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,o=this._secondaryCursors.length;e<o;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,o=this._secondaryCursors.length;e<o;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let o=0,s=this._secondaryCursors.length;o<s;o++)this._secondaryCursors[o].prepareRender(e)}render(e){const o=[];let s=0;const l=this._primaryCursor.render(e);l&&(o[s++]=l);for(let d=0,u=this._secondaryCursors.length;d<u;d++){const l=this._secondaryCursors[d].render(e);l&&(o[s++]=l)}this._renderData=o}getLastRenderData(){return this._renderData}}ViewCursors.BLINK_INTERVAL=500,(0,se.Ic)(((e,o)=>{const s=e.getColor(oe.n0);if(s){let l=e.getColor(oe.fY);l||(l=s.opposite()),o.addRule(`.monaco-editor .inputarea.ime-input { caret-color: ${s}; }`),o.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${s}; border-color: ${s}; color: ${l}; }`),"hc"===e.type&&o.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${l}; border-right: 1px solid ${l}; }`)}}));const invalidFunc=()=>{throw new Error("Invalid change accessor")};class ViewZones extends ViewPart{constructor(e){super(e);const o=this._context.configuration.options,s=o.get(131);this._lineHeight=o.get(59),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this.domNode=(0,P.X)(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=(0,P.X)(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),o=new Map;for(const l of e)o.set(l.id,l);let s=!1;return this._context.viewModel.changeWhitespace((e=>{const l=Object.keys(this._zones);for(let d=0,u=l.length;d<u;d++){const u=l[d],g=this._zones[u],p=this._computeWhitespaceProps(g.delegate);g.isInHiddenArea=p.isInHiddenArea;const m=o.get(u);!m||m.afterLineNumber===p.afterViewLineNumber&&m.height===p.heightInPx||(e.changeOneWhitespace(u,p.afterViewLineNumber,p.heightInPx),this._safeCallOnComputedHeight(g.delegate,p.heightInPx),s=!0)}})),s}onConfigurationChanged(e){const o=this._context.configuration.options,s=o.get(131);return this._lineHeight=o.get(59),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,e.hasChanged(59)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return"undefined"!==typeof e.afterColumn?e.afterColumn:1e4}_computeWhitespaceProps(e){if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let o,s;if("undefined"!==typeof e.afterColumn)o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const s=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;o=new q.L(s,this._context.viewModel.model.getLineMaxColumn(s))}s=o.column===this._context.viewModel.model.getLineMaxColumn(o.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:o.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:o.lineNumber,column:o.column+1});const l=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o,e.afterColumnAffinity),d=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(s);return{isInHiddenArea:!d,afterViewLineNumber:l.lineNumber,heightInPx:d?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let o=!1;return this._context.viewModel.changeWhitespace((s=>{const l={addZone:e=>(o=!0,this._addZone(s,e)),removeZone:e=>{e&&(o=this._removeZone(s,e)||o)},layoutZone:e=>{e&&(o=this._layoutZone(s,e)||o)}};safeInvoke1Arg(e,l),l.addZone=invalidFunc,l.removeZone=invalidFunc,l.layoutZone=invalidFunc})),o}_addZone(e,o){const s=this._computeWhitespaceProps(o),l=e.insertWhitespace(s.afterViewLineNumber,this._getZoneOrdinal(o),s.heightInPx,s.minWidthInPx),d={whitespaceId:l,delegate:o,isInHiddenArea:s.isInHiddenArea,isVisible:!1,domNode:(0,P.X)(o.domNode),marginDomNode:o.marginDomNode?(0,P.X)(o.marginDomNode):null};return this._safeCallOnComputedHeight(d.delegate,s.heightInPx),d.domNode.setPosition("absolute"),d.domNode.domNode.style.width="100%",d.domNode.setDisplay("none"),d.domNode.setAttribute("monaco-view-zone",d.whitespaceId),this.domNode.appendChild(d.domNode),d.marginDomNode&&(d.marginDomNode.setPosition("absolute"),d.marginDomNode.domNode.style.width="100%",d.marginDomNode.setDisplay("none"),d.marginDomNode.setAttribute("monaco-view-zone",d.whitespaceId),this.marginDomNode.appendChild(d.marginDomNode)),this._zones[d.whitespaceId]=d,this.setShouldRender(),d.whitespaceId}_removeZone(e,o){if(this._zones.hasOwnProperty(o)){const s=this._zones[o];return delete this._zones[o],e.removeWhitespace(s.whitespaceId),s.domNode.removeAttribute("monaco-visible-view-zone"),s.domNode.removeAttribute("monaco-view-zone"),s.domNode.domNode.parentNode.removeChild(s.domNode.domNode),s.marginDomNode&&(s.marginDomNode.removeAttribute("monaco-visible-view-zone"),s.marginDomNode.removeAttribute("monaco-view-zone"),s.marginDomNode.domNode.parentNode.removeChild(s.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,o){if(this._zones.hasOwnProperty(o)){const s=this._zones[o],l=this._computeWhitespaceProps(s.delegate);return s.isInHiddenArea=l.isInHiddenArea,e.changeOneWhitespace(s.whitespaceId,l.afterViewLineNumber,l.heightInPx),this._safeCallOnComputedHeight(s.delegate,l.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const o=this._zones[e];return Boolean(o.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return"number"===typeof e.heightInPx?e.heightInPx:"number"===typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return"number"===typeof e.minWidthInPx?e.minWidthInPx:0}_safeCallOnComputedHeight(e,o){if("function"===typeof e.onComputedHeight)try{e.onComputedHeight(o)}catch(s){(0,m.dL)(s)}}_safeCallOnDomNodeTop(e,o){if("function"===typeof e.onDomNodeTop)try{e.onDomNodeTop(o)}catch(s){(0,m.dL)(s)}}prepareRender(e){}render(e){const o=e.viewportData.whitespaceViewportData,s={};let l=!1;for(const u of o)this._zones[u.id].isInHiddenArea||(s[u.id]=u,l=!0);const d=Object.keys(this._zones);for(let u=0,g=d.length;u<g;u++){const o=d[u],l=this._zones[o];let g=0,p=0,m="none";s.hasOwnProperty(o)?(g=s[o].verticalOffset-e.bigNumbersDelta,p=s[o].height,m="block",l.isVisible||(l.domNode.setAttribute("monaco-visible-view-zone","true"),l.isVisible=!0),this._safeCallOnDomNodeTop(l.delegate,e.getScrolledTopFromAbsoluteTop(s[o].verticalOffset))):(l.isVisible&&(l.domNode.removeAttribute("monaco-visible-view-zone"),l.isVisible=!1),this._safeCallOnDomNodeTop(l.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),l.domNode.setTop(g),l.domNode.setHeight(p),l.domNode.setDisplay(m),l.marginDomNode&&(l.marginDomNode.setTop(g),l.marginDomNode.setHeight(p),l.marginDomNode.setDisplay(m))}l&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function safeInvoke1Arg(e,o){try{return e(o)}catch(s){(0,m.dL)(s)}}class EditorTheme{constructor(e){this._theme=e}get type(){return this._theme.type}get value(){return this._theme}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class ViewContext{constructor(e,o,s){this.configuration=e,this.theme=new EditorTheme(o),this.viewModel=s,this.viewLayout=s.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}class ViewportData{constructor(e,o,s,l){this.selections=e,this.startLineNumber=0|o.startLineNumber,this.endLineNumber=0|o.endLineNumber,this.relativeVerticalOffset=o.relativeVerticalOffset,this.bigNumbersDelta=0|o.bigNumbersDelta,this.whitespaceViewportData=s,this._model=l,this.visibleRange=new Q.e(o.startLineNumber,this._model.getLineMinColumn(o.startLineNumber),o.endLineNumber,this._model.getLineMaxColumn(o.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class View extends ViewEventHandler{constructor(e,o,s,l,d,u){super(),this._selections=[new R.Y(1,1,1,1)],this._renderAnimationFrame=null;const g=new ViewController(o,l,d,e);this._context=new ViewContext(o,s,l),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new TextAreaHandler(this._context,g,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=(0,P.X)(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=(0,P.X)(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=(0,P.X)(document.createElement("div")),PartFingerprints.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new EditorScrollbar(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new ViewLines(this._context,this._linesContent),this._viewZones=new ViewZones(this._context),this._viewParts.push(this._viewZones);const p=new DecorationsOverviewRuler(this._context);this._viewParts.push(p);const m=new ScrollDecorationViewPart(this._context);this._viewParts.push(m);const f=new ContentViewOverlays(this._context);this._viewParts.push(f),f.addDynamicOverlay(new CurrentLineHighlightOverlay(this._context)),f.addDynamicOverlay(new SelectionsOverlay(this._context)),f.addDynamicOverlay(new IndentGuidesOverlay(this._context)),f.addDynamicOverlay(new DecorationsOverlay(this._context));const _=new MarginViewOverlays(this._context);this._viewParts.push(_),_.addDynamicOverlay(new CurrentLineMarginHighlightOverlay(this._context)),_.addDynamicOverlay(new GlyphMarginOverlay(this._context)),_.addDynamicOverlay(new MarginViewLineDecorationsOverlay(this._context)),_.addDynamicOverlay(new LinesDecorationsOverlay(this._context)),_.addDynamicOverlay(new LineNumbersOverlay(this._context));const C=new Margin(this._context);C.getDomNode().appendChild(this._viewZones.marginDomNode),C.getDomNode().appendChild(_.getDomNode()),this._viewParts.push(C),this._contentWidgets=new ViewContentWidgets(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new ViewCursors(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new ViewOverlayWidgets(this._context),this._viewParts.push(this._overlayWidgets);const b=new Rulers(this._context);this._viewParts.push(b);const w=new Minimap(this._context);if(this._viewParts.push(w),p){const e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(p.getDomNode(),e.insertBefore)}this._linesContent.appendChild(f.getDomNode()),this._linesContent.appendChild(b.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(C.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(m.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(w.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),u?u.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new PointerHandler(this._context,g,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],o=this._textAreaHandler.getLastRenderData();return new PointerHandlerLastRenderData(e,o)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,o)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,o)),visibleRangeForPosition:(e,o)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new q.L(e,o))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const e=this._context.configuration.options,o=e.get(131);this.domNode.setWidth(o.width),this.domNode.setHeight(o.height),this._overflowGuardContainer.setWidth(o.width),this._overflowGuardContainer.setHeight(o.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(128)+" "+(0,se.m6)(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){null===this._renderAnimationFrame&&(this._renderAnimationFrame=p.lI(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){safeInvokeNoArg((()=>this._actualRender()))}_getViewPartsToRender(){const e=[];let o=0;for(const s of this._viewParts)s.shouldRender()&&(e[o++]=s);return e}_actualRender(){if(!p.Uw(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&0===e.length)return;const o=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(o.startLineNumber,o.endLineNumber,o.centeredLineNumber);const s=new ViewportData(this._selections,o,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(s),this._viewLines.shouldRender()&&(this._viewLines.renderText(s),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const l=new RenderingContext(this._context.viewLayout,s,this._viewLines);for(const d of e)d.prepareRender(l);for(const d of e)d.render(l),d.onDidRender()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,o){const s=this._context.viewModel.model.validatePosition({lineNumber:e,column:o}),l=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);this._flushAccumulatedAndRenderNow();const d=this._viewLines.visibleRangeForPosition(new q.L(l.lineNumber,l.column));return d?d.left:-1}getTargetAtClientPoint(e,o){const s=this._pointerHandler.getTargetAtClientPoint(e,o);return s?ViewUserInputEvents.convertViewToModelMouseTarget(s,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new OverviewRuler(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,o){if(o){this._viewLines.forceShouldRender();for(const e of this._viewParts)e.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let o=e.position&&e.position.range||null;if(null===o){const s=e.position?e.position.position:null;null!==s&&(o=new Q.e(s.lineNumber,s.column,s.lineNumber,s.column))}const s=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,o,s),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const o=e.position?e.position.preference:null,s=this._overlayWidgets.setWidgetPosition(e.widget,o);s&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function safeInvokeNoArg(e){try{return e()}catch(o){(0,m.dL)(o)}}var Te=s(5343);class Cursor{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Te.rS(new Q.e(1,1,1,1),0,new q.L(1,1),0),new Te.rS(new Q.e(1,1,1,1),0,new q.L(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Te.Vi(this.modelState,this.viewState)}readSelectionFromMarkers(e){const o=e.model._getTrackedRange(this._selTrackedRange);return R.Y.fromRange(o,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,o,s){this._setState(e,o,s)}static _validatePositionWithCache(e,o,s,l){return o.equals(s)?l:e.normalizePosition(o,2)}static _validateViewState(e,o){const s=o.position,l=o.selectionStart.getStartPosition(),d=o.selectionStart.getEndPosition(),u=e.normalizePosition(s,2),g=this._validatePositionWithCache(e,l,s,u),p=this._validatePositionWithCache(e,d,l,g);return s.equals(u)&&l.equals(g)&&d.equals(p)?o:new Te.rS(Q.e.fromPositions(g,p),o.selectionStartLeftoverVisibleColumns+l.column-g.column,u,o.leftoverVisibleColumns+s.column-u.column)}_setState(e,o,s){if(s&&(s=Cursor._validateViewState(e.viewModel,s)),o){const s=e.model.validateRange(o.selectionStart),l=o.selectionStart.equalsRange(s)?o.selectionStartLeftoverVisibleColumns:0,d=e.model.validatePosition(o.position),u=o.position.equals(d)?o.leftoverVisibleColumns:0;o=new Te.rS(s,l,d,u)}else{if(!s)return;const l=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(s.selectionStart)),d=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(s.position));o=new Te.rS(l,s.selectionStartLeftoverVisibleColumns,d,s.leftoverVisibleColumns)}if(s){const l=e.coordinatesConverter.validateViewRange(s.selectionStart,o.selectionStart),d=e.coordinatesConverter.validateViewPosition(s.position,o.position);s=new Te.rS(l,o.selectionStartLeftoverVisibleColumns,d,o.leftoverVisibleColumns)}else{const l=e.coordinatesConverter.convertModelPositionToViewPosition(new q.L(o.selectionStart.startLineNumber,o.selectionStart.startColumn)),d=e.coordinatesConverter.convertModelPositionToViewPosition(new q.L(o.selectionStart.endLineNumber,o.selectionStart.endColumn)),u=new Q.e(l.lineNumber,l.column,d.lineNumber,d.column),g=e.coordinatesConverter.convertModelPositionToViewPosition(o.position);s=new Te.rS(u,o.selectionStartLeftoverVisibleColumns,g,o.leftoverVisibleColumns)}this.modelState=o,this.viewState=s,this._updateTrackedRange(e)}}class CursorCollection{constructor(e){this.context=e,this.cursors=[new Cursor(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map((e=>e.readSelectionFromMarkers(this.context)))}getAll(){return this.cursors.map((e=>e.asCursorState()))}getViewPositions(){return this.cursors.map((e=>e.viewState.position))}getTopMostViewPosition(){return(0,w.VJ)(this.cursors,(0,w.tT)((e=>e.viewState.position),q.L.compare)).viewState.position}getBottomMostViewPosition(){return(0,w.jV)(this.cursors,(0,w.tT)((e=>e.viewState.position),q.L.compare)).viewState.position}getSelections(){return this.cursors.map((e=>e.modelState.selection))}getViewSelections(){return this.cursors.map((e=>e.viewState.selection))}setSelections(e){this.setStates(Te.Vi.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){null!==e&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const o=this.cursors.length-1,s=e.length;if(o<s){const e=s-o;for(let o=0;o<e;o++)this._addSecondaryCursor()}else if(o>s){const e=o-s;for(let o=0;o<e;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let l=0;l<s;l++)this.cursors[l+1].setState(this.context,e[l].modelState,e[l].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Cursor(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return 1===this.cursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(1===this.cursors.length)return;const e=this.cursors.slice(0),o=[];for(let s=0,l=e.length;s<l;s++)o.push({index:s,selection:e[s].modelState.selection});o.sort((0,w.tT)((e=>e.selection),Q.e.compareRangesUsingStarts));for(let s=0;s<o.length-1;s++){const l=o[s],d=o[s+1],u=l.selection,g=d.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let p;if(p=g.isEmpty()||u.isEmpty()?g.getStartPosition().isBeforeOrEqual(u.getEndPosition()):g.getStartPosition().isBefore(u.getEndPosition()),p){const u=l.index<d.index?s:s+1,g=l.index<d.index?s+1:s,p=o[g].index,m=o[u].index,f=o[g].selection,_=o[u].selection;if(!f.equalsSelection(_)){const s=f.plusRange(_),l=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,d=_.selectionStartLineNumber===_.startLineNumber&&_.selectionStartColumn===_.startColumn;let g,C;p===this.lastAddedCursorIndex?(g=l,this.lastAddedCursorIndex=m):g=d,C=g?new R.Y(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn):new R.Y(s.endLineNumber,s.endColumn,s.startLineNumber,s.startColumn),o[u].selection=C;const b=Te.Vi.fromModelSelection(C);e[m].setState(this.context,b.modelState,b.viewState)}for(const e of o)e.index>p&&e.index--;e.splice(p,1),o.splice(g,1),this._removeSecondaryCursor(p-1),s--}}}}class CursorContext{constructor(e,o,s,l){this._cursorContextBrand=void 0,this.model=e,this.viewModel=o,this.coordinatesConverter=s,this.cursorConfig=l}}var Ie=s(9436),Ae=s(4729),Me=s(4706);class ViewCompositionStartEvent{constructor(){this.type=0}}class ViewCompositionEndEvent{constructor(){this.type=1}}class ViewConfigurationChangedEvent{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class ViewCursorStateChangedEvent{constructor(e,o){this.type=3,this.selections=e,this.modelSelections=o}}class ViewDecorationsChangedEvent{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class ViewFlushedEvent{constructor(){this.type=5}}class ViewFocusChangedEvent{constructor(e){this.type=6,this.isFocused=e}}class ViewLanguageConfigurationEvent{constructor(){this.type=7}}class ViewLineMappingChangedEvent{constructor(){this.type=8}}class ViewLinesChangedEvent{constructor(e,o){this.type=9,this.fromLineNumber=e,this.toLineNumber=o}}class ViewLinesDeletedEvent{constructor(e,o){this.type=10,this.fromLineNumber=e,this.toLineNumber=o}}class ViewLinesInsertedEvent{constructor(e,o){this.type=11,this.fromLineNumber=e,this.toLineNumber=o}}class ViewRevealRangeRequestEvent{constructor(e,o,s,l,d,u,g){this.source=e,this.minimalReveal=o,this.range=s,this.selections=l,this.verticalType=d,this.revealHorizontal=u,this.scrollType=g,this.type=12}}class ViewScrollChangedEvent{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class ViewThemeChangedEvent{constructor(e){this.theme=e,this.type=14}}class ViewTokensChangedEvent{constructor(e){this.type=15,this.ranges=e}}class ViewTokensColorsChangedEvent{constructor(){this.type=16}}class ViewZonesChangedEvent{constructor(){this.type=17}}class ViewModelEventDispatcher extends _.JT{constructor(){super(),this._onEvent=this._register(new f.Q5),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let o=0,s=this._outgoingEvents.length;o<s;o++)if(this._outgoingEvents[o].kind===e.kind)return void(this._outgoingEvents[o]=this._outgoingEvents[o].merge(e));this._outgoingEvents.push(e)}_emitOutgoingEvents(){while(this._outgoingEvents.length>0){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let o=0,s=this._eventHandlers.length;o<s;o++)this._eventHandlers[o]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let o=0;o<this._eventHandlers.length;o++)if(this._eventHandlers[o]===e){this._eventHandlers.splice(o,1);break}}beginEmitViewEvents(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new ViewModelEventsCollector),this._collector}endEmitViewEvents(){if(this._collectorCnt--,0===this._collectorCnt){const e=this._collector.outgoingEvents,o=this._collector.viewEvents;this._collector=null;for(const s of e)this._addOutgoingEvent(s);o.length>0&&this._emitMany(o)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{const o=this.beginEmitViewEvents();o.emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){while(this._viewEventQueue){const e=this._viewEventQueue;this._viewEventQueue=null;const o=this._eventHandlers.slice(0);for(const s of o)s.handleEvents(e)}}}class ViewModelEventsCollector{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class ContentSizeChangedEvent{constructor(e,o,s,l){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=o,this.contentWidth=s,this.contentHeight=l,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return 0!==e.kind?this:new ContentSizeChangedEvent(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class FocusChangedEvent{constructor(e,o){this.kind=1,this.oldHasFocus=e,this.hasFocus=o}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return 1!==e.kind?this:new FocusChangedEvent(this.oldHasFocus,e.hasFocus)}}class ScrollChangedEvent{constructor(e,o,s,l,d,u,g,p){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=o,this._oldScrollHeight=s,this._oldScrollTop=l,this.scrollWidth=d,this.scrollLeft=u,this.scrollHeight=g,this.scrollTop=p,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return 2!==e.kind?this:new ScrollChangedEvent(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class viewModelEventDispatcher_ViewZonesChangedEvent{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class CursorStateChangedEvent{constructor(e,o,s,l,d,u,g){this.kind=6,this.oldSelections=e,this.selections=o,this.oldModelVersionId=s,this.modelVersionId=l,this.source=d,this.reason=u,this.reachedMaxCursorCount=g}static _selectionsAreEqual(e,o){if(!e&&!o)return!0;if(!e||!o)return!1;const s=e.length,l=o.length;if(s!==l)return!1;for(let d=0;d<s;d++)if(!e[d].equalsSelection(o[d]))return!1;return!0}isNoOp(){return CursorStateChangedEvent._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return 6!==e.kind?this:new CursorStateChangedEvent(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class ReadOnlyEditAttemptEvent{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class CursorsController extends _.JT{constructor(e,o,s,l){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=o,this._coordinatesConverter=s,this.context=new CursorContext(this._model,this._viewModel,this._coordinatesConverter,l),this._cursors=new CursorCollection(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,_.B9)(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new CursorContext(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let o=0;o<this._autoClosedActions.length;o++){const s=this._autoClosedActions[o];s.isValid(e)||(s.dispose(),this._autoClosedActions.splice(o,1),o--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,o,s,l){let d=!1;null!==l&&l.length>CursorsController.MAX_CURSOR_COUNT&&(l=l.slice(0,CursorsController.MAX_CURSOR_COUNT),d=!0);const u=CursorModelState.from(this._model,this);return this._cursors.setStates(l),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,o,s,u,d)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,o,s,l,d,u){const g=this._cursors.getViewPositions();let p=null,m=null;g.length>1?m=this._cursors.getViewSelections():p=Q.e.fromPositions(g[0],g[0]),e.emitViewEvent(new ViewRevealRangeRequestEvent(o,s,p,m,l,d,u))}saveState(){const e=[],o=this._cursors.getSelections();for(let s=0,l=o.length;s<l;s++){const l=o[s];e.push({inSelectionMode:!l.isEmpty(),selectionStart:{lineNumber:l.selectionStartLineNumber,column:l.selectionStartColumn},position:{lineNumber:l.positionLineNumber,column:l.positionColumn}})}return e}restoreState(e,o){const s=[];for(let l=0,d=o.length;l<d;l++){const e=o[l];let d=1,u=1;e.position&&e.position.lineNumber&&(d=e.position.lineNumber),e.position&&e.position.column&&(u=e.position.column);let g=d,p=u;e.selectionStart&&e.selectionStart.lineNumber&&(g=e.selectionStart.lineNumber),e.selectionStart&&e.selectionStart.column&&(p=e.selectionStart.column),s.push({selectionStartLineNumber:g,selectionStartColumn:p,positionLineNumber:d,positionColumn:u})}this.setStates(e,"restoreState",0,Te.Vi.fromModelSelections(s)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,o){if(o instanceof Me.D8){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=o.versionId,this._isHandling)return;const s=o.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new CursorCollection(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&o.resultingSelection&&o.resultingSelection.length>0){const s=Te.Vi.fromModelSelections(o.resultingSelection);this.setStates(e,"modelChange",o.isUndoing?5:o.isRedoing?6:2,s)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Te.Vi.fromModelSelections(o))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),o=e.viewState.selectionStart.getStartPosition(),s=e.viewState.position;return{isReal:!1,fromViewLineNumber:o.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,o),toViewLineNumber:s.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,s)}}getSelections(){return this._cursors.getSelections()}setSelections(e,o,s,l){this.setStates(e,o,l,Te.Vi.fromModelSelections(s))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,o){const s=[],l=[];for(let g=0,p=e.length;g<p;g++)s.push({range:e[g],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),l.push({range:o[g],options:{description:"auto-closed-enclosing",stickiness:1}});const d=this._model.deltaDecorations([],s),u=this._model.deltaDecorations([],l);this._autoClosedActions.push(new AutoClosedAction(this._model,d,u))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const o=CommandExecutor.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(o){this._interpretCommandResult(o);const s=[],l=[];for(let o=0;o<e.commands.length;o++){const d=e.commands[o];d instanceof Ae.g&&d.enclosingRange&&d.closeCharacterRange&&(s.push(d.closeCharacterRange),l.push(d.enclosingRange))}s.length>0&&this._pushAutoClosedAction(s,l),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,o,s,l,d){const u=CursorModelState.from(this._model,this);if(u.equals(l))return!1;const g=this._cursors.getSelections(),p=this._cursors.getViewSelections();if(e.emitViewEvent(new ViewCursorStateChangedEvent(p,g)),!l||l.cursorState.length!==u.cursorState.length||u.cursorState.some(((e,o)=>!e.modelState.equals(l.cursorState[o].modelState)))){const p=l?l.cursorState.map((e=>e.modelState.selection)):null,m=l?l.modelVersionId:0;e.emitOutgoingEvent(new CursorStateChangedEvent(p,g,m,u.modelVersionId,o||"keyboard",s,d))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const o=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];if(!l.text||l.text.indexOf("\n")>=0)return null;const d=l.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!d)return null;const u=d[1],g=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(u);if(!g||1!==g.length)return null;const p=g[0].open,m=l.text.length-d[2].length-1,f=l.text.lastIndexOf(p,m-1);if(-1===f)return null;o.push([f,m])}return o}executeEdits(e,o,s,l){let d=null;"snippet"===o&&(d=this._findAutoClosingPairs(s)),d&&(s[0]._isTracked=!0);const u=[],g=[],p=this._model.pushEditOperations(this.getSelections(),s,(e=>{if(d)for(let s=0,l=d.length;s<l;s++){const[o,l]=d[s],p=e[s],m=p.range.startLineNumber,f=p.range.startColumn-1+o,_=p.range.startColumn-1+l;u.push(new Q.e(m,_+1,m,_+2)),g.push(new Q.e(m,f+1,m,_+2))}const o=l(e);return o&&(this._isHandling=!0),o}));p&&(this._isHandling=!1,this.setSelections(e,o,p,0)),u.length>0&&this._pushAutoClosedAction(u,g)}_executeEdit(e,o,s,l=0){if(this.context.cursorConfig.readOnly)return;const d=CursorModelState.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(u){(0,m.dL)(u)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(o,s,l,d,!1)&&this.revealPrimary(o,s,!1,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return AutoClosedAction.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,o){this._executeEdit((()=>{"keyboard"===o&&(this._executeEditOperation(Ae.u.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)}),e,o)}type(e,o,s){this._executeEdit((()=>{if("keyboard"===s){const e=o.length;let s=0;while(s<e){const e=te.vH(o,s),l=o.substr(s,e);this._executeEditOperation(Ae.u.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),l)),s+=e}}else this._executeEditOperation(Ae.u.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),o))}),e,s)}compositionType(e,o,s,l,d,u){if(0!==o.length||0!==s||0!==l)this._executeEdit((()=>{this._executeEditOperation(Ae.u.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),o,s,l,d))}),e,u);else if(0!==d){const o=this.getSelections().map((e=>{const o=e.getPosition();return new R.Y(o.lineNumber,o.column+d,o.lineNumber,o.column+d)}));this.setSelections(e,u,o,0)}}paste(e,o,s,l,d){this._executeEdit((()=>{this._executeEditOperation(Ae.u.paste(this.context.cursorConfig,this._model,this.getSelections(),o,s,l||[]))}),e,d,4)}cut(e,o){this._executeEdit((()=>{this._executeEditOperation(Ie.A.cut(this.context.cursorConfig,this._model,this.getSelections()))}),e,o)}executeCommand(e,o,s){this._executeEdit((()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Te.Tp(0,[o],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,s)}executeCommands(e,o,s){this._executeEdit((()=>{this._executeEditOperation(new Te.Tp(0,o,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,s)}}CursorsController.MAX_CURSOR_COUNT=1e4;class CursorModelState{constructor(e,o){this.modelVersionId=e,this.cursorState=o}static from(e,o){return new CursorModelState(e.getVersionId(),o.getCursorStates())}equals(e){if(!e)return!1;if(this.modelVersionId!==e.modelVersionId)return!1;if(this.cursorState.length!==e.cursorState.length)return!1;for(let o=0,s=this.cursorState.length;o<s;o++)if(!this.cursorState[o].equals(e.cursorState[o]))return!1;return!0}}class AutoClosedAction{constructor(e,o,s){this._model=e,this._autoClosedCharactersDecorations=o,this._autoClosedEnclosingDecorations=s}static getAllAutoClosedCharacters(e){let o=[];for(const s of e)o=o.concat(s.getAutoClosedCharactersRanges());return o}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let o=0;o<this._autoClosedCharactersDecorations.length;o++){const s=this._model.getDecorationRange(this._autoClosedCharactersDecorations[o]);s&&e.push(s)}return e}isValid(e){const o=[];for(let s=0;s<this._autoClosedEnclosingDecorations.length;s++){const e=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[s]);if(e&&(o.push(e),e.startLineNumber!==e.endLineNumber))return!1}o.sort(Q.e.compareRangesUsingStarts),e.sort(Q.e.compareRangesUsingStarts);for(let s=0;s<e.length;s++){if(s>=o.length)return!1;if(!o[s].strictContainsRange(e[s]))return!1}return!0}}class CommandExecutor{static executeCommands(e,o,s){const l={model:e,selectionsBefore:o,trackedRanges:[],trackedRangesDirection:[]},d=this._innerExecuteCommands(l,s);for(let u=0,g=l.trackedRanges.length;u<g;u++)l.model._setTrackedRange(l.trackedRanges[u],null,0);return d}static _innerExecuteCommands(e,o){if(this._arrayIsEmpty(o))return null;const s=this._getEditOperations(e,o);if(0===s.operations.length)return null;const l=s.operations,d=this._getLoserCursorMap(l);if(d.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const u=[];for(let m=0,f=l.length;m<f;m++)d.hasOwnProperty(l[m].identifier.major.toString())||u.push(l[m]);s.hadTrackedEditOperation&&u.length>0&&(u[0]._isTracked=!0);let g=e.model.pushEditOperations(e.selectionsBefore,u,(s=>{const l=[];for(let o=0;o<e.selectionsBefore.length;o++)l[o]=[];for(const e of s)e.identifier&&l[e.identifier.major].push(e);const minorBasedSorter=(e,o)=>e.identifier.minor-o.identifier.minor,d=[];for(let u=0;u<e.selectionsBefore.length;u++)l[u].length>0?(l[u].sort(minorBasedSorter),d[u]=o[u].computeCursorState(e.model,{getInverseEditOperations:()=>l[u],getTrackedSelection:o=>{const s=parseInt(o,10),l=e.model._getTrackedRange(e.trackedRanges[s]);return 0===e.trackedRangesDirection[s]?new R.Y(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn):new R.Y(l.endLineNumber,l.endColumn,l.startLineNumber,l.startColumn)}})):d[u]=e.selectionsBefore[u];return d}));g||(g=e.selectionsBefore);const p=[];for(let m in d)d.hasOwnProperty(m)&&p.push(parseInt(m,10));p.sort(((e,o)=>o-e));for(const m of p)g.splice(m,1);return g}static _arrayIsEmpty(e){for(let o=0,s=e.length;o<s;o++)if(e[o])return!1;return!0}static _getEditOperations(e,o){let s=[],l=!1;for(let d=0,u=o.length;d<u;d++){const u=o[d];if(u){const o=this._getEditOperationsFromCommand(e,d,u);s=s.concat(o.operations),l=l||o.hadTrackedEditOperation}}return{operations:s,hadTrackedEditOperation:l}}static _getEditOperationsFromCommand(e,o,s){const l=[];let d=0;const addEditOperation=(e,u,g=!1)=>{Q.e.isEmpty(e)&&""===u||l.push({identifier:{major:o,minor:d++},range:e,text:u,forceMoveMarkers:g,isAutoWhitespaceEdit:s.insertsAutoWhitespace})};let u=!1;const addTrackedEditOperation=(e,o,s)=>{u=!0,addEditOperation(e,o,s)},trackSelection=(o,s)=>{const l=R.Y.liftSelection(o);let d;if(l.isEmpty())if("boolean"===typeof s)d=s?2:3;else{const o=e.model.getLineMaxColumn(l.startLineNumber);d=l.startColumn===o?2:3}else d=1;const u=e.trackedRanges.length,g=e.model._setTrackedRange(null,l,d);return e.trackedRanges[u]=g,e.trackedRangesDirection[u]=l.getDirection(),u.toString()},g={addEditOperation:addEditOperation,addTrackedEditOperation:addTrackedEditOperation,trackSelection:trackSelection};try{s.getEditOperations(e.model,g)}catch(p){return(0,m.dL)(p),{operations:[],hadTrackedEditOperation:!1}}return{operations:l,hadTrackedEditOperation:u}}static _getLoserCursorMap(e){e=e.slice(0),e.sort(((e,o)=>-Q.e.compareRangesUsingEnds(e.range,o.range)));const o={};for(let s=1;s<e.length;s++){const l=e[s-1],d=e[s];if(Q.e.getStartPosition(l.range).isBefore(Q.e.getEndPosition(d.range))){let u;u=l.identifier.major>d.identifier.major?l.identifier.major:d.identifier.major,o[u.toString()]=!0;for(let o=0;o<e.length;o++)e[o].identifier.major===u&&(e.splice(o,1),o<s&&s--,o--);s>0&&s--}}return o}}var Re=s(653),Pe=s(6518),Oe=s(9102),Fe=s(8801),Be=s(2963),We=s(6633);class PendingChanges{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const o=this._inserts,s=this._changes,l=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(o,s,l)}}class EditorWhitespace{constructor(e,o,s,l,d){this.id=e,this.afterLineNumber=o,this.ordinal=s,this.height=l,this.minWidth=d,this.prefixSum=0}}class LinesLayout{constructor(e,o,s,l){this._instanceId=te.PJ(++LinesLayout.INSTANCE_COUNT),this._pendingChanges=new PendingChanges,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=o,this._paddingTop=s,this._paddingBottom=l}static findInsertionIndex(e,o,s){let l=0,d=e.length;while(l<d){const u=l+d>>>1;o===e[u].afterLineNumber?s<e[u].ordinal?d=u:l=u+1:o<e[u].afterLineNumber?d=u:l=u+1}return l}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,o){this._paddingTop=e,this._paddingBottom=o}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let o=!1;try{const s={insertWhitespace:(e,s,l,d)=>{o=!0,e|=0,s|=0,l|=0,d|=0;const u=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new EditorWhitespace(u,e,s,l,d)),u},changeOneWhitespace:(e,s,l)=>{o=!0,s|=0,l|=0,this._pendingChanges.change({id:e,newAfterLineNumber:s,newHeight:l})},removeWhitespace:e=>{o=!0,this._pendingChanges.remove({id:e})}};e(s)}finally{this._pendingChanges.commit(this)}return o}_commitPendingChanges(e,o,s){if((e.length>0||s.length>0)&&(this._minWidth=-1),e.length+o.length+s.length<=1){for(const o of e)this._insertWhitespace(o);for(const e of o)this._changeOneWhitespace(e.id,e.newAfterLineNumber,e.newHeight);for(const e of s){const o=this._findWhitespaceIndex(e.id);-1!==o&&this._removeWhitespace(o)}return}const l=new Set;for(const g of s)l.add(g.id);const d=new Map;for(const g of o)d.set(g.id,g);const applyRemoveAndChange=e=>{const o=[];for(const s of e)if(!l.has(s.id)){if(d.has(s.id)){const e=d.get(s.id);s.afterLineNumber=e.newAfterLineNumber,s.height=e.newHeight}o.push(s)}return o},u=applyRemoveAndChange(this._arr).concat(applyRemoveAndChange(e));u.sort(((e,o)=>e.afterLineNumber===o.afterLineNumber?e.ordinal-o.ordinal:e.afterLineNumber-o.afterLineNumber)),this._arr=u,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const o=LinesLayout.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(o,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,o-1)}_findWhitespaceIndex(e){const o=this._arr;for(let s=0,l=o.length;s<l;s++)if(o[s].id===e)return s;return-1}_changeOneWhitespace(e,o,s){const l=this._findWhitespaceIndex(e);if(-1!==l&&(this._arr[l].height!==s&&(this._arr[l].height=s,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,l-1)),this._arr[l].afterLineNumber!==o)){const e=this._arr[l];this._removeWhitespace(l),e.afterLineNumber=o,this._insertWhitespace(e)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,o){this._checkPendingChanges(),e|=0,o|=0,this._lineCount-=o-e+1;for(let s=0,l=this._arr.length;s<l;s++){const l=this._arr[s].afterLineNumber;e<=l&&l<=o?this._arr[s].afterLineNumber=e-1:l>o&&(this._arr[s].afterLineNumber-=o-e+1)}}onLinesInserted(e,o){this._checkPendingChanges(),e|=0,o|=0,this._lineCount+=o-e+1;for(let s=0,l=this._arr.length;s<l;s++){const l=this._arr[s].afterLineNumber;e<=l&&(this._arr[s].afterLineNumber+=o-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e|=0;let o=Math.max(0,this._prefixSumValidIndex+1);0===o&&(this._arr[0].prefixSum=this._arr[0].height,o++);for(let s=o;s<=e;s++)this._arr[s].prefixSum=this._arr[s-1].prefixSum+this._arr[s].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,o=this.getWhitespacesTotalHeight();return e+o+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e|=0;const o=this._findLastWhitespaceBeforeLineNumber(e);return-1===o?0:this.getWhitespacesAccumulatedHeight(o)}_findLastWhitespaceBeforeLineNumber(e){e|=0;const o=this._arr;let s=0,l=o.length-1;while(s<=l){const d=l-s|0,u=d/2|0,g=s+u|0;if(o[g].afterLineNumber<e){if(g+1>=o.length||o[g+1].afterLineNumber>=e)return g;s=g+1|0}else l=g-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e|=0;const o=this._findLastWhitespaceBeforeLineNumber(e),s=o+1;return s<this._arr.length?s:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){let o;this._checkPendingChanges(),e|=0,o=e>1?this._lineHeight*(e-1):0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return o+s+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),-1===this._minWidth){let e=0;for(let o=0,s=this._arr.length;o<s;o++)e=Math.max(e,this._arr[o].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const o=this.getLinesTotalHeight();return e>o}isInTopPadding(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(0===this._paddingBottom)return!1;this._checkPendingChanges();const o=this.getLinesTotalHeight();return e>=o-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e|=0,e<0)return 1;const o=0|this._lineCount,s=this._lineHeight;let l=1,d=o;while(l<d){const o=(l+d)/2|0,u=0|this.getVerticalOffsetForLineNumber(o);if(e>=u+s)l=o+1;else{if(e>=u)return o;d=o}}return l>o?o:l}getLinesViewportData(e,o){this._checkPendingChanges(),e|=0,o|=0;const s=this._lineHeight,l=0|this.getLineNumberAtOrAfterVerticalOffset(e),d=0|this.getVerticalOffsetForLineNumber(l);let u=0|this._lineCount,g=0|this.getFirstWhitespaceIndexAfterLineNumber(l);const p=0|this.getWhitespacesCount();let m,f;-1===g?(g=p,f=u+1,m=0):(f=0|this.getAfterLineNumberForWhitespaceIndex(g),m=0|this.getHeightForWhitespaceIndex(g));let _=d,C=_;const b=5e5;let w=0;d>=b&&(w=Math.floor(d/b)*b,w=Math.floor(w/s)*s,C-=w);const S=[],y=e+(o-e)/2;let L=-1;for(let D=l;D<=u;D++){if(-1===L){const e=_,o=_+s;(e<=y&&y<o||e>y)&&(L=D)}_+=s,S[D-l]=C,C+=s;while(f===D)C+=m,_+=m,g++,g>=p?f=u+1:(f=0|this.getAfterLineNumberForWhitespaceIndex(g),m=0|this.getHeightForWhitespaceIndex(g));if(_>=o){u=D;break}}-1===L&&(L=u);const x=0|this.getVerticalOffsetForLineNumber(u);let k=l,N=u;return k<N&&d<e&&k++,k<N&&x+s>o&&N--,{bigNumbersDelta:w,startLineNumber:l,endLineNumber:u,relativeVerticalOffset:S,centeredLineNumber:L,completelyVisibleStartLineNumber:k,completelyVisibleEndLineNumber:N}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e|=0;const o=this.getAfterLineNumberForWhitespaceIndex(e);let s,l;return s=o>=1?this._lineHeight*o:0,l=e>0?this.getWhitespacesAccumulatedHeight(e-1):0,s+l+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e|=0;let o=0,s=this.getWhitespacesCount()-1;if(s<0)return-1;const l=this.getVerticalOffsetForWhitespaceIndex(s),d=this.getHeightForWhitespaceIndex(s);if(e>=l+d)return-1;while(o<s){const l=Math.floor((o+s)/2),d=this.getVerticalOffsetForWhitespaceIndex(l),u=this.getHeightForWhitespaceIndex(l);if(e>=d+u)o=l+1;else{if(e>=d)return l;s=l}}return o}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e|=0;const o=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(o<0)return null;if(o>=this.getWhitespacesCount())return null;const s=this.getVerticalOffsetForWhitespaceIndex(o);if(s>e)return null;const l=this.getHeightForWhitespaceIndex(o),d=this.getIdForWhitespaceIndex(o),u=this.getAfterLineNumberForWhitespaceIndex(o);return{id:d,afterLineNumber:u,verticalOffset:s,height:l}}getWhitespaceViewportData(e,o){this._checkPendingChanges(),e|=0,o|=0;const s=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),l=this.getWhitespacesCount()-1;if(s<0)return[];const d=[];for(let u=s;u<=l;u++){const e=this.getVerticalOffsetForWhitespaceIndex(u),s=this.getHeightForWhitespaceIndex(u);if(e>=o)break;d.push({id:this.getIdForWhitespaceIndex(u),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(u),verticalOffset:e,height:s})}return d}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}LinesLayout.INSTANCE_COUNT=0;const Ve=125;class EditorScrollDimensions{constructor(e,o,s,l){e|=0,o|=0,s|=0,l|=0,e<0&&(e=0),o<0&&(o=0),s<0&&(s=0),l<0&&(l=0),this.width=e,this.contentWidth=o,this.scrollWidth=Math.max(e,o),this.height=s,this.contentHeight=l,this.scrollHeight=Math.max(s,l)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class EditorScrollable extends _.JT{constructor(e,o){super(),this._onDidContentSizeChange=this._register(new f.Q5),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new EditorScrollDimensions(0,0,0,0),this._scrollable=this._register(new We.Rm({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:o})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const o=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const s=o.contentWidth!==e.contentWidth,l=o.contentHeight!==e.contentHeight;(s||l)&&this._onDidContentSizeChange.fire(new ContentSizeChangedEvent(o.contentWidth,o.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class ViewLayout extends _.JT{constructor(e,o,s){super(),this._configuration=e;const l=this._configuration.options,d=l.get(131),u=l.get(75);this._linesLayout=new LinesLayout(o,l.get(59),u.top,u.bottom),this._scrollable=this._register(new EditorScrollable(0,s)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new EditorScrollDimensions(d.contentWidth,0,d.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(103)?Ve:0)}onConfigurationChanged(e){const o=this._configuration.options;if(e.hasChanged(59)&&this._linesLayout.setLineHeight(o.get(59)),e.hasChanged(75)){const e=o.get(75);this._linesLayout.setPadding(e.top,e.bottom)}if(e.hasChanged(131)){const e=o.get(131),s=e.contentWidth,l=e.height,d=this._scrollable.getScrollDimensions(),u=d.contentWidth;this._scrollable.setScrollDimensions(new EditorScrollDimensions(s,d.contentWidth,l,this._getContentHeight(s,l,u)))}else this._updateHeight();e.hasChanged(103)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,o){this._linesLayout.onLinesDeleted(e,o)}onLinesInserted(e,o){this._linesLayout.onLinesInserted(e,o)}_getHorizontalScrollbarHeight(e,o){const s=this._configuration.options,l=s.get(92);return 2===l.horizontal||e>=o?0:l.horizontalScrollbarSize}_getContentHeight(e,o,s){const l=this._configuration.options;let d=this._linesLayout.getLinesTotalHeight();return l.get(94)?d+=Math.max(0,o-l.get(59)-l.get(75).bottom):d+=this._getHorizontalScrollbarHeight(e,s),d}_updateHeight(){const e=this._scrollable.getScrollDimensions(),o=e.width,s=e.height,l=e.contentWidth;this._scrollable.setScrollDimensions(new EditorScrollDimensions(o,e.contentWidth,s,this._getContentHeight(o,s,l)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),o=this._scrollable.getCurrentScrollPosition();return new be.l_(o.scrollTop,o.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),o=this._scrollable.getFutureScrollPosition();return new be.l_(o.scrollTop,o.scrollLeft,e.width,e.height)}_computeContentWidth(e){const o=this._configuration.options,s=o.get(132),l=o.get(44);if(s.isViewportWrapping){const s=o.get(131),d=o.get(65);return e>s.contentWidth+l.typicalHalfwidthCharacterWidth&&d.enabled&&"right"===d.side?e+s.verticalScrollbarWidth:e}{const s=o.get(93)*l.typicalHalfwidthCharacterWidth,d=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+s,d)}}setMaxLineWidth(e){const o=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new EditorScrollDimensions(o.width,this._computeContentWidth(e),o.height,o.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),o=e.scrollTop,s=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(o),l=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(s);return{scrollTop:o,scrollTopWithoutViewZones:o-l,scrollLeft:e.scrollLeft}}changeWhitespace(e){const o=this._linesLayout.changeWhitespace(e);return o&&this.onHeightMaybeChanged(),o}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const o=this._scrollable.getScrollDimensions();return e+o.height>o.scrollHeight&&(e=o.scrollHeight-o.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+o.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){const e=this._scrollable.getScrollDimensions();return e.contentWidth}getScrollWidth(){const e=this._scrollable.getScrollDimensions();return e.scrollWidth}getContentHeight(){const e=this._scrollable.getScrollDimensions();return e.contentHeight}getScrollHeight(){const e=this._scrollable.getScrollDimensions();return e.scrollHeight}getCurrentScrollLeft(){const e=this._scrollable.getCurrentScrollPosition();return e.scrollLeft}getCurrentScrollTop(){const e=this._scrollable.getCurrentScrollPosition();return e.scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,o){1===o?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,o){const s=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:s.scrollLeft+e,scrollTop:s.scrollTop+o})}}var He=s(168),ze=s(2822),Ue=s(7378);function createModelLineProjection(e,o){return null===e?o?IdentityModelLineProjection.INSTANCE:HiddenModelLineProjection.INSTANCE:new ModelLineProjection(e,o)}class ModelLineProjection{constructor(e,o){this._projectionData=e,this._isVisible=o}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,o,s){this._assertVisible();const l=s>0?this._projectionData.breakOffsets[s-1]:0,d=this._projectionData.breakOffsets[s];let u;if(null!==this._projectionData.injectionOffsets){const s=this._projectionData.injectionOffsets.map(((e,o)=>new Me.gk(0,0,e+1,this._projectionData.injectionOptions[o],0))),g=Me.gk.applyInjectedText(e.getLineContent(o),s);u=g.substring(l,d)}else u=e.getValueInRange({startLineNumber:o,startColumn:l+1,endLineNumber:o,endColumn:d+1});return s>0&&(u=spaces(this._projectionData.wrappedTextIndentLength)+u),u}getViewLineLength(e,o,s){return this._assertVisible(),this._projectionData.getLineLength(s)}getViewLineMinColumn(e,o,s){return this._assertVisible(),this._projectionData.getMinOutputOffset(s)+1}getViewLineMaxColumn(e,o,s){return this._assertVisible(),this._projectionData.getMaxOutputOffset(s)+1}getViewLineData(e,o,s){const l=new Array;return this.getViewLinesData(e,o,s,1,0,[!0],l),l[0]}getViewLinesData(e,o,s,l,d,u,g){this._assertVisible();const p=this._projectionData,m=p.injectionOffsets,f=p.injectionOptions;let _,C=null;if(m){C=[];let e=0,o=0;for(let s=0;s<p.getOutputLineCount();s++){const l=new Array;C[s]=l;const d=s>0?p.breakOffsets[s-1]:0,u=p.breakOffsets[s];while(o<m.length){const g=f[o].content.length,_=m[o]+e,C=_+g;if(_>u)break;if(d<C){const e=f[o];if(e.inlineClassName){const o=s>0?p.wrappedTextIndentLength:0,g=o+Math.max(_-d,0),m=o+Math.min(C-d,u);g!==m&&l.push(new be.Wx(g,m,e.inlineClassName,e.inlineClassNameAffectsLetterSpacing))}}if(!(C<=u))break;e+=g,o++}}}_=m?e.getLineTokens(o).withInserted(m.map(((e,o)=>({offset:e,text:f[o].content,tokenMetadata:Ue.A.defaultTokenMetadata})))):e.getLineTokens(o);for(let b=s;b<s+l;b++){const e=d+b-s;u[e]?g[e]=this._getViewLineData(_,C?C[b]:null,b):g[e]=null}}_getViewLineData(e,o,s){this._assertVisible();const l=this._projectionData,d=s>0?l.wrappedTextIndentLength:0,u=s>0?l.breakOffsets[s-1]:0,g=l.breakOffsets[s],p=e.sliceAndInflate(u,g,d);let m=p.getLineContent();s>0&&(m=spaces(l.wrappedTextIndentLength)+m);const f=this._projectionData.getMinOutputOffset(s)+1,_=m.length+1,C=s+1<this.getViewLineCount(),b=0===s?0:l.breakOffsetsVisibleColumn[s-1];return new be.IP(m,C,f,_,b,p,o)}getModelColumnOfViewPosition(e,o){return this._assertVisible(),this._projectionData.translateToInputOffset(e,o-1)+1}getViewPositionOfModelPosition(e,o,s=2){this._assertVisible();const l=this._projectionData.translateToOutputPosition(o-1,s);return l.toPosition(e)}getViewLineNumberOfModelPosition(e,o){this._assertVisible();const s=this._projectionData.translateToOutputPosition(o-1);return e+s.outputLineIndex}normalizePosition(e,o,s){const l=o.lineNumber-e,d=this._projectionData.normalizeOutputPosition(e,o.column-1,s),u=d.toPosition(l);return u}getInjectedTextAt(e,o){return this._projectionData.getInjectedText(e,o-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class IdentityModelLineProjection{constructor(){}isVisible(){return!0}setVisible(e){return e?this:HiddenModelLineProjection.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,o,s){return e.getLineContent(o)}getViewLineLength(e,o,s){return e.getLineLength(o)}getViewLineMinColumn(e,o,s){return e.getLineMinColumn(o)}getViewLineMaxColumn(e,o,s){return e.getLineMaxColumn(o)}getViewLineData(e,o,s){const l=e.getLineTokens(o),d=l.getLineContent();return new be.IP(d,!1,1,d.length+1,0,l.inflate(),null)}getViewLinesData(e,o,s,l,d,u,g){u[d]?g[d]=this.getViewLineData(e,o,0):g[d]=null}getModelColumnOfViewPosition(e,o){return o}getViewPositionOfModelPosition(e,o){return new q.L(e,o)}getViewLineNumberOfModelPosition(e,o){return e}normalizePosition(e,o,s){return o}getInjectedTextAt(e,o){return null}}IdentityModelLineProjection.INSTANCE=new IdentityModelLineProjection;class HiddenModelLineProjection{constructor(){}isVisible(){return!1}setVisible(e){return e?IdentityModelLineProjection.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,o,s){throw new Error("Not supported")}getViewLineLength(e,o,s){throw new Error("Not supported")}getViewLineMinColumn(e,o,s){throw new Error("Not supported")}getViewLineMaxColumn(e,o,s){throw new Error("Not supported")}getViewLineData(e,o,s){throw new Error("Not supported")}getViewLinesData(e,o,s,l,d,u,g){throw new Error("Not supported")}getModelColumnOfViewPosition(e,o){throw new Error("Not supported")}getViewPositionOfModelPosition(e,o){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,o){throw new Error("Not supported")}normalizePosition(e,o,s){throw new Error("Not supported")}getInjectedTextAt(e,o){throw new Error("Not supported")}}HiddenModelLineProjection.INSTANCE=new HiddenModelLineProjection;let Ke=[""];function spaces(e){if(e>=Ke.length)for(let o=1;o<=e;o++)Ke[o]=_makeSpaces(o);return Ke[e]}function _makeSpaces(e){return new Array(e+1).join(" ")}var je=s(310);class ViewModelLinesFromProjectedModel{constructor(e,o,s,l,d,u,g,p,m){this._editorId=e,this.model=o,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=s,this._monospaceLineBreaksComputerFactory=l,this.fontInfo=d,this.tabSize=u,this.wrappingStrategy=g,this.wrappingColumn=p,this.wrappingIndent=m,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new CoordinatesConverter(this)}_constructLines(e,o){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const s=this.model.getLinesContent(),l=this.model.getInjectedTextDecorations(this._editorId),d=s.length,u=this.createLineBreaksComputer(),g=new w.H9(Me.gk.fromDecorations(l));for(let w=0;w<d;w++){const e=g.takeWhile((e=>e.lineNumber===w+1));u.addRequest(s[w],e,o?o[w]:null)}const p=u.finalize(),m=[],f=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(Q.e.compareRangesUsingStarts);let _=1,C=0,b=-1,S=b+1<f.length?C+1:d+2;for(let w=0;w<d;w++){const e=w+1;e===S&&(b++,_=f[b].startLineNumber,C=f[b].endLineNumber,S=b+1<f.length?C+1:d+2);const o=e>=_&&e<=C,s=createModelLineProjection(p[w],!o);m[w]=s.getViewLineCount(),this.modelLineProjections[w]=s}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new je.Ck(m)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e)))}setHiddenAreas(e){const o=e.map((e=>this.model.validateRange(e))),s=normalizeLineRanges(o),l=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(Q.e.compareRangesUsingStarts);if(s.length===l.length){let e=!1;for(let o=0;o<s.length;o++)if(!s[o].equalsRange(l[o])){e=!0;break}if(!e)return!1}const d=s.map((e=>({range:e,options:ze.qx.EMPTY})));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,d);const u=s;let g=1,p=0,m=-1,f=m+1<u.length?p+1:this.modelLineProjections.length+2,_=!1;for(let C=0;C<this.modelLineProjections.length;C++){const e=C+1;e===f&&(m++,g=u[m].startLineNumber,p=u[m].endLineNumber,f=m+1<u.length?p+1:this.modelLineProjections.length+2);let o=!1;if(e>=g&&e<=p?this.modelLineProjections[C].isVisible()&&(this.modelLineProjections[C]=this.modelLineProjections[C].setVisible(!1),o=!0):(_=!0,this.modelLineProjections[C].isVisible()||(this.modelLineProjections[C]=this.modelLineProjections[C].setVisible(!0),o=!0)),o){const e=this.modelLineProjections[C].getViewLineCount();this.projectedModelLineLineCounts.setValue(C,e)}}return _||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,o){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,o,s,l){const d=this.fontInfo.equals(e),u=this.wrappingStrategy===o,g=this.wrappingColumn===s,p=this.wrappingIndent===l;if(d&&u&&g&&p)return!1;const m=d&&u&&!g&&p;this.fontInfo=e,this.wrappingStrategy=o,this.wrappingColumn=s,this.wrappingIndent=l;let f=null;if(m){f=[];for(let e=0,o=this.modelLineProjections.length;e<o;e++)f[e]=this.modelLineProjections[e].getProjectionData()}return this._constructLines(!1,f),!0}createLineBreaksComputer(){const e="advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory;return e.createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,o,s){if(!e||e<=this._validModelVersionId)return null;const l=1===o?1:this.projectedModelLineLineCounts.getPrefixSum(o-1)+1,d=this.projectedModelLineLineCounts.getPrefixSum(s);return this.modelLineProjections.splice(o-1,s-o+1),this.projectedModelLineLineCounts.removeValues(o-1,s-o+1),new ViewLinesDeletedEvent(l,d)}onModelLinesInserted(e,o,s,l){if(!e||e<=this._validModelVersionId)return null;const d=o>2&&!this.modelLineProjections[o-2].isVisible(),u=1===o?1:this.projectedModelLineLineCounts.getPrefixSum(o-1)+1;let g=0;const p=[],m=[];for(let f=0,_=l.length;f<_;f++){const e=createModelLineProjection(l[f],!d);p.push(e);const o=e.getViewLineCount();g+=o,m[f]=o}return this.modelLineProjections=this.modelLineProjections.slice(0,o-1).concat(p).concat(this.modelLineProjections.slice(o-1)),this.projectedModelLineLineCounts.insertValues(o-1,m),new ViewLinesInsertedEvent(u,u+g-1)}onModelLineChanged(e,o,s){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];const l=o-1,d=this.modelLineProjections[l].getViewLineCount(),u=this.modelLineProjections[l].isVisible(),g=createModelLineProjection(s,u);this.modelLineProjections[l]=g;const p=this.modelLineProjections[l].getViewLineCount();let m=!1,f=0,_=-1,C=0,b=-1,w=0,S=-1;d>p?(f=this.projectedModelLineLineCounts.getPrefixSum(o-1)+1,_=f+p-1,w=_+1,S=w+(d-p)-1,m=!0):d<p?(f=this.projectedModelLineLineCounts.getPrefixSum(o-1)+1,_=f+d-1,C=_+1,b=C+(p-d)-1,m=!0):(f=this.projectedModelLineLineCounts.getPrefixSum(o-1)+1,_=f+p-1),this.projectedModelLineLineCounts.setValue(l,p);const y=f<=_?new ViewLinesChangedEvent(f,_):null,L=C<=b?new ViewLinesInsertedEvent(C,b):null,x=w<=S?new ViewLinesDeletedEvent(w,S):null;return[m,y,L,x]}acceptVersionId(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const o=this.getViewLineCount();return e>o?o:0|e}getActiveIndentGuide(e,o,s){e=this._toValidViewLineNumber(e),o=this._toValidViewLineNumber(o),s=this._toValidViewLineNumber(s);const l=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),d=this.convertViewPositionToModelPosition(o,this.getViewLineMinColumn(o)),u=this.convertViewPositionToModelPosition(s,this.getViewLineMinColumn(s)),g=this.model.guides.getActiveIndentGuide(l.lineNumber,d.lineNumber,u.lineNumber),p=this.convertModelPositionToViewPosition(g.startLineNumber,1),m=this.convertModelPositionToViewPosition(g.endLineNumber,this.model.getLineMaxColumn(g.endLineNumber));return{startLineNumber:p.lineNumber,endLineNumber:m.lineNumber,indent:g.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const o=this.projectedModelLineLineCounts.getIndexOf(e-1),s=o.index,l=o.remainder;return new ViewLineInfo(s+1,l)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const o=this.modelLineProjections[e.modelLineNumber-1],s=o.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),l=o.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,s);return new q.L(e.modelLineNumber,l)}getModelEndPositionOfViewLine(e){const o=this.modelLineProjections[e.modelLineNumber-1],s=o.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),l=o.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,s);return new q.L(e.modelLineNumber,l)}getViewLineInfosGroupedByModelRanges(e,o){const s=this.getViewLineInfo(e),l=this.getViewLineInfo(o),d=new Array;let u=this.getModelStartPositionOfViewLine(s),g=new Array;for(let p=s.modelLineNumber;p<=l.modelLineNumber;p++){const e=this.modelLineProjections[p-1];if(e.isVisible()){const o=p===s.modelLineNumber?s.modelLineWrappedLineIdx:0,d=p===l.modelLineNumber?l.modelLineWrappedLineIdx+1:e.getViewLineCount();for(let e=o;e<d;e++)g.push(new ViewLineInfo(p,e))}if(!e.isVisible()&&u){const e=new q.L(p-1,this.model.getLineMaxColumn(p-1)+1),o=Q.e.fromPositions(u,e);d.push(new ViewLineInfoGroupedByModelRange(o,g)),g=[],u=null}else e.isVisible()&&!u&&(u=new q.L(p,1))}if(u){const e=Q.e.fromPositions(u,this.getModelEndPositionOfViewLine(l));d.push(new ViewLineInfoGroupedByModelRange(e,g))}return d}getViewLinesBracketGuides(e,o,s,l){const d=s?this.convertViewPositionToModelPosition(s.lineNumber,s.column):null,u=[];for(const g of this.getViewLineInfosGroupedByModelRanges(e,o)){const e=g.modelRange.startLineNumber,o=this.model.guides.getLinesBracketGuides(e,g.modelRange.endLineNumber,d,l);for(const s of g.viewLines)if(s.isWrappedLineContinuation&&1===this.getMinColumnOfViewLine(s))u.push([]);else{let l=o[s.modelLineNumber-e];l=l.map((e=>e.horizontalLine?new Ce.UO(e.visibleColumn,e.className,new Ce.vW(e.horizontalLine.top,this.convertModelPositionToViewPosition(s.modelLineNumber,e.horizontalLine.endColumn).column)):e)),u.push(l)}}return u}getViewLinesIndentGuides(e,o){e=this._toValidViewLineNumber(e),o=this._toValidViewLineNumber(o);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),l=this.convertViewPositionToModelPosition(o,this.getViewLineMaxColumn(o));let d=[];const u=[],g=[],p=s.lineNumber-1,m=l.lineNumber-1;let f=null;for(let w=p;w<=m;w++){const e=this.modelLineProjections[w];if(e.isVisible()){const o=e.getViewLineNumberOfModelPosition(0,w===p?s.column:1),l=e.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(w+1)),d=l-o+1;let m=0;d>1&&1===e.getViewLineMinColumn(this.model,w+1,l)&&(m=0===o?1:2),u.push(d),g.push(m),null===f&&(f=new q.L(w+1,0))}else null!==f&&(d=d.concat(this.model.guides.getLinesIndentGuides(f.lineNumber,w)),f=null)}null!==f&&(d=d.concat(this.model.guides.getLinesIndentGuides(f.lineNumber,l.lineNumber)),f=null);const _=o-e+1,C=new Array(_);let b=0;for(let w=0,S=d.length;w<S;w++){let e=d[w];const o=Math.min(_-b,u[w]),s=g[w];let l;l=2===s?0:1===s?1:o;for(let d=0;d<o;d++)d===l&&(e=0),C[b++]=e}return C}getViewLineContent(e){const o=this.getViewLineInfo(e);return this.modelLineProjections[o.modelLineNumber-1].getViewLineContent(this.model,o.modelLineNumber,o.modelLineWrappedLineIdx)}getViewLineLength(e){const o=this.getViewLineInfo(e);return this.modelLineProjections[o.modelLineNumber-1].getViewLineLength(this.model,o.modelLineNumber,o.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const o=this.getViewLineInfo(e);return this.modelLineProjections[o.modelLineNumber-1].getViewLineMinColumn(this.model,o.modelLineNumber,o.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const o=this.getViewLineInfo(e);return this.modelLineProjections[o.modelLineNumber-1].getViewLineMaxColumn(this.model,o.modelLineNumber,o.modelLineWrappedLineIdx)}getViewLineData(e){const o=this.getViewLineInfo(e);return this.modelLineProjections[o.modelLineNumber-1].getViewLineData(this.model,o.modelLineNumber,o.modelLineWrappedLineIdx)}getViewLinesData(e,o,s){e=this._toValidViewLineNumber(e),o=this._toValidViewLineNumber(o);const l=this.projectedModelLineLineCounts.getIndexOf(e-1);let d=e;const u=l.index,g=l.remainder,p=[];for(let m=u,f=this.model.getLineCount();m<f;m++){const l=this.modelLineProjections[m];if(!l.isVisible())continue;const f=m===u?g:0;let _=l.getViewLineCount()-f,C=!1;if(d+_>o&&(C=!0,_=o-d+1),l.getViewLinesData(this.model,m+1,f,_,d-e,s,p),d+=_,C)break}return p}validateViewPosition(e,o,s){e=this._toValidViewLineNumber(e);const l=this.projectedModelLineLineCounts.getIndexOf(e-1),d=l.index,u=l.remainder,g=this.modelLineProjections[d],p=g.getViewLineMinColumn(this.model,d+1,u),m=g.getViewLineMaxColumn(this.model,d+1,u);o<p&&(o=p),o>m&&(o=m);const f=g.getModelColumnOfViewPosition(u,o),_=this.model.validatePosition(new q.L(d+1,f));return _.equals(s)?new q.L(e,o):this.convertModelPositionToViewPosition(s.lineNumber,s.column)}validateViewRange(e,o){const s=this.validateViewPosition(e.startLineNumber,e.startColumn,o.getStartPosition()),l=this.validateViewPosition(e.endLineNumber,e.endColumn,o.getEndPosition());return new Q.e(s.lineNumber,s.column,l.lineNumber,l.column)}convertViewPositionToModelPosition(e,o){const s=this.getViewLineInfo(e),l=this.modelLineProjections[s.modelLineNumber-1].getModelColumnOfViewPosition(s.modelLineWrappedLineIdx,o);return this.model.validatePosition(new q.L(s.modelLineNumber,l))}convertViewRangeToModelRange(e){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),s=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new Q.e(o.lineNumber,o.column,s.lineNumber,s.column)}convertModelPositionToViewPosition(e,o,s=2){const l=this.model.validatePosition(new q.L(e,o)),d=l.lineNumber,u=l.column;let g=d-1,p=!1;while(g>0&&!this.modelLineProjections[g].isVisible())g--,p=!0;if(0===g&&!this.modelLineProjections[g].isVisible())return new q.L(1,1);const m=1+this.projectedModelLineLineCounts.getPrefixSum(g);let f;return f=p?this.modelLineProjections[g].getViewPositionOfModelPosition(m,this.model.getLineMaxColumn(g+1),s):this.modelLineProjections[d-1].getViewPositionOfModelPosition(m,u,s),f}convertModelRangeToViewRange(e,o=0){if(e.isEmpty()){const s=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,o);return Q.e.fromPositions(s)}{const o=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new Q.e(o.lineNumber,o.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,o){let s=e-1;if(this.modelLineProjections[s].isVisible()){const e=1+this.projectedModelLineLineCounts.getPrefixSum(s);return this.modelLineProjections[s].getViewLineNumberOfModelPosition(e,o)}while(s>0&&!this.modelLineProjections[s].isVisible())s--;if(0===s&&!this.modelLineProjections[s].isVisible())return 1;const l=1+this.projectedModelLineLineCounts.getPrefixSum(s);return this.modelLineProjections[s].getViewLineNumberOfModelPosition(l,this.model.getLineMaxColumn(s+1))}getDecorationsInRange(e,o,s){const l=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),d=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(d.lineNumber-l.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new Q.e(l.lineNumber,1,d.lineNumber,d.column),o,s);let u=[];const g=l.lineNumber-1,p=d.lineNumber-1;let m=null;for(let b=g;b<=p;b++){const e=this.modelLineProjections[b];if(e.isVisible())null===m&&(m=new q.L(b+1,b===g?l.column:1));else if(null!==m){const e=this.model.getLineMaxColumn(b);u=u.concat(this.model.getDecorationsInRange(new Q.e(m.lineNumber,m.column,b,e),o,s)),m=null}}null!==m&&(u=u.concat(this.model.getDecorationsInRange(new Q.e(m.lineNumber,m.column,d.lineNumber,d.column),o,s)),m=null),u.sort(((e,o)=>{const s=Q.e.compareRangesUsingStarts(e.range,o.range);return 0===s?e.id<o.id?-1:e.id>o.id?1:0:s}));let f=[],_=0,C=null;for(const b of u){const e=b.id;C!==e&&(C=e,f[_++]=b)}return f}getInjectedTextAt(e){const o=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[o.modelLineNumber-1].getInjectedTextAt(o.modelLineWrappedLineIdx,e.column)}normalizePosition(e,o){const s=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[s.modelLineNumber-1].normalizePosition(s.modelLineWrappedLineIdx,e,o)}getLineIndentColumn(e){const o=this.getViewLineInfo(e);return 0===o.modelLineWrappedLineIdx?this.model.getLineIndentColumn(o.modelLineNumber):0}}function normalizeLineRanges(e){if(0===e.length)return[];const o=e.slice();o.sort(Q.e.compareRangesUsingStarts);const s=[];let l=o[0].startLineNumber,d=o[0].endLineNumber;for(let u=1,g=o.length;u<g;u++){const e=o[u];e.startLineNumber>d+1?(s.push(new Q.e(l,1,d,1)),l=e.startLineNumber,d=e.endLineNumber):e.endLineNumber>d&&(d=e.endLineNumber)}return s.push(new Q.e(l,1,d,1)),s}class ViewLineInfo{constructor(e,o){this.modelLineNumber=e,this.modelLineWrappedLineIdx=o}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class ViewLineInfoGroupedByModelRange{constructor(e,o){this.modelRange=e,this.viewLines=o}}class CoordinatesConverter{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,o){return this._lines.validateViewPosition(e.lineNumber,e.column,o)}validateViewRange(e,o){return this._lines.validateViewRange(e,o)}convertModelPositionToViewPosition(e,o){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,o)}convertModelRangeToViewRange(e,o){return this._lines.convertModelRangeToViewRange(e,o)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,o){return this._lines.getViewLineNumberOfModelPosition(e,o)}}class ViewModelLinesFromModelAsIs{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new IdentityCoordinatesConverter(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,o,s,l){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(o,s,l)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,o,s){return new ViewLinesDeletedEvent(o,s)}onModelLinesInserted(e,o,s,l){return new ViewLinesInsertedEvent(o,s)}onModelLineChanged(e,o,s){return[!1,new ViewLinesChangedEvent(o,o),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,o,s){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,o,s){return new Array(o-e+1).fill([])}getViewLinesIndentGuides(e,o){const s=o-e+1,l=new Array(s);for(let d=0;d<s;d++)l[d]=0;return l}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const o=this.model.getLineTokens(e),s=o.getLineContent();return new be.IP(s,!1,1,s.length+1,0,o.inflate(),null)}getViewLinesData(e,o,s){const l=this.model.getLineCount();e=Math.min(Math.max(1,e),l),o=Math.min(Math.max(1,o),l);const d=[];for(let u=e;u<=o;u++){const o=u-e;d[o]=s[o]?this.getViewLineData(u):null}return d}getDecorationsInRange(e,o,s){return this.model.getDecorationsInRange(e,o,s)}normalizePosition(e,o){return this.model.normalizePosition(e,o)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class IdentityCoordinatesConverter{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,o){return this._validPosition(o)}validateViewRange(e,o){return this._validRange(o)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const o=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>o)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,o){return e}}const $e=!0;class ViewModel extends _.JT{constructor(e,o,s,l,d,u,g,p){if(super(),this.languageConfigurationService=g,this._themeService=p,this._editorId=e,this._configuration=o,this.model=s,this._eventDispatcher=new ViewModelEventDispatcher,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Te.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._tokenizeViewportSoon=this._register(new B.pY((()=>this.tokenizeViewport()),50)),this._updateConfigurationViewLineCount=this._register(new B.pY((()=>this._updateConfigurationViewLineCountNow()),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,$e&&this.model.isTooLargeForTokenization())this._lines=new ViewModelLinesFromModelAsIs(this.model);else{const e=this._configuration.options,o=e.get(44),s=e.get(125),u=e.get(132),g=e.get(124);this._lines=new ViewModelLinesFromProjectedModel(this._editorId,this.model,l,d,o,this.model.getOptions().tabSize,s,u.wrappingColumn,g)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new CursorsController(s,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new ViewLayout(this._configuration,this.getLineCount(),u)),this._register(this.viewLayout.onDidScroll((e=>{e.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new ViewScrollChangedEvent(e)),this._eventDispatcher.emitOutgoingEvent(new ScrollChangedEvent(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))}))),this._register(this.viewLayout.onDidContentSizeChange((e=>{this._eventDispatcher.emitOutgoingEvent(e)}))),this._decorations=new He.CU(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast((e=>{try{const o=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(o,e)}finally{this._eventDispatcher.endEmitViewEvents()}}))),this._register(MinimapTokensColorTracker.getInstance().onDidChange((()=>{this._eventDispatcher.emitSingleViewEvent(new ViewTokensColorsChangedEvent)}))),this._register(this._themeService.onDidColorThemeChange((e=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new ViewThemeChangedEvent(e))}))),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),o=new Q.e(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),s=this._toModelVisibleRanges(o);for(const l of s)this.model.tokenizeViewport(l.startLineNumber,l.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new ViewFocusChangedEvent(e)),this._eventDispatcher.emitOutgoingEvent(new FocusChangedEvent(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new ViewCompositionStartEvent)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new ViewCompositionEndEvent)}_onConfigurationChanged(e,o){let s=null;if(-1!==this._viewportStartLine){const e=new q.L(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));s=this.coordinatesConverter.convertViewPositionToModelPosition(e)}let l=!1;const d=this._configuration.options,u=d.get(44),g=d.get(125),p=d.get(132),m=d.get(124);if(this._lines.setWrappingSettings(u,g,p.wrappingColumn,m)&&(e.emitViewEvent(new ViewFlushedEvent),e.emitViewEvent(new ViewLineMappingChangedEvent),e.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),0!==this.viewLayout.getCurrentScrollTop()&&(l=!0),this._updateConfigurationViewLineCount.schedule()),o.hasChanged(81)&&(this._decorations.reset(),e.emitViewEvent(new ViewDecorationsChangedEvent(null))),e.emitViewEvent(new ViewConfigurationChangedEvent(o)),this.viewLayout.onConfigurationChanged(o),l&&s){const e=this.coordinatesConverter.convertModelPositionToViewPosition(s),o=this.viewLayout.getVerticalOffsetForLineNumber(e.lineNumber);this.viewLayout.setScrollPosition({scrollTop:o+this._viewportStartLineDelta},1)}Te.LM.shouldRecreate(o)&&(this.cursorConfig=new Te.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText((e=>{try{const o=this._eventDispatcher.beginEmitViewEvents();let s=!1,l=!1;const d=e.changes,u=e instanceof Me.dQ?e.versionId:null,g=this._lines.createLineBreaksComputer();for(const e of d)switch(e.changeType){case 4:for(let o=0;o<e.detail.length;o++){const s=e.detail[o];let l=e.injectedTexts[o];l&&(l=l.filter((e=>!e.ownerId||e.ownerId===this._editorId))),g.addRequest(s,l,null)}break;case 2:{let o=null;e.injectedText&&(o=e.injectedText.filter((e=>!e.ownerId||e.ownerId===this._editorId))),g.addRequest(e.detail,o,null);break}}const p=g.finalize(),m=new w.H9(p);for(const e of d)switch(e.changeType){case 1:this._lines.onModelFlushed(),o.emitViewEvent(new ViewFlushedEvent),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break;case 3:{const l=this._lines.onModelLinesDeleted(u,e.fromLineNumber,e.toLineNumber);null!==l&&(o.emitViewEvent(l),this.viewLayout.onLinesDeleted(l.fromLineNumber,l.toLineNumber)),s=!0;break}case 4:{const l=m.takeCount(e.detail.length),d=this._lines.onModelLinesInserted(u,e.fromLineNumber,e.toLineNumber,l);null!==d&&(o.emitViewEvent(d),this.viewLayout.onLinesInserted(d.fromLineNumber,d.toLineNumber)),s=!0;break}case 2:{const s=m.dequeue(),[d,g,p,f]=this._lines.onModelLineChanged(u,e.lineNumber,s);l=d,g&&o.emitViewEvent(g),p&&(o.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),f&&(o.emitViewEvent(f),this.viewLayout.onLinesDeleted(f.fromLineNumber,f.toLineNumber));break}case 5:break}null!==u&&this._lines.acceptVersionId(u),this.viewLayout.onHeightMaybeChanged(),!s&&l&&(o.emitViewEvent(new ViewLineMappingChangedEvent),o.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(o),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const e=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(e){const o=this.coordinatesConverter.convertModelPositionToViewPosition(e.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStartLineDelta},1)}}try{const o=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(o,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._tokenizeViewportSoon.schedule()}))),this._register(this.model.onDidChangeTokens((e=>{const o=[];for(let s=0,l=e.ranges.length;s<l;s++){const l=e.ranges[s],d=this.coordinatesConverter.convertModelPositionToViewPosition(new q.L(l.fromLineNumber,1)).lineNumber,u=this.coordinatesConverter.convertModelPositionToViewPosition(new q.L(l.toLineNumber,this.model.getLineMaxColumn(l.toLineNumber))).lineNumber;o[s]={fromLineNumber:d,toLineNumber:u}}this._eventDispatcher.emitSingleViewEvent(new ViewTokensChangedEvent(o)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()}))),this._register(this.model.onDidChangeLanguageConfiguration((e=>{this._eventDispatcher.emitSingleViewEvent(new ViewLanguageConfigurationEvent),this.cursorConfig=new Te.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)}))),this._register(this.model.onDidChangeLanguage((e=>{this.cursorConfig=new Te.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)}))),this._register(this.model.onDidChangeOptions((e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const e=this._eventDispatcher.beginEmitViewEvents();e.emitViewEvent(new ViewFlushedEvent),e.emitViewEvent(new ViewLineMappingChangedEvent),e.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Te.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)}))),this._register(this.model.onDidChangeDecorations((e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new ViewDecorationsChangedEvent(e))})))}setHiddenAreas(e){let o=!1;try{const s=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(e),o&&(s.emitViewEvent(new ViewFlushedEvent),s.emitViewEvent(new ViewLineMappingChangedEvent),s.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(s),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new viewModelEventDispatcher_ViewZonesChangedEvent)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(131),o=this._configuration.options.get(59),s=Math.max(20,Math.round(e.height/o)),l=this.viewLayout.getLinesViewportData(),d=Math.max(1,l.completelyVisibleStartLineNumber-s),u=Math.min(this.getLineCount(),l.completelyVisibleEndLineNumber+s);return this._toModelVisibleRanges(new Q.e(d,this.getLineMinColumn(d),u,this.getLineMaxColumn(u)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const o=this.coordinatesConverter.convertViewRangeToModelRange(e),s=this._lines.getHiddenAreas();if(0===s.length)return[o];const l=[];let d=0,u=o.startLineNumber,g=o.startColumn;const p=o.endLineNumber,m=o.endColumn;for(let f=0,_=s.length;f<_;f++){const e=s[f].startLineNumber,o=s[f].endLineNumber;o<u||(e>p||(u<e&&(l[d++]=new Q.e(u,g,e-1,this.model.getLineMaxColumn(e-1))),u=o+1,g=1))}return(u<p||u===p&&g<m)&&(l[d++]=new Q.e(u,g,p,m)),l}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),o=e.completelyVisibleStartLineNumber,s=e.completelyVisibleEndLineNumber;return new Q.e(o,this.getLineMinColumn(o),s,this.getLineMaxColumn(s))}getCompletelyVisibleViewRangeAtScrollTop(e){const o=this.viewLayout.getLinesViewportDataAtScrollTop(e),s=o.completelyVisibleStartLineNumber,l=o.completelyVisibleEndLineNumber;return new Q.e(s,this.getLineMinColumn(s),l,this.getLineMaxColumn(l))}saveState(){const e=this.viewLayout.saveState(),o=e.scrollTop,s=this.viewLayout.getLineNumberAtVerticalOffset(o),l=this.coordinatesConverter.convertViewPositionToModelPosition(new q.L(s,this.getLineMinColumn(s))),d=this.viewLayout.getVerticalOffsetForLineNumber(s)-o;return{scrollLeft:e.scrollLeft,firstPosition:l,firstPositionDeltaTop:d}}reduceRestoreState(e){if("undefined"===typeof e.firstPosition)return this._reduceRestoreStateCompatibility(e);const o=this.model.validatePosition(e.firstPosition),s=this.coordinatesConverter.convertModelPositionToViewPosition(o),l=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:l}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,o,s){this._viewportStartLine=e;const l=this.coordinatesConverter.convertViewPositionToModelPosition(new q.L(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new Q.e(l.lineNumber,l.column,l.lineNumber,l.column),1);const d=this.viewLayout.getVerticalOffsetForLineNumber(e),u=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=u-d}getActiveIndentGuide(e,o,s){return this._lines.getActiveIndentGuide(e,o,s)}getLinesIndentGuides(e,o){return this._lines.getViewLinesIndentGuides(e,o)}getBracketGuidesInRangeByLine(e,o,s,l){return this._lines.getViewLinesBracketGuides(e,o,s,l)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const o=te.LC(this.getLineContent(e));return-1===o?0:o+1}getLineLastNonWhitespaceColumn(e){const o=te.ow(this.getLineContent(e));return-1===o?0:o+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,o){const s=this.model.mightContainRTL(),l=this.model.mightContainNonBasicASCII(),d=this.getTabSize(),u=this._lines.getViewLineData(o),g=this._decorations.getDecorationsViewportData(e).inlineDecorations;let p=g[o-e.startLineNumber];return u.inlineDecorations&&(p=[...p,...u.inlineDecorations.map((e=>e.toInlineDecoration(o)))]),new be.wA(u.minColumn,u.maxColumn,u.content,u.continuesWithWrappedLine,s,l,u.tokens,p,d,u.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,o,s){const l=this._lines.getViewLinesData(e,o,s);return new be.ud(this.getTabSize(),l)}getAllOverviewRulerDecorations(e){const o=this.model.getOverviewRulerDecorations(this._editorId,(0,D.$J)(this._configuration.options)),s=new OverviewRulerDecorations;for(const l of o){const o=l.options,d=o.overviewRuler;if(!d)continue;const u=d.position;if(0===u)continue;const g=d.getColor(e.value),p=this.coordinatesConverter.getViewLineNumberOfModelPosition(l.range.startLineNumber,l.range.startColumn),m=this.coordinatesConverter.getViewLineNumberOfModelPosition(l.range.endLineNumber,l.range.endColumn);s.accept(g,o.zIndex,p,m,u)}return s.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const o of e){const e=o.options.overviewRuler;e&&e.invalidateCachedColor();const s=o.options.minimap;s&&s.invalidateCachedColor()}}getValueInRange(e,o){const s=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(s,o)}deduceModelPositionRelativeToViewPosition(e,o,s){const l=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(o<0?o-=s:o+=s);const d=this.model.getOffsetAt(l),u=d+o;return this.model.getPositionAt(u)}getPlainTextToCopy(e,o,s){const l=s?"\r\n":this.model.getEOL();e=e.slice(0),e.sort(Q.e.compareRangesUsingStarts);let d=!1,u=!1;for(const p of e)p.isEmpty()?d=!0:u=!0;if(!u){if(!o)return"";const s=e.map((e=>e.startLineNumber));let d="";for(let e=0;e<s.length;e++)e>0&&s[e-1]===s[e]||(d+=this.model.getLineContent(s[e])+l);return d}if(d&&o){const o=[];let l=0;for(const d of e){const e=d.startLineNumber;d.isEmpty()?e!==l&&o.push(this.model.getLineContent(e)):o.push(this.model.getValueInRange(d,s?2:0)),l=e}return 1===o.length?o[0]:o}const g=[];for(const p of e)p.isEmpty()||g.push(this.model.getValueInRange(p,s?2:0));return 1===g.length?g[0]:g}getRichTextToCopy(e,o){const s=this.model.getLanguageId();if(s===Fe.bd)return null;if(1!==e.length)return null;let l=e[0];if(l.isEmpty()){if(!o)return null;const e=l.startLineNumber;l=new Q.e(e,this.model.getLineMinColumn(e),e,this.model.getLineMaxColumn(e))}const d=this._configuration.options.get(44),u=this._getColorMap(),g=/[:;\\\/<>]/.test(d.fontFamily),p=g||d.fontFamily===D.hL.fontFamily;let m;if(p)m=D.hL.fontFamily;else{m=d.fontFamily,m=m.replace(/"/g,"'");const e=/[,']/.test(m);if(!e){const e=/[+ ]/.test(m);e&&(m=`'${m}'`)}m=`${m}, ${D.hL.fontFamily}`}return{mode:s,html:`<div style="color: ${u[1]};background-color: ${u[2]};font-family: ${m};font-weight: ${d.fontWeight};font-size: ${d.fontSize}px;line-height: ${d.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(l,u)+"</div>"}}_getHTMLToCopy(e,o){const s=e.startLineNumber,l=e.startColumn,d=e.endLineNumber,u=e.endColumn,g=this.getTabSize();let p="";for(let m=s;m<=d;m++){const e=this.model.getLineTokens(m),f=e.getLineContent(),_=m===s?l-1:0,C=m===d?u-1:f.length;p+=""===f?"<br>":(0,Be.Fq)(f,e.inflate(),o,_,C,g,y.ED)}return p}_getColorMap(){const e=le.RW.getColorMap(),o=["#000000"];if(e)for(let s=1,l=e.length;s<l;s++)o[s]=ce.Il.Format.CSS.formatHex(e[s]);return o}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,o,s){return this._withViewEventsCollector((l=>this._cursor.setStates(l,e,o,s)))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,o,s=0){this._withViewEventsCollector((l=>this._cursor.setSelections(l,e,o,s)))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector((o=>this._cursor.restoreState(o,e)))}_executeCursorEdit(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new ReadOnlyEditAttemptEvent):this._withViewEventsCollector(e)}executeEdits(e,o,s){this._executeCursorEdit((l=>this._cursor.executeEdits(l,e,o,s)))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit((e=>this._cursor.startComposition(e)))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit((o=>this._cursor.endComposition(o,e)))}type(e,o){this._executeCursorEdit((s=>this._cursor.type(s,e,o)))}compositionType(e,o,s,l,d){this._executeCursorEdit((u=>this._cursor.compositionType(u,e,o,s,l,d)))}paste(e,o,s,l){this._executeCursorEdit((d=>this._cursor.paste(d,e,o,s,l)))}cut(e){this._executeCursorEdit((o=>this._cursor.cut(o,e)))}executeCommand(e,o){this._executeCursorEdit((s=>this._cursor.executeCommand(s,e,o)))}executeCommands(e,o){this._executeCursorEdit((s=>this._cursor.executeCommands(s,e,o)))}revealPrimaryCursor(e,o,s=!1){this._withViewEventsCollector((l=>this._cursor.revealPrimary(l,e,s,0,o,0)))}revealTopMostCursor(e){const o=this._cursor.getTopMostViewPosition(),s=new Q.e(o.lineNumber,o.column,o.lineNumber,o.column);this._withViewEventsCollector((o=>o.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,s,null,0,!0,0))))}revealBottomMostCursor(e){const o=this._cursor.getBottomMostViewPosition(),s=new Q.e(o.lineNumber,o.column,o.lineNumber,o.column);this._withViewEventsCollector((o=>o.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,s,null,0,!0,0))))}revealRange(e,o,s,l,d){this._withViewEventsCollector((u=>u.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,s,null,l,o,d))))}changeWhitespace(e){const o=this.viewLayout.changeWhitespace(e);o&&(this._eventDispatcher.emitSingleViewEvent(new ViewZonesChangedEvent),this._eventDispatcher.emitOutgoingEvent(new viewModelEventDispatcher_ViewZonesChangedEvent))}_withViewEventsCollector(e){try{const o=this._eventDispatcher.beginEmitViewEvents();return e(o)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,o){return this._lines.normalizePosition(e,o)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class OverviewRulerDecorations{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,o,s,l,d){const u=this._asMap[e];if(u){const e=u.data,o=e[e.length-3],g=e[e.length-1];if(o===d&&g+1>=s)return void(l>g&&(e[e.length-1]=l));e.push(d,s,l)}else{const u=new be.SQ(e,o,[d,s,l]);this._asMap[e]=u,this.asArray.push(u)}}}var Ge=s(4565),qe=s(8819),Qe=s(2065),Ze=s(972),Ye=s(9422),Je=s(4906);class ModelLineProjectionData{constructor(e,o,s,l,d){this.injectionOffsets=e,this.injectionOptions=o,this.breakOffsets=s,this.breakOffsetsVisibleColumn=l,this.wrappedTextIndentLength=d}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const o=e>0?this.breakOffsets[e-1]:0,s=this.breakOffsets[e];let l=s-o;return e>0&&(l+=this.wrappedTextIndentLength),l}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,o){e>0&&(o=Math.max(0,o-this.wrappedTextIndentLength));const s=0===e?o:this.breakOffsets[e-1]+o;let l=s;if(null!==this.injectionOffsets)for(let d=0;d<this.injectionOffsets.length;d++){if(!(l>this.injectionOffsets[d]))break;l<this.injectionOffsets[d]+this.injectionOptions[d].content.length?l=this.injectionOffsets[d]:l-=this.injectionOptions[d].content.length}return l}translateToOutputPosition(e,o=2){let s=e;if(null!==this.injectionOffsets)for(let l=0;l<this.injectionOffsets.length;l++){if(e<this.injectionOffsets[l])break;if(1!==o&&e===this.injectionOffsets[l])break;s+=this.injectionOptions[l].content.length}return this.offsetInInputWithInjectionsToOutputPosition(s,o)}offsetInInputWithInjectionsToOutputPosition(e,o=2){let s=0,l=this.breakOffsets.length-1,d=0,u=0;while(s<=l){d=s+(l-s)/2|0;const g=this.breakOffsets[d];if(u=d>0?this.breakOffsets[d-1]:0,0===o)if(e<=u)l=d-1;else{if(!(e>g))break;s=d+1}else if(e<u)l=d-1;else{if(!(e>=g))break;s=d+1}}let g=e-u;return d>0&&(g+=this.wrappedTextIndentLength),new OutputPosition(d,g)}normalizeOutputPosition(e,o,s){if(null!==this.injectionOffsets){const l=this.outputPositionToOffsetInInputWithInjections(e,o),d=this.normalizeOffsetInInputWithInjectionsAroundInjections(l,s);if(d!==l)return this.offsetInInputWithInjectionsToOutputPosition(d,s)}if(0===s){if(e>0&&o===this.getMinOutputOffset(e))return new OutputPosition(e-1,this.getMaxOutputOffset(e-1))}else if(1===s){const s=this.getOutputLineCount()-1;if(e<s&&o===this.getMaxOutputOffset(e))return new OutputPosition(e+1,this.getMinOutputOffset(e+1))}return new OutputPosition(e,o)}outputPositionToOffsetInInputWithInjections(e,o){e>0&&(o=Math.max(0,o-this.wrappedTextIndentLength));const s=(e>0?this.breakOffsets[e-1]:0)+o;return s}normalizeOffsetInInputWithInjectionsAroundInjections(e,o){const s=this.getInjectedTextAtOffset(e);if(!s)return e;if(2===o){if(e===s.offsetInInputWithInjections+s.length&&hasRightCursorStop(this.injectionOptions[s.injectedTextIndex].cursorStops))return s.offsetInInputWithInjections+s.length;{let e=s.offsetInInputWithInjections;if(hasLeftCursorStop(this.injectionOptions[s.injectedTextIndex].cursorStops))return e;let o=s.injectedTextIndex-1;while(o>=0&&this.injectionOffsets[o]===this.injectionOffsets[s.injectedTextIndex]){if(hasRightCursorStop(this.injectionOptions[o].cursorStops))break;if(e-=this.injectionOptions[o].content.length,hasLeftCursorStop(this.injectionOptions[o].cursorStops))break;o--}return e}}if(1===o){let e=s.offsetInInputWithInjections+s.length,o=s.injectedTextIndex;while(o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o])e+=this.injectionOptions[o+1].content.length,o++;return e}if(0===o){let e=s.offsetInInputWithInjections,o=s.injectedTextIndex;while(o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o])e-=this.injectionOptions[o-1].content.length,o--;return e}(0,fe.vE)(o)}getInjectedText(e,o){const s=this.outputPositionToOffsetInInputWithInjections(e,o),l=this.getInjectedTextAtOffset(s);return l?{options:this.injectionOptions[l.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const o=this.injectionOffsets,s=this.injectionOptions;if(null!==o){let l=0;for(let d=0;d<o.length;d++){const u=s[d].content.length,g=o[d]+l,p=o[d]+l+u;if(g>e)break;if(e<=p)return{injectedTextIndex:d,offsetInInputWithInjections:g,length:u};l+=u}}}}function hasRightCursorStop(e){return null===e||void 0===e||(e===ke.RM.Right||e===ke.RM.Both)}function hasLeftCursorStop(e){return null===e||void 0===e||(e===ke.RM.Left||e===ke.RM.Both)}class OutputPosition{constructor(e,o){this.outputLineIndex=e,this.outputOffset=o}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new q.L(e+this.outputLineIndex,this.outputOffset+1)}}class MonospaceLineBreaksComputerFactory{constructor(e,o){this.classifier=new WrappingCharacterClassifier(e,o)}static create(e){return new MonospaceLineBreaksComputerFactory(e.get(120),e.get(119))}createLineBreaksComputer(e,o,s,l){const d=[],u=[],g=[];return{addRequest:(e,o,s)=>{d.push(e),u.push(o),g.push(s)},finalize:()=>{const p=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,m=[];for(let e=0,f=d.length;e<f;e++){const f=u[e],_=g[e];!_||_.injectionOptions||f?m[e]=createLineBreaks(this.classifier,d[e],f,o,s,p,l):m[e]=createLineBreaksFromPreviousLineBreaks(this.classifier,_,d[e],o,s,p,l)}return Xe.length=0,et.length=0,m}}}}class WrappingCharacterClassifier extends Je.N{constructor(e,o){super(0);for(let s=0;s<e.length;s++)this.set(e.charCodeAt(s),1);for(let s=0;s<o.length;s++)this.set(o.charCodeAt(s),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let Xe=[],et=[];function createLineBreaksFromPreviousLineBreaks(e,o,s,l,d,u,g){if(-1===d)return null;const p=s.length;if(p<=1)return null;const m=o.breakOffsets,f=o.breakOffsetsVisibleColumn,_=computeWrappedTextIndentLength(s,l,d,u,g),C=d-_,b=Xe,w=et;let S=0,y=0,L=0,x=d;const k=m.length;let N=0;if(N>=0){let e=Math.abs(f[N]-x);while(N+1<k){const o=Math.abs(f[N+1]-x);if(o>=e)break;e=o,N++}}while(N<k){let o=N<0?0:m[N],d=N<0?0:f[N];y>o&&(o=y,d=L);let g=0,_=0,D=0,E=0;if(d<=x){let L=d,k=0===o?0:s.charCodeAt(o-1),N=0===o?0:e.get(k),T=!0;for(let d=o;d<p;d++){const o=d,p=s.charCodeAt(d);let m,f;if(te.ZG(p)?(d++,m=0,f=2):(m=e.get(p),f=computeCharWidth(p,L,l,u)),o>y&&canBreak(k,N,p,m)&&(g=o,_=L),L+=f,L>x){o>y?(D=o,E=L-f):(D=d+1,E=L),L-_>C&&(g=0),T=!1;break}k=p,N=m}if(T){S>0&&(b[S]=m[m.length-1],w[S]=f[m.length-1],S++);break}}if(0===g){let p=d,m=s.charCodeAt(o),f=e.get(m),b=!1;for(let l=o-1;l>=y;l--){const o=l+1,d=s.charCodeAt(l);if(9===d){b=!0;break}let w,S;if(te.YK(d)?(l--,w=0,S=2):(w=e.get(d),S=te.K7(d)?u:1),p<=x){if(0===D&&(D=o,E=p),p<=x-C)break;if(canBreak(d,w,m,f)){g=o,_=p;break}}p-=S,m=d,f=w}if(0!==g){const e=C-(E-_);if(e<=l){const o=s.charCodeAt(D);let d;d=te.ZG(o)?2:computeCharWidth(o,E,l,u),e-d<0&&(g=0)}}if(b){N--;continue}}if(0===g&&(g=D,_=E),g<=y){const e=s.charCodeAt(y);te.ZG(e)?(g=y+2,_=L+2):(g=y+1,_=L+computeCharWidth(e,L,l,u))}y=g,b[S]=g,L=_,w[S]=_,S++,x=_+C;while(N<0||N<k&&f[N]<_)N++;let T=Math.abs(f[N]-x);while(N+1<k){const e=Math.abs(f[N+1]-x);if(e>=T)break;T=e,N++}}return 0===S?null:(b.length=S,w.length=S,Xe=o.breakOffsets,et=o.breakOffsetsVisibleColumn,o.breakOffsets=b,o.breakOffsetsVisibleColumn=w,o.wrappedTextIndentLength=_,o)}function createLineBreaks(e,o,s,l,d,u,g){const p=Me.gk.applyInjectedText(o,s);let m,f;if(s&&s.length>0?(m=s.map((e=>e.options)),f=s.map((e=>e.column-1))):(m=null,f=null),-1===d)return m?new ModelLineProjectionData(f,m,[p.length],[],0):null;const _=p.length;if(_<=1)return m?new ModelLineProjectionData(f,m,[p.length],[],0):null;const C=computeWrappedTextIndentLength(p,l,d,u,g),b=d-C,w=[],S=[];let y=0,L=0,x=0,k=d,N=p.charCodeAt(0),D=e.get(N),E=computeCharWidth(N,0,l,u),T=1;te.ZG(N)&&(E+=1,N=p.charCodeAt(1),D=e.get(N),T++);for(let I=T;I<_;I++){const o=I,s=p.charCodeAt(I);let d,g;te.ZG(s)?(I++,d=0,g=2):(d=e.get(s),g=computeCharWidth(s,E,l,u)),canBreak(N,D,s,d)&&(L=o,x=E),E+=g,E>k&&((0===L||E-x>b)&&(L=o,x=E-g),w[y]=L,S[y]=x,y++,k=x+b,L=0),N=s,D=d}return 0!==y||s&&0!==s.length?(w[y]=_,S[y]=E,new ModelLineProjectionData(f,m,w,S,C)):null}function computeCharWidth(e,o,s,l){return 9===e?s-o%s:te.K7(e)||e<32?l:1}function tabCharacterWidth(e,o){return o-e%o}function canBreak(e,o,s,l){return 32!==s&&(2===o||3===o&&2!==l||1===l||3===l&&1!==o)}function computeWrappedTextIndentLength(e,o,s,l,d){let u=0;if(0!==d){const g=te.LC(e);if(-1!==g){for(let s=0;s<g;s++){const l=9===e.charCodeAt(s)?tabCharacterWidth(u,o):1;u+=l}const p=3===d?2:2===d?1:0;for(let e=0;e<p;e++){const e=tabCharacterWidth(u,o);u+=e}u+l>s&&(u=0)}}return u}var tt;const it=null===(tt=window.trustedTypes)||void 0===tt?void 0:tt.createPolicy("domLineBreaksComputer",{createHTML:e=>e});class DOMLineBreaksComputerFactory{static create(){return new DOMLineBreaksComputerFactory}constructor(){}createLineBreaksComputer(e,o,s,l){const d=[],u=[];return{addRequest:(e,o,s)=>{d.push(e),u.push(o)},finalize:()=>domLineBreaksComputer_createLineBreaks(d,e,o,s,l,u)}}}function domLineBreaksComputer_createLineBreaks(e,o,s,l,d,u){var g;function createEmptyLineBreakWithPossiblyInjectedText(o){const s=u[o];if(s){const l=Me.gk.applyInjectedText(e[o],s),d=s.map((e=>e.options)),u=s.map((e=>e.column-1));return new ModelLineProjectionData(u,d,[l.length],[],0)}return null}if(-1===l){const o=[];for(let s=0,l=e.length;s<l;s++)o[s]=createEmptyLineBreakWithPossiblyInjectedText(s);return o}const p=Math.round(l*o.typicalHalfwidthCharacterWidth),m=3===d?2:2===d?1:0,f=Math.round(s*m),_=Math.ceil(o.spaceWidth*f),C=document.createElement("div");(0,ie.N)(C,o);const b=(0,ge.l$)(1e4),w=[],S=[],y=[],L=[],x=[];for(let I=0;I<e.length;I++){const l=Me.gk.applyInjectedText(e[I],u[I]);let g=0,m=0,f=p;if(0!==d)if(g=te.LC(l),-1===g)g=0;else{for(let o=0;o<g;o++){const e=9===l.charCodeAt(o)?s-m%s:1;m+=e}const e=Math.ceil(o.spaceWidth*m);e+o.typicalFullwidthCharacterWidth>p?(g=0,m=0):f=p-e}const C=l.substr(g),k=renderLine(C,m,s,f,b,_);w[I]=g,S[I]=m,y[I]=C,L[I]=k[0],x[I]=k[1]}const k=b.build(),N=null!==(g=null===it||void 0===it?void 0:it.createHTML(k))&&void 0!==g?g:k;C.innerHTML=N,C.style.position="absolute",C.style.top="10000",C.style.wordWrap="break-word",document.body.appendChild(C);const D=document.createRange(),E=Array.prototype.slice.call(C.children,0),T=[];for(let I=0;I<e.length;I++){const e=E[I],o=readLineBreaks(D,e,y[I],L[I]);if(null===o){T[I]=createEmptyLineBreakWithPossiblyInjectedText(I);continue}const s=w[I],l=S[I]+f,d=x[I],g=[];for(let u=0,f=o.length;u<f;u++)g[u]=d[o[u]];if(0!==s)for(let u=0,f=o.length;u<f;u++)o[u]+=s;let p,m;const _=u[I];_?(p=_.map((e=>e.options)),m=_.map((e=>e.column-1))):(p=null,m=null),T[I]=new ModelLineProjectionData(m,p,o,g,l)}return document.body.removeChild(C),T}function renderLine(e,o,s,l,d,u){if(0!==u){const e=String(u);d.appendASCIIString('<div style="text-indent: -'),d.appendASCIIString(e),d.appendASCIIString("px; padding-left: "),d.appendASCIIString(e),d.appendASCIIString("px; box-sizing: border-box; width:")}else d.appendASCIIString('<div style="width:');d.appendASCIIString(String(l)),d.appendASCIIString('px;">');const g=e.length;let p=o,m=0;const f=[],_=[];let C=0<g?e.charCodeAt(0):0;d.appendASCIIString("<span>");for(let b=0;b<g;b++){0!==b&&b%16384===0&&d.appendASCIIString("</span><span>"),f[b]=m,_[b]=p;const o=C;C=b+1<g?e.charCodeAt(b+1):0;let l=1,u=1;switch(o){case 9:l=s-p%s,u=l;for(let e=1;e<=l;e++)e<l?d.write1(160):d.appendASCII(32);break;case 32:32===C?d.write1(160):d.appendASCII(32);break;case 60:d.appendASCIIString("&lt;");break;case 62:d.appendASCIIString("&gt;");break;case 38:d.appendASCIIString("&amp;");break;case 0:d.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:d.write1(65533);break;default:te.K7(o)&&u++,o<32?d.write1(9216+o):d.write1(o)}m+=l,p+=u}return d.appendASCIIString("</span>"),f[e.length]=m,_[e.length]=p,d.appendASCIIString("</div>"),[f,_]}function readLineBreaks(e,o,s,l){if(s.length<=1)return null;const d=Array.prototype.slice.call(o.children,0),u=[];try{discoverBreaks(e,d,l,0,null,s.length-1,null,u)}catch(g){return console.log(g),null}return 0===u.length?null:(u.push(s.length),u)}function discoverBreaks(e,o,s,l,d,u,g,p){if(l===u)return;if(d=d||readClientRect(e,o,s[l],s[l+1]),g=g||readClientRect(e,o,s[u],s[u+1]),Math.abs(d[0].top-g[0].top)<=.1)return;if(l+1===u)return void p.push(u);const m=l+(u-l)/2|0,f=readClientRect(e,o,s[m],s[m+1]);discoverBreaks(e,o,s,l,d,m,f,p),discoverBreaks(e,o,s,m,f,u,g,p)}function readClientRect(e,o,s,l){return e.setStart(o[s/16384|0].firstChild,s%16384),e.setEnd(o[l/16384|0].firstChild,l%16384),e.getClientRects()}var nt=s(2896),ot=s(5638),st=s(1922),codeEditorWidget_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},codeEditorWidget_param=function(e,o){return function(s,l){o(s,l,e)}};let rt=0;class ModelData{constructor(e,o,s,l,d){this.model=e,this.viewModel=o,this.view=s,this.hasRealView=l,this.listenersToRemove=d}dispose(){(0,_.B9)(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let at=class CodeEditorWidget extends _.JT{constructor(e,o,s,l,u,g,p,_,C,b,w,S){super(),this.languageConfigurationService=w,this._onDidDispose=this._register(new f.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new f.Q5),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new f.Q5),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new f.Q5),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new f.Q5),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new f.Q5),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new f.Q5),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new f.Q5),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new f.Q5),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new f.Q5),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new f.Q5),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new f.Q5),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new BooleanEventEmitter),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new BooleanEventEmitter),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new f.Q5),this.onWillType=this._onWillType.event,this._onDidType=this._register(new f.Q5),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new f.Q5),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new f.Q5),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new f.Q5),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new f.Q5),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new f.Q5),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new f.Q5),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new f.Q5),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new f.Q5),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new f.Q5),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new f.Q5),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new f.Q5),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new f.Q5),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new f.Q5),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new f.Q5),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new f.Q5),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new f.Q5),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new f.Q5),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new f.Q5),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const y=Object.assign({},o);let L;this._domElement=e,this._overflowWidgetsDomNode=y.overflowWidgetsDomNode,delete y.overflowWidgetsDomNode,this._id=++rt,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=s.telemetryData,this._configuration=this._register(this._createConfiguration(s.isSimpleWidget||!1,y,b)),this._register(this._configuration.onDidChange((e=>{this._onDidChangeConfiguration.fire(e);const o=this._configuration.options;if(e.hasChanged(131)){const e=o.get(131);this._onDidLayoutChange.fire(e)}}))),this._contextKeyService=this._register(p.createScoped(this._domElement)),this._notificationService=C,this._codeEditorService=u,this._commandService=g,this._themeService=_,this._register(new EditorContextKeysManager(this,this._contextKeyService)),this._register(new EditorModeContext(this,this._contextKeyService,S)),this._instantiationService=l.createChild(new Ze.y([qe.i6,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new CodeEditorWidgetFocusTracker(e),this._register(this._focusTracker.onChange((()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())}))),this._contentWidgets={},this._overlayWidgets={},L=Array.isArray(s.contributions)?s.contributions:d.Uc.getEditorContributions();for(const d of L)if(this._contributions[d.id])(0,m.dL)(new Error(`Cannot have two contributions with the same id ${d.id}`));else try{const e=this._instantiationService.createInstance(d.ctor,this);this._contributions[d.id]=e}catch(x){(0,m.dL)(x)}d.Uc.getEditorActions().forEach((e=>{if(this._actions[e.id])return void(0,m.dL)(new Error(`Cannot have two actions with the same id ${e.id}`));const o=new Re.p(e.id,e.label,e.alias,(0,fe.f6)(e.precondition),(()=>this._instantiationService.invokeFunction((o=>Promise.resolve(e.runEditorCommand(o,this,null))))),this._contextKeyService);this._actions[o.id]=o})),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(e,o,s){return new A(e,o,this._domElement,s)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return Pe.g.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let o=0,s=e.length;o<s;o++){const s=e[o];this._contributions[s].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?nt.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(117),e):null}getValue(e=null){if(!this._modelData)return"";const o=!(!e||!e.preserveBOM);let s=0;return e&&e.lineEnding&&"\n"===e.lineEnding?s=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(s=2),this._modelData.model.getValue(s,o)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const o=e;if(null===this._modelData&&null===o)return;if(this._modelData&&this._modelData.model===o)return;const s=this.hasTextFocus(),l=this._detachModel();this._attachModel(o),s&&this.hasModel()&&this.focus();const d={oldModelUrl:l?l.uri:null,newModelUrl:o?o.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(d),this._postDetachModelCleanup(l)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const o=this._decorationTypeSubtypes[e];for(let s in o)this._removeDecorationType(e+"-"+s)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,o,s){const l=e.model.validatePosition({lineNumber:o,column:s}),d=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(l);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber)}getTopForLineNumber(e){return this._modelData?CodeEditorWidget._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,o){return this._modelData?CodeEditorWidget._getVerticalOffsetForPosition(this._modelData,e,o):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map((e=>Q.e.lift(e))))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const o=this._modelData.model.validatePosition(e),s=this._modelData.model.getOptions().tabSize;return Z.i.visibleColumnFromColumn(this._modelData.model.getLineContent(o.lineNumber),o.column,s)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,o="api"){if(this._modelData){if(!q.L.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(o,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,o,s,l){if(!this._modelData)return;if(!Q.e.isIRange(e))throw new Error("Invalid arguments");const d=this._modelData.model.validateRange(e),u=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(d);this._modelData.viewModel.revealRange("api",s,u,o,l)}revealLine(e,o=0){this._revealLine(e,0,o)}revealLineInCenter(e,o=0){this._revealLine(e,1,o)}revealLineInCenterIfOutsideViewport(e,o=0){this._revealLine(e,2,o)}revealLineNearTop(e,o=0){this._revealLine(e,5,o)}_revealLine(e,o,s){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new Q.e(e,1,e,1),o,!1,s)}revealPosition(e,o=0){this._revealPosition(e,0,!0,o)}revealPositionInCenter(e,o=0){this._revealPosition(e,1,!0,o)}revealPositionInCenterIfOutsideViewport(e,o=0){this._revealPosition(e,2,!0,o)}revealPositionNearTop(e,o=0){this._revealPosition(e,5,!0,o)}_revealPosition(e,o,s,l){if(!q.L.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new Q.e(e.lineNumber,e.column,e.lineNumber,e.column),o,s,l)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,o="api"){const s=R.Y.isISelection(e),l=Q.e.isIRange(e);if(!s&&!l)throw new Error("Invalid arguments");if(s)this._setSelectionImpl(e,o);else if(l){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,o)}}_setSelectionImpl(e,o){if(!this._modelData)return;const s=new R.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(o,[s])}revealLines(e,o,s=0){this._revealLines(e,o,0,s)}revealLinesInCenter(e,o,s=0){this._revealLines(e,o,1,s)}revealLinesInCenterIfOutsideViewport(e,o,s=0){this._revealLines(e,o,2,s)}revealLinesNearTop(e,o,s=0){this._revealLines(e,o,5,s)}_revealLines(e,o,s,l){if("number"!==typeof e||"number"!==typeof o)throw new Error("Invalid arguments");this._sendRevealRange(new Q.e(e,1,o,1),s,!1,l)}revealRange(e,o=0,s=!1,l=!0){this._revealRange(e,s?1:0,l,o)}revealRangeInCenter(e,o=0){this._revealRange(e,1,!0,o)}revealRangeInCenterIfOutsideViewport(e,o=0){this._revealRange(e,2,!0,o)}revealRangeNearTop(e,o=0){this._revealRange(e,5,!0,o)}revealRangeNearTopIfOutsideViewport(e,o=0){this._revealRange(e,6,!0,o)}revealRangeAtTop(e,o=0){this._revealRange(e,3,!0,o)}_revealRange(e,o,s,l){if(!Q.e.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(Q.e.lift(e),o,s,l)}setSelections(e,o="api",s=0){if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let o=0,s=e.length;o<s;o++)if(!R.Y.isISelection(e[o]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(o,e,s)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,o=1){if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},o)}}setScrollTop(e,o=1){if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},o)}}setScrollPosition(e,o=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,o)}saveViewState(){if(!this._modelData)return null;const e={},o=Object.keys(this._contributions);for(const d of o){const o=this._contributions[d];"function"===typeof o.saveViewState&&(e[d]=o.saveViewState())}const s=this._modelData.viewModel.saveCursorState(),l=this._modelData.viewModel.saveState();return{cursorState:s,viewState:l,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const o=e;if(o&&o.cursorState&&o.viewState){const e=o.cursorState;Array.isArray(e)?e.length>0&&this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]);const s=o.contributionsState||{},l=Object.keys(this._contributions);for(let o=0,u=l.length;o<u;o++){const e=l[o],d=this._contributions[e];"function"===typeof d.restoreViewState&&d.restoreViewState(s[e])}const d=this._modelData.viewModel.reduceRestoreState(o.viewState);this._modelData.view.restoreState(d)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],o=Object.keys(this._actions);for(let s=0,l=o.length;s<l;s++){const l=o[s];e.push(this._actions[l])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter((e=>e.isSupported())),e}getAction(e){return this._actions[e]||null}trigger(e,o,s){switch(s=s||{},o){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const o=s;return void this._type(e,o.text||"")}case"replacePreviousChar":{const o=s;return void this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0)}case"compositionType":{const o=s;return void this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0)}case"paste":{const o=s;return void this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null)}case"cut":return void this._cut(e)}const l=this.getAction(o);l?Promise.resolve(l.run()).then(void 0,m.dL):this._modelData&&(this._triggerEditorCommand(e,o,s)||this._triggerCommand(o,s))}_triggerCommand(e,o){this._commandService.executeCommand(e,o)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,o){this._modelData&&0!==o.length&&("keyboard"===e&&this._onWillType.fire(o),this._modelData.viewModel.type(o,e),"keyboard"===e&&this._onDidType.fire(o))}_compositionType(e,o,s,l,d){this._modelData&&this._modelData.viewModel.compositionType(o,s,l,d,e)}_paste(e,o,s,l,d){if(!this._modelData||0===o.length)return;const u=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(o,s,l,e);const g=this._modelData.viewModel.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new Q.e(u.lineNumber,u.column,g.lineNumber,g.column),languageId:d})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,o,s){const l=d.Uc.getEditorCommand(o);return!!l&&(s=s||{},s.source=e,this._instantiationService.invokeFunction((e=>{Promise.resolve(l.runEditorCommand(e,this,s)).then(void 0,m.dL)})),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(81)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(81)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,o,s){if(!this._modelData)return!1;if(this._configuration.options.get(81))return!1;let l;return l=s?Array.isArray(s)?()=>s:s:()=>null,this._modelData.viewModel.executeEdits(e,o,l),!0}executeCommand(e,o){this._modelData&&this._modelData.viewModel.executeCommand(o,e)}executeCommands(e,o){this._modelData&&this._modelData.viewModel.executeCommands(o,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,D.$J)(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,D.$J)(this._configuration.options)):null}deltaDecorations(e,o){return this._modelData?0===e.length&&0===o.length?e:this._modelData.model.deltaDecorations(e,o,this._id):[]}removeDecorations(e){const o=this._decorationTypeKeysToIds[e];o&&this.deltaDecorations(o,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){const e=this._configuration.options,o=e.get(131);return o}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarMouseDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const o={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=o,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(o)}layoutContentWidget(e){const o=e.getId();if(this._contentWidgets.hasOwnProperty(o)){const s=this._contentWidgets[o];s.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(s)}}removeContentWidget(e){const o=e.getId();if(this._contentWidgets.hasOwnProperty(o)){const e=this._contentWidgets[o];delete this._contentWidgets[o],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const o={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=o,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(o)}layoutOverlayWidget(e){const o=e.getId();if(this._overlayWidgets.hasOwnProperty(o)){const s=this._overlayWidgets[o];s.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(s)}}removeOverlayWidget(e){const o=e.getId();if(this._overlayWidgets.hasOwnProperty(o)){const e=this._overlayWidgets[o];delete this._overlayWidgets[o],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,o){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,o):null}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const o=this._modelData.model.validatePosition(e),s=this._configuration.options,l=s.get(131),d=CodeEditorWidget._getVerticalOffsetForPosition(this._modelData,o.lineNumber,o.column)-this.getScrollTop(),u=this._modelData.view.getOffsetForColumn(o.lineNumber,o.column)+l.glyphMarginWidth+l.lineNumbersWidth+l.decorationsWidth-this.getScrollLeft();return{top:d,left:u,height:s.get(59)}}getOffsetForColumn(e,o){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,o):-1}render(e=!1){this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){(0,ie.N)(e,this._configuration.options.get(44))}setBanner(e,o){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?o:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e)return void(this._modelData=null);const o=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();const s=new ViewModel(this._id,this._configuration,e,DOMLineBreaksComputerFactory.create(),MonospaceLineBreaksComputerFactory.create(this._configuration.options),(e=>p.jL(e)),this.languageConfigurationService,this._themeService);o.push(e.onDidChangeDecorations((e=>this._onDidChangeModelDecorations.fire(e)))),o.push(e.onDidChangeLanguage((o=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(o)}))),o.push(e.onDidChangeLanguageConfiguration((e=>this._onDidChangeModelLanguageConfiguration.fire(e)))),o.push(e.onDidChangeContent((e=>this._onDidChangeModelContent.fire(e)))),o.push(e.onDidChangeOptions((e=>this._onDidChangeModelOptions.fire(e)))),o.push(e.onWillDispose((()=>this.setModel(null)))),o.push(s.onEvent((e=>{switch(e.kind){case 0:this._onDidContentSizeChange.fire(e);break;case 1:this._editorTextFocus.setValue(e.hasFocus);break;case 2:this._onDidScrollChange.fire(e);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{e.reachedMaxCursorCount&&this._notificationService.warn(g.N("cursors.maximum","The number of cursors has been limited to {0}.",CursorsController.MAX_CURSOR_COUNT));const o=[];for(let d=0,u=e.selections.length;d<u;d++)o[d]=e.selections[d].getPosition();const s={position:o[0],secondaryPositions:o.slice(1),reason:e.reason,source:e.source};this._onDidChangeCursorPosition.fire(s);const l={selection:e.selections[0],secondarySelections:e.selections.slice(1),modelVersionId:e.modelVersionId,oldSelections:e.oldSelections,oldModelVersionId:e.oldModelVersionId,source:e.source,reason:e.reason};this._onDidChangeCursorSelection.fire(l);break}}})));const[l,d]=this._createView(s);if(d){this._domElement.appendChild(l.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let e=0,s=o.length;e<s;e++){const s=o[e];l.addContentWidget(this._contentWidgets[s])}o=Object.keys(this._overlayWidgets);for(let e=0,s=o.length;e<s;e++){const s=o[e];l.addOverlayWidget(this._overlayWidgets[s])}l.render(!1,!0),l.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new ModelData(e,s,l,d,o)}_createView(e){let o;o=this.isSimpleWidget?{paste:(e,o,s,l)=>{this._paste("keyboard",e,o,s,l)},type:e=>{this._type("keyboard",e)},compositionType:(e,o,s,l)=>{this._compositionType("keyboard",e,o,s,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,o,s,l)=>{const d={text:e,pasteOnNewLine:o,multicursorText:s,mode:l};this._commandService.executeCommand("paste",d)},type:e=>{const o={text:e};this._commandService.executeCommand("type",o)},compositionType:(e,o,s,l)=>{if(s||l){const d={text:e,replacePrevCharCnt:o,replaceNextCharCnt:s,positionDelta:l};this._commandService.executeCommand("compositionType",d)}else{const s={text:e,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",s)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const s=new ViewUserInputEvents(e.coordinatesConverter);s.onKeyDown=e=>this._onKeyDown.fire(e),s.onKeyUp=e=>this._onKeyUp.fire(e),s.onContextMenu=e=>this._onContextMenu.fire(e),s.onMouseMove=e=>this._onMouseMove.fire(e),s.onMouseLeave=e=>this._onMouseLeave.fire(e),s.onMouseDown=e=>this._onMouseDown.fire(e),s.onMouseUp=e=>this._onMouseUp.fire(e),s.onMouseDrag=e=>this._onMouseDrag.fire(e),s.onMouseDrop=e=>this._onMouseDrop.fire(e),s.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),s.onMouseWheel=e=>this._onMouseWheel.fire(e);const l=new View(o,this._configuration,this._themeService.getColorTheme(),e,s,this._overflowWidgetsDomNode);return[l,!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,o=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),o&&this._domElement.contains(o)&&this._domElement.removeChild(o),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}};at=codeEditorWidget_decorate([codeEditorWidget_param(3,Qe.TG),codeEditorWidget_param(4,M.$),codeEditorWidget_param(5,Ge.Hy),codeEditorWidget_param(6,qe.i6),codeEditorWidget_param(7,se.XE),codeEditorWidget_param(8,Ye.lT),codeEditorWidget_param(9,I.F),codeEditorWidget_param(10,ot.c_),codeEditorWidget_param(11,st.p)],at);class BooleanEventEmitter extends _.JT{constructor(){super(),this._onDidChangeToTrue=this._register(new f.Q5),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new f.Q5),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const o=e?2:1;this._value!==o&&(this._value=o,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class EditorContextKeysManager extends _.JT{constructor(e,o){super(),this._editor=e,o.createKey("editorId",e.getId()),this._editorSimpleInput=Oe.u.editorSimpleInput.bindTo(o),this._editorFocus=Oe.u.focus.bindTo(o),this._textInputFocus=Oe.u.textInputFocus.bindTo(o),this._editorTextFocus=Oe.u.editorTextFocus.bindTo(o),this._editorTabMovesFocus=Oe.u.tabMovesFocus.bindTo(o),this._editorReadonly=Oe.u.readOnly.bindTo(o),this._inDiffEditor=Oe.u.inDiffEditor.bindTo(o),this._editorColumnSelection=Oe.u.columnSelection.bindTo(o),this._hasMultipleSelections=Oe.u.hasMultipleSelections.bindTo(o),this._hasNonEmptySelection=Oe.u.hasNonEmptySelection.bindTo(o),this._canUndo=Oe.u.canUndo.bindTo(o),this._canRedo=Oe.u.canRedo.bindTo(o),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromConfig()))),this._register(this._editor.onDidChangeCursorSelection((()=>this._updateFromSelection()))),this._register(this._editor.onDidFocusEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidFocusEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidChangeModel((()=>this._updateFromModel()))),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromModel()))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(130)),this._editorReadonly.set(e.get(81)),this._inDiffEditor.set(e.get(54)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((e=>!e.isEmpty())))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class EditorModeContext extends _.JT{constructor(e,o,s){super(),this._editor=e,this._contextKeyService=o,this._languageFeaturesService=s,this._langId=Oe.u.languageId.bindTo(o),this._hasCompletionItemProvider=Oe.u.hasCompletionItemProvider.bindTo(o),this._hasCodeActionsProvider=Oe.u.hasCodeActionsProvider.bindTo(o),this._hasCodeLensProvider=Oe.u.hasCodeLensProvider.bindTo(o),this._hasDefinitionProvider=Oe.u.hasDefinitionProvider.bindTo(o),this._hasDeclarationProvider=Oe.u.hasDeclarationProvider.bindTo(o),this._hasImplementationProvider=Oe.u.hasImplementationProvider.bindTo(o),this._hasTypeDefinitionProvider=Oe.u.hasTypeDefinitionProvider.bindTo(o),this._hasHoverProvider=Oe.u.hasHoverProvider.bindTo(o),this._hasDocumentHighlightProvider=Oe.u.hasDocumentHighlightProvider.bindTo(o),this._hasDocumentSymbolProvider=Oe.u.hasDocumentSymbolProvider.bindTo(o),this._hasReferenceProvider=Oe.u.hasReferenceProvider.bindTo(o),this._hasRenameProvider=Oe.u.hasRenameProvider.bindTo(o),this._hasSignatureHelpProvider=Oe.u.hasSignatureHelpProvider.bindTo(o),this._hasInlayHintsProvider=Oe.u.hasInlayHintsProvider.bindTo(o),this._hasDocumentFormattingProvider=Oe.u.hasDocumentFormattingProvider.bindTo(o),this._hasDocumentSelectionFormattingProvider=Oe.u.hasDocumentSelectionFormattingProvider.bindTo(o),this._hasMultipleDocumentFormattingProvider=Oe.u.hasMultipleDocumentFormattingProvider.bindTo(o),this._hasMultipleDocumentSelectionFormattingProvider=Oe.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(o),this._isInWalkThrough=Oe.u.isInWalkThroughSnippet.bindTo(o);const update=()=>this._update();this._register(e.onDidChangeModel(update)),this._register(e.onDidChangeModelLanguage(update)),this._register(s.completionProvider.onDidChange(update)),this._register(s.codeActionProvider.onDidChange(update)),this._register(s.codeLensProvider.onDidChange(update)),this._register(s.definitionProvider.onDidChange(update)),this._register(s.declarationProvider.onDidChange(update)),this._register(s.implementationProvider.onDidChange(update)),this._register(s.typeDefinitionProvider.onDidChange(update)),this._register(s.hoverProvider.onDidChange(update)),this._register(s.documentHighlightProvider.onDidChange(update)),this._register(s.documentSymbolProvider.onDidChange(update)),this._register(s.referenceProvider.onDidChange(update)),this._register(s.renameProvider.onDidChange(update)),this._register(s.documentFormattingEditProvider.onDidChange(update)),this._register(s.documentRangeFormattingEditProvider.onDidChange(update)),this._register(s.signatureHelpProvider.onDidChange(update)),this._register(s.inlayHintsProvider.onDidChange(update)),update()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents((()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()}))}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents((()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===C.lg.walkThroughSnippet)})):this.reset()}}class CodeEditorWidgetFocusTracker extends _.JT{constructor(e){super(),this._onChange=this._register(new f.Q5),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(p.go(e)),this._register(this._domFocusTracker.onDidFocus((()=>{this._hasFocus=!0,this._onChange.fire(void 0)}))),this._register(this._domFocusTracker.onDidBlur((()=>{this._hasFocus=!1,this._onChange.fire(void 0)})))}hasFocus(){return this._hasFocus}}const lt=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),ct=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function getSquigglySVGData(e){return lt+encodeURIComponent(e.toString())+ct}const dt=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),ht=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function getDotDotDotSVGData(e){return dt+encodeURIComponent(e.toString())+ht}(0,se.Ic)(((e,o)=>{const s=e.getColor(me.b6y);s&&o.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${s}; }`);const l=e.getColor(me.lXJ);l&&o.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${getSquigglySVGData(l)}") repeat-x bottom left; }`);const d=e.getColor(me.L_H);d&&o.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);const u=e.getColor(me.pW3);u&&o.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${u}; }`);const g=e.getColor(me.uoC);g&&o.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${getSquigglySVGData(g)}") repeat-x bottom left; }`);const p=e.getColor(me.gpD);p&&o.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${p}; }`);const m=e.getColor(me.T83);m&&o.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${m}; }`);const f=e.getColor(me.c63);f&&o.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${getSquigglySVGData(f)}") repeat-x bottom left; }`);const _=e.getColor(me.few);_&&o.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${_}; }`);const C=e.getColor(me.fEB);C&&o.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${C}; }`);const b=e.getColor(me.Dut);b&&o.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${getDotDotDotSVGData(b)}") no-repeat bottom left; }`);const w=e.getColor(oe.zu);w&&o.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${w.rgba.a}; }`);const S=e.getColor(oe.kp);S&&o.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${S}; }`);const y=e.getColor(me.NOs)||"inherit";o.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${y}}`)}))},4869:function(e,o,s){"use strict";s.d(o,{p:function(){return ue}});var l,d=s(3580),u=s(5321),g=s(8626),p=s(3098),m=s(5393),f=s(4669),_=s(5976),C=s(2136),b=s(3407),w=s(1640),S=s(9182),y=s(317),L=s(3161),x=s(4741),k=s(6830),N=s(4141),D=s(7378),E=s(187),T=s(8625),I=s(7736),A=s(1118),M=s(8819),R=s(3910),P=s(7781),O=s(3046),F=s(9554),B=s(2042),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const W=3;class DiffEntry{constructor(e,o,s,l){this.originalLineStart=e,this.originalLineEnd=o,this.modifiedLineStart=s,this.modifiedLineEnd=l}getType(){return 0===this.originalLineStart?1:0===this.modifiedLineStart?2:0}}class Diff{constructor(e){this.entries=e}}const V=(0,F.q5)("diff-review-insert",O.lA.add,d.N("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),H=(0,F.q5)("diff-review-remove",O.lA.remove,d.N("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),z=(0,F.q5)("diff-review-close",O.lA.close,d.N("diffReviewCloseIcon","Icon for 'Close' in diff review."));let U=class DiffReview extends _.JT{constructor(e,o){super(),this._languageService=o,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=(0,g.X)(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=(0,g.X)(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new y.o(this.actionBarContainer.domNode)),this._actionBar.push(new x.aU("diffreview.close",d.N("label.close","Close"),"close-diff-review "+P.kS.asClassName(z),!0,(()=>__awaiter(this,void 0,void 0,(function*(){return this.hide()})))),{label:!1,icon:!0}),this.domNode=(0,g.X)(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=(0,g.X)(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new L.s$(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff((()=>{this._isVisible&&(this._diffs=this._compute(),this._render())}))),this._register(e.getModifiedEditor().onDidChangeCursorPosition((()=>{this._isVisible&&this._render()}))),this._register(u.mu(this.domNode.domNode,"click",(e=>{e.preventDefault();const o=u.Fx(e.target,"diff-review-row");o&&this._goToRow(o)}))),this._register(u.mu(this.domNode.domNode,"keydown",(e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._goToRow(this._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._goToRow(this._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this.accept())}))),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let o=-1;for(let e=0,s=this._diffs.length;e<s;e++)if(this._diffs[e]===this._currentDiff){o=e;break}e=this._diffs.length+o-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const o=this._diffs[e].entries;this._diffEditor.setPosition(new E.L(o[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:o[0].modifiedLineStart,endColumn:1073741824,endLineNumber:o[o.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let o=-1;for(let e=0,s=this._diffs.length;e<s;e++)if(this._diffs[e]===this._currentDiff){o=e;break}e=o+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const o=this._diffs[e].entries;this._diffEditor.setPosition(new E.L(o[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:o[0].modifiedLineStart,endColumn:1073741824,endLineNumber:o[o.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1;const o=this._getCurrentFocusedRow();if(o){const s=parseInt(o.getAttribute("data-line"),10);isNaN(s)||(e=s)}this.hide(),-1!==e&&(this._diffEditor.setPosition(new E.L(e,1)),this._diffEditor.revealPosition(new E.L(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){const o=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),o&&o!==e&&(o.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,o,s){this._width=o,this.shadow.setTop(e-6),this.shadow.setWidth(o),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(o),this.domNode.setHeight(s),this._content.setHeight(s),this._content.setWidth(o),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||0===e.length)return[];const o=this._diffEditor.getOriginalEditor().getModel(),s=this._diffEditor.getModifiedEditor().getModel();return o&&s?DiffReview._mergeAdjacent(e,o.getLineCount(),s.getLineCount()):[]}static _mergeAdjacent(e,o,s){if(!e||0===e.length)return[];const l=[];let d=0;for(let m=0,f=e.length;m<f;m++){const u=e[m],g=u.originalStartLineNumber,p=u.originalEndLineNumber,_=u.modifiedStartLineNumber,C=u.modifiedEndLineNumber,b=[];let w=0;{const o=0===p?g:g-1,s=0===C?_:_-1;let l=1,d=1;if(m>0){const o=e[m-1];l=0===o.originalEndLineNumber?o.originalStartLineNumber+1:o.originalEndLineNumber+1,d=0===o.modifiedEndLineNumber?o.modifiedStartLineNumber+1:o.modifiedEndLineNumber+1}let u=o-W+1,f=s-W+1;if(u<l){const e=l-u;u+=e,f+=e}if(f<d){const e=d-f;u+=e,f+=e}b[w++]=new DiffEntry(u,o,f,s)}0!==p&&(b[w++]=new DiffEntry(g,p,0,0)),0!==C&&(b[w++]=new DiffEntry(0,0,_,C));{const l=0===p?g+1:p+1,d=0===C?_+1:C+1;let u=o,S=s;if(m+1<f){const o=e[m+1];u=0===o.originalEndLineNumber?o.originalStartLineNumber:o.originalStartLineNumber-1,S=0===o.modifiedEndLineNumber?o.modifiedStartLineNumber:o.modifiedStartLineNumber-1}let y=l+W-1,L=d+W-1;if(y>u){const e=u-y;y+=e,L+=e}if(L>S){const e=S-L;y+=e,L+=e}b[w++]=new DiffEntry(l,y,d,L)}l[d++]=new Diff(b)}let u=l[0].entries;const g=[];let p=0;for(let m=1,f=l.length;m<f;m++){const e=l[m].entries,o=u[u.length-1],s=e[0];0===o.getType()&&0===s.getType()&&s.originalLineStart<=o.originalLineEnd?(u[u.length-1]=new DiffEntry(o.originalLineStart,s.originalLineEnd,o.modifiedLineStart,s.modifiedLineEnd),u=u.concat(e.slice(1))):(g[p++]=new Diff(u),u=e)}return g[p++]=new Diff(u),g}_findDiffIndex(e){const o=e.lineNumber;for(let s=0,l=this._diffs.length;s<l;s++){const e=this._diffs[s].entries,l=e[e.length-1].modifiedLineEnd;if(o<=l)return s}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),o=this._diffEditor.getModifiedEditor().getOptions(),s=this._diffEditor.getOriginalEditor().getModel(),l=this._diffEditor.getModifiedEditor().getModel(),g=s.getOptions(),p=l.getOptions();if(!this._isVisible||!s||!l)return u.PO(this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();this._diffEditor.updateOptions({readOnly:!0});const m=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[m]===this._currentDiff)return;this._currentDiff=this._diffs[m];const f=this._diffs[m].entries,_=document.createElement("div");_.className="diff-review-table",_.setAttribute("role","list"),_.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),(0,C.N)(_,o.get(44));let b=0,w=0,S=0,y=0;for(let d=0,u=f.length;d<u;d++){const e=f[d],o=e.originalLineStart,s=e.originalLineEnd,l=e.modifiedLineStart,u=e.modifiedLineEnd;0!==o&&(0===b||o<b)&&(b=o),0!==s&&(0===w||s>w)&&(w=s),0!==l&&(0===S||l<S)&&(S=l),0!==u&&(0===y||u>y)&&(y=u)}const L=document.createElement("div");L.className="diff-review-row";const x=document.createElement("div");x.className="diff-review-cell diff-review-summary";const k=w-b+1,N=y-S+1;x.appendChild(document.createTextNode(`${m+1}/${this._diffs.length}: @@ -${b},${k} +${S},${N} @@`)),L.setAttribute("data-line",String(S));const getAriaLines=e=>0===e?d.N("no_lines_changed","no lines changed"):1===e?d.N("one_line_changed","1 line changed"):d.N("more_lines_changed","{0} lines changed",e),D=getAriaLines(k),E=getAriaLines(N);L.setAttribute("aria-label",d.N({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",m+1,this._diffs.length,b,D,S,E)),L.appendChild(x),L.setAttribute("role","listitem"),_.appendChild(L);const T=o.get(59);let I=S;for(let d=0,u=f.length;d<u;d++){const u=f[d];DiffReview._renderSection(_,u,I,T,this._width,e,s,g,o,l,p,this._languageService.languageIdCodec),0!==u.modifiedLineStart&&(I=u.modifiedLineEnd)}u.PO(this._content.domNode),this._content.domNode.appendChild(_),this.scrollbar.scanDomNode()}static _renderSection(e,o,s,l,u,g,p,m,f,_,C,b){const w=o.getType();let S="diff-review-row",y="";const L="diff-review-spacer";let x=null;switch(w){case 1:S="diff-review-row line-insert",y=" char-insert",x=V;break;case 2:S="diff-review-row line-delete",y=" char-delete",x=H;break}const k=o.originalLineStart,N=o.originalLineEnd,D=o.modifiedLineStart,E=o.modifiedLineEnd,T=Math.max(E-D,N-k),I=g.get(131),A=I.glyphMarginWidth+I.lineNumbersWidth,M=f.get(131),R=10+M.glyphMarginWidth+M.lineNumbersWidth;for(let O=0;O<=T;O++){const o=0===k?0:k+O,N=0===D?0:D+O,E=document.createElement("div");E.style.minWidth=u+"px",E.className=S,E.setAttribute("role","listitem"),0!==N&&(s=N),E.setAttribute("data-line",String(s));const T=document.createElement("div");T.className="diff-review-cell",T.style.height=`${l}px`,E.appendChild(T);const I=document.createElement("span");I.style.width=A+"px",I.style.minWidth=A+"px",I.className="diff-review-line-number"+y,0!==o?I.appendChild(document.createTextNode(String(o))):I.innerText=" ",T.appendChild(I);const M=document.createElement("span");M.style.width=R+"px",M.style.minWidth=R+"px",M.style.paddingRight="10px",M.className="diff-review-line-number"+y,0!==N?M.appendChild(document.createTextNode(String(N))):M.innerText=" ",T.appendChild(M);const F=document.createElement("span");if(F.className=L,x){const e=document.createElement("span");e.className=P.kS.asClassName(x),e.innerText="  ",F.appendChild(e)}else F.innerText="  ";let B;if(T.appendChild(F),0!==N){let e=this._renderLine(_,f,C.tabSize,N,b);DiffReview._ttPolicy&&(e=DiffReview._ttPolicy.createHTML(e)),T.insertAdjacentHTML("beforeend",e),B=_.getLineContent(N)}else{let e=this._renderLine(p,g,m.tabSize,o,b);DiffReview._ttPolicy&&(e=DiffReview._ttPolicy.createHTML(e)),T.insertAdjacentHTML("beforeend",e),B=p.getLineContent(o)}0===B.length&&(B=d.N("blankLine","blank"));let W="";switch(w){case 0:W=o===N?d.N({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",B,o):d.N("equalLine","{0} original line {1} modified line {2}",B,o,N);break;case 1:W=d.N("insertLine","+ {0} modified line {1}",B,N);break;case 2:W=d.N("deleteLine","- {0} original line {1}",B,o);break}E.setAttribute("aria-label",W),e.appendChild(E)}}static _renderLine(e,o,s,l,d){const u=e.getLineContent(l),g=o.get(44),p=D.A.createEmpty(u,d),m=A.wA.isBasicASCII(u,e.mightContainNonBasicASCII()),f=A.wA.containsRTL(u,m,e.mightContainRTL()),_=(0,I.tF)(new I.IJ(g.isMonospace&&!o.get(29),g.canUseHalfwidthRightwardsArrow,u,!1,m,f,0,p,[],s,0,g.spaceWidth,g.middotWidth,g.wsmiddotWidth,o.get(105),o.get(88),o.get(83),o.get(45)!==N.n0.OFF,null));return _.html}};U._ttPolicy=null===(l=window.trustedTypes)||void 0===l?void 0:l.createPolicy("diffReview",{createHTML:e=>e}),U=__decorate([__param(1,B.O)],U),(0,P.Ic)(((e,o)=>{const s=e.getColor(T.hw);s&&o.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${s}; }`);const l=e.getColor(R._wn);l&&o.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${l} 0 -6px 6px -6px inset; }`)}));class DiffReviewNext extends k.R6{constructor(){super({id:"editor.action.diffReview.next",label:d.N("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:M.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,o){const s=findFocusedDiffEditor(e);s&&s.diffReviewNext()}}class DiffReviewPrev extends k.R6{constructor(){super({id:"editor.action.diffReview.prev",label:d.N("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:M.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,o){const s=findFocusedDiffEditor(e);s&&s.diffReviewPrev()}}function findFocusedDiffEditor(e){const o=e.get(w.$),s=o.listDiffEditors(),l=o.getActiveCodeEditor();if(!l)return null;for(let d=0,u=s.length;d<u;d++){const e=s[d];if(e.getModifiedEditor().getId()===l.getId()||e.getOriginalEditor().getId()===l.getId())return e}return null}(0,k.Qr)(DiffReviewNext),(0,k.Qr)(DiffReviewPrev);var K=s(4314),j=s(72),G=s(6518),q=s(2822),Q=s(4319),Z=s(665),Y=s(2550),J=s(2065),X=s(972),ee=s(9422),te=s(5606),inlineDiffMargin_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class InlineDiffMargin extends _.JT{constructor(e,o,s,l,g,p){super(),this._viewZoneId=e,this._marginDomNode=o,this.editor=s,this.diff=l,this._contextMenuService=g,this._clipboardService=p,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=O.lA.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const m=s.getOption(59),f=s.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${m}px`,this._diffActions.style.lineHeight=`${m}px`,this._marginDomNode.appendChild(this._diffActions);const _=[],C=0===l.modifiedEndLineNumber;_.push(new x.aU("diff.clipboard.copyDeletedContent",C?l.originalEndLineNumber>l.modifiedStartLineNumber?d.N("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):d.N("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):l.originalEndLineNumber>l.modifiedStartLineNumber?d.N("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):d.N("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(()=>inlineDiffMargin_awaiter(this,void 0,void 0,(function*(){const e=new K.e(l.originalStartLineNumber,1,l.originalEndLineNumber+1,1),o=l.originalModel.getValueInRange(e);yield this._clipboardService.writeText(o)})))));let b,w=0;l.originalEndLineNumber>l.modifiedStartLineNumber&&(b=new x.aU("diff.clipboard.copyDeletedLineContent",C?d.N("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",l.originalStartLineNumber):d.N("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",l.originalStartLineNumber),void 0,!0,(()=>inlineDiffMargin_awaiter(this,void 0,void 0,(function*(){const e=l.originalModel.getLineContent(l.originalStartLineNumber+w);if(""===e){const e=l.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(0===e?"\n":"\r\n")}else yield this._clipboardService.writeText(e)})))),_.push(b));const S=s.getOption(81);S||_.push(new x.aU("diff.inline.revertChange",d.N("diff.inline.revertChange.label","Revert this change"),void 0,!0,(()=>inlineDiffMargin_awaiter(this,void 0,void 0,(function*(){const e=new K.e(l.originalStartLineNumber,1,l.originalEndLineNumber,l.originalModel.getLineMaxColumn(l.originalEndLineNumber)),o=l.originalModel.getValueInRange(e);if(0===l.modifiedEndLineNumber){const e=s.getModel().getLineMaxColumn(l.modifiedStartLineNumber);s.executeEdits("diffEditor",[{range:new K.e(l.modifiedStartLineNumber,e,l.modifiedStartLineNumber,e),text:f+o}])}else{const e=s.getModel().getLineMaxColumn(l.modifiedEndLineNumber);s.executeEdits("diffEditor",[{range:new K.e(l.modifiedStartLineNumber,1,l.modifiedEndLineNumber,e),text:o}])}})))));const showContextMenu=(e,o)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:e,y:o}),getActions:()=>(b&&(b.label=C?d.N("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",l.originalStartLineNumber+w):d.N("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",l.originalStartLineNumber+w)),_),autoSelectFirstItem:!0})};this._register(u.mu(this._diffActions,"mousedown",(e=>{const{top:o,height:s}=u.i(this._diffActions),l=Math.floor(m/3);e.preventDefault(),showContextMenu(e.posx,o+s+l)}))),this._register(s.onMouseMove((e=>{if(8===e.target.type||5===e.target.type){const o=e.target.detail.viewZoneId;o===this._viewZoneId?(this.visibility=!0,w=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,m)):this.visibility=!1}else this.visibility=!1}))),this._register(s.onMouseDown((e=>{if(e.event.rightButton&&(8===e.target.type||5===e.target.type)){const o=e.target.detail.viewZoneId;o===this._viewZoneId&&(e.event.preventDefault(),w=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,m),showContextMenu(e.event.posx,e.event.posy+m))}})))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}_updateLightBulbPosition(e,o,s){const{top:l}=u.i(e),d=o-l,g=Math.floor(d/s),p=g*s;if(this._diffActions.style.top=`${p}px`,this.diff.viewLineCounts){let e=0;for(let o=0;o<this.diff.viewLineCounts.length;o++)if(e+=this.diff.viewLineCounts[o],g<e)return o}return g}}var ie,ne=s(4972),oe=s(7301),se=s(535),re=s(4534),ae=s(6542),diffEditorWidget_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},diffEditorWidget_param=function(e,o){return function(s,l){o(s,l,e)}};class VisualEditorState{constructor(e,o){this._contextMenuService=e,this._clipboardService=o,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter((e=>!this._zonesMap[String(e.id)]))}clean(e){this._zones.length>0&&e.changeViewZones((e=>{for(const o of this._zones)e.removeZone(o)})),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,o,s,l){const d=l?b.Z.capture(e):null;e.changeViewZones((o=>{var l;for(const e of this._zones)o.removeZone(e);for(const e of this._inlineDiffMargins)e.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let d=0,u=s.zones.length;d<u;d++){const u=s.zones[d];u.suppressMouseDown=!0;const g=o.addZone(u);this._zones.push(g),this._zonesMap[String(g)]=!0,s.zones[d].diff&&u.marginDomNode&&(u.suppressMouseDown=!1,0!==(null===(l=s.zones[d].diff)||void 0===l?void 0:l.originalModel.getValueLength())&&this._inlineDiffMargins.push(new InlineDiffMargin(g,u.marginDomNode,e,s.zones[d].diff,this._contextMenuService,this._clipboardService)))}})),d&&d.restore(e),this._decorations=e.deltaDecorations(this._decorations,s.decorations),o&&o.setZones(s.overviewZones)}}let le=0;const ce=(0,F.q5)("diff-insert",O.lA.add,d.N("diffInsertIcon","Line decoration for inserts in the diff editor.")),de=(0,F.q5)("diff-remove",O.lA.remove,d.N("diffRemoveIcon","Line decoration for removals in the diff editor.")),he=null===(ie=window.trustedTypes)||void 0===ie?void 0:ie.createPolicy("diffEditorWidget",{createHTML:e=>e});let ue=class DiffEditorWidget extends _.JT{constructor(e,o,s,l,d,p,_,C,b,w,S,y){super(),this._editorProgressService=y,this._onDidDispose=this._register(new f.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new f.Q5),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new f.Q5),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=d,this._codeEditorService=C,this._contextKeyService=this._register(p.createScoped(e)),this._instantiationService=_.createChild(new X.y([M.i6,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=b,this._notificationService=w,this._id=++le,this._state=0,this._updatingDiffProgress=null,this._domElement=e,o=o||{},this._options=validateDiffEditorOptions(o,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),"undefined"!==typeof o.isInEmbeddedEditor?this._contextKeyService.createKey("isInEmbeddedDiffEditor",o.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new m.pY((()=>this._updateDecorations()),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=DiffEditorWidget._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=(0,g.X)(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(u.mu(this._overviewDomElement,"mousedown",(e=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(e)}))),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new VisualEditorState(S,l),this._modifiedEditorState=new VisualEditorState(S,l),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new re.I(this._containerDomElement,o.dimension)),this._register(this._elementSizeObserver.onDidChange((()=>this._onDidContainerSizeChanged()))),o.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(o,s.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(o,s.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=_.createInstance(U,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(b.onDidColorThemeChange((e=>{this._strategy&&this._strategy.applyColors(e)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=DiffEditorWidget._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)})));const L=k.Uc.getDiffEditorContributions();for(const u of L)try{this._register(_.createInstance(u.ctor,this))}catch(x){(0,oe.dL)(x)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),1===this._state&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,o){let s="monaco-diff-editor monaco-editor-background ";return o&&(s+="side-by-side "),s+=(0,P.m6)(e.type),s}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,o){const s=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),o);this._register(s.onDidScrollChange((e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())}))),this._register(s.onDidChangeViewZones((()=>{this._onViewZonesChanged()}))),this._register(s.onDidChangeConfiguration((e=>{s.getModel()&&(e.hasChanged(44)&&this._updateDecorationsRunner.schedule(),e.hasChanged(132)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))}))),this._register(s.onDidChangeHiddenAreas((()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()}))),this._register(s.onDidChangeModelContent((()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})));const l=this._contextKeyService.createKey("isInDiffLeftEditor",s.hasWidgetFocus());return this._register(s.onDidFocusEditorWidget((()=>l.set(!0)))),this._register(s.onDidBlurEditorWidget((()=>l.set(!1)))),this._register(s.onDidContentSizeChange((e=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+DiffEditorWidget.ONE_OVERVIEW_WIDTH,s=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:s,contentWidth:o,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),s}_createRightHandSideEditor(e,o){const s=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),o);this._register(s.onDidScrollChange((e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())}))),this._register(s.onDidChangeViewZones((()=>{this._onViewZonesChanged()}))),this._register(s.onDidChangeConfiguration((e=>{s.getModel()&&(e.hasChanged(44)&&this._updateDecorationsRunner.schedule(),e.hasChanged(132)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))}))),this._register(s.onDidChangeHiddenAreas((()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()}))),this._register(s.onDidChangeModelContent((()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}))),this._register(s.onDidChangeModelOptions((e=>{e.tabSize&&this._updateDecorationsRunner.schedule()})));const l=this._contextKeyService.createKey("isInDiffRightEditor",s.hasWidgetFocus());return this._register(s.onDidFocusEditorWidget((()=>l.set(!0)))),this._register(s.onDidBlurEditorWidget((()=>l.set(!1)))),this._register(s.onDidContentSizeChange((e=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+DiffEditorWidget.ONE_OVERVIEW_WIDTH,s=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:s,contentWidth:o,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),s}_createInnerEditor(e,o,s,l){return e.createInstance(S.Gm,o,s,l)}dispose(){this._codeEditorService.removeDiffEditor(this),-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return G.g.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const o=validateDiffEditorOptions(e,this._options),s=changedDiffEditorOptions(this._options,o);this._options=o;const l=s.ignoreTrimWhitespace||s.renderIndicators,d=this._isVisible&&(s.maxComputationTime||s.maxFileSize);l?this._beginUpdateDecorations():d&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),s.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=DiffEditorWidget._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),s.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,o="api"){this._modifiedEditor.setPosition(e,o)}revealLine(e,o=0){this._modifiedEditor.revealLine(e,o)}revealLineInCenter(e,o=0){this._modifiedEditor.revealLineInCenter(e,o)}revealLineInCenterIfOutsideViewport(e,o=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,o)}revealLineNearTop(e,o=0){this._modifiedEditor.revealLineNearTop(e,o)}revealPosition(e,o=0){this._modifiedEditor.revealPosition(e,o)}revealPositionInCenter(e,o=0){this._modifiedEditor.revealPositionInCenter(e,o)}revealPositionInCenterIfOutsideViewport(e,o=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,o)}revealPositionNearTop(e,o=0){this._modifiedEditor.revealPositionNearTop(e,o)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,o="api"){this._modifiedEditor.setSelection(e,o)}setSelections(e,o="api"){this._modifiedEditor.setSelections(e,o)}revealLines(e,o,s=0){this._modifiedEditor.revealLines(e,o,s)}revealLinesInCenter(e,o,s=0){this._modifiedEditor.revealLinesInCenter(e,o,s)}revealLinesInCenterIfOutsideViewport(e,o,s=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,o,s)}revealLinesNearTop(e,o,s=0){this._modifiedEditor.revealLinesNearTop(e,o,s)}revealRange(e,o=0,s=!1,l=!0){this._modifiedEditor.revealRange(e,o,s,l)}revealRangeInCenter(e,o=0){this._modifiedEditor.revealRangeInCenter(e,o)}revealRangeInCenterIfOutsideViewport(e,o=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,o)}revealRangeNearTop(e,o=0){this._modifiedEditor.revealRangeNearTop(e,o)}revealRangeNearTopIfOutsideViewport(e,o=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,o)}revealRangeAtTop(e,o=0){this._modifiedEditor.revealRangeAtTop(e,o)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),o=this._modifiedEditor.saveViewState();return{original:e,modified:o}}restoreViewState(e){if(e&&e.original&&e.modified){const o=e;this._originalEditor.restoreViewState(o.original),this._modifiedEditor.restoreViewState(o.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,o,s){this._modifiedEditor.trigger(e,o,s)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler)return;if(!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),o=this._getReviewHeight(),s=DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH-2*DiffEditorWidget.ONE_OVERVIEW_WIDTH,l=this._modifiedEditor.getLayoutInfo();l&&(this._originalOverviewRuler.setLayout({top:0,width:DiffEditorWidget.ONE_OVERVIEW_WIDTH,right:s+DiffEditorWidget.ONE_OVERVIEW_WIDTH,height:e-o}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:DiffEditorWidget.ONE_OVERVIEW_WIDTH,height:e-o}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout((()=>this._beginUpdateDecorations()),DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,o){return!e&&!o||!(!e||!o)&&e.toString()===o.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),o=this._modifiedEditor.getModel();if(!e||!o)return;this._diffComputationToken++;const s=this._diffComputationToken,l=1024*this._options.maxFileSize*1024,canSyncModelForDiff=e=>{const o=e.getValueLength();return 0===l||o<=l};canSyncModelForDiff(e)&&canSyncModelForDiff(o)?(this._setState(1),this._editorWorkerService.computeDiff(e.uri,o.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then((l=>{s===this._diffComputationToken&&e===this._originalEditor.getModel()&&o===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=l,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())}),(l=>{s===this._diffComputationToken&&e===this._originalEditor.getModel()&&o===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())}))):DiffEditorWidget._equals(e.uri,this._lastOriginalWarning)&&DiffEditorWidget._equals(o.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=o.uri,this._notificationService.warn(d.N("diff.tooLarge","Cannot compare files because one file is too large.")))}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],o=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),s=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),l=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,o,s);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,l.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,l.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const o=Object.assign({},e);return o.inDiffEditor=!0,o.automaticLayout=!1,o.scrollbar=Object.assign({},o.scrollbar||{}),o.scrollbar.vertical="visible",o.folding=!1,o.codeLens=this._options.diffCodeLens,o.fixedOverflowWidgets=!0,o.minimap=Object.assign({},o.minimap||{}),o.minimap.enabled=!1,o}_adjustOptionsForLeftHandSide(e){const o=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?o.wordWrapOverride1=this._options.diffWordWrap:(o.wordWrapOverride1="off",o.wordWrapOverride2="off"),e.originalAriaLabel&&(o.ariaLabel=e.originalAriaLabel),o.readOnly=!this._options.originalEditable,o.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},o),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const o=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(o.ariaLabel=e.modifiedAriaLabel),o.wordWrapOverride1=this._options.diffWordWrap,o.revealHorizontalRightPadding=N.BH.revealHorizontalRightPadding.defaultValue+DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH,o.scrollbar.verticalHasArrows=!1,o.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},o),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),o=this._elementSizeObserver.getHeight(),s=this._getReviewHeight(),l=this._strategy.layout();this._originalDomNode.style.width=l+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-l+"px",this._modifiedDomNode.style.left=l+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=o-s+"px",this._overviewDomElement.style.width=DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:l,height:o-s}),this._modifiedEditor.layout({width:e-l-(this._options.renderOverviewRuler?DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:o-s}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(o-s,e,s),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const o=this._modifiedEditor.getScrollTop(),s=this._modifiedEditor.getScrollHeight(),l=Math.max(0,e.height),d=Math.max(0,l-0),u=s>0?d/s:0,g=Math.max(0,Math.floor(e.height*u)),p=Math.floor(o*u);return{height:g,top:p}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,o){const s=this._diffComputationResult?this._diffComputationResult.changes:[];if(0===s.length||e<o(s[0]))return null;let l=0,d=s.length-1;while(l<d){const u=Math.floor((l+d)/2),g=o(s[u]),p=u+1<=d?o(s[u+1]):1073741824;e<g?d=u-1:e>=p?l=u+1:(l=u,d=u)}return s[l]}_getEquivalentLineForOriginalLineNumber(e){const o=this._getLineChangeAtOrBeforeLineNumber(e,(e=>e.originalStartLineNumber));if(!o)return e;const s=o.originalStartLineNumber+(o.originalEndLineNumber>0?-1:0),l=o.modifiedStartLineNumber+(o.modifiedEndLineNumber>0?-1:0),d=o.originalEndLineNumber>0?o.originalEndLineNumber-o.originalStartLineNumber+1:0,u=o.modifiedEndLineNumber>0?o.modifiedEndLineNumber-o.modifiedStartLineNumber+1:0,g=e-s;return g<=d?l+Math.min(g,u):l+u-d+g}_getEquivalentLineForModifiedLineNumber(e){const o=this._getLineChangeAtOrBeforeLineNumber(e,(e=>e.modifiedStartLineNumber));if(!o)return e;const s=o.originalStartLineNumber+(o.originalEndLineNumber>0?-1:0),l=o.modifiedStartLineNumber+(o.modifiedEndLineNumber>0?-1:0),d=o.originalEndLineNumber>0?o.originalEndLineNumber-o.originalStartLineNumber+1:0,u=o.modifiedEndLineNumber>0?o.modifiedEndLineNumber-o.modifiedStartLineNumber+1:0,g=e-l;return g<=u?s+Math.min(g,d):s+d-u+g}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};ue.ONE_OVERVIEW_WIDTH=15,ue.ENTIRE_DIFF_OVERVIEW_WIDTH=30,ue.UPDATE_DIFF_DECORATIONS_DELAY=200,ue=diffEditorWidget_decorate([diffEditorWidget_param(3,ne.p),diffEditorWidget_param(4,Q.p),diffEditorWidget_param(5,M.i6),diffEditorWidget_param(6,J.TG),diffEditorWidget_param(7,w.$),diffEditorWidget_param(8,P.XE),diffEditorWidget_param(9,ee.lT),diffEditorWidget_param(10,te.i),diffEditorWidget_param(11,se.ek)],ue);class DiffEditorWidgetStyle extends _.JT{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const o=e.getColor(R.P6Y)||(e.getColor(R.ypS)||R.CzK).transparent(2),s=e.getColor(R.F9q)||(e.getColor(R.P4M)||R.keg).transparent(2),l=!o.equals(this._insertColor)||!s.equals(this._removeColor);return this._insertColor=o,this._removeColor=s,l}getEditorsDiffDecorations(e,o,s,l,d){d=d.sort(((e,o)=>e.afterLineNumber-o.afterLineNumber)),l=l.sort(((e,o)=>e.afterLineNumber-o.afterLineNumber));const u=this._getViewZones(e,l,d,s),g=this._getOriginalEditorDecorations(u,e,o,s),p=this._getModifiedEditorDecorations(u,e,o,s);return{original:{decorations:g.decorations,overviewZones:g.overviewZones,zones:u.original},modified:{decorations:p.decorations,overviewZones:p.overviewZones,zones:u.modified}}}}class ForeignViewZonesIterator{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class ViewZonesComputer{constructor(e,o,s,l,d){this._lineChanges=e,this._originalForeignVZ=o,this._modifiedForeignVZ=s,this._originalEditor=l,this._modifiedEditor=d}static _getViewLineCount(e,o,s){const l=e.getModel(),d=e._getViewModel();if(l&&d){const e=getViewRange(l,d,o,s);return e.endLineNumber-e.startLineNumber+1}return s-o+1}getViewZones(){const e=this._originalEditor.getOption(59),o=this._modifiedEditor.getOption(59),s=-1!==this._originalEditor.getOption(132).wrappingColumn,l=-1!==this._modifiedEditor.getOption(132).wrappingColumn,d=s||l,u=this._originalEditor.getModel(),g=this._originalEditor._getViewModel().coordinatesConverter,p=this._modifiedEditor._getViewModel().coordinatesConverter,m={original:[],modified:[]};let f=0,_=0,C=0,b=0,w=0,S=0;const sortMyViewZones=(e,o)=>e.afterLineNumber-o.afterLineNumber,addAndCombineIfPossible=(e,o)=>{if(null===o.domNode&&e.length>0){const s=e[e.length-1];if(s.afterLineNumber===o.afterLineNumber&&null===s.domNode)return void(s.heightInLines+=o.heightInLines)}e.push(o)},y=new ForeignViewZonesIterator(this._modifiedForeignVZ),L=new ForeignViewZonesIterator(this._originalForeignVZ);let x=1,k=1;for(let N=0,D=this._lineChanges.length;N<=D;N++){const s=N<D?this._lineChanges[N]:null;null!==s?(C=s.originalStartLineNumber+(s.originalEndLineNumber>0?-1:0),b=s.modifiedStartLineNumber+(s.modifiedEndLineNumber>0?-1:0),_=s.originalEndLineNumber>0?ViewZonesComputer._getViewLineCount(this._originalEditor,s.originalStartLineNumber,s.originalEndLineNumber):0,f=s.modifiedEndLineNumber>0?ViewZonesComputer._getViewLineCount(this._modifiedEditor,s.modifiedStartLineNumber,s.modifiedEndLineNumber):0,w=Math.max(s.originalStartLineNumber,s.originalEndLineNumber),S=Math.max(s.modifiedStartLineNumber,s.modifiedEndLineNumber)):(C+=1e7+_,b+=1e7+f,w=C,S=b);let l=[],E=[];if(d){let e;e=s?s.originalEndLineNumber>0?s.originalStartLineNumber-x:s.modifiedStartLineNumber-k:u.getLineCount()-x+1;for(let o=0;o<e;o++){const e=x+o,s=k+o,d=g.getModelLineViewLineCount(e),u=p.getModelLineViewLineCount(s);d<u?l.push({afterLineNumber:e,heightInLines:u-d,domNode:null,marginDomNode:null}):d>u&&E.push({afterLineNumber:s,heightInLines:d-u,domNode:null,marginDomNode:null})}s&&(x=(s.originalEndLineNumber>0?s.originalEndLineNumber:s.originalStartLineNumber)+1,k=(s.modifiedEndLineNumber>0?s.modifiedEndLineNumber:s.modifiedStartLineNumber)+1)}while(y.current&&y.current.afterLineNumber<=S){let e;e=y.current.afterLineNumber<=b?C-b+y.current.afterLineNumber:w;let d=null;s&&s.modifiedStartLineNumber<=y.current.afterLineNumber&&y.current.afterLineNumber<=s.modifiedEndLineNumber&&(d=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),l.push({afterLineNumber:e,heightInLines:y.current.height/o,domNode:null,marginDomNode:d}),y.advance()}while(L.current&&L.current.afterLineNumber<=w){let o;o=L.current.afterLineNumber<=C?b-C+L.current.afterLineNumber:S,E.push({afterLineNumber:o,heightInLines:L.current.height/e,domNode:null}),L.advance()}if(null!==s&&isChangeOrInsert(s)){const e=this._produceOriginalFromDiff(s,_,f);e&&l.push(e)}if(null!==s&&isChangeOrDelete(s)){const e=this._produceModifiedFromDiff(s,_,f);e&&E.push(e)}let T=0,I=0;l=l.sort(sortMyViewZones),E=E.sort(sortMyViewZones);while(T<l.length&&I<E.length){const e=l[T],o=E[I],s=e.afterLineNumber-C,d=o.afterLineNumber-b;s<d?(addAndCombineIfPossible(m.original,e),T++):d<s?(addAndCombineIfPossible(m.modified,o),I++):e.shouldNotShrink?(addAndCombineIfPossible(m.original,e),T++):o.shouldNotShrink?(addAndCombineIfPossible(m.modified,o),I++):e.heightInLines>=o.heightInLines?(e.heightInLines-=o.heightInLines,I++):(o.heightInLines-=e.heightInLines,T++)}while(T<l.length)addAndCombineIfPossible(m.original,l[T]),T++;while(I<E.length)addAndCombineIfPossible(m.modified,E[I]),I++}return{original:ViewZonesComputer._ensureDomNodes(m.original),modified:ViewZonesComputer._ensureDomNodes(m.modified)}}static _ensureDomNodes(e){return e.map((e=>(e.domNode||(e.domNode=createFakeLinesDiv()),e)))}}function createDecoration(e,o,s,l,d){return{range:new K.e(e,o,s,l),options:d}}const ge={charDelete:q.qx.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:q.qx.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:q.qx.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:q.qx.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:q.qx.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:q.qx.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+P.kS.asClassName(ce),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:q.qx.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:q.qx.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+P.kS.asClassName(de),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:q.qx.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class DiffEditorWidgetSideBySide extends DiffEditorWidgetStyle{constructor(e,o){super(e),this._disableSash=!1===o,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new p.g(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart((()=>this._onSashDragStart())),this._sash.onDidChange((e=>this._onSashDrag(e))),this._sash.onDidEnd((()=>this._onSashDragEnd())),this._sash.onDidReset((()=>this._onSashReset()))}setEnableSplitViewResizing(e){const o=!1===e;this._disableSash!==o&&(this._disableSash=o,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const o=this._dataSource.getWidth(),s=o-(this._dataSource.getOptions().renderOverviewRuler?ue.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let l=Math.floor((e||.5)*s);const d=Math.floor(.5*s);return l=this._disableSash?d:l||d,s>2*DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH?(l<DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH&&(l=DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH),l>s-DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH&&(l=s-DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH)):l=d,this._sashPosition!==l&&(this._sashPosition=l),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const o=this._dataSource.getWidth(),s=o-(this._dataSource.getOptions().renderOverviewRuler?ue.ENTIRE_DIFF_OVERVIEW_WIDTH:0),l=this.layout((this._startSashPosition+(e.currentX-e.startX))/s);this._sashRatio=l/s,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,o,s){const l=this._dataSource.getOriginalEditor(),d=this._dataSource.getModifiedEditor(),u=new SideBySideViewZonesComputer(e,o,s,l,d);return u.getViewZones()}_getOriginalEditorDecorations(e,o,s,l){const d=this._dataSource.getOriginalEditor(),u=String(this._removeColor),g={decorations:[],overviewZones:[]},p=d.getModel(),m=d._getViewModel();for(const f of o)if(isChangeOrDelete(f)){g.decorations.push({range:new K.e(f.originalStartLineNumber,1,f.originalEndLineNumber,1073741824),options:l?ge.lineDeleteWithSign:ge.lineDelete}),isChangeOrInsert(f)&&f.charChanges||g.decorations.push(createDecoration(f.originalStartLineNumber,1,f.originalEndLineNumber,1073741824,ge.charDeleteWholeLine));const e=getViewRange(p,m,f.originalStartLineNumber,f.originalEndLineNumber);if(g.overviewZones.push(new Z.EY(e.startLineNumber,e.endLineNumber,0,u)),f.charChanges)for(const o of f.charChanges)if(isChangeOrDelete(o))if(s)for(let e=o.originalStartLineNumber;e<=o.originalEndLineNumber;e++){let s,l;s=e===o.originalStartLineNumber?o.originalStartColumn:p.getLineFirstNonWhitespaceColumn(e),l=e===o.originalEndLineNumber?o.originalEndColumn:p.getLineLastNonWhitespaceColumn(e),g.decorations.push(createDecoration(e,s,e,l,ge.charDelete))}else g.decorations.push(createDecoration(o.originalStartLineNumber,o.originalStartColumn,o.originalEndLineNumber,o.originalEndColumn,ge.charDelete))}return g}_getModifiedEditorDecorations(e,o,s,l){const d=this._dataSource.getModifiedEditor(),u=String(this._insertColor),g={decorations:[],overviewZones:[]},p=d.getModel(),m=d._getViewModel();for(const f of o)if(isChangeOrInsert(f)){g.decorations.push({range:new K.e(f.modifiedStartLineNumber,1,f.modifiedEndLineNumber,1073741824),options:l?ge.lineInsertWithSign:ge.lineInsert}),isChangeOrDelete(f)&&f.charChanges||g.decorations.push(createDecoration(f.modifiedStartLineNumber,1,f.modifiedEndLineNumber,1073741824,ge.charInsertWholeLine));const e=getViewRange(p,m,f.modifiedStartLineNumber,f.modifiedEndLineNumber);if(g.overviewZones.push(new Z.EY(e.startLineNumber,e.endLineNumber,0,u)),f.charChanges)for(const o of f.charChanges)if(isChangeOrInsert(o))if(s)for(let e=o.modifiedStartLineNumber;e<=o.modifiedEndLineNumber;e++){let s,l;s=e===o.modifiedStartLineNumber?o.modifiedStartColumn:p.getLineFirstNonWhitespaceColumn(e),l=e===o.modifiedEndLineNumber?o.modifiedEndColumn:p.getLineLastNonWhitespaceColumn(e),g.decorations.push(createDecoration(e,s,e,l,ge.charInsert))}else g.decorations.push(createDecoration(o.modifiedStartLineNumber,o.modifiedStartColumn,o.modifiedEndLineNumber,o.modifiedEndColumn,ge.charInsert))}return g}}DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH=100;class SideBySideViewZonesComputer extends ViewZonesComputer{constructor(e,o,s,l,d){super(e,o,s,l,d)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,o,s){return s>o?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:s-o,domNode:null}:null}_produceModifiedFromDiff(e,o,s){return o>s?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:o-s,domNode:null}:null}}class DiffEditorWidgetInline extends DiffEditorWidgetStyle{constructor(e,o){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange((o=>{this._decorationsLeft!==o.decorationsLeft&&(this._decorationsLeft=o.decorationsLeft,e.relayoutEditors())})))}setEnableSplitViewResizing(e){}_getViewZones(e,o,s,l){const d=this._dataSource.getOriginalEditor(),u=this._dataSource.getModifiedEditor(),g=new InlineViewZonesComputer(e,o,s,d,u,l);return g.getViewZones()}_getOriginalEditorDecorations(e,o,s,l){const d=String(this._removeColor),u={decorations:[],overviewZones:[]},g=this._dataSource.getOriginalEditor(),p=g.getModel(),m=g._getViewModel();let f=0;for(const _ of o)if(isChangeOrDelete(_)){u.decorations.push({range:new K.e(_.originalStartLineNumber,1,_.originalEndLineNumber,1073741824),options:ge.lineDeleteMargin});while(f<e.modified.length){const o=e.modified[f];if(o.diff&&o.diff.originalStartLineNumber>=_.originalStartLineNumber)break;f++}let o=0;if(f<e.modified.length){const s=e.modified[f];s.diff&&s.diff.originalStartLineNumber===_.originalStartLineNumber&&s.diff.originalEndLineNumber===_.originalEndLineNumber&&s.diff.modifiedStartLineNumber===_.modifiedStartLineNumber&&s.diff.modifiedEndLineNumber===_.modifiedEndLineNumber&&(o=s.heightInLines)}const s=getViewRange(p,m,_.originalStartLineNumber,_.originalEndLineNumber);u.overviewZones.push(new Z.EY(s.startLineNumber,s.endLineNumber,o,d))}return u}_getModifiedEditorDecorations(e,o,s,l){const d=this._dataSource.getModifiedEditor(),u=String(this._insertColor),g={decorations:[],overviewZones:[]},p=d.getModel(),m=d._getViewModel();for(const f of o)if(isChangeOrInsert(f)){g.decorations.push({range:new K.e(f.modifiedStartLineNumber,1,f.modifiedEndLineNumber,1073741824),options:l?ge.lineInsertWithSign:ge.lineInsert});const e=getViewRange(p,m,f.modifiedStartLineNumber,f.modifiedEndLineNumber);if(g.overviewZones.push(new Z.EY(e.startLineNumber,e.endLineNumber,0,u)),f.charChanges){for(const o of f.charChanges)if(isChangeOrInsert(o))if(s)for(let e=o.modifiedStartLineNumber;e<=o.modifiedEndLineNumber;e++){let s,l;s=e===o.modifiedStartLineNumber?o.modifiedStartColumn:p.getLineFirstNonWhitespaceColumn(e),l=e===o.modifiedEndLineNumber?o.modifiedEndColumn:p.getLineLastNonWhitespaceColumn(e),g.decorations.push(createDecoration(e,s,e,l,ge.charInsert))}else g.decorations.push(createDecoration(o.modifiedStartLineNumber,o.modifiedStartColumn,o.modifiedEndLineNumber,o.modifiedEndColumn,ge.charInsert))}else g.decorations.push(createDecoration(f.modifiedStartLineNumber,1,f.modifiedEndLineNumber,1073741824,ge.charInsertWholeLine))}return g}layout(){return Math.max(5,this._decorationsLeft)}}class InlineViewZonesComputer extends ViewZonesComputer{constructor(e,o,s,l,d,u){super(e,o,s,l,d),this._originalModel=l.getModel(),this._renderIndicators=u,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,o,s){const l=document.createElement("div");return l.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:s,domNode:document.createElement("div"),marginDomNode:l}}_produceModifiedFromDiff(e,o,s){const l=document.createElement("div");l.className=`view-lines line-delete ${ae.S}`;const d=document.createElement("div");d.className="inline-deleted-margin-view-zone";const u={shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:o,minWidthInPx:0,domNode:l,marginDomNode:d,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let g=e.originalStartLineNumber;g<=e.originalEndLineNumber;g++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(g),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(u),u}_finalize(e){const o=this._modifiedEditor.getOptions(),s=this._modifiedEditor.getModel().getOptions().tabSize,l=o.get(44),d=o.get(29),u=l.typicalHalfwidthCharacterWidth,g=o.get(93),p=this._originalModel.mightContainNonBasicASCII(),m=this._originalModel.mightContainRTL(),f=o.get(59),_=o.get(131),b=_.decorationsWidth,w=o.get(105),S=o.get(88),y=o.get(83),L=o.get(45),x=this._lineBreaksComputer.finalize();let k=0;for(let N=0;N<this._pendingLineChange.length;N++){const o=this._pendingLineChange[N],_=this._pendingViewZones[N],D=_.domNode;(0,C.N)(D,l);const E=_.marginDomNode;(0,C.N)(E,l);const T=[];if(o.charChanges)for(const e of o.charChanges)isChangeOrDelete(e)&&T.push(new A.$t(new K.e(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),"char-delete",0));const I=T.length>0,M=(0,j.l$)(1e4);let R=0,P=0,O=null;for(let u=o.originalStartLineNumber;u<=o.originalEndLineNumber;u++){const g=u-o.originalStartLineNumber,C=this._originalModel.getLineTokens(u),N=C.getLineContent(),D=x[k++],A=Y.Kp.filter(T,u,1,N.length+1);if(D){let o=0;for(const e of D.breakOffsets){const u=C.sliceAndInflate(o,e,0),g=N.substring(o,e);R=Math.max(R,this._renderOriginalLine(P++,g,u,Y.Kp.extractWrapped(A,o,e),I,p,m,l,d,f,b,w,S,y,L,s,M,E)),o=e}O||(O=[]);while(O.length<g)O[O.length]=1;O[g]=D.breakOffsets.length,_.heightInLines+=D.breakOffsets.length-1;const x=document.createElement("div");x.className="gutter-delete",e.original.push({afterLineNumber:u,afterColumn:0,heightInLines:D.breakOffsets.length-1,domNode:createFakeLinesDiv(),marginDomNode:x})}else R=Math.max(R,this._renderOriginalLine(P++,N,C,A,I,p,m,l,d,f,b,w,S,y,L,s,M,E))}R+=g;const F=M.build(),B=he?he.createHTML(F):F;if(D.innerHTML=B,_.minWidthInPx=R*u,O){const e=o.originalEndLineNumber-o.originalStartLineNumber;while(O.length<=e)O[O.length]=1}_.diff.viewLineCounts=O}e.original.sort(((e,o)=>e.afterLineNumber-o.afterLineNumber))}_renderOriginalLine(e,o,s,l,d,u,g,p,m,f,_,C,b,w,S,y,L,x){L.appendASCIIString('<div class="view-line'),d||L.appendASCIIString(" char-delete"),L.appendASCIIString('" style="top:'),L.appendASCIIString(String(e*f)),L.appendASCIIString('px;width:1000000px;">');const k=A.wA.isBasicASCII(o,u),D=A.wA.containsRTL(o,k,g),E=(0,I.d1)(new I.IJ(p.isMonospace&&!m,p.canUseHalfwidthRightwardsArrow,o,!1,k,D,0,s,l,y,0,p.spaceWidth,p.middotWidth,p.wsmiddotWidth,C,b,w,S!==N.n0.OFF,null),L);if(L.appendASCIIString("</div>"),this._renderIndicators){const o=document.createElement("div");o.className=`delete-sign ${P.kS.asClassName(de)}`,o.setAttribute("style",`position:absolute;top:${e*f}px;width:${_}px;height:${f}px;right:0;`),x.appendChild(o)}return E.characterMapping.getAbsoluteOffset(E.characterMapping.length)}}function validateDiffWordWrap(e,o){return(0,N.NY)(e,o,["off","on","inherit"])}function isChangeOrInsert(e){return e.modifiedEndLineNumber>0}function isChangeOrDelete(e){return e.originalEndLineNumber>0}function createFakeLinesDiv(){const e=document.createElement("div");return e.className="diagonal-fill",e}function getViewRange(e,o,s,l){const d=e.getLineCount();return s=Math.min(d,Math.max(1,s)),l=Math.min(d,Math.max(1,l)),o.coordinatesConverter.convertModelRangeToViewRange(new K.e(s,e.getLineMinColumn(s),l,e.getLineMaxColumn(l)))}function validateDiffEditorOptions(e,o){return{enableSplitViewResizing:(0,N.O7)(e.enableSplitViewResizing,o.enableSplitViewResizing),renderSideBySide:(0,N.O7)(e.renderSideBySide,o.renderSideBySide),maxComputationTime:(0,N.Zc)(e.maxComputationTime,o.maxComputationTime,0,1073741824),maxFileSize:(0,N.Zc)(e.maxFileSize,o.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,N.O7)(e.ignoreTrimWhitespace,o.ignoreTrimWhitespace),renderIndicators:(0,N.O7)(e.renderIndicators,o.renderIndicators),originalEditable:(0,N.O7)(e.originalEditable,o.originalEditable),diffCodeLens:(0,N.O7)(e.diffCodeLens,o.diffCodeLens),renderOverviewRuler:(0,N.O7)(e.renderOverviewRuler,o.renderOverviewRuler),diffWordWrap:validateDiffWordWrap(e.diffWordWrap,o.diffWordWrap)}}function changedDiffEditorOptions(e,o){return{enableSplitViewResizing:e.enableSplitViewResizing!==o.enableSplitViewResizing,renderSideBySide:e.renderSideBySide!==o.renderSideBySide,maxComputationTime:e.maxComputationTime!==o.maxComputationTime,maxFileSize:e.maxFileSize!==o.maxFileSize,ignoreTrimWhitespace:e.ignoreTrimWhitespace!==o.ignoreTrimWhitespace,renderIndicators:e.renderIndicators!==o.renderIndicators,originalEditable:e.originalEditable!==o.originalEditable,diffCodeLens:e.diffCodeLens!==o.diffCodeLens,renderOverviewRuler:e.renderOverviewRuler!==o.renderOverviewRuler,diffWordWrap:e.diffWordWrap!==o.diffWordWrap}}(0,P.Ic)(((e,o)=>{const s=e.getColor(R.ypS);s&&o.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${s}; }`);const l=e.getColor(R.hzo)||s;l&&o.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${l}; }`);const d=e.getColor(R.j51)||l;d&&(o.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${d}; }`),o.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${d}; }`));const u=e.getColor(R.P4M);u&&o.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${u}; }`);const g=e.getColor(R.xi6)||u;g&&o.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${g}; }`);const p=e.getColor(R.zOm)||g;p&&(o.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${p}; }`),o.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${p}; }`));const m=e.getColor(R.XL$);m&&o.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${"hc"===e.type?"dashed":"solid"} ${m}; }`);const f=e.getColor(R.mHy);f&&o.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${"hc"===e.type?"dashed":"solid"} ${f}; }`);const _=e.getColor(R._wn);_&&o.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${_}; }`);const C=e.getColor(R.LLc);C&&o.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${C}; }`);const b=e.getColor(R.etL);b&&o.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ${b};\n\t\t\t}\n\t\t`);const w=e.getColor(R.ABB);w&&o.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ${w};\n\t\t\t}\n\t\t`);const S=e.getColor(R.ynu);S&&o.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ${S};\n\t\t\t}\n\t\t`);const y=e.getColor(R.L_t);o.addRule(`\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${y} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${y} 50%, ${y} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`)}))},5623:function(e,o,s){"use strict";s.d(o,{F:function(){return DiffNavigator}});var l=s(5146),d=s(4669),u=s(5976),g=s(6248),p=s(4314);const m={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class DiffNavigator extends u.JT{constructor(e,o={}){super(),this._onDidUpdate=this._register(new d.Q5),this._editor=e,this._options=g.jB(o,m,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose((()=>this.dispose()))),this._register(this._editor.onDidUpdateDiff((()=>this._onDiffUpdated()))),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition((e=>{this.ignoreSelectionChange||(this.nextIdx=-1)}))),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel((e=>{this.revealFirst=!0}))),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach((e=>{!this._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach((e=>{this.ranges.push({rhs:!0,range:new p.e(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})})):0===e.modifiedEndLineNumber?this.ranges.push({rhs:!0,range:new p.e(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new p.e(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber+1,1)})})),this.ranges.sort(((e,o)=>p.e.compareRangesUsingStarts(e.range,o.range))),this._onDidUpdate.fire(this)}_initIdx(e){let o=!1;const s=this._editor.getPosition();if(s){for(let l=0,d=this.ranges.length;l<d&&!o;l++){const d=this.ranges[l].range;s.isBeforeOrEqual(d.getStartPosition())&&(this.nextIdx=l+(e?0:-1),o=!0)}o||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}_move(e,o){if(l.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const s=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const e=s.range.getStartPosition();this._editor.setPosition(e),this._editor.revealRangeInCenter(s.range,o)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}},4527:function(e,o,s){"use strict";s.d(o,{H:function(){return S}});var l=s(6248),d=s(1640),u=s(9182),g=s(4565),p=s(8819),m=s(2065),f=s(9422),_=s(7781),C=s(1106),b=s(5638),w=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let S=class EmbeddedCodeEditorWidget extends u.Gm{constructor(e,o,s,l,d,u,g,p,m,f,_,C){super(e,Object.assign(Object.assign({},s.getRawOptions()),{overflowWidgetsDomNode:s.getOverflowWidgetsDomNode()}),{},l,d,u,g,p,m,f,_,C),this._parentEditor=s,this._overwriteOptions=o,super.updateOptions(this._overwriteOptions),this._register(s.onDidChangeConfiguration((e=>this._onParentConfigurationChanged(e))))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){l.jB(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};S=__decorate([__param(3,m.TG),__param(4,d.$),__param(5,g.Hy),__param(6,p.i6),__param(7,_.XE),__param(8,f.lT),__param(9,C.F),__param(10,b.c_),__param(11,w.p)],S)},1329:function(e,o,s){"use strict";s.d(o,{OY:function(){return ReplaceCommandThatSelectsText},Sj:function(){return ReplaceCommandWithoutChangingPosition},T4:function(){return ReplaceCommand},Uo:function(){return ReplaceCommandWithOffsetCursorState},hP:function(){return ReplaceCommandThatPreservesSelection}});var l=s(3860);class ReplaceCommand{constructor(e,o,s=!1){this._range=e,this._text=o,this.insertsAutoWhitespace=s}getEditOperations(e,o){o.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,o){const s=o.getInverseEditOperations(),d=s[0].range;return l.Y.fromPositions(d.getEndPosition())}}class ReplaceCommandThatSelectsText{constructor(e,o){this._range=e,this._text=o}getEditOperations(e,o){o.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,o){const s=o.getInverseEditOperations(),d=s[0].range;return l.Y.fromRange(d,0)}}class ReplaceCommandWithoutChangingPosition{constructor(e,o,s=!1){this._range=e,this._text=o,this.insertsAutoWhitespace=s}getEditOperations(e,o){o.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,o){const s=o.getInverseEditOperations(),d=s[0].range;return l.Y.fromPositions(d.getStartPosition())}}class ReplaceCommandWithOffsetCursorState{constructor(e,o,s,l,d=!1){this._range=e,this._text=o,this._columnDeltaOffset=l,this._lineNumberDeltaOffset=s,this.insertsAutoWhitespace=d}getEditOperations(e,o){o.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,o){const s=o.getInverseEditOperations(),d=s[0].range;return l.Y.fromPositions(d.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class ReplaceCommandThatPreservesSelection{constructor(e,o,s,l=!1){this._range=e,this._text=o,this._initialSelection=s,this._forceMoveMarkers=l,this._selectionId=null}getEditOperations(e,o){o.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=o.trackSelection(this._initialSelection)}computeCursorState(e,o){return o.getTrackedSelection(this._selectionId)}}},291:function(e,o,s){"use strict";s.d(o,{U:function(){return ShiftCommand}});var l=s(2677),d=s(7988),u=s(4314),g=s(3860),p=s(5638);const m=Object.create(null);function cachedStringRepeat(e,o){if(o<=0)return"";m[e]||(m[e]=["",e]);const s=m[e];for(let l=s.length;l<=o;l++)s[l]=s[l-1]+e;return s[o]}class ShiftCommand{constructor(e,o){this._opts=o,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,o,s,l,u){const g=d.i.visibleColumnFromColumn(e,o,s);if(u){const e=cachedStringRepeat(" ",l),o=d.i.prevIndentTabStop(g,l),s=o/l;return cachedStringRepeat(e,s)}{const e="\t",o=d.i.prevRenderTabStop(g,s),l=o/s;return cachedStringRepeat(e,l)}}static shiftIndent(e,o,s,l,u){const g=d.i.visibleColumnFromColumn(e,o,s);if(u){const e=cachedStringRepeat(" ",l),o=d.i.nextIndentTabStop(g,l),s=o/l;return cachedStringRepeat(e,s)}{const e="\t",o=d.i.nextRenderTabStop(g,s),l=o/s;return cachedStringRepeat(e,l)}}_addEditOperation(e,o,s){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(o,s):e.addEditOperation(o,s)}getEditOperations(e,o){const s=this._selection.startLineNumber;let g=this._selection.endLineNumber;1===this._selection.endColumn&&s!==g&&(g-=1);const{tabSize:m,indentSize:f,insertSpaces:_}=this._opts,C=s===g;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(s))&&(this._useLastEditRangeForCursorEndPosition=!0);let b=0,w=0;for(let S=s;S<=g;S++,b=w){w=0;const g=e.getLineContent(S);let y,L=l.LC(g);if((!this._opts.isUnshift||0!==g.length&&0!==L)&&(C||this._opts.isUnshift||0!==g.length)){if(-1===L&&(L=g.length),S>1){const o=d.i.visibleColumnFromColumn(g,L+1,m);if(o%f!==0&&e.isCheapToTokenize(S-1)){const o=p.zu.getEnterAction(this._opts.autoIndent,e,new u.e(S-1,e.getLineMaxColumn(S-1),S-1,e.getLineMaxColumn(S-1)));if(o){if(w=b,o.appendText)for(let e=0,s=o.appendText.length;e<s&&w<f;e++){if(32!==o.appendText.charCodeAt(e))break;w++}o.removeText&&(w=Math.max(0,w-o.removeText));for(let e=0;e<w;e++){if(0===L||32!==g.charCodeAt(L-1))break;L--}}}}this._opts.isUnshift&&0===L||(y=this._opts.isUnshift?ShiftCommand.unshiftIndent(g,L+1,m,f,_):ShiftCommand.shiftIndent(g,L+1,m,f,_),this._addEditOperation(o,new u.e(S,1,S,L+1),y),S!==s||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=L+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===e.getLineLength(s)&&(this._useLastEditRangeForCursorEndPosition=!0);const d=_?cachedStringRepeat(" ",f):"\t";for(let p=s;p<=g;p++){const g=e.getLineContent(p);let m=l.LC(g);if((!this._opts.isUnshift||0!==g.length&&0!==m)&&((C||this._opts.isUnshift||0!==g.length)&&(-1===m&&(m=g.length),!this._opts.isUnshift||0!==m)))if(this._opts.isUnshift){m=Math.min(m,f);for(let e=0;e<m;e++){const o=g.charCodeAt(e);if(9===o){m=e+1;break}}this._addEditOperation(o,new u.e(p,1,p,m+1),"")}else this._addEditOperation(o,new u.e(p,1,p,1),d),p!==s||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}this._selectionId=o.trackSelection(this._selection)}computeCursorState(e,o){if(this._useLastEditRangeForCursorEndPosition){const e=o.getInverseEditOperations()[0];return new g.Y(e.range.endLineNumber,e.range.endColumn,e.range.endLineNumber,e.range.endColumn)}const s=o.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const e=this._selection.startColumn,o=s.startColumn;return o<=e?s:0===s.getDirection()?new g.Y(s.startLineNumber,e,s.endLineNumber,s.endColumn):new g.Y(s.endLineNumber,s.endColumn,s.startLineNumber,e)}return s}}},4141:function(e,o,s){"use strict";s.d(o,{$J:function(){return filterValidationDecorations},Av:function(){return C},BH:function(){return k},Bb:function(){return ConfigurationChangedEvent},Bc:function(){return x},LJ:function(){return ComputeOptionsMemory},NY:function(){return stringSet},O7:function(){return boolean},Zc:function(){return clampedInt},d2:function(){return _},gk:function(){return EditorLayoutInfoComputer},hL:function(){return L},n0:function(){return EditorFontLigatures},qt:function(){return b},rk:function(){return ApplyUpdateResult},y0:function(){return f}});var l=s(3580),d=s(1432),u=s(270),g=s(9488),p=s(6248),m=s(2075);const f=8;class ConfigurationChangedEvent{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class ComputeOptionsMemory{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class BaseEditorOption{constructor(e,o,s,l){this.id=e,this.name=o,this.defaultValue=s,this.schema=l}applyUpdate(e,o){return applyUpdate(e,o)}compute(e,o,s){return s}}class ApplyUpdateResult{constructor(e,o){this.newValue=e,this.didChange=o}}function applyUpdate(e,o){if("object"!==typeof e||"object"!==typeof o||!e||!o)return new ApplyUpdateResult(o,e!==o);if(Array.isArray(e)||Array.isArray(o)){const s=Array.isArray(e)&&Array.isArray(o)&&g.fS(e,o);return new ApplyUpdateResult(o,s)}let s=!1;for(const l in o)if(o.hasOwnProperty(l)){const d=applyUpdate(e[l],o[l]);d.didChange&&(e[l]=d.newValue,s=!0)}return new ApplyUpdateResult(e,s)}class ComputedEditorOption{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,o){return applyUpdate(e,o)}validate(e){return this.defaultValue}}class SimpleEditorOption{constructor(e,o,s,l){this.id=e,this.name=o,this.defaultValue=s,this.schema=l}applyUpdate(e,o){return applyUpdate(e,o)}validate(e){return"undefined"===typeof e?this.defaultValue:e}compute(e,o,s){return s}}function boolean(e,o){return"undefined"===typeof e?o:"false"!==e&&Boolean(e)}class EditorBooleanOption extends SimpleEditorOption{constructor(e,o,s,l){"undefined"!==typeof l&&(l.type="boolean",l.default=s),super(e,o,s,l)}validate(e){return boolean(e,this.defaultValue)}}function clampedInt(e,o,s,l){if("undefined"===typeof e)return o;let d=parseInt(e,10);return isNaN(d)?o:(d=Math.max(s,d),d=Math.min(l,d),0|d)}class EditorIntOption extends SimpleEditorOption{constructor(e,o,s,l,d,u){"undefined"!==typeof u&&(u.type="integer",u.default=s,u.minimum=l,u.maximum=d),super(e,o,s,u),this.minimum=l,this.maximum=d}static clampedInt(e,o,s,l){return clampedInt(e,o,s,l)}validate(e){return EditorIntOption.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class EditorFloatOption extends SimpleEditorOption{constructor(e,o,s,l,d){"undefined"!==typeof d&&(d.type="number",d.default=s),super(e,o,s,d),this.validationFn=l}static clamp(e,o,s){return e<o?o:e>s?s:e}static float(e,o){if("number"===typeof e)return e;if("undefined"===typeof e)return o;const s=parseFloat(e);return isNaN(s)?o:s}validate(e){return this.validationFn(EditorFloatOption.float(e,this.defaultValue))}}class EditorStringOption extends SimpleEditorOption{static string(e,o){return"string"!==typeof e?o:e}constructor(e,o,s,l){"undefined"!==typeof l&&(l.type="string",l.default=s),super(e,o,s,l)}validate(e){return EditorStringOption.string(e,this.defaultValue)}}function stringSet(e,o,s){return"string"!==typeof e||-1===s.indexOf(e)?o:e}class EditorStringEnumOption extends SimpleEditorOption{constructor(e,o,s,l,d){"undefined"!==typeof d&&(d.type="string",d.enum=l,d.default=s),super(e,o,s,d),this._allowedValues=l}validate(e){return stringSet(e,this.defaultValue,this._allowedValues)}}class EditorEnumOption extends BaseEditorOption{constructor(e,o,s,l,d,u,g){"undefined"!==typeof g&&(g.type="string",g.enum=d,g.default=l),super(e,o,s,g),this._allowedValues=d,this._convert=u}validate(e){return"string"!==typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}}function _autoIndentFromString(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class EditorAccessibilitySupport extends BaseEditorOption{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[l.N("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),l.N("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),l.N("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:l.N("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,o,s){return 0===s?e.accessibilitySupport:s}}class EditorComments extends BaseEditorOption{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:l.N("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:l.N("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{insertSpace:boolean(o.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:boolean(o.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function _cursorBlinkingStyleFromString(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var _;function _cursorStyleFromString(e){switch(e){case"line":return _.Line;case"block":return _.Block;case"underline":return _.Underline;case"line-thin":return _.LineThin;case"block-outline":return _.BlockOutline;case"underline-thin":return _.UnderlineThin}}(function(e){e[e["Line"]=1]="Line",e[e["Block"]=2]="Block",e[e["Underline"]=3]="Underline",e[e["LineThin"]=4]="LineThin",e[e["BlockOutline"]=5]="BlockOutline",e[e["UnderlineThin"]=6]="UnderlineThin"})(_||(_={}));class EditorClassName extends ComputedEditorOption{constructor(){super(128)}compute(e,o,s){const l=["monaco-editor"];return o.get(33)&&l.push(o.get(33)),e.extraEditorClassName&&l.push(e.extraEditorClassName),"default"===o.get(66)?l.push("mouse-default"):"copy"===o.get(66)&&l.push("mouse-copy"),o.get(100)&&l.push("showUnused"),o.get(126)&&l.push("showDeprecated"),l.join(" ")}}class EditorEmptySelectionClipboard extends EditorBooleanOption{constructor(){super(32,"emptySelectionClipboard",!0,{description:l.N("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,o,s){return s&&e.emptySelectionClipboard}}class EditorFind extends BaseEditorOption{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:l.N("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[l.N("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),l.N("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),l.N("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:l.N("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[l.N("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),l.N("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),l.N("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:l.N("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:l.N("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:d.dz},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:l.N("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:l.N("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{cursorMoveOnType:boolean(o.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:"boolean"===typeof e.seedSearchStringFromSelection?e.seedSearchStringFromSelection?"always":"never":stringSet(o.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:"boolean"===typeof e.autoFindInSelection?e.autoFindInSelection?"always":"never":stringSet(o.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:boolean(o.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:boolean(o.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:boolean(o.loop,this.defaultValue.loop)}}}class EditorFontLigatures extends BaseEditorOption{constructor(){super(45,"fontLigatures",EditorFontLigatures.OFF,{anyOf:[{type:"boolean",description:l.N("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:l.N("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:l.N("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return"undefined"===typeof e?this.defaultValue:"string"===typeof e?"false"===e?EditorFontLigatures.OFF:"true"===e?EditorFontLigatures.ON:e:Boolean(e)?EditorFontLigatures.ON:EditorFontLigatures.OFF}}EditorFontLigatures.OFF='"liga" off, "calt" off',EditorFontLigatures.ON='"liga" on, "calt" on';class EditorFontInfo extends ComputedEditorOption{constructor(){super(44)}compute(e,o,s){return e.fontInfo}}class EditorFontSize extends SimpleEditorOption{constructor(){super(46,"fontSize",L.fontSize,{type:"number",minimum:6,maximum:100,default:L.fontSize,description:l.N("fontSize","Controls the font size in pixels.")})}validate(e){const o=EditorFloatOption.float(e,this.defaultValue);return 0===o?L.fontSize:EditorFloatOption.clamp(o,6,100)}compute(e,o,s){return e.fontInfo.fontSize}}class EditorFontWeight extends BaseEditorOption{constructor(){super(47,"fontWeight",L.fontWeight,{anyOf:[{type:"number",minimum:EditorFontWeight.MINIMUM_VALUE,maximum:EditorFontWeight.MAXIMUM_VALUE,errorMessage:l.N("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:EditorFontWeight.SUGGESTION_VALUES}],default:L.fontWeight,description:l.N("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return"normal"===e||"bold"===e?e:String(EditorIntOption.clampedInt(e,L.fontWeight,EditorFontWeight.MINIMUM_VALUE,EditorFontWeight.MAXIMUM_VALUE))}}EditorFontWeight.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],EditorFontWeight.MINIMUM_VALUE=1,EditorFontWeight.MAXIMUM_VALUE=1e3;class EditorGoToLocation extends BaseEditorOption{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},o={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[l.N("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),l.N("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),l.N("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},s=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(51,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:l.N("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:l.N("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},o),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:l.N("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},o),"editor.gotoLocation.multipleDeclarations":Object.assign({description:l.N("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},o),"editor.gotoLocation.multipleImplementations":Object.assign({description:l.N("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},o),"editor.gotoLocation.multipleReferences":Object.assign({description:l.N("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},o),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:s,description:l.N("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:s,description:l.N("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:s,description:l.N("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:s,description:l.N("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:s,description:l.N("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var o,s,l,d,u;if(!e||"object"!==typeof e)return this.defaultValue;const g=e;return{multiple:stringSet(g.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:null!==(o=g.multipleDefinitions)&&void 0!==o?o:stringSet(g.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:null!==(s=g.multipleTypeDefinitions)&&void 0!==s?s:stringSet(g.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:null!==(l=g.multipleDeclarations)&&void 0!==l?l:stringSet(g.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:null!==(d=g.multipleImplementations)&&void 0!==d?d:stringSet(g.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:null!==(u=g.multipleReferences)&&void 0!==u?u:stringSet(g.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:EditorStringOption.string(g.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:EditorStringOption.string(g.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:EditorStringOption.string(g.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:EditorStringOption.string(g.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:EditorStringOption.string(g.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class EditorHover extends BaseEditorOption{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(53,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:l.N("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:l.N("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:l.N("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:l.N("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{enabled:boolean(o.enabled,this.defaultValue.enabled),delay:EditorIntOption.clampedInt(o.delay,this.defaultValue.delay,0,1e4),sticky:boolean(o.sticky,this.defaultValue.sticky),above:boolean(o.above,this.defaultValue.above)}}}class EditorLayoutInfoComputer extends ComputedEditorOption{constructor(){super(131)}compute(e,o,s){return EditorLayoutInfoComputer.computeLayout(o,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const o=e.height/e.lineHeight,s=e.scrollBeyondLastLine?o-1:0,l=(e.viewLineCount+s)/(e.pixelRatio*e.height),d=Math.floor(e.viewLineCount/l);return{typicalViewportLineCount:o,extraLinesBeyondLastLine:s,desiredRatio:l,minimapLineCount:d}}static _computeMinimapLayout(e,o){const s=e.outerWidth,l=e.outerHeight,d=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(d*l),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:l};const u=o.stableMinimapLayoutInput,g=u&&e.outerHeight===u.outerHeight&&e.lineHeight===u.lineHeight&&e.typicalHalfwidthCharacterWidth===u.typicalHalfwidthCharacterWidth&&e.pixelRatio===u.pixelRatio&&e.scrollBeyondLastLine===u.scrollBeyondLastLine&&e.minimap.enabled===u.minimap.enabled&&e.minimap.side===u.minimap.side&&e.minimap.size===u.minimap.size&&e.minimap.showSlider===u.minimap.showSlider&&e.minimap.renderCharacters===u.minimap.renderCharacters&&e.minimap.maxColumn===u.minimap.maxColumn&&e.minimap.scale===u.minimap.scale&&e.verticalScrollbarWidth===u.verticalScrollbarWidth&&e.isViewportWrapping===u.isViewportWrapping,p=e.lineHeight,m=e.typicalHalfwidthCharacterWidth,_=e.scrollBeyondLastLine,C=e.minimap.renderCharacters;let b=d>=2?Math.round(2*e.minimap.scale):e.minimap.scale;const w=e.minimap.maxColumn,S=e.minimap.size,y=e.minimap.side,L=e.verticalScrollbarWidth,x=e.viewLineCount,k=e.remainingWidth,N=e.isViewportWrapping,D=C?2:3;let E=Math.floor(d*l);const T=E/d;let I=!1,A=!1,M=D*b,R=b/d,P=1;if("fill"===S||"fit"===S){const{typicalViewportLineCount:s,extraLinesBeyondLastLine:u,desiredRatio:m,minimapLineCount:f}=EditorLayoutInfoComputer.computeContainedMinimapLineCount({viewLineCount:x,scrollBeyondLastLine:_,height:l,lineHeight:p,pixelRatio:d}),C=x/f;if(C>1)I=!0,A=!0,b=1,M=1,R=b/d;else{let l=!1,f=b+1;if("fit"===S){const e=Math.ceil((x+u)*M);N&&g&&k<=o.stableFitRemainingWidth?(l=!0,f=o.stableFitMaxMinimapScale):l=e>E}if("fill"===S||l){I=!0;const l=b;M=Math.min(p*d,Math.max(1,Math.floor(1/m))),N&&g&&k<=o.stableFitRemainingWidth&&(f=o.stableFitMaxMinimapScale),b=Math.min(f,Math.max(1,Math.floor(M/D))),b>l&&(P=Math.min(2,b/l)),R=b/d/P,E=Math.ceil(Math.max(s,x+u)*M),N?(o.stableMinimapLayoutInput=e,o.stableFitRemainingWidth=k,o.stableFitMaxMinimapScale=b):(o.stableMinimapLayoutInput=null,o.stableFitRemainingWidth=0)}}}const O=Math.floor(w*R),F=Math.min(O,Math.max(0,Math.floor((k-L-2)*R/(m+R)))+f);let B=Math.floor(d*F);const W=B/d;B=Math.floor(B*P);const V=C?1:2,H="left"===y?0:s-F-L;return{renderMinimap:V,minimapLeft:H,minimapWidth:F,minimapHeightIsEditorHeight:I,minimapIsSampling:A,minimapScale:b,minimapLineHeight:M,minimapCanvasInnerWidth:B,minimapCanvasInnerHeight:E,minimapCanvasOuterWidth:W,minimapCanvasOuterHeight:T}}static computeLayout(e,o){const s=0|o.outerWidth,l=0|o.outerHeight,d=0|o.lineHeight,u=0|o.lineNumbersDigitCount,g=o.typicalHalfwidthCharacterWidth,p=o.maxDigitWidth,m=o.pixelRatio,f=o.viewLineCount,_=e.get(123),C="inherit"===_?e.get(122):_,b="inherit"===C?e.get(118):C,w=e.get(121),S=e.get(2),y=o.isDominatedByLongLines,L=e.get(50),x=0!==e.get(60).renderType,k=e.get(61),N=e.get(94),D=e.get(65),E=e.get(92),T=E.verticalScrollbarSize,I=E.verticalHasArrows,A=E.arrowSize,M=E.horizontalScrollbarSize,R=e.get(58),P=e.get(37);let O;if("string"===typeof R&&/^\d+(\.\d+)?ch$/.test(R)){const e=parseFloat(R.substr(0,R.length-2));O=EditorIntOption.clampedInt(e*g,0,0,1e3)}else O=EditorIntOption.clampedInt(R,0,0,1e3);P&&(O+=16);let F=0;if(x){const e=Math.max(u,k);F=Math.round(e*p)}let B=0;L&&(B=d);let W=0,V=W+B,H=V+F,z=H+O;const U=s-B-F-O;let K=!1,j=!1,G=-1;2!==S&&("inherit"===C&&y?(K=!0,j=!0):"on"===b||"bounded"===b?j=!0:"wordWrapColumn"===b&&(G=w));const q=EditorLayoutInfoComputer._computeMinimapLayout({outerWidth:s,outerHeight:l,lineHeight:d,typicalHalfwidthCharacterWidth:g,pixelRatio:m,scrollBeyondLastLine:N,minimap:D,verticalScrollbarWidth:T,viewLineCount:f,remainingWidth:U,isViewportWrapping:j},o.memory||new ComputeOptionsMemory);0!==q.renderMinimap&&0===q.minimapLeft&&(W+=q.minimapWidth,V+=q.minimapWidth,H+=q.minimapWidth,z+=q.minimapWidth);const Q=U-q.minimapWidth,Z=Math.max(1,Math.floor((Q-T-2)/g)),Y=I?A:0;return j&&(G=Math.max(1,Z),"bounded"===b&&(G=Math.min(G,w))),{width:s,height:l,glyphMarginLeft:W,glyphMarginWidth:B,lineNumbersLeft:V,lineNumbersWidth:F,decorationsLeft:H,decorationsWidth:O,contentLeft:z,contentWidth:Q,minimap:q,viewportColumn:Z,isWordWrapMinified:K,isViewportWrapping:j,wrappingColumn:G,verticalScrollbarWidth:T,horizontalScrollbarHeight:M,overviewRuler:{top:Y,width:T,height:l-2*Y,right:0}}}}class EditorLightbulb extends BaseEditorOption{constructor(){const e={enabled:!0};super(57,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:l.N("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{enabled:boolean(o.enabled,this.defaultValue.enabled)}}}class EditorInlayHints extends BaseEditorOption{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(127,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:l.N("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:l.N("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:l.N("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{enabled:boolean(o.enabled,this.defaultValue.enabled),fontSize:EditorIntOption.clampedInt(o.fontSize,this.defaultValue.fontSize,0,100),fontFamily:EditorStringOption.string(o.fontFamily,this.defaultValue.fontFamily)}}}class EditorLineHeight extends EditorFloatOption{constructor(){super(59,"lineHeight",L.lineHeight,(e=>EditorFloatOption.clamp(e,0,150)),{markdownDescription:l.N("lineHeight","Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")})}compute(e,o,s){return e.fontInfo.lineHeight}}class EditorMinimap extends BaseEditorOption{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(65,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:l.N("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[l.N("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),l.N("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),l.N("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:l.N("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:l.N("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:l.N("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:l.N("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:l.N("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:l.N("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{enabled:boolean(o.enabled,this.defaultValue.enabled),size:stringSet(o.size,this.defaultValue.size,["proportional","fill","fit"]),side:stringSet(o.side,this.defaultValue.side,["right","left"]),showSlider:stringSet(o.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:boolean(o.renderCharacters,this.defaultValue.renderCharacters),scale:EditorIntOption.clampedInt(o.scale,1,1,3),maxColumn:EditorIntOption.clampedInt(o.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function _multiCursorModifierFromString(e){return"ctrlCmd"===e?d.dz?"metaKey":"ctrlKey":"altKey"}class EditorPadding extends BaseEditorOption{constructor(){super(75,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:l.N("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:l.N("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{top:EditorIntOption.clampedInt(o.top,0,0,1e3),bottom:EditorIntOption.clampedInt(o.bottom,0,0,1e3)}}}class EditorParameterHints extends BaseEditorOption{constructor(){const e={enabled:!0,cycle:!1};super(76,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:l.N("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:l.N("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{enabled:boolean(o.enabled,this.defaultValue.enabled),cycle:boolean(o.cycle,this.defaultValue.cycle)}}}class EditorPixelRatio extends ComputedEditorOption{constructor(){super(129)}compute(e,o,s){return e.pixelRatio}}class EditorQuickSuggestions extends BaseEditorOption{constructor(){const e={other:!0,comments:!1,strings:!1};super(79,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:l.N("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:l.N("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:l.N("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:l.N("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if("boolean"===typeof e)return e;if(e&&"object"===typeof e){const o=e,s={other:boolean(o.other,this.defaultValue.other),comments:boolean(o.comments,this.defaultValue.comments),strings:boolean(o.strings,this.defaultValue.strings)};return!!(s.other&&s.comments&&s.strings)||!!(s.other||s.comments||s.strings)&&s}return this.defaultValue}}class EditorRenderLineNumbersOption extends BaseEditorOption{constructor(){super(60,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[l.N("lineNumbers.off","Line numbers are not rendered."),l.N("lineNumbers.on","Line numbers are rendered as absolute number."),l.N("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),l.N("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:l.N("lineNumbers","Controls the display of line numbers.")})}validate(e){let o=this.defaultValue.renderType,s=this.defaultValue.renderFn;return"undefined"!==typeof e&&("function"===typeof e?(o=4,s=e):o="interval"===e?3:"relative"===e?2:"on"===e?1:0),{renderType:o,renderFn:s}}}function filterValidationDecorations(e){const o=e.get(87);return"editable"===o?e.get(81):"on"!==o}class EditorRulers extends BaseEditorOption{constructor(){const e=[],o={type:"number",description:l.N("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(91,"rulers",e,{type:"array",items:{anyOf:[o,{type:["object"],properties:{column:o,color:{type:"string",description:l.N("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:l.N("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const o=[];for(let s of e)if("number"===typeof s)o.push({column:EditorIntOption.clampedInt(s,0,0,1e4),color:null});else if(s&&"object"===typeof s){const e=s;o.push({column:EditorIntOption.clampedInt(e.column,0,0,1e4),color:e.color})}return o.sort(((e,o)=>e.column-o.column)),o}return this.defaultValue}}function _scrollbarVisibilityFromString(e,o){if("string"!==typeof e)return o;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}class EditorScrollbar extends BaseEditorOption{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(92,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[l.N("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),l.N("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),l.N("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:l.N("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[l.N("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),l.N("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),l.N("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:l.N("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:l.N("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:l.N("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:l.N("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e,s=EditorIntOption.clampedInt(o.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),l=EditorIntOption.clampedInt(o.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:EditorIntOption.clampedInt(o.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:_scrollbarVisibilityFromString(o.vertical,this.defaultValue.vertical),horizontal:_scrollbarVisibilityFromString(o.horizontal,this.defaultValue.horizontal),useShadows:boolean(o.useShadows,this.defaultValue.useShadows),verticalHasArrows:boolean(o.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:boolean(o.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:boolean(o.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:boolean(o.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:s,horizontalSliderSize:EditorIntOption.clampedInt(o.horizontalSliderSize,s,0,1e3),verticalScrollbarSize:l,verticalSliderSize:EditorIntOption.clampedInt(o.verticalSliderSize,l,0,1e3),scrollByPage:boolean(o.scrollByPage,this.defaultValue.scrollByPage)}}}const C="inUntrustedWorkspace",b={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class UnicodeHighlight extends BaseEditorOption{constructor(){const e={nonBasicASCII:C,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:C,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(113,"unicodeHighlight",e,{[b.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,C],default:e.nonBasicASCII,description:l.N("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[b.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:l.N("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[b.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:l.N("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[b.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,C],default:e.includeComments,description:l.N("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[b.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,C],default:e.includeStrings,description:l.N("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to unicode highlighting.")},[b.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:l.N("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[b.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:l.N("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,o){let s=!1;o.allowedCharacters&&(p.fS(e.allowedCharacters,o.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:o.allowedCharacters}),s=!0)),o.allowedLocales&&(p.fS(e.allowedLocales,o.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:o.allowedLocales}),s=!0));const l=super.applyUpdate(e,o);return s?new ApplyUpdateResult(l.newValue,!0):l}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{nonBasicASCII:primitiveSet(o.nonBasicASCII,C,[!0,!1,C]),invisibleCharacters:boolean(o.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:boolean(o.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:primitiveSet(o.includeComments,C,[!0,!1,C]),includeStrings:primitiveSet(o.includeStrings,C,[!0,!1,C]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,o){if("object"!==typeof e||!e)return o;const s={};for(const[l,d]of Object.entries(e))!0===d&&(s[l]=!0);return s}}class InlineEditorSuggest extends BaseEditorOption{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(55,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:l.N("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{enabled:boolean(o.enabled,this.defaultValue.enabled),mode:stringSet(o.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class BracketPairColorization extends BaseEditorOption{constructor(){const e={enabled:m.D.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:l.N("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{enabled:boolean(o.enabled,this.defaultValue.enabled)}}}class GuideOptions extends BaseEditorOption{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[l.N("editor.guides.bracketPairs.true","Enables bracket pair guides."),l.N("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),l.N("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:l.N("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[l.N("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),l.N("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),l.N("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:l.N("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:l.N("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:l.N("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:l.N("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{bracketPairs:primitiveSet(o.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:primitiveSet(o.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:boolean(o.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:boolean(o.indentation,this.defaultValue.indentation),highlightActiveIndentation:boolean(o.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function primitiveSet(e,o,s){const l=s.indexOf(e);return-1===l?o:s[l]}class EditorSuggest extends BaseEditorOption{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(106,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[l.N("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),l.N("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:l.N("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:l.N("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:l.N("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:l.N("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:l.N("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:l.N("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:l.N("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:l.N("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:l.N("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:l.N("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:l.N("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:l.N("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{insertMode:stringSet(o.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:boolean(o.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:boolean(o.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:boolean(o.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:boolean(o.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:boolean(o.showIcons,this.defaultValue.showIcons),showStatusBar:boolean(o.showStatusBar,this.defaultValue.showStatusBar),preview:boolean(o.preview,this.defaultValue.preview),previewMode:stringSet(o.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:boolean(o.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:boolean(o.showMethods,this.defaultValue.showMethods),showFunctions:boolean(o.showFunctions,this.defaultValue.showFunctions),showConstructors:boolean(o.showConstructors,this.defaultValue.showConstructors),showDeprecated:boolean(o.showDeprecated,this.defaultValue.showDeprecated),showFields:boolean(o.showFields,this.defaultValue.showFields),showVariables:boolean(o.showVariables,this.defaultValue.showVariables),showClasses:boolean(o.showClasses,this.defaultValue.showClasses),showStructs:boolean(o.showStructs,this.defaultValue.showStructs),showInterfaces:boolean(o.showInterfaces,this.defaultValue.showInterfaces),showModules:boolean(o.showModules,this.defaultValue.showModules),showProperties:boolean(o.showProperties,this.defaultValue.showProperties),showEvents:boolean(o.showEvents,this.defaultValue.showEvents),showOperators:boolean(o.showOperators,this.defaultValue.showOperators),showUnits:boolean(o.showUnits,this.defaultValue.showUnits),showValues:boolean(o.showValues,this.defaultValue.showValues),showConstants:boolean(o.showConstants,this.defaultValue.showConstants),showEnums:boolean(o.showEnums,this.defaultValue.showEnums),showEnumMembers:boolean(o.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:boolean(o.showKeywords,this.defaultValue.showKeywords),showWords:boolean(o.showWords,this.defaultValue.showWords),showColors:boolean(o.showColors,this.defaultValue.showColors),showFiles:boolean(o.showFiles,this.defaultValue.showFiles),showReferences:boolean(o.showReferences,this.defaultValue.showReferences),showFolders:boolean(o.showFolders,this.defaultValue.showFolders),showTypeParameters:boolean(o.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:boolean(o.showSnippets,this.defaultValue.showSnippets),showUsers:boolean(o.showUsers,this.defaultValue.showUsers),showIssues:boolean(o.showIssues,this.defaultValue.showIssues)}}}class SmartSelect extends BaseEditorOption{constructor(){super(102,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:l.N("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return e&&"object"===typeof e?{selectLeadingAndTrailingWhitespace:boolean(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}:this.defaultValue}}class EditorTabFocusMode extends ComputedEditorOption{constructor(){super(130)}compute(e,o,s){const l=o.get(81);return!!l||e.tabFocusMode}}function _wrappingIndentFromString(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class EditorWrappingInfoComputer extends ComputedEditorOption{constructor(){super(132)}compute(e,o,s){const l=o.get(131);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:l.isWordWrapMinified,isViewportWrapping:l.isViewportWrapping,wrappingColumn:l.wrappingColumn}}}const w="Consolas, 'Courier New', monospace",S="Menlo, Monaco, 'Courier New', monospace",y="'Droid Sans Mono', 'monospace', monospace",L={fontFamily:d.dz?S:d.IJ?y:w,fontWeight:"normal",fontSize:d.dz?12:14,lineHeight:0,letterSpacing:0},x=[];function register(e){return x[e.id]=e,e}const k={acceptSuggestionOnCommitCharacter:register(new EditorBooleanOption(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:l.N("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:register(new EditorStringEnumOption(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",l.N("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:l.N("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:register(new EditorAccessibilitySupport),accessibilityPageSize:register(new EditorIntOption(3,"accessibilityPageSize",10,1,1073741824,{description:l.N("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:register(new EditorStringOption(4,"ariaLabel",l.N("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:register(new EditorStringEnumOption(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",l.N("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),l.N("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:l.N("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:register(new EditorStringEnumOption(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",l.N("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:l.N("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:register(new EditorStringEnumOption(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",l.N("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:l.N("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:register(new EditorStringEnumOption(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",l.N("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),l.N("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:l.N("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:register(new EditorEnumOption(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],_autoIndentFromString,{enumDescriptions:[l.N("editor.autoIndent.none","The editor will not insert indentation automatically."),l.N("editor.autoIndent.keep","The editor will keep the current line's indentation."),l.N("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),l.N("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),l.N("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:l.N("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:register(new EditorBooleanOption(10,"automaticLayout",!1)),autoSurround:register(new EditorStringEnumOption(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[l.N("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),l.N("editor.autoSurround.quotes","Surround with quotes but not brackets."),l.N("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:l.N("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:register(new BracketPairColorization),bracketPairGuides:register(new GuideOptions),stickyTabStops:register(new EditorBooleanOption(104,"stickyTabStops",!1,{description:l.N("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:register(new EditorBooleanOption(14,"codeLens",!0,{description:l.N("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:register(new EditorStringOption(15,"codeLensFontFamily","",{description:l.N("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:register(new EditorIntOption(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:l.N("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:register(new EditorBooleanOption(17,"colorDecorators",!0,{description:l.N("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:register(new EditorBooleanOption(18,"columnSelection",!1,{description:l.N("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:register(new EditorComments),contextmenu:register(new EditorBooleanOption(20,"contextmenu",!0)),copyWithSyntaxHighlighting:register(new EditorBooleanOption(21,"copyWithSyntaxHighlighting",!0,{description:l.N("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:register(new EditorEnumOption(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],_cursorBlinkingStyleFromString,{description:l.N("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:register(new EditorBooleanOption(23,"cursorSmoothCaretAnimation",!1,{description:l.N("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:register(new EditorEnumOption(24,"cursorStyle",_.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],_cursorStyleFromString,{description:l.N("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:register(new EditorIntOption(25,"cursorSurroundingLines",0,0,1073741824,{description:l.N("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:register(new EditorStringEnumOption(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[l.N("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),l.N("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:l.N("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:register(new EditorIntOption(27,"cursorWidth",0,0,1073741824,{markdownDescription:l.N("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:register(new EditorBooleanOption(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:register(new EditorBooleanOption(29,"disableMonospaceOptimizations",!1)),domReadOnly:register(new EditorBooleanOption(30,"domReadOnly",!1)),dragAndDrop:register(new EditorBooleanOption(31,"dragAndDrop",!0,{description:l.N("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:register(new EditorEmptySelectionClipboard),extraEditorClassName:register(new EditorStringOption(33,"extraEditorClassName","")),fastScrollSensitivity:register(new EditorFloatOption(34,"fastScrollSensitivity",5,(e=>e<=0?5:e),{markdownDescription:l.N("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:register(new EditorFind),fixedOverflowWidgets:register(new EditorBooleanOption(36,"fixedOverflowWidgets",!1)),folding:register(new EditorBooleanOption(37,"folding",!0,{description:l.N("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:register(new EditorStringEnumOption(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[l.N("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),l.N("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:l.N("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:register(new EditorBooleanOption(39,"foldingHighlight",!0,{description:l.N("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:register(new EditorBooleanOption(40,"foldingImportsByDefault",!1,{description:l.N("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:register(new EditorIntOption(41,"foldingMaximumRegions",5e3,10,65e3,{description:l.N("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:register(new EditorBooleanOption(42,"unfoldOnClickAfterEndOfLine",!1,{description:l.N("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:register(new EditorStringOption(43,"fontFamily",L.fontFamily,{description:l.N("fontFamily","Controls the font family.")})),fontInfo:register(new EditorFontInfo),fontLigatures2:register(new EditorFontLigatures),fontSize:register(new EditorFontSize),fontWeight:register(new EditorFontWeight),formatOnPaste:register(new EditorBooleanOption(48,"formatOnPaste",!1,{description:l.N("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:register(new EditorBooleanOption(49,"formatOnType",!1,{description:l.N("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:register(new EditorBooleanOption(50,"glyphMargin",!0,{description:l.N("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:register(new EditorGoToLocation),hideCursorInOverviewRuler:register(new EditorBooleanOption(52,"hideCursorInOverviewRuler",!1,{description:l.N("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:register(new EditorHover),inDiffEditor:register(new EditorBooleanOption(54,"inDiffEditor",!1)),letterSpacing:register(new EditorFloatOption(56,"letterSpacing",L.letterSpacing,(e=>EditorFloatOption.clamp(e,-5,20)),{description:l.N("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:register(new EditorLightbulb),lineDecorationsWidth:register(new SimpleEditorOption(58,"lineDecorationsWidth",10)),lineHeight:register(new EditorLineHeight),lineNumbers:register(new EditorRenderLineNumbersOption),lineNumbersMinChars:register(new EditorIntOption(61,"lineNumbersMinChars",5,1,300)),linkedEditing:register(new EditorBooleanOption(62,"linkedEditing",!1,{description:l.N("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:register(new EditorBooleanOption(63,"links",!0,{description:l.N("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:register(new EditorStringEnumOption(64,"matchBrackets","always",["always","near","never"],{description:l.N("matchBrackets","Highlight matching brackets.")})),minimap:register(new EditorMinimap),mouseStyle:register(new EditorStringEnumOption(66,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:register(new EditorFloatOption(67,"mouseWheelScrollSensitivity",1,(e=>0===e?1:e),{markdownDescription:l.N("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:register(new EditorBooleanOption(68,"mouseWheelZoom",!1,{markdownDescription:l.N("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:register(new EditorBooleanOption(69,"multiCursorMergeOverlapping",!0,{description:l.N("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:register(new EditorEnumOption(70,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],_multiCursorModifierFromString,{markdownEnumDescriptions:[l.N("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),l.N("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:l.N({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:register(new EditorStringEnumOption(71,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[l.N("multiCursorPaste.spread","Each cursor pastes a single line of the text."),l.N("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:l.N("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:register(new EditorBooleanOption(72,"occurrencesHighlight",!0,{description:l.N("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:register(new EditorBooleanOption(73,"overviewRulerBorder",!0,{description:l.N("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:register(new EditorIntOption(74,"overviewRulerLanes",3,0,3)),padding:register(new EditorPadding),parameterHints:register(new EditorParameterHints),peekWidgetDefaultFocus:register(new EditorStringEnumOption(77,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[l.N("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),l.N("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:l.N("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:register(new EditorBooleanOption(78,"definitionLinkOpensInPeek",!1,{description:l.N("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:register(new EditorQuickSuggestions),quickSuggestionsDelay:register(new EditorIntOption(80,"quickSuggestionsDelay",10,0,1073741824,{description:l.N("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:register(new EditorBooleanOption(81,"readOnly",!1)),renameOnType:register(new EditorBooleanOption(82,"renameOnType",!1,{description:l.N("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:l.N("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:register(new EditorBooleanOption(83,"renderControlCharacters",!0,{description:l.N("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:register(new EditorBooleanOption(84,"renderFinalNewline",!0,{description:l.N("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:register(new EditorStringEnumOption(85,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",l.N("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:l.N("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:register(new EditorBooleanOption(86,"renderLineHighlightOnlyWhenFocus",!1,{description:l.N("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:register(new EditorStringEnumOption(87,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:register(new EditorStringEnumOption(88,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",l.N("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),l.N("renderWhitespace.selection","Render whitespace characters only on selected text."),l.N("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:l.N("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:register(new EditorIntOption(89,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:register(new EditorBooleanOption(90,"roundedSelection",!0,{description:l.N("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:register(new EditorRulers),scrollbar:register(new EditorScrollbar),scrollBeyondLastColumn:register(new EditorIntOption(93,"scrollBeyondLastColumn",5,0,1073741824,{description:l.N("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:register(new EditorBooleanOption(94,"scrollBeyondLastLine",!0,{description:l.N("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:register(new EditorBooleanOption(95,"scrollPredominantAxis",!0,{description:l.N("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:register(new EditorBooleanOption(96,"selectionClipboard",!0,{description:l.N("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:d.IJ})),selectionHighlight:register(new EditorBooleanOption(97,"selectionHighlight",!0,{description:l.N("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:register(new EditorBooleanOption(98,"selectOnLineNumbers",!0)),showFoldingControls:register(new EditorStringEnumOption(99,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[l.N("showFoldingControls.always","Always show the folding controls."),l.N("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:l.N("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:register(new EditorBooleanOption(100,"showUnused",!0,{description:l.N("showUnused","Controls fading out of unused code.")})),showDeprecated:register(new EditorBooleanOption(126,"showDeprecated",!0,{description:l.N("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:register(new EditorInlayHints),snippetSuggestions:register(new EditorStringEnumOption(101,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[l.N("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),l.N("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),l.N("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),l.N("snippetSuggestions.none","Do not show snippet suggestions.")],description:l.N("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:register(new SmartSelect),smoothScrolling:register(new EditorBooleanOption(103,"smoothScrolling",!1,{description:l.N("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:register(new EditorIntOption(105,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:register(new EditorSuggest),inlineSuggest:register(new InlineEditorSuggest),suggestFontSize:register(new EditorIntOption(107,"suggestFontSize",0,0,1e3,{markdownDescription:l.N("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:register(new EditorIntOption(108,"suggestLineHeight",0,0,1e3,{markdownDescription:l.N("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:register(new EditorBooleanOption(109,"suggestOnTriggerCharacters",!0,{description:l.N("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:register(new EditorStringEnumOption(110,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[l.N("suggestSelection.first","Always select the first suggestion."),l.N("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),l.N("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:l.N("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:register(new EditorStringEnumOption(111,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[l.N("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),l.N("tabCompletion.off","Disable tab completions."),l.N("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:l.N("tabCompletion","Enables tab completions.")})),tabIndex:register(new EditorIntOption(112,"tabIndex",0,-1,1073741824)),unicodeHighlight:register(new UnicodeHighlight),unusualLineTerminators:register(new EditorStringEnumOption(114,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[l.N("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),l.N("unusualLineTerminators.off","Unusual line terminators are ignored."),l.N("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:l.N("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:register(new EditorBooleanOption(115,"useShadowDOM",!0)),useTabStops:register(new EditorBooleanOption(116,"useTabStops",!0,{description:l.N("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:register(new EditorStringOption(117,"wordSeparators",u.vu,{description:l.N("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:register(new EditorStringEnumOption(118,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[l.N("wordWrap.off","Lines will never wrap."),l.N("wordWrap.on","Lines will wrap at the viewport width."),l.N({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),l.N({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:l.N({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:register(new EditorStringOption(119,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:register(new EditorStringOption(120,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:register(new EditorIntOption(121,"wordWrapColumn",80,1,1073741824,{markdownDescription:l.N({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:register(new EditorStringEnumOption(122,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:register(new EditorStringEnumOption(123,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:register(new EditorEnumOption(124,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],_wrappingIndentFromString,{enumDescriptions:[l.N("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),l.N("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),l.N("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),l.N("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:l.N("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:register(new EditorStringEnumOption(125,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[l.N("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),l.N("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:l.N("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:register(new EditorClassName),pixelRatio:register(new EditorPixelRatio),tabFocusMode:register(new EditorTabFocusMode),layoutInfo:register(new EditorLayoutInfoComputer),wrappingInfo:register(new EditorWrappingInfoComputer)}},2334:function(e,o,s){"use strict";s.d(o,{C:function(){return d}});var l=s(4669);const d=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new l.Q5,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}}},7374:function(e,o,s){"use strict";s.d(o,{E4:function(){return BareFontInfo},pR:function(){return FontInfo}});var l=s(1432),d=s(2334);const u=l.dz?1.5:1.35,g=8;class BareFontInfo{constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=0|e.lineHeight,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,o,s){const l=e.get(43),d=e.get(47),u=e.get(46),g=e.get(45),p=e.get(59),m=e.get(56);return BareFontInfo._create(l,d,u,g,p,m,o,s)}static _create(e,o,s,l,p,m,f,_){0===p?p=u*s:p<g&&(p*=s),p=Math.round(p),p<g&&(p=g);const C=1+(_?0:.1*d.C.getZoomLevel());return s*=C,p*=C,new BareFontInfo({pixelRatio:f,fontFamily:e,fontWeight:o,fontSize:s,fontFeatureSettings:l,lineHeight:p,letterSpacing:m})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(e){const o=BareFontInfo._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${o}, ${e}`:o}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const p=1;class FontInfo extends BareFontInfo{constructor(e,o){super(e),this._editorStylingBrand=void 0,this.version=p,this.isTrusted=o,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}},4906:function(e,o,s){"use strict";s.d(o,{N:function(){return CharacterClassifier},q:function(){return CharacterSet}});var l=s(5427);class CharacterClassifier{constructor(e){const o=(0,l.K)(e);this._defaultValue=o,this._asciiMap=CharacterClassifier._createAsciiMap(o),this._map=new Map}static _createAsciiMap(e){const o=new Uint8Array(256);for(let s=0;s<256;s++)o[s]=e;return o}set(e,o){const s=(0,l.K)(o);e>=0&&e<256?this._asciiMap[e]=s:this._map.set(e,s)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class CharacterSet{constructor(){this._actual=new CharacterClassifier(0)}add(e){this._actual.set(e,1)}has(e){return 1===this._actual.get(e)}}},7988:function(e,o,s){"use strict";s.d(o,{i:function(){return CursorColumns}});var l=s(2677);class CursorColumns{static _nextVisibleColumn(e,o,s){return 9===e?CursorColumns.nextRenderTabStop(o,s):l.K7(e)||l.C8(e)?o+2:o+1}static visibleColumnFromColumn(e,o,s){const d=Math.min(o-1,e.length),u=e.substring(0,d),g=new l.W1(u);let p=0;while(!g.eol()){const e=l.ZH(u,d,g.offset);g.nextGraphemeLength(),p=this._nextVisibleColumn(e,p,s)}return p}static columnFromVisibleColumn(e,o,s){if(o<=0)return 1;const d=e.length,u=new l.W1(e);let g=0,p=1;while(!u.eol()){const m=l.ZH(e,d,u.offset);u.nextGraphemeLength();const f=this._nextVisibleColumn(m,g,s),_=u.offset+1;if(f>=o){const e=o-g,s=f-o;return s<e?_:p}g=f,p=_}return d+1}static nextRenderTabStop(e,o){return e+o-e%o}static nextIndentTabStop(e,o){return e+o-e%o}static prevRenderTabStop(e,o){return Math.max(0,e-1-(e-1)%o)}static prevIndentTabStop(e,o){return Math.max(0,e-1-(e-1)%o)}}},9386:function(e,o,s){"use strict";s.d(o,{h:function(){return EditOperation}});var l=s(4314);class EditOperation{static insert(e,o){return{range:new l.e(e.lineNumber,e.column,e.lineNumber,e.column),text:o,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,o){return{range:e,text:o}}static replaceMove(e,o){return{range:e,text:o,forceMoveMarkers:!0}}}},8625:function(e,o,s){"use strict";s.d(o,{CE:function(){return q},DD:function(){return D},DS:function(){return te},Dl:function(){return I},HV:function(){return ce},IO:function(){return W},Jn:function(){return ne},Kh:function(){return p},L7:function(){return le},Mm:function(){return m},N5:function(){return B},Qb:function(){return se},Re:function(){return U},TC:function(){return T},To:function(){return ae},UP:function(){return Q},Vs:function(){return G},YF:function(){return oe},Ym:function(){return x},eS:function(){return K},e_:function(){return M},f9:function(){return de},fY:function(){return S},hw:function(){return k},kp:function(){return P},lK:function(){return z},lS:function(){return ie},m$:function(){return ee},m1:function(){return Y},m3:function(){return re},m9:function(){return H},n0:function(){return w},oV:function(){return X},r0:function(){return Z},tR:function(){return L},ts:function(){return J},x3:function(){return F},zJ:function(){return j},zk:function(){return E},zu:function(){return O},zw:function(){return A}});var l=s(3580),d=s(1264),u=s(3910),g=s(7781);const p=(0,u.P6G)("editor.lineHighlightBackground",{dark:null,light:null,hc:null},l.N("lineHighlight","Background color for the highlight of line at the cursor position.")),m=(0,u.P6G)("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},l.N("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),f=(0,u.P6G)("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},l.N("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),_=(0,u.P6G)("editor.rangeHighlightBorder",{dark:null,light:null,hc:u.xL1},l.N("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),C=(0,u.P6G)("editor.symbolHighlightBackground",{dark:u.MUv,light:u.MUv,hc:null},l.N("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),b=(0,u.P6G)("editor.symbolHighlightBorder",{dark:null,light:null,hc:u.xL1},l.N("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),w=(0,u.P6G)("editorCursor.foreground",{dark:"#AEAFAD",light:d.Il.black,hc:d.Il.white},l.N("caret","Color of the editor cursor.")),S=(0,u.P6G)("editorCursor.background",null,l.N("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),y=(0,u.P6G)("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},l.N("editorWhitespaces","Color of whitespace characters in the editor.")),L=(0,u.P6G)("editorIndentGuide.background",{dark:y,light:y,hc:y},l.N("editorIndentGuides","Color of the editor indentation guides.")),x=(0,u.P6G)("editorIndentGuide.activeBackground",{dark:y,light:y,hc:y},l.N("editorActiveIndentGuide","Color of the active editor indentation guides.")),k=(0,u.P6G)("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:d.Il.white},l.N("editorLineNumbers","Color of editor line numbers.")),N=(0,u.P6G)("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:u.xL1},l.N("editorActiveLineNumber","Color of editor active line number"),!1,l.N("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),D=(0,u.P6G)("editorLineNumber.activeForeground",{dark:N,light:N,hc:N},l.N("editorActiveLineNumber","Color of editor active line number")),E=(0,u.P6G)("editorRuler.foreground",{dark:"#5A5A5A",light:d.Il.lightgrey,hc:d.Il.white},l.N("editorRuler","Color of the editor rulers.")),T=((0,u.P6G)("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},l.N("editorCodeLensForeground","Foreground color of editor CodeLens")),(0,u.P6G)("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},l.N("editorBracketMatchBackground","Background color behind matching brackets"))),I=(0,u.P6G)("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:u.lRK},l.N("editorBracketMatchBorder","Color for matching brackets boxes")),A=(0,u.P6G)("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},l.N("editorOverviewRulerBorder","Color of the overview ruler border.")),M=(0,u.P6G)("editorOverviewRuler.background",null,l.N("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),R=(0,u.P6G)("editorGutter.background",{dark:u.cvW,light:u.cvW,hc:u.cvW},l.N("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),P=(0,u.P6G)("editorUnnecessaryCode.border",{dark:null,light:null,hc:d.Il.fromHex("#fff").transparent(.8)},l.N("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),O=(0,u.P6G)("editorUnnecessaryCode.opacity",{dark:d.Il.fromHex("#000a"),light:d.Il.fromHex("#0007"),hc:null},l.N("unnecessaryCodeOpacity","Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.")),F=(0,u.P6G)("editorGhostText.border",{dark:null,light:null,hc:d.Il.fromHex("#fff").transparent(.8)},l.N("editorGhostTextBorder","Border color of ghost text in the editor.")),B=(0,u.P6G)("editorGhostText.foreground",{dark:d.Il.fromHex("#ffffff56"),light:d.Il.fromHex("#0007"),hc:null},l.N("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),W=(0,u.P6G)("editorGhostText.background",{dark:null,light:null,hc:null},l.N("editorGhostTextBackground","Background color of the ghost text in the editor.")),V=new d.Il(new d.VS(0,122,204,.6)),H=(0,u.P6G)("editorOverviewRuler.rangeHighlightForeground",{dark:V,light:V,hc:V},l.N("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),z=(0,u.P6G)("editorOverviewRuler.errorForeground",{dark:new d.Il(new d.VS(255,18,18,.7)),light:new d.Il(new d.VS(255,18,18,.7)),hc:new d.Il(new d.VS(255,50,50,1))},l.N("overviewRuleError","Overview ruler marker color for errors.")),U=(0,u.P6G)("editorOverviewRuler.warningForeground",{dark:u.uoC,light:u.uoC,hc:u.pW3},l.N("overviewRuleWarning","Overview ruler marker color for warnings.")),K=(0,u.P6G)("editorOverviewRuler.infoForeground",{dark:u.c63,light:u.c63,hc:u.T83},l.N("overviewRuleInfo","Overview ruler marker color for infos.")),j=(0,u.P6G)("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},l.N("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),G=(0,u.P6G)("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},l.N("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),q=(0,u.P6G)("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},l.N("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Q=(0,u.P6G)("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Z=(0,u.P6G)("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Y=(0,u.P6G)("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),J=(0,u.P6G)("editorBracketHighlight.unexpectedBracket.foreground",{dark:new d.Il(new d.VS(255,18,18,.8)),light:new d.Il(new d.VS(255,18,18,.8)),hc:new d.Il(new d.VS(255,50,50,1))},l.N("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),X=(0,u.P6G)("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),ee=(0,u.P6G)("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),te=(0,u.P6G)("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),ie=(0,u.P6G)("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),ne=(0,u.P6G)("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),oe=(0,u.P6G)("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),se=(0,u.P6G)("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),re=(0,u.P6G)("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),ae=(0,u.P6G)("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),le=(0,u.P6G)("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),ce=(0,u.P6G)("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),de=(0,u.P6G)("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},l.N("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));(0,u.P6G)("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hc:"#ff0000"},l.N("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));(0,g.Ic)(((e,o)=>{const s=e.getColor(u.cvW);s&&o.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${s}; }`);const l=e.getColor(u.NOs);l&&o.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${l}; }`);const d=e.getColor(R);d&&o.addRule(`.monaco-editor .margin { background-color: ${d}; }`);const g=e.getColor(f);g&&o.addRule(`.monaco-editor .rangeHighlight { background-color: ${g}; }`);const p=e.getColor(_);p&&o.addRule(`.monaco-editor .rangeHighlight { border: 1px ${"hc"===e.type?"dotted":"solid"} ${p}; }`);const m=e.getColor(C);m&&o.addRule(`.monaco-editor .symbolHighlight { background-color: ${m}; }`);const w=e.getColor(b);w&&o.addRule(`.monaco-editor .symbolHighlight { border: 1px ${"hc"===e.type?"dotted":"solid"} ${w}; }`);const S=e.getColor(y);S&&(o.addRule(`.monaco-editor .mtkw { color: ${S} !important; }`),o.addRule(`.monaco-editor .mtkz { color: ${S} !important; }`))}))},3795:function(e,o,s){"use strict";function countEOL(e){let o=0,s=0,l=0,d=0;for(let u=0,g=e.length;u<g;u++){const p=e.charCodeAt(u);13===p?(0===o&&(s=u),o++,u+1<g&&10===e.charCodeAt(u+1)?(d|=2,u++):d|=3,l=u+1):10===p&&(d|=1,0===o&&(s=u),o++,l=u+1)}return 0===o&&(s=e.length),[o,s,e.length-l,d]}s.d(o,{Q:function(){return countEOL}})},3158:function(e,o,s){"use strict";s.d(o,{x:function(){return normalizeIndentation}});var l=s(2677);function _normalizeIndentationFromWhitespace(e,o,s){let l=0;for(let u=0;u<e.length;u++)"\t"===e.charAt(u)?l+=o:l++;let d="";if(!s){const e=Math.floor(l/o);l%=o;for(let o=0;o<e;o++)d+="\t"}for(let u=0;u<l;u++)d+=" ";return d}function normalizeIndentation(e,o,s){let d=l.LC(e);return-1===d&&(d=e.length),_normalizeIndentationFromWhitespace(e.substring(0,d),o,s)+e.substring(d)}},187:function(e,o,s){"use strict";s.d(o,{L:function(){return Position}});class Position{constructor(e,o){this.lineNumber=e,this.column=o}with(e=this.lineNumber,o=this.column){return e===this.lineNumber&&o===this.column?this:new Position(e,o)}delta(e=0,o=0){return this.with(this.lineNumber+e,this.column+o)}equals(e){return Position.equals(this,e)}static equals(e,o){return!e&&!o||!!e&&!!o&&e.lineNumber===o.lineNumber&&e.column===o.column}isBefore(e){return Position.isBefore(this,e)}static isBefore(e,o){return e.lineNumber<o.lineNumber||!(o.lineNumber<e.lineNumber)&&e.column<o.column}isBeforeOrEqual(e){return Position.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,o){return e.lineNumber<o.lineNumber||!(o.lineNumber<e.lineNumber)&&e.column<=o.column}static compare(e,o){const s=0|e.lineNumber,l=0|o.lineNumber;if(s===l){const s=0|e.column,l=0|o.column;return s-l}return s-l}clone(){return new Position(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Position(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"===typeof e.lineNumber&&"number"===typeof e.column}}},4314:function(e,o,s){"use strict";s.d(o,{e:function(){return Range}});var l=s(187);class Range{constructor(e,o,s,l){e>s||e===s&&o>l?(this.startLineNumber=s,this.startColumn=l,this.endLineNumber=e,this.endColumn=o):(this.startLineNumber=e,this.startColumn=o,this.endLineNumber=s,this.endColumn=l)}isEmpty(){return Range.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Range.containsPosition(this,e)}static containsPosition(e,o){return!(o.lineNumber<e.startLineNumber||o.lineNumber>e.endLineNumber)&&(!(o.lineNumber===e.startLineNumber&&o.column<e.startColumn)&&!(o.lineNumber===e.endLineNumber&&o.column>e.endColumn))}static strictContainsPosition(e,o){return!(o.lineNumber<e.startLineNumber||o.lineNumber>e.endLineNumber)&&(!(o.lineNumber===e.startLineNumber&&o.column<=e.startColumn)&&!(o.lineNumber===e.endLineNumber&&o.column>=e.endColumn))}containsRange(e){return Range.containsRange(this,e)}static containsRange(e,o){return!(o.startLineNumber<e.startLineNumber||o.endLineNumber<e.startLineNumber)&&(!(o.startLineNumber>e.endLineNumber||o.endLineNumber>e.endLineNumber)&&(!(o.startLineNumber===e.startLineNumber&&o.startColumn<e.startColumn)&&!(o.endLineNumber===e.endLineNumber&&o.endColumn>e.endColumn)))}strictContainsRange(e){return Range.strictContainsRange(this,e)}static strictContainsRange(e,o){return!(o.startLineNumber<e.startLineNumber||o.endLineNumber<e.startLineNumber)&&(!(o.startLineNumber>e.endLineNumber||o.endLineNumber>e.endLineNumber)&&(!(o.startLineNumber===e.startLineNumber&&o.startColumn<=e.startColumn)&&!(o.endLineNumber===e.endLineNumber&&o.endColumn>=e.endColumn)))}plusRange(e){return Range.plusRange(this,e)}static plusRange(e,o){let s,l,d,u;return o.startLineNumber<e.startLineNumber?(s=o.startLineNumber,l=o.startColumn):o.startLineNumber===e.startLineNumber?(s=o.startLineNumber,l=Math.min(o.startColumn,e.startColumn)):(s=e.startLineNumber,l=e.startColumn),o.endLineNumber>e.endLineNumber?(d=o.endLineNumber,u=o.endColumn):o.endLineNumber===e.endLineNumber?(d=o.endLineNumber,u=Math.max(o.endColumn,e.endColumn)):(d=e.endLineNumber,u=e.endColumn),new Range(s,l,d,u)}intersectRanges(e){return Range.intersectRanges(this,e)}static intersectRanges(e,o){let s=e.startLineNumber,l=e.startColumn,d=e.endLineNumber,u=e.endColumn,g=o.startLineNumber,p=o.startColumn,m=o.endLineNumber,f=o.endColumn;return s<g?(s=g,l=p):s===g&&(l=Math.max(l,p)),d>m?(d=m,u=f):d===m&&(u=Math.min(u,f)),s>d||s===d&&l>u?null:new Range(s,l,d,u)}equalsRange(e){return Range.equalsRange(this,e)}static equalsRange(e,o){return!!e&&!!o&&e.startLineNumber===o.startLineNumber&&e.startColumn===o.startColumn&&e.endLineNumber===o.endLineNumber&&e.endColumn===o.endColumn}getEndPosition(){return Range.getEndPosition(this)}static getEndPosition(e){return new l.L(e.endLineNumber,e.endColumn)}getStartPosition(){return Range.getStartPosition(this)}static getStartPosition(e){return new l.L(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,o){return new Range(this.startLineNumber,this.startColumn,e,o)}setStartPosition(e,o){return new Range(e,o,this.endLineNumber,this.endColumn)}collapseToStart(){return Range.collapseToStart(this)}static collapseToStart(e){return new Range(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,o=e){return new Range(e.lineNumber,e.column,o.lineNumber,o.column)}static lift(e){return e?new Range(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"===typeof e.startLineNumber&&"number"===typeof e.startColumn&&"number"===typeof e.endLineNumber&&"number"===typeof e.endColumn}static areIntersectingOrTouching(e,o){return!(e.endLineNumber<o.startLineNumber||e.endLineNumber===o.startLineNumber&&e.endColumn<o.startColumn)&&!(o.endLineNumber<e.startLineNumber||o.endLineNumber===e.startLineNumber&&o.endColumn<e.startColumn)}static areIntersecting(e,o){return!(e.endLineNumber<o.startLineNumber||e.endLineNumber===o.startLineNumber&&e.endColumn<=o.startColumn)&&!(o.endLineNumber<e.startLineNumber||o.endLineNumber===e.startLineNumber&&o.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,o){if(e&&o){const s=0|e.startLineNumber,l=0|o.startLineNumber;if(s===l){const s=0|e.startColumn,l=0|o.startColumn;if(s===l){const s=0|e.endLineNumber,l=0|o.endLineNumber;if(s===l){const s=0|e.endColumn,l=0|o.endColumn;return s-l}return s-l}return s-l}return s-l}const s=e?1:0,l=o?1:0;return s-l}static compareRangesUsingEnds(e,o){return e.endLineNumber===o.endLineNumber?e.endColumn===o.endColumn?e.startLineNumber===o.startLineNumber?e.startColumn-o.startColumn:e.startLineNumber-o.startLineNumber:e.endColumn-o.endColumn:e.endLineNumber-o.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}},3860:function(e,o,s){"use strict";s.d(o,{Y:function(){return Selection}});var l=s(187),d=s(4314);class Selection extends d.e{constructor(e,o,s,l){super(e,o,s,l),this.selectionStartLineNumber=e,this.selectionStartColumn=o,this.positionLineNumber=s,this.positionColumn=l}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Selection.selectionsEqual(this,e)}static selectionsEqual(e,o){return e.selectionStartLineNumber===o.selectionStartLineNumber&&e.selectionStartColumn===o.selectionStartColumn&&e.positionLineNumber===o.positionLineNumber&&e.positionColumn===o.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,o){return 0===this.getDirection()?new Selection(this.startLineNumber,this.startColumn,e,o):new Selection(e,o,this.startLineNumber,this.startColumn)}getPosition(){return new l.L(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new l.L(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,o){return 0===this.getDirection()?new Selection(e,o,this.endLineNumber,this.endColumn):new Selection(this.endLineNumber,this.endColumn,e,o)}static fromPositions(e,o=e){return new Selection(e.lineNumber,e.column,o.lineNumber,o.column)}static fromRange(e,o){return 0===o?new Selection(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Selection(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Selection(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,o){if(e&&!o||!e&&o)return!1;if(!e&&!o)return!0;if(e.length!==o.length)return!1;for(let s=0,l=e.length;s<l;s++)if(!this.selectionsEqual(e[s],o[s]))return!1;return!0}static isISelection(e){return e&&"number"===typeof e.selectionStartLineNumber&&"number"===typeof e.selectionStartColumn&&"number"===typeof e.positionLineNumber&&"number"===typeof e.positionColumn}static createWithDirection(e,o,s,l,d){return 0===d?new Selection(e,o,s,l):new Selection(s,l,e,o)}}},72:function(e,o,s){"use strict";s.d(o,{kH:function(){return C},l$:function(){return _},lZ:function(){return f},oe:function(){return getPlatformTextDecoder}});var l=s(2677),d=s(1432),u=s(3060);let g,p,m;function getUTF16LE_TextDecoder(){return g||(g=new TextDecoder("UTF-16LE")),g}function getUTF16BE_TextDecoder(){return p||(p=new TextDecoder("UTF-16BE")),p}function getPlatformTextDecoder(){return m||(m=d.r()?getUTF16LE_TextDecoder():getUTF16BE_TextDecoder()),m}const f="undefined"!==typeof TextDecoder;let _,C;function standardDecodeUTF16LE(e,o,s){const l=new Uint16Array(e.buffer,o,s);return s>0&&(65279===l[0]||65534===l[0])?compatDecodeUTF16LE(e,o,s):getUTF16LE_TextDecoder().decode(l)}function compatDecodeUTF16LE(e,o,s){const l=[];let d=0;for(let g=0;g<s;g++){const s=u.mP(e,o);o+=2,l[d++]=String.fromCharCode(s)}return l.join("")}f?(_=e=>new StringBuilder(e),C=standardDecodeUTF16LE):(_=e=>new CompatStringBuilder,C=compatDecodeUTF16LE);class StringBuilder{constructor(e){this._capacity=0|e,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return null!==this._completedStrings?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(0===this._bufferLength)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return getPlatformTextDecoder().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,null===this._completedStrings?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const o=this._capacity-this._bufferLength;o<=1&&(0===o||l.ZG(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const o=e.length;if(this._bufferLength+o>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=e);for(let s=0;s<o;s++)this._buffer[this._bufferLength++]=e.charCodeAt(s)}}class CompatStringBuilder{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}},3033:function(e,o,s){"use strict";s.d(o,{b:function(){return compressConsecutiveTextChanges},q:function(){return TextChange}});var l=s(3060),d=s(72);function escapeNewLine(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class TextChange{constructor(e,o,s,l){this.oldPosition=e,this.oldText=o,this.newPosition=s,this.newText=l}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${escapeNewLine(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${escapeNewLine(this.oldText)}")`:`(replace@${this.oldPosition} "${escapeNewLine(this.oldText)}" with "${escapeNewLine(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,o,s){const d=o.length;l.T4(e,d,s),s+=4;for(let u=0;u<d;u++)l.oq(e,o.charCodeAt(u),s),s+=2;return s}static _readString(e,o){const s=l.Ag(e,o);return o+=4,(0,d.kH)(e,o,s)}writeSize(){return 8+TextChange._writeStringSize(this.oldText)+TextChange._writeStringSize(this.newText)}write(e,o){return l.T4(e,this.oldPosition,o),o+=4,l.T4(e,this.newPosition,o),o+=4,o=TextChange._writeString(e,this.oldText,o),o=TextChange._writeString(e,this.newText,o),o}static read(e,o,s){const d=l.Ag(e,o);o+=4;const u=l.Ag(e,o);o+=4;const g=TextChange._readString(e,o);o+=TextChange._writeStringSize(g);const p=TextChange._readString(e,o);return o+=TextChange._writeStringSize(p),s.push(new TextChange(d,g,u,p)),o}}function compressConsecutiveTextChanges(e,o){if(null===e||0===e.length)return o;const s=new TextChangeCompressor(e,o);return s.compress()}class TextChangeCompressor{constructor(e,o){this._prevEdits=e,this._currEdits=o,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,o=0,s=this._getPrev(e),l=this._getCurr(o);while(e<this._prevLen||o<this._currLen){if(null===s){this._acceptCurr(l),l=this._getCurr(++o);continue}if(null===l){this._acceptPrev(s),s=this._getPrev(++e);continue}if(l.oldEnd<=s.newPosition){this._acceptCurr(l),l=this._getCurr(++o);continue}if(s.newEnd<=l.oldPosition){this._acceptPrev(s),s=this._getPrev(++e);continue}if(l.oldPosition<s.newPosition){const[e,o]=TextChangeCompressor._splitCurr(l,s.newPosition-l.oldPosition);this._acceptCurr(e),l=o;continue}if(s.newPosition<l.oldPosition){const[e,o]=TextChangeCompressor._splitPrev(s,l.oldPosition-s.newPosition);this._acceptPrev(e),s=o;continue}let d,u;if(l.oldEnd===s.newEnd)d=s,u=l,s=this._getPrev(++e),l=this._getCurr(++o);else if(l.oldEnd<s.newEnd){const[e,g]=TextChangeCompressor._splitPrev(s,l.oldLength);d=e,u=l,s=g,l=this._getCurr(++o)}else{const[o,g]=TextChangeCompressor._splitCurr(l,s.newLength);d=s,u=o,s=this._getPrev(++e),l=g}this._result[this._resultLen++]=new TextChange(d.oldPosition,d.oldText,u.newPosition,u.newText),this._prevDeltaOffset+=d.newLength-d.oldLength,this._currDeltaOffset+=u.newLength-u.oldLength}const d=TextChangeCompressor._merge(this._result),u=TextChangeCompressor._removeNoOps(d);return u}_acceptCurr(e){this._result[this._resultLen++]=TextChangeCompressor._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=TextChangeCompressor._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,o){return new TextChange(o.oldPosition-e,o.oldText,o.newPosition,o.newText)}static _rebasePrev(e,o){return new TextChange(o.oldPosition,o.oldText,o.newPosition+e,o.newText)}static _splitPrev(e,o){const s=e.newText.substr(0,o),l=e.newText.substr(o);return[new TextChange(e.oldPosition,e.oldText,e.newPosition,s),new TextChange(e.oldEnd,"",e.newPosition+o,l)]}static _splitCurr(e,o){const s=e.oldText.substr(0,o),l=e.oldText.substr(o);return[new TextChange(e.oldPosition,s,e.newPosition,e.newText),new TextChange(e.oldPosition+o,l,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;const o=[];let s=0,l=e[0];for(let d=1;d<e.length;d++){const u=e[d];l.oldEnd===u.oldPosition?l=new TextChange(l.oldPosition,l.oldText+u.oldText,l.newPosition,l.newText+u.newText):(o[s++]=l,l=u)}return o[s++]=l,o}static _removeNoOps(e){if(0===e.length)return e;const o=[];let s=0;for(let l=0;l<e.length;l++){const d=e[l];d.oldText!==d.newText&&(o[s++]=d)}return o}}},2075:function(e,o,s){"use strict";s.d(o,{D:function(){return l}});const l={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}}},4929:function(e,o,s){"use strict";s.d(o,{u:function(){return d}});var l=s(4906);class WordCharacterClassifier extends l.N{constructor(e){super(0);for(let o=0,s=e.length;o<s;o++)this.set(e.charCodeAt(o),2);this.set(32,1),this.set(9,1)}}function once(e){const o={};return s=>(o.hasOwnProperty(s)||(o[s]=e(s)),o[s])}const d=once((e=>new WordCharacterClassifier(e)))},270:function(e,o,s){"use strict";s.d(o,{Af:function(){return d},eq:function(){return ensureValidWordDefinition},t2:function(){return getWordAtText},vu:function(){return l}});const l="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function createWordRegExp(e=""){let o="(-?\\d*\\.\\d\\w*)|([^";for(const s of l)e.indexOf(s)>=0||(o+="\\"+s);return o+="\\s]+)",new RegExp(o,"g")}const d=createWordRegExp();function ensureValidWordDefinition(e){let o=d;if(e&&e instanceof RegExp)if(e.global)o=e;else{let s="g";e.ignoreCase&&(s+="i"),e.multiline&&(s+="m"),e.unicode&&(s+="u"),o=new RegExp(e.source,s)}return o.lastIndex=0,o}const u={maxLen:1e3,windowSize:15,timeBudget:150};function getWordAtText(e,o,s,l,d=u){if(s.length>d.maxLen){let u=e-d.maxLen/2;return u<0?u=0:l+=u,s=s.substring(u,e+d.maxLen/2),getWordAtText(e,o,s,l,d)}const g=Date.now(),p=e-1-l;let m=-1,f=null;for(let u=1;;u++){if(Date.now()-g>=d.timeBudget)break;const e=p-d.windowSize*u;o.lastIndex=Math.max(0,e);const l=_findRegexMatchEnclosingPosition(o,s,p,m);if(!l&&f)break;if(f=l,e<=0)break;m=e}if(f){const e={word:f[0],startColumn:l+1+f.index,endColumn:l+1+f.index+f[0].length};return o.lastIndex=0,e}return null}function _findRegexMatchEnclosingPosition(e,o,s,l){let d;while(d=e.exec(o)){const o=d.index||0;if(o<=s&&e.lastIndex>=s)return d;if(l>0&&o>l)return null}return null}},7128:function(e,o,s){"use strict";s.d(o,{l:function(){return AtomicTabMoveOperations}});var l=s(7988);class AtomicTabMoveOperations{static whitespaceVisibleColumn(e,o,s){const d=e.length;let u=0,g=-1,p=-1;for(let m=0;m<d;m++){if(m===o)return[g,p,u];u%s===0&&(g=m,p=u);const d=e.charCodeAt(m);switch(d){case 32:u+=1;break;case 9:u=l.i.nextRenderTabStop(u,s);break;default:return[-1,-1,-1]}}return o===d?[g,p,u]:[-1,-1,-1]}static atomicPosition(e,o,s,d){const u=e.length,[g,p,m]=AtomicTabMoveOperations.whitespaceVisibleColumn(e,o,s);if(-1===m)return-1;let f;switch(d){case 0:f=!0;break;case 1:f=!1;break;case 2:if(m%s===0)return o;f=m%s<=s/2;break}if(f){if(-1===g)return-1;let o=p;for(let d=g;d<u;++d){if(o===p+s)return g;const u=e.charCodeAt(d);switch(u){case 32:o+=1;break;case 9:o=l.i.nextRenderTabStop(o,s);break;default:return-1}}return o===p+s?g:-1}const _=l.i.nextRenderTabStop(m,s);let C=m;for(let b=o;b<u;b++){if(C===_)return b;const o=e.charCodeAt(b);switch(o){case 32:C+=1;break;case 9:C=l.i.nextRenderTabStop(C,s);break;default:return-1}}return C===_?u:-1}}},9436:function(e,o,s){"use strict";s.d(o,{A:function(){return DeleteOperations}});var l=s(2677),d=s(1329),u=s(5343),g=s(7988),p=s(839),m=s(4314),f=s(187);class DeleteOperations{static deleteRight(e,o,s,l){const u=[];let g=3!==e;for(let f=0,_=l.length;f<_;f++){const e=l[f];let _=e;if(_.isEmpty()){const l=e.getPosition(),d=p.o.right(o,s,l);_=new m.e(d.lineNumber,d.column,l.lineNumber,l.column)}_.isEmpty()?u[f]=null:(_.startLineNumber!==_.endLineNumber&&(g=!0),u[f]=new d.T4(_,""))}return[g,u]}static isAutoClosingPairDelete(e,o,s,l,d,g,p){if("never"===o&&"never"===s)return!1;if("never"===e)return!1;for(let m=0,f=g.length;m<f;m++){const f=g[m],_=f.getPosition();if(!f.isEmpty())return!1;const C=d.getLineContent(_.lineNumber);if(_.column<2||_.column>=C.length+1)return!1;const b=C.charAt(_.column-2),w=l.get(b);if(!w)return!1;if((0,u.LN)(b)){if("never"===s)return!1}else if("never"===o)return!1;const S=C.charAt(_.column-1);let y=!1;for(const e of w)e.open===b&&e.close===S&&(y=!0);if(!y)return!1;if("auto"===e){let e=!1;for(let o=0,s=p.length;o<s;o++){const s=p[o];if(_.lineNumber===s.startLineNumber&&_.column===s.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,o,s){const l=[];for(let u=0,g=s.length;u<g;u++){const e=s[u].getPosition(),o=new m.e(e.lineNumber,e.column-1,e.lineNumber,e.column+1);l[u]=new d.T4(o,"")}return[!0,l]}static deleteLeft(e,o,s,l,u){if(this.isAutoClosingPairDelete(o.autoClosingDelete,o.autoClosingBrackets,o.autoClosingQuotes,o.autoClosingPairs.autoClosingPairsOpenByEnd,s,l,u))return this._runAutoClosingPairDelete(o,s,l);const g=[];let p=2!==e;for(let m=0,f=l.length;m<f;m++){const e=DeleteOperations.getDeleteRange(l[m],s,o);e.isEmpty()?g[m]=null:(e.startLineNumber!==e.endLineNumber&&(p=!0),g[m]=new d.T4(e,""))}return[p,g]}static getDeleteRange(e,o,s){if(!e.isEmpty())return e;const d=e.getPosition();if(s.useTabStops&&d.column>1){const e=o.getLineContent(d.lineNumber),u=l.LC(e),p=-1===u?e.length+1:u+1;if(d.column<=p){const e=s.visibleColumnFromColumn(o,d),l=g.i.prevIndentTabStop(e,s.indentSize),u=s.columnFromVisibleColumn(o,d.lineNumber,l);return new m.e(d.lineNumber,u,d.lineNumber,d.column)}}return m.e.fromPositions(DeleteOperations.getPositionAfterDeleteLeft(d,o),d)}static getPositionAfterDeleteLeft(e,o){if(e.column>1){const s=l.oH(e.column-1,o.getLineContent(e.lineNumber));return e.with(void 0,s+1)}if(e.lineNumber>1){const s=e.lineNumber-1;return new f.L(s,o.getLineMaxColumn(s))}return e}static cut(e,o,s){const l=[];let g=null;s.sort(((e,o)=>f.L.compare(e.getStartPosition(),o.getEndPosition())));for(let u=0,p=s.length;u<p;u++){const p=s[u];if(p.isEmpty())if(e.emptySelectionClipboard){const e=p.getPosition();let s,f,_,C;e.lineNumber<o.getLineCount()?(s=e.lineNumber,f=1,_=e.lineNumber+1,C=1):e.lineNumber>1&&(null===g||void 0===g?void 0:g.endLineNumber)!==e.lineNumber?(s=e.lineNumber-1,f=o.getLineMaxColumn(e.lineNumber-1),_=e.lineNumber,C=o.getLineMaxColumn(e.lineNumber)):(s=e.lineNumber,f=1,_=e.lineNumber,C=o.getLineMaxColumn(e.lineNumber));const b=new m.e(s,f,_,C);g=b,b.isEmpty()?l[u]=null:l[u]=new d.T4(b,"")}else l[u]=null;else l[u]=new d.T4(p,"")}return new u.Tp(0,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},8108:function(e,o,s){"use strict";s.d(o,{N:function(){return l},P:function(){return CursorMoveCommands}});var l,d=s(8401),u=s(5343),g=s(839),p=s(2896),m=s(187),f=s(4314);class CursorMoveCommands{static addCursorDown(e,o,s){const l=[];let d=0;for(let p=0,m=o.length;p<m;p++){const m=o[p];l[d++]=new u.Vi(m.modelState,m.viewState),l[d++]=s?u.Vi.fromModelState(g.o.translateDown(e.cursorConfig,e.model,m.modelState)):u.Vi.fromViewState(g.o.translateDown(e.cursorConfig,e,m.viewState))}return l}static addCursorUp(e,o,s){const l=[];let d=0;for(let p=0,m=o.length;p<m;p++){const m=o[p];l[d++]=new u.Vi(m.modelState,m.viewState),l[d++]=s?u.Vi.fromModelState(g.o.translateUp(e.cursorConfig,e.model,m.modelState)):u.Vi.fromViewState(g.o.translateUp(e.cursorConfig,e,m.viewState))}return l}static moveToBeginningOfLine(e,o,s){let l=[];for(let d=0,u=o.length;d<u;d++){const u=o[d];l[d]=this._moveToLineStart(e,u,s)}return l}static _moveToLineStart(e,o,s){const l=o.viewState.position.column,d=o.modelState.position.column,u=l===d,g=o.viewState.position.lineNumber,p=e.getLineFirstNonWhitespaceColumn(g),m=l===p;return u||m?this._moveToLineStartByModel(e,o,s):this._moveToLineStartByView(e,o,s)}static _moveToLineStartByView(e,o,s){return u.Vi.fromViewState(g.o.moveToBeginningOfLine(e.cursorConfig,e,o.viewState,s))}static _moveToLineStartByModel(e,o,s){return u.Vi.fromModelState(g.o.moveToBeginningOfLine(e.cursorConfig,e.model,o.modelState,s))}static moveToEndOfLine(e,o,s,l){const d=[];for(let u=0,g=o.length;u<g;u++){const g=o[u];d[u]=this._moveToLineEnd(e,g,s,l)}return d}static _moveToLineEnd(e,o,s,l){const d=o.viewState.position,u=e.getLineMaxColumn(d.lineNumber),g=d.column===u,p=o.modelState.position,m=e.model.getLineMaxColumn(p.lineNumber),f=u-d.column===m-p.column;return g||f?this._moveToLineEndByModel(e,o,s,l):this._moveToLineEndByView(e,o,s,l)}static _moveToLineEndByView(e,o,s,l){return u.Vi.fromViewState(g.o.moveToEndOfLine(e.cursorConfig,e,o.viewState,s,l))}static _moveToLineEndByModel(e,o,s,l){return u.Vi.fromModelState(g.o.moveToEndOfLine(e.cursorConfig,e.model,o.modelState,s,l))}static expandLineSelection(e,o){const s=[];for(let l=0,d=o.length;l<d;l++){const d=o[l],g=d.modelState.selection.startLineNumber,p=e.model.getLineCount();let _,C=d.modelState.selection.endLineNumber;C===p?_=e.model.getLineMaxColumn(p):(C++,_=1),s[l]=u.Vi.fromModelState(new u.rS(new f.e(g,1,g,1),0,new m.L(C,_),0))}return s}static moveToBeginningOfBuffer(e,o,s){const l=[];for(let d=0,p=o.length;d<p;d++){const p=o[d];l[d]=u.Vi.fromModelState(g.o.moveToBeginningOfBuffer(e.cursorConfig,e.model,p.modelState,s))}return l}static moveToEndOfBuffer(e,o,s){const l=[];for(let d=0,p=o.length;d<p;d++){const p=o[d];l[d]=u.Vi.fromModelState(g.o.moveToEndOfBuffer(e.cursorConfig,e.model,p.modelState,s))}return l}static selectAll(e,o){const s=e.model.getLineCount(),l=e.model.getLineMaxColumn(s);return u.Vi.fromModelState(new u.rS(new f.e(1,1,1,1),0,new m.L(s,l),0))}static line(e,o,s,l,d){const g=e.model.validatePosition(l),p=d?e.coordinatesConverter.validateViewPosition(new m.L(d.lineNumber,d.column),g):e.coordinatesConverter.convertModelPositionToViewPosition(g);if(!s||!o.modelState.hasSelection()){const o=e.model.getLineCount();let s=g.lineNumber+1,l=1;return s>o&&(s=o,l=e.model.getLineMaxColumn(s)),u.Vi.fromModelState(new u.rS(new f.e(g.lineNumber,1,s,l),0,new m.L(s,l),0))}const _=o.modelState.selectionStart.getStartPosition().lineNumber;if(g.lineNumber<_)return u.Vi.fromViewState(o.viewState.move(o.modelState.hasSelection(),p.lineNumber,1,0));if(g.lineNumber>_){const s=e.getLineCount();let l=p.lineNumber+1,d=1;return l>s&&(l=s,d=e.getLineMaxColumn(l)),u.Vi.fromViewState(o.viewState.move(o.modelState.hasSelection(),l,d,0))}{const e=o.modelState.selectionStart.getEndPosition();return u.Vi.fromModelState(o.modelState.move(o.modelState.hasSelection(),e.lineNumber,e.column,0))}}static word(e,o,s,l){const d=e.model.validatePosition(l);return u.Vi.fromModelState(p.w.word(e.cursorConfig,e.model,o.modelState,s,d))}static cancelSelection(e,o){if(!o.modelState.hasSelection())return new u.Vi(o.modelState,o.viewState);const s=o.viewState.position.lineNumber,l=o.viewState.position.column;return u.Vi.fromViewState(new u.rS(new f.e(s,l,s,l),0,new m.L(s,l),0))}static moveTo(e,o,s,l,d){const g=e.model.validatePosition(l),p=d?e.coordinatesConverter.validateViewPosition(new m.L(d.lineNumber,d.column),g):e.coordinatesConverter.convertModelPositionToViewPosition(g);return u.Vi.fromViewState(o.viewState.move(s,p.lineNumber,p.column,0))}static simpleMove(e,o,s,l,d,p){switch(s){case 0:return 4===p?this._moveHalfLineLeft(e,o,l):this._moveLeft(e,o,l,d);case 1:return 4===p?this._moveHalfLineRight(e,o,l):this._moveRight(e,o,l,d);case 2:return 2===p?this._moveUpByViewLines(e,o,l,d):this._moveUpByModelLines(e,o,l,d);case 3:return 2===p?this._moveDownByViewLines(e,o,l,d):this._moveDownByModelLines(e,o,l,d);case 4:return 2===p?o.map((o=>u.Vi.fromViewState(g.o.moveToPrevBlankLine(e.cursorConfig,e,o.viewState,l)))):o.map((o=>u.Vi.fromModelState(g.o.moveToPrevBlankLine(e.cursorConfig,e.model,o.modelState,l))));case 5:return 2===p?o.map((o=>u.Vi.fromViewState(g.o.moveToNextBlankLine(e.cursorConfig,e,o.viewState,l)))):o.map((o=>u.Vi.fromModelState(g.o.moveToNextBlankLine(e.cursorConfig,e.model,o.modelState,l))));case 6:return this._moveToViewMinColumn(e,o,l);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,o,l);case 8:return this._moveToViewCenterColumn(e,o,l);case 9:return this._moveToViewMaxColumn(e,o,l);case 10:return this._moveToViewLastNonWhitespaceColumn(e,o,l);default:return null}}static viewportMove(e,o,s,l,d){const u=e.getCompletelyVisibleViewRange(),g=e.coordinatesConverter.convertViewRangeToModelRange(u);switch(s){case 11:{const s=this._firstLineNumberInRange(e.model,g,d),u=e.model.getLineFirstNonWhitespaceColumn(s);return[this._moveToModelPosition(e,o[0],l,s,u)]}case 13:{const s=this._lastLineNumberInRange(e.model,g,d),u=e.model.getLineFirstNonWhitespaceColumn(s);return[this._moveToModelPosition(e,o[0],l,s,u)]}case 12:{const s=Math.round((g.startLineNumber+g.endLineNumber)/2),d=e.model.getLineFirstNonWhitespaceColumn(s);return[this._moveToModelPosition(e,o[0],l,s,d)]}case 14:{const s=[];for(let d=0,g=o.length;d<g;d++){const g=o[d];s[d]=this.findPositionInViewportIfOutside(e,g,u,l)}return s}default:return null}}static findPositionInViewportIfOutside(e,o,s,l){const d=o.viewState.position.lineNumber;if(s.startLineNumber<=d&&d<=s.endLineNumber-1)return new u.Vi(o.modelState,o.viewState);{let p;p=d>s.endLineNumber-1?s.endLineNumber-1:d<s.startLineNumber?s.startLineNumber:d;const m=g.o.vertical(e.cursorConfig,e,d,o.viewState.position.column,o.viewState.leftoverVisibleColumns,p,!1);return u.Vi.fromViewState(o.viewState.move(l,m.lineNumber,m.column,m.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,o,s){let l=o.startLineNumber;return o.startColumn!==e.getLineMinColumn(l)&&l++,Math.min(o.endLineNumber,l+s-1)}static _lastLineNumberInRange(e,o,s){let l=o.startLineNumber;return o.startColumn!==e.getLineMinColumn(l)&&l++,Math.max(l,o.endLineNumber-s+1)}static _moveLeft(e,o,s,l){return o.map((o=>u.Vi.fromViewState(g.o.moveLeft(e.cursorConfig,e,o.viewState,s,l))))}static _moveHalfLineLeft(e,o,s){const l=[];for(let d=0,p=o.length;d<p;d++){const p=o[d],m=p.viewState.position.lineNumber,f=Math.round(e.getLineContent(m).length/2);l[d]=u.Vi.fromViewState(g.o.moveLeft(e.cursorConfig,e,p.viewState,s,f))}return l}static _moveRight(e,o,s,l){return o.map((o=>u.Vi.fromViewState(g.o.moveRight(e.cursorConfig,e,o.viewState,s,l))))}static _moveHalfLineRight(e,o,s){const l=[];for(let d=0,p=o.length;d<p;d++){const p=o[d],m=p.viewState.position.lineNumber,f=Math.round(e.getLineContent(m).length/2);l[d]=u.Vi.fromViewState(g.o.moveRight(e.cursorConfig,e,p.viewState,s,f))}return l}static _moveDownByViewLines(e,o,s,l){const d=[];for(let p=0,m=o.length;p<m;p++){const m=o[p];d[p]=u.Vi.fromViewState(g.o.moveDown(e.cursorConfig,e,m.viewState,s,l))}return d}static _moveDownByModelLines(e,o,s,l){const d=[];for(let p=0,m=o.length;p<m;p++){const m=o[p];d[p]=u.Vi.fromModelState(g.o.moveDown(e.cursorConfig,e.model,m.modelState,s,l))}return d}static _moveUpByViewLines(e,o,s,l){const d=[];for(let p=0,m=o.length;p<m;p++){const m=o[p];d[p]=u.Vi.fromViewState(g.o.moveUp(e.cursorConfig,e,m.viewState,s,l))}return d}static _moveUpByModelLines(e,o,s,l){const d=[];for(let p=0,m=o.length;p<m;p++){const m=o[p];d[p]=u.Vi.fromModelState(g.o.moveUp(e.cursorConfig,e.model,m.modelState,s,l))}return d}static _moveToViewPosition(e,o,s,l,d){return u.Vi.fromViewState(o.viewState.move(s,l,d,0))}static _moveToModelPosition(e,o,s,l,d){return u.Vi.fromModelState(o.modelState.move(s,l,d,0))}static _moveToViewMinColumn(e,o,s){const l=[];for(let d=0,u=o.length;d<u;d++){const u=o[d],g=u.viewState.position.lineNumber,p=e.getLineMinColumn(g);l[d]=this._moveToViewPosition(e,u,s,g,p)}return l}static _moveToViewFirstNonWhitespaceColumn(e,o,s){const l=[];for(let d=0,u=o.length;d<u;d++){const u=o[d],g=u.viewState.position.lineNumber,p=e.getLineFirstNonWhitespaceColumn(g);l[d]=this._moveToViewPosition(e,u,s,g,p)}return l}static _moveToViewCenterColumn(e,o,s){const l=[];for(let d=0,u=o.length;d<u;d++){const u=o[d],g=u.viewState.position.lineNumber,p=Math.round((e.getLineMaxColumn(g)+e.getLineMinColumn(g))/2);l[d]=this._moveToViewPosition(e,u,s,g,p)}return l}static _moveToViewMaxColumn(e,o,s){const l=[];for(let d=0,u=o.length;d<u;d++){const u=o[d],g=u.viewState.position.lineNumber,p=e.getLineMaxColumn(g);l[d]=this._moveToViewPosition(e,u,s,g,p)}return l}static _moveToViewLastNonWhitespaceColumn(e,o,s){const l=[];for(let d=0,u=o.length;d<u;d++){const u=o[d],g=u.viewState.position.lineNumber,p=e.getLineLastNonWhitespaceColumn(g);l[d]=this._moveToViewPosition(e,u,s,g,p)}return l}}(function(e){const isCursorMoveArgs=function(e){if(!d.Kn(e))return!1;const o=e;return!!d.HD(o.to)&&(!(!d.o8(o.select)&&!d.jn(o.select))&&(!(!d.o8(o.by)&&!d.HD(o.by))&&!(!d.o8(o.value)&&!d.hj(o.value))))};function parse(o){if(!o.to)return null;let s;switch(o.to){case e.RawDirection.Left:s=0;break;case e.RawDirection.Right:s=1;break;case e.RawDirection.Up:s=2;break;case e.RawDirection.Down:s=3;break;case e.RawDirection.PrevBlankLine:s=4;break;case e.RawDirection.NextBlankLine:s=5;break;case e.RawDirection.WrappedLineStart:s=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case e.RawDirection.WrappedLineColumnCenter:s=8;break;case e.RawDirection.WrappedLineEnd:s=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case e.RawDirection.ViewPortTop:s=11;break;case e.RawDirection.ViewPortBottom:s=13;break;case e.RawDirection.ViewPortCenter:s=12;break;case e.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let l=0;switch(o.by){case e.RawUnit.Line:l=1;break;case e.RawUnit.WrappedLine:l=2;break;case e.RawUnit.Character:l=3;break;case e.RawUnit.HalfLine:l=4;break}return{direction:s,unit:l,select:!!o.select,value:o.value||1}}e.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:isCursorMoveArgs,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=parse})(l||(l={}))},839:function(e,o,s){"use strict";s.d(o,{o:function(){return MoveOperations}});var l=s(5343),d=s(7988),u=s(187),g=s(4314),p=s(2677),m=s(7128);class CursorPosition{constructor(e,o,s){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=o,this.leftoverVisibleColumns=s}}class MoveOperations{static leftPosition(e,o){if(o.column>e.getLineMinColumn(o.lineNumber))return o.delta(void 0,-p.HO(e.getLineContent(o.lineNumber),o.column-1));if(o.lineNumber>1){const s=o.lineNumber-1;return new u.L(s,e.getLineMaxColumn(s))}return o}static leftPositionAtomicSoftTabs(e,o,s){if(o.column<=e.getLineIndentColumn(o.lineNumber)){const l=e.getLineMinColumn(o.lineNumber),d=e.getLineContent(o.lineNumber),g=m.l.atomicPosition(d,o.column-1,s,0);if(-1!==g&&g+1>=l)return new u.L(o.lineNumber,g+1)}return this.leftPosition(e,o)}static left(e,o,s){const l=e.stickyTabStops?MoveOperations.leftPositionAtomicSoftTabs(o,s,e.tabSize):MoveOperations.leftPosition(o,s);return new CursorPosition(l.lineNumber,l.column,0)}static moveLeft(e,o,s,l,d){let u,g;if(s.hasSelection()&&!l)u=s.selection.startLineNumber,g=s.selection.startColumn;else{const l=s.position.delta(void 0,-(d-1)),p=o.normalizePosition(MoveOperations.clipPositionColumn(l,o),0),m=MoveOperations.left(e,o,p);u=m.lineNumber,g=m.column}return s.move(l,u,g,0)}static clipPositionColumn(e,o){return new u.L(e.lineNumber,MoveOperations.clipRange(e.column,o.getLineMinColumn(e.lineNumber),o.getLineMaxColumn(e.lineNumber)))}static clipRange(e,o,s){return e<o?o:e>s?s:e}static rightPosition(e,o,s){return s<e.getLineMaxColumn(o)?s+=p.vH(e.getLineContent(o),s-1):o<e.getLineCount()&&(o+=1,s=e.getLineMinColumn(o)),new u.L(o,s)}static rightPositionAtomicSoftTabs(e,o,s,l,d){if(s<e.getLineIndentColumn(o)){const d=e.getLineContent(o),g=m.l.atomicPosition(d,s-1,l,1);if(-1!==g)return new u.L(o,g+1)}return this.rightPosition(e,o,s)}static right(e,o,s){const l=e.stickyTabStops?MoveOperations.rightPositionAtomicSoftTabs(o,s.lineNumber,s.column,e.tabSize,e.indentSize):MoveOperations.rightPosition(o,s.lineNumber,s.column);return new CursorPosition(l.lineNumber,l.column,0)}static moveRight(e,o,s,l,d){let u,g;if(s.hasSelection()&&!l)u=s.selection.endLineNumber,g=s.selection.endColumn;else{const l=s.position.delta(void 0,d-1),p=o.normalizePosition(MoveOperations.clipPositionColumn(l,o),1),m=MoveOperations.right(e,o,p);u=m.lineNumber,g=m.column}return s.move(l,u,g,0)}static vertical(e,o,s,l,g,p,m,f){const _=d.i.visibleColumnFromColumn(o.getLineContent(s),l,e.tabSize)+g,C=o.getLineCount(),b=1===s&&1===l,w=s===C&&l===o.getLineMaxColumn(s),S=p<s?b:w;if(s=p,s<1?(s=1,l=m?o.getLineMinColumn(s):Math.min(o.getLineMaxColumn(s),l)):s>C?(s=C,l=m?o.getLineMaxColumn(s):Math.min(o.getLineMaxColumn(s),l)):l=e.columnFromVisibleColumn(o,s,_),g=S?0:_-d.i.visibleColumnFromColumn(o.getLineContent(s),l,e.tabSize),void 0!==f){const e=new u.L(s,l),d=o.normalizePosition(e,f);g+=l-d.column,s=d.lineNumber,l=d.column}return new CursorPosition(s,l,g)}static down(e,o,s,l,d,u,g){return this.vertical(e,o,s,l,d,s+u,g,1)}static moveDown(e,o,s,l,d){let u,g;s.hasSelection()&&!l?(u=s.selection.endLineNumber,g=s.selection.endColumn):(u=s.position.lineNumber,g=s.position.column);const p=MoveOperations.down(e,o,u,g,s.leftoverVisibleColumns,d,!0);return s.move(l,p.lineNumber,p.column,p.leftoverVisibleColumns)}static translateDown(e,o,s){const d=s.selection,p=MoveOperations.down(e,o,d.selectionStartLineNumber,d.selectionStartColumn,s.selectionStartLeftoverVisibleColumns,1,!1),m=MoveOperations.down(e,o,d.positionLineNumber,d.positionColumn,s.leftoverVisibleColumns,1,!1);return new l.rS(new g.e(p.lineNumber,p.column,p.lineNumber,p.column),p.leftoverVisibleColumns,new u.L(m.lineNumber,m.column),m.leftoverVisibleColumns)}static up(e,o,s,l,d,u,g){return this.vertical(e,o,s,l,d,s-u,g,0)}static moveUp(e,o,s,l,d){let u,g;s.hasSelection()&&!l?(u=s.selection.startLineNumber,g=s.selection.startColumn):(u=s.position.lineNumber,g=s.position.column);const p=MoveOperations.up(e,o,u,g,s.leftoverVisibleColumns,d,!0);return s.move(l,p.lineNumber,p.column,p.leftoverVisibleColumns)}static translateUp(e,o,s){const d=s.selection,p=MoveOperations.up(e,o,d.selectionStartLineNumber,d.selectionStartColumn,s.selectionStartLeftoverVisibleColumns,1,!1),m=MoveOperations.up(e,o,d.positionLineNumber,d.positionColumn,s.leftoverVisibleColumns,1,!1);return new l.rS(new g.e(p.lineNumber,p.column,p.lineNumber,p.column),p.leftoverVisibleColumns,new u.L(m.lineNumber,m.column),m.leftoverVisibleColumns)}static _isBlankLine(e,o){return 0===e.getLineFirstNonWhitespaceColumn(o)}static moveToPrevBlankLine(e,o,s,l){let d=s.position.lineNumber;while(d>1&&this._isBlankLine(o,d))d--;while(d>1&&!this._isBlankLine(o,d))d--;return s.move(l,d,o.getLineMinColumn(d),0)}static moveToNextBlankLine(e,o,s,l){const d=o.getLineCount();let u=s.position.lineNumber;while(u<d&&this._isBlankLine(o,u))u++;while(u<d&&!this._isBlankLine(o,u))u++;return s.move(l,u,o.getLineMinColumn(u),0)}static moveToBeginningOfLine(e,o,s,l){const d=s.position.lineNumber,u=o.getLineMinColumn(d),g=o.getLineFirstNonWhitespaceColumn(d)||u;let p;const m=s.position.column;return p=m===g?u:g,s.move(l,d,p,0)}static moveToEndOfLine(e,o,s,l,d){const u=s.position.lineNumber,g=o.getLineMaxColumn(u);return s.move(l,u,g,d?1073741824-g:0)}static moveToBeginningOfBuffer(e,o,s,l){return s.move(l,1,1,0)}static moveToEndOfBuffer(e,o,s,l){const d=o.getLineCount(),u=o.getLineMaxColumn(d);return s.move(l,d,u,0)}}},4729:function(e,o,s){"use strict";s.d(o,{u:function(){return TypeOperations},g:function(){return TypeWithAutoClosingCommand}});var l=s(7301),d=s(2677),u=s(1329),g=s(291),p=s(4314),m=s(3860);class SurroundSelectionCommand{constructor(e,o,s){this._range=e,this._charBeforeSelection=o,this._charAfterSelection=s}getEditOperations(e,o){o.addTrackedEditOperation(new p.e(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),o.addTrackedEditOperation(new p.e(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,o){const s=o.getInverseEditOperations(),l=s[0].range,d=s[1].range;return new m.Y(l.endLineNumber,l.endColumn,d.endLineNumber,d.endColumn-this._charAfterSelection.length)}}var f=s(5343),_=s(4929),C=s(187),b=s(9119),w=s(5638),S=s(9111);class TypeOperations{static indent(e,o,s){if(null===o||null===s)return[];const l=[];for(let d=0,u=s.length;d<u;d++)l[d]=new g.U(s[d],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return l}static outdent(e,o,s){const l=[];for(let d=0,u=s.length;d<u;d++)l[d]=new g.U(s[d],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return l}static shiftIndent(e,o,s){return s=s||1,g.U.shiftIndent(o,o.length+s,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,o,s){return s=s||1,g.U.unshiftIndent(o,o.length+s,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,o,s,l){const d=[];for(let g=0,p=s.length;g<p;g++)d[g]=new u.T4(s[g],l[g]);return new f.Tp(0,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,o,s,l,d){const g=[];for(let m=0,f=s.length;m<f;m++){const e=s[m],o=e.getPosition();if(d&&!e.isEmpty()&&(d=!1),d&&l.indexOf("\n")!==l.length-1&&(d=!1),d){const s=new p.e(o.lineNumber,1,o.lineNumber,1);g[m]=new u.hP(s,l,e,!0)}else g[m]=new u.T4(e,l)}return new f.Tp(0,g,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,o,s,l,u){if(l)return null;if(1===o.length)return null;if(u&&u.length===o.length)return u;if("spread"===e.multiCursorPaste){10===s.charCodeAt(s.length-1)&&(s=s.substr(0,s.length-1)),13===s.charCodeAt(s.length-1)&&(s=s.substr(0,s.length-1));const e=d.uq(s);if(e.length===o.length)return e}return null}static paste(e,o,s,l,d,u){const g=this._distributePasteToCursors(e,s,l,d,u);return g?(s=s.sort(p.e.compareRangesUsingStarts),this._distributedPaste(e,o,s,g)):this._simplePaste(e,o,s,l,d)}static _goodIndentForLine(e,o,s){let l=null,u="";const g=w.zu.getInheritIndentForLine(e.autoIndent,o,s,!1);if(g)l=g.action,u=g.indentation;else if(s>1){let l;for(l=s-1;l>=1;l--){const e=o.getLineContent(l),s=d.ow(e);if(s>=0)break}if(l<1)return null;const g=o.getLineMaxColumn(l),m=w.zu.getEnterAction(e.autoIndent,o,new p.e(l,g,l,g));m&&(u=m.indentation+m.appendText)}return l&&(l===b.wU.Indent&&(u=TypeOperations.shiftIndent(e,u)),l===b.wU.Outdent&&(u=TypeOperations.unshiftIndent(e,u)),u=e.normalizeIndentation(u)),u||null}static _replaceJumpToNextIndent(e,o,s,l){let d="";const g=s.getStartPosition();if(e.insertSpaces){const s=e.visibleColumnFromColumn(o,g),l=e.indentSize,u=l-s%l;for(let e=0;e<u;e++)d+=" "}else d="\t";return new u.T4(s,d,l)}static tab(e,o,s){const l=[];for(let d=0,m=s.length;d<m;d++){const m=s[d];if(m.isEmpty()){const s=o.getLineContent(m.startLineNumber);if(/^\s*$/.test(s)&&o.isCheapToTokenize(m.startLineNumber)){let g=this._goodIndentForLine(e,o,m.startLineNumber);g=g||"\t";const f=e.normalizeIndentation(g);if(!s.startsWith(f)){l[d]=new u.T4(new p.e(m.startLineNumber,1,m.startLineNumber,s.length+1),f,!0);continue}}l[d]=this._replaceJumpToNextIndent(e,o,m,!0)}else{if(m.startLineNumber===m.endLineNumber){const s=o.getLineMaxColumn(m.startLineNumber);if(1!==m.startColumn||m.endColumn!==s){l[d]=this._replaceJumpToNextIndent(e,o,m,!1);continue}}l[d]=new g.U(m,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return l}static compositionType(e,o,s,l,d,u,g,p){const m=l.map((e=>this._compositionType(s,e,d,u,g,p)));return new f.Tp(4,m,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,o,s,l,d,g){if(!o.isEmpty())return null;const m=o.getPosition(),f=Math.max(1,m.column-l),_=Math.min(e.getLineMaxColumn(m.lineNumber),m.column+d),C=new p.e(m.lineNumber,f,m.lineNumber,_),b=e.getValueInRange(C);return b===s&&0===g?null:new u.Uo(C,s,0,g)}static _typeCommand(e,o,s){return s?new u.Sj(e,o,!0):new u.T4(e,o,!0)}static _enter(e,o,s,l){if(0===e.autoIndent)return TypeOperations._typeCommand(l,"\n",s);if(!o.isCheapToTokenize(l.getStartPosition().lineNumber)||1===e.autoIndent){const u=o.getLineContent(l.startLineNumber),g=d.V8(u).substring(0,l.startColumn-1);return TypeOperations._typeCommand(l,"\n"+e.normalizeIndentation(g),s)}const g=w.zu.getEnterAction(e.autoIndent,o,l);if(g){if(g.indentAction===b.wU.None)return TypeOperations._typeCommand(l,"\n"+e.normalizeIndentation(g.indentation+g.appendText),s);if(g.indentAction===b.wU.Indent)return TypeOperations._typeCommand(l,"\n"+e.normalizeIndentation(g.indentation+g.appendText),s);if(g.indentAction===b.wU.IndentOutdent){const o=e.normalizeIndentation(g.indentation),d=e.normalizeIndentation(g.indentation+g.appendText),p="\n"+d+"\n"+o;return s?new u.Sj(l,p,!0):new u.Uo(l,p,-1,d.length-o.length,!0)}if(g.indentAction===b.wU.Outdent){const o=TypeOperations.unshiftIndent(e,g.indentation);return TypeOperations._typeCommand(l,"\n"+e.normalizeIndentation(o+g.appendText),s)}}const p=o.getLineContent(l.startLineNumber),m=d.V8(p).substring(0,l.startColumn-1);if(e.autoIndent>=4){const g=w.zu.getIndentForEnter(e.autoIndent,o,l,{unshiftIndent:o=>TypeOperations.unshiftIndent(e,o),shiftIndent:o=>TypeOperations.shiftIndent(e,o),normalizeIndentation:o=>e.normalizeIndentation(o)});if(g){let p=e.visibleColumnFromColumn(o,l.getEndPosition());const m=l.endColumn,f=o.getLineContent(l.endLineNumber),_=d.LC(f);if(l=_>=0?l.setEndPosition(l.endLineNumber,Math.max(l.endColumn,_+1)):l.setEndPosition(l.endLineNumber,o.getLineMaxColumn(l.endLineNumber)),s)return new u.Sj(l,"\n"+e.normalizeIndentation(g.afterEnter),!0);{let o=0;return m<=_+1&&(e.insertSpaces||(p=Math.ceil(p/e.indentSize)),o=Math.min(p+1-e.normalizeIndentation(g.afterEnter).length-1,0)),new u.Uo(l,"\n"+e.normalizeIndentation(g.afterEnter),0,o,!0)}}}return TypeOperations._typeCommand(l,"\n"+e.normalizeIndentation(m),s)}static _isAutoIndentType(e,o,s){if(e.autoIndent<4)return!1;for(let l=0,d=s.length;l<d;l++)if(!o.isCheapToTokenize(s[l].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,o,s,l){const d=w.zu.getIndentationAtPosition(o,s.startLineNumber,s.startColumn),u=w.zu.getIndentActionForType(e.autoIndent,o,s,l,{shiftIndent:o=>TypeOperations.shiftIndent(e,o),unshiftIndent:o=>TypeOperations.unshiftIndent(e,o)});if(null===u)return null;if(u!==e.normalizeIndentation(d)){const d=o.getLineFirstNonWhitespaceColumn(s.startLineNumber);return 0===d?TypeOperations._typeCommand(new p.e(s.startLineNumber,1,s.endLineNumber,s.endColumn),e.normalizeIndentation(u)+l,!1):TypeOperations._typeCommand(new p.e(s.startLineNumber,1,s.endLineNumber,s.endColumn),e.normalizeIndentation(u)+o.getLineContent(s.startLineNumber).substring(d-1,s.startColumn-1)+l,!1)}return null}static _isAutoClosingOvertype(e,o,s,l,d){if("never"===e.autoClosingOvertype)return!1;if(!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(d))return!1;for(let u=0,g=s.length;u<g;u++){const g=s[u];if(!g.isEmpty())return!1;const p=g.getPosition(),m=o.getLineContent(p.lineNumber),_=m.charAt(p.column-1);if(_!==d)return!1;const C=(0,f.LN)(d),b=p.column>2?m.charCodeAt(p.column-2):0;if(92===b&&C)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let o=0,s=l.length;o<s;o++){const s=l[o];if(p.lineNumber===s.startLineNumber&&p.column===s.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingOvertype(e,o,s,l,d){const g=[];for(let m=0,f=l.length;m<f;m++){const e=l[m],o=e.getPosition(),s=new p.e(o.lineNumber,o.column,o.lineNumber,o.column+1);g[m]=new u.T4(s,d)}return new f.Tp(4,g,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,o){const s=o.charAt(0),l=e.autoClosingPairs.autoClosingPairsOpenByStart.get(s)||[],d=e.autoClosingPairs.autoClosingPairsCloseByStart.get(s)||[],u=l.some((e=>o.startsWith(e.open))),g=d.some((e=>o.startsWith(e.close)));return!u&&g}static _findAutoClosingPairOpen(e,o,s,l){const d=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(l);if(!d)return null;let u=null;for(const g of d)if(null===u||g.open.length>u.open.length){let e=!0;for(const d of s){const s=o.getValueInRange(new p.e(d.lineNumber,d.column-g.open.length+1,d.lineNumber,d.column));if(s+l!==g.open){e=!1;break}}e&&(u=g)}return u}static _findContainedAutoClosingPair(e,o){if(o.open.length<=1)return null;const s=o.close.charAt(o.close.length-1),l=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(s)||[];let d=null;for(const u of l)u.open!==o.open&&o.open.includes(u.open)&&o.close.endsWith(u.close)&&(!d||u.open.length>d.open.length)&&(d=u);return d}static _getAutoClosingPairClose(e,o,s,l,d){const u=(0,f.LN)(l),g=u?e.autoClosingQuotes:e.autoClosingBrackets,p=u?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if("never"===g)return null;for(const f of s)if(!f.isEmpty())return null;const m=s.map((e=>{const o=e.getPosition();return d?{lineNumber:o.lineNumber,beforeColumn:o.column-l.length,afterColumn:o.column}:{lineNumber:o.lineNumber,beforeColumn:o.column,afterColumn:o.column}})),b=this._findAutoClosingPairOpen(e,o,m.map((e=>new C.L(e.lineNumber,e.beforeColumn))),l);if(!b)return null;const w=this._findContainedAutoClosingPair(e,b),y=w?w.close:"";let L=!0;for(const f of m){const{lineNumber:s,beforeColumn:d,afterColumn:u}=f,m=o.getLineContent(s),C=m.substring(0,d-1),w=m.substring(u-1);if(w.startsWith(y)||(L=!1),w.length>0){const o=w.charAt(0),s=TypeOperations._isBeforeClosingBrace(e,w);if(!s&&!p(o))return null}if(1===b.open.length&&("'"===l||'"'===l)&&"always"!==g){const o=(0,_.u)(e.wordSeparators);if(C.length>0){const e=C.charCodeAt(C.length-1);if(0===o.get(e))return null}}if(!o.isCheapToTokenize(s))return null;o.forceTokenization(s);const x=o.getLineTokens(s),k=(0,S.wH)(x,d-1);if(!b.shouldAutoClose(k,d-k.firstCharOffset))return null;const N=b.findNeutralCharacter();if(N){const e=o.getTokenTypeIfInsertingCharacter(s,d,N);if(!b.isOK(e))return null}}return L?b.close.substring(0,b.close.length-y.length):b.close}static _runAutoClosingOpenCharType(e,o,s,l,d,u,g){const p=[];for(let m=0,f=l.length;m<f;m++){const e=l[m];p[m]=new TypeWithAutoClosingCommand(e,d,!u,g)}return new f.Tp(4,p,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,o){return(0,f.LN)(o)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}static _isSurroundSelectionType(e,o,s,l){if(!TypeOperations._shouldSurroundChar(e,l)||!e.surroundingPairs.hasOwnProperty(l))return!1;const d=(0,f.LN)(l);for(let u=0,g=s.length;u<g;u++){const e=s[u];if(e.isEmpty())return!1;let l=!0;for(let s=e.startLineNumber;s<=e.endLineNumber;s++){const d=o.getLineContent(s),u=s===e.startLineNumber?e.startColumn-1:0,g=s===e.endLineNumber?e.endColumn-1:d.length,p=d.substring(u,g);if(/[^ \t]/.test(p)){l=!1;break}}if(l)return!1;if(d&&e.startLineNumber===e.endLineNumber&&e.startColumn+1===e.endColumn){const s=o.getValueInRange(e);if((0,f.LN)(s))return!1}}return!0}static _runSurroundSelectionType(e,o,s,l,d){const u=[];for(let g=0,p=l.length;g<p;g++){const e=l[g],s=o.surroundingPairs[d];u[g]=new SurroundSelectionCommand(e,d,s)}return new f.Tp(0,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,o,s){return!(1!==s.length||!o.isCheapToTokenize(s[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,o,s,g,m){if(!o.electricChars.hasOwnProperty(m)||!g.isEmpty())return null;const _=g.getPosition();s.forceTokenization(_.lineNumber);const C=s.getLineTokens(_.lineNumber);let b;try{b=o.onElectricCharacter(m,C,_.column)}catch(w){return(0,l.dL)(w),null}if(!b)return null;if(b.matchOpenBracket){const l=(C.getLineContent()+m).lastIndexOf(b.matchOpenBracket)+1,g=s.bracketPairs.findMatchingBracketUp(b.matchOpenBracket,{lineNumber:_.lineNumber,column:l},500);if(g){if(g.startLineNumber===_.lineNumber)return null;const l=s.getLineContent(g.startLineNumber),C=d.V8(l),b=o.normalizeIndentation(C),w=s.getLineContent(_.lineNumber),S=s.getLineFirstNonWhitespaceColumn(_.lineNumber)||_.column,y=w.substring(S-1,_.column-1),L=b+y+m,x=new p.e(_.lineNumber,1,_.lineNumber,_.column),k=new u.T4(x,L);return new f.Tp(getTypingOperation(L,e),[k],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,o,s,l,d,g){if(!l||m.Y.selectionsArrEqual(l,d))return null;let _=null;for(const u of d){if(!u.isEmpty())return null;const e=u.getPosition(),o=s.getValueInRange(new p.e(e.lineNumber,e.column-1,e.lineNumber,e.column));if(null===_)_=o;else if(_!==o)return null}if(!_)return null;if(this._isAutoClosingOvertype(o,s,d,g,_)){const e=d.map((e=>new u.T4(new p.e(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1)));return new f.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const C=this._getAutoClosingPairClose(o,s,d,_,!0);return null!==C?this._runAutoClosingOpenCharType(e,o,s,d,_,!0,C):null}static typeWithInterceptors(e,o,s,l,d,g,p){if(!e&&"\n"===p){const e=[];for(let o=0,u=d.length;o<u;o++)e[o]=TypeOperations._enter(s,l,!1,d[o]);return new f.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(s,l,d)){const e=[];let o=!1;for(let u=0,g=d.length;u<g;u++)if(e[u]=this._runAutoIndentType(s,l,d[u],p),!e[u]){o=!0;break}if(!o)return new f.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(s,l,d,g,p))return this._runAutoClosingOvertype(o,s,l,d,p);if(!e){const e=this._getAutoClosingPairClose(s,l,d,p,!1);if(e)return this._runAutoClosingOpenCharType(o,s,l,d,p,!1,e)}if(this._isSurroundSelectionType(s,l,d,p))return this._runSurroundSelectionType(o,s,l,d,p);if(!e&&this._isTypeInterceptorElectricChar(s,l,d)){const e=this._typeInterceptorElectricChar(o,s,l,d[0],p);if(e)return e}const m=[];for(let f=0,C=d.length;f<C;f++)m[f]=new u.T4(d[f],p);const _=getTypingOperation(p,o);return new f.Tp(_,m,{shouldPushStackElementBefore:shouldPushStackElementBetween(o,_),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,o,s,l,d){const g=[];for(let m=0,f=l.length;m<f;m++)g[m]=new u.T4(l[m],d);const p=getTypingOperation(d,e);return new f.Tp(p,g,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,p),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,o,s){if(null===o||null===s)return[];const l=[];for(let d=0,g=s.length;d<g;d++){let g=s[d].positionLineNumber;if(1===g)l[d]=new u.Sj(new p.e(1,1,1,1),"\n");else{g--;const s=o.getLineMaxColumn(g);l[d]=this._enter(e,o,!1,new p.e(g,s,g,s))}}return l}static lineInsertAfter(e,o,s){if(null===o||null===s)return[];const l=[];for(let d=0,u=s.length;d<u;d++){const u=s[d].positionLineNumber,g=o.getLineMaxColumn(u);l[d]=this._enter(e,o,!1,new p.e(u,g,u,g))}return l}static lineBreakInsert(e,o,s){const l=[];for(let d=0,u=s.length;d<u;d++)l[d]=this._enter(e,o,!0,s[d]);return l}}class TypeWithAutoClosingCommand extends u.Uo{constructor(e,o,s,l){super(e,(s?o:"")+l,0,-l.length),this._openCharacter=o,this._closeCharacter=l,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,o){const s=o.getInverseEditOperations(),l=s[0].range;return this.closeCharacterRange=new p.e(l.startLineNumber,l.endColumn-this._closeCharacter.length,l.endLineNumber,l.endColumn),this.enclosingRange=new p.e(l.startLineNumber,l.endColumn-this._openCharacter.length-this._closeCharacter.length,l.endLineNumber,l.endColumn),super.computeCursorState(e,o)}}function getTypingOperation(e,o){return" "===e?5===o||6===o?6:5:4}function shouldPushStackElementBetween(e,o){return!(!isTypingOperation(e)||isTypingOperation(o))||5!==e&&normalizeOperationType(e)!==normalizeOperationType(o)}function normalizeOperationType(e){return 6===e||5===e?"space":e}function isTypingOperation(e){return 4===e||5===e||6===e}},2896:function(e,o,s){"use strict";s.d(o,{L:function(){return WordPartOperations},w:function(){return WordOperations}});var l=s(2677),d=s(5343),u=s(9436),g=s(4929),p=s(187),m=s(4314);class WordOperations{static _createWord(e,o,s,l,d){return{start:l,end:d,wordType:o,nextCharClass:s}}static _findPreviousWordOnLine(e,o,s){const l=o.getLineContent(s.lineNumber);return this._doFindPreviousWordOnLine(l,e,s)}static _doFindPreviousWordOnLine(e,o,s){let l=0;for(let d=s.column-2;d>=0;d--){const s=e.charCodeAt(d),u=o.get(s);if(0===u){if(2===l)return this._createWord(e,l,u,d+1,this._findEndOfWord(e,o,l,d+1));l=1}else if(2===u){if(1===l)return this._createWord(e,l,u,d+1,this._findEndOfWord(e,o,l,d+1));l=2}else if(1===u&&0!==l)return this._createWord(e,l,u,d+1,this._findEndOfWord(e,o,l,d+1))}return 0!==l?this._createWord(e,l,1,0,this._findEndOfWord(e,o,l,0)):null}static _findEndOfWord(e,o,s,l){const d=e.length;for(let u=l;u<d;u++){const l=e.charCodeAt(u),d=o.get(l);if(1===d)return u;if(1===s&&2===d)return u;if(2===s&&0===d)return u}return d}static _findNextWordOnLine(e,o,s){const l=o.getLineContent(s.lineNumber);return this._doFindNextWordOnLine(l,e,s)}static _doFindNextWordOnLine(e,o,s){let l=0;const d=e.length;for(let u=s.column-1;u<d;u++){const s=e.charCodeAt(u),d=o.get(s);if(0===d){if(2===l)return this._createWord(e,l,d,this._findStartOfWord(e,o,l,u-1),u);l=1}else if(2===d){if(1===l)return this._createWord(e,l,d,this._findStartOfWord(e,o,l,u-1),u);l=2}else if(1===d&&0!==l)return this._createWord(e,l,d,this._findStartOfWord(e,o,l,u-1),u)}return 0!==l?this._createWord(e,l,1,this._findStartOfWord(e,o,l,d-1),d):null}static _findStartOfWord(e,o,s,l){for(let d=l;d>=0;d--){const l=e.charCodeAt(d),u=o.get(l);if(1===u)return d+1;if(1===s&&2===u)return d+1;if(2===s&&0===u)return d+1}return 0}static moveWordLeft(e,o,s,l){let d=s.lineNumber,u=s.column;1===u&&d>1&&(d-=1,u=o.getLineMaxColumn(d));let g=WordOperations._findPreviousWordOnLine(e,o,new p.L(d,u));if(0===l)return new p.L(d,g?g.start+1:1);if(1===l)return g&&2===g.wordType&&g.end-g.start===1&&0===g.nextCharClass&&(g=WordOperations._findPreviousWordOnLine(e,o,new p.L(d,g.start+1))),new p.L(d,g?g.start+1:1);if(3===l){while(g&&2===g.wordType)g=WordOperations._findPreviousWordOnLine(e,o,new p.L(d,g.start+1));return new p.L(d,g?g.start+1:1)}return g&&u<=g.end+1&&(g=WordOperations._findPreviousWordOnLine(e,o,new p.L(d,g.start+1))),new p.L(d,g?g.end+1:1)}static _moveWordPartLeft(e,o){const s=o.lineNumber,d=e.getLineMaxColumn(s);if(1===o.column)return s>1?new p.L(s-1,e.getLineMaxColumn(s-1)):o;const u=e.getLineContent(s);for(let g=o.column-1;g>1;g--){const e=u.charCodeAt(g-2),o=u.charCodeAt(g-1);if(95===e&&95!==o)return new p.L(s,g);if(l.mK(e)&&l.df(o))return new p.L(s,g);if(l.df(e)&&l.df(o)&&g+1<d){const e=u.charCodeAt(g);if(l.mK(e))return new p.L(s,g)}}return new p.L(s,1)}static moveWordRight(e,o,s,l){let d=s.lineNumber,u=s.column,g=!1;u===o.getLineMaxColumn(d)&&d<o.getLineCount()&&(g=!0,d+=1,u=1);let m=WordOperations._findNextWordOnLine(e,o,new p.L(d,u));if(2===l)m&&2===m.wordType&&m.end-m.start===1&&0===m.nextCharClass&&(m=WordOperations._findNextWordOnLine(e,o,new p.L(d,m.end+1))),u=m?m.end+1:o.getLineMaxColumn(d);else if(3===l){g&&(u=0);while(m&&(2===m.wordType||m.start+1<=u))m=WordOperations._findNextWordOnLine(e,o,new p.L(d,m.end+1));u=m?m.start+1:o.getLineMaxColumn(d)}else m&&!g&&u>=m.start+1&&(m=WordOperations._findNextWordOnLine(e,o,new p.L(d,m.end+1))),u=m?m.start+1:o.getLineMaxColumn(d);return new p.L(d,u)}static _moveWordPartRight(e,o){const s=o.lineNumber,d=e.getLineMaxColumn(s);if(o.column===d)return s<e.getLineCount()?new p.L(s+1,1):o;const u=e.getLineContent(s);for(let g=o.column+1;g<d;g++){const e=u.charCodeAt(g-2),o=u.charCodeAt(g-1);if(95!==e&&95===o)return new p.L(s,g);if(l.mK(e)&&l.df(o))return new p.L(s,g);if(l.df(e)&&l.df(o)&&g+1<d){const e=u.charCodeAt(g);if(l.mK(e))return new p.L(s,g)}}return new p.L(s,d)}static _deleteWordLeftWhitespace(e,o){const s=e.getLineContent(o.lineNumber),d=o.column-2,u=l.ow(s,d);return u+1<d?new m.e(o.lineNumber,u+2,o.lineNumber,o.column):null}static deleteWordLeft(e,o){const s=e.wordSeparators,l=e.model,d=e.selection,g=e.whitespaceHeuristics;if(!d.isEmpty())return d;if(u.A.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const o=e.selection.getPosition();return new m.e(o.lineNumber,o.column-1,o.lineNumber,o.column+1)}const f=new p.L(d.positionLineNumber,d.positionColumn);let _=f.lineNumber,C=f.column;if(1===_&&1===C)return null;if(g){const e=this._deleteWordLeftWhitespace(l,f);if(e)return e}let b=WordOperations._findPreviousWordOnLine(s,l,f);return 0===o?b?C=b.start+1:C>1?C=1:(_--,C=l.getLineMaxColumn(_)):(b&&C<=b.end+1&&(b=WordOperations._findPreviousWordOnLine(s,l,new p.L(_,b.start+1))),b?C=b.end+1:C>1?C=1:(_--,C=l.getLineMaxColumn(_))),new m.e(_,C,f.lineNumber,f.column)}static deleteInsideWord(e,o,s){if(!s.isEmpty())return s;const l=new p.L(s.positionLineNumber,s.positionColumn),d=this._deleteInsideWordWhitespace(o,l);return d||this._deleteInsideWordDetermineDeleteRange(e,o,l)}static _charAtIsWhitespace(e,o){const s=e.charCodeAt(o);return 32===s||9===s}static _deleteInsideWordWhitespace(e,o){const s=e.getLineContent(o.lineNumber),l=s.length;if(0===l)return null;let d=Math.max(o.column-2,0);if(!this._charAtIsWhitespace(s,d))return null;let u=Math.min(o.column-1,l-1);if(!this._charAtIsWhitespace(s,u))return null;while(d>0&&this._charAtIsWhitespace(s,d-1))d--;while(u+1<l&&this._charAtIsWhitespace(s,u+1))u++;return new m.e(o.lineNumber,d+1,o.lineNumber,u+2)}static _deleteInsideWordDetermineDeleteRange(e,o,s){const l=o.getLineContent(s.lineNumber),d=l.length;if(0===d)return s.lineNumber>1?new m.e(s.lineNumber-1,o.getLineMaxColumn(s.lineNumber-1),s.lineNumber,1):s.lineNumber<o.getLineCount()?new m.e(s.lineNumber,1,s.lineNumber+1,1):new m.e(s.lineNumber,1,s.lineNumber,1);const touchesWord=e=>e.start+1<=s.column&&s.column<=e.end+1,createRangeWithPosition=(e,o)=>(e=Math.min(e,s.column),o=Math.max(o,s.column),new m.e(s.lineNumber,e,s.lineNumber,o)),deleteWordAndAdjacentWhitespace=e=>{let o=e.start+1,s=e.end+1,u=!1;while(s-1<d&&this._charAtIsWhitespace(l,s-1))u=!0,s++;if(!u)while(o>1&&this._charAtIsWhitespace(l,o-2))o--;return createRangeWithPosition(o,s)},u=WordOperations._findPreviousWordOnLine(e,o,s);if(u&&touchesWord(u))return deleteWordAndAdjacentWhitespace(u);const g=WordOperations._findNextWordOnLine(e,o,s);return g&&touchesWord(g)?deleteWordAndAdjacentWhitespace(g):u&&g?createRangeWithPosition(u.end+1,g.start+1):u?createRangeWithPosition(u.start+1,u.end+1):g?createRangeWithPosition(g.start+1,g.end+1):createRangeWithPosition(1,d+1)}static _deleteWordPartLeft(e,o){if(!o.isEmpty())return o;const s=o.getPosition(),l=WordOperations._moveWordPartLeft(e,s);return new m.e(s.lineNumber,s.column,l.lineNumber,l.column)}static _findFirstNonWhitespaceChar(e,o){const s=e.length;for(let l=o;l<s;l++){const o=e.charAt(l);if(" "!==o&&"\t"!==o)return l}return s}static _deleteWordRightWhitespace(e,o){const s=e.getLineContent(o.lineNumber),l=o.column-1,d=this._findFirstNonWhitespaceChar(s,l);return l+1<d?new m.e(o.lineNumber,o.column,o.lineNumber,d+1):null}static deleteWordRight(e,o){const s=e.wordSeparators,l=e.model,d=e.selection,u=e.whitespaceHeuristics;if(!d.isEmpty())return d;const g=new p.L(d.positionLineNumber,d.positionColumn);let f=g.lineNumber,_=g.column;const C=l.getLineCount(),b=l.getLineMaxColumn(f);if(f===C&&_===b)return null;if(u){const e=this._deleteWordRightWhitespace(l,g);if(e)return e}let w=WordOperations._findNextWordOnLine(s,l,g);return 2===o?w?_=w.end+1:_<b||f===C?_=b:(f++,w=WordOperations._findNextWordOnLine(s,l,new p.L(f,1)),_=w?w.start+1:l.getLineMaxColumn(f)):(w&&_>=w.start+1&&(w=WordOperations._findNextWordOnLine(s,l,new p.L(f,w.end+1))),w?_=w.start+1:_<b||f===C?_=b:(f++,w=WordOperations._findNextWordOnLine(s,l,new p.L(f,1)),_=w?w.start+1:l.getLineMaxColumn(f))),new m.e(f,_,g.lineNumber,g.column)}static _deleteWordPartRight(e,o){if(!o.isEmpty())return o;const s=o.getPosition(),l=WordOperations._moveWordPartRight(e,s);return new m.e(s.lineNumber,s.column,l.lineNumber,l.column)}static _createWordAtPosition(e,o,s){const l=new m.e(o,s.start+1,o,s.end+1);return{word:e.getValueInRange(l),startColumn:l.startColumn,endColumn:l.endColumn}}static getWordAtPosition(e,o,s){const l=(0,g.u)(o),d=WordOperations._findPreviousWordOnLine(l,e,s);if(d&&1===d.wordType&&d.start<=s.column-1&&s.column-1<=d.end)return WordOperations._createWordAtPosition(e,s.lineNumber,d);const u=WordOperations._findNextWordOnLine(l,e,s);return u&&1===u.wordType&&u.start<=s.column-1&&s.column-1<=u.end?WordOperations._createWordAtPosition(e,s.lineNumber,u):null}static word(e,o,s,l,u){const f=(0,g.u)(e.wordSeparators),_=WordOperations._findPreviousWordOnLine(f,o,u),C=WordOperations._findNextWordOnLine(f,o,u);if(!l){let e,s;return _&&1===_.wordType&&_.start<=u.column-1&&u.column-1<=_.end?(e=_.start+1,s=_.end+1):C&&1===C.wordType&&C.start<=u.column-1&&u.column-1<=C.end?(e=C.start+1,s=C.end+1):(e=_?_.end+1:1,s=C?C.start+1:o.getLineMaxColumn(u.lineNumber)),new d.rS(new m.e(u.lineNumber,e,u.lineNumber,s),0,new p.L(u.lineNumber,s),0)}let b,w;_&&1===_.wordType&&_.start<u.column-1&&u.column-1<_.end?(b=_.start+1,w=_.end+1):C&&1===C.wordType&&C.start<u.column-1&&u.column-1<C.end?(b=C.start+1,w=C.end+1):(b=u.column,w=u.column);const S=u.lineNumber;let y;if(s.selectionStart.containsPosition(u))y=s.selectionStart.endColumn;else if(u.isBeforeOrEqual(s.selectionStart.getStartPosition())){y=b;const e=new p.L(S,y);s.selectionStart.containsPosition(e)&&(y=s.selectionStart.endColumn)}else{y=w;const e=new p.L(S,y);s.selectionStart.containsPosition(e)&&(y=s.selectionStart.startColumn)}return s.move(!0,S,y,0)}}class WordPartOperations extends WordOperations{static deleteWordPartLeft(e){const o=enforceDefined([WordOperations.deleteWordLeft(e,0),WordOperations.deleteWordLeft(e,2),WordOperations._deleteWordPartLeft(e.model,e.selection)]);return o.sort(m.e.compareRangesUsingEnds),o[2]}static deleteWordPartRight(e){const o=enforceDefined([WordOperations.deleteWordRight(e,0),WordOperations.deleteWordRight(e,2),WordOperations._deleteWordPartRight(e.model,e.selection)]);return o.sort(m.e.compareRangesUsingStarts),o[0]}static moveWordPartLeft(e,o,s){const l=enforceDefined([WordOperations.moveWordLeft(e,o,s,0),WordOperations.moveWordLeft(e,o,s,2),WordOperations._moveWordPartLeft(o,s)]);return l.sort(p.L.compare),l[2]}static moveWordPartRight(e,o,s){const l=enforceDefined([WordOperations.moveWordRight(e,o,s,0),WordOperations.moveWordRight(e,o,s,2),WordOperations._moveWordPartRight(o,s)]);return l.sort(p.L.compare),l[0]}}function enforceDefined(e){return e.filter((e=>Boolean(e)))}},5343:function(e,o,s){"use strict";s.d(o,{LM:function(){return CursorConfiguration},LN:function(){return isQuote},Tp:function(){return EditOperationResult},Vi:function(){return CursorState},rS:function(){return SingleCursorState}});var l=s(187),d=s(4314),u=s(3860),g=s(9111),p=s(7988),m=s(3158);const autoCloseAlways=()=>!0,autoCloseNever=()=>!1,autoCloseBeforeWhitespace=e=>" "===e||"\t"===e;class CursorConfiguration{constructor(e,o,s,l){this.languageConfigurationService=l,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const d=s.options,u=d.get(131);this.readOnly=d.get(81),this.tabSize=o.tabSize,this.indentSize=o.indentSize,this.insertSpaces=o.insertSpaces,this.stickyTabStops=d.get(104),this.lineHeight=d.get(59),this.pageSize=Math.max(1,Math.floor(u.height/this.lineHeight)-2),this.useTabStops=d.get(116),this.wordSeparators=d.get(117),this.emptySelectionClipboard=d.get(32),this.copyWithSyntaxHighlighting=d.get(21),this.multiCursorMergeOverlapping=d.get(69),this.multiCursorPaste=d.get(71),this.autoClosingBrackets=d.get(5),this.autoClosingQuotes=d.get(8),this.autoClosingDelete=d.get(6),this.autoClosingOvertype=d.get(7),this.autoSurround=d.get(11),this.autoIndent=d.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const g=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(g)for(const p of g)this.surroundingPairs[p.open]=p.close}static shouldRecreate(e){return e.hasChanged(131)||e.hasChanged(117)||e.hasChanged(32)||e.hasChanged(69)||e.hasChanged(71)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(116)||e.hasChanged(59)||e.hasChanged(81)}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const o=null===(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)||void 0===e?void 0:e.getElectricCharacters();if(o)for(const e of o)this._electricChars[e]=!0}return this._electricChars}onElectricCharacter(e,o,s){const l=(0,g.wH)(o,s-1),d=this.languageConfigurationService.getLanguageConfiguration(l.languageId).electricCharacter;return d?d.onElectricCharacter(e,l,s-l.firstCharOffset):null}normalizeIndentation(e){return(0,m.x)(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,o){switch(o){case"beforeWhitespace":return autoCloseBeforeWhitespace;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e);case"always":return autoCloseAlways;case"never":return autoCloseNever}}_getLanguageDefinedShouldAutoClose(e){const o=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet();return e=>-1!==o.indexOf(e)}visibleColumnFromColumn(e,o){return p.i.visibleColumnFromColumn(e.getLineContent(o.lineNumber),o.column,this.tabSize)}columnFromVisibleColumn(e,o,s){const l=p.i.columnFromVisibleColumn(e.getLineContent(o),s,this.tabSize),d=e.getLineMinColumn(o);if(l<d)return d;const u=e.getLineMaxColumn(o);return l>u?u:l}}class CursorState{constructor(e,o){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=o}static fromModelState(e){return new PartialModelCursorState(e)}static fromViewState(e){return new PartialViewCursorState(e)}static fromModelSelection(e){const o=u.Y.liftSelection(e),s=new SingleCursorState(d.e.fromPositions(o.getSelectionStart()),0,o.getPosition(),0);return CursorState.fromModelState(s)}static fromModelSelections(e){const o=[];for(let s=0,l=e.length;s<l;s++)o[s]=this.fromModelSelection(e[s]);return o}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class PartialModelCursorState{constructor(e){this.modelState=e,this.viewState=null}}class PartialViewCursorState{constructor(e){this.modelState=null,this.viewState=e}}class SingleCursorState{constructor(e,o,s,l){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=o,this.position=s,this.leftoverVisibleColumns=l,this.selection=SingleCursorState._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,o,s,u){return e?new SingleCursorState(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new l.L(o,s),u):new SingleCursorState(new d.e(o,s,o,s),u,new l.L(o,s),u)}static _computeSelection(e,o){return e.isEmpty()||!o.isBeforeOrEqual(e.getStartPosition())?u.Y.fromPositions(e.getStartPosition(),o):u.Y.fromPositions(e.getEndPosition(),o)}}class EditOperationResult{constructor(e,o,s){this._editOperationResultBrand=void 0,this.type=e,this.commands=o,this.shouldPushStackElementBefore=s.shouldPushStackElementBefore,this.shouldPushStackElementAfter=s.shouldPushStackElementAfter}}function isQuote(e){return"'"===e||'"'===e||"`"===e}},653:function(e,o,s){"use strict";s.d(o,{p:function(){return InternalEditorAction}});class InternalEditorAction{constructor(e,o,s,l,d,u){this.id=e,this.label=o,this.alias=s,this._precondition=l,this._run=d,this._contextKeyService=u}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}},6518:function(e,o,s){"use strict";s.d(o,{g:function(){return l}});const l={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"}},9102:function(e,o,s){"use strict";s.d(o,{u:function(){return l}});var l,d=s(3580),u=s(8819);(function(e){e.editorSimpleInput=new u.uy("editorSimpleInput",!1,!0),e.editorTextFocus=new u.uy("editorTextFocus",!1,d.N("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),e.focus=new u.uy("editorFocus",!1,d.N("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),e.textInputFocus=new u.uy("textInputFocus",!1,d.N("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),e.readOnly=new u.uy("editorReadonly",!1,d.N("editorReadonly","Whether the editor is read only")),e.inDiffEditor=new u.uy("inDiffEditor",!1,d.N("inDiffEditor","Whether the context is a diff editor")),e.columnSelection=new u.uy("editorColumnSelection",!1,d.N("editorColumnSelection","Whether `editor.columnSelection` is enabled")),e.writable=e.readOnly.toNegated(),e.hasNonEmptySelection=new u.uy("editorHasSelection",!1,d.N("editorHasSelection","Whether the editor has text selected")),e.hasOnlyEmptySelection=e.hasNonEmptySelection.toNegated(),e.hasMultipleSelections=new u.uy("editorHasMultipleSelections",!1,d.N("editorHasMultipleSelections","Whether the editor has multiple selections")),e.hasSingleSelection=e.hasMultipleSelections.toNegated(),e.tabMovesFocus=new u.uy("editorTabMovesFocus",!1,d.N("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),e.tabDoesNotMoveFocus=e.tabMovesFocus.toNegated(),e.isInWalkThroughSnippet=new u.uy("isInEmbeddedEditor",!1,!0),e.canUndo=new u.uy("canUndo",!1,!0),e.canRedo=new u.uy("canRedo",!1,!0),e.hoverVisible=new u.uy("editorHoverVisible",!1,d.N("editorHoverVisible","Whether the editor hover is visible")),e.inCompositeEditor=new u.uy("inCompositeEditor",void 0,d.N("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),e.notInCompositeEditor=e.inCompositeEditor.toNegated(),e.languageId=new u.uy("editorLangId","",d.N("editorLangId","The language identifier of the editor")),e.hasCompletionItemProvider=new u.uy("editorHasCompletionItemProvider",!1,d.N("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),e.hasCodeActionsProvider=new u.uy("editorHasCodeActionsProvider",!1,d.N("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),e.hasCodeLensProvider=new u.uy("editorHasCodeLensProvider",!1,d.N("editorHasCodeLensProvider","Whether the editor has a code lens provider")),e.hasDefinitionProvider=new u.uy("editorHasDefinitionProvider",!1,d.N("editorHasDefinitionProvider","Whether the editor has a definition provider")),e.hasDeclarationProvider=new u.uy("editorHasDeclarationProvider",!1,d.N("editorHasDeclarationProvider","Whether the editor has a declaration provider")),e.hasImplementationProvider=new u.uy("editorHasImplementationProvider",!1,d.N("editorHasImplementationProvider","Whether the editor has an implementation provider")),e.hasTypeDefinitionProvider=new u.uy("editorHasTypeDefinitionProvider",!1,d.N("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),e.hasHoverProvider=new u.uy("editorHasHoverProvider",!1,d.N("editorHasHoverProvider","Whether the editor has a hover provider")),e.hasDocumentHighlightProvider=new u.uy("editorHasDocumentHighlightProvider",!1,d.N("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),e.hasDocumentSymbolProvider=new u.uy("editorHasDocumentSymbolProvider",!1,d.N("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),e.hasReferenceProvider=new u.uy("editorHasReferenceProvider",!1,d.N("editorHasReferenceProvider","Whether the editor has a reference provider")),e.hasRenameProvider=new u.uy("editorHasRenameProvider",!1,d.N("editorHasRenameProvider","Whether the editor has a rename provider")),e.hasSignatureHelpProvider=new u.uy("editorHasSignatureHelpProvider",!1,d.N("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),e.hasInlayHintsProvider=new u.uy("editorHasInlayHintsProvider",!1,d.N("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),e.hasDocumentFormattingProvider=new u.uy("editorHasDocumentFormattingProvider",!1,d.N("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),e.hasDocumentSelectionFormattingProvider=new u.uy("editorHasDocumentSelectionFormattingProvider",!1,d.N("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),e.hasMultipleDocumentFormattingProvider=new u.uy("editorHasMultipleDocumentFormattingProvider",!1,d.N("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),e.hasMultipleDocumentSelectionFormattingProvider=new u.uy("editorHasMultipleDocumentSelectionFormattingProvider",!1,d.N("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(l||(l={}))},3155:function(e,o,s){"use strict";s.d(o,{mY:function(){return b},gX:function(){return p},MY:function(){return _},DI:function(){return EncodedTokenizationResult},AD:function(){return FoldingRangeKind},gl:function(){return w},bw:function(){return m},WW:function(){return f},uZ:function(){return C},WU:function(){return Token},NX:function(){return TokenMetadata},RW:function(){return y},hG:function(){return TokenizationResult},vx:function(){return isLocationLink}});var l=s(666),d=s(4314),u=s(4669),g=s(5976),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class TokenizationRegistry{constructor(){this._map=new Map,this._factories=new Map,this._onDidChange=new u.Q5,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,o){return this._map.set(e,o),this.fire([e]),(0,g.OF)((()=>{this._map.get(e)===o&&(this._map.delete(e),this.fire([e]))}))}registerFactory(e,o){var s;null===(s=this._factories.get(e))||void 0===s||s.dispose();const l=new TokenizationSupportFactoryData(this,e,o);return this._factories.set(e,l),(0,g.OF)((()=>{const o=this._factories.get(e);o&&o===l&&(this._factories.delete(e),o.dispose())}))}getOrCreate(e){return __awaiter(this,void 0,void 0,(function*(){const o=this.get(e);if(o)return o;const s=this._factories.get(e);return!s||s.isResolved?null:(yield s.resolve(),this.get(e))}))}get(e){return this._map.get(e)||null}isResolved(e){const o=this.get(e);if(o)return!0;const s=this._factories.get(e);return!(s&&!s.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class TokenizationSupportFactoryData extends g.JT{constructor(e,o,s){super(),this._registry=e,this._languageId=o,this._factory=s,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return __awaiter(this,void 0,void 0,(function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}))}_create(){return __awaiter(this,void 0,void 0,(function*(){const e=yield Promise.resolve(this._factory.createTokenizationSupport());this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}))}}var p,m,f,_,C,b,w,S=s(3046);class TokenMetadata{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static getFontStyle(e){return(15360&e)>>>10}static getForeground(e){return(8372224&e)>>>14}static getBackground(e){return(4286578688&e)>>>23}static getClassNameFromMetadata(e){const o=this.getForeground(e);let s="mtk"+o;const l=this.getFontStyle(e);return 1&l&&(s+=" mtki"),2&l&&(s+=" mtkb"),4&l&&(s+=" mtku"),8&l&&(s+=" mtks"),s}static getInlineStyleFromMetadata(e,o){const s=this.getForeground(e),l=this.getFontStyle(e);let d=`color: ${o[s]};`;1&l&&(d+="font-style: italic;"),2&l&&(d+="font-weight: bold;");let u="";return 4&l&&(u+=" underline"),8&l&&(u+=" line-through"),u&&(d+=`text-decoration:${u};`),d}static getPresentationFromMetadata(e){const o=this.getForeground(e),s=this.getFontStyle(e);return{foreground:o,italic:Boolean(1&s),bold:Boolean(2&s),underline:Boolean(4&s),strikethrough:Boolean(8&s)}}}class Token{constructor(e,o,s){this._tokenBrand=void 0,this.offset=e,this.type=o,this.language=s}toString(){return"("+this.offset+", "+this.type+")"}}class TokenizationResult{constructor(e,o){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=o}}class EncodedTokenizationResult{constructor(e,o){this._encodedTokenizationResultBrand=void 0,this.tokens=e,this.endState=o}}function isLocationLink(e){return e&&l.o.isUri(e.uri)&&d.e.isIRange(e.range)&&(d.e.isIRange(e.originSelectionRange)||d.e.isIRange(e.targetSelectionRange))}(function(e){const o=new Map;function toIcon(e){let s=o.get(e);return s||(console.info("No codicon found for CompletionItemKind "+e),s=S.lA.symbolProperty),s}o.set(0,S.lA.symbolMethod),o.set(1,S.lA.symbolFunction),o.set(2,S.lA.symbolConstructor),o.set(3,S.lA.symbolField),o.set(4,S.lA.symbolVariable),o.set(5,S.lA.symbolClass),o.set(6,S.lA.symbolStruct),o.set(7,S.lA.symbolInterface),o.set(8,S.lA.symbolModule),o.set(9,S.lA.symbolProperty),o.set(10,S.lA.symbolEvent),o.set(11,S.lA.symbolOperator),o.set(12,S.lA.symbolUnit),o.set(13,S.lA.symbolValue),o.set(15,S.lA.symbolEnum),o.set(14,S.lA.symbolConstant),o.set(15,S.lA.symbolEnum),o.set(16,S.lA.symbolEnumMember),o.set(17,S.lA.symbolKeyword),o.set(27,S.lA.symbolSnippet),o.set(18,S.lA.symbolText),o.set(19,S.lA.symbolColor),o.set(20,S.lA.symbolFile),o.set(21,S.lA.symbolReference),o.set(22,S.lA.symbolCustomColor),o.set(23,S.lA.symbolFolder),o.set(24,S.lA.symbolTypeParameter),o.set(25,S.lA.account),o.set(26,S.lA.issues),e.toIcon=toIcon;const s=new Map;function fromString(e,o){let l=s.get(e);return"undefined"!==typeof l||o||(l=9),l}s.set("method",0),s.set("function",1),s.set("constructor",2),s.set("field",3),s.set("variable",4),s.set("class",5),s.set("struct",6),s.set("interface",7),s.set("module",8),s.set("property",9),s.set("event",10),s.set("operator",11),s.set("unit",12),s.set("value",13),s.set("constant",14),s.set("enum",15),s.set("enum-member",16),s.set("enumMember",16),s.set("keyword",17),s.set("snippet",27),s.set("text",18),s.set("color",19),s.set("file",20),s.set("reference",21),s.set("customcolor",22),s.set("folder",23),s.set("type-parameter",24),s.set("typeParameter",24),s.set("account",25),s.set("issue",26),e.fromString=fromString})(p||(p={})),function(e){e[e["Automatic"]=0]="Automatic",e[e["Explicit"]=1]="Explicit"}(m||(m={})),function(e){e[e["Invoke"]=1]="Invoke",e[e["TriggerCharacter"]=2]="TriggerCharacter",e[e["ContentChange"]=3]="ContentChange"}(f||(f={})),function(e){e[e["Text"]=0]="Text",e[e["Read"]=1]="Read",e[e["Write"]=2]="Write"}(_||(_={})),function(e){const o=new Map;function toIcon(e){let s=o.get(e);return s||(console.info("No codicon found for SymbolKind "+e),s=S.lA.symbolProperty),s}o.set(0,S.lA.symbolFile),o.set(1,S.lA.symbolModule),o.set(2,S.lA.symbolNamespace),o.set(3,S.lA.symbolPackage),o.set(4,S.lA.symbolClass),o.set(5,S.lA.symbolMethod),o.set(6,S.lA.symbolProperty),o.set(7,S.lA.symbolField),o.set(8,S.lA.symbolConstructor),o.set(9,S.lA.symbolEnum),o.set(10,S.lA.symbolInterface),o.set(11,S.lA.symbolFunction),o.set(12,S.lA.symbolVariable),o.set(13,S.lA.symbolConstant),o.set(14,S.lA.symbolString),o.set(15,S.lA.symbolNumber),o.set(16,S.lA.symbolBoolean),o.set(17,S.lA.symbolArray),o.set(18,S.lA.symbolObject),o.set(19,S.lA.symbolKey),o.set(20,S.lA.symbolNull),o.set(21,S.lA.symbolEnumMember),o.set(22,S.lA.symbolStruct),o.set(23,S.lA.symbolEvent),o.set(24,S.lA.symbolOperator),o.set(25,S.lA.symbolTypeParameter),e.toIcon=toIcon}(C||(C={}));class FoldingRangeKind{constructor(e){this.value=e}}FoldingRangeKind.Comment=new FoldingRangeKind("comment"),FoldingRangeKind.Imports=new FoldingRangeKind("imports"),FoldingRangeKind.Region=new FoldingRangeKind("region"),function(e){function is(e){return!(!e||"object"!==typeof e)&&("string"===typeof e.id&&"string"===typeof e.title)}e.is=is}(b||(b={})),function(e){e[e["Type"]=1]="Type",e[e["Parameter"]=2]="Parameter"}(w||(w={}));const y=new TokenizationRegistry},2042:function(e,o,s){"use strict";s.d(o,{O:function(){return d}});var l=s(2065);const d=(0,l.yh)("languageService")},9119:function(e,o,s){"use strict";var l;s.d(o,{V6:function(){return StandardAutoClosingPairConditional},c$:function(){return AutoClosingPairs},wU:function(){return l}}),function(e){e[e["None"]=0]="None",e[e["Indent"]=1]="Indent",e[e["IndentOutdent"]=2]="IndentOutdent",e[e["Outdent"]=3]="Outdent"}(l||(l={}));class StandardAutoClosingPairConditional{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let o=0,s=e.notIn.length;o<s;o++){const s=e.notIn[o];switch(s){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,o){if(0===e.getTokenCount())return!0;const s=e.findTokenIndexAtOffset(o-2),l=e.getStandardTokenType(s);return this.isOK(l)}_findNeutralCharacterInRange(e,o){for(let s=e;s<=o;s++){const e=String.fromCharCode(s);if(!this.open.includes(e)&&!this.close.includes(e))return e}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class AutoClosingPairs{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const o of e)appendEntry(this.autoClosingPairsOpenByStart,o.open.charAt(0),o),appendEntry(this.autoClosingPairsOpenByEnd,o.open.charAt(o.open.length-1),o),appendEntry(this.autoClosingPairsCloseByStart,o.close.charAt(0),o),appendEntry(this.autoClosingPairsCloseByEnd,o.close.charAt(o.close.length-1),o),1===o.close.length&&1===o.open.length&&appendEntry(this.autoClosingPairsCloseSingleChar,o.close,o)}}function appendEntry(e,o,s){e.has(o)?e.get(o).push(s):e.set(o,[s])}},5638:function(e,o,s){"use strict";s.d(o,{c_:function(){return L},zu:function(){return N}});var l=s(4669),d=s(5976),u=s(2677),g=s(270),p=s(9119),m=s(9111);class CharacterPairSupport{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map((e=>new p.V6(e))):e.brackets?this._autoClosingPairs=e.brackets.map((e=>new p.V6({open:e[0],close:e[1]}))):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=filterValidBrackets(e.colorizedBracketPairs.map((e=>[e[0],e[1]]))):e.brackets?this._colorizedBracketPairs=filterValidBrackets(e.brackets.map((e=>[e[0],e[1]])).filter((e=>!("<"===e[0]&&">"===e[1])))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const o=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new p.V6({open:o.open,close:o.close||""}))}this._autoCloseBefore="string"===typeof e.autoCloseBefore?e.autoCloseBefore:CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}function filterValidBrackets(e){return e.filter((([e,o])=>""!==e&&""!==o))}CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=";:.,=}])> \n\t";var f=s(9488),_=s(4302);class BracketElectricCharacterSupport{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const o of this._richEditBrackets.brackets)for(const s of o.close){const o=s.charAt(s.length-1);e.push(o)}return(0,f.EB)(e)}onElectricCharacter(e,o,s){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;const l=o.findTokenIndexAtOffset(s-1);if((0,m.Bu)(o.getStandardTokenType(l)))return null;const d=this._richEditBrackets.reversedRegex,u=o.getLineContent().substring(0,s-1)+e,g=_.Vr.findPrevBracketInRange(d,1,u,0,u.length);if(!g)return null;const p=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),f=this._richEditBrackets.textIsOpenBracket[p];if(f)return null;const C=o.getActualLineContentBefore(g.startColumn-1);return/^\s*$/.test(C)?{matchOpenBracket:p}:null}}function resetGlobalRegex(e){return e.global&&(e.lastIndex=0),!0}class IndentRulesSupport{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&resetGlobalRegex(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&resetGlobalRegex(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&resetGlobalRegex(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&resetGlobalRegex(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let o=0;return this.shouldIncrease(e)&&(o+=1),this.shouldDecrease(e)&&(o+=2),this.shouldIndentNextLine(e)&&(o+=4),this.shouldIgnore(e)&&(o+=8),o}}var C=s(7301);class OnEnterSupport{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach((e=>{const o=OnEnterSupport._createOpenBracketRegExp(e[0]),s=OnEnterSupport._createCloseBracketRegExp(e[1]);o&&s&&this._brackets.push({open:e[0],openRegExp:o,close:e[1],closeRegExp:s})})),this._regExpRules=e.onEnterRules||[]}onEnter(e,o,s,l){if(e>=3)for(let d=0,u=this._regExpRules.length;d<u;d++){const e=this._regExpRules[d],u=[{reg:e.beforeText,text:s},{reg:e.afterText,text:l},{reg:e.previousLineText,text:o}].every((e=>!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text))));if(u)return e.action}if(e>=2&&s.length>0&&l.length>0)for(let d=0,u=this._brackets.length;d<u;d++){const e=this._brackets[d];if(e.openRegExp.test(s)&&e.closeRegExp.test(l))return{indentAction:p.wU.IndentOutdent}}if(e>=2&&s.length>0)for(let d=0,u=this._brackets.length;d<u;d++){const e=this._brackets[d];if(e.openRegExp.test(s))return{indentAction:p.wU.Indent}}return null}static _createOpenBracketRegExp(e){let o=u.ec(e);return/\B/.test(o.charAt(0))||(o="\\b"+o),o+="\\s*$",OnEnterSupport._safeRegExp(o)}static _createCloseBracketRegExp(e){let o=u.ec(e);return/\B/.test(o.charAt(o.length-1))||(o+="\\b"),o="^\\s*"+o,OnEnterSupport._safeRegExp(o)}static _safeRegExp(e){try{return new RegExp(e)}catch(o){return(0,C.dL)(o),null}}}var b=s(2065),w=s(3108),S=s(2042),y=s(5026),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};class LanguageConfigurationServiceChangeEvent{constructor(e){this.languageId=e}affects(e){return!this.languageId||this.languageId===e}}const L=(0,b.yh)("languageConfigurationService");let x=class LanguageConfigurationService extends d.JT{constructor(e,o){super(),this.configurationService=e,this.languageService=o,this.onDidChangeEmitter=this._register(new l.Q5),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const s=new Set(Object.values(k));this._register(this.configurationService.onDidChangeConfiguration((e=>{const o=e.change.keys.some((e=>s.has(e))),l=e.change.overrides.filter((([e,o])=>o.some((e=>s.has(e))))).map((([e])=>e));if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(void 0));else for(const s of l)this.languageService.isRegisteredLanguageId(s)&&(this.configurations.delete(s),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(s)))}))),this._register(N.onDidChange((e=>{this.configurations.delete(e.languageId),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(e.languageId))})))}getLanguageConfiguration(e){let o=this.configurations.get(e);return o||(o=computeConfig(e,this.configurationService,this.languageService),this.configurations.set(e,o)),o}};function computeConfig(e,o,s){let l=N.getLanguageConfiguration(e);if(!l){if(!s.isRegisteredLanguageId(e))throw new Error(`Language id "${e}" is not configured nor known`);l=new ResolvedLanguageConfiguration(e,{})}const d=getCustomizedLanguageConfig(l.languageId,o),u=combineLanguageConfigurations([l.underlyingConfig,d]),g=new ResolvedLanguageConfiguration(l.languageId,u);return g}x=__decorate([__param(0,w.Ui),__param(1,S.O)],x);const k={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function getCustomizedLanguageConfig(e,o){const s=o.getValue(k.brackets,{overrideIdentifier:e}),l=o.getValue(k.colorizedBracketPairs,{overrideIdentifier:e});return{brackets:validateBracketPairs(s),colorizedBracketPairs:validateBracketPairs(l)}}function validateBracketPairs(e){if(Array.isArray(e))return e.map((e=>{if(Array.isArray(e)&&2===e.length)return[e[0],e[1]]})).filter((e=>!!e))}class LanguageConfigurationChangeEvent{constructor(e){this.languageId=e}}class LanguageConfigurationRegistryImpl{constructor(){this._entries=new Map,this._onDidChange=new l.Q5,this.onDidChange=this._onDidChange.event}register(e,o,s=0){let l=this._entries.get(e);l||(l=new ComposedLanguageConfiguration(e),this._entries.set(e,l));const u=l.register(o,s);return this._onDidChange.fire(new LanguageConfigurationChangeEvent(e)),(0,d.OF)((()=>{u.dispose(),this._onDidChange.fire(new LanguageConfigurationChangeEvent(e))}))}getLanguageConfiguration(e){const o=this._entries.get(e);return(null===o||void 0===o?void 0:o.getResolvedConfiguration())||null}getComments(e){const o=this.getLanguageConfiguration(e);return o&&o.comments||null}getIndentRulesSupport(e){const o=this.getLanguageConfiguration(e);return o&&o.indentRulesSupport||null}getPrecedingValidLine(e,o,s){const l=e.getLanguageIdAtPosition(o,0);if(o>1){let d,u=-1;for(d=o-1;d>=1;d--){if(e.getLanguageIdAtPosition(d,0)!==l)return u;const o=e.getLineContent(d);if(!s.shouldIgnore(o)&&!/^\s+$/.test(o)&&""!==o)return d;u=d}}return-1}getInheritIndentForLine(e,o,s,l=!0){if(e<4)return null;const d=this.getIndentRulesSupport(o.getLanguageId());if(!d)return null;if(s<=1)return{indentation:"",action:null};const g=this.getPrecedingValidLine(o,s,d);if(g<0)return null;if(g<1)return{indentation:"",action:null};const m=o.getLineContent(g);if(d.shouldIncrease(m)||d.shouldIndentNextLine(m))return{indentation:u.V8(m),action:p.wU.Indent,line:g};if(d.shouldDecrease(m))return{indentation:u.V8(m),action:null,line:g};{if(1===g)return{indentation:u.V8(o.getLineContent(g)),action:null,line:g};const e=g-1,s=d.getIndentMetadata(o.getLineContent(e));if(!(3&s)&&4&s){let s=0;for(let l=e-1;l>0;l--)if(!d.shouldIndentNextLine(o.getLineContent(l))){s=l;break}return{indentation:u.V8(o.getLineContent(s+1)),action:null,line:s+1}}if(l)return{indentation:u.V8(o.getLineContent(g)),action:null,line:g};for(let l=g;l>0;l--){const e=o.getLineContent(l);if(d.shouldIncrease(e))return{indentation:u.V8(e),action:p.wU.Indent,line:l};if(d.shouldIndentNextLine(e)){let e=0;for(let s=l-1;s>0;s--)if(!d.shouldIndentNextLine(o.getLineContent(l))){e=s;break}return{indentation:u.V8(o.getLineContent(e+1)),action:null,line:e+1}}if(d.shouldDecrease(e))return{indentation:u.V8(e),action:null,line:l}}return{indentation:u.V8(o.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,o,s,l,d){if(e<4)return null;const g=this.getLanguageConfiguration(s);if(!g)return null;const m=this.getIndentRulesSupport(s);if(!m)return null;const f=this.getInheritIndentForLine(e,o,l),_=o.getLineContent(l);if(f){const s=f.line;if(void 0!==s){const l=g.onEnter(e,"",o.getLineContent(s),"");if(l){let e=u.V8(o.getLineContent(s));return l.removeText&&(e=e.substring(0,e.length-l.removeText)),l.indentAction===p.wU.Indent||l.indentAction===p.wU.IndentOutdent?e=d.shiftIndent(e):l.indentAction===p.wU.Outdent&&(e=d.unshiftIndent(e)),m.shouldDecrease(_)&&(e=d.unshiftIndent(e)),l.appendText&&(e+=l.appendText),u.V8(e)}}return m.shouldDecrease(_)?f.action===p.wU.Indent?f.indentation:d.unshiftIndent(f.indentation):f.action===p.wU.Indent?d.shiftIndent(f.indentation):f.indentation}return null}getIndentForEnter(e,o,s,l){if(e<4)return null;o.forceTokenization(s.startLineNumber);const d=o.getLineTokens(s.startLineNumber),g=(0,m.wH)(d,s.startColumn-1),f=g.getLineContent();let _,C,b=!1;if(g.firstCharOffset>0&&d.getLanguageId(0)!==g.languageId?(b=!0,_=f.substr(0,s.startColumn-1-g.firstCharOffset)):_=d.getLineContent().substring(0,s.startColumn-1),s.isEmpty())C=f.substr(s.startColumn-1-g.firstCharOffset);else{const e=this.getScopedLineTokens(o,s.endLineNumber,s.endColumn);C=e.getLineContent().substr(s.endColumn-1-g.firstCharOffset)}const w=this.getIndentRulesSupport(g.languageId);if(!w)return null;const S=_,y=u.V8(_),L={getLineTokens:e=>o.getLineTokens(e),getLanguageId:()=>o.getLanguageId(),getLanguageIdAtPosition:(e,s)=>o.getLanguageIdAtPosition(e,s),getLineContent:e=>e===s.startLineNumber?S:o.getLineContent(e)},x=u.V8(d.getLineContent()),k=this.getInheritIndentForLine(e,L,s.startLineNumber+1);if(!k){const e=b?x:y;return{beforeEnter:e,afterEnter:e}}let N=b?x:k.indentation;return k.action===p.wU.Indent&&(N=l.shiftIndent(N)),w.shouldDecrease(C)&&(N=l.unshiftIndent(N)),{beforeEnter:b?x:y,afterEnter:N}}getIndentActionForType(e,o,s,l,d){if(e<4)return null;const u=this.getScopedLineTokens(o,s.startLineNumber,s.startColumn);if(u.firstCharOffset)return null;const g=this.getIndentRulesSupport(u.languageId);if(!g)return null;const m=u.getLineContent(),f=m.substr(0,s.startColumn-1-u.firstCharOffset);let _;if(s.isEmpty())_=m.substr(s.startColumn-1-u.firstCharOffset);else{const e=this.getScopedLineTokens(o,s.endLineNumber,s.endColumn);_=e.getLineContent().substr(s.endColumn-1-u.firstCharOffset)}if(!g.shouldDecrease(f+_)&&g.shouldDecrease(f+l+_)){const l=this.getInheritIndentForLine(e,o,s.startLineNumber,!1);if(!l)return null;let u=l.indentation;return l.action!==p.wU.Indent&&(u=d.unshiftIndent(u)),u}return null}getIndentMetadata(e,o){const s=this.getIndentRulesSupport(e.getLanguageId());return s?o<1||o>e.getLineCount()?null:s.getIndentMetadata(e.getLineContent(o)):null}getEnterAction(e,o,s){const l=this.getScopedLineTokens(o,s.startLineNumber,s.startColumn),d=this.getLanguageConfiguration(l.languageId);if(!d)return null;const u=l.getLineContent(),g=u.substr(0,s.startColumn-1-l.firstCharOffset);let m;if(s.isEmpty())m=u.substr(s.startColumn-1-l.firstCharOffset);else{const e=this.getScopedLineTokens(o,s.endLineNumber,s.endColumn);m=e.getLineContent().substr(s.endColumn-1-l.firstCharOffset)}let f="";if(s.startLineNumber>1&&0===l.firstCharOffset){const e=this.getScopedLineTokens(o,s.startLineNumber-1);e.languageId===l.languageId&&(f=e.getLineContent())}const _=d.onEnter(e,f,g,m);if(!_)return null;const C=_.indentAction;let b=_.appendText;const w=_.removeText||0;b?C===p.wU.Indent&&(b="\t"+b):b=C===p.wU.Indent||C===p.wU.IndentOutdent?"\t":"";let S=this.getIndentationAtPosition(o,s.startLineNumber,s.startColumn);return w&&(S=S.substring(0,S.length-w)),{indentAction:C,appendText:b,removeText:w,indentation:S}}getIndentationAtPosition(e,o,s){const l=e.getLineContent(o);let d=u.V8(l);return d.length>s-1&&(d=d.substring(0,s-1)),d}getScopedLineTokens(e,o,s){e.forceTokenization(o);const l=e.getLineTokens(o),d="undefined"===typeof s?e.getLineMaxColumn(o)-1:s-1;return(0,m.wH)(l,d)}}const N=new LanguageConfigurationRegistryImpl;class ComposedLanguageConfiguration{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,o){const s=new LanguageConfigurationContribution(e,o,++this._order);return this._entries.push(s),this._resolved=null,(0,d.OF)((()=>{for(let e=0;e<this._entries.length;e++)if(this._entries[e]===s){this._entries.splice(e,1),this._resolved=null;break}}))}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new ResolvedLanguageConfiguration(this.languageId,e))}return this._resolved}_resolve(){return 0===this._entries.length?null:(this._entries.sort(LanguageConfigurationContribution.cmp),combineLanguageConfigurations(this._entries.map((e=>e.configuration))))}}function combineLanguageConfigurations(e){let o={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const s of e)o={comments:s.comments||o.comments,brackets:s.brackets||o.brackets,wordPattern:s.wordPattern||o.wordPattern,indentationRules:s.indentationRules||o.indentationRules,onEnterRules:s.onEnterRules||o.onEnterRules,autoClosingPairs:s.autoClosingPairs||o.autoClosingPairs,surroundingPairs:s.surroundingPairs||o.surroundingPairs,autoCloseBefore:s.autoCloseBefore||o.autoCloseBefore,folding:s.folding||o.folding,colorizedBracketPairs:s.colorizedBracketPairs||o.colorizedBracketPairs,__electricCharacterSupport:s.__electricCharacterSupport||o.__electricCharacterSupport};return o}class LanguageConfigurationContribution{constructor(e,o,s){this.configuration=e,this.priority=o,this.order=s}static cmp(e,o){return e.priority===o.priority?e.order-o.order:e.priority-o.priority}}class ResolvedLanguageConfiguration{constructor(e,o){this.languageId=e,this.underlyingConfig=o,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new OnEnterSupport(this.underlyingConfig):null,this.comments=ResolvedLanguageConfiguration._handleComments(this.underlyingConfig),this.characterPair=new CharacterPairSupport(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||g.Af,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new IndentRulesSupport(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return(0,g.eq)(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new _.EA(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new BracketElectricCharacterSupport(this.brackets)),this._electricCharacter}onEnter(e,o,s,l){return this._onEnterSupport?this._onEnterSupport.onEnter(e,o,s,l):null}getAutoClosingPairs(){return new p.c$(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet()}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const o=e.comments;if(!o)return null;const s={};if(o.lineComment&&(s.lineCommentToken=o.lineComment),o.blockComment){const[e,l]=o.blockComment;s.blockCommentStartToken=e,s.blockCommentEndToken=l}return s}}(0,y.z)(L,x)},8801:function(e,o,s){"use strict";s.d(o,{bd:function(){return C},dQ:function(){return _}});var l=s(3580),d=s(4669),u=s(5638),g=s(9872),p=s(1170),m=s(3193);const f={ModesRegistry:"editor.modesRegistry"};class EditorModesRegistry{constructor(){this._onDidChangeLanguages=new d.Q5,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let o=0,s=this._languages.length;o<s;o++)if(this._languages[o]===e)return void this._languages.splice(o,1)}}}getLanguages(){return this._languages}}const _=new EditorModesRegistry;g.B.add(f.ModesRegistry,_);const C="plaintext",b=".txt";_.registerLanguage({id:C,extensions:[b],aliases:[l.N("plainText.alias","Plain Text"),"text"],mimetypes:[p.v.text]}),u.zu.register(C,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0),g.B.as(m.IP.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}])},276:function(e,o,s){"use strict";s.d(o,{Dy:function(){return nullTokenizeEncoded},Ri:function(){return nullTokenize},TJ:function(){return d}});var l=s(3155);const d=new class{clone(){return this}equals(e){return this===e}};function nullTokenize(e,o){return new l.hG([new l.WU(0,"",e)],o)}function nullTokenizeEncoded(e,o){const s=new Uint32Array(2);return s[0]=0,s[1]=(16384|e<<0|2<<23)>>>0,new l.DI(s,null===o?d:o)}},9111:function(e,o,s){"use strict";function createScopedLineTokens(e,o){const s=e.getCount(),l=e.findTokenIndexAtOffset(o),d=e.getLanguageId(l);let u=l;while(u+1<s&&e.getLanguageId(u+1)===d)u++;let g=l;while(g>0&&e.getLanguageId(g-1)===d)g--;return new ScopedLineTokens(e,d,g,u+1,e.getStartOffset(g),e.getEndOffset(u))}s.d(o,{Bu:function(){return ignoreBracketsInToken},wH:function(){return createScopedLineTokens}});class ScopedLineTokens{constructor(e,o,s,l,d,u){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=o,this._firstTokenIndex=s,this._lastTokenIndex=l,this.firstCharOffset=d,this._lastCharOffset=u}getLineContent(){const e=this._actual.getLineContent();return e.substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){const o=this._actual.getLineContent();return o.substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function ignoreBracketsInToken(e){return 0!==(3&e)}},4302:function(e,o,s){"use strict";s.d(o,{EA:function(){return RichEditBrackets},Vr:function(){return BracketsUtils}});var l=s(2677),d=s(72),u=s(4314);class RichEditBracket{constructor(e,o,s,l,d,u){this._richEditBracketBrand=void 0,this.languageId=e,this.index=o,this.open=s,this.close=l,this.forwardRegex=d,this.reversedRegex=u,this._openSet=RichEditBracket._toSet(this.open),this._closeSet=RichEditBracket._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const o=new Set;for(const s of e)o.add(s);return o}}function groupFuzzyBrackets(e){const o=e.length;e=e.map((e=>[e[0].toLowerCase(),e[1].toLowerCase()]));const s=[];for(let d=0;d<o;d++)s[d]=d;const areOverlapping=(e,o)=>{const[s,l]=e,[d,u]=o;return s===d||s===u||l===d||l===u},mergeGroups=(e,l)=>{const d=Math.min(e,l),u=Math.max(e,l);for(let g=0;g<o;g++)s[g]===u&&(s[g]=d)};for(let d=0;d<o;d++){const l=e[d];for(let u=d+1;u<o;u++){const o=e[u];areOverlapping(l,o)&&mergeGroups(s[d],s[u])}}const l=[];for(let d=0;d<o;d++){const u=[],g=[];for(let l=0;l<o;l++)if(s[l]===d){const[o,s]=e[l];u.push(o),g.push(s)}u.length>0&&l.push({open:u,close:g})}return l}class RichEditBrackets{constructor(e,o){this._richEditBracketsBrand=void 0;const s=groupFuzzyBrackets(o);this.brackets=s.map(((o,l)=>new RichEditBracket(e,l,o.open,o.close,getRegexForBracketPair(o.open,o.close,s,l),getReversedRegexForBracketPair(o.open,o.close,s,l)))),this.forwardRegex=getRegexForBrackets(this.brackets),this.reversedRegex=getReversedRegexForBrackets(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const l of this.brackets){for(const e of l.open)this.textIsBracket[e]=l,this.textIsOpenBracket[e]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,e.length);for(const e of l.close)this.textIsBracket[e]=l,this.textIsOpenBracket[e]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,e.length)}}}function collectSuperstrings(e,o,s,l){for(let d=0,u=o.length;d<u;d++){if(d===s)continue;const u=o[d];for(const o of u.open)o.indexOf(e)>=0&&l.push(o);for(const o of u.close)o.indexOf(e)>=0&&l.push(o)}}function lengthcmp(e,o){return e.length-o.length}function unique(e){if(e.length<=1)return e;const o=[],s=new Set;for(const l of e)s.has(l)||(o.push(l),s.add(l));return o}function getRegexForBracketPair(e,o,s,l){let d=[];d=d.concat(e),d=d.concat(o);for(let u=0,g=d.length;u<g;u++)collectSuperstrings(d[u],s,l,d);return d=unique(d),d.sort(lengthcmp),d.reverse(),createBracketOrRegExp(d)}function getReversedRegexForBracketPair(e,o,s,l){let d=[];d=d.concat(e),d=d.concat(o);for(let u=0,g=d.length;u<g;u++)collectSuperstrings(d[u],s,l,d);return d=unique(d),d.sort(lengthcmp),d.reverse(),createBracketOrRegExp(d.map(g))}function getRegexForBrackets(e){let o=[];for(const s of e){for(const e of s.open)o.push(e);for(const e of s.close)o.push(e)}return o=unique(o),createBracketOrRegExp(o)}function getReversedRegexForBrackets(e){let o=[];for(const s of e){for(const e of s.open)o.push(e);for(const e of s.close)o.push(e)}return o=unique(o),createBracketOrRegExp(o.map(g))}function prepareBracketForRegExp(e){const o=/^[\w ]+$/.test(e);return e=l.ec(e),o?`\\b${e}\\b`:e}function createBracketOrRegExp(e){const o=`(${e.map(prepareBracketForRegExp).join(")|(")})`;return l.GF(o,!0)}const g=function(){function reverse(e){if(d.lZ){const o=new Uint16Array(e.length);let s=0;for(let l=e.length-1;l>=0;l--)o[s++]=e.charCodeAt(l);return d.oe().decode(o)}{const o=[];let s=0;for(let l=e.length-1;l>=0;l--)o[s++]=e.charAt(l);return o.join("")}}let e=null,o=null;return function toReversedString(s){return e!==s&&(e=s,o=reverse(e)),o}}();class BracketsUtils{static _findPrevBracketInText(e,o,s,l){const d=s.match(e);if(!d)return null;const g=s.length-(d.index||0),p=d[0].length,m=l+g;return new u.e(o,m-p+1,o,m+1)}static findPrevBracketInRange(e,o,s,l,d){const u=g(s),p=u.substring(s.length-d,s.length-l);return this._findPrevBracketInText(e,o,p,l)}static findNextBracketInText(e,o,s,l){const d=s.match(e);if(!d)return null;const g=d.index||0,p=d[0].length;if(0===p)return null;const m=l+g;return new u.e(o,m+1,o,m+1+p)}static findNextBracketInRange(e,o,s,l,d){const u=s.substring(l,d);return this.findNextBracketInText(e,o,u,l)}}},2963:function(e,o,s){"use strict";s.d(o,{C2:function(){return tokenizeToString},Fq:function(){return tokenizeLineToHTML}});var l=s(2677),d=s(7378),u=s(3155),g=s(276),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const p={getInitialState:()=>g.TJ,tokenizeEncoded:(e,o,s)=>(0,g.Dy)(0,s)};function tokenizeToString(e,o,s){return __awaiter(this,void 0,void 0,(function*(){if(!s)return _tokenizeToString(o,e.languageIdCodec,p);const l=yield u.RW.getOrCreate(s);return _tokenizeToString(o,e.languageIdCodec,l||p)}))}function tokenizeLineToHTML(e,o,s,l,d,u,g){let p="<div>",m=l,f=0,_=!0;for(let C=0,b=o.getCount();C<b;C++){const b=o.getEndOffset(C);if(b<=l)continue;let w="";for(;m<b&&m<d;m++){const o=e.charCodeAt(m);switch(o){case 9:{let e=u-(m+f)%u;f+=e-1;while(e>0)g&&_?(w+="&#160;",_=!1):(w+=" ",_=!0),e--;break}case 60:w+="&lt;",_=!1;break;case 62:w+="&gt;",_=!1;break;case 38:w+="&amp;",_=!1;break;case 0:w+="&#00;",_=!1;break;case 65279:case 8232:case 8233:case 133:w+="�",_=!1;break;case 13:w+="&#8203",_=!1;break;case 32:g&&_?(w+="&#160;",_=!1):(w+=" ",_=!0);break;default:w+=String.fromCharCode(o),_=!1}}if(p+=`<span style="${o.getInlineStyle(C,s)}">${w}</span>`,b>d||m>=d)break}return p+="</div>",p}function _tokenizeToString(e,o,s){let u='<div class="monaco-tokenized-source">';const g=l.uq(e);let p=s.getInitialState();for(let m=0,f=g.length;m<f;m++){const e=g[m];m>0&&(u+="<br/>");const f=s.tokenizeEncoded(e,!0,p);d.A.convertToEndOffset(f.tokens,e.length);const _=new d.A(f.tokens,e,o),C=_.inflate();let b=0;for(let o=0,s=C.getCount();o<s;o++){const s=C.getClassName(o),d=C.getEndOffset(o);u+=`<span class="${s}">${l.YU(e.substring(b,d))}</span>`,b=d}p=f.endState}return u+="</div>",u}},4973:function(e,o,s){"use strict";s.d(o,{F5:function(){return d},Qi:function(){return ValidAnnotatedEditOperation},RM:function(){return u},Tx:function(){return SearchData},dJ:function(){return TextModelResolvedOptions},je:function(){return ApplyEditsResult},pt:function(){return shouldSynchronizeModel},sh:function(){return l},tk:function(){return FindMatch}});var l,d,u,g=s(6248);(function(e){e[e["Left"]=1]="Left",e[e["Center"]=2]="Center",e[e["Right"]=4]="Right",e[e["Full"]=7]="Full"})(l||(l={})),function(e){e[e["Inline"]=1]="Inline",e[e["Gutter"]=2]="Gutter"}(d||(d={})),function(e){e[e["Both"]=0]="Both",e[e["Right"]=1]="Right",e[e["Left"]=2]="Left",e[e["None"]=3]="None"}(u||(u={}));class TextModelResolvedOptions{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|e.tabSize),this.indentSize=0|e.tabSize,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&(0,g.fS)(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class FindMatch{constructor(e,o){this._findMatchBrand=void 0,this.range=e,this.matches=o}}class ValidAnnotatedEditOperation{constructor(e,o,s,l,d,u){this.identifier=e,this.range=o,this.text=s,this.forceMoveMarkers=l,this.isAutoWhitespaceEdit=d,this._isTracked=u}}class SearchData{constructor(e,o,s){this.regex=e,this.wordSeparators=o,this.simpleSearch=s}}class ApplyEditsResult{constructor(e,o,s){this.reverseEdits=e,this.changes=o,this.trimAutoWhitespaceLineNumbers=s}}function shouldSynchronizeModel(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}},1720:function(e,o,s){"use strict";s.d(o,{BH:function(){return TextAstNode},Dm:function(){return InvalidBracketAstNode},Kd:function(){return PairAstNode},Y0:function(){return ListAstNode},n2:function(){return BracketAstNode}});var l=s(7988),d=s(5035),u=s(1761);class BaseAstNode{constructor(e){this._length=e}get length(){return this._length}}class PairAstNode extends BaseAstNode{constructor(e,o,s,l,d){super(e),this.openingBracket=o,this.child=s,this.closingBracket=l,this.missingOpeningBracketIds=d}static create(e,o,s){let l=e.length;return o&&(l=(0,d.Ii)(l,o.length)),s&&(l=(0,d.Ii)(l,s.length)),new PairAstNode(l,e,o,s,o?o.missingOpeningBracketIds:u.tS.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return null!==this.closingBracket&&!e.intersects(this.missingOpeningBracketIds)}deepClone(){return new PairAstNode(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,o){return this.child?this.child.computeMinIndentation((0,d.Ii)(e,this.openingBracket.length),o):Number.MAX_SAFE_INTEGER}}class ListAstNode extends BaseAstNode{constructor(e,o,s){super(e),this.listHeight=o,this._missingOpeningBracketIds=s,this.cachedMinIndentation=-1}static create23(e,o,s,l=!1){let u=e.length,g=e.missingOpeningBracketIds;if(e.listHeight!==o.listHeight)throw new Error("Invalid list heights");if(u=(0,d.Ii)(u,o.length),g=g.merge(o.missingOpeningBracketIds),s){if(e.listHeight!==s.listHeight)throw new Error("Invalid list heights");u=(0,d.Ii)(u,s.length),g=g.merge(s.missingOpeningBracketIds)}return l?new Immutable23ListAstNode(u,e.listHeight+1,e,o,s,g):new TwoThreeListAstNode(u,e.listHeight+1,e,o,s,g)}static getEmpty(){return new ImmutableArrayListAstNode(d.xl,0,[],u.tS.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(0===e)return;const o=this.getChild(e-1),s=4===o.kind?o.toMutable():o;return o!==s&&this.setChild(e-1,s),s}makeFirstElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(0===e)return;const o=this.getChild(0),s=4===o.kind?o.toMutable():o;return o!==s&&this.setChild(0,s),s}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let o,s=this;while(4===s.kind&&(o=s.childrenLength)>0)s=s.getChild(o-1);return s.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let o=this.getChild(0).length,s=this.getChild(0).missingOpeningBracketIds;for(let l=1;l<e;l++){const e=this.getChild(l);o=(0,d.Ii)(o,e.length),s=s.merge(e.missingOpeningBracketIds)}this._length=o,this._missingOpeningBracketIds=s,this.cachedMinIndentation=-1}computeMinIndentation(e,o){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;let s=Number.MAX_SAFE_INTEGER,l=e;for(let u=0;u<this.childrenLength;u++){const e=this.getChild(u);e&&(s=Math.min(s,e.computeMinIndentation(l,o)),l=(0,d.Ii)(l,e.length))}return this.cachedMinIndentation=s,s}}class TwoThreeListAstNode extends ListAstNode{constructor(e,o,s,l,d,u){super(e,o,u),this._item1=s,this._item2=l,this._item3=d}get childrenLength(){return null!==this._item3?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,o){switch(e){case 0:return void(this._item1=o);case 1:return void(this._item2=o);case 2:return void(this._item3=o)}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new TwoThreeListAstNode(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class Immutable23ListAstNode extends TwoThreeListAstNode{toMutable(){return new TwoThreeListAstNode(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class ArrayListAstNode extends ListAstNode{constructor(e,o,s,l){super(e,o,l),this._children=s}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,o){this._children[e]=o}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let o=0;o<this._children.length;o++)e[o]=this._children[o].deepClone();return new ArrayListAstNode(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class ImmutableArrayListAstNode extends ArrayListAstNode{toMutable(){return new ArrayListAstNode(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const g=[];class ImmutableLeafAstNode extends BaseAstNode{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return g}deepClone(){return this}}class TextAstNode extends ImmutableLeafAstNode{get kind(){return 0}get missingOpeningBracketIds(){return u.tS.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,o){const s=(0,d.Hw)(e),u=(0===s.columnCount?s.lineCount:s.lineCount+1)+1,g=(0,d.W9)((0,d.Ii)(e,this.length))+1;let p=Number.MAX_SAFE_INTEGER;for(let d=u;d<=g;d++){const e=o.getLineFirstNonWhitespaceColumn(d),s=o.getLineContent(d);if(0===e)continue;const u=l.i.visibleColumnFromColumn(s,e,o.getOptions().tabSize);p=Math.min(p,u)}return p}}class BracketAstNode extends ImmutableLeafAstNode{constructor(e,o,s){super(e),this.languageId=o,this.bracketIds=s}static create(e,o,s){const l=new BracketAstNode(e,o,s);return l}get kind(){return 1}get missingOpeningBracketIds(){return u.tS.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,o){return Number.MAX_SAFE_INTEGER}}class InvalidBracketAstNode extends ImmutableLeafAstNode{constructor(e,o){super(o),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,o){return Number.MAX_SAFE_INTEGER}}},2442:function(e,o,s){"use strict";s.d(o,{Q:function(){return TextEditInfo},Y:function(){return BeforeEditPositionMapper}});var l=s(5035);class TextEditInfo{constructor(e,o,s){this.startOffset=e,this.endOffset=o,this.newLength=s}}class BeforeEditPositionMapper{constructor(e,o){this.documentLength=o,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map((e=>TextEditInfoCache.from(e)))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const o=this.edits[this.nextEditIdx],s=o?this.translateOldToCur(o.offsetObj):this.documentLength;return(0,l.BE)(e,s)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?(0,l.Hg)(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):(0,l.Hg)(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const o=(0,l.Hw)(e);return o.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?(0,l.Hg)(o.lineCount-this.deltaOldToNewLineCount,o.columnCount-this.deltaOldToNewColumnCount):(0,l.Hg)(o.lineCount-this.deltaOldToNewLineCount,o.columnCount)}adjustNextEdit(e){while(this.nextEditIdx<this.edits.length){const o=this.edits[this.nextEditIdx],s=this.translateOldToCur(o.endOffsetAfterObj);if(!(0,l.By)(s,e))break;{this.nextEditIdx++;const e=(0,l.Hw)(s),d=(0,l.Hw)(this.translateOldToCur(o.endOffsetBeforeObj)),u=e.lineCount-d.lineCount;this.deltaOldToNewLineCount+=u;const g=this.deltaLineIdxInOld===o.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,p=e.columnCount-d.columnCount;this.deltaOldToNewColumnCount=g+p,this.deltaLineIdxInOld=o.endOffsetBeforeObj.lineCount}}}}class TextEditInfoCache{constructor(e,o,s){this.endOffsetBeforeObj=(0,l.Hw)(o),this.endOffsetAfterObj=(0,l.Hw)((0,l.Ii)(e,s)),this.offsetObj=(0,l.Hw)(e)}static from(e){return new TextEditInfoCache(e.startOffset,e.endOffset,e.newLength)}}},5382:function(e,o,s){"use strict";s.d(o,{Z:function(){return LanguageAgnosticBracketTokens}});var l=s(2677),d=s(1720),u=s(5035),g=s(1761),p=s(6735);class BracketTokens{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,o){function getId(e,s){return o.getKey(`${e}:::${s}`)}const s=e.characterPair.getColorizedBrackets(),l=new Map,m=new Set;for(const[d,u]of s){m.add(d);let o=l.get(u);const s=getId(e.languageId,d);o||(o={openingBrackets:g.tS.getEmpty(),first:s},l.set(u,o)),o.openingBrackets=o.openingBrackets.add(s,g.Qw)}const f=new Map;for(const[g,_]of l){const o=(0,u.Hg)(0,g.length);f.set(g,new p.WU(o,2,_.first,_.openingBrackets,d.n2.create(o,e.languageId,_.openingBrackets)))}for(const _ of m){const o=(0,u.Hg)(0,_.length),s=getId(e.languageId,_),l=g.tS.getEmpty().add(s,g.Qw);f.set(_,new p.WU(o,1,s,l,d.n2.create(o,e.languageId,l)))}return new BracketTokens(f)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map((e=>prepareBracketForRegExp(e))).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}findClosingTokenText(e){for(const[o,s]of this.map)if(s.bracketIds.intersects(e))return o}get isEmpty(){return 0===this.map.size}}function prepareBracketForRegExp(e){const o=(0,l.ec)(e),s=/^[\w ]+$/.test(e);return s?`\\b${o}\\b`:o}class LanguageAgnosticBracketTokens{constructor(e,o){this.denseKeyProvider=e,this.getLanguageConfiguration=o,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const o=this.languageIdToBracketTokens.get(e);if(!o)return!1;const s=BracketTokens.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return o.getRegExpStr()!==s}getSingleLanguageBracketTokens(e){let o=this.languageIdToBracketTokens.get(e);return o||(o=BracketTokens.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,o)),o}}},5035:function(e,o,s){"use strict";s.d(o,{BE:function(){return lengthDiffNonNegative},By:function(){return lengthLessThanEqual},F_:function(){return lengthGetColumnCountIfZeroLineCount},Hg:function(){return toLength},Hw:function(){return lengthToObj},Ii:function(){return lengthAdd},PZ:function(){return positionToLength},Qw:function(){return lengthsToRange},VR:function(){return lengthLessThan},W9:function(){return lengthGetLineCount},Zq:function(){return lengthGreaterThanEqual},av:function(){return lengthDiff},oR:function(){return lengthOfString},xd:function(){return lengthIsZero},xl:function(){return u}});var l=s(2677),d=s(4314);class LengthObj{constructor(e,o){this.lineCount=e,this.columnCount=o}toString(){return`${this.lineCount},${this.columnCount}`}}function lengthDiff(e,o,s,l){return e!==s?toLength(s-e,l):toLength(0,l-o)}LengthObj.zero=new LengthObj(0,0);const u=0;function lengthIsZero(e){return 0===e}const g=Math.pow(2,26);function toLength(e,o){return e*g+o}function lengthToObj(e){const o=e,s=Math.floor(o/g),l=o-s*g;return new LengthObj(s,l)}function lengthGetLineCount(e){return Math.floor(e/g)}function lengthGetColumnCountIfZeroLineCount(e){return e}function lengthAdd(e,o){return o<g?e+o:e-e%g+o}function lengthDiffNonNegative(e,o){const s=e,l=o,d=l-s;if(d<=0)return u;const p=Math.floor(s/g),m=Math.floor(l/g),f=l-m*g;if(p===m){const e=s-p*g;return toLength(0,f-e)}return toLength(m-p,f)}function lengthLessThan(e,o){return e<o}function lengthLessThanEqual(e,o){return e<=o}function lengthGreaterThanEqual(e,o){return e>=o}function positionToLength(e){return toLength(e.lineNumber-1,e.column-1)}function lengthsToRange(e,o){const s=e,l=Math.floor(s/g),u=s-l*g,p=o,m=Math.floor(p/g),f=p-m*g;return new d.e(l+1,u+1,m+1,f+1)}function lengthOfString(e){const o=(0,l.uq)(e);return toLength(o.length-1,o[o.length-1].length)}},4837:function(e,o,s){"use strict";s.d(o,{w:function(){return parseDocument}});var l=s(1720),d=s(2442),u=s(1761),g=s(5035);function concat23Trees(e){if(0===e.length)return null;if(1===e.length)return e[0];let o=0;function readNode(){if(o>=e.length)return null;const s=o,l=e[s].listHeight;o++;while(o<e.length&&e[o].listHeight===l)o++;return o-s>=2?concat23TreesOfSameHeight(0===s&&o===e.length?e:e.slice(s,o),!1):e[s]}let s=readNode(),l=readNode();if(!l)return s;for(let u=readNode();u;u=readNode())heightDiff(s,l)<=heightDiff(l,u)?(s=concat(s,l),l=u):l=concat(l,u);const d=concat(s,l);return d}function concat23TreesOfSameHeight(e,o=!1){if(0===e.length)return null;if(1===e.length)return e[0];let s=e.length;while(s>3){const d=s>>1;for(let u=0;u<d;u++){const d=u<<1;e[u]=l.Y0.create23(e[d],e[d+1],d+3===s?e[d+2]:null,o)}s=d}return l.Y0.create23(e[0],e[1],s>=3?e[2]:null,o)}function heightDiff(e,o){return Math.abs(e.listHeight-o.listHeight)}function concat(e,o){return e.listHeight===o.listHeight?l.Y0.create23(e,o,null,!1):e.listHeight>o.listHeight?append(e,o):prepend(o,e)}function append(e,o){e=e.toMutable();let s=e;const d=new Array;let u;while(1){if(o.listHeight===s.listHeight){u=o;break}if(4!==s.kind)throw new Error("unexpected");d.push(s),s=s.makeLastElementMutable()}for(let g=d.length-1;g>=0;g--){const e=d[g];u?e.childrenLength>=3?u=l.Y0.create23(e.unappendChild(),u,null,!1):(e.appendChildOfSameHeight(u),u=void 0):e.handleChildrenChanged()}return u?l.Y0.create23(e,u,null,!1):e}function prepend(e,o){e=e.toMutable();let s=e;const d=new Array;while(o.listHeight!==s.listHeight){if(4!==s.kind)throw new Error("unexpected");d.push(s),s=s.makeFirstElementMutable()}let u=o;for(let g=d.length-1;g>=0;g--){const e=d[g];u?e.childrenLength>=3?u=l.Y0.create23(u,e.unprependChild(),null,!1):(e.prependChildOfSameHeight(u),u=void 0):e.handleChildrenChanged()}return u?l.Y0.create23(u,e,null,!1):e}class NodeReader{constructor(e){this.lastOffset=g.xl,this.nextNodes=[e],this.offsets=[g.xl],this.idxs=[]}readLongestNodeAt(e,o){if((0,g.VR)(e,this.lastOffset))throw new Error("Invalid offset");this.lastOffset=e;while(1){const s=lastOrUndefined(this.nextNodes);if(!s)return;const l=lastOrUndefined(this.offsets);if((0,g.VR)(e,l))return;if((0,g.VR)(l,e))if((0,g.Ii)(l,s.length)<=e)this.nextNodeAfterCurrent();else{const e=getNextChildIdx(s);-1!==e?(this.nextNodes.push(s.getChild(e)),this.offsets.push(l),this.idxs.push(e)):this.nextNodeAfterCurrent()}else{if(o(s))return this.nextNodeAfterCurrent(),s;{const e=getNextChildIdx(s);if(-1===e)return void this.nextNodeAfterCurrent();this.nextNodes.push(s.getChild(e)),this.offsets.push(l),this.idxs.push(e)}}}}nextNodeAfterCurrent(){while(1){const e=lastOrUndefined(this.offsets),o=lastOrUndefined(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;const s=lastOrUndefined(this.nextNodes),l=getNextChildIdx(s,this.idxs[this.idxs.length-1]);if(-1!==l){this.nextNodes.push(s.getChild(l)),this.offsets.push((0,g.Ii)(e,o.length)),this.idxs[this.idxs.length-1]=l;break}this.idxs.pop()}}}function getNextChildIdx(e,o=-1){while(1){if(o++,o>=e.childrenLength)return-1;if(e.getChild(o))return o}}function lastOrUndefined(e){return e.length>0?e[e.length-1]:void 0}function parseDocument(e,o,s,l){const d=new Parser(e,o,s,l);return d.parseDocument()}class Parser{constructor(e,o,s,l){if(this.tokenizer=e,this.createImmutableLists=l,this._itemsConstructed=0,this._itemsFromCache=0,s&&l)throw new Error("Not supported");this.oldNodeReader=s?new NodeReader(s):void 0,this.positionMapper=new d.Y(o,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(u.tS.getEmpty());return e||(e=l.Y0.getEmpty()),e}parseList(e){const o=new Array;while(1){const s=this.tokenizer.peek();if(!s||2===s.kind&&s.bracketIds.intersects(e))break;const l=this.parseChild(e);4===l.kind&&0===l.childrenLength||o.push(l)}const s=this.oldNodeReader?concat23Trees(o):concat23TreesOfSameHeight(o,this.createImmutableLists);return s}parseChild(e){if(this.oldNodeReader){const o=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!(0,g.xd)(o)){const s=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(s=>{if(!(0,g.VR)(s.length,o))return!1;const l=s.canBeReused(e);return l}));if(s)return this._itemsFromCache++,this.tokenizer.skip(s.length),s}}this._itemsConstructed++;const o=this.tokenizer.read();switch(o.kind){case 2:return new l.Dm(o.bracketIds,o.length);case 0:return o.astNode;case 1:{const s=e.merge(o.bracketIds),d=this.parseList(s),u=this.tokenizer.peek();return u&&2===u.kind&&(u.bracketId===o.bracketId||u.bracketIds.intersects(o.bracketIds))?(this.tokenizer.read(),l.Kd.create(o.astNode,d,u.astNode)):l.Kd.create(o.astNode,d,null)}default:throw new Error("unexpected")}}}},1761:function(e,o,s){"use strict";s.d(o,{FE:function(){return DenseKeyProvider},Qw:function(){return d},tS:function(){return SmallImmutableSet}});const l=new Array;class SmallImmutableSet{constructor(e,o){this.items=e,this.additionalItems=o}static create(e,o){if(e<=128&&0===o.length){let s=SmallImmutableSet.cache[e];return s||(s=new SmallImmutableSet(e,o),SmallImmutableSet.cache[e]=s),s}return new SmallImmutableSet(e,o)}static getEmpty(){return this.empty}add(e,o){const s=o.getKey(e);let l=s>>5;if(0===l){const e=1<<s|this.items;return e===this.items?this:SmallImmutableSet.create(e,this.additionalItems)}l--;const d=this.additionalItems.slice(0);while(d.length<l)d.push(0);return d[l]|=1<<(31&s),SmallImmutableSet.create(this.items,d)}merge(e){const o=this.items|e.items;if(this.additionalItems===l&&e.additionalItems===l)return o===this.items?this:o===e.items?e:SmallImmutableSet.create(o,l);const s=new Array;for(let l=0;l<Math.max(this.additionalItems.length,e.additionalItems.length);l++){const o=this.additionalItems[l]||0,d=e.additionalItems[l]||0;s.push(o|d)}return SmallImmutableSet.create(o,s)}intersects(e){if(0!==(this.items&e.items))return!0;for(let o=0;o<Math.min(this.additionalItems.length,e.additionalItems.length);o++)if(0!==(this.additionalItems[o]&e.additionalItems[o]))return!0;return!1}}SmallImmutableSet.cache=new Array(129),SmallImmutableSet.empty=SmallImmutableSet.create(0,l);const d={getKey(e){return e}};class DenseKeyProvider{constructor(){this.items=new Map}getKey(e){let o=this.items.get(e);return void 0===o&&(o=this.items.size,this.items.set(e,o)),o}}},6735:function(e,o,s){"use strict";s.d(o,{WU:function(){return Token},g:function(){return FastTokenizer},xH:function(){return TextBufferTokenizer}});var l=s(7301),d=s(3155),u=s(1720),g=s(5035),p=s(1761);class Token{constructor(e,o,s,l,d){this.length=e,this.kind=o,this.bracketId=s,this.bracketIds=l,this.astNode=d}}class TextBufferTokenizer{constructor(e,o){this.textModel=e,this.bracketTokens=o,this.reader=new NonPeekableTextBufferTokenizer(this.textModel,this.bracketTokens),this._offset=g.xl,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return(0,g.Hg)(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=(0,g.Ii)(this._offset,e);const o=(0,g.Hw)(this._offset);this.reader.setPosition(o.lineCount,o.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=(0,g.Ii)(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class NonPeekableTextBufferTokenizer{constructor(e,o){this.textModel=e,this.bracketTokens=o,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,o){e===this.lineIdx?(this.lineCharOffset=o,this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=o,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=(0,g.F_)(e.length),e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,o=this.lineCharOffset;let s=0;while(1){const l=this.lineTokens,u=l.getCount();let p=null;if(this.lineTokenOffset<u){const m=l.getMetadata(this.lineTokenOffset);while(this.lineTokenOffset+1<u&&m===l.getMetadata(this.lineTokenOffset+1))this.lineTokenOffset++;const f=0===d.NX.getTokenType(m),_=l.getEndOffset(this.lineTokenOffset);if(f&&_!==this.lineCharOffset){const e=l.getLanguageId(this.lineTokenOffset),o=this.line.substring(this.lineCharOffset,_),s=this.bracketTokens.getSingleLanguageBracketTokens(e),d=s.regExpGlobal;if(d){d.lastIndex=0;const e=d.exec(o);e&&(p=s.getToken(e[0]),p&&(this.lineCharOffset+=e.index))}}if(s+=_-this.lineCharOffset,p){if(e!==this.lineIdx||o!==this.lineCharOffset){this.peekedToken=p;break}return this.lineCharOffset+=(0,g.F_)(p.length),p}this.lineTokenOffset++,this.lineCharOffset=_}else{if(this.lineIdx===this.textBufferLineCount-1)break;if(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,s+=33,s>1e3)break}if(s>1500)break}const l=(0,g.av)(e,o,this.lineIdx,this.lineCharOffset);return new Token(l,0,-1,p.tS.getEmpty(),new u.BH(l))}}class FastTokenizer{constructor(e,o){this.text=e,this._offset=g.xl,this.idx=0;const s=o.getRegExpStr(),l=s?new RegExp(o.getRegExpStr()+"|\n","g"):null,d=[];let m,f=0,_=0,C=0,b=0;const w=new Array;for(let L=0;L<60;L++)w.push(new Token((0,g.Hg)(0,L),0,-1,p.tS.getEmpty(),new u.BH((0,g.Hg)(0,L))));const S=new Array;for(let L=0;L<60;L++)S.push(new Token((0,g.Hg)(1,L),0,-1,p.tS.getEmpty(),new u.BH((0,g.Hg)(1,L))));if(l){l.lastIndex=0;while(null!==(m=l.exec(e))){const e=m.index,s=m[0];if("\n"===s)f++,_=e+1;else{if(C!==e){let o;if(b===f){const s=e-C;if(s<w.length)o=w[s];else{const e=(0,g.Hg)(0,s);o=new Token(e,0,-1,p.tS.getEmpty(),new u.BH(e))}}else{const s=f-b,l=e-_;if(1===s&&l<S.length)o=S[l];else{const e=(0,g.Hg)(s,l);o=new Token(e,0,-1,p.tS.getEmpty(),new u.BH(e))}}d.push(o)}d.push(o.getToken(s)),C=e+s.length,b=f}}}const y=e.length;if(C!==y){const e=b===f?(0,g.Hg)(0,y-C):(0,g.Hg)(f-b,y-_);d.push(new Token(e,0,-1,p.tS.getEmpty(),new u.BH(e)))}this.length=(0,g.Hg)(f,y-_),this.tokens=d}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new l.B8}}},5215:function(e,o,s){"use strict";s.d(o,{NL:function(){return EditStack},e9:function(){return isEditStackElement}});var l=s(3580),d=s(7301),u=s(3860),g=s(666),p=s(3033),m=s(3060),f=s(5935);function uriGetComparisonKey(e){return e.toString()}class SingleModelEditStackData{constructor(e,o,s,l,d,u,g){this.beforeVersionId=e,this.afterVersionId=o,this.beforeEOL=s,this.afterEOL=l,this.beforeCursorState=d,this.afterCursorState=u,this.changes=g}static create(e,o){const s=e.getAlternativeVersionId(),l=getModelEOL(e);return new SingleModelEditStackData(s,s,l,l,o,o,[])}append(e,o,s,l,d){o.length>0&&(this.changes=(0,p.b)(this.changes,o)),this.afterEOL=s,this.afterVersionId=l,this.afterCursorState=d}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,o,s){if(m.T4(e,o?o.length:0,s),s+=4,o)for(const l of o)m.T4(e,l.selectionStartLineNumber,s),s+=4,m.T4(e,l.selectionStartColumn,s),s+=4,m.T4(e,l.positionLineNumber,s),s+=4,m.T4(e,l.positionColumn,s),s+=4;return s}static _readSelections(e,o,s){const l=m.Ag(e,o);o+=4;for(let d=0;d<l;d++){const l=m.Ag(e,o);o+=4;const d=m.Ag(e,o);o+=4;const g=m.Ag(e,o);o+=4;const p=m.Ag(e,o);o+=4,s.push(new u.Y(l,d,g,p))}return o}serialize(){let e=10+SingleModelEditStackData._writeSelectionsSize(this.beforeCursorState)+SingleModelEditStackData._writeSelectionsSize(this.afterCursorState)+4;for(const l of this.changes)e+=l.writeSize();const o=new Uint8Array(e);let s=0;m.T4(o,this.beforeVersionId,s),s+=4,m.T4(o,this.afterVersionId,s),s+=4,m.Cg(o,this.beforeEOL,s),s+=1,m.Cg(o,this.afterEOL,s),s+=1,s=SingleModelEditStackData._writeSelections(o,this.beforeCursorState,s),s=SingleModelEditStackData._writeSelections(o,this.afterCursorState,s),m.T4(o,this.changes.length,s),s+=4;for(const l of this.changes)s=l.write(o,s);return o.buffer}static deserialize(e){const o=new Uint8Array(e);let s=0;const l=m.Ag(o,s);s+=4;const d=m.Ag(o,s);s+=4;const u=m.Q$(o,s);s+=1;const g=m.Q$(o,s);s+=1;const f=[];s=SingleModelEditStackData._readSelections(o,s,f);const _=[];s=SingleModelEditStackData._readSelections(o,s,_);const C=m.Ag(o,s);s+=4;const b=[];for(let m=0;m<C;m++)s=p.q.read(o,s,b);return new SingleModelEditStackData(l,d,u,g,f,_,b)}}class SingleModelEditStackElement{constructor(e,o){this.model=e,this._data=SingleModelEditStackData.create(e,o)}get type(){return 0}get resource(){return g.o.isUri(this.model)?this.model:this.model.uri}get label(){return l.N("edit","Typing")}toString(){const e=this._data instanceof SingleModelEditStackData?this._data:SingleModelEditStackData.deserialize(this._data);return e.changes.map((e=>e.toString())).join(", ")}matchesResource(e){const o=g.o.isUri(this.model)?this.model:this.model.uri;return o.toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof SingleModelEditStackData}append(e,o,s,l,d){this._data instanceof SingleModelEditStackData&&this._data.append(e,o,s,l,d)}close(){this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize())}open(){this._data instanceof SingleModelEditStackData||(this._data=SingleModelEditStackData.deserialize(this._data))}undo(){if(g.o.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize());const e=SingleModelEditStackData.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(g.o.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize());const e=SingleModelEditStackData.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize()),this._data.byteLength+168}}class MultiModelEditStackElement{constructor(e,o){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=o.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const e=uriGetComparisonKey(s.resource);this._editStackElementsMap.set(e,s)}this._delegate=null}get resources(){return this._editStackElementsArr.map((e=>e.resource))}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const o=uriGetComparisonKey(e);return this._editStackElementsMap.has(o)}setModel(e){const o=uriGetComparisonKey(g.o.isUri(e)?e:e.uri);this._editStackElementsMap.has(o)&&this._editStackElementsMap.get(o).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const o=uriGetComparisonKey(e.uri);if(this._editStackElementsMap.has(o)){const s=this._editStackElementsMap.get(o);return s.canAppend(e)}return!1}append(e,o,s,l,d){const u=uriGetComparisonKey(e.uri),g=this._editStackElementsMap.get(u);g.append(e,o,s,l,d)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const o=uriGetComparisonKey(e);if(this._editStackElementsMap.has(o)){const e=this._editStackElementsMap.get(o);return e.heapSize()}return 0}split(){return this._editStackElementsArr}toString(){let e=[];for(const o of this._editStackElementsArr)e.push(`${(0,f.EZ)(o.resource)}: ${o}`);return`{${e.join(", ")}}`}}function getModelEOL(e){const o=e.getEOL();return"\n"===o?0:1}function isEditStackElement(e){return!!e&&(e instanceof SingleModelEditStackElement||e instanceof MultiModelEditStackElement)}class EditStack{constructor(e,o){this._model=e,this._undoRedoService=o}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);isEditStackElement(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);isEditStackElement(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const o=this._undoRedoService.getLastElement(this._model.uri);if(isEditStackElement(o)&&o.canAppend(this._model))return o;const s=new SingleModelEditStackElement(this._model,e);return this._undoRedoService.pushElement(s),s}pushEOL(e){const o=this._getOrCreateEditStackElement(null);this._model.setEOL(e),o.append(this._model,[],getModelEOL(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,o,s){const l=this._getOrCreateEditStackElement(e),d=this._model.applyEdits(o,!0),u=EditStack._computeCursorState(s,d),g=d.map(((e,o)=>({index:o,textChange:e.textChange})));return g.sort(((e,o)=>e.textChange.oldPosition===o.textChange.oldPosition?e.index-o.index:e.textChange.oldPosition-o.textChange.oldPosition)),l.append(this._model,g.map((e=>e.textChange)),getModelEOL(this._model),this._model.getAlternativeVersionId(),u),u}static _computeCursorState(e,o){try{return e?e(o):null}catch(s){return(0,d.dL)(s),null}}}},3153:function(e,o,s){"use strict";s.d(o,{W:function(){return BracketPairGuidesClassNames},l:function(){return GuidesTextModelPart}});var l=s(9488),d=s(2677),u=s(7988),g=s(4314);class TextModelPart{constructor(){this._isDisposed=!1}dispose(){this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}var p=s(9616),m=s(5094);class GuidesTextModelPart extends TextModelPart{constructor(e,o){super(),this.textModel=e,this.languageConfigurationService=o}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return(0,p.q)(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,o,s){this.assertNotDisposed();const l=this.textModel.getLineCount();if(e<1||e>l)throw new Error("Illegal value for lineNumber");const d=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,u=Boolean(d&&d.offSide);let g=-2,p=-1,m=-2,f=-1;const up_resolveIndents=e=>{if(-1!==g&&(-2===g||g>e-1)){g=-1,p=-1;for(let o=e-2;o>=0;o--){const e=this._computeIndentLevel(o);if(e>=0){g=o,p=e;break}}}if(-2===m){m=-1,f=-1;for(let o=e;o<l;o++){const e=this._computeIndentLevel(o);if(e>=0){m=o,f=e;break}}}};let _=-2,C=-1,b=-2,w=-1;const down_resolveIndents=e=>{if(-2===_){_=-1,C=-1;for(let o=e-2;o>=0;o--){const e=this._computeIndentLevel(o);if(e>=0){_=o,C=e;break}}}if(-1!==b&&(-2===b||b<e-1)){b=-1,w=-1;for(let o=e;o<l;o++){const e=this._computeIndentLevel(o);if(e>=0){b=o,w=e;break}}}};let S=0,y=!0,L=0,x=!0,k=0,N=0;for(let D=0;y||x;D++){const d=e-D,g=e+D;D>1&&(d<1||d<o)&&(y=!1),D>1&&(g>l||g>s)&&(x=!1),D>5e4&&(y=!1,x=!1);let b=-1;if(y&&d>=1){const e=this._computeIndentLevel(d-1);e>=0?(m=d-1,f=e,b=Math.ceil(e/this.textModel.getOptions().indentSize)):(up_resolveIndents(d),b=this._getIndentLevelForWhitespaceLine(u,p,f))}let E=-1;if(x&&g<=l){const e=this._computeIndentLevel(g-1);e>=0?(_=g-1,C=e,E=Math.ceil(e/this.textModel.getOptions().indentSize)):(down_resolveIndents(g),E=this._getIndentLevelForWhitespaceLine(u,C,w))}if(0!==D){if(1===D){if(g<=l&&E>=0&&N+1===E){y=!1,S=g,L=g,k=E;continue}if(d>=1&&b>=0&&b-1===N){x=!1,S=d,L=d,k=b;continue}if(S=e,L=e,k=N,0===k)return{startLineNumber:S,endLineNumber:L,indent:k}}y&&(b>=k?S=d:y=!1),x&&(E>=k?L=g:x=!1)}else N=b}return{startLineNumber:S,endLineNumber:L,indent:k}}getLinesBracketGuides(e,o,s,u){var p,f,_,C,b;const w=[],S=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new g.e(e,1,o,this.textModel.getLineMaxColumn(o)));let y;if(s&&S.length>0){const d=e<=s.lineNumber&&s.lineNumber<=o?S.filter((e=>g.e.strictContainsPosition(e.range,s))):this.textModel.bracketPairs.getBracketPairsInRange(g.e.fromPositions(s));y=null===(p=(0,l.dF)(d,(e=>e.range.startLineNumber!==e.range.endLineNumber)))||void 0===p?void 0:p.range}const L=new l.H9(S),x=new Array,k=new Array,N=new BracketPairGuidesClassNames;for(let l=e;l<=o;l++){let e=new Array;k.length>0&&(e=e.concat(k),k.length=0),w.push(e);for(const s of L.takeWhile((e=>e.openingBracketRange.startLineNumber<=l))||[]){if(s.range.startLineNumber===s.range.endLineNumber)continue;const e=Math.min(this.getVisibleColumnFromPosition(s.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition(null!==(_=null===(f=s.closingBracketRange)||void 0===f?void 0:f.getStartPosition())&&void 0!==_?_:s.range.getEndPosition()),s.minVisibleColumnIndentation+1);let o=!1;if(s.closingBracketRange){const e=d.LC(this.textModel.getLineContent(s.closingBracketRange.startLineNumber));e<s.closingBracketRange.startColumn-1&&(o=!0)}const l=s.openingBracketRange.getStartPosition(),u=null!==(b=null===(C=s.closingBracketRange)||void 0===C?void 0:C.getStartPosition())&&void 0!==b?b:s.range.getEndPosition();void 0===s.closingBracketRange?x[s.nestingLevel]=null:x[s.nestingLevel]={nestingLevel:s.nestingLevel,guideVisibleColumn:e,start:l,visibleStartColumn:this.getVisibleColumnFromPosition(l),end:u,visibleEndColumn:this.getVisibleColumnFromPosition(u),bracketPair:s,renderHorizontalEndLineAtTheBottom:o}}for(const s of x){if(!s)continue;const o=y&&s.bracketPair.range.equalsRange(y),d=N.getInlineClassNameOfLevel(s.nestingLevel)+(u.highlightActive&&o?" "+N.activeClassName:"");(o&&u.horizontalGuides!==m.s6.Disabled||u.includeInactive&&u.horizontalGuides===m.s6.Enabled)&&(s.start.lineNumber===l&&s.guideVisibleColumn<s.visibleStartColumn&&e.push(new m.UO(s.guideVisibleColumn,d,new m.vW(!1,s.start.column))),s.end.lineNumber===l+1&&s.guideVisibleColumn<s.visibleEndColumn&&k.push(new m.UO(s.guideVisibleColumn,d,new m.vW(!s.renderHorizontalEndLineAtTheBottom,s.end.column))))}let o=Number.MAX_SAFE_INTEGER;for(let s=x.length-1;s>=0;s--){const d=x[s];if(!d)continue;const g=u.highlightActive&&y&&d.bracketPair.range.equalsRange(y),p=N.getInlineClassNameOfLevel(d.nestingLevel)+(g?" "+N.activeClassName:"");(g||u.includeInactive)&&d.renderHorizontalEndLineAtTheBottom&&d.end.lineNumber===l+1&&k.push(new m.UO(d.guideVisibleColumn,p,null)),d.end.lineNumber<=l||d.start.lineNumber>=l||(d.guideVisibleColumn>=o&&!g||(o=d.guideVisibleColumn,(g||u.includeInactive)&&e.push(new m.UO(d.guideVisibleColumn,p,null))))}e.sort(((e,o)=>e.visibleColumn-o.visibleColumn))}return w}getVisibleColumnFromPosition(e){return u.i.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,o){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new Error("Illegal value for startLineNumber");if(o<1||o>s)throw new Error("Illegal value for endLineNumber");const l=this.textModel.getOptions(),d=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,u=Boolean(d&&d.offSide),g=new Array(o-e+1);let p=-2,m=-1,f=-2,_=-1;for(let C=e;C<=o;C++){const o=C-e,d=this._computeIndentLevel(C-1);if(d>=0)p=C-1,m=d,g[o]=Math.ceil(d/l.indentSize);else{if(-2===p){p=-1,m=-1;for(let e=C-2;e>=0;e--){const o=this._computeIndentLevel(e);if(o>=0){p=e,m=o;break}}}if(-1!==f&&(-2===f||f<C-1)){f=-1,_=-1;for(let e=C;e<s;e++){const o=this._computeIndentLevel(e);if(o>=0){f=e,_=o;break}}}g[o]=this._getIndentLevelForWhitespaceLine(u,m,_)}}return g}_getIndentLevelForWhitespaceLine(e,o,s){const l=this.textModel.getOptions();return-1===o||-1===s?0:o<s?1+Math.floor(o/l.indentSize):o===s||e?Math.ceil(s/l.indentSize):1+Math.floor(s/l.indentSize)}}class BracketPairGuidesClassNames{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return"bracket-indent-guide lvl-"+e%30}}},310:function(e,o,s){"use strict";s.d(o,{Ck:function(){return ConstantTimePrefixSumComputer},oQ:function(){return PrefixSumComputer}});var l=s(9488),d=s(5427);class PrefixSumComputer{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,o){e=(0,d.A)(e);const s=this.values,l=this.prefixSum,u=o.length;return 0!==u&&(this.values=new Uint32Array(s.length+u),this.values.set(s.subarray(0,e),0),this.values.set(s.subarray(e),e+u),this.values.set(o,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(l.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,o){return e=(0,d.A)(e),o=(0,d.A)(o),this.values[e]!==o&&(this.values[e]=o,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,o){e=(0,d.A)(e),o=(0,d.A)(o);const s=this.values,l=this.prefixSum;if(e>=s.length)return!1;const u=s.length-e;return o>=u&&(o=u),0!==o&&(this.values=new Uint32Array(s.length-o),this.values.set(s.subarray(0,e),0),this.values.set(s.subarray(e+o),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(l.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return 0===this.values.length?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=(0,d.A)(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let o=this.prefixSumValidIndex[0]+1;0===o&&(this.prefixSum[0]=this.values[0],o++),e>=this.values.length&&(e=this.values.length-1);for(let s=o;s<=e;s++)this.prefixSum[s]=this.prefixSum[s-1]+this.values[s];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let o=0,s=this.values.length-1,l=0,d=0,u=0;while(o<=s)if(l=o+(s-o)/2|0,d=this.prefixSum[l],u=d-this.values[l],e<u)s=l-1;else{if(!(e>=d))break;o=l+1}return new PrefixSumIndexOfResult(l,e-u)}}class ConstantTimePrefixSumComputer{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),0===e?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const o=this._indexBySum[e],s=o>0?this._prefixSum[o-1]:0;return new PrefixSumIndexOfResult(o,e-s)}removeValues(e,o){this._values.splice(e,o),this._invalidate(e)}insertValues(e,o){this._values=(0,l.Zv)(this._values,e,o),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,o=this._values.length;e<o;e++){const o=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+o;for(let l=0;l<o;l++)this._indexBySum[s+l]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,o){this._values[e]!==o&&(this._values[e]=o,this._invalidate(e))}}class PrefixSumIndexOfResult{constructor(e,o){this.index=e,this.remainder=o,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=o}}},2822:function(e,o,s){"use strict";s.d(o,{HS:function(){return ModelDecorationInjectedTextOptions},qx:function(){return ModelDecorationOptions},yO:function(){return oe}});var l=s(9488),d=s(1264),u=s(7301),g=s(4669),p=s(5976),m=s(2677),f=s(666),_=s(187),C=s(4314),b=s(3860),w=s(4973);class BracketInfo{constructor(e,o,s){this.range=e,this.nestingLevel=o,this.isInvalid=s}}class BracketPairInfo{constructor(e,o,s,l){this.range=e,this.openingBracketRange=o,this.closingBracketRange=s,this.nestingLevel=l}}class BracketPairWithMinIndentationInfo extends BracketPairInfo{constructor(e,o,s,l,d){super(e,o,s,l),this.minVisibleColumnIndentation=d}}var S=s(2442),y=s(5382),L=s(5035),x=s(4837),k=s(1761),N=s(6735);class BracketPairsTree extends p.JT{constructor(e,o){if(super(),this.textModel=e,this.getLanguageConfiguration=o,this.didChangeEmitter=new g.Q5,this.denseKeyProvider=new k.FE,this.brackets=new y.Z(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,0===e.backgroundTokenizationState){const e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),o=new N.g(this.textModel.getValue(),e);this.initialAstWithoutTokens=(0,x.w)(o,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else 2===e.backgroundTokenizationState?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):1===e.backgroundTokenizationState&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleDidChangeBackgroundTokenizationState(){if(2===this.textModel.backgroundTokenizationState){const e=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const o=e.map((e=>new S.Q((0,L.Hg)(e.fromLineNumber-1,0),(0,L.Hg)(e.toLineNumber,0),(0,L.Hg)(e.toLineNumber-e.fromLineNumber+1,0))));this.astWithTokens=this.parseDocumentFromTextBuffer(o,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const o=e.changes.map((e=>{const o=C.e.lift(e.range);return new S.Q((0,L.PZ)(o.getStartPosition()),(0,L.PZ)(o.getEndPosition()),(0,L.oR)(e.text))})).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(o,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(o,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,o,s){const l=!1,d=l?null===o||void 0===o?void 0:o.deepClone():o,u=new N.xH(this.textModel,this.brackets),g=(0,x.w)(u,e,d,s);return g}getBracketsInRange(e){const o=(0,L.Hg)(e.startLineNumber-1,e.startColumn-1),s=(0,L.Hg)(e.endLineNumber-1,e.endColumn-1),l=new Array,d=this.initialAstWithoutTokens||this.astWithTokens;return collectBrackets(d,L.xl,d.length,o,s,l),l}getBracketPairsInRange(e,o){const s=new Array,l=(0,L.PZ)(e.getStartPosition()),d=(0,L.PZ)(e.getEndPosition()),u=this.initialAstWithoutTokens||this.astWithTokens,g=new CollectBracketPairsContext(s,o,this.textModel);return collectBracketPairs(u,L.xl,u.length,l,d,g),s}}function collectBrackets(e,o,s,l,d,u,g=0){if(4===e.kind)for(const p of e.children)s=(0,L.Ii)(o,p.length),(0,L.By)(o,d)&&(0,L.Zq)(s,l)&&collectBrackets(p,o,s,l,d,u,g),o=s;else if(2===e.kind){g++;{const p=e.openingBracket;if(s=(0,L.Ii)(o,p.length),(0,L.By)(o,d)&&(0,L.Zq)(s,l)){const l=(0,L.Qw)(o,s);u.push(new BracketInfo(l,g-1,!e.closingBracket))}o=s}if(e.child){const p=e.child;s=(0,L.Ii)(o,p.length),(0,L.By)(o,d)&&(0,L.Zq)(s,l)&&collectBrackets(p,o,s,l,d,u,g),o=s}if(e.closingBracket){const p=e.closingBracket;if(s=(0,L.Ii)(o,p.length),(0,L.By)(o,d)&&(0,L.Zq)(s,l)){const e=(0,L.Qw)(o,s);u.push(new BracketInfo(e,g-1,!1))}o=s}}else if(3===e.kind){const e=(0,L.Qw)(o,s);u.push(new BracketInfo(e,g-1,!0))}else if(1===e.kind){const e=(0,L.Qw)(o,s);u.push(new BracketInfo(e,g-1,!1))}}class CollectBracketPairsContext{constructor(e,o,s){this.result=e,this.includeMinIndentation=o,this.textModel=s}}function collectBracketPairs(e,o,s,l,d,u,g=0){var p;if(2===e.kind){const l=(0,L.Ii)(o,e.openingBracket.length);let d=-1;u.includeMinIndentation&&(d=e.computeMinIndentation(o,u.textModel)),u.result.push(new BracketPairWithMinIndentationInfo((0,L.Qw)(o,s),(0,L.Qw)(o,l),e.closingBracket?(0,L.Qw)((0,L.Ii)(l,(null===(p=e.child)||void 0===p?void 0:p.length)||L.xl),s):void 0,g,d)),g++}let m=o;for(const f of e.children){const e=m;m=(0,L.Ii)(m,f.length),(0,L.By)(e,d)&&(0,L.By)(l,m)&&collectBracketPairs(f,e,m,l,d,u,g)}}var D=s(9111),E=s(4302);class BracketPairsTextModelPart extends p.JT{constructor(e,o){super(),this.textModel=e,this.languageConfigurationService=o,this.bracketPairsTree=this._register(new p.XK),this.onDidChangeEmitter=new g.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange((e=>{var o;e.languageId&&!(null===(o=this.bracketPairsTree.value)||void 0===o?void 0:o.object.didLanguageChange(e.languageId))||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())})))}get isDocumentSupported(){const e=5e6;return this.textModel.getValueLength()<=e}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var o;null===(o=this.bracketPairsTree.value)||void 0===o||o.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;null===(e=this.bracketPairsTree.value)||void 0===e||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var o;null===(o=this.bracketPairsTree.value)||void 0===o||o.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){const e=new p.SL;this.bracketPairsTree.value=createDisposableRef(e.add(new BracketPairsTree(this.textModel,(e=>this.languageConfigurationService.getLanguageConfiguration(e)))),e),e.add(this.bracketPairsTree.value.object.onDidChange((e=>this.onDidChangeEmitter.fire(e)))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var o;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(o=this.bracketPairsTree.value)||void 0===o?void 0:o.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var o;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(o=this.bracketPairsTree.value)||void 0===o?void 0:o.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var o;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(o=this.bracketPairsTree.value)||void 0===o?void 0:o.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,o,s){const l=e.toLowerCase(),d=this.textModel.validatePosition(o),u=this.textModel.getLanguageIdAtPosition(d.lineNumber,d.column),g=this.languageConfigurationService.getLanguageConfiguration(u).brackets;if(!g)return null;const p=g.textIsBracket[l];return p?stripBracketSearchCanceled(this._findMatchingBracketUp(p,d,createTimeBasedContinueBracketSearchPredicate(s))):null}matchBracket(e,o){const s=createTimeBasedContinueBracketSearchPredicate(o);return this._matchBracket(this.textModel.validatePosition(e),s)}_establishBracketSearchOffsets(e,o,s,l){const d=o.getCount(),u=o.getLanguageId(l);let g=Math.max(0,e.column-1-s.maxBracketLength);for(let m=l-1;m>=0;m--){const e=o.getEndOffset(m);if(e<=g)break;if((0,D.Bu)(o.getStandardTokenType(m))||o.getLanguageId(m)!==u){g=e;break}}let p=Math.min(o.getLineContent().length,e.column-1+s.maxBracketLength);for(let m=l+1;m<d;m++){const e=o.getStartOffset(m);if(e>=p)break;if((0,D.Bu)(o.getStandardTokenType(m))||o.getLanguageId(m)!==u){p=e;break}}return{searchStartOffset:g,searchEndOffset:p}}_matchBracket(e,o){const s=e.lineNumber,l=this.textModel.getLineTokens(s),d=this.textModel.getLineContent(s),u=l.findTokenIndexAtOffset(e.column-1);if(u<0)return null;const g=this.languageConfigurationService.getLanguageConfiguration(l.getLanguageId(u)).brackets;if(g&&!(0,D.Bu)(l.getStandardTokenType(u))){let{searchStartOffset:p,searchEndOffset:m}=this._establishBracketSearchOffsets(e,l,g,u),f=null;while(1){const l=E.Vr.findNextBracketInRange(g.forwardRegex,s,d,p,m);if(!l)break;if(l.startColumn<=e.column&&e.column<=l.endColumn){const e=d.substring(l.startColumn-1,l.endColumn-1).toLowerCase(),s=this._matchFoundBracket(l,g.textIsBracket[e],g.textIsOpenBracket[e],o);if(s){if(s instanceof BracketSearchCanceled)return null;f=s}}p=l.endColumn-1}if(f)return f}if(u>0&&l.getStartOffset(u)===e.column-1){const g=u-1,p=this.languageConfigurationService.getLanguageConfiguration(l.getLanguageId(g)).brackets;if(p&&!(0,D.Bu)(l.getStandardTokenType(g))){const{searchStartOffset:u,searchEndOffset:m}=this._establishBracketSearchOffsets(e,l,p,g),f=E.Vr.findPrevBracketInRange(p.reversedRegex,s,d,u,m);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn){const e=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),s=this._matchFoundBracket(f,p.textIsBracket[e],p.textIsOpenBracket[e],o);if(s)return s instanceof BracketSearchCanceled?null:s}}}return null}_matchFoundBracket(e,o,s,l){if(!o)return null;const d=s?this._findMatchingBracketDown(o,e.getEndPosition(),l):this._findMatchingBracketUp(o,e.getStartPosition(),l);return d?d instanceof BracketSearchCanceled?d:[e,d]:null}_findMatchingBracketUp(e,o,s){const l=e.languageId,d=e.reversedRegex;let u=-1,g=0;const searchPrevMatchingBracketInRange=(o,l,p,m)=>{while(1){if(s&&++g%100===0&&!s())return BracketSearchCanceled.INSTANCE;const f=E.Vr.findPrevBracketInRange(d,o,l,p,m);if(!f)break;const _=l.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(_)?u++:e.isClose(_)&&u--,0===u)return f;m=f.startColumn-1}return null};for(let p=o.lineNumber;p>=1;p--){const e=this.textModel.getLineTokens(p),s=e.getCount(),d=this.textModel.getLineContent(p);let u=s-1,g=d.length,m=d.length;p===o.lineNumber&&(u=e.findTokenIndexAtOffset(o.column-1),g=o.column-1,m=o.column-1);let f=!0;for(;u>=0;u--){const o=e.getLanguageId(u)===l&&!(0,D.Bu)(e.getStandardTokenType(u));if(o)f?g=e.getStartOffset(u):(g=e.getStartOffset(u),m=e.getEndOffset(u));else if(f&&g!==m){const e=searchPrevMatchingBracketInRange(p,d,g,m);if(e)return e}f=o}if(f&&g!==m){const e=searchPrevMatchingBracketInRange(p,d,g,m);if(e)return e}}return null}_findMatchingBracketDown(e,o,s){const l=e.languageId,d=e.forwardRegex;let u=1,g=0;const searchNextMatchingBracketInRange=(o,l,p,m)=>{while(1){if(s&&++g%100===0&&!s())return BracketSearchCanceled.INSTANCE;const f=E.Vr.findNextBracketInRange(d,o,l,p,m);if(!f)break;const _=l.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(_)?u++:e.isClose(_)&&u--,0===u)return f;p=f.endColumn-1}return null},p=this.textModel.getLineCount();for(let m=o.lineNumber;m<=p;m++){const e=this.textModel.getLineTokens(m),s=e.getCount(),d=this.textModel.getLineContent(m);let u=0,g=0,p=0;m===o.lineNumber&&(u=e.findTokenIndexAtOffset(o.column-1),g=o.column-1,p=o.column-1);let f=!0;for(;u<s;u++){const o=e.getLanguageId(u)===l&&!(0,D.Bu)(e.getStandardTokenType(u));if(o)f||(g=e.getStartOffset(u)),p=e.getEndOffset(u);else if(f&&g!==p){const e=searchNextMatchingBracketInRange(m,d,g,p);if(e)return e}f=o}if(f&&g!==p){const e=searchNextMatchingBracketInRange(m,d,g,p);if(e)return e}}return null}findPrevBracket(e){const o=this.textModel.validatePosition(e);let s=null,l=null;for(let d=o.lineNumber;d>=1;d--){const e=this.textModel.getLineTokens(d),u=e.getCount(),g=this.textModel.getLineContent(d);let p=u-1,m=g.length,f=g.length;if(d===o.lineNumber){p=e.findTokenIndexAtOffset(o.column-1),m=o.column-1,f=o.column-1;const d=e.getLanguageId(p);s!==d&&(s=d,l=this.languageConfigurationService.getLanguageConfiguration(s).brackets)}let _=!0;for(;p>=0;p--){const o=e.getLanguageId(p);if(s!==o){if(l&&_&&m!==f){const e=E.Vr.findPrevBracketInRange(l.reversedRegex,d,g,m,f);if(e)return this._toFoundBracket(l,e);_=!1}s=o,l=this.languageConfigurationService.getLanguageConfiguration(s).brackets}const u=!!l&&!(0,D.Bu)(e.getStandardTokenType(p));if(u)_?m=e.getStartOffset(p):(m=e.getStartOffset(p),f=e.getEndOffset(p));else if(l&&_&&m!==f){const e=E.Vr.findPrevBracketInRange(l.reversedRegex,d,g,m,f);if(e)return this._toFoundBracket(l,e)}_=u}if(l&&_&&m!==f){const e=E.Vr.findPrevBracketInRange(l.reversedRegex,d,g,m,f);if(e)return this._toFoundBracket(l,e)}}return null}findNextBracket(e){const o=this.textModel.validatePosition(e),s=this.textModel.getLineCount();let l=null,d=null;for(let u=o.lineNumber;u<=s;u++){const e=this.textModel.getLineTokens(u),s=e.getCount(),g=this.textModel.getLineContent(u);let p=0,m=0,f=0;if(u===o.lineNumber){p=e.findTokenIndexAtOffset(o.column-1),m=o.column-1,f=o.column-1;const s=e.getLanguageId(p);l!==s&&(l=s,d=this.languageConfigurationService.getLanguageConfiguration(l).brackets)}let _=!0;for(;p<s;p++){const o=e.getLanguageId(p);if(l!==o){if(d&&_&&m!==f){const e=E.Vr.findNextBracketInRange(d.forwardRegex,u,g,m,f);if(e)return this._toFoundBracket(d,e);_=!1}l=o,d=this.languageConfigurationService.getLanguageConfiguration(l).brackets}const s=!!d&&!(0,D.Bu)(e.getStandardTokenType(p));if(s)_||(m=e.getStartOffset(p)),f=e.getEndOffset(p);else if(d&&_&&m!==f){const e=E.Vr.findNextBracketInRange(d.forwardRegex,u,g,m,f);if(e)return this._toFoundBracket(d,e)}_=s}if(d&&_&&m!==f){const e=E.Vr.findNextBracketInRange(d.forwardRegex,u,g,m,f);if(e)return this._toFoundBracket(d,e)}}return null}findEnclosingBrackets(e,o){const s=createTimeBasedContinueBracketSearchPredicate(o),l=this.textModel.validatePosition(e),d=this.textModel.getLineCount(),u=new Map;let g=[];const resetCounts=(e,o)=>{if(!u.has(e)){const s=[];for(let e=0,l=o?o.brackets.length:0;e<l;e++)s[e]=0;u.set(e,s)}g=u.get(e)};let p=0;const searchInRange=(e,o,l,d,u)=>{while(1){if(s&&++p%100===0&&!s())return BracketSearchCanceled.INSTANCE;const m=E.Vr.findNextBracketInRange(e.forwardRegex,o,l,d,u);if(!m)break;const f=l.substring(m.startColumn-1,m.endColumn-1).toLowerCase(),_=e.textIsBracket[f];if(_&&(_.isOpen(f)?g[_.index]++:_.isClose(f)&&g[_.index]--,-1===g[_.index]))return this._matchFoundBracket(m,_,!1,s);d=m.endColumn-1}return null};let m=null,f=null;for(let _=l.lineNumber;_<=d;_++){const e=this.textModel.getLineTokens(_),o=e.getCount(),s=this.textModel.getLineContent(_);let d=0,u=0,g=0;if(_===l.lineNumber){d=e.findTokenIndexAtOffset(l.column-1),u=l.column-1,g=l.column-1;const o=e.getLanguageId(d);m!==o&&(m=o,f=this.languageConfigurationService.getLanguageConfiguration(m).brackets,resetCounts(m,f))}let p=!0;for(;d<o;d++){const o=e.getLanguageId(d);if(m!==o){if(f&&p&&u!==g){const e=searchInRange(f,_,s,u,g);if(e)return stripBracketSearchCanceled(e);p=!1}m=o,f=this.languageConfigurationService.getLanguageConfiguration(m).brackets,resetCounts(m,f)}const l=!!f&&!(0,D.Bu)(e.getStandardTokenType(d));if(l)p||(u=e.getStartOffset(d)),g=e.getEndOffset(d);else if(f&&p&&u!==g){const e=searchInRange(f,_,s,u,g);if(e)return stripBracketSearchCanceled(e)}p=l}if(f&&p&&u!==g){const e=searchInRange(f,_,s,u,g);if(e)return stripBracketSearchCanceled(e)}}return null}_toFoundBracket(e,o){if(!o)return null;let s=this.textModel.getValueInRange(o);s=s.toLowerCase();const l=e.textIsBracket[s];return l?{range:o,open:l.open,close:l.close,isOpen:e.textIsOpenBracket[s]}:null}}function createDisposableRef(e,o){return{object:e,dispose:()=>null===o||void 0===o?void 0:o.dispose()}}function createTimeBasedContinueBracketSearchPredicate(e){if("undefined"===typeof e)return()=>!0;{const o=Date.now();return()=>Date.now()-o<=e}}class BracketSearchCanceled{constructor(){this._searchCanceledBrand=void 0}}function stripBracketSearchCanceled(e){return e instanceof BracketSearchCanceled?null:e}BracketSearchCanceled.INSTANCE=new BracketSearchCanceled;var T=s(8625),I=s(7781);class ColorizedBracketPairsDecorationProvider extends p.JT{constructor(e){super(),this.textModel=e,this.colorProvider=new ColorProvider,this.onDidChangeEmitter=new g.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange((e=>{this.onDidChangeEmitter.fire()})))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,o,s){if(void 0===o)return[];if(!this.colorizationOptions.enabled)return[];const l=new Array,d=this.textModel.bracketPairs.getBracketsInRange(e);for(const u of d)l.push({id:`bracket${u.range.toString()}-${u.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(u)},ownerId:0,range:u.range});return l}getAllDecorations(e,o){return void 0===e?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new C.e(1,1,this.textModel.getLineCount(),1),e,o):[]}}class ColorProvider{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return"bracket-highlighting-"+e%30}}(0,I.Ic)(((e,o)=>{const s=[T.zJ,T.Vs,T.CE,T.UP,T.r0,T.m1],l=new ColorProvider;o.addRule(`.monaco-editor .${l.unexpectedClosingBracketClassName} { color: ${e.getColor(T.ts)}; }`);const d=s.map((o=>e.getColor(o))).filter((e=>!!e)).filter((e=>!e.isTransparent()));for(let u=0;u<30;u++){const e=d[u%d.length];o.addRule(`.monaco-editor .${l.getInlineClassNameOfLevel(u)} { color: ${e}; }`)}}));var A=s(5215),M=s(3153);class SpacesDiffResult{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function spacesDiff(e,o,s,l,d){let u;for(d.spacesDiff=0,d.looksLikeAlignment=!1,u=0;u<o&&u<l;u++){const o=e.charCodeAt(u),l=s.charCodeAt(u);if(o!==l)break}let g=0,p=0;for(let b=u;b<o;b++){const o=e.charCodeAt(b);32===o?g++:p++}let m=0,f=0;for(let b=u;b<l;b++){const e=s.charCodeAt(b);32===e?m++:f++}if(g>0&&p>0)return;if(m>0&&f>0)return;const _=Math.abs(p-f),C=Math.abs(g-m);if(0===_)return d.spacesDiff=C,void(C>0&&0<=m-1&&m-1<e.length&&m<s.length&&32!==s.charCodeAt(m)&&32===e.charCodeAt(m-1)&&44===e.charCodeAt(e.length-1)&&(d.looksLikeAlignment=!0));C%_!==0||(d.spacesDiff=C/_)}function guessIndentation(e,o,s){const l=Math.min(e.getLineCount(),1e4);let d=0,u=0,g="",p=0;const m=[2,4,6,8,3,5,7],f=8,_=[0,0,0,0,0,0,0,0,0],C=new SpacesDiffResult;for(let S=1;S<=l;S++){const l=e.getLineLength(S),m=e.getLineContent(S),b=l<=65536;let w=!1,y=0,L=0,x=0;for(let o=0,s=l;o<s;o++){const s=b?m.charCodeAt(o):e.getLineCharCode(S,o);if(9===s)x++;else{if(32!==s){w=!0,y=o;break}L++}}if(!w)continue;if(x>0?d++:L>1&&u++,spacesDiff(g,p,m,y,C),C.looksLikeAlignment&&(!s||o!==C.spacesDiff))continue;const k=C.spacesDiff;k<=f&&_[k]++,g=m,p=y}let b=s;d!==u&&(b=d<u);let w=o;if(b){let e=b?0:.1*l;m.forEach((o=>{const s=_[o];s>e&&(e=s,w=o)})),4===w&&_[4]>0&&_[2]>0&&_[2]>=_[4]/2&&(w=2)}return{insertSpaces:b,tabSize:w}}function getNodeColor(e){return(1&e.metadata)>>>0}function setNodeColor(e,o){e.metadata=254&e.metadata|o<<0}function getNodeIsVisited(e){return(2&e.metadata)>>>1===1}function setNodeIsVisited(e,o){e.metadata=253&e.metadata|(o?1:0)<<1}function getNodeIsForValidation(e){return(4&e.metadata)>>>2===1}function setNodeIsForValidation(e,o){e.metadata=251&e.metadata|(o?1:0)<<2}function getNodeStickiness(e){return(24&e.metadata)>>>3}function _setNodeStickiness(e,o){e.metadata=231&e.metadata|o<<3}function getCollapseOnReplaceEdit(e){return(32&e.metadata)>>>5===1}function setCollapseOnReplaceEdit(e,o){e.metadata=223&e.metadata|(o?1:0)<<5}class IntervalNode{constructor(e,o,s){this.metadata=0,this.parent=this,this.left=this,this.right=this,setNodeColor(this,1),this.start=o,this.end=s,this.delta=0,this.maxEnd=s,this.id=e,this.ownerId=0,this.options=null,setNodeIsForValidation(this,!1),_setNodeStickiness(this,1),setCollapseOnReplaceEdit(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=o,this.cachedAbsoluteEnd=s,this.range=null,setNodeIsVisited(this,!1)}reset(e,o,s,l){this.start=o,this.end=s,this.maxEnd=s,this.cachedVersionId=e,this.cachedAbsoluteStart=o,this.cachedAbsoluteEnd=s,this.range=l}setOptions(e){this.options=e;const o=this.options.className;setNodeIsForValidation(this,"squiggly-error"===o||"squiggly-warning"===o||"squiggly-info"===o),_setNodeStickiness(this,this.options.stickiness),setCollapseOnReplaceEdit(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,o,s){this.cachedVersionId!==s&&(this.range=null),this.cachedVersionId=s,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=o}detach(){this.parent=null,this.left=null,this.right=null}}const R=new IntervalNode(null,0,0);R.parent=R,R.left=R,R.right=R,setNodeColor(R,0);class IntervalTree{constructor(){this.root=R,this.requestNormalizeDelta=!1}intervalSearch(e,o,s,l,d){return this.root===R?[]:intervalSearch(this,e,o,s,l,d)}search(e,o,s){return this.root===R?[]:search(this,e,o,s)}collectNodesFromOwner(e){return collectNodesFromOwner(this,e)}collectNodesPostOrder(){return collectNodesPostOrder(this)}insert(e){rbTreeInsert(this,e),this._normalizeDeltaIfNecessary()}delete(e){rbTreeDelete(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,o){const s=e;let l=0;while(e!==this.root)e===e.parent.right&&(l+=e.parent.delta),e=e.parent;const d=s.start+l,u=s.end+l;s.setCachedOffsets(d,u,o)}acceptReplace(e,o,s,l){const d=searchForEditing(this,e,e+o);for(let u=0,g=d.length;u<g;u++){const e=d[u];rbTreeDelete(this,e)}this._normalizeDeltaIfNecessary(),noOverlapReplace(this,e,e+o,s),this._normalizeDeltaIfNecessary();for(let u=0,g=d.length;u<g;u++){const g=d[u];g.start=g.cachedAbsoluteStart,g.end=g.cachedAbsoluteEnd,nodeAcceptEdit(g,e,e+o,s,l),g.maxEnd=g.end,rbTreeInsert(this,g)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,normalizeDelta(this))}}function normalizeDelta(e){let o=e.root,s=0;while(o!==R)o.left===R||getNodeIsVisited(o.left)?o.right===R||getNodeIsVisited(o.right)?(o.start=s+o.start,o.end=s+o.end,o.delta=0,recomputeMaxEnd(o),setNodeIsVisited(o,!0),setNodeIsVisited(o.left,!1),setNodeIsVisited(o.right,!1),o===o.parent.right&&(s-=o.parent.delta),o=o.parent):(s+=o.delta,o=o.right):o=o.left;setNodeIsVisited(e.root,!1)}function adjustMarkerBeforeColumn(e,o,s,l){return e<s||!(e>s)&&(1!==l&&(2===l||o))}function nodeAcceptEdit(e,o,s,l,d){const u=getNodeStickiness(e),g=0===u||2===u,p=1===u||2===u,m=s-o,f=l,_=Math.min(m,f),C=e.start;let b=!1;const w=e.end;let S=!1;o<=C&&w<=s&&getCollapseOnReplaceEdit(e)&&(e.start=o,b=!0,e.end=o,S=!0);{const e=d?1:m>0?2:0;!b&&adjustMarkerBeforeColumn(C,g,o,e)&&(b=!0),!S&&adjustMarkerBeforeColumn(w,p,o,e)&&(S=!0)}if(_>0&&!d){const e=m>f?2:0;!b&&adjustMarkerBeforeColumn(C,g,o+_,e)&&(b=!0),!S&&adjustMarkerBeforeColumn(w,p,o+_,e)&&(S=!0)}{const l=d?1:0;!b&&adjustMarkerBeforeColumn(C,g,s,l)&&(e.start=o+f,b=!0),!S&&adjustMarkerBeforeColumn(w,p,s,l)&&(e.end=o+f,S=!0)}const y=f-m;b||(e.start=Math.max(0,C+y)),S||(e.end=Math.max(0,w+y)),e.start>e.end&&(e.end=e.start)}function searchForEditing(e,o,s){let l=e.root,d=0,u=0,g=0,p=0;const m=[];let f=0;while(l!==R)if(getNodeIsVisited(l))setNodeIsVisited(l.left,!1),setNodeIsVisited(l.right,!1),l===l.parent.right&&(d-=l.parent.delta),l=l.parent;else{if(!getNodeIsVisited(l.left)){if(u=d+l.maxEnd,u<o){setNodeIsVisited(l,!0);continue}if(l.left!==R){l=l.left;continue}}g=d+l.start,g>s?setNodeIsVisited(l,!0):(p=d+l.end,p>=o&&(l.setCachedOffsets(g,p,0),m[f++]=l),setNodeIsVisited(l,!0),l.right===R||getNodeIsVisited(l.right)||(d+=l.delta,l=l.right))}return setNodeIsVisited(e.root,!1),m}function noOverlapReplace(e,o,s,l){let d=e.root,u=0,g=0,p=0;const m=l-(s-o);while(d!==R)if(getNodeIsVisited(d))setNodeIsVisited(d.left,!1),setNodeIsVisited(d.right,!1),d===d.parent.right&&(u-=d.parent.delta),recomputeMaxEnd(d),d=d.parent;else{if(!getNodeIsVisited(d.left)){if(g=u+d.maxEnd,g<o){setNodeIsVisited(d,!0);continue}if(d.left!==R){d=d.left;continue}}p=u+d.start,p>s?(d.start+=m,d.end+=m,d.delta+=m,(d.delta<-1073741824||d.delta>1073741824)&&(e.requestNormalizeDelta=!0),setNodeIsVisited(d,!0)):(setNodeIsVisited(d,!0),d.right===R||getNodeIsVisited(d.right)||(u+=d.delta,d=d.right))}setNodeIsVisited(e.root,!1)}function collectNodesFromOwner(e,o){let s=e.root;const l=[];let d=0;while(s!==R)getNodeIsVisited(s)?(setNodeIsVisited(s.left,!1),setNodeIsVisited(s.right,!1),s=s.parent):s.left===R||getNodeIsVisited(s.left)?(s.ownerId===o&&(l[d++]=s),setNodeIsVisited(s,!0),s.right===R||getNodeIsVisited(s.right)||(s=s.right)):s=s.left;return setNodeIsVisited(e.root,!1),l}function collectNodesPostOrder(e){let o=e.root;const s=[];let l=0;while(o!==R)getNodeIsVisited(o)?(setNodeIsVisited(o.left,!1),setNodeIsVisited(o.right,!1),o=o.parent):o.left===R||getNodeIsVisited(o.left)?o.right===R||getNodeIsVisited(o.right)?(s[l++]=o,setNodeIsVisited(o,!0)):o=o.right:o=o.left;return setNodeIsVisited(e.root,!1),s}function search(e,o,s,l){let d=e.root,u=0,g=0,p=0;const m=[];let f=0;while(d!==R){if(getNodeIsVisited(d)){setNodeIsVisited(d.left,!1),setNodeIsVisited(d.right,!1),d===d.parent.right&&(u-=d.parent.delta),d=d.parent;continue}if(d.left!==R&&!getNodeIsVisited(d.left)){d=d.left;continue}g=u+d.start,p=u+d.end,d.setCachedOffsets(g,p,l);let e=!0;o&&d.ownerId&&d.ownerId!==o&&(e=!1),s&&getNodeIsForValidation(d)&&(e=!1),e&&(m[f++]=d),setNodeIsVisited(d,!0),d.right===R||getNodeIsVisited(d.right)||(u+=d.delta,d=d.right)}return setNodeIsVisited(e.root,!1),m}function intervalSearch(e,o,s,l,d,u){let g=e.root,p=0,m=0,f=0,_=0;const C=[];let b=0;while(g!==R)if(getNodeIsVisited(g))setNodeIsVisited(g.left,!1),setNodeIsVisited(g.right,!1),g===g.parent.right&&(p-=g.parent.delta),g=g.parent;else{if(!getNodeIsVisited(g.left)){if(m=p+g.maxEnd,m<o){setNodeIsVisited(g,!0);continue}if(g.left!==R){g=g.left;continue}}if(f=p+g.start,f>s)setNodeIsVisited(g,!0);else{if(_=p+g.end,_>=o){g.setCachedOffsets(f,_,u);let e=!0;l&&g.ownerId&&g.ownerId!==l&&(e=!1),d&&getNodeIsForValidation(g)&&(e=!1),e&&(C[b++]=g)}setNodeIsVisited(g,!0),g.right===R||getNodeIsVisited(g.right)||(p+=g.delta,g=g.right)}}return setNodeIsVisited(e.root,!1),C}function rbTreeInsert(e,o){if(e.root===R)return o.parent=R,o.left=R,o.right=R,setNodeColor(o,0),e.root=o,e.root;treeInsert(e,o),recomputeMaxEndWalkToRoot(o.parent);let s=o;while(s!==e.root&&1===getNodeColor(s.parent))if(s.parent===s.parent.parent.left){const o=s.parent.parent.right;1===getNodeColor(o)?(setNodeColor(s.parent,0),setNodeColor(o,0),setNodeColor(s.parent.parent,1),s=s.parent.parent):(s===s.parent.right&&(s=s.parent,leftRotate(e,s)),setNodeColor(s.parent,0),setNodeColor(s.parent.parent,1),rightRotate(e,s.parent.parent))}else{const o=s.parent.parent.left;1===getNodeColor(o)?(setNodeColor(s.parent,0),setNodeColor(o,0),setNodeColor(s.parent.parent,1),s=s.parent.parent):(s===s.parent.left&&(s=s.parent,rightRotate(e,s)),setNodeColor(s.parent,0),setNodeColor(s.parent.parent,1),leftRotate(e,s.parent.parent))}return setNodeColor(e.root,0),o}function treeInsert(e,o){let s=0,l=e.root;const d=o.start,u=o.end;while(1){const e=intervalCompare(d,u,l.start+s,l.end+s);if(e<0){if(l.left===R){o.start-=s,o.end-=s,o.maxEnd-=s,l.left=o;break}l=l.left}else{if(l.right===R){o.start-=s+l.delta,o.end-=s+l.delta,o.maxEnd-=s+l.delta,l.right=o;break}s+=l.delta,l=l.right}}o.parent=l,o.left=R,o.right=R,setNodeColor(o,1)}function rbTreeDelete(e,o){let s,l;if(o.left===R?(s=o.right,l=o,s.delta+=o.delta,(s.delta<-1073741824||s.delta>1073741824)&&(e.requestNormalizeDelta=!0),s.start+=o.delta,s.end+=o.delta):o.right===R?(s=o.left,l=o):(l=leftest(o.right),s=l.right,s.start+=l.delta,s.end+=l.delta,s.delta+=l.delta,(s.delta<-1073741824||s.delta>1073741824)&&(e.requestNormalizeDelta=!0),l.start+=o.delta,l.end+=o.delta,l.delta=o.delta,(l.delta<-1073741824||l.delta>1073741824)&&(e.requestNormalizeDelta=!0)),l===e.root)return e.root=s,setNodeColor(s,0),o.detach(),resetSentinel(),recomputeMaxEnd(s),void(e.root.parent=R);const d=1===getNodeColor(l);if(l===l.parent.left?l.parent.left=s:l.parent.right=s,l===o?s.parent=l.parent:(l.parent===o?s.parent=l:s.parent=l.parent,l.left=o.left,l.right=o.right,l.parent=o.parent,setNodeColor(l,getNodeColor(o)),o===e.root?e.root=l:o===o.parent.left?o.parent.left=l:o.parent.right=l,l.left!==R&&(l.left.parent=l),l.right!==R&&(l.right.parent=l)),o.detach(),d)return recomputeMaxEndWalkToRoot(s.parent),l!==o&&(recomputeMaxEndWalkToRoot(l),recomputeMaxEndWalkToRoot(l.parent)),void resetSentinel();let u;recomputeMaxEndWalkToRoot(s),recomputeMaxEndWalkToRoot(s.parent),l!==o&&(recomputeMaxEndWalkToRoot(l),recomputeMaxEndWalkToRoot(l.parent));while(s!==e.root&&0===getNodeColor(s))s===s.parent.left?(u=s.parent.right,1===getNodeColor(u)&&(setNodeColor(u,0),setNodeColor(s.parent,1),leftRotate(e,s.parent),u=s.parent.right),0===getNodeColor(u.left)&&0===getNodeColor(u.right)?(setNodeColor(u,1),s=s.parent):(0===getNodeColor(u.right)&&(setNodeColor(u.left,0),setNodeColor(u,1),rightRotate(e,u),u=s.parent.right),setNodeColor(u,getNodeColor(s.parent)),setNodeColor(s.parent,0),setNodeColor(u.right,0),leftRotate(e,s.parent),s=e.root)):(u=s.parent.left,1===getNodeColor(u)&&(setNodeColor(u,0),setNodeColor(s.parent,1),rightRotate(e,s.parent),u=s.parent.left),0===getNodeColor(u.left)&&0===getNodeColor(u.right)?(setNodeColor(u,1),s=s.parent):(0===getNodeColor(u.left)&&(setNodeColor(u.right,0),setNodeColor(u,1),leftRotate(e,u),u=s.parent.left),setNodeColor(u,getNodeColor(s.parent)),setNodeColor(s.parent,0),setNodeColor(u.left,0),rightRotate(e,s.parent),s=e.root));setNodeColor(s,0),resetSentinel()}function leftest(e){while(e.left!==R)e=e.left;return e}function resetSentinel(){R.parent=R,R.delta=0,R.start=0,R.end=0}function leftRotate(e,o){const s=o.right;s.delta+=o.delta,(s.delta<-1073741824||s.delta>1073741824)&&(e.requestNormalizeDelta=!0),s.start+=o.delta,s.end+=o.delta,o.right=s.left,s.left!==R&&(s.left.parent=o),s.parent=o.parent,o.parent===R?e.root=s:o===o.parent.left?o.parent.left=s:o.parent.right=s,s.left=o,o.parent=s,recomputeMaxEnd(o),recomputeMaxEnd(s)}function rightRotate(e,o){const s=o.left;o.delta-=s.delta,(o.delta<-1073741824||o.delta>1073741824)&&(e.requestNormalizeDelta=!0),o.start-=s.delta,o.end-=s.delta,o.left=s.right,s.right!==R&&(s.right.parent=o),s.parent=o.parent,o.parent===R?e.root=s:o===o.parent.right?o.parent.right=s:o.parent.left=s,s.right=o,o.parent=s,recomputeMaxEnd(o),recomputeMaxEnd(s)}function computeMaxEnd(e){let o=e.end;if(e.left!==R){const s=e.left.maxEnd;s>o&&(o=s)}if(e.right!==R){const s=e.right.maxEnd+e.delta;s>o&&(o=s)}return o}function recomputeMaxEnd(e){e.maxEnd=computeMaxEnd(e)}function recomputeMaxEndWalkToRoot(e){while(e!==R){const o=computeMaxEnd(e);if(e.maxEnd===o)return;e.maxEnd=o,e=e.parent}}function intervalCompare(e,o,s,l){return e===s?o-l:e-s}class TreeNode{constructor(e,o){this.piece=e,this.color=o,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==P)return rbTreeBase_leftest(this.right);let e=this;while(e.parent!==P){if(e.parent.left===e)break;e=e.parent}return e.parent===P?P:e.parent}prev(){if(this.left!==P)return righttest(this.left);let e=this;while(e.parent!==P){if(e.parent.right===e)break;e=e.parent}return e.parent===P?P:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const P=new TreeNode(null,0);function rbTreeBase_leftest(e){while(e.left!==P)e=e.left;return e}function righttest(e){while(e.right!==P)e=e.right;return e}function calculateSize(e){return e===P?0:e.size_left+e.piece.length+calculateSize(e.right)}function calculateLF(e){return e===P?0:e.lf_left+e.piece.lineFeedCnt+calculateLF(e.right)}function rbTreeBase_resetSentinel(){P.parent=P}function rbTreeBase_leftRotate(e,o){const s=o.right;s.size_left+=o.size_left+(o.piece?o.piece.length:0),s.lf_left+=o.lf_left+(o.piece?o.piece.lineFeedCnt:0),o.right=s.left,s.left!==P&&(s.left.parent=o),s.parent=o.parent,o.parent===P?e.root=s:o.parent.left===o?o.parent.left=s:o.parent.right=s,s.left=o,o.parent=s}function rbTreeBase_rightRotate(e,o){const s=o.left;o.left=s.right,s.right!==P&&(s.right.parent=o),s.parent=o.parent,o.size_left-=s.size_left+(s.piece?s.piece.length:0),o.lf_left-=s.lf_left+(s.piece?s.piece.lineFeedCnt:0),o.parent===P?e.root=s:o===o.parent.right?o.parent.right=s:o.parent.left=s,s.right=o,o.parent=s}function rbDelete(e,o){let s,l;if(o.left===P?(l=o,s=l.right):o.right===P?(l=o,s=l.left):(l=rbTreeBase_leftest(o.right),s=l.right),l===e.root)return e.root=s,s.color=0,o.detach(),rbTreeBase_resetSentinel(),void(e.root.parent=P);const d=1===l.color;if(l===l.parent.left?l.parent.left=s:l.parent.right=s,l===o?(s.parent=l.parent,recomputeTreeMetadata(e,s)):(l.parent===o?s.parent=l:s.parent=l.parent,recomputeTreeMetadata(e,s),l.left=o.left,l.right=o.right,l.parent=o.parent,l.color=o.color,o===e.root?e.root=l:o===o.parent.left?o.parent.left=l:o.parent.right=l,l.left!==P&&(l.left.parent=l),l.right!==P&&(l.right.parent=l),l.size_left=o.size_left,l.lf_left=o.lf_left,recomputeTreeMetadata(e,l)),o.detach(),s.parent.left===s){const o=calculateSize(s),l=calculateLF(s);if(o!==s.parent.size_left||l!==s.parent.lf_left){const d=o-s.parent.size_left,u=l-s.parent.lf_left;s.parent.size_left=o,s.parent.lf_left=l,updateTreeMetadata(e,s.parent,d,u)}}if(recomputeTreeMetadata(e,s.parent),d)return void rbTreeBase_resetSentinel();let u;while(s!==e.root&&0===s.color)s===s.parent.left?(u=s.parent.right,1===u.color&&(u.color=0,s.parent.color=1,rbTreeBase_leftRotate(e,s.parent),u=s.parent.right),0===u.left.color&&0===u.right.color?(u.color=1,s=s.parent):(0===u.right.color&&(u.left.color=0,u.color=1,rbTreeBase_rightRotate(e,u),u=s.parent.right),u.color=s.parent.color,s.parent.color=0,u.right.color=0,rbTreeBase_leftRotate(e,s.parent),s=e.root)):(u=s.parent.left,1===u.color&&(u.color=0,s.parent.color=1,rbTreeBase_rightRotate(e,s.parent),u=s.parent.left),0===u.left.color&&0===u.right.color?(u.color=1,s=s.parent):(0===u.left.color&&(u.right.color=0,u.color=1,rbTreeBase_leftRotate(e,u),u=s.parent.left),u.color=s.parent.color,s.parent.color=0,u.left.color=0,rbTreeBase_rightRotate(e,s.parent),s=e.root));s.color=0,rbTreeBase_resetSentinel()}function fixInsert(e,o){recomputeTreeMetadata(e,o);while(o!==e.root&&1===o.parent.color)if(o.parent===o.parent.parent.left){const s=o.parent.parent.right;1===s.color?(o.parent.color=0,s.color=0,o.parent.parent.color=1,o=o.parent.parent):(o===o.parent.right&&(o=o.parent,rbTreeBase_leftRotate(e,o)),o.parent.color=0,o.parent.parent.color=1,rbTreeBase_rightRotate(e,o.parent.parent))}else{const s=o.parent.parent.left;1===s.color?(o.parent.color=0,s.color=0,o.parent.parent.color=1,o=o.parent.parent):(o===o.parent.left&&(o=o.parent,rbTreeBase_rightRotate(e,o)),o.parent.color=0,o.parent.parent.color=1,rbTreeBase_leftRotate(e,o.parent.parent))}e.root.color=0}function updateTreeMetadata(e,o,s,l){while(o!==e.root&&o!==P)o.parent.left===o&&(o.parent.size_left+=s,o.parent.lf_left+=l),o=o.parent}function recomputeTreeMetadata(e,o){let s=0,l=0;if(o!==e.root){while(o!==e.root&&o===o.parent.right)o=o.parent;if(o!==e.root){o=o.parent,s=calculateSize(o.left)-o.size_left,l=calculateLF(o.left)-o.lf_left,o.size_left+=s,o.lf_left+=l;while(o!==e.root&&(0!==s||0!==l))o.parent.left===o&&(o.parent.size_left+=s,o.parent.lf_left+=l),o=o.parent}}}P.parent=P,P.left=P,P.right=P,P.color=0;var O=s(7277);const F=65535;function createUintArray(e){let o;return o=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),o.set(e,0),o}class LineStarts{constructor(e,o,s,l,d){this.lineStarts=e,this.cr=o,this.lf=s,this.crlf=l,this.isBasicASCII=d}}function createLineStartsFast(e,o=!0){const s=[0];let l=1;for(let d=0,u=e.length;d<u;d++){const o=e.charCodeAt(d);13===o?d+1<u&&10===e.charCodeAt(d+1)?(s[l++]=d+2,d++):s[l++]=d+1:10===o&&(s[l++]=d+1)}return o?createUintArray(s):s}function createLineStarts(e,o){e.length=0,e[0]=0;let s=1,l=0,d=0,u=0,g=!0;for(let m=0,f=o.length;m<f;m++){const p=o.charCodeAt(m);13===p?m+1<f&&10===o.charCodeAt(m+1)?(u++,e[s++]=m+2,m++):(l++,e[s++]=m+1):10===p?(d++,e[s++]=m+1):g&&9!==p&&(p<32||p>126)&&(g=!1)}const p=new LineStarts(createUintArray(e),l,d,u,g);return e.length=0,p}class Piece{constructor(e,o,s,l,d){this.bufferIndex=e,this.start=o,this.end=s,this.lineFeedCnt=l,this.length=d}}class StringBuffer{constructor(e,o){this.buffer=e,this.lineStarts=o}}class PieceTreeSnapshot{constructor(e,o){this._pieces=[],this._tree=e,this._BOM=o,this._index=0,e.root!==P&&e.iterate(e.root,(e=>(e!==P&&this._pieces.push(e.piece),!0)))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class PieceTreeSearchCache{constructor(e){this._limit=e,this._cache=[]}get(e){for(let o=this._cache.length-1;o>=0;o--){const s=this._cache[o];if(s.nodeStartOffset<=e&&s.nodeStartOffset+s.node.piece.length>=e)return s}return null}get2(e){for(let o=this._cache.length-1;o>=0;o--){const s=this._cache[o];if(s.nodeStartLineNumber&&s.nodeStartLineNumber<e&&s.nodeStartLineNumber+s.node.piece.lineFeedCnt>=e)return s}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let o=!1;const s=this._cache;for(let l=0;l<s.length;l++){const d=s[l];(null===d.node.parent||d.nodeStartOffset>=e)&&(s[l]=null,o=!0)}if(o){const e=[];for(const o of s)null!==o&&e.push(o);this._cache=e}}}class PieceTreeBase{constructor(e,o,s){this.create(e,o,s)}create(e,o,s){this._buffers=[new StringBuffer("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=P,this._lineCnt=1,this._length=0,this._EOL=o,this._EOLLength=o.length,this._EOLNormalized=s;let l=null;for(let d=0,u=e.length;d<u;d++)if(e[d].buffer.length>0){e[d].lineStarts||(e[d].lineStarts=createLineStartsFast(e[d].buffer));const o=new Piece(d+1,{line:0,column:0},{line:e[d].lineStarts.length-1,column:e[d].buffer.length-e[d].lineStarts[e[d].lineStarts.length-1]},e[d].lineStarts.length-1,e[d].buffer.length);this._buffers.push(e[d]),l=this.rbInsertRight(l,o)}this._searchCache=new PieceTreeSearchCache(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const o=F,s=o-Math.floor(o/3),l=2*s;let d="",u=0;const g=[];if(this.iterate(this.root,(o=>{const p=this.getNodeContent(o),m=p.length;if(u<=s||u+m<l)return d+=p,u+=m,!0;const f=d.replace(/\r\n|\r|\n/g,e);return g.push(new StringBuffer(f,createLineStartsFast(f))),d=p,u=m,!0})),u>0){const o=d.replace(/\r\n|\r|\n/g,e);g.push(new StringBuffer(o,createLineStartsFast(o)))}this.create(g,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new PieceTreeSnapshot(this,e)}getOffsetAt(e,o){let s=0,l=this.root;while(l!==P)if(l.left!==P&&l.lf_left+1>=e)l=l.left;else{if(l.lf_left+l.piece.lineFeedCnt+1>=e){s+=l.size_left;const d=this.getAccumulatedValue(l,e-l.lf_left-2);return s+(d+o-1)}e-=l.lf_left+l.piece.lineFeedCnt,s+=l.size_left+l.piece.length,l=l.right}return s}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let o=this.root,s=0;const l=e;while(o!==P)if(0!==o.size_left&&o.size_left>=e)o=o.left;else{if(o.size_left+o.piece.length>=e){const d=this.getIndexOf(o,e-o.size_left);if(s+=o.lf_left+d.index,0===d.index){const e=this.getOffsetAt(s+1,1),o=l-e;return new _.L(s+1,o+1)}return new _.L(s+1,d.remainder+1)}if(e-=o.size_left+o.piece.length,s+=o.lf_left+o.piece.lineFeedCnt,o.right===P){const o=this.getOffsetAt(s+1,1),d=l-e-o;return new _.L(s+1,d+1)}o=o.right}return new _.L(1,1)}getValueInRange(e,o){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const s=this.nodeAt2(e.startLineNumber,e.startColumn),l=this.nodeAt2(e.endLineNumber,e.endColumn),d=this.getValueInRange2(s,l);return o?o===this._EOL&&this._EOLNormalized&&o===this.getEOL()&&this._EOLNormalized?d:d.replace(/\r\n|\r|\n/g,o):d}getValueInRange2(e,o){if(e.node===o.node){const s=e.node,l=this._buffers[s.piece.bufferIndex].buffer,d=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);return l.substring(d+e.remainder,d+o.remainder)}let s=e.node;const l=this._buffers[s.piece.bufferIndex].buffer,d=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);let u=l.substring(d+e.remainder,d+s.piece.length);s=s.next();while(s!==P){const e=this._buffers[s.piece.bufferIndex].buffer,l=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);if(s===o.node){u+=e.substring(l,l+o.remainder);break}u+=e.substr(l,s.piece.length),s=s.next()}return u}getLinesContent(){const e=[];let o=0,s="",l=!1;return this.iterate(this.root,(d=>{if(d===P)return!0;const u=d.piece;let g=u.length;if(0===g)return!0;const p=this._buffers[u.bufferIndex].buffer,m=this._buffers[u.bufferIndex].lineStarts,f=u.start.line,_=u.end.line;let C=m[f]+u.start.column;if(l&&(10===p.charCodeAt(C)&&(C++,g--),e[o++]=s,s="",l=!1,0===g))return!0;if(f===_)return this._EOLNormalized||13!==p.charCodeAt(C+g-1)?s+=p.substr(C,g):(l=!0,s+=p.substr(C,g-1)),!0;s+=this._EOLNormalized?p.substring(C,Math.max(C,m[f+1]-this._EOLLength)):p.substring(C,m[f+1]).replace(/(\r\n|\r|\n)$/,""),e[o++]=s;for(let l=f+1;l<_;l++)s=this._EOLNormalized?p.substring(m[l],m[l+1]-this._EOLLength):p.substring(m[l],m[l+1]).replace(/(\r\n|\r|\n)$/,""),e[o++]=s;return this._EOLNormalized||13!==p.charCodeAt(m[_]+u.end.column-1)?s=p.substr(m[_],u.end.column):(l=!0,0===u.end.column?o--:s=p.substr(m[_],u.end.column-1)),!0})),l&&(e[o++]=s,s=""),e[o++]=s,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){const o=e.node.next();if(!o)return 0;const s=this._buffers[o.piece.bufferIndex],l=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);return s.buffer.charCodeAt(l)}{const o=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start),l=s+e.remainder;return o.buffer.charCodeAt(l)}}getLineCharCode(e,o){const s=this.nodeAt2(e,o+1);return this._getCharCode(s)}getLineLength(e){if(e===this.getLineCount()){const o=this.getOffsetAt(e,1);return this.getLength()-o}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,o,s,l,d,u,g,p,m,f,_){const b=this._buffers[e.piece.bufferIndex],w=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),S=this.offsetInBuffer(e.piece.bufferIndex,d),y=this.offsetInBuffer(e.piece.bufferIndex,u);let L;const x={line:0,column:0};let k,N;o._wordSeparators?(k=b.buffer.substring(S,y),N=e=>e+S,o.reset(0)):(k=b.buffer,N=e=>e,o.reset(S));do{if(L=o.next(k),L){if(N(L.index)>=y)return f;this.positionInBuffer(e,N(L.index)-w,x);const o=this.getLineFeedCnt(e.piece.bufferIndex,d,x),u=x.line===d.line?x.column-d.column+l:x.column+1,g=u+L[0].length;if(_[f++]=(0,O.iE)(new C.e(s+o,u,s+o,g),L,p),N(L.index)+L[0].length>=y)return f;if(f>=m)return f}}while(L);return f}findMatchesLineByLine(e,o,s,l){const d=[];let u=0;const g=new O.sz(o.wordSeparators,o.regex);let p=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===p)return[];const m=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===m)return[];let f=this.positionInBuffer(p.node,p.remainder);const _=this.positionInBuffer(m.node,m.remainder);if(p.node===m.node)return this.findMatchesInNode(p.node,g,e.startLineNumber,e.startColumn,f,_,o,s,l,u,d),d;let C=e.startLineNumber,b=p.node;while(b!==m.node){const m=this.getLineFeedCnt(b.piece.bufferIndex,f,b.piece.end);if(m>=1){const p=this._buffers[b.piece.bufferIndex].lineStarts,_=this.offsetInBuffer(b.piece.bufferIndex,b.piece.start),w=p[f.line+m],S=C===e.startLineNumber?e.startColumn:1;if(u=this.findMatchesInNode(b,g,C,S,f,this.positionInBuffer(b,w-_),o,s,l,u,d),u>=l)return d;C+=m}const _=C===e.startLineNumber?e.startColumn-1:0;if(C===e.endLineNumber){const p=this.getLineContent(C).substring(_,e.endColumn-1);return u=this._findMatchesInLine(o,g,p,e.endLineNumber,_,u,d,s,l),d}if(u=this._findMatchesInLine(o,g,this.getLineContent(C).substr(_),C,_,u,d,s,l),u>=l)return d;C++,p=this.nodeAt2(C,1),b=p.node,f=this.positionInBuffer(p.node,p.remainder)}if(C===e.endLineNumber){const p=C===e.startLineNumber?e.startColumn-1:0,m=this.getLineContent(C).substring(p,e.endColumn-1);return u=this._findMatchesInLine(o,g,m,e.endLineNumber,p,u,d,s,l),d}const w=C===e.startLineNumber?e.startColumn:1;return u=this.findMatchesInNode(m.node,g,C,w,f,_,o,s,l,u,d),d}_findMatchesInLine(e,o,s,l,d,u,g,p,m){const f=e.wordSeparators;if(!p&&e.simpleSearch){const o=e.simpleSearch,p=o.length,_=s.length;let b=-p;while(-1!==(b=s.indexOf(o,b+p)))if((!f||(0,O.cM)(f,s,_,b,p))&&(g[u++]=new w.tk(new C.e(l,b+1+d,l,b+1+p+d),null),u>=m))return u;return u}let _;o.reset(0);do{if(_=o.next(s),_&&(g[u++]=(0,O.iE)(new C.e(l,_.index+1+d,l,_.index+1+_[0].length+d),_,p),u>=m))return u}while(_);return u}insert(e,o,s=!1){if(this._EOLNormalized=this._EOLNormalized&&s,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==P){const{node:s,remainder:l,nodeStartOffset:d}=this.nodeAt(e),u=s.piece,g=u.bufferIndex,p=this.positionInBuffer(s,l);if(0===s.piece.bufferIndex&&u.end.line===this._lastChangeBufferPos.line&&u.end.column===this._lastChangeBufferPos.column&&d+u.length===e&&o.length<F)return this.appendToNode(s,o),void this.computeBufferMetadata();if(d===e)this.insertContentToNodeLeft(o,s),this._searchCache.validate(e);else if(d+s.piece.length>e){const e=[];let d=new Piece(u.bufferIndex,p,u.end,this.getLineFeedCnt(u.bufferIndex,p,u.end),this.offsetInBuffer(g,u.end)-this.offsetInBuffer(g,p));if(this.shouldCheckCRLF()&&this.endWithCR(o)){const e=this.nodeCharCodeAt(s,l);if(10===e){const e={line:d.start.line+1,column:0};d=new Piece(d.bufferIndex,e,d.end,this.getLineFeedCnt(d.bufferIndex,e,d.end),d.length-1),o+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(o)){const d=this.nodeCharCodeAt(s,l-1);if(13===d){const d=this.positionInBuffer(s,l-1);this.deleteNodeTail(s,d),o="\r"+o,0===s.piece.length&&e.push(s)}else this.deleteNodeTail(s,p)}else this.deleteNodeTail(s,p);const m=this.createNewPieces(o);d.length>0&&this.rbInsertRight(s,d);let f=s;for(let o=0;o<m.length;o++)f=this.rbInsertRight(f,m[o]);this.deleteNodes(e)}else this.insertContentToNodeRight(o,s)}else{const e=this.createNewPieces(o);let s=this.rbInsertLeft(null,e[0]);for(let o=1;o<e.length;o++)s=this.rbInsertRight(s,e[o])}this.computeBufferMetadata()}delete(e,o){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",o<=0||this.root===P)return;const s=this.nodeAt(e),l=this.nodeAt(e+o),d=s.node,u=l.node;if(d===u){const u=this.positionInBuffer(d,s.remainder),g=this.positionInBuffer(d,l.remainder);if(s.nodeStartOffset===e){if(o===d.piece.length){const e=d.next();return rbDelete(this,d),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(d,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(d),void this.computeBufferMetadata()}return s.nodeStartOffset+d.piece.length===e+o?(this.deleteNodeTail(d,u),this.validateCRLFWithNextNode(d),void this.computeBufferMetadata()):(this.shrinkNode(d,u,g),void this.computeBufferMetadata())}const g=[],p=this.positionInBuffer(d,s.remainder);this.deleteNodeTail(d,p),this._searchCache.validate(e),0===d.piece.length&&g.push(d);const m=this.positionInBuffer(u,l.remainder);this.deleteNodeHead(u,m),0===u.piece.length&&g.push(u);const f=d.next();for(let C=f;C!==P&&C!==u;C=C.next())g.push(C);const _=0===d.piece.length?d.prev():d;this.deleteNodes(g),this.validateCRLFWithNextNode(_),this.computeBufferMetadata()}insertContentToNodeLeft(e,o){const s=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(o)){const l=o.piece,d={line:l.start.line+1,column:0},u=new Piece(l.bufferIndex,d,l.end,this.getLineFeedCnt(l.bufferIndex,d,l.end),l.length-1);o.piece=u,e+="\n",updateTreeMetadata(this,o,-1,-1),0===o.piece.length&&s.push(o)}const l=this.createNewPieces(e);let d=this.rbInsertLeft(o,l[l.length-1]);for(let u=l.length-2;u>=0;u--)d=this.rbInsertLeft(d,l[u]);this.validateCRLFWithPrevNode(d),this.deleteNodes(s)}insertContentToNodeRight(e,o){this.adjustCarriageReturnFromNext(e,o)&&(e+="\n");const s=this.createNewPieces(e),l=this.rbInsertRight(o,s[0]);let d=l;for(let u=1;u<s.length;u++)d=this.rbInsertRight(d,s[u]);this.validateCRLFWithPrevNode(l)}positionInBuffer(e,o,s){const l=e.piece,d=e.piece.bufferIndex,u=this._buffers[d].lineStarts,g=u[l.start.line]+l.start.column,p=g+o;let m=l.start.line,f=l.end.line,_=0,C=0,b=0;while(m<=f){if(_=m+(f-m)/2|0,b=u[_],_===f)break;if(C=u[_+1],p<b)f=_-1;else{if(!(p>=C))break;m=_+1}}return s?(s.line=_,s.column=p-b,null):{line:_,column:p-b}}getLineFeedCnt(e,o,s){if(0===s.column)return s.line-o.line;const l=this._buffers[e].lineStarts;if(s.line===l.length-1)return s.line-o.line;const d=l[s.line+1],u=l[s.line]+s.column;if(d>u+1)return s.line-o.line;const g=u-1,p=this._buffers[e].buffer;return 13===p.charCodeAt(g)?s.line-o.line+1:s.line-o.line}offsetInBuffer(e,o){const s=this._buffers[e].lineStarts;return s[o.line]+o.column}deleteNodes(e){for(let o=0;o<e.length;o++)rbDelete(this,e[o])}createNewPieces(e){if(e.length>F){const o=[];while(e.length>F){const s=e.charCodeAt(F-1);let l;13===s||s>=55296&&s<=56319?(l=e.substring(0,F-1),e=e.substring(F-1)):(l=e.substring(0,F),e=e.substring(F));const d=createLineStartsFast(l);o.push(new Piece(this._buffers.length,{line:0,column:0},{line:d.length-1,column:l.length-d[d.length-1]},d.length-1,l.length)),this._buffers.push(new StringBuffer(l,d))}const s=createLineStartsFast(e);return o.push(new Piece(this._buffers.length,{line:0,column:0},{line:s.length-1,column:e.length-s[s.length-1]},s.length-1,e.length)),this._buffers.push(new StringBuffer(e,s)),o}let o=this._buffers[0].buffer.length;const s=createLineStartsFast(e,!1);let l=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===o&&0!==o&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},l=this._lastChangeBufferPos;for(let e=0;e<s.length;e++)s[e]+=o+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1)),this._buffers[0].buffer+="_"+e,o+=1}else{if(0!==o)for(let e=0;e<s.length;e++)s[e]+=o;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1)),this._buffers[0].buffer+=e}const d=this._buffers[0].buffer.length,u=this._buffers[0].lineStarts.length-1,g=d-this._buffers[0].lineStarts[u],p={line:u,column:g},m=new Piece(0,l,p,this.getLineFeedCnt(0,l,p),d-o);return this._lastChangeBufferPos=p,[m]}getLineRawContent(e,o=0){let s=this.root,l="";const d=this._searchCache.get2(e);if(d){s=d.node;const u=this.getAccumulatedValue(s,e-d.nodeStartLineNumber-1),g=this._buffers[s.piece.bufferIndex].buffer,p=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);if(d.nodeStartLineNumber+s.piece.lineFeedCnt!==e){const l=this.getAccumulatedValue(s,e-d.nodeStartLineNumber);return g.substring(p+u,p+l-o)}l=g.substring(p+u,p+s.piece.length)}else{let d=0;const u=e;while(s!==P)if(s.left!==P&&s.lf_left>=e-1)s=s.left;else{if(s.lf_left+s.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(s,e-s.lf_left-2),g=this.getAccumulatedValue(s,e-s.lf_left-1),p=this._buffers[s.piece.bufferIndex].buffer,m=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);return d+=s.size_left,this._searchCache.set({node:s,nodeStartOffset:d,nodeStartLineNumber:u-(e-1-s.lf_left)}),p.substring(m+l,m+g-o)}if(s.lf_left+s.piece.lineFeedCnt===e-1){const o=this.getAccumulatedValue(s,e-s.lf_left-2),d=this._buffers[s.piece.bufferIndex].buffer,u=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);l=d.substring(u+o,u+s.piece.length);break}e-=s.lf_left+s.piece.lineFeedCnt,d+=s.size_left+s.piece.length,s=s.right}}s=s.next();while(s!==P){const e=this._buffers[s.piece.bufferIndex].buffer;if(s.piece.lineFeedCnt>0){const d=this.getAccumulatedValue(s,0),u=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);return l+=e.substring(u,u+d-o),l}{const o=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);l+=e.substr(o,s.piece.length)}s=s.next()}return l}computeBufferMetadata(){let e=this.root,o=1,s=0;while(e!==P)o+=e.lf_left+e.piece.lineFeedCnt,s+=e.size_left+e.piece.length,e=e.right;this._lineCnt=o,this._length=s,this._searchCache.validate(this._length)}getIndexOf(e,o){const s=e.piece,l=this.positionInBuffer(e,o),d=l.line-s.start.line;if(this.offsetInBuffer(s.bufferIndex,s.end)-this.offsetInBuffer(s.bufferIndex,s.start)===o){const o=this.getLineFeedCnt(e.piece.bufferIndex,s.start,l);if(o!==d)return{index:o,remainder:0}}return{index:d,remainder:l.column}}getAccumulatedValue(e,o){if(o<0)return 0;const s=e.piece,l=this._buffers[s.bufferIndex].lineStarts,d=s.start.line+o+1;return d>s.end.line?l[s.end.line]+s.end.column-l[s.start.line]-s.start.column:l[d]-l[s.start.line]-s.start.column}deleteNodeTail(e,o){const s=e.piece,l=s.lineFeedCnt,d=this.offsetInBuffer(s.bufferIndex,s.end),u=o,g=this.offsetInBuffer(s.bufferIndex,u),p=this.getLineFeedCnt(s.bufferIndex,s.start,u),m=p-l,f=g-d,_=s.length+f;e.piece=new Piece(s.bufferIndex,s.start,u,p,_),updateTreeMetadata(this,e,f,m)}deleteNodeHead(e,o){const s=e.piece,l=s.lineFeedCnt,d=this.offsetInBuffer(s.bufferIndex,s.start),u=o,g=this.getLineFeedCnt(s.bufferIndex,u,s.end),p=this.offsetInBuffer(s.bufferIndex,u),m=g-l,f=d-p,_=s.length+f;e.piece=new Piece(s.bufferIndex,u,s.end,g,_),updateTreeMetadata(this,e,f,m)}shrinkNode(e,o,s){const l=e.piece,d=l.start,u=l.end,g=l.length,p=l.lineFeedCnt,m=o,f=this.getLineFeedCnt(l.bufferIndex,l.start,m),_=this.offsetInBuffer(l.bufferIndex,o)-this.offsetInBuffer(l.bufferIndex,d);e.piece=new Piece(l.bufferIndex,l.start,m,f,_),updateTreeMetadata(this,e,_-g,f-p);const C=new Piece(l.bufferIndex,s,u,this.getLineFeedCnt(l.bufferIndex,s,u),this.offsetInBuffer(l.bufferIndex,u)-this.offsetInBuffer(l.bufferIndex,s)),b=this.rbInsertRight(e,C);this.validateCRLFWithPrevNode(b)}appendToNode(e,o){this.adjustCarriageReturnFromNext(o,e)&&(o+="\n");const s=this.shouldCheckCRLF()&&this.startWithLF(o)&&this.endWithCR(e),l=this._buffers[0].buffer.length;this._buffers[0].buffer+=o;const d=createLineStartsFast(o,!1);for(let b=0;b<d.length;b++)d[b]+=l;if(s){const e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:l-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(d.slice(1));const u=this._buffers[0].lineStarts.length-1,g=this._buffers[0].buffer.length-this._buffers[0].lineStarts[u],p={line:u,column:g},m=e.piece.length+o.length,f=e.piece.lineFeedCnt,_=this.getLineFeedCnt(0,e.piece.start,p),C=_-f;e.piece=new Piece(e.piece.bufferIndex,e.piece.start,p,_,m),this._lastChangeBufferPos=p,updateTreeMetadata(this,e,o.length,C)}nodeAt(e){let o=this.root;const s=this._searchCache.get(e);if(s)return{node:s.node,nodeStartOffset:s.nodeStartOffset,remainder:e-s.nodeStartOffset};let l=0;while(o!==P)if(o.size_left>e)o=o.left;else{if(o.size_left+o.piece.length>=e){l+=o.size_left;const s={node:o,remainder:e-o.size_left,nodeStartOffset:l};return this._searchCache.set(s),s}e-=o.size_left+o.piece.length,l+=o.size_left+o.piece.length,o=o.right}return null}nodeAt2(e,o){let s=this.root,l=0;while(s!==P)if(s.left!==P&&s.lf_left>=e-1)s=s.left;else{if(s.lf_left+s.piece.lineFeedCnt>e-1){const d=this.getAccumulatedValue(s,e-s.lf_left-2),u=this.getAccumulatedValue(s,e-s.lf_left-1);return l+=s.size_left,{node:s,remainder:Math.min(d+o-1,u),nodeStartOffset:l}}if(s.lf_left+s.piece.lineFeedCnt===e-1){const d=this.getAccumulatedValue(s,e-s.lf_left-2);if(d+o-1<=s.piece.length)return{node:s,remainder:d+o-1,nodeStartOffset:l};o-=s.piece.length-d;break}e-=s.lf_left+s.piece.lineFeedCnt,l+=s.size_left+s.piece.length,s=s.right}s=s.next();while(s!==P){if(s.piece.lineFeedCnt>0){const e=this.getAccumulatedValue(s,0),l=this.offsetOfNode(s);return{node:s,remainder:Math.min(o-1,e),nodeStartOffset:l}}if(s.piece.length>=o-1){const e=this.offsetOfNode(s);return{node:s,remainder:o-1,nodeStartOffset:e}}o-=s.piece.length,s=s.next()}return null}nodeCharCodeAt(e,o){if(e.piece.lineFeedCnt<1)return-1;const s=this._buffers[e.piece.bufferIndex],l=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+o;return s.buffer.charCodeAt(l)}offsetOfNode(e){if(!e)return 0;let o=e.size_left;while(e!==this.root)e.parent.right===e&&(o+=e.parent.size_left+e.parent.piece.length),e=e.parent;return o}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"===typeof e)return 10===e.charCodeAt(0);if(e===P||0===e.piece.lineFeedCnt)return!1;const o=e.piece,s=this._buffers[o.bufferIndex].lineStarts,l=o.start.line,d=s[l]+o.start.column;if(l===s.length-1)return!1;const u=s[l+1];return!(u>d+1)&&10===this._buffers[o.bufferIndex].buffer.charCodeAt(d)}endWithCR(e){return"string"===typeof e?13===e.charCodeAt(e.length-1):e!==P&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const o=e.prev();this.endWithCR(o)&&this.fixCRLF(o,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const o=e.next();this.startWithLF(o)&&this.fixCRLF(e,o)}}fixCRLF(e,o){const s=[],l=this._buffers[e.piece.bufferIndex].lineStarts;let d;d=0===e.piece.end.column?{line:e.piece.end.line-1,column:l[e.piece.end.line]-l[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const u=e.piece.length-1,g=e.piece.lineFeedCnt-1;e.piece=new Piece(e.piece.bufferIndex,e.piece.start,d,g,u),updateTreeMetadata(this,e,-1,-1),0===e.piece.length&&s.push(e);const p={line:o.piece.start.line+1,column:0},m=o.piece.length-1,f=this.getLineFeedCnt(o.piece.bufferIndex,p,o.piece.end);o.piece=new Piece(o.piece.bufferIndex,p,o.piece.end,f,m),updateTreeMetadata(this,o,-1,-1),0===o.piece.length&&s.push(o);const _=this.createNewPieces("\r\n");this.rbInsertRight(e,_[0]);for(let C=0;C<s.length;C++)rbDelete(this,s[C])}adjustCarriageReturnFromNext(e,o){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const s=o.next();if(this.startWithLF(s)){if(e+="\n",1===s.piece.length)rbDelete(this,s);else{const e=s.piece,o={line:e.start.line+1,column:0},l=e.length-1,d=this.getLineFeedCnt(e.bufferIndex,o,e.end);s.piece=new Piece(e.bufferIndex,o,e.end,d,l),updateTreeMetadata(this,s,-1,-1)}return!0}}return!1}iterate(e,o){if(e===P)return o(P);const s=this.iterate(e.left,o);return s?o(e)&&this.iterate(e.right,o):s}getNodeContent(e){if(e===P)return"";const o=this._buffers[e.piece.bufferIndex];let s;const l=e.piece,d=this.offsetInBuffer(l.bufferIndex,l.start),u=this.offsetInBuffer(l.bufferIndex,l.end);return s=o.buffer.substring(d,u),s}getPieceContent(e){const o=this._buffers[e.bufferIndex],s=this.offsetInBuffer(e.bufferIndex,e.start),l=this.offsetInBuffer(e.bufferIndex,e.end),d=o.buffer.substring(s,l);return d}rbInsertRight(e,o){const s=new TreeNode(o,1);s.left=P,s.right=P,s.parent=P,s.size_left=0,s.lf_left=0;const l=this.root;if(l===P)this.root=s,s.color=0;else if(e.right===P)e.right=s,s.parent=e;else{const o=rbTreeBase_leftest(e.right);o.left=s,s.parent=o}return fixInsert(this,s),s}rbInsertLeft(e,o){const s=new TreeNode(o,1);if(s.left=P,s.right=P,s.parent=P,s.size_left=0,s.lf_left=0,this.root===P)this.root=s,s.color=0;else if(e.left===P)e.left=s,s.parent=e;else{const o=righttest(e.left);o.right=s,s.parent=o}return fixInsert(this,s),s}}var B=s(3795),W=s(3033);class PieceTreeTextBuffer extends p.JT{constructor(e,o,s,l,d,u,p){super(),this._onDidChangeContent=this._register(new g.Q5),this._BOM=o,this._mightContainNonBasicASCII=!u,this._mightContainRTL=l,this._mightContainUnusualLineTerminators=d,this._pieceTree=new PieceTreeBase(e,s,p)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,o){return this._pieceTree.getOffsetAt(e,o)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,o){const s=e+o,l=this.getPositionAt(e),d=this.getPositionAt(s);return new C.e(l.lineNumber,l.column,d.lineNumber,d.column)}getValueInRange(e,o=0){if(e.isEmpty())return"";const s=this._getEndOfLine(o);return this._pieceTree.getValueInRange(e,s)}getValueLengthInRange(e,o=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const s=this.getOffsetAt(e.startLineNumber,e.startColumn),l=this.getOffsetAt(e.endLineNumber,e.endColumn);return l-s}getCharacterCountInRange(e,o=0){if(this._mightContainNonBasicASCII){let s=0;const l=e.startLineNumber,d=e.endLineNumber;for(let o=l;o<=d;o++){const u=this.getLineContent(o),g=o===l?e.startColumn-1:0,p=o===d?e.endColumn-1:u.length;for(let e=g;e<p;e++)m.ZG(u.charCodeAt(e))?(s+=1,e+=1):s+=1}return s+=this._getEndOfLine(o).length*(d-l),s}return this.getValueLengthInRange(e,o)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,o){return this._pieceTree.getLineCharCode(e,o)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const o=m.LC(this.getLineContent(e));return-1===o?0:o+1}getLineLastNonWhitespaceColumn(e){const o=m.ow(this.getLineContent(e));return-1===o?0:o+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,o,s){let l=this._mightContainRTL,d=this._mightContainUnusualLineTerminators,u=this._mightContainNonBasicASCII,g=!0,p=[];for(let w=0;w<e.length;w++){const o=e[w];g&&o._isTracked&&(g=!1);const s=o.range;if(o.text){let e=!0;u||(e=!m.$i(o.text),u=e),!l&&e&&(l=m.Ut(o.text)),!d&&e&&(d=m.ab(o.text))}let f="",_=0,C=0,b=0;if(o.text){let e;[_,C,b,e]=(0,B.Q)(o.text);const s=this.getEOL(),l="\r\n"===s?2:1;f=0===e||e===l?o.text:o.text.replace(/\r\n|\r|\n/g,s)}p[w]={sortIndex:w,identifier:o.identifier||null,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s),text:f,eolCount:_,firstLineLength:C,lastLineLength:b,forceMoveMarkers:Boolean(o.forceMoveMarkers),isAutoWhitespaceEdit:o.isAutoWhitespaceEdit||!1}}p.sort(PieceTreeTextBuffer._sortOpsAscending);let f=!1;for(let m=0,w=p.length-1;m<w;m++){const e=p[m].range.getEndPosition(),o=p[m+1].range.getStartPosition();if(o.isBeforeOrEqual(e)){if(o.isBefore(e))throw new Error("Overlapping ranges are not allowed!");f=!0}}g&&(p=this._reduceOperations(p));const _=s||o?PieceTreeTextBuffer._getInverseEditRanges(p):[],C=[];if(o)for(let w=0;w<p.length;w++){const e=p[w],o=_[w];if(e.isAutoWhitespaceEdit&&e.range.isEmpty())for(let s=o.startLineNumber;s<=o.endLineNumber;s++){let l="";s===o.startLineNumber&&(l=this.getLineContent(e.range.startLineNumber),-1!==m.LC(l))||C.push({lineNumber:s,oldContent:l})}}let b=null;if(s){let e=0;b=[];for(let o=0;o<p.length;o++){const s=p[o],l=_[o],d=this.getValueInRange(s.range),u=s.rangeOffset+e;e+=s.text.length-d.length,b[o]={sortIndex:s.sortIndex,identifier:s.identifier,range:l,text:d,textChange:new W.q(s.rangeOffset,d,u,s.text)}}f||b.sort(((e,o)=>e.sortIndex-o.sortIndex))}this._mightContainRTL=l,this._mightContainUnusualLineTerminators=d,this._mightContainNonBasicASCII=u;const S=this._doApplyEdits(p);let y=null;if(o&&C.length>0){C.sort(((e,o)=>o.lineNumber-e.lineNumber)),y=[];for(let e=0,o=C.length;e<o;e++){const o=C[e].lineNumber;if(e>0&&C[e-1].lineNumber===o)continue;const s=C[e].oldContent,l=this.getLineContent(o);0!==l.length&&l!==s&&-1===m.LC(l)&&y.push(o)}}return this._onDidChangeContent.fire(),new w.je(b,S,y)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let o=!1;const s=e[0].range,l=e[e.length-1].range,d=new C.e(s.startLineNumber,s.startColumn,l.endLineNumber,l.endColumn);let u=s.startLineNumber,g=s.startColumn;const p=[];for(let w=0,S=e.length;w<S;w++){const s=e[w],l=s.range;o=o||s.forceMoveMarkers,p.push(this.getValueInRange(new C.e(u,g,l.startLineNumber,l.startColumn))),s.text.length>0&&p.push(s.text),u=l.endLineNumber,g=l.endColumn}const m=p.join(""),[f,_,b]=(0,B.Q)(m);return{sortIndex:0,identifier:e[0].identifier,range:d,rangeOffset:this.getOffsetAt(d.startLineNumber,d.startColumn),rangeLength:this.getValueLengthInRange(d,0),text:m,eolCount:f,firstLineLength:_,lastLineLength:b,forceMoveMarkers:o,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(PieceTreeTextBuffer._sortOpsDescending);const o=[];for(let s=0;s<e.length;s++){const l=e[s],d=l.range.startLineNumber,u=l.range.startColumn,g=l.range.endLineNumber,p=l.range.endColumn;if(d===g&&u===p&&0===l.text.length)continue;l.text?(this._pieceTree.delete(l.rangeOffset,l.rangeLength),this._pieceTree.insert(l.rangeOffset,l.text,!0)):this._pieceTree.delete(l.rangeOffset,l.rangeLength);const m=new C.e(d,u,g,p);o.push({range:m,rangeLength:l.rangeLength,text:l.text,rangeOffset:l.rangeOffset,forceMoveMarkers:l.forceMoveMarkers})}return o}findMatchesLineByLine(e,o,s,l){return this._pieceTree.findMatchesLineByLine(e,o,s,l)}static _getInverseEditRanges(e){const o=[];let s=0,l=0,d=null;for(let u=0,g=e.length;u<g;u++){const g=e[u];let p,m,f;if(d?d.range.endLineNumber===g.range.startLineNumber?(p=s,m=l+(g.range.startColumn-d.range.endColumn)):(p=s+(g.range.startLineNumber-d.range.endLineNumber),m=g.range.startColumn):(p=g.range.startLineNumber,m=g.range.startColumn),g.text.length>0){const e=g.eolCount+1;f=1===e?new C.e(p,m,p,m+g.firstLineLength):new C.e(p,m,p+e-1,g.lastLineLength+1)}else f=new C.e(p,m,p,m);s=f.endLineNumber,l=f.endColumn,o.push(f),d=g}return o}static _sortOpsAscending(e,o){const s=C.e.compareRangesUsingEnds(e.range,o.range);return 0===s?e.sortIndex-o.sortIndex:s}static _sortOpsDescending(e,o){const s=C.e.compareRangesUsingEnds(e.range,o.range);return 0===s?o.sortIndex-e.sortIndex:-s}}class PieceTreeTextBufferFactory{constructor(e,o,s,l,d,u,g,p,m){this._chunks=e,this._bom=o,this._cr=s,this._lf=l,this._crlf=d,this._containsRTL=u,this._containsUnusualLineTerminators=g,this._isBasicASCII=p,this._normalizeEOL=m}_getEOL(e){const o=this._cr+this._lf+this._crlf,s=this._cr+this._crlf;return 0===o?1===e?"\n":"\r\n":s>o/2?"\r\n":"\n"}create(e){const o=this._getEOL(e),s=this._chunks;if(this._normalizeEOL&&("\r\n"===o&&(this._cr>0||this._lf>0)||"\n"===o&&(this._cr>0||this._crlf>0)))for(let d=0,u=s.length;d<u;d++){const e=s[d].buffer.replace(/\r\n|\r|\n/g,o),l=createLineStartsFast(e);s[d]=new StringBuffer(e,l)}const l=new PieceTreeTextBuffer(s,this._bom,o,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:l,disposable:l}}}class PieceTreeTextBufferBuilder{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&m.uS(e)&&(this.BOM=m.c1,e=e.substr(1));const o=e.charCodeAt(e.length-1);13===o||o>=55296&&o<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=o):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=o)}_acceptChunk1(e,o){(o||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const o=createLineStarts(this._tmpLineStarts,e);this.chunks.push(new StringBuffer(e,o.lineStarts)),this.cr+=o.cr,this.lf+=o.lf,this.crlf+=o.crlf,this.isBasicASCII&&(this.isBasicASCII=o.isBasicASCII),this.isBasicASCII||this.containsRTL||(this.containsRTL=m.Ut(e)),this.isBasicASCII||this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=m.ab(e))}finish(e=!0){return this._finish(),new PieceTreeTextBufferFactory(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const o=createLineStartsFast(e.buffer);e.lineStarts=o,13===this._previousChar&&this.cr++}}}var V=s(4706),H=s(7378),z=s(3155),U=s(276),K=s(4013);class ContiguousMultilineTokens{constructor(e,o){this._startLineNumber=e,this._tokens=o}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class ContiguousMultilineTokensBuilder{constructor(){this._tokens=[]}add(e,o){if(this._tokens.length>0){const s=this._tokens[this._tokens.length-1];if(s.endLineNumber+1===e)return void s.appendLineTokens(o)}this._tokens.push(new ContiguousMultilineTokens(e,[o]))}finalize(){return this._tokens}}var j=s(5393),G=s(1432);class ContiguousGrowingArray{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,o){while(e>=this._store.length)this._store[this._store.length]=this._default;this._store[e]=o}delete(e,o){0===o||e>=this._store.length||this._store.splice(e,o)}insert(e,o){if(0===o||e>=this._store.length)return;const s=[];for(let l=0;l<o;l++)s[l]=this._default;this._store=l.Zv(this._store,e,s)}}class TokenizationStateStore{constructor(e,o){this.tokenizationSupport=e,this.initialState=o,this._lineBeginState=new ContiguousGrowingArray(null),this._lineNeedsTokenization=new ContiguousGrowingArray(!0),this._firstLineNeedsTokenization=0,this._lineBeginState.set(0,this.initialState)}get invalidLineStartIndex(){return this._firstLineNeedsTokenization}markMustBeTokenized(e){this._lineNeedsTokenization.set(e,!0),this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,e)}getBeginState(e){return this._lineBeginState.get(e)}setEndState(e,o,s){if(this._lineNeedsTokenization.set(o,!1),this._firstLineNeedsTokenization=o+1,o===e-1)return;const l=this._lineBeginState.get(o+1);if(null===l||!s.equals(l))return this._lineBeginState.set(o+1,s),void this.markMustBeTokenized(o+1);let d=o+1;while(d<e){if(this._lineNeedsTokenization.get(d))break;d++}this._firstLineNeedsTokenization=d}applyEdits(e,o){this.markMustBeTokenized(e.startLineNumber-1),this._lineBeginState.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineNeedsTokenization.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineBeginState.insert(e.startLineNumber,o),this._lineNeedsTokenization.insert(e.startLineNumber,o)}}class TextModelTokenization extends p.JT{constructor(e,o){super(),this._textModel=e,this._languageIdCodec=o,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=null,this._register(z.RW.onDidChange((e=>{const o=this._textModel.getLanguageId();-1!==e.changedLanguages.indexOf(o)&&(this._resetTokenizationState(),this._textModel.clearTokens())}))),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}handleDidChangeContent(e){if(e.isFlush)this._resetTokenizationState();else{if(this._tokenizationStateStore)for(let o=0,s=e.changes.length;o<s;o++){const s=e.changes[o],[l]=(0,B.Q)(s.text);this._tokenizationStateStore.applyEdits(s.range,l)}this._beginBackgroundTokenization()}}handleDidChangeAttached(){this._beginBackgroundTokenization()}handleDidChangeLanguage(e){this._resetTokenizationState(),this._textModel.clearTokens()}_resetTokenizationState(){const[e,o]=initializeTokenization(this._textModel);this._tokenizationStateStore=e&&o?new TokenizationStateStore(e,o):null,this._beginBackgroundTokenization()}_beginBackgroundTokenization(){!this._isScheduled&&this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,(0,j.To)((e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)})))}_backgroundTokenizeWithDeadline(e){const o=Date.now()+e.timeRemaining(),execute=()=>{!this._isDisposed&&this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._backgroundTokenizeForAtLeast1ms(),Date.now()<o?(0,G.fn)(execute):this._beginBackgroundTokenization())};execute()}_backgroundTokenizeForAtLeast1ms(){const e=this._textModel.getLineCount(),o=new ContiguousMultilineTokensBuilder,s=K.G.create(!1);do{if(s.elapsed()>1)break;const l=this._tokenizeOneInvalidLine(o);if(l>=e)break}while(this._hasLinesToTokenize());this._textModel.setTokens(o.finalize(),!this._hasLinesToTokenize())}tokenizeViewport(e,o){const s=new ContiguousMultilineTokensBuilder;this._tokenizeViewport(s,e,o),this._textModel.setTokens(s.finalize(),!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const o=new ContiguousMultilineTokensBuilder;this._updateTokensUntilLine(o,e),this._textModel.setTokens(o.finalize(),!this._hasLinesToTokenize())}getTokenTypeIfInsertingCharacter(e,o){if(!this._tokenizationStateStore)return 0;this.forceTokenization(e.lineNumber);const s=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!s)return 0;const l=this._textModel.getLanguageId(),d=this._textModel.getLineContent(e.lineNumber),u=d.substring(0,e.column-1)+o+d.substring(e.column-1),g=safeTokenize(this._languageIdCodec,l,this._tokenizationStateStore.tokenizationSupport,u,!0,s),p=new H.A(g.tokens,u,this._languageIdCodec);if(0===p.getCount())return 0;const m=p.findTokenIndexAtOffset(e.column-1);return p.getStandardTokenType(m)}tokenizeLineWithEdit(e,o,s){const l=e.lineNumber,d=e.column;if(!this._tokenizationStateStore)return null;this.forceTokenization(l);const u=this._tokenizationStateStore.getBeginState(l-1);if(!u)return null;const g=this._textModel.getLineContent(l),p=g.substring(0,d-1)+s+g.substring(d-1+o),m=this._textModel.getLanguageIdAtPosition(l,0),f=safeTokenize(this._languageIdCodec,m,this._tokenizationStateStore.tokenizationSupport,p,!0,u),_=new H.A(f.tokens,p,this._languageIdCodec);return _}isCheapToTokenize(e){if(!this._tokenizationStateStore)return!0;const o=this._tokenizationStateStore.invalidLineStartIndex+1;return!(e>o)&&(e<o||this._textModel.getLineLength(e)<2048)}_hasLinesToTokenize(){return!!this._tokenizationStateStore&&this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount()}_tokenizeOneInvalidLine(e){if(!this._tokenizationStateStore||!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const o=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,o),o}_updateTokensUntilLine(e,o){if(!this._tokenizationStateStore)return;const s=this._textModel.getLanguageId(),l=this._textModel.getLineCount(),d=o-1;for(let u=this._tokenizationStateStore.invalidLineStartIndex;u<=d;u++){const o=this._textModel.getLineContent(u+1),d=this._tokenizationStateStore.getBeginState(u),g=safeTokenize(this._languageIdCodec,s,this._tokenizationStateStore.tokenizationSupport,o,!0,d);e.add(u+1,g.tokens),this._tokenizationStateStore.setEndState(l,u,g.endState),u=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,o,s){if(!this._tokenizationStateStore)return;if(s<=this._tokenizationStateStore.invalidLineStartIndex)return;if(o<=this._tokenizationStateStore.invalidLineStartIndex)return void this._updateTokensUntilLine(e,s);let l=this._textModel.getLineFirstNonWhitespaceColumn(o);const d=[];let u=null;for(let m=o-1;l>1&&m>=1;m--){const e=this._textModel.getLineFirstNonWhitespaceColumn(m);if(0!==e&&e<l){if(u=this._tokenizationStateStore.getBeginState(m-1),u)break;d.push(this._textModel.getLineContent(m)),l=e}}u||(u=this._tokenizationStateStore.initialState);const g=this._textModel.getLanguageId();let p=u;for(let m=d.length-1;m>=0;m--){const e=safeTokenize(this._languageIdCodec,g,this._tokenizationStateStore.tokenizationSupport,d[m],!1,p);p=e.endState}for(let m=o;m<=s;m++){const o=this._textModel.getLineContent(m),s=safeTokenize(this._languageIdCodec,g,this._tokenizationStateStore.tokenizationSupport,o,!0,p);e.add(m,s.tokens),this._tokenizationStateStore.markMustBeTokenized(m-1),p=s.endState}}}function initializeTokenization(e){if(e.isTooLargeForTokenization())return[null,null];const o=z.RW.get(e.getLanguageId());if(!o)return[null,null];let s;try{s=o.getInitialState()}catch(l){return(0,u.dL)(l),[null,null]}return[o,s]}function safeTokenize(e,o,s,l,d,g){let p=null;if(s)try{p=s.tokenizeEncoded(l,d,g.clone())}catch(m){(0,u.dL)(m)}return p||(p=(0,U.Dy)(e.encodeLanguageId(o),g)),H.A.convertToEndOffset(p.tokens,l.length),p}const q=new Uint32Array(0).buffer;class ContiguousTokensEditing{static deleteBeginning(e,o){return null===e||e===q?e:ContiguousTokensEditing.delete(e,0,o)}static deleteEnding(e,o){if(null===e||e===q)return e;const s=toUint32Array(e),l=s[s.length-2];return ContiguousTokensEditing.delete(e,o,l)}static delete(e,o,s){if(null===e||e===q||o===s)return e;const l=toUint32Array(e),d=l.length>>>1;if(0===o&&l[l.length-2]===s)return q;const u=H.A.findIndexInTokensArray(l,o),g=u>0?l[u-1<<1]:0,p=l[u<<1];if(s<p){const g=s-o;for(let e=u;e<d;e++)l[e<<1]-=g;return e}let m,f;g!==o?(l[u<<1]=o,m=u+1<<1,f=o):(m=u<<1,f=g);const _=s-o;for(let b=u+1;b<d;b++){const e=l[b<<1]-_;e>f&&(l[m++]=e,l[m++]=l[1+(b<<1)],f=e)}if(m===l.length)return e;const C=new Uint32Array(m);return C.set(l.subarray(0,m),0),C.buffer}static append(e,o){if(o===q)return e;if(e===q)return o;if(null===e)return e;if(null===o)return null;const s=toUint32Array(e),l=toUint32Array(o),d=l.length>>>1,u=new Uint32Array(s.length+l.length);u.set(s,0);let g=s.length;const p=s[s.length-2];for(let m=0;m<d;m++)u[g++]=l[m<<1]+p,u[g++]=l[1+(m<<1)];return u.buffer}static insert(e,o,s){if(null===e||e===q)return e;const l=toUint32Array(e),d=l.length>>>1;let u=H.A.findIndexInTokensArray(l,o);if(u>0){const e=l[u-1<<1];e===o&&u--}for(let g=u;g<d;g++)l[g<<1]+=s;return e}}function toUint32Array(e){return e instanceof Uint32Array?e:new Uint32Array(e)}class ContiguousTokensStore{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,o,s){let l=null;if(o<this._len&&(l=this._lineTokens[o]),null!==l&&l!==q)return new H.A(toUint32Array(l),s,this._languageIdCodec);const d=new Uint32Array(2);return d[0]=s.length,d[1]=getDefaultMetadata(this._languageIdCodec.encodeLanguageId(e)),new H.A(d,s,this._languageIdCodec)}static _massageTokens(e,o,s){const l=s?toUint32Array(s):null;if(0===o){let o=!1;if(l&&l.length>1&&(o=z.NX.getLanguageId(l[1])!==e),!o)return q}if(!l||0===l.length){const s=new Uint32Array(2);return s[0]=o,s[1]=getDefaultMetadata(e),s.buffer}return l[l.length-2]=o,0===l.byteOffset&&l.byteLength===l.buffer.byteLength?l.buffer:l}_ensureLine(e){while(e>=this._len)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,o){0!==o&&(e+o>this._len&&(o=this._len-e),this._lineTokens.splice(e,o),this._len-=o)}_insertLines(e,o){if(0===o)return;const s=[];for(let l=0;l<o;l++)s[l]=null;this._lineTokens=l.Zv(this._lineTokens,e,s),this._len+=o}setTokens(e,o,s,l,d){const u=ContiguousTokensStore._massageTokens(this._languageIdCodec.encodeLanguageId(e),s,l);this._ensureLine(o);const g=this._lineTokens[o];return this._lineTokens[o]=u,!!d&&!ContiguousTokensStore._equals(g,u)}static _equals(e,o){if(!e||!o)return!e&&!o;const s=toUint32Array(e),l=toUint32Array(o);if(s.length!==l.length)return!1;for(let d=0,u=s.length;d<u;d++)if(s[d]!==l[d])return!1;return!0}acceptEdit(e,o,s){this._acceptDeleteRange(e),this._acceptInsertText(new _.L(e.startLineNumber,e.startColumn),o,s)}_acceptDeleteRange(e){const o=e.startLineNumber-1;if(o>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[o]=ContiguousTokensEditing["delete"](this._lineTokens[o],e.startColumn-1,e.endColumn-1))}this._lineTokens[o]=ContiguousTokensEditing.deleteEnding(this._lineTokens[o],e.startColumn-1);const s=e.endLineNumber-1;let l=null;s<this._len&&(l=ContiguousTokensEditing.deleteBeginning(this._lineTokens[s],e.endColumn-1)),this._lineTokens[o]=ContiguousTokensEditing.append(this._lineTokens[o],l),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,o,s){if(0===o&&0===s)return;const l=e.lineNumber-1;l>=this._len||(0!==o?(this._lineTokens[l]=ContiguousTokensEditing.deleteEnding(this._lineTokens[l],e.column-1),this._lineTokens[l]=ContiguousTokensEditing.insert(this._lineTokens[l],e.column-1,s),this._insertLines(e.lineNumber,o)):this._lineTokens[l]=ContiguousTokensEditing.insert(this._lineTokens[l],e.column-1,s))}}function getDefaultMetadata(e){return(16384|e<<0|2<<23)>>>0}class SparseTokensStore{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,o){this._pieces=e||[],this._isComplete=o}setPartial(e,o){let s=e;if(o.length>0){const l=o[0].getRange(),d=o[o.length-1].getRange();if(!l||!d)return e;s=e.plusRange(l).plusRange(d)}let d=null;for(let l=0,u=this._pieces.length;l<u;l++){const e=this._pieces[l];if(e.endLineNumber<s.startLineNumber)continue;if(e.startLineNumber>s.endLineNumber){d=d||{index:l};break}if(e.removeTokens(s),e.isEmpty()){this._pieces.splice(l,1),l--,u--;continue}if(e.endLineNumber<s.startLineNumber)continue;if(e.startLineNumber>s.endLineNumber){d=d||{index:l};continue}const[o,g]=e.split(s);o.isEmpty()?d=d||{index:l}:g.isEmpty()||(this._pieces.splice(l,1,o,g),l++,u++,d=d||{index:l})}return d=d||{index:this._pieces.length},o.length>0&&(this._pieces=l.Zv(this._pieces,d.index,o)),s}isComplete(){return this._isComplete}addSparseTokens(e,o){const s=this._pieces;if(0===s.length)return o;const l=SparseTokensStore._findFirstPieceWithLine(s,e),d=s[l].getLineTokens(e);if(!d)return o;const u=o.getCount(),g=d.getCount();let p=0;const m=[];let f=0,_=0;const emitToken=(e,o)=>{e!==_&&(_=e,m[f++]=e,m[f++]=o)};for(let C=0;C<g;C++){const e=d.getStartCharacter(C),s=d.getEndCharacter(C),l=d.getMetadata(C),g=((1&l?1024:0)|(2&l?2048:0)|(4&l?4096:0)|(8&l?8192:0)|(16&l?8372224:0)|(32&l?4286578688:0))>>>0,m=~g>>>0;while(p<u&&o.getEndOffset(p)<=e)emitToken(o.getEndOffset(p),o.getMetadata(p)),p++;p<u&&o.getStartOffset(p)<e&&emitToken(e,o.getMetadata(p));while(p<u&&o.getEndOffset(p)<s)emitToken(o.getEndOffset(p),o.getMetadata(p)&m|l&g),p++;if(p<u)emitToken(s,o.getMetadata(p)&m|l&g),o.getEndOffset(p)===s&&p++;else{const e=Math.min(Math.max(0,p-1),u-1);emitToken(s,o.getMetadata(e)&m|l&g)}}while(p<u)emitToken(o.getEndOffset(p),o.getMetadata(p)),p++;return new H.A(new Uint32Array(m),o.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,o){let s=0,l=e.length-1;while(s<l){let d=s+Math.floor((l-s)/2);if(e[d].endLineNumber<o)s=d+1;else{if(!(e[d].startLineNumber>o)){while(d>s&&e[d-1].startLineNumber<=o&&o<=e[d-1].endLineNumber)d--;return d}l=d-1}}return s}acceptEdit(e,o,s,l,d){for(const u of this._pieces)u.acceptEdit(e,o,s,l,d)}}var Q=s(270),Z=s(5638),Y=s(2042),J=s(4862),X=s(2075),ee=s(3158),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};function createTextBufferBuilder(){return new PieceTreeTextBufferBuilder}function createTextBufferFactory(e){const o=createTextBufferBuilder();return o.acceptChunk(e),o.finish()}function createTextBuffer(e,o){const s="string"===typeof e?createTextBufferFactory(e):e;return s.create(o)}let te=0;const ie=999,ne=1e4;class TextModelSnapshot{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let o=0,s=0;do{const l=this._source.read();if(null===l)return this._eos=!0,0===o?null:e.join("");if(l.length>0&&(e[o++]=l,s+=l.length),s>=65536)return e.join("")}while(1)}}const invalidFunc=()=>{throw new Error("Invalid change accessor")};let oe=class TextModel extends p.JT{constructor(e,o,s,l=null,d,u,p){super(),this._undoRedoService=d,this._languageService=u,this._languageConfigurationService=p,this._onWillDispose=this._register(new g.Q5),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new DidChangeDecorationsEmitter((e=>this.handleBeforeFireDecorationsChangedEvent(e)))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new g.Q5),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new g.Q5),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new g.Q5),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new g.Q5),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new g.Q5),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new g.Q5),this._eventEmitter=this._register(new DidChangeContentEmitter),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new g.Q5),te++,this.id="$model"+te,this.isForSimpleWidget=s.isForSimpleWidget,this._associatedResource="undefined"===typeof l||null===l?f.o.parse("inmemory://model/"+te):l,this._attachedEditorCount=0;const{textBuffer:_,disposable:b}=createTextBuffer(e,s.defaultEOL);this._buffer=_,this._bufferDisposable=b,this._options=TextModel.resolveOptions(this._buffer,s);const w=this._buffer.getLineCount(),S=this._buffer.getValueLengthInRange(new C.e(1,1,w,this._buffer.getLineLength(w)+1),0);s.largeFileOptimizations?this._isTooLargeForTokenization=S>TextModel.LARGE_FILE_SIZE_THRESHOLD||w>TextModel.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=S>TextModel.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=o,this._languageRegistryListener=this._languageConfigurationService.onDidChange((e=>{e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._instanceId=m.PJ(te),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new DecorationsTrees,this._commandManager=new A.NL(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new ContiguousTokensStore(this._languageService.languageIdCodec),this._semanticTokens=new SparseTokensStore(this._languageService.languageIdCodec),this._tokenization=new TextModelTokenization(this,this._languageService.languageIdCodec),this._bracketPairColorizer=this._register(new BracketPairsTextModelPart(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new M.l(this,this._languageConfigurationService)),this._decorationProvider=this._register(new ColorizedBracketPairsDecorationProvider(this)),this._register(this._decorationProvider.onDidChange((()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})))}static resolveOptions(e,o){if(o.detectIndentation){const s=guessIndentation(e,o.tabSize,o.insertSpaces);return new w.dJ({tabSize:s.tabSize,indentSize:s.tabSize,insertSpaces:s.insertSpaces,trimAutoWhitespace:o.trimAutoWhitespace,defaultEOL:o.defaultEOL,bracketPairColorizationOptions:o.bracketPairColorizationOptions})}return new w.dJ({tabSize:o.tabSize,indentSize:o.indentSize,insertSpaces:o.insertSpaces,trimAutoWhitespace:o.trimAutoWhitespace,defaultEOL:o.defaultEOL,bracketPairColorizationOptions:o.bracketPairColorizationOptions})}onDidChangeContent(e){return this._eventEmitter.slowEvent((o=>e(o.contentChangedEvent)))}onDidChangeContentOrInjectedText(e){return(0,p.F8)(this._eventEmitter.fastEvent((o=>e(o.rawContentChangedEvent))),this._onDidChangeInjectedText.event((o=>e(o))))}get bracketPairs(){return this._bracketPairColorizer}get guides(){return this._guidesTextModelPart}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(2===this._backgroundTokenizationState)return;const o=e?2:1;this._backgroundTokenizationState!==o&&(this._backgroundTokenizationState=o,this._bracketPairColorizer.handleDidChangeBackgroundTokenizationState(),this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new PieceTreeTextBuffer([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=p.JT.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,o){this._isDisposing||(this._bracketPairColorizer.handleDidChangeContent(o),this._tokenization.handleDidChangeContent(o),this._eventEmitter.fire(new V.fV(e,o)))}setValue(e){if(this._assertNotDisposed(),null===e)return;const{textBuffer:o,disposable:s}=createTextBuffer(e,this._options.defaultEOL);this._setValueFromTextBuffer(o,s)}_createContentChanged2(e,o,s,l,d,u,g){return{changes:[{range:e,rangeOffset:o,rangeLength:s,text:l}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:d,isRedoing:u,isFlush:g}}_setValueFromTextBuffer(e,o){this._assertNotDisposed();const s=this.getFullModelRange(),l=this.getValueLengthInRange(s),d=this.getLineCount(),u=this.getLineMaxColumn(d);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=o,this._increaseVersionId(),this._tokens.flush(),this._semanticTokens.flush(),this._decorations=Object.create(null),this._decorationsTree=new DecorationsTrees,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new V.dQ([new V.Jx],this._versionId,!1,!1),this._createContentChanged2(new C.e(1,1,d,u),0,l,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const o=1===e?"\r\n":"\n";if(this._buffer.getEOL()===o)return;const s=this.getFullModelRange(),l=this.getValueLengthInRange(s),d=this.getLineCount(),u=this.getLineMaxColumn(d);this._onBeforeEOLChange(),this._buffer.setEOL(o),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new V.dQ([new V.CZ],this._versionId,!1,!1),this._createContentChanged2(new C.e(1,1,d,u),0,l,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),o=this._decorationsTree.collectNodesPostOrder();for(let s=0,l=o.length;s<l;s++){const l=o[s],d=l.range,u=l.cachedAbsoluteStart-l.start,g=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),p=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);l.cachedAbsoluteStart=g,l.cachedAbsoluteEnd=p,l.cachedVersionId=e,l.start=g-u,l.end=p-u,recomputeMaxEnd(l)}}onBeforeAttached(){this._attachedEditorCount++,1===this._attachedEditorCount&&(this._tokenization.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}onBeforeDetached(){this._attachedEditorCount--,0===this._attachedEditorCount&&(this._tokenization.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,o=0;const s=this._buffer.getLineCount();for(let l=1;l<=s;l++){const s=this._buffer.getLineLength(l);s>=ne?o+=s:e+=s}return o>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const o="undefined"!==typeof e.tabSize?e.tabSize:this._options.tabSize,s="undefined"!==typeof e.indentSize?e.indentSize:this._options.indentSize,l="undefined"!==typeof e.insertSpaces?e.insertSpaces:this._options.insertSpaces,d="undefined"!==typeof e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,u="undefined"!==typeof e.bracketColorizationOptions?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,g=new w.dJ({tabSize:o,indentSize:s,insertSpaces:l,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:d,bracketPairColorizationOptions:u});if(this._options.equals(g))return;const p=this._options.createChangeEvent(g);this._options=g,this._bracketPairColorizer.handleDidChangeOptions(p),this._decorationProvider.handleDidChangeOptions(p),this._onDidChangeOptions.fire(p)}detectIndentation(e,o){this._assertNotDisposed();const s=guessIndentation(this._buffer,o,e);this.updateOptions({insertSpaces:s.insertSpaces,tabSize:s.tabSize,indentSize:s.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),(0,ee.x)(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const o=this.findMatches(m.Qe.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,o.map((e=>({range:e.range,text:null}))),(()=>null))}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const o=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(o.lineNumber,o.column)}getPositionAt(e){this._assertNotDisposed();const o=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(o)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,o=!1){this._assertNotDisposed();const s=this.getFullModelRange(),l=this.getValueInRange(s,e);return o?this._buffer.getBOM()+l:l}createSnapshot(e=!1){return new TextModelSnapshot(this._buffer.createSnapshot(e))}getValueLength(e,o=!1){this._assertNotDisposed();const s=this.getFullModelRange(),l=this.getValueLengthInRange(s,e);return o?this._buffer.getBOM().length+l:l}getValueInRange(e,o=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),o)}getValueLengthInRange(e,o=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),o)}getCharacterCountInRange(e,o=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),o)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const o=this._buffer.getLineCount(),s=e.startLineNumber,l=e.startColumn;let d=Math.floor("number"!==typeof s||isNaN(s)?1:s),u=Math.floor("number"!==typeof l||isNaN(l)?1:l);if(d<1)d=1,u=1;else if(d>o)d=o,u=this.getLineMaxColumn(d);else if(u<=1)u=1;else{const e=this.getLineMaxColumn(d);u>=e&&(u=e)}const g=e.endLineNumber,p=e.endColumn;let m=Math.floor("number"!==typeof g||isNaN(g)?1:g),f=Math.floor("number"!==typeof p||isNaN(p)?1:p);if(m<1)m=1,f=1;else if(m>o)m=o,f=this.getLineMaxColumn(m);else if(f<=1)f=1;else{const e=this.getLineMaxColumn(m);f>=e&&(f=e)}return s===d&&l===u&&g===m&&p===f&&e instanceof C.e&&!(e instanceof b.Y)?e:new C.e(d,u,m,f)}_isValidPosition(e,o,s){if("number"!==typeof e||"number"!==typeof o)return!1;if(isNaN(e)||isNaN(o))return!1;if(e<1||o<1)return!1;if((0|e)!==e||(0|o)!==o)return!1;const l=this._buffer.getLineCount();if(e>l)return!1;if(1===o)return!0;const d=this.getLineMaxColumn(e);if(o>d)return!1;if(1===s){const s=this._buffer.getLineCharCode(e,o-2);if(m.ZG(s))return!1}return!0}_validatePosition(e,o,s){const l=Math.floor("number"!==typeof e||isNaN(e)?1:e),d=Math.floor("number"!==typeof o||isNaN(o)?1:o),u=this._buffer.getLineCount();if(l<1)return new _.L(1,1);if(l>u)return new _.L(u,this.getLineMaxColumn(u));if(d<=1)return new _.L(l,1);const g=this.getLineMaxColumn(l);if(d>=g)return new _.L(l,g);if(1===s){const e=this._buffer.getLineCharCode(l,d-2);if(m.ZG(e))return new _.L(l,d-1)}return new _.L(l,d)}validatePosition(e){const o=1;return this._assertNotDisposed(),e instanceof _.L&&this._isValidPosition(e.lineNumber,e.column,o)?e:this._validatePosition(e.lineNumber,e.column,o)}_isValidRange(e,o){const s=e.startLineNumber,l=e.startColumn,d=e.endLineNumber,u=e.endColumn;if(!this._isValidPosition(s,l,0))return!1;if(!this._isValidPosition(d,u,0))return!1;if(1===o){const e=l>1?this._buffer.getLineCharCode(s,l-2):0,o=u>1&&u<=this._buffer.getLineLength(d)?this._buffer.getLineCharCode(d,u-2):0,g=m.ZG(e),p=m.ZG(o);return!g&&!p}return!0}validateRange(e){const o=1;if(this._assertNotDisposed(),e instanceof C.e&&!(e instanceof b.Y)&&this._isValidRange(e,o))return e;const s=this._validatePosition(e.startLineNumber,e.startColumn,0),l=this._validatePosition(e.endLineNumber,e.endColumn,0),d=s.lineNumber,u=s.column,g=l.lineNumber,p=l.column;if(1===o){const e=u>1?this._buffer.getLineCharCode(d,u-2):0,o=p>1&&p<=this._buffer.getLineLength(g)?this._buffer.getLineCharCode(g,p-2):0,s=m.ZG(e),l=m.ZG(o);return s||l?d===g&&u===p?new C.e(d,u-1,g,p-1):s&&l?new C.e(d,u-1,g,p+1):s?new C.e(d,u-1,g,p):new C.e(d,u,g,p+1):new C.e(d,u,g,p)}return new C.e(d,u,g,p)}modifyPosition(e,o){this._assertNotDisposed();const s=this.getOffsetAt(e)+o;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,s)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new C.e(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,o,s,l){return this._buffer.findMatchesLineByLine(e,o,s,l)}findMatches(e,o,s,l,d,u,g=ie){this._assertNotDisposed();let p=null;null!==o&&(Array.isArray(o)||(o=[o]),o.every((e=>C.e.isIRange(e)))&&(p=o.map((e=>this.validateRange(e))))),null===p&&(p=[this.getFullModelRange()]),p=p.sort(((e,o)=>e.startLineNumber-o.startLineNumber||e.startColumn-o.startColumn));const m=[];let f;if(m.push(p.reduce(((e,o)=>C.e.areIntersecting(e,o)?e.plusRange(o):(m.push(e),o)))),!s&&e.indexOf("\n")<0){const o=new O.bc(e,s,l,d),p=o.parseSearchRequest();if(!p)return[];f=e=>this.findMatchesLineByLine(e,p,u,g)}else f=o=>O.pM.findMatches(this,new O.bc(e,s,l,d),o,u,g);return m.map(f).reduce(((e,o)=>e.concat(o)),[])}findNextMatch(e,o,s,l,d,u){this._assertNotDisposed();const g=this.validatePosition(o);if(!s&&e.indexOf("\n")<0){const o=new O.bc(e,s,l,d),p=o.parseSearchRequest();if(!p)return null;const m=this.getLineCount();let f=new C.e(g.lineNumber,g.column,m,this.getLineMaxColumn(m)),_=this.findMatchesLineByLine(f,p,u,1);return O.pM.findNextMatch(this,new O.bc(e,s,l,d),g,u),_.length>0?_[0]:(f=new C.e(1,1,g.lineNumber,this.getLineMaxColumn(g.lineNumber)),_=this.findMatchesLineByLine(f,p,u,1),_.length>0?_[0]:null)}return O.pM.findNextMatch(this,new O.bc(e,s,l,d),g,u)}findPreviousMatch(e,o,s,l,d,u){this._assertNotDisposed();const g=this.validatePosition(o);return O.pM.findPreviousMatch(this,new O.bc(e,s,l,d),g,u)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){const o="\n"===this.getEOL()?0:1;if(o!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof w.Qi?e:new w.Qi(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const o=[];for(let s=0,l=e.length;s<l;s++)o[s]=this._validateEditOperation(e[s]);return o}pushEditOperations(e,o,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(o),s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,o,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=o.map((e=>({range:this.validateRange(e.range),text:e.text})));let l=!0;if(e)for(let o=0,d=e.length;o<d;o++){const d=e[o];let u=!1;for(let e=0,o=s.length;e<o;e++){const o=s[e].range,l=o.startLineNumber>d.endLineNumber,g=d.startLineNumber>o.endLineNumber;if(!l&&!g){u=!0;break}}if(!u){l=!1;break}}if(l)for(let e=0,d=this._trimAutoWhitespaceLines.length;e<d;e++){const l=this._trimAutoWhitespaceLines[e],d=this.getLineMaxColumn(l);let u=!0;for(let e=0,o=s.length;e<o;e++){const o=s[e].range,g=s[e].text;if(!(l<o.startLineNumber||l>o.endLineNumber)&&(!(l===o.startLineNumber&&o.startColumn===d&&o.isEmpty()&&g&&g.length>0&&"\n"===g.charAt(0))&&!(l===o.startLineNumber&&1===o.startColumn&&o.isEmpty()&&g&&g.length>0&&"\n"===g.charAt(g.length-1)))){u=!1;break}}if(u){const e=new C.e(l,1,l,d);o.push(new w.Qi(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,o,s)}_applyUndo(e,o,s,l){const d=e.map((e=>{const o=this.getPositionAt(e.newPosition),s=this.getPositionAt(e.newEnd);return{range:new C.e(o.lineNumber,o.column,s.lineNumber,s.column),text:e.oldText}}));this._applyUndoRedoEdits(d,o,!0,!1,s,l)}_applyRedo(e,o,s,l){const d=e.map((e=>{const o=this.getPositionAt(e.oldPosition),s=this.getPositionAt(e.oldEnd);return{range:new C.e(o.lineNumber,o.column,s.lineNumber,s.column),text:e.newText}}));this._applyUndoRedoEdits(d,o,!1,!0,s,l)}_applyUndoRedoEdits(e,o,s,l,d,u){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=s,this._isRedoing=l,this.applyEdits(e,!1),this.setEOL(o),this._overwriteAlternativeVersionId(d)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(u),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,o=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const s=this._validateEditOperations(e);return this._doApplyEdits(s,o)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,o){const s=this._buffer.getLineCount(),d=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,o),u=this._buffer.getLineCount(),g=d.changes;if(this._trimAutoWhitespaceLines=d.trimAutoWhitespaceLineNumbers,0!==g.length){for(let s=0,l=g.length;s<l;s++){const e=g[s],[o,l,d]=(0,B.Q)(e.text);this._tokens.acceptEdit(e.range,o,l),this._semanticTokens.acceptEdit(e.range,o,l,d,e.text.length>0?e.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(e.rangeOffset,e.rangeLength,e.text.length,e.forceMoveMarkers)}const e=[];this._increaseVersionId();let o=s;for(let s=0,d=g.length;s<d;s++){const d=g[s],[p]=(0,B.Q)(d.text);this._onDidChangeDecorations.fire();const m=d.range.startLineNumber,f=d.range.endLineNumber,C=f-m,b=p,w=Math.min(C,b),S=b-C,y=u-o-S+m,L=y,x=y+b,k=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new _.L(L,1)),this.getOffsetAt(new _.L(x,this.getLineMaxColumn(x))),0),N=V.gk.fromDecorations(k),D=new l.H9(N);for(let o=w;o>=0;o--){const s=m+o,l=y+o;D.takeFromEndWhile((e=>e.lineNumber>l));const d=D.takeFromEndWhile((e=>e.lineNumber===l));e.push(new V.rU(s,this.getLineContent(l),d))}if(w<C){const o=m+w;e.push(new V.lN(o+1,f))}if(w<b){const s=new l.H9(N),d=m+w,g=b-w,p=u-o-g+d+1,f=[],_=[];for(let e=0;e<g;e++){const o=p+e;_[e]=this.getLineContent(o),s.takeWhile((e=>e.lineNumber<o)),f[e]=s.takeWhile((e=>e.lineNumber===o))}e.push(new V.Tx(d+1,m+b,_,f))}o+=S}this._emitContentChangedEvent(new V.dQ(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:g,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===d.reverseEdits?void 0:d.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(null===e||0===e.size)return;const o=[...e],s=o.map((e=>new V.rU(e,this.getLineContent(e),this._getInjectedTextInLine(e))));this._onDidChangeInjectedText.fire(new V.D8(s))}changeDecorations(e,o=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(o,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,o){const s={addDecoration:(o,s)=>this._deltaDecorationsImpl(e,[],[{range:o,options:s}])[0],changeDecoration:(e,o)=>{this._changeDecorationImpl(e,o)},changeDecorationOptions:(e,o)=>{this._changeDecorationOptionsImpl(e,_normalizeOptions(o))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,s)=>0===o.length&&0===s.length?[]:this._deltaDecorationsImpl(e,o,s)};let l=null;try{l=o(s)}catch(d){(0,u.dL)(d)}return s.addDecoration=invalidFunc,s.changeDecoration=invalidFunc,s.changeDecorationOptions=invalidFunc,s.removeDecoration=invalidFunc,s.deltaDecorations=invalidFunc,l}deltaDecorations(e,o,s=0){if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===o.length)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(s,e,o)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,o,s){const l=e?this._decorations[e]:null;if(!l)return o?this._deltaDecorationsImpl(0,[],[{range:o,options:se[s]}])[0]:null;if(!o)return this._decorationsTree.delete(l),delete this._decorations[l.id],null;const d=this._validateRangeRelaxedNoAllocations(o),u=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),g=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);return this._decorationsTree.delete(l),l.reset(this.getVersionId(),u,g,d),l.setOptions(se[s]),this._decorationsTree.insert(l),l.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const o=this._decorationsTree.collectNodesFromOwner(e);for(let s=0,l=o.length;s<l;s++){const e=o[s];this._decorationsTree.delete(e),delete this._decorations[e.id]}}getDecorationOptions(e){const o=this._decorations[e];return o?o.options:null}getDecorationRange(e){const o=this._decorations[e];return o?this._decorationsTree.getNodeRange(this,o):null}getLineDecorations(e,o=0,s=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,o,s)}getLinesDecorations(e,o,s=0,l=!1){const d=this.getLineCount(),u=Math.min(d,Math.max(1,e)),g=Math.min(d,Math.max(1,o)),p=this.getLineMaxColumn(g),m=new C.e(u,1,g,p),f=this._getDecorationsInRange(m,s,l);return f.push(...this._decorationProvider.getDecorationsInRange(m,s,l)),f}getDecorationsInRange(e,o=0,s=!1){const l=this.validateRange(e),d=this._getDecorationsInRange(l,o,s);return d.push(...this._decorationProvider.getDecorationsInRange(l,o,s)),d}getOverviewRulerDecorations(e=0,o=!1){return this._decorationsTree.getAll(this,e,o,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const o=this._buffer.getOffsetAt(e,1),s=o+this._buffer.getLineLength(e),l=this._decorationsTree.getInjectedTextInInterval(this,o,s,0);return V.gk.fromDecorations(l).filter((o=>o.lineNumber===e))}getAllDecorations(e=0,o=!1){let s=this._decorationsTree.getAll(this,e,o,!1);return s=s.concat(this._decorationProvider.getAllDecorations(e,o)),s}_getDecorationsInRange(e,o,s){const l=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),d=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,l,d,o,s)}getRangeAt(e,o){return this._buffer.getRangeAt(e,o-e)}_changeDecorationImpl(e,o){const s=this._decorations[e];if(!s)return;if(s.options.after){const o=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(s.options.before){const o=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}const l=this._validateRangeRelaxedNoAllocations(o),d=this._buffer.getOffsetAt(l.startLineNumber,l.startColumn),u=this._buffer.getOffsetAt(l.endLineNumber,l.endColumn);this._decorationsTree.delete(s),s.reset(this.getVersionId(),d,u,l),this._decorationsTree.insert(s),this._onDidChangeDecorations.checkAffectedAndFire(s.options),s.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber),s.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}_changeDecorationOptionsImpl(e,o){const s=this._decorations[e];if(!s)return;const l=!(!s.options.overviewRuler||!s.options.overviewRuler.color),d=!(!o.overviewRuler||!o.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(s.options),this._onDidChangeDecorations.checkAffectedAndFire(o),s.options.after||o.after){const e=this._decorationsTree.getNodeRange(this,s);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(s.options.before||o.before){const e=this._decorationsTree.getNodeRange(this,s);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}l!==d?(this._decorationsTree.delete(s),s.setOptions(o),this._decorationsTree.insert(s)):s.setOptions(o)}_deltaDecorationsImpl(e,o,s){const l=this.getVersionId(),d=o.length;let u=0;const g=s.length;let p=0;const m=new Array(g);while(u<d||p<g){let f=null;if(u<d){do{f=this._decorations[o[u++]]}while(!f&&u<d);if(f){if(f.options.after){const e=this._decorationsTree.getNodeRange(this,f);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(f.options.before){const e=this._decorationsTree.getNodeRange(this,f);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}this._decorationsTree.delete(f),this._onDidChangeDecorations.checkAffectedAndFire(f.options)}}if(p<g){if(!f){const e=++this._lastDecorationId,o=`${this._instanceId};${e}`;f=new IntervalNode(o,0,0),this._decorations[o]=f}const o=s[p],d=this._validateRangeRelaxedNoAllocations(o.range),u=_normalizeOptions(o.options),g=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),_=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);f.ownerId=e,f.reset(l,g,_,d),f.setOptions(u),f.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber),f.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(u),this._decorationsTree.insert(f),m[p]=f.id,p++}else f&&delete this._decorations[f.id]}return m}setTokens(e,o=!1){if(0!==e.length){const o=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];let d=0,u=0,g=!1;for(let e=l.startLineNumber;e<=l.endLineNumber;e++)if(g)this._tokens.setTokens(this._languageId,e-1,this._buffer.getLineLength(e),l.getLineTokens(e),!1),u=e;else{const o=this._tokens.setTokens(this._languageId,e-1,this._buffer.getLineLength(e),l.getLineTokens(e),!0);o&&(g=!0,d=e,u=e)}g&&o.push({fromLineNumber:d,toLineNumber:u})}o.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:o})}this.handleTokenizationProgress(o)}setSemanticTokens(e,o){this._semanticTokens.set(e,o),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,o){if(this.hasCompleteSemanticTokens())return;const s=this.validateRange(this._semanticTokens.setPartial(e,o));this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:s.startLineNumber,toLineNumber:s.endLineNumber}]})}tokenizeViewport(e,o){e=Math.max(1,e),o=Math.min(this._buffer.getLineCount(),o),this._tokenization.tokenizeViewport(e,o)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||(this._bracketPairColorizer.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const o=this.getLineContent(e),s=this._tokens.getTokens(this._languageId,e-1,o);return this._semanticTokens.addSparseTokens(e,s)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;const o={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._bracketPairColorizer.handleDidChangeLanguage(o),this._tokenization.handleDidChangeLanguage(o),this._onDidChangeLanguage.fire(o),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,o){const s=this.validatePosition(new _.L(e,o)),l=this.getLineTokens(s.lineNumber);return l.getLanguageId(l.findTokenIndexAtOffset(s.column-1))}getTokenTypeIfInsertingCharacter(e,o,s){const l=this.validatePosition(new _.L(e,o));return this._tokenization.getTokenTypeIfInsertingCharacter(l,s)}tokenizeLineWithEdit(e,o,s){const l=this.validatePosition(e);return this._tokenization.tokenizeLineWithEdit(l,o,s)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const o=this.validatePosition(e),s=this.getLineContent(o.lineNumber),l=this._getLineTokens(o.lineNumber),d=l.findTokenIndexAtOffset(o.column-1),[u,g]=TextModel._findLanguageBoundaries(l,d),p=(0,Q.t2)(o.column,this.getLanguageConfiguration(l.getLanguageId(d)).getWordDefinition(),s.substring(u,g),u);if(p&&p.startColumn<=e.column&&e.column<=p.endColumn)return p;if(d>0&&u===o.column-1){const[u,g]=TextModel._findLanguageBoundaries(l,d-1),p=(0,Q.t2)(o.column,this.getLanguageConfiguration(l.getLanguageId(d-1)).getWordDefinition(),s.substring(u,g),u);if(p&&p.startColumn<=e.column&&e.column<=p.endColumn)return p}return null}static _findLanguageBoundaries(e,o){const s=e.getLanguageId(o);let l=0;for(let u=o;u>=0&&e.getLanguageId(u)===s;u--)l=e.getStartOffset(u);let d=e.getLineContent().length;for(let u=o,g=e.getCount();u<g&&e.getLanguageId(u)===s;u++)d=e.getEndOffset(u);return[l,d]}getWordUntilPosition(e){const o=this.getWordAtPosition(e);return o?{word:o.word.substr(0,e.column-o.startColumn),startColumn:o.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}normalizePosition(e,o){return e}getLineIndentColumn(e){return indentOfLine(this.getLineContent(e))+1}};function indentOfLine(e){let o=0;for(const s of e){if(" "!==s&&"\t"!==s)break;o++}return o}function isNodeInOverviewRuler(e){return!(!e.options.overviewRuler||!e.options.overviewRuler.color)}function isNodeInjectedText(e){return!!e.options.after||!!e.options.before}oe.MODEL_SYNC_LIMIT=52428800,oe.LARGE_FILE_SIZE_THRESHOLD=20971520,oe.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,oe.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:X.D.tabSize,indentSize:X.D.indentSize,insertSpaces:X.D.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:X.D.trimAutoWhitespace,largeFileOptimizations:X.D.largeFileOptimizations,bracketPairColorizationOptions:X.D.bracketPairColorizationOptions},oe=__decorate([__param(4,J.tJ),__param(5,Y.O),__param(6,Z.c_)],oe);class DecorationsTrees{constructor(){this._decorationsTree0=new IntervalTree,this._decorationsTree1=new IntervalTree,this._injectedTextDecorationsTree=new IntervalTree}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,o){for(const s of o)null===s.range&&(s.range=e.getRangeAt(s.cachedAbsoluteStart,s.cachedAbsoluteEnd));return o}getAllInInterval(e,o,s,l,d){const u=e.getVersionId(),g=this._intervalSearch(o,s,l,d,u);return this._ensureNodesHaveRanges(e,g)}_intervalSearch(e,o,s,l,d){const u=this._decorationsTree0.intervalSearch(e,o,s,l,d),g=this._decorationsTree1.intervalSearch(e,o,s,l,d),p=this._injectedTextDecorationsTree.intervalSearch(e,o,s,l,d);return u.concat(g).concat(p)}getInjectedTextInInterval(e,o,s,l){const d=e.getVersionId(),u=this._injectedTextDecorationsTree.intervalSearch(o,s,l,!1,d);return this._ensureNodesHaveRanges(e,u).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAllInjectedText(e,o){const s=e.getVersionId(),l=this._injectedTextDecorationsTree.search(o,!1,s);return this._ensureNodesHaveRanges(e,l).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAll(e,o,s,l){const d=e.getVersionId(),u=this._search(o,s,l,d);return this._ensureNodesHaveRanges(e,u)}_search(e,o,s,l){if(s)return this._decorationsTree1.search(e,o,l);{const s=this._decorationsTree0.search(e,o,l),d=this._decorationsTree1.search(e,o,l),u=this._injectedTextDecorationsTree.search(e,o,l);return s.concat(d).concat(u)}}collectNodesFromOwner(e){const o=this._decorationsTree0.collectNodesFromOwner(e),s=this._decorationsTree1.collectNodesFromOwner(e),l=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return o.concat(s).concat(l)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),o=this._decorationsTree1.collectNodesPostOrder(),s=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(o).concat(s)}insert(e){isNodeInjectedText(e)?this._injectedTextDecorationsTree.insert(e):isNodeInOverviewRuler(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){isNodeInjectedText(e)?this._injectedTextDecorationsTree.delete(e):isNodeInOverviewRuler(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,o){const s=e.getVersionId();return o.cachedVersionId!==s&&this._resolveNode(o,s),null===o.range&&(o.range=e.getRangeAt(o.cachedAbsoluteStart,o.cachedAbsoluteEnd)),o.range}_resolveNode(e,o){isNodeInjectedText(e)?this._injectedTextDecorationsTree.resolveNode(e,o):isNodeInOverviewRuler(e)?this._decorationsTree1.resolveNode(e,o):this._decorationsTree0.resolveNode(e,o)}acceptReplace(e,o,s,l){this._decorationsTree0.acceptReplace(e,o,s,l),this._decorationsTree1.acceptReplace(e,o,s,l),this._injectedTextDecorationsTree.acceptReplace(e,o,s,l)}}function cleanClassName(e){return e.replace(/[^a-z0-9\-_]/gi," ")}class DecorationOptions{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class ModelDecorationOverviewRulerOptions extends DecorationOptions{constructor(e){super(e),this._resolvedColor=null,this.position="number"===typeof e.position?e.position:w.sh.Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,o){if("string"===typeof e)return e;const s=e?o.getColor(e.id):null;return s?s.toString():""}}class ModelDecorationMinimapOptions extends DecorationOptions{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,o){return"string"===typeof e?d.Il.fromHex(e):o.getColor(e.id)}}class ModelDecorationInjectedTextOptions{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}static from(e){return e instanceof ModelDecorationInjectedTextOptions?e:new ModelDecorationInjectedTextOptions(e)}}class ModelDecorationOptions{constructor(e){var o,s;this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?cleanClassName(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new ModelDecorationOverviewRulerOptions(e.overviewRuler):null,this.minimap=e.minimap?new ModelDecorationMinimapOptions(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?cleanClassName(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?cleanClassName(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?cleanClassName(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?cleanClassName(e.marginClassName):null,this.inlineClassName=e.inlineClassName?cleanClassName(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?cleanClassName(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?cleanClassName(e.afterContentClassName):null,this.after=e.after?ModelDecorationInjectedTextOptions.from(e.after):null,this.before=e.before?ModelDecorationInjectedTextOptions.from(e.before):null,this.hideInCommentTokens=null!==(o=e.hideInCommentTokens)&&void 0!==o&&o,this.hideInStringTokens=null!==(s=e.hideInStringTokens)&&void 0!==s&&s}static register(e){return new ModelDecorationOptions(e)}static createDynamic(e){return new ModelDecorationOptions(e)}}ModelDecorationOptions.EMPTY=ModelDecorationOptions.register({description:"empty"});const se=[ModelDecorationOptions.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ModelDecorationOptions.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ModelDecorationOptions.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ModelDecorationOptions.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function _normalizeOptions(e){return e instanceof ModelDecorationOptions?e:ModelDecorationOptions.createDynamic(e)}class DidChangeDecorationsEmitter extends p.JT{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new g.Q5),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,0===this._deferredCnt){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(e)}null===(e=this._affectedInjectedTextLines)||void 0===e||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!(!e.minimap||!e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!(!e.overviewRuler||!e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class DidChangeContentEmitter extends p.JT{constructor(){super(),this._fastEmitter=this._register(new g.Q5),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new g.Q5),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const o=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(o),this._slowEmitter.fire(o)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}},7277:function(e,o,s){"use strict";s.d(o,{bc:function(){return SearchParams},cM:function(){return isValidMatch},iE:function(){return createFindMatch},pM:function(){return TextModelSearch},sz:function(){return Searcher}});var l=s(2677),d=s(4929),u=s(187),g=s(4314),p=s(4973);const m=999;class SearchParams{constructor(e,o,s,l){this.searchString=e,this.isRegex=o,this.matchCase=s,this.wordSeparators=l}parseSearchRequest(){if(""===this.searchString)return null;let e;e=this.isRegex?isMultilineRegexSource(this.searchString):this.searchString.indexOf("\n")>=0;let o=null;try{o=l.GF(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(u){return null}if(!o)return null;let s=!this.isRegex&&!e;return s&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(s=this.matchCase),new p.Tx(o,this.wordSeparators?(0,d.u)(this.wordSeparators):null,s?this.searchString:null)}}function isMultilineRegexSource(e){if(!e||0===e.length)return!1;for(let o=0,s=e.length;o<s;o++){const l=e.charCodeAt(o);if(92===l){if(o++,o>=s)break;const l=e.charCodeAt(o);if(110===l||114===l||87===l)return!0}}return!1}function createFindMatch(e,o,s){if(!s)return new p.tk(e,null);const l=[];for(let d=0,u=o.length;d<u;d++)l[d]=o[d];return new p.tk(e,l)}class LineFeedCounter{constructor(e){const o=[];let s=0;for(let l=0,d=e.length;l<d;l++)10===e.charCodeAt(l)&&(o[s++]=l);this._lineFeedsOffsets=o}findLineFeedCountBeforeOffset(e){const o=this._lineFeedsOffsets;let s=0,l=o.length-1;if(-1===l)return 0;if(e<=o[0])return 0;while(s<l){const d=s+((l-s)/2>>0);o[d]>=e?l=d-1:o[d+1]>=e?(s=d,l=d):s=d+1}return s+1}}class TextModelSearch{static findMatches(e,o,s,l,d){const u=o.parseSearchRequest();return u?u.regex.multiline?this._doFindMatchesMultiline(e,s,new Searcher(u.wordSeparators,u.regex),l,d):this._doFindMatchesLineByLine(e,s,u,l,d):[]}static _getMultilineMatchRange(e,o,s,l,d,u){let p,m,f=0;if(l?(f=l.findLineFeedCountBeforeOffset(d),p=o+d+f):p=o+d,l){const e=l.findLineFeedCountBeforeOffset(d+u.length),o=e-f;m=p+u.length+o}else m=p+u.length;const _=e.getPositionAt(p),C=e.getPositionAt(m);return new g.e(_.lineNumber,_.column,C.lineNumber,C.column)}static _doFindMatchesMultiline(e,o,s,l,d){const u=e.getOffsetAt(o.getStartPosition()),g=e.getValueInRange(o,1),p="\r\n"===e.getEOL()?new LineFeedCounter(g):null,m=[];let f,_=0;s.reset(0);while(f=s.next(g))if(m[_++]=createFindMatch(this._getMultilineMatchRange(e,u,g,p,f.index,f[0]),f,l),_>=d)return m;return m}static _doFindMatchesLineByLine(e,o,s,l,d){const u=[];let g=0;if(o.startLineNumber===o.endLineNumber){const p=e.getLineContent(o.startLineNumber).substring(o.startColumn-1,o.endColumn-1);return g=this._findMatchesInLine(s,p,o.startLineNumber,o.startColumn-1,g,u,l,d),u}const p=e.getLineContent(o.startLineNumber).substring(o.startColumn-1);g=this._findMatchesInLine(s,p,o.startLineNumber,o.startColumn-1,g,u,l,d);for(let m=o.startLineNumber+1;m<o.endLineNumber&&g<d;m++)g=this._findMatchesInLine(s,e.getLineContent(m),m,0,g,u,l,d);if(g<d){const p=e.getLineContent(o.endLineNumber).substring(0,o.endColumn-1);g=this._findMatchesInLine(s,p,o.endLineNumber,0,g,u,l,d)}return u}static _findMatchesInLine(e,o,s,l,d,u,m,f){const _=e.wordSeparators;if(!m&&e.simpleSearch){const m=e.simpleSearch,C=m.length,b=o.length;let w=-C;while(-1!==(w=o.indexOf(m,w+C)))if((!_||isValidMatch(_,o,b,w,C))&&(u[d++]=new p.tk(new g.e(s,w+1+l,s,w+1+C+l),null),d>=f))return d;return d}const C=new Searcher(e.wordSeparators,e.regex);let b;C.reset(0);do{if(b=C.next(o),b&&(u[d++]=createFindMatch(new g.e(s,b.index+1+l,s,b.index+1+b[0].length+l),b,m),d>=f))return d}while(b);return d}static findNextMatch(e,o,s,l){const d=o.parseSearchRequest();if(!d)return null;const u=new Searcher(d.wordSeparators,d.regex);return d.regex.multiline?this._doFindNextMatchMultiline(e,s,u,l):this._doFindNextMatchLineByLine(e,s,u,l)}static _doFindNextMatchMultiline(e,o,s,l){const d=new u.L(o.lineNumber,1),p=e.getOffsetAt(d),m=e.getLineCount(),f=e.getValueInRange(new g.e(d.lineNumber,d.column,m,e.getLineMaxColumn(m)),1),_="\r\n"===e.getEOL()?new LineFeedCounter(f):null;s.reset(o.column-1);let C=s.next(f);return C?createFindMatch(this._getMultilineMatchRange(e,p,f,_,C.index,C[0]),C,l):1!==o.lineNumber||1!==o.column?this._doFindNextMatchMultiline(e,new u.L(1,1),s,l):null}static _doFindNextMatchLineByLine(e,o,s,l){const d=e.getLineCount(),u=o.lineNumber,g=e.getLineContent(u),p=this._findFirstMatchInLine(s,g,u,o.column,l);if(p)return p;for(let m=1;m<=d;m++){const o=(u+m-1)%d,g=e.getLineContent(o+1),p=this._findFirstMatchInLine(s,g,o+1,1,l);if(p)return p}return null}static _findFirstMatchInLine(e,o,s,l,d){e.reset(l-1);const u=e.next(o);return u?createFindMatch(new g.e(s,u.index+1,s,u.index+1+u[0].length),u,d):null}static findPreviousMatch(e,o,s,l){const d=o.parseSearchRequest();if(!d)return null;const u=new Searcher(d.wordSeparators,d.regex);return d.regex.multiline?this._doFindPreviousMatchMultiline(e,s,u,l):this._doFindPreviousMatchLineByLine(e,s,u,l)}static _doFindPreviousMatchMultiline(e,o,s,l){const d=this._doFindMatchesMultiline(e,new g.e(1,1,o.lineNumber,o.column),s,l,10*m);if(d.length>0)return d[d.length-1];const p=e.getLineCount();return o.lineNumber!==p||o.column!==e.getLineMaxColumn(p)?this._doFindPreviousMatchMultiline(e,new u.L(p,e.getLineMaxColumn(p)),s,l):null}static _doFindPreviousMatchLineByLine(e,o,s,l){const d=e.getLineCount(),u=o.lineNumber,g=e.getLineContent(u).substring(0,o.column-1),p=this._findLastMatchInLine(s,g,u,l);if(p)return p;for(let m=1;m<=d;m++){const o=(d+u-m-1)%d,g=e.getLineContent(o+1),p=this._findLastMatchInLine(s,g,o+1,l);if(p)return p}return null}static _findLastMatchInLine(e,o,s,l){let d,u=null;e.reset(0);while(d=e.next(o))u=createFindMatch(new g.e(s,d.index+1,s,d.index+1+d[0].length),d,l);return u}}function leftIsWordBounday(e,o,s,l,d){if(0===l)return!0;const u=o.charCodeAt(l-1);if(0!==e.get(u))return!0;if(13===u||10===u)return!0;if(d>0){const s=o.charCodeAt(l);if(0!==e.get(s))return!0}return!1}function rightIsWordBounday(e,o,s,l,d){if(l+d===s)return!0;const u=o.charCodeAt(l+d);if(0!==e.get(u))return!0;if(13===u||10===u)return!0;if(d>0){const s=o.charCodeAt(l+d-1);if(0!==e.get(s))return!0}return!1}function isValidMatch(e,o,s,l,d){return leftIsWordBounday(e,o,s,l,d)&&rightIsWordBounday(e,o,s,l,d)}class Searcher{constructor(e,o){this._wordSeparators=e,this._searchRegex=o,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const o=e.length;let s;do{if(this._prevMatchStartIndex+this._prevMatchLength===o)return null;if(s=this._searchRegex.exec(e),!s)return null;const d=s.index,u=s[0].length;if(d===this._prevMatchStartIndex&&u===this._prevMatchLength){if(0===u){l.ZH(e,o,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=d,this._prevMatchLength=u,!this._wordSeparators||isValidMatch(this._wordSeparators,e,o,d,u))return s}while(s);return null}}},9616:function(e,o,s){"use strict";function computeIndentLevel(e,o){let s=0,l=0;const d=e.length;while(l<d){const d=e.charCodeAt(l);if(32===d)s++;else{if(9!==d)break;s=s-s%o+o}l++}return l===d?-1:s}s.d(o,{q:function(){return computeIndentLevel}})},4319:function(e,o,s){"use strict";s.d(o,{p:function(){return u}});var l=s(2065);const d="editorWorkerService",u=(0,l.yh)(d)},2670:function(e,o,s){"use strict";s.d(o,{OG:function(){return getDocumentRangeSemanticTokens},ML:function(){return getDocumentSemanticTokens},KO:function(){return hasDocumentRangeSemanticTokensProvider},Jc:function(){return hasDocumentSemanticTokensProvider},Vl:function(){return isSemanticTokens},Vj:function(){return isSemanticTokensEdits}});var l=s(1050),d=s(7301),u=s(666),g=s(3733),p=s(4565),m=s(8401),f=s(3060),_=s(1432);function reverseEndianness(e){for(let o=0,s=e.length;o<s;o+=4){const s=e[o+0],l=e[o+1],d=e[o+2],u=e[o+3];e[o+0]=u,e[o+1]=d,e[o+2]=l,e[o+3]=s}}function toLittleEndianBuffer(e){const o=new Uint8Array(e.buffer,e.byteOffset,4*e.length);return _.r()||reverseEndianness(o),f.KN.wrap(o)}function encodeSemanticTokensDto(e){const o=new Uint32Array(encodeSemanticTokensDtoSize(e));let s=0;if(o[s++]=e.id,"full"===e.type)o[s++]=1,o[s++]=e.data.length,o.set(e.data,s),s+=e.data.length;else{o[s++]=2,o[s++]=e.deltas.length;for(const l of e.deltas)o[s++]=l.start,o[s++]=l.deleteCount,l.data?(o[s++]=l.data.length,o.set(l.data,s),s+=l.data.length):o[s++]=0}return toLittleEndianBuffer(o)}function encodeSemanticTokensDtoSize(e){let o=0;if(o+=2,"full"===e.type)o+=1+e.data.length;else{o+=1,o+=3*e.deltas.length;for(const s of e.deltas)s.data&&(o+=s.data.length)}return o}var C=s(4314),b=s(1922),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function isSemanticTokens(e){return e&&!!e.data}function isSemanticTokensEdits(e){return e&&Array.isArray(e.edits)}class DocumentSemanticTokensResult{constructor(e,o,s){this.provider=e,this.tokens=o,this.error=s}}function hasDocumentSemanticTokensProvider(e,o){return e.has(o)}function getDocumentSemanticTokensProviders(e,o){const s=e.orderedGroups(o);return s.length>0?s[0]:[]}function getDocumentSemanticTokens(e,o,s,l,d){return __awaiter(this,void 0,void 0,(function*(){const u=getDocumentSemanticTokensProviders(e,o),g=yield Promise.all(u.map((e=>__awaiter(this,void 0,void 0,(function*(){let u,g=null;try{u=yield e.provideDocumentSemanticTokens(o,e===s?l:null,d)}catch(p){g=p,u=null}return u&&(isSemanticTokens(u)||isSemanticTokensEdits(u))||(u=null),new DocumentSemanticTokensResult(e,u,g)})))));for(const e of g){if(e.error)throw e.error;if(e.tokens)return e}return g.length>0?g[0]:null}))}function _getDocumentSemanticTokensProviderHighestGroup(e,o){const s=e.orderedGroups(o);return s.length>0?s[0]:null}class DocumentRangeSemanticTokensResult{constructor(e,o){this.provider=e,this.tokens=o}}function hasDocumentRangeSemanticTokensProvider(e,o){return e.has(o)}function getDocumentRangeSemanticTokensProviders(e,o){const s=e.orderedGroups(o);return s.length>0?s[0]:[]}function getDocumentRangeSemanticTokens(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const u=getDocumentRangeSemanticTokensProviders(e,o),g=yield Promise.all(u.map((e=>__awaiter(this,void 0,void 0,(function*(){let u;try{u=yield e.provideDocumentRangeSemanticTokens(o,s,l)}catch(g){(0,d.Cp)(g),u=null}return u&&isSemanticTokens(u)||(u=null),new DocumentRangeSemanticTokensResult(e,u)})))));for(const e of g)if(e.tokens)return e;return g.length>0?g[0]:null}))}p.P0.registerCommand("_provideDocumentSemanticTokensLegend",((e,...o)=>__awaiter(void 0,void 0,void 0,(function*(){const[s]=o;(0,m.p_)(s instanceof u.o);const l=e.get(g.q).getModel(s);if(!l)return;const{documentSemanticTokensProvider:d}=e.get(b.p),f=_getDocumentSemanticTokensProviderHighestGroup(d,l);return f?f[0].getLegend():e.get(p.Hy).executeCommand("_provideDocumentRangeSemanticTokensLegend",s)})))),p.P0.registerCommand("_provideDocumentSemanticTokens",((e,...o)=>__awaiter(void 0,void 0,void 0,(function*(){const[s]=o;(0,m.p_)(s instanceof u.o);const d=e.get(g.q).getModel(s);if(!d)return;const{documentSemanticTokensProvider:f}=e.get(b.p);if(!hasDocumentSemanticTokensProvider(f,d))return e.get(p.Hy).executeCommand("_provideDocumentRangeSemanticTokens",s,d.getFullModelRange());const _=yield getDocumentSemanticTokens(f,d,null,null,l.T.None);if(!_)return;const{provider:C,tokens:w}=_;if(!w||!isSemanticTokens(w))return;const S=encodeSemanticTokensDto({id:0,type:"full",data:w.data});return w.resultId&&C.releaseDocumentSemanticTokens(w.resultId),S})))),p.P0.registerCommand("_provideDocumentRangeSemanticTokensLegend",((e,...o)=>__awaiter(void 0,void 0,void 0,(function*(){const[s,d]=o;(0,m.p_)(s instanceof u.o);const p=e.get(g.q).getModel(s);if(!p)return;const{documentRangeSemanticTokensProvider:f}=e.get(b.p),_=getDocumentRangeSemanticTokensProviders(f,p);if(0===_.length)return;if(1===_.length)return _[0].getLegend();if(!d||!C.e.isIRange(d))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),_[0].getLegend();const w=yield getDocumentRangeSemanticTokens(f,p,C.e.lift(d),l.T.None);return w?w.provider.getLegend():void 0})))),p.P0.registerCommand("_provideDocumentRangeSemanticTokens",((e,...o)=>__awaiter(void 0,void 0,void 0,(function*(){const[s,d]=o;(0,m.p_)(s instanceof u.o),(0,m.p_)(C.e.isIRange(d));const p=e.get(g.q).getModel(s);if(!p)return;const{documentRangeSemanticTokensProvider:f}=e.get(b.p),_=yield getDocumentRangeSemanticTokens(f,p,C.e.lift(d),l.T.None);return _&&_.tokens?encodeSemanticTokensDto({id:0,type:"full",data:_.tokens.data}):void 0}))))},8191:function(e,o,s){"use strict";s.d(o,{A:function(){return f}});var l=s(9954),d=s(3702),u=s(9870),g=s(5026),p=s(2065),m=s(3557),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const f=(0,p.yh)("ILanguageFeatureDebounceService");var _;(function(e){const o=new WeakMap;let s=0;function of(e){let l=o.get(e);return void 0===l&&(l=++s,o.set(e,l)),l}e.of=of})(_||(_={}));class FeatureDebounceInformation{constructor(e,o,s,l,u,g){this._logService=e,this._name=o,this._registry=s,this._default=l,this._min=u,this._max=g,this._cache=new d.z6(50,.7)}_key(e){return e.id+this._registry.all(e).reduce(((e,o)=>(0,l.SP)(_.of(o),e)),0)}get(e){const o=this._key(e),s=this._cache.get(o);return s?(0,u.uZ)(s.value,this._min,this._max):this.default()}update(e,o){const s=this._key(e);let l=this._cache.get(s);l||(l=new u.N(6),this._cache.set(s,l));const d=(0,u.uZ)(l.update(o),this._min,this._max);return this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${d}ms`),d}_overall(){const e=new u.nM;for(const[,o]of this._cache)e.update(o.value);return e.value}default(){const e=0|this._overall()||this._default;return(0,u.uZ)(e,this._min,this._max)}}let C=class LanguageFeatureDebounceService{constructor(e){this._logService=e,this._data=new Map}for(e,o,s){var l,d,u;const g=null!==(l=null===s||void 0===s?void 0:s.min)&&void 0!==l?l:50,p=null!==(d=null===s||void 0===s?void 0:s.max)&&void 0!==d?d:Math.pow(g,2),m=null!==(u=null===s||void 0===s?void 0:s.key)&&void 0!==u?u:void 0,f=`${_.of(e)},${g}${m?","+m:""}`;let C=this._data.get(f);return C||(C=new FeatureDebounceInformation(this._logService,o,e,0|this._overallAverage()||1.5*g,g,p),this._data.set(f,C)),C}_overallAverage(){let e=new u.nM;for(let o of this._data.values())e.update(o.default());return e.value}};C=__decorate([__param(0,m.VZ)],C),(0,g.z)(f,C,!0)},1922:function(e,o,s){"use strict";s.d(o,{p:function(){return d}});var l=s(2065);const d=(0,l.yh)("ILanguageFeaturesService")},6357:function(e,o,s){"use strict";s.d(o,{i:function(){return d}});var l=s(2065);const d=(0,l.yh)("markerDecorationsService")},3733:function(e,o,s){"use strict";s.d(o,{q:function(){return d}});var l=s(2065);const d=(0,l.yh)("modelService")},1200:function(e,o,s){"use strict";s.d(o,{b$:function(){return B},e3:function(){return W},tw:function(){return isSemanticColoringEnabled}});var l=s(4669),d=s(5976),u=s(1432),g=s(7301),p=s(2822),m=s(2075),f=s(8801),_=s(2042),C=s(3733),b=s(1765),w=s(3108),S=s(5393),y=s(1050),L=s(7781),x=s(3557),k=s(4862),N=s(9954),D=s(5215),E=s(6663),T=s(8997),I=s(2670),A=s(6248),M=s(5638),R=s(8191),P=s(4013),O=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};function MODEL_ID(e){return e.toString()}function computeModelSha1(e){const o=new N.yP,s=e.createSnapshot();let l;while(l=s.read())o.update(l);return o.digest()}class ModelData{constructor(e,o,s){this._modelEventListeners=new d.SL,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose((()=>o(e)))),this._modelEventListeners.add(e.onDidChangeLanguage((o=>s(e,o))))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange((()=>this.model.setMode(e.languageId))),this.model.setMode(e.languageId)}}const F=u.IJ||u.dz?1:2;class DisposedModelInfo{constructor(e,o,s,l,d,u,g,p){this.uri=e,this.initialUndoRedoSnapshot=o,this.time=s,this.sharesUndoRedoStack=l,this.heapSize=d,this.sha1=u,this.versionId=g,this.alternativeVersionId=p}}let B=class ModelService extends d.JT{constructor(e,o,s,d,u,g,p,m,f){super(),this._configurationService=e,this._resourcePropertiesService=o,this._themeService=s,this._logService=d,this._undoRedoService=u,this._languageService=g,this._languageConfigurationService=p,this._languageFeatureDebounceService=m,this._onModelAdded=this._register(new l.Q5),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new l.Q5),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new l.Q5),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new SemanticStyling(this._themeService,this._languageService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration((()=>this._updateModelOptions()))),this._updateModelOptions(),this._register(new V(this._semanticStyling,this,this._themeService,this._configurationService,this._languageFeatureDebounceService,f))}static _readModelOptions(e,o){var s;let l=m.D.tabSize;if(e.editor&&"undefined"!==typeof e.editor.tabSize){const o=parseInt(e.editor.tabSize,10);isNaN(o)||(l=o),l<1&&(l=1)}let d=l;if(e.editor&&"undefined"!==typeof e.editor.indentSize&&"tabSize"!==e.editor.indentSize){const o=parseInt(e.editor.indentSize,10);isNaN(o)||(d=o),d<1&&(d=1)}let u=m.D.insertSpaces;e.editor&&"undefined"!==typeof e.editor.insertSpaces&&(u="false"!==e.editor.insertSpaces&&Boolean(e.editor.insertSpaces));let g=F;const p=e.eol;"\r\n"===p?g=2:"\n"===p&&(g=1);let f=m.D.trimAutoWhitespace;e.editor&&"undefined"!==typeof e.editor.trimAutoWhitespace&&(f="false"!==e.editor.trimAutoWhitespace&&Boolean(e.editor.trimAutoWhitespace));let _=m.D.detectIndentation;e.editor&&"undefined"!==typeof e.editor.detectIndentation&&(_="false"!==e.editor.detectIndentation&&Boolean(e.editor.detectIndentation));let C=m.D.largeFileOptimizations;e.editor&&"undefined"!==typeof e.editor.largeFileOptimizations&&(C="false"!==e.editor.largeFileOptimizations&&Boolean(e.editor.largeFileOptimizations));let b=m.D.bracketPairColorizationOptions;return(null===(s=e.editor)||void 0===s?void 0:s.bracketPairColorization)&&"object"===typeof e.editor.bracketPairColorization&&(b={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:o,tabSize:l,indentSize:d,insertSpaces:u,detectIndentation:_,defaultEOL:g,trimAutoWhitespace:f,largeFileOptimizations:C,bracketPairColorizationOptions:b}}_getEOL(e,o){if(e)return this._resourcePropertiesService.getEOL(e,o);const s=this._configurationService.getValue("files.eol",{overrideIdentifier:o});return s&&"string"===typeof s&&"auto"!==s?s:3===u.OS||2===u.OS?"\n":"\r\n"}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!==typeof e||e}getCreationOptions(e,o,s){let l=this._modelCreationOptionsByLanguageAndResource[e+o];if(!l){const d=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:o}),u=this._getEOL(o,e);l=ModelService._readModelOptions({editor:d,eol:u},s),this._modelCreationOptionsByLanguageAndResource[e+o]=l}return l}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const o=Object.keys(this._models);for(let s=0,l=o.length;s<l;s++){const l=o[s],d=this._models[l],u=d.model.getLanguageId(),g=d.model.uri,p=e[u+g],m=this.getCreationOptions(u,g,d.model.isForSimpleWidget);ModelService._setModelOptionsForModel(d.model,m,p)}}static _setModelOptionsForModel(e,o,s){s&&s.defaultEOL!==o.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===o.defaultEOL?0:1),s&&s.detectIndentation===o.detectIndentation&&s.insertSpaces===o.insertSpaces&&s.tabSize===o.tabSize&&s.indentSize===o.indentSize&&s.trimAutoWhitespace===o.trimAutoWhitespace&&(0,A.fS)(s.bracketPairColorizationOptions,o.bracketPairColorizationOptions)||(o.detectIndentation?(e.detectIndentation(o.insertSpaces,o.tabSize),e.updateOptions({trimAutoWhitespace:o.trimAutoWhitespace,bracketColorizationOptions:o.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:o.insertSpaces,tabSize:o.tabSize,indentSize:o.indentSize,trimAutoWhitespace:o.trimAutoWhitespace,bracketColorizationOptions:o.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(MODEL_ID(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const o=this._disposedModels.get(MODEL_ID(e));return o&&(this._disposedModelsHeapSize-=o.heapSize),this._disposedModels.delete(MODEL_ID(e)),o}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const o=[];this._disposedModels.forEach((e=>{e.sharesUndoRedoStack||o.push(e)})),o.sort(((e,o)=>e.time-o.time));while(o.length>0&&this._disposedModelsHeapSize>e){const e=o.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,o,s,l){const d=this.getCreationOptions(o,s,l),u=new p.yO(e,o,d,s,this._undoRedoService,this._languageService,this._languageConfigurationService);if(s&&this._disposedModels.has(MODEL_ID(s))){const e=this._removeDisposedModel(s),o=this._undoRedoService.getElements(s),l=computeModelSha1(u)===e.sha1;if(l||e.sharesUndoRedoStack){for(const e of o.past)(0,D.e9)(e)&&e.matchesResource(s)&&e.setModel(u);for(const e of o.future)(0,D.e9)(e)&&e.matchesResource(s)&&e.setModel(u);this._undoRedoService.setElementsValidFlag(s,!0,(e=>(0,D.e9)(e)&&e.matchesResource(s))),l&&(u._overwriteVersionId(e.versionId),u._overwriteAlternativeVersionId(e.alternativeVersionId),u._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}const g=MODEL_ID(u.uri);if(this._models[g])throw new Error("ModelService: Cannot add model because it already exists!");const m=new ModelData(u,(e=>this._onWillDispose(e)),((e,o)=>this._onDidChangeLanguage(e,o)));return this._models[g]=m,m}createModel(e,o,s,l=!1){let d;return o?(d=this._createModelData(e,o.languageId,s,l),this.setMode(d.model,o)):d=this._createModelData(e,f.bd,s,l),this._onModelAdded.fire(d.model),d.model}setMode(e,o){if(!o)return;const s=this._models[MODEL_ID(e.uri)];s&&s.setLanguage(o)}getModels(){const e=[],o=Object.keys(this._models);for(let s=0,l=o.length;s<l;s++){const l=o[s];e.push(this._models[l].model)}return e}getModel(e){const o=MODEL_ID(e),s=this._models[o];return s?s.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===E.lg.file||e.scheme===E.lg.vscodeRemote||e.scheme===E.lg.userData||e.scheme===E.lg.vscodeNotebookCell||"fake-fs"===e.scheme}_onWillDispose(e){const o=MODEL_ID(e.uri),s=this._models[o],l=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let d=!1,u=0;if(l||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const o=this._undoRedoService.getElements(e.uri);if(o.past.length>0||o.future.length>0){for(const s of o.past)(0,D.e9)(s)&&s.matchesResource(e.uri)&&(d=!0,u+=s.heapSize(e.uri),s.setModel(e.uri));for(const s of o.future)(0,D.e9)(s)&&s.matchesResource(e.uri)&&(d=!0,u+=s.heapSize(e.uri),s.setModel(e.uri))}}const g=ModelService.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(d)if(!l&&u>g){const e=s.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}else this._ensureDisposedModelsHeapSize(g-u),this._undoRedoService.setElementsValidFlag(e.uri,!1,(o=>(0,D.e9)(o)&&o.matchesResource(e.uri))),this._insertDisposedModel(new DisposedModelInfo(e.uri,s.model.getInitialUndoRedoSnapshot(),Date.now(),l,u,computeModelSha1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!l){const e=s.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}delete this._models[o],s.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,o){const s=o.oldLanguage,l=e.getLanguageId(),d=this.getCreationOptions(s,e.uri,e.isForSimpleWidget),u=this.getCreationOptions(l,e.uri,e.isForSimpleWidget);ModelService._setModelOptionsForModel(e,u,d),this._onModelModeChanged.fire({model:e,oldLanguageId:s})}};B.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520,B=__decorate([__param(0,w.Ui),__param(1,b.y),__param(2,L.XE),__param(3,x.VZ),__param(4,k.tJ),__param(5,_.O),__param(6,M.c_),__param(7,R.A),__param(8,O.p)],B);const W="editor.semanticHighlighting";function isSemanticColoringEnabled(e,o,s){var l;const d=null===(l=s.getValue(W,{overrideIdentifier:e.getLanguageId(),resource:e.uri}))||void 0===l?void 0:l.enabled;return"boolean"===typeof d?d:o.getColorTheme().semanticHighlighting}let V=class SemanticColoringFeature extends d.JT{constructor(e,o,s,l,d,u){super(),this._watchers=Object.create(null),this._semanticStyling=e;const register=e=>{this._watchers[e.uri.toString()]=new H(e,this._semanticStyling,s,d,u)},deregister=(e,o)=>{o.dispose(),delete this._watchers[e.uri.toString()]},handleSettingOrThemeChange=()=>{for(let e of o.getModels()){const o=this._watchers[e.uri.toString()];isSemanticColoringEnabled(e,s,l)?o||register(e):o&&deregister(e,o)}};this._register(o.onModelAdded((e=>{isSemanticColoringEnabled(e,s,l)&&register(e)}))),this._register(o.onModelRemoved((e=>{const o=this._watchers[e.uri.toString()];o&&deregister(e,o)}))),this._register(l.onDidChangeConfiguration((e=>{e.affectsConfiguration(W)&&handleSettingOrThemeChange()}))),this._register(s.onDidColorThemeChange(handleSettingOrThemeChange))}};V=__decorate([__param(1,C.q),__param(2,L.XE),__param(3,w.Ui),__param(4,R.A),__param(5,O.p)],V);class SemanticStyling extends d.JT{constructor(e,o,s){super(),this._themeService=e,this._languageService=o,this._logService=s,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange((()=>{this._caches=new WeakMap})))}get(e){return this._caches.has(e)||this._caches.set(e,new T.$(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}}class SemanticTokensResponse{constructor(e,o,s){this.provider=e,this.resultId=o,this.data=s}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}let H=class ModelSemanticColoring extends d.JT{constructor(e,o,s,l,u){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=o,this._provider=u.documentSemanticTokensProvider,this._debounceInformation=l.for(this._provider,"DocumentSemanticTokens",{min:ModelSemanticColoring.REQUEST_MIN_DELAY,max:ModelSemanticColoring.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new S.pY((()=>this._fetchDocumentSemanticTokensNow()),ModelSemanticColoring.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent((()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._register(this._model.onDidChangeLanguage((()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)})));const bindDocumentChangeListeners=()=>{(0,d.B9)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const o of this._provider.all(e))"function"===typeof o.onDidChange&&this._documentProvidersChangeListeners.push(o.onDidChange((()=>this._fetchDocumentSemanticTokens.schedule(0))))};bindDocumentChangeListeners(),this._register(this._provider.onDidChange((()=>{bindDocumentChangeListeners(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._register(s.onDidColorThemeChange((e=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!(0,I.Jc)(this._provider,this._model))return void(this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1));const e=new y.A,o=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,s=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,l=(0,I.ML)(this._provider,this._model,o,s,e.token);this._currentDocumentRequestCancellationTokenSource=e;const d=[],u=this._model.onDidChangeContent((e=>{d.push(e)})),p=new P.G(!1);l.then((e=>{if(this._debounceInformation.update(this._model,p.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,u.dispose(),e){const{provider:o,tokens:s}=e,l=this._semanticStyling.get(o);this._setDocumentSemanticTokens(o,s||null,l,d)}else this._setDocumentSemanticTokens(null,null,null,d)}),(e=>{const o=e&&(g.n2(e)||"string"===typeof e.message&&-1!==e.message.indexOf("busy"));o||g.dL(e),this._currentDocumentRequestCancellationTokenSource=null,u.dispose(),d.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))}))}static _copy(e,o,s,l,d){for(let u=0;u<d;u++)s[l+u]=e[o+u]}_setDocumentSemanticTokens(e,o,s,l){const d=this._currentDocumentResponse,rescheduleIfNeeded=()=>{l.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)e&&o&&e.releaseDocumentSemanticTokens(o.resultId);else if(e&&s){if(!o)return this._model.setSemanticTokens(null,!0),void rescheduleIfNeeded();if((0,I.Vj)(o)){if(!d)return void this._model.setSemanticTokens(null,!0);if(0===o.edits.length)o={resultId:o.resultId,data:d.data};else{let e=0;for(const d of o.edits)e+=(d.data?d.data.length:0)-d.deleteCount;const s=d.data,l=new Uint32Array(s.length+e);let u=s.length,g=l.length;for(let d=o.edits.length-1;d>=0;d--){const e=o.edits[d],p=u-(e.start+e.deleteCount);p>0&&(ModelSemanticColoring._copy(s,u-p,l,g-p,p),g-=p),e.data&&(ModelSemanticColoring._copy(e.data,0,l,g-e.data.length,e.data.length),g-=e.data.length),u=e.start}u>0&&ModelSemanticColoring._copy(s,0,l,0,u),o={resultId:o.resultId,data:l}}}if((0,I.Vl)(o)){this._currentDocumentResponse=new SemanticTokensResponse(e,o.resultId,o.data);const d=(0,T.h)(o,s,this._model.getLanguageId());if(l.length>0)for(const e of l)for(const o of d)for(const s of e.changes)o.applyEdit(s.range,s.text);this._model.setSemanticTokens(d,!0)}else this._model.setSemanticTokens(null,!0);rescheduleIfNeeded()}else this._model.setSemanticTokens(null,!1)}};H.REQUEST_MIN_DELAY=300,H.REQUEST_MAX_DELAY=2e3,H=__decorate([__param(2,L.XE),__param(3,R.A),__param(4,O.p)],H)},8216:function(e,o,s){"use strict";s.d(o,{S:function(){return d}});var l=s(2065);const d=(0,l.yh)("textModelService")},8997:function(e,o,s){"use strict";s.d(o,{$:function(){return _},h:function(){return toMultilineTokens2}});var l=s(3155),d=s(7781),u=s(3557),g=s(187),p=s(4314),m=s(3795);class SparseMultilineTokens{constructor(e,o){this._startLineNumber=e,this._tokens=o,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}static create(e,o){return new SparseMultilineTokens(e,new SparseMultilineTokensStorage(o))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e?new p.e(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e}removeTokens(e){const o=e.startLineNumber-this._startLineNumber,s=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(o,e.startColumn-1,s,e.endColumn-1),this._updateEndLineNumber()}split(e){const o=e.startLineNumber-this._startLineNumber,s=e.endLineNumber-this._startLineNumber,[l,d,u]=this._tokens.split(o,e.startColumn-1,s,e.endColumn-1);return[new SparseMultilineTokens(this._startLineNumber,l),new SparseMultilineTokens(this._startLineNumber+u,d)]}applyEdit(e,o){const[s,l,d]=(0,m.Q)(o);this.acceptEdit(e,s,l,d,o.length>0?o.charCodeAt(0):0)}acceptEdit(e,o,s,l,d){this._acceptDeleteRange(e),this._acceptInsertText(new g.L(e.startLineNumber,e.startColumn),o,s,l,d),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const o=e.startLineNumber-this._startLineNumber,s=e.endLineNumber-this._startLineNumber;if(s<0){const e=s-o;return void(this._startLineNumber-=e)}const l=this._tokens.getMaxDeltaLine();if(!(o>=l+1)){if(o<0&&s>=l+1)return this._startLineNumber=0,void this._tokens.clear();if(o<0){const l=-o;this._startLineNumber-=l,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,s,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,o,e.startColumn-1,s,e.endColumn-1)}}_acceptInsertText(e,o,s,l,d){if(0===o&&0===s)return;const u=e.lineNumber-this._startLineNumber;if(u<0)return void(this._startLineNumber+=o);const g=this._tokens.getMaxDeltaLine();u>=g+1||this._tokens.acceptInsertText(u,e.column-1,o,s,l,d)}}class SparseMultilineTokensStorage{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const o=[];for(let s=0;s<this._tokenCount;s++)o.push(`(${this._getDeltaLine(s)+e},${this._getStartCharacter(s)}-${this._getEndCharacter(s)})`);return`[${o.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(0===e)return null;const o=this._getStartCharacter(0),s=this._getDeltaLine(e-1),l=this._getEndCharacter(e-1);return new p.e(0,o+1,s,l+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let o=0,s=this._getTokenCount()-1;while(o<s){const l=o+Math.floor((s-o)/2),d=this._getDeltaLine(l);if(d<e)o=l+1;else{if(!(d>e)){let d=l;while(d>o&&this._getDeltaLine(d-1)===e)d--;let u=l;while(u<s&&this._getDeltaLine(u+1)===e)u++;return new SparseLineTokens(this._tokens.subarray(4*d,4*u+4))}s=l-1}}return this._getDeltaLine(o)===e?new SparseLineTokens(this._tokens.subarray(4*o,4*o+4)):null}clear(){this._tokenCount=0}removeTokens(e,o,s,l){const d=this._tokens,u=this._tokenCount;let g=0,p=!1,m=0;for(let f=0;f<u;f++){const u=4*f,_=d[u],C=d[u+1],b=d[u+2],w=d[u+3];if((_>e||_===e&&b>=o)&&(_<s||_===s&&C<=l))p=!0;else{if(0===g&&(m=_),p){const e=4*g;d[e]=_-m,d[e+1]=C,d[e+2]=b,d[e+3]=w}g++}}return this._tokenCount=g,m}split(e,o,s,l){const d=this._tokens,u=this._tokenCount,g=[],p=[];let m=g,f=0,_=0;for(let C=0;C<u;C++){const u=4*C,g=d[u],b=d[u+1],w=d[u+2],S=d[u+3];if(g>e||g===e&&w>=o){if(g<s||g===s&&b<=l)continue;m!==p&&(m=p,f=0,_=g)}m[f++]=g-_,m[f++]=b,m[f++]=w,m[f++]=S}return[new SparseMultilineTokensStorage(new Uint32Array(g)),new SparseMultilineTokensStorage(new Uint32Array(p)),_]}acceptDeleteRange(e,o,s,l,d){const u=this._tokens,g=this._tokenCount,p=l-o;let m=0,f=!1;for(let _=0;_<g;_++){const C=4*_;let b=u[C],w=u[C+1],S=u[C+2];const y=u[C+3];if(b<o||b===o&&S<=s){m++;continue}if(b===o&&w<s)b===l&&S>d?S-=d-s:S=s;else if(b===o&&w===s){if(!(b===l&&S>d)){f=!0;continue}S-=d-s}else if(b<l||b===l&&w<d){if(!(b===l&&S>d)){f=!0;continue}b===o?(w=s,S=w+(S-d)):(w=0,S=w+(S-d))}else if(b>l){if(0===p&&!f){m=g;break}b-=p}else{if(!(b===l&&w>=d))throw new Error("Not possible!");e&&0===b&&(w+=e,S+=e),b-=p,w-=d-s,S-=d-s}const L=4*m;u[L]=b,u[L+1]=w,u[L+2]=S,u[L+3]=y,m++}this._tokenCount=m}acceptInsertText(e,o,s,l,d,u){const g=0===s&&1===l&&(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122),p=this._tokens,m=this._tokenCount;for(let f=0;f<m;f++){const u=4*f;let m=p[u],_=p[u+1],C=p[u+2];if(!(m<e||m===e&&C<o)){if(m===e&&C===o){if(!g)continue;C+=1}else if(m===e&&_<o&&o<C)0===s?C+=l:C=o;else{if(m===e&&_===o&&g)continue;if(m===e)if(m+=s,0===s)_+=l,C+=l;else{const e=C-_;_=d+(_-o),C=_+e}else m+=s}p[u]=m,p[u+1]=_,p[u+2]=C}}}}class SparseLineTokens{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var f=s(2042),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let _=class SemanticTokensProviderStyling{constructor(e,o,s,l){this._legend=e,this._themeService=o,this._languageService=s,this._logService=l,this._hashTable=new HashTable,this._hasWarnedOverlappingTokens=!1}getMetadata(e,o,s){const d=this._languageService.languageIdCodec.encodeLanguageId(s),g=this._hashTable.get(e,o,d);let p;if(g)p=g.metadata,this._logService.getLevel()===u["in"].Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${o}: foreground ${l.NX.getForeground(p)}, fontStyle ${l.NX.getFontStyle(p).toString(2)}`);else{let g=this._legend.tokenTypes[e];const m=[];if(g){let e=o;for(let o=0;e>0&&o<this._legend.tokenModifiers.length;o++)1&e&&m.push(this._legend.tokenModifiers[o]),e>>=1;e>0&&this._logService.getLevel()===u["in"].Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${o.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),m.push("not-in-legend"));const l=this._themeService.getColorTheme().getTokenStyleMetadata(g,m,s);if("undefined"===typeof l)p=2147483647;else{if(p=0,"undefined"!==typeof l.italic){const e=(l.italic?1:0)<<10;p|=1|e}if("undefined"!==typeof l.bold){const e=(l.bold?2:0)<<10;p|=2|e}if("undefined"!==typeof l.underline){const e=(l.underline?4:0)<<10;p|=4|e}if("undefined"!==typeof l.strikethrough){const e=(l.strikethrough?8:0)<<10;p|=8|e}if(l.foreground){const e=l.foreground<<14;p|=16|e}0===p&&(p=2147483647)}}else this._logService.getLevel()===u["in"].Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),p=2147483647,g="not-in-legend";this._hashTable.add(e,o,d,p),this._logService.getLevel()===u["in"].Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${g}) / ${o} (${m.join(" ")}): foreground ${l.NX.getForeground(p)}, fontStyle ${l.NX.getFontStyle(p).toString(2)}`)}return p}warnOverlappingSemanticTokens(e,o){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${o}`))}};function toMultilineTokens2(e,o,s){const l=e.data,d=e.data.length/5|0,u=Math.max(Math.ceil(d/1024),400),g=[];let p=0,m=1,f=0;while(p<d){const e=p;let _=Math.min(e+u,d);if(_<d){let o=_;while(o-1>e&&0===l[5*o])o--;if(o-1===e){let e=_;while(e+1<d&&0===l[5*e])e++;_=e}else _=o}let C=new Uint32Array(4*(_-e)),b=0,w=0,S=0,y=0,L=0;while(p<_){const e=5*p,d=l[e],u=l[e+1],g=m+d|0,_=0===d?f+u|0:u,x=l[e+2],k=l[e+3],N=l[e+4],D=o.getMetadata(k,N,s);2147483647!==D&&(0===w&&(w=g),S===g&&L>_&&(o.warnOverlappingSemanticTokens(g,_+1),y<_?C[b-4+2]=_:b-=4),C[b]=g-w,C[b+1]=_,C[b+2]=_+x,C[b+3]=D,b+=4,S=g,y=_,L=_+x),m=g,f=_,p++}b!==C.length&&(C=C.subarray(0,b));const x=SparseMultilineTokens.create(w,C);g.push(x)}return g}_=__decorate([__param(1,d.XE),__param(2,f.O),__param(3,u.VZ)],_);class HashTableEntry{constructor(e,o,s,l){this.tokenTypeIndex=e,this.tokenModifierSet=o,this.languageId=s,this.metadata=l,this.next=null}}class HashTable{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=HashTable._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<HashTable._SIZES.length?2/3*this._currentLength:0),this._elements=[],HashTable._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,o){for(let s=0;s<o;s++)e[s]=null}_hash2(e,o){return(e<<5)-e+o|0}_hashFunc(e,o,s){return this._hash2(this._hash2(e,o),s)%this._currentLength}get(e,o,s){const l=this._hashFunc(e,o,s);let d=this._elements[l];while(d){if(d.tokenTypeIndex===e&&d.tokenModifierSet===o&&d.languageId===s)return d;d=d.next}return null}add(e,o,s,l){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){const e=this._elements;this._currentLengthIndex++,this._currentLength=HashTable._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<HashTable._SIZES.length?2/3*this._currentLength:0),this._elements=[],HashTable._nullOutEntries(this._elements,this._currentLength);for(const o of e){let e=o;while(e){const o=e.next;e.next=null,this._add(e),e=o}}}this._add(new HashTableEntry(e,o,s,l))}_add(e){const o=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[o],this._elements[o]=e}}HashTable._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]},1765:function(e,o,s){"use strict";s.d(o,{V:function(){return d},y:function(){return u}});var l=s(2065);const d=(0,l.yh)("textResourceConfigurationService"),u=(0,l.yh)("textResourcePropertiesService")},1446:function(e,o,s){"use strict";s.d(o,{a:function(){return UnicodeTextModelHighlighter}});var l=s(4314),d=s(7277),u=s(2677),g=s(8401),p=s(270);class UnicodeTextModelHighlighter{static computeUnicodeHighlights(e,o,s){const m=s?s.startLineNumber:1,f=s?s.endLineNumber:e.getLineCount(),_=new CodePointHighlighter(o),C=_.getCandidateCodePoints();let b;b="allNonBasicAscii"===C?new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):new RegExp(`${buildRegExpCharClassExpr(Array.from(C))}`,"g");const w=new d.sz(null,b),S=[];let y,L=!1,x=0,k=0,N=0;e:for(let d=m,D=f;d<=D;d++){const o=e.getLineContent(d),s=o.length;w.reset(0);do{if(y=w.next(o),y){let e=y.index,m=y.index+y[0].length;if(e>0){const s=o.charCodeAt(e-1);u.ZG(s)&&e--}if(m+1<s){const e=o.charCodeAt(m-1);u.ZG(e)&&m++}const f=o.substring(e,m),C=(0,p.t2)(e+1,p.Af,o,0),b=_.shouldHighlightNonBasicASCII(f,C?C.word:null);if(0!==b){3===b?x++:2===b?k++:1===b?N++:(0,g.vE)(b);const o=1e3;if(S.length>=o){L=!0;break e}S.push(new l.e(d,e+1,d,m+1))}}}while(y)}return{ranges:S,hasMore:L,ambiguousCharacterCount:x,invisibleCharacterCount:k,nonBasicAsciiCharacterCount:N}}static computeUnicodeHighlightReason(e,o){const s=new CodePointHighlighter(o),l=s.shouldHighlightNonBasicASCII(e,null);switch(l){case 0:return null;case 2:return{kind:1};case 3:{const l=e.codePointAt(0),d=s.ambiguousCharacters.getPrimaryConfusable(l),g=u.ZK.getLocales().filter((e=>!u.ZK.getInstance(new Set([...o.allowedLocales,e])).isAmbiguous(l)));return{kind:0,confusableWith:String.fromCodePoint(d),notAmbiguousInLocales:g}}case 1:return{kind:2}}}}function buildRegExpCharClassExpr(e,o){const s=`[${u.ec(e.map((e=>String.fromCodePoint(e))).join(""))}]`;return s}class CodePointHighlighter{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=u.ZK.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const o of u.vU.codePoints)isAllowedInvisibleCharacter(String.fromCodePoint(o))||e.add(o);if(this.options.ambiguousCharacters)for(const o of this.ambiguousCharacters.getConfusableCodePoints())e.add(o);for(const o of this.allowedCodePoints)e.delete(o);return e}shouldHighlightNonBasicASCII(e,o){const s=e.codePointAt(0);if(this.allowedCodePoints.has(s))return 0;if(this.options.nonBasicASCII)return 1;let l=!1,d=!1;if(o)for(let g of o){const e=g.codePointAt(0),o=u.$i(g);l=l||o,o||this.ambiguousCharacters.isAmbiguous(e)||u.vU.isInvisibleCharacter(e)||(d=!0)}return!l&&d?0:this.options.invisibleCharacters&&!isAllowedInvisibleCharacter(e)&&u.vU.isInvisibleCharacter(s)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(s)?3:0}}function isAllowedInvisibleCharacter(e){return" "===e||"\n"===e||"\t"===e}},913:function(e,o,s){"use strict";s.d(o,{B8:function(){return f},Oe:function(){return l},UX:function(){return p},aq:function(){return m},iN:function(){return C},ld:function(){return g},qq:function(){return u},ug:function(){return d},xi:function(){return _}});var l,d,u,g,p,m,f,_,C,b=s(3580);(function(e){e.noSelection=b.N("noSelection","No selection"),e.singleSelectionRange=b.N("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),e.singleSelection=b.N("singleSelection","Line {0}, Column {1}"),e.multiSelectionRange=b.N("multiSelectionRange","{0} selections ({1} characters selected)"),e.multiSelection=b.N("multiSelection","{0} selections"),e.emergencyConfOn=b.N("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),e.openingDocs=b.N("openingDocs","Now opening the Editor Accessibility documentation page."),e.readonlyDiffEditor=b.N("readonlyDiffEditor"," in a read-only pane of a diff editor."),e.editableDiffEditor=b.N("editableDiffEditor"," in a pane of a diff editor."),e.readonlyEditor=b.N("readonlyEditor"," in a read-only code editor"),e.editableEditor=b.N("editableEditor"," in a code editor"),e.changeConfigToOnMac=b.N("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),e.changeConfigToOnWinLinux=b.N("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),e.auto_on=b.N("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),e.auto_off=b.N("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),e.tabFocusModeOnMsg=b.N("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),e.tabFocusModeOnMsgNoKb=b.N("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),e.tabFocusModeOffMsg=b.N("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),e.tabFocusModeOffMsgNoKb=b.N("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),e.openDocMac=b.N("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),e.openDocWinLinux=b.N("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),e.outroMsg=b.N("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),e.showAccessibilityHelpAction=b.N("showAccessibilityHelpAction","Show Accessibility Help")})(l||(l={})),function(e){e.inspectTokensAction=b.N("inspectTokens","Developer: Inspect Tokens")}(d||(d={})),function(e){e.gotoLineActionLabel=b.N("gotoLineActionLabel","Go to Line/Column...")}(u||(u={})),function(e){e.helpQuickAccessActionLabel=b.N("helpQuickAccess","Show all Quick Access Providers")}(g||(g={})),function(e){e.quickCommandActionLabel=b.N("quickCommandActionLabel","Command Palette"),e.quickCommandHelp=b.N("quickCommandActionHelp","Show And Run Commands")}(p||(p={})),function(e){e.quickOutlineActionLabel=b.N("quickOutlineActionLabel","Go to Symbol..."),e.quickOutlineByCategoryActionLabel=b.N("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")}(m||(m={})),function(e){e.editorViewAccessibleLabel=b.N("editorViewAccessibleLabel","Editor content"),e.accessibilityHelpMessage=b.N("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")}(f||(f={})),function(e){e.toggleHighContrast=b.N("toggleHighContrast","Toggle High Contrast Theme")}(_||(_={})),function(e){e.bulkEditServiceSummary=b.N("bulkEditServiceSummary","Made {0} edits in {1} files")}(C||(C={}))},4706:function(e,o,s){"use strict";s.d(o,{CZ:function(){return ModelRawEOLChanged},D8:function(){return ModelInjectedTextChangedEvent},Jx:function(){return ModelRawFlush},Tx:function(){return ModelRawLinesInserted},dQ:function(){return ModelRawContentChangedEvent},fV:function(){return InternalModelContentChangeEvent},gk:function(){return LineInjectedText},lN:function(){return ModelRawLinesDeleted},rU:function(){return ModelRawLineChanged}});class ModelRawFlush{constructor(){this.changeType=1}}class LineInjectedText{constructor(e,o,s,l,d){this.ownerId=e,this.lineNumber=o,this.column=s,this.options=l,this.order=d}static applyInjectedText(e,o){if(!o||0===o.length)return e;let s="",l=0;for(const d of o)s+=e.substring(l,d.column-1),l=d.column-1,s+=d.options.content;return s+=e.substring(l),s}static fromDecorations(e){const o=[];for(const s of e)s.options.before&&s.options.before.content.length>0&&o.push(new LineInjectedText(s.ownerId,s.range.startLineNumber,s.range.startColumn,s.options.before,0)),s.options.after&&s.options.after.content.length>0&&o.push(new LineInjectedText(s.ownerId,s.range.endLineNumber,s.range.endColumn,s.options.after,1));return o.sort(((e,o)=>e.lineNumber===o.lineNumber?e.column===o.column?e.order-o.order:e.column-o.column:e.lineNumber-o.lineNumber)),o}}class ModelRawLineChanged{constructor(e,o,s){this.changeType=2,this.lineNumber=e,this.detail=o,this.injectedText=s}}class ModelRawLinesDeleted{constructor(e,o){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=o}}class ModelRawLinesInserted{constructor(e,o,s,l){this.changeType=4,this.injectedTexts=l,this.fromLineNumber=e,this.toLineNumber=o,this.detail=s}}class ModelRawEOLChanged{constructor(){this.changeType=5}}class ModelRawContentChangedEvent{constructor(e,o,s,l){this.changes=e,this.versionId=o,this.isUndoing=s,this.isRedoing=l,this.resultingSelection=null}containsEvent(e){for(let o=0,s=this.changes.length;o<s;o++){const s=this.changes[o];if(s.changeType===e)return!0}return!1}static merge(e,o){const s=[].concat(e.changes).concat(o.changes),l=o.versionId,d=e.isUndoing||o.isUndoing,u=e.isRedoing||o.isRedoing;return new ModelRawContentChangedEvent(s,l,d,u)}}class ModelInjectedTextChangedEvent{constructor(e){this.changes=e}}class InternalModelContentChangeEvent{constructor(e,o){this.rawContentChangedEvent=e,this.contentChangedEvent=o}merge(e){const o=ModelRawContentChangedEvent.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),s=InternalModelContentChangeEvent._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new InternalModelContentChangeEvent(o,s)}static _mergeChangeEvents(e,o){const s=[].concat(e.changes).concat(o.changes),l=o.eol,d=o.versionId,u=e.isUndoing||o.isUndoing,g=e.isRedoing||o.isRedoing,p=e.isFlush||o.isFlush;return{changes:s,eol:l,versionId:d,isUndoing:u,isRedoing:g,isFlush:p}}}},5094:function(e,o,s){"use strict";var l;s.d(o,{UO:function(){return IndentGuide},s6:function(){return l},vW:function(){return IndentGuideHorizontalLine}}),function(e){e[e["Disabled"]=0]="Disabled",e[e["EnabledForActive"]=1]="EnabledForActive",e[e["Enabled"]=2]="Enabled"}(l||(l={}));class IndentGuide{constructor(e,o,s){this.visibleColumn=e,this.className=o,this.horizontalLine=s}}class IndentGuideHorizontalLine{constructor(e,o){this.top=e,this.endColumn=o}}},7378:function(e,o,s){"use strict";s.d(o,{A:function(){return LineTokens}});var l=s(3155);class LineTokens{constructor(e,o,s){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=o,this._languageIdCodec=s}static createEmpty(e,o){const s=LineTokens.defaultTokenMetadata,l=new Uint32Array(2);return l[0]=e.length,l[1]=s,new LineTokens(l,e,o)}equals(e){return e instanceof LineTokens&&this.slicedEquals(e,0,this._tokensCount)}slicedEquals(e,o,s){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;const l=o<<1,d=l+(s<<1);for(let u=l;u<d;u++)if(this._tokens[u]!==e._tokens[u])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){const o=this._tokens[1+(e<<1)];return o}getLanguageId(e){const o=this._tokens[1+(e<<1)],s=l.NX.getLanguageId(o);return this._languageIdCodec.decodeLanguageId(s)}getStandardTokenType(e){const o=this._tokens[1+(e<<1)];return l.NX.getTokenType(o)}getForeground(e){const o=this._tokens[1+(e<<1)];return l.NX.getForeground(o)}getClassName(e){const o=this._tokens[1+(e<<1)];return l.NX.getClassNameFromMetadata(o)}getInlineStyle(e,o){const s=this._tokens[1+(e<<1)];return l.NX.getInlineStyleFromMetadata(s,o)}getPresentation(e){const o=this._tokens[1+(e<<1)];return l.NX.getPresentationFromMetadata(o)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return LineTokens.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,o,s){return new SliceLineTokens(this,e,o,s)}static convertToEndOffset(e,o){const s=e.length>>>1,l=s-1;for(let d=0;d<l;d++)e[d<<1]=e[d+1<<1];e[l<<1]=o}static findIndexInTokensArray(e,o){if(e.length<=2)return 0;let s=0,l=(e.length>>>1)-1;while(s<l){const d=s+Math.floor((l-s)/2),u=e[d<<1];if(u===o)return d+1;u<o?s=d+1:u>o&&(l=d)}return s}withInserted(e){if(0===e.length)return this;let o=0,s=0,l="";const d=new Array;let u=0;while(1){const g=o<this._tokensCount?this._tokens[o<<1]:-1,p=s<e.length?e[s]:null;if(-1!==g&&(null===p||g<=p.offset)){l+=this._text.substring(u,g);const e=this._tokens[1+(o<<1)];d.push(l.length,e),o++,u=g}else{if(!p)break;if(p.offset>u){l+=this._text.substring(u,p.offset);const e=this._tokens[1+(o<<1)];d.push(l.length,e),u=p.offset}l+=p.text,d.push(l.length,p.tokenMetadata),s++}}return new LineTokens(new Uint32Array(d),l,this._languageIdCodec)}}LineTokens.defaultTokenMetadata=16793600;class SliceLineTokens{constructor(e,o,s,l){this._source=e,this._startOffset=o,this._endOffset=s,this._deltaOffset=l,this._firstTokenIndex=e.findTokenIndexAtOffset(o),this._tokensCount=0;for(let d=this._firstTokenIndex,u=e.getCount();d<u;d++){const o=e.getStartOffset(d);if(o>=s)break;this._tokensCount++}}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof SliceLineTokens&&(this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount))}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const o=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,o)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,o){return this._source.getInlineStyle(this._firstTokenIndex+e,o)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}},2550:function(e,o,s){"use strict";s.d(o,{Kp:function(){return LineDecoration},k:function(){return LineDecorationsNormalizer}});var l=s(2677);class LineDecoration{constructor(e,o,s,l){this.startColumn=e,this.endColumn=o,this.className=s,this.type=l,this._lineDecorationBrand=void 0}static _equals(e,o){return e.startColumn===o.startColumn&&e.endColumn===o.endColumn&&e.className===o.className&&e.type===o.type}static equalsArr(e,o){const s=e.length,l=o.length;if(s!==l)return!1;for(let d=0;d<s;d++)if(!LineDecoration._equals(e[d],o[d]))return!1;return!0}static extractWrapped(e,o,s){if(0===e.length)return e;const l=o+1,d=s+1,u=s-o,g=[];let p=0;for(const m of e)m.endColumn<=l||m.startColumn>=d||(g[p++]=new LineDecoration(Math.max(1,m.startColumn-l+1),Math.min(u+1,m.endColumn-l+1),m.className,m.type));return g}static filter(e,o,s,l){if(0===e.length)return[];const d=[];let u=0;for(let g=0,p=e.length;g<p;g++){const p=e[g],m=p.range;if(m.endLineNumber<o||m.startLineNumber>o)continue;if(m.isEmpty()&&(0===p.type||3===p.type))continue;const f=m.startLineNumber===o?m.startColumn:s,_=m.endLineNumber===o?m.endColumn:l;d[u++]=new LineDecoration(f,_,p.inlineClassName,p.type)}return d}static _typeCompare(e,o){const s=[2,0,1,3];return s[e]-s[o]}static compare(e,o){if(e.startColumn!==o.startColumn)return e.startColumn-o.startColumn;if(e.endColumn!==o.endColumn)return e.endColumn-o.endColumn;const s=LineDecoration._typeCompare(e.type,o.type);return 0!==s?s:e.className!==o.className?e.className<o.className?-1:1:0}}class DecorationSegment{constructor(e,o,s,l){this.startOffset=e,this.endOffset=o,this.className=s,this.metadata=l}}class Stack{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let o=0;for(let s=0,l=e.length;s<l;s++)o|=e[s];return o}consumeLowerThan(e,o,s){while(this.count>0&&this.stopOffsets[0]<e){let e=0;while(e+1<this.count&&this.stopOffsets[e]===this.stopOffsets[e+1])e++;s.push(new DecorationSegment(o,this.stopOffsets[e],this.classNames.join(" "),Stack._metadata(this.metadata))),o=this.stopOffsets[e]+1,this.stopOffsets.splice(0,e+1),this.classNames.splice(0,e+1),this.metadata.splice(0,e+1),this.count-=e+1}return this.count>0&&o<e&&(s.push(new DecorationSegment(o,e-1,this.classNames.join(" "),Stack._metadata(this.metadata))),o=e),o}insert(e,o,s){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(o),this.metadata.push(s);else for(let l=0;l<this.count;l++)if(this.stopOffsets[l]>=e){this.stopOffsets.splice(l,0,e),this.classNames.splice(l,0,o),this.metadata.splice(l,0,s);break}this.count++}}class LineDecorationsNormalizer{static normalize(e,o){if(0===o.length)return[];const s=[],d=new Stack;let u=0;for(let g=0,p=o.length;g<p;g++){const p=o[g];let m=p.startColumn,f=p.endColumn;const _=p.className,C=1===p.type?2:2===p.type?4:0;if(m>1){const o=e.charCodeAt(m-2);l.ZG(o)&&m--}if(f>1){const o=e.charCodeAt(f-2);l.ZG(o)&&f--}const b=m-1,w=f-2;u=d.consumeLowerThan(b,u,s),0===d.count&&(u=b),d.insert(w,_,C)}return d.consumeLowerThan(1073741824,u,s),s}}},7736:function(e,o,s){"use strict";s.d(o,{IJ:function(){return RenderLineInput},Nd:function(){return DomPosition},d1:function(){return renderViewLine},tF:function(){return renderViewLine2},zG:function(){return LineRange}});var l=s(2677),d=s(72),u=s(2550);class LinePart{constructor(e,o,s){this._linePartBrand=void 0,this.endIndex=e,this.type=o,this.metadata=s}isWhitespace(){return!!(1&this.metadata)}isPseudoAfter(){return!!(4&this.metadata)}}class LineRange{constructor(e,o){this.startOffset=e,this.endOffset=o}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class RenderLineInput{constructor(e,o,s,l,d,g,p,m,f,_,C,b,w,S,y,L,x,k,N){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=o,this.lineContent=s,this.continuesWithWrappedLine=l,this.isBasicASCII=d,this.containsRTL=g,this.fauxIndentLength=p,this.lineTokens=m,this.lineDecorations=f.sort(u.Kp.compare),this.tabSize=_,this.startVisibleColumn=C,this.spaceWidth=b,this.stopRenderingLineAfter=y,this.renderWhitespace="all"===L?4:"boundary"===L?1:"selection"===L?2:"trailing"===L?3:0,this.renderControlCharacters=x,this.fontLigatures=k,this.selectionsOnLine=N&&N.sort(((e,o)=>e.startOffset<o.startOffset?-1:1));const D=Math.abs(S-b),E=Math.abs(w-b);D<E?(this.renderSpaceWidth=S,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=w,this.renderSpaceCharCode=183)}sameSelection(e){if(null===this.selectionsOnLine)return null===e;if(null===e)return!1;if(e.length!==this.selectionsOnLine.length)return!1;for(let o=0;o<this.selectionsOnLine.length;o++)if(!this.selectionsOnLine[o].equals(e[o]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&u.Kp.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class DomPosition{constructor(e,o){this.partIndex=e,this.charIndex=o}}class CharacterMapping{constructor(e,o){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(4294901760&e)>>>16}static getCharIndex(e){return(65535&e)>>>0}setColumnInfo(e,o,s,l){const d=(o<<16|s<<0)>>>0;this._data[e-1]=d,this._absoluteOffsets[e-1]=l+s}getAbsoluteOffset(e){return 0===this._absoluteOffsets.length?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const o=this.charOffsetToPartData(e-1),s=CharacterMapping.getPartIndex(o),l=CharacterMapping.getCharIndex(o);return new DomPosition(s,l)}getColumn(e,o){const s=this.partDataToCharOffset(e.partIndex,o,e.charIndex);return s+1}partDataToCharOffset(e,o,s){if(0===this.length)return 0;const l=(e<<16|s<<0)>>>0;let d=0,u=this.length-1;while(d+1<u){const e=d+u>>>1,o=this._data[e];if(o===l)return e;o>l?u=e:d=e}if(d===u)return d;const g=this._data[d],p=this._data[u];if(g===l)return d;if(p===l)return u;const m=CharacterMapping.getPartIndex(g),f=CharacterMapping.getCharIndex(g),_=CharacterMapping.getPartIndex(p);let C;C=m!==_?o:CharacterMapping.getCharIndex(p);const b=s-f,w=C-s;return b<=w?d:u}}class RenderLineOutput{constructor(e,o,s){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=o,this.containsForeignElements=s}}function renderViewLine(e,o){if(0===e.lineContent.length){if(e.lineDecorations.length>0){o.appendASCIIString("<span>");let s=0,l=0,d=0;for(const g of e.lineDecorations)1!==g.type&&2!==g.type||(o.appendASCIIString('<span class="'),o.appendASCIIString(g.className),o.appendASCIIString('"></span>'),1===g.type&&(d|=1,s++),2===g.type&&(d|=2,l++));o.appendASCIIString("</span>");const u=new CharacterMapping(1,s+l);return u.setColumnInfo(1,s,0,0),new RenderLineOutput(u,!1,d)}return o.appendASCIIString("<span><span></span></span>"),new RenderLineOutput(new CharacterMapping(0,0),!1,0)}return _renderLine(resolveRenderLineInput(e),o)}class RenderLineOutput2{constructor(e,o,s,l){this.characterMapping=e,this.html=o,this.containsRTL=s,this.containsForeignElements=l}}function renderViewLine2(e){const o=(0,d.l$)(1e4),s=renderViewLine(e,o);return new RenderLineOutput2(s.characterMapping,o.build(),s.containsRTL,s.containsForeignElements)}class ResolvedRenderLineInput{constructor(e,o,s,l,d,u,g,p,m,f,_,C,b,w,S){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=o,this.lineContent=s,this.len=l,this.isOverflowing=d,this.parts=u,this.containsForeignElements=g,this.fauxIndentLength=p,this.tabSize=m,this.startVisibleColumn=f,this.containsRTL=_,this.spaceWidth=C,this.renderSpaceCharCode=b,this.renderWhitespace=w,this.renderControlCharacters=S}}function resolveRenderLineInput(e){const o=e.lineContent;let s,l;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<o.length?(s=!0,l=e.stopRenderingLineAfter):(s=!1,l=o.length);let d=transformAndRemoveOverflowing(e.lineTokens,e.fauxIndentLength,l);e.renderControlCharacters&&!e.isBasicASCII&&(d=extractControlCharacters(o,d)),(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace)&&(d=_applyRenderWhitespace(e,o,l,d));let u=0;if(e.lineDecorations.length>0){for(let o=0,s=e.lineDecorations.length;o<s;o++){const s=e.lineDecorations[o];3===s.type||1===s.type?u|=1:2===s.type&&(u|=2)}d=_applyInlineDecorations(o,l,d,e.lineDecorations)}return e.containsRTL||(d=splitLargeTokens(o,d,!e.isBasicASCII||e.fontLigatures)),new ResolvedRenderLineInput(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,o,l,s,d,u,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}function transformAndRemoveOverflowing(e,o,s){const l=[];let d=0;o>0&&(l[d++]=new LinePart(o,"",0));for(let u=0,g=e.getCount();u<g;u++){const g=e.getEndOffset(u);if(g<=o)continue;const p=e.getClassName(u);if(g>=s){l[d++]=new LinePart(s,p,0);break}l[d++]=new LinePart(g,p,0)}return l}function splitLargeTokens(e,o,s){let l=0;const d=[];let u=0;if(s)for(let g=0,p=o.length;g<p;g++){const s=o[g],p=s.endIndex;if(l+50<p){const o=s.type,g=s.metadata;let m=-1,f=l;for(let s=l;s<p;s++)32===e.charCodeAt(s)&&(m=s),-1!==m&&s-f>=50&&(d[u++]=new LinePart(m+1,o,g),f=m+1,m=-1);f!==p&&(d[u++]=new LinePart(p,o,g))}else d[u++]=s;l=p}else for(let g=0,p=o.length;g<p;g++){const e=o[g],s=e.endIndex,p=s-l;if(p>50){const o=e.type,g=e.metadata,m=Math.ceil(p/50);for(let e=1;e<m;e++){const s=l+50*e;d[u++]=new LinePart(s,o,g)}d[u++]=new LinePart(s,o,g)}else d[u++]=e;l=s}return d}function isControlCharacter(e){return e<32?9!==e:127===e||(e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||1564===e)}function extractControlCharacters(e,o){const s=[];let l=new LinePart(0,"",0),d=0;for(const u of o){const o=u.endIndex;for(;d<o;d++){const o=e.charCodeAt(d);isControlCharacter(o)&&(d>l.endIndex&&(l=new LinePart(d,u.type,u.metadata),s.push(l)),l=new LinePart(d+1,"mtkcontrol",u.metadata),s.push(l))}d>l.endIndex&&(l=new LinePart(o,u.type,u.metadata),s.push(l))}return s}function _applyRenderWhitespace(e,o,s,d){const u=e.continuesWithWrappedLine,g=e.fauxIndentLength,p=e.tabSize,m=e.startVisibleColumn,f=e.useMonospaceOptimizations,_=e.selectionsOnLine,C=1===e.renderWhitespace,b=3===e.renderWhitespace,w=e.renderSpaceWidth!==e.spaceWidth,S=[];let y=0,L=0,x=d[L].type,k=d[L].endIndex;const N=d.length;let D,E=!1,T=l.LC(o);-1===T?(E=!0,T=s,D=s):D=l.ow(o);let I=!1,A=0,M=_&&_[A],R=m%p;for(let O=g;O<s;O++){const e=o.charCodeAt(O);let u;if(M&&O>=M.endOffset&&(A++,M=_&&_[A]),O<T||O>D)u=!0;else if(9===e)u=!0;else if(32===e)if(C)if(I)u=!0;else{const e=O+1<s?o.charCodeAt(O+1):0;u=32===e||9===e}else u=!0;else u=!1;if(u&&_&&(u=!!M&&M.startOffset<=O&&M.endOffset>O),u&&b&&(u=E||O>D),I){if(!u||!f&&R>=p){if(w){const e=y>0?S[y-1].endIndex:g;for(let o=e+1;o<=O;o++)S[y++]=new LinePart(o,"mtkw",1)}else S[y++]=new LinePart(O,"mtkw",1);R%=p}}else(O===k||u&&O>g)&&(S[y++]=new LinePart(O,x,0),R%=p);9===e?R=p:l.K7(e)?R+=2:R++,I=u;while(O===k){if(L++,!(L<N))break;x=d[L].type,k=d[L].endIndex}}let P=!1;if(I)if(u&&C){const e=s>0?o.charCodeAt(s-1):0,l=s>1?o.charCodeAt(s-2):0,d=32===e&&32!==l&&9!==l;d||(P=!0)}else P=!0;if(P)if(w){const e=y>0?S[y-1].endIndex:g;for(let o=e+1;o<=s;o++)S[y++]=new LinePart(o,"mtkw",1)}else S[y++]=new LinePart(s,"mtkw",1);else S[y++]=new LinePart(s,x,0);return S}function _applyInlineDecorations(e,o,s,l){l.sort(u.Kp.compare);const d=u.k.normalize(e,l),g=d.length;let p=0;const m=[];let f=0,_=0;for(let u=0,b=s.length;u<b;u++){const e=s[u],o=e.endIndex,l=e.type,C=e.metadata;while(p<g&&d[p].startOffset<o){const e=d[p];if(e.startOffset>_&&(_=e.startOffset,m[f++]=new LinePart(_,l,C)),!(e.endOffset+1<=o)){_=o,m[f++]=new LinePart(_,l+" "+e.className,C|e.metadata);break}_=e.endOffset+1,m[f++]=new LinePart(_,l+" "+e.className,C|e.metadata),p++}o>_&&(_=o,m[f++]=new LinePart(_,l,C))}const C=s[s.length-1].endIndex;if(p<g&&d[p].startOffset===C)while(p<g&&d[p].startOffset===C){const e=d[p];m[f++]=new LinePart(_,e.className,e.metadata),p++}return m}function _renderLine(e,o){const s=e.fontIsMonospace,d=e.canUseHalfwidthRightwardsArrow,u=e.containsForeignElements,g=e.lineContent,p=e.len,m=e.isOverflowing,f=e.parts,_=e.fauxIndentLength,C=e.tabSize,b=e.startVisibleColumn,w=e.containsRTL,S=e.spaceWidth,y=e.renderSpaceCharCode,L=e.renderWhitespace,x=e.renderControlCharacters,k=new CharacterMapping(p+1,f.length);let N=!1,D=0,E=b,T=0,I=0,A=0,M=0;w?o.appendASCIIString('<span dir="ltr">'):o.appendASCIIString("<span>");for(let R=0,P=f.length;R<P;R++){M+=A;const e=f[R],m=e.endIndex,b=e.type,w=0!==L&&e.isWhitespace(),P=w&&!s&&("mtkw"===b||!u),O=D===m&&e.isPseudoAfter();if(T=0,o.appendASCIIString('<span class="'),o.appendASCIIString(P?"mtkz":b),o.appendASCII(34),w){let e=0;{let o=D,s=E;for(;o<m;o++){const l=g.charCodeAt(o),d=0|(9===l?C-s%C:1);e+=d,o>=_&&(s+=d)}}for(P&&(o.appendASCIIString(' style="width:'),o.appendASCIIString(String(S*e)),o.appendASCIIString('px"')),o.appendASCII(62);D<m;D++){k.setColumnInfo(D+1,R-I,T,M),I=0;const e=g.charCodeAt(D);let s;if(9===e){s=C-E%C|0,!d||s>1?o.write1(8594):o.write1(65515);for(let e=2;e<=s;e++)o.write1(160)}else s=1,o.write1(y);T+=s,D>=_&&(E+=s)}A=e}else{let e=0;for(o.appendASCII(62);D<m;D++){k.setColumnInfo(D+1,R-I,T,M),I=0;const s=g.charCodeAt(D);let d=1,u=1;switch(s){case 9:d=C-E%C,u=d;for(let e=1;e<=d;e++)o.write1(160);break;case 32:o.write1(160);break;case 60:o.appendASCIIString("&lt;");break;case 62:o.appendASCIIString("&gt;");break;case 38:o.appendASCIIString("&amp;");break;case 0:x?o.write1(9216):o.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:o.write1(65533);break;default:l.K7(s)&&u++,x&&s<32?o.write1(9216+s):x&&127===s?o.write1(9249):x&&isControlCharacter(s)?(o.appendASCIIString("[U+"),o.appendASCIIString(to4CharHex(s)),o.appendASCIIString("]"),d=8):o.write1(s)}T+=d,e+=d,D>=_&&(E+=u)}A=e}O?I++:I=0,D>=p&&!N&&e.isPseudoAfter()&&(N=!0,k.setColumnInfo(D+1,R,T,M)),o.appendASCIIString("</span>")}return N||k.setColumnInfo(p+1,f.length-1,T,M),m&&o.appendASCIIString("<span>&hellip;</span>"),o.appendASCIIString("</span>"),new RenderLineOutput(k,w,u)}function to4CharHex(e){return e.toString(16).toUpperCase().padStart(4,"0")}},1118:function(e,o,s){"use strict";s.d(o,{$l:function(){return ViewModelDecoration},$t:function(){return InlineDecoration},IP:function(){return ViewLineData},SQ:function(){return OverviewRulerDecorationsGroup},Wx:function(){return SingleLineInlineDecoration},l_:function(){return Viewport},ud:function(){return MinimapLinesRenderingData},wA:function(){return ViewLineRenderingData}});var l=s(2677),d=s(4314);class Viewport{constructor(e,o,s,l){this._viewportBrand=void 0,this.top=0|e,this.left=0|o,this.width=0|s,this.height=0|l}}class MinimapLinesRenderingData{constructor(e,o){this.tabSize=e,this.data=o}}class ViewLineData{constructor(e,o,s,l,d,u,g){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=o,this.minColumn=s,this.maxColumn=l,this.startVisibleColumn=d,this.tokens=u,this.inlineDecorations=g}}class ViewLineRenderingData{constructor(e,o,s,l,d,u,g,p,m,f){this.minColumn=e,this.maxColumn=o,this.content=s,this.continuesWithWrappedLine=l,this.isBasicASCII=ViewLineRenderingData.isBasicASCII(s,u),this.containsRTL=ViewLineRenderingData.containsRTL(s,this.isBasicASCII,d),this.tokens=g,this.inlineDecorations=p,this.tabSize=m,this.startVisibleColumn=f}static isBasicASCII(e,o){return!o||l.$i(e)}static containsRTL(e,o,s){return!(o||!s)&&l.Ut(e)}}class InlineDecoration{constructor(e,o,s){this.range=e,this.inlineClassName=o,this.type=s}}class SingleLineInlineDecoration{constructor(e,o,s,l){this.startOffset=e,this.endOffset=o,this.inlineClassName=s,this.inlineClassNameAffectsLetterSpacing=l}toInlineDecoration(e){return new InlineDecoration(new d.e(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class ViewModelDecoration{constructor(e,o){this._viewModelDecorationBrand=void 0,this.range=e,this.options=o}}class OverviewRulerDecorationsGroup{constructor(e,o,s){this.color=e,this.zIndex=o,this.data=s}static cmp(e,o){return e.zIndex===o.zIndex?e.color<o.color?-1:e.color>o.color?1:0:e.zIndex-o.zIndex}}},665:function(e,o,s){"use strict";s.d(o,{EY:function(){return OverviewRulerZone},Tj:function(){return OverviewZoneManager}});class ColorZone{constructor(e,o,s){this._colorZoneBrand=void 0,this.from=0|e,this.to=0|o,this.colorId=0|s}static compare(e,o){return e.colorId===o.colorId?e.from===o.from?e.to-o.to:e.from-o.from:e.colorId-o.colorId}}class OverviewRulerZone{constructor(e,o,s,l){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=o,this.heightInLines=s,this.color=l,this._colorZone=null}static compare(e,o){return e.color===o.color?e.startLineNumber===o.startLineNumber?e.heightInLines===o.heightInLines?e.endLineNumber-o.endLineNumber:e.heightInLines-o.heightInLines:e.startLineNumber-o.startLineNumber:e.color<o.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class OverviewZoneManager{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(OverviewRulerZone.compare)}setLineHeight(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,o=Math.floor(this._lineHeight),s=Math.floor(this.getCanvasHeight()),l=Math.floor(this._outerHeight),d=s/l,u=Math.floor(4*this._pixelRatio/2),g=[];for(let p=0,m=this._zones.length;p<m;p++){const l=this._zones[p];if(!e){const e=l.getColorZones();if(e){g.push(e);continue}}const m=this._getVerticalOffsetForLine(l.startLineNumber),f=0===l.heightInLines?this._getVerticalOffsetForLine(l.endLineNumber)+o:m+l.heightInLines*o,_=Math.floor(d*m),C=Math.floor(d*f);let b=Math.floor((_+C)/2),w=C-b;w<u&&(w=u),b-w<0&&(b=w),b+w>s&&(b=s-w);const S=l.color;let y=this._color2Id[S];y||(y=++this._lastAssignedId,this._color2Id[S]=y,this._id2Color[y]=S);const L=new ColorZone(b-w,b+w,y);l.setColorZone(L),g.push(L)}return this._colorZonesInvalid=!1,g.sort(ColorZone.compare),g}}},168:function(e,o,s){"use strict";s.d(o,{$t:function(){return isModelDecorationInComment},CU:function(){return ViewModelDecorations},Fd:function(){return isModelDecorationVisible},zg:function(){return isModelDecorationInString}});var l=s(187),d=s(4314),u=s(1118),g=s(4141);class ViewModelDecorations{constructor(e,o,s,l,d){this.editorId=e,this.model=o,this.configuration=s,this._linesCollection=l,this._coordinatesConverter=d,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const o=e.id;let s=this._decorationsCache[o];if(!s){const g=e.range,p=e.options;let m;if(p.isWholeLine){const e=this._coordinatesConverter.convertModelPositionToViewPosition(new l.L(g.startLineNumber,1),0),o=this._coordinatesConverter.convertModelPositionToViewPosition(new l.L(g.endLineNumber,this.model.getLineMaxColumn(g.endLineNumber)),1);m=new d.e(e.lineNumber,e.column,o.lineNumber,o.column)}else m=this._coordinatesConverter.convertModelRangeToViewRange(g,1);s=new u.$l(m,p),this._decorationsCache[o]=s}return s}getDecorationsViewportData(e){let o=null!==this._cachedModelDecorationsResolver;return o=o&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),o||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const o=this._linesCollection.getDecorationsInRange(e,this.editorId,(0,g.$J)(this.configuration.options)),s=e.startLineNumber,l=e.endLineNumber,p=[];let m=0;const f=[];for(let d=s;d<=l;d++)f[d-s]=[];for(let g=0,_=o.length;g<_;g++){const e=o[g],_=e.options;if(!isModelDecorationVisible(this.model,e))continue;const C=this._getOrCreateViewModelDecoration(e),b=C.range;if(p[m++]=C,_.inlineClassName){const e=new u.$t(b,_.inlineClassName,_.inlineClassNameAffectsLetterSpacing?3:0),o=Math.max(s,b.startLineNumber),d=Math.min(l,b.endLineNumber);for(let l=o;l<=d;l++)f[l-s].push(e)}if(_.beforeContentClassName&&s<=b.startLineNumber&&b.startLineNumber<=l){const e=new u.$t(new d.e(b.startLineNumber,b.startColumn,b.startLineNumber,b.startColumn),_.beforeContentClassName,1);f[b.startLineNumber-s].push(e)}if(_.afterContentClassName&&s<=b.endLineNumber&&b.endLineNumber<=l){const e=new u.$t(new d.e(b.endLineNumber,b.endColumn,b.endLineNumber,b.endColumn),_.afterContentClassName,2);f[b.endLineNumber-s].push(e)}}return{decorations:p,inlineDecorations:f}}}function isModelDecorationVisible(e,o){return(!o.options.hideInCommentTokens||!isModelDecorationInComment(e,o))&&(!o.options.hideInStringTokens||!isModelDecorationInString(e,o))}function isModelDecorationInComment(e,o){return testTokensInRange(e,o.range,(e=>1===e))}function isModelDecorationInString(e,o){return testTokensInRange(e,o.range,(e=>2===e))}function testTokensInRange(e,o,s){for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const d=e.getLineTokens(l),u=l===o.startLineNumber,g=l===o.endLineNumber;let p=u?d.findTokenIndexAtOffset(o.startColumn-1):0;while(p<d.getCount()){if(g){const e=d.getStartOffset(p);if(e>o.endColumn-1)break}const e=s(d.getStandardTokenType(p));if(!e)return!1;p++}}return!0}},236:function(e,o,s){"use strict";s.r(o),s.d(o,{SelectionAnchorSet:function(){return C}});var l=s(5152),d=s(9365),u=s(2258),g=s(6830),p=s(3860),m=s(9102),f=s(3580),_=s(8819),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const C=new _.uy("selectionAnchorSet",!1);let b=class SelectionAnchorController{constructor(e,o){this.editor=e,this.selectionAnchorSetContextKey=C.bindTo(o),this.modelChangeListener=e.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}static get(e){return e.getContribution(SelectionAnchorController.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),o=this.decorationId?[this.decorationId]:[],s=this.editor.deltaDecorations(o,[{range:p.Y.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:(new d.W5).appendText((0,f.N)("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=s[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,l.Z9)((0,f.N)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const o=this.editor.getPosition();this.editor.setSelection(p.Y.fromPositions(e.getStartPosition(),o)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};b.ID="editor.contrib.selectionAnchorController",b=__decorate([__param(1,_.i6)],b);class SetSelectionAnchor extends g.R6{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,f.N)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:m.u.editorTextFocus,primary:(0,u.gx)(2089,2080),weight:100}})}run(e,o){var s;return __awaiter(this,void 0,void 0,(function*(){null===(s=b.get(o))||void 0===s||s.setSelectionAnchor()}))}}class GoToSelectionAnchor extends g.R6{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,f.N)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:C})}run(e,o){var s;return __awaiter(this,void 0,void 0,(function*(){null===(s=b.get(o))||void 0===s||s.goToSelectionAnchor()}))}}class SelectFromAnchorToCursor extends g.R6{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,f.N)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:C,kbOpts:{kbExpr:m.u.editorTextFocus,primary:(0,u.gx)(2089,2089),weight:100}})}run(e,o){var s;return __awaiter(this,void 0,void 0,(function*(){null===(s=b.get(o))||void 0===s||s.selectFromAnchorToCursor()}))}}class CancelSelectionAnchor extends g.R6{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,f.N)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:C,kbOpts:{kbExpr:m.u.editorTextFocus,primary:9,weight:100}})}run(e,o){var s;return __awaiter(this,void 0,void 0,(function*(){null===(s=b.get(o))||void 0===s||s.cancelSelectionAnchor()}))}}(0,g._K)(b.ID,b),(0,g.Qr)(SetSelectionAnchor),(0,g.Qr)(GoToSelectionAnchor),(0,g.Qr)(SelectFromAnchorToCursor),(0,g.Qr)(CancelSelectionAnchor)},1387:function(e,o,s){"use strict";s.r(o),s.d(o,{BracketMatchingController:function(){return BracketMatchingController}});var l=s(5393),d=s(5976),u=s(6830),g=s(187),p=s(4314),m=s(3860),f=s(9102),_=s(4973),C=s(2822),b=s(8625),w=s(3580),S=s(4144),y=s(3910),L=s(7781);const x=(0,y.P6G)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},w.N("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class JumpToBracketAction extends u.R6{constructor(){super({id:"editor.action.jumpToBracket",label:w.N("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:f.u.editorTextFocus,primary:3160,weight:100}})}run(e,o){var s;null===(s=BracketMatchingController.get(o))||void 0===s||s.jumpToBracket()}}class SelectToBracketAction extends u.R6{constructor(){super({id:"editor.action.selectToBracket",label:w.N("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,o,s){var l;let d=!0;s&&!1===s.selectBrackets&&(d=!1),null===(l=BracketMatchingController.get(o))||void 0===l||l.selectToBracket(d)}}class BracketsData{constructor(e,o,s){this.position=e,this.brackets=o,this.options=s}}class BracketMatchingController extends d.JT{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new l.pY((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(64),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModel((e=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(64)&&(this._matchBrackets=this._editor.getOption(64),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())}))),this._register(e.onDidBlurEditorWidget((()=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidFocusEditorWidget((()=>{this._updateBracketsSoon.schedule()})))}static get(e){return e.getContribution(BracketMatchingController.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),o=this._editor.getSelections().map((o=>{const s=o.getStartPosition(),l=e.bracketPairs.matchBracket(s);let d=null;if(l)l[0].containsPosition(s)?d=l[1].getStartPosition():l[1].containsPosition(s)&&(d=l[0].getStartPosition());else{const o=e.bracketPairs.findEnclosingBrackets(s);if(o)d=o[0].getStartPosition();else{const o=e.bracketPairs.findNextBracket(s);o&&o.range&&(d=o.range.getStartPosition())}}return d?new m.Y(d.lineNumber,d.column,d.lineNumber,d.column):new m.Y(s.lineNumber,s.column,s.lineNumber,s.column)}));this._editor.setSelections(o),this._editor.revealRange(o[0])}selectToBracket(e){if(!this._editor.hasModel())return;const o=this._editor.getModel(),s=[];this._editor.getSelections().forEach((l=>{const d=l.getStartPosition();let u=o.bracketPairs.matchBracket(d);if(!u&&(u=o.bracketPairs.findEnclosingBrackets(d),!u)){const e=o.bracketPairs.findNextBracket(d);e&&e.range&&(u=o.bracketPairs.matchBracket(e.range.getStartPosition()))}let g=null,f=null;if(u){u.sort(p.e.compareRangesUsingStarts);const[o,s]=u;if(g=e?o.getStartPosition():o.getEndPosition(),f=e?s.getEndPosition():s.getStartPosition(),s.containsPosition(d)){const e=g;g=f,f=e}}g&&f&&s.push(new m.Y(g.lineNumber,g.column,f.lineNumber,f.column))})),s.length>0&&(this._editor.setSelections(s),this._editor.revealRange(s[0]))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();let e=[],o=0;for(const s of this._lastBracketsData){let l=s.brackets;l&&(e[o++]={range:l[0],options:s.options},e[o++]={range:l[1],options:s.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const o=this._editor.getModel(),s=o.getVersionId();let l=[];this._lastVersionId===s&&(l=this._lastBracketsData);let d=[],u=0;for(let g=0,C=e.length;g<C;g++){let o=e[g];o.isEmpty()&&(d[u++]=o.getStartPosition())}d.length>1&&d.sort(g.L.compare);let p=[],m=0,f=0,_=l.length;for(let g=0,C=d.length;g<C;g++){let e=d[g];while(f<_&&l[f].position.isBefore(e))f++;if(f<_&&l[f].position.equals(e))p[m++]=l[f];else{let s=o.bracketPairs.matchBracket(e,20),l=BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;s||"always"!==this._matchBrackets||(s=o.bracketPairs.findEnclosingBrackets(e,20),l=BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),p[m++]=new BracketsData(e,s,l)}}this._lastBracketsData=p,this._lastVersionId=s}}BracketMatchingController.ID="editor.contrib.bracketMatchingController",BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=C.qx.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,L.EN)(x),position:_.sh.Center}}),BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=C.qx.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,u._K)(BracketMatchingController.ID,BracketMatchingController),(0,u.Qr)(SelectToBracketAction),(0,u.Qr)(JumpToBracketAction),(0,L.Ic)(((e,o)=>{const s=e.getColor(b.TC);s&&o.addRule(`.monaco-editor .bracket-match { background-color: ${s}; }`);const l=e.getColor(b.Dl);l&&o.addRule(`.monaco-editor .bracket-match { border: 1px solid ${l}; }`)})),S.BH.appendMenuItem(S.eH.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:w.N({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},4336:function(e,o,s){"use strict";s.r(o);var l=s(6830),d=s(9102),u=s(4314),g=s(3860);class MoveCaretCommand{constructor(e,o){this._selection=e,this._isMovingLeft=o}getEditOperations(e,o){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const s=this._selection.startLineNumber,l=this._selection.startColumn,d=this._selection.endColumn;if((!this._isMovingLeft||1!==l)&&(this._isMovingLeft||d!==e.getLineMaxColumn(s)))if(this._isMovingLeft){const g=new u.e(s,l-1,s,l),p=e.getValueInRange(g);o.addEditOperation(g,null),o.addEditOperation(new u.e(s,d,s,d),p)}else{const g=new u.e(s,d,s,d+1),p=e.getValueInRange(g);o.addEditOperation(g,null),o.addEditOperation(new u.e(s,l,s,l),p)}}computeCursorState(e,o){return this._isMovingLeft?new g.Y(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new g.Y(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var p=s(3580);class MoveCaretAction extends l.R6{constructor(e,o){super(o),this.left=e}run(e,o){if(!o.hasModel())return;const s=[],l=o.getSelections();for(const d of l)s.push(new MoveCaretCommand(d,this.left));o.pushUndoStop(),o.executeCommands(this.id,s),o.pushUndoStop()}}class MoveCaretLeftAction extends MoveCaretAction{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:p.N("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:d.u.writable})}}class MoveCaretRightAction extends MoveCaretAction{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:p.N("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:d.u.writable})}}(0,l.Qr)(MoveCaretLeftAction),(0,l.Qr)(MoveCaretRightAction)},2102:function(e,o,s){"use strict";s.r(o);var l=s(6830),d=s(1329),u=s(839),g=s(4314),p=s(9102),m=s(3580);class TransposeLettersAction extends l.R6{constructor(){super({id:"editor.action.transposeLetters",label:m.N("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:p.u.writable,kbOpts:{kbExpr:p.u.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,o){if(!o.hasModel())return;let s=o.getModel(),l=[],p=o.getSelections();for(let m of p){if(!m.isEmpty())continue;let e=m.startLineNumber,o=m.startColumn,p=s.getLineMaxColumn(e);if(1===e&&(1===o||2===o&&2===p))continue;let f=o===p?m.getPosition():u.o.rightPosition(s,m.getPosition().lineNumber,m.getPosition().column),_=u.o.leftPosition(s,f),C=u.o.leftPosition(s,_),b=s.getValueInRange(g.e.fromPositions(C,_)),w=s.getValueInRange(g.e.fromPositions(_,f)),S=g.e.fromPositions(C,f);l.push(new d.T4(S,w+b))}l.length>0&&(o.pushUndoStop(),o.executeCommands(this.id,l),o.pushUndoStop())}}(0,l.Qr)(TransposeLettersAction)},5833:function(e,o,s){"use strict";s.r(o),s.d(o,{CopyAction:function(){return x},CutAction:function(){return L},PasteAction:function(){return k}});var l=s(6268),d=s(1432),u=s(5715),g=s(6830),p=s(1640),m=s(9102),f=s(3580),_=s(4144),C=s(4972),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const b="9_cutcopypaste",w=d.tY||document.queryCommandSupported("cut"),S=d.tY||document.queryCommandSupported("copy"),y="undefined"!==typeof navigator.clipboard&&!l.isFirefox||document.queryCommandSupported("paste");function registerCommand(e){return e.register(),e}const L=w?registerCommand(new g.AJ({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:d.tY?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:_.eH.MenubarEditMenu,group:"2_ccp",title:f.N({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:_.eH.EditorContext,group:b,title:f.N("actions.clipboard.cutLabel","Cut"),when:m.u.writable,order:1},{menuId:_.eH.CommandPalette,group:"",title:f.N("actions.clipboard.cutLabel","Cut"),order:1},{menuId:_.eH.SimpleEditorContext,group:b,title:f.N("actions.clipboard.cutLabel","Cut"),when:m.u.writable,order:1}]})):void 0,x=S?registerCommand(new g.AJ({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:d.tY?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:_.eH.MenubarEditMenu,group:"2_ccp",title:f.N({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:_.eH.EditorContext,group:b,title:f.N("actions.clipboard.copyLabel","Copy"),order:2},{menuId:_.eH.CommandPalette,group:"",title:f.N("actions.clipboard.copyLabel","Copy"),order:1},{menuId:_.eH.SimpleEditorContext,group:b,title:f.N("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;_.BH.appendMenuItem(_.eH.MenubarEditMenu,{submenu:_.eH.MenubarCopy,title:{value:f.N("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),_.BH.appendMenuItem(_.eH.EditorContext,{submenu:_.eH.EditorContextCopy,title:{value:f.N("copy as","Copy As"),original:"Copy As"},group:b,order:3});const k=y?registerCommand(new g.AJ({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:d.tY?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:_.eH.MenubarEditMenu,group:"2_ccp",title:f.N({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:_.eH.EditorContext,group:b,title:f.N("actions.clipboard.pasteLabel","Paste"),when:m.u.writable,order:4},{menuId:_.eH.CommandPalette,group:"",title:f.N("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:_.eH.SimpleEditorContext,group:b,title:f.N("actions.clipboard.pasteLabel","Paste"),when:m.u.writable,order:4}]})):void 0;class ExecCommandCopyWithSyntaxHighlightingAction extends g.R6{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:f.N("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:m.u.textInputFocus,primary:0,weight:100}})}run(e,o){if(!o.hasModel())return;const s=o.getOption(32);!s&&o.getSelection().isEmpty()||(u.RA.forceCopyWithSyntaxHighlighting=!0,o.focus(),document.execCommand("copy"),u.RA.forceCopyWithSyntaxHighlighting=!1)}}function registerExecCommandImpl(e,o){e&&(e.addImplementation(1e4,"code-editor",((e,s)=>{const l=e.get(p.$).getFocusedCodeEditor();if(l&&l.hasTextFocus()){const e=l.getOption(32),s=l.getSelection();return s&&s.isEmpty()&&!e||document.execCommand(o),!0}return!1})),e.addImplementation(0,"generic-dom",((e,s)=>(document.execCommand(o),!0))))}registerExecCommandImpl(L,"cut"),registerExecCommandImpl(x,"copy"),k&&(k.addImplementation(1e4,"code-editor",((e,o)=>{const s=e.get(p.$),l=e.get(C.p),g=s.getFocusedCodeEditor();if(g&&g.hasTextFocus()){const e=document.execCommand("paste");return!(!e&&d.$L)||(()=>__awaiter(void 0,void 0,void 0,(function*(){const e=yield l.readText();if(""!==e){const o=u.Nl.INSTANCE.get(e);let s=!1,l=null,d=null;o&&(s=g.getOption(32)&&!!o.isFromEmptySelection,l="undefined"!==typeof o.multicursorText?o.multicursorText:null,d=o.mode),g.trigger("keyboard","paste",{text:e,pasteOnNewLine:s,multicursorText:l,mode:d})}})))()}return!1})),k.addImplementation(0,"generic-dom",((e,o)=>(document.execCommand("paste"),!0)))),S&&(0,g.Qr)(ExecCommandCopyWithSyntaxHighlightingAction)},5396:function(e,o,s){"use strict";s.d(o,{Bb:function(){return x},MN:function(){return k},RB:function(){return L},TM:function(){return D},aI:function(){return getCodeActions},bA:function(){return CodeActionItem},uH:function(){return N}});var l=s(9488),d=s(1050),u=s(7301),g=s(5976),p=s(666),m=s(4410),f=s(4314),_=s(3860),C=s(3733),b=s(4565),w=s(535),S=s(6014),y=s(1922),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const L="editor.action.codeAction",x="editor.action.refactor",k="editor.action.sourceAction",N="editor.action.organizeImports",D="editor.action.fixAll";class CodeActionItem{constructor(e,o){this.action=e,this.provider=o}resolve(e){var o;return __awaiter(this,void 0,void 0,(function*(){if((null===(o=this.provider)||void 0===o?void 0:o.resolveCodeAction)&&!this.action.edit){let o;try{o=yield this.provider.resolveCodeAction(this.action,e)}catch(s){(0,u.Cp)(s)}o&&(this.action.edit=o.edit)}return this}))}}class ManagedCodeActionSet extends g.JT{constructor(e,o,s){super(),this.documentation=o,this._register(s),this.allActions=[...e].sort(ManagedCodeActionSet.codeActionsComparator),this.validActions=this.allActions.filter((({action:e})=>!e.disabled))}static codeActionsComparator({action:e},{action:o}){return e.isPreferred&&!o.isPreferred?-1:!e.isPreferred&&o.isPreferred?1:(0,l.Of)(e.diagnostics)?(0,l.Of)(o.diagnostics)?e.diagnostics[0].message.localeCompare(o.diagnostics[0].message):-1:(0,l.Of)(o.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some((({action:e})=>!!e.kind&&S.yN.QuickFix.contains(new S.yN(e.kind))&&!!e.isPreferred))}}const E={actions:[],documentation:void 0};function getCodeActions(e,o,s,d,p,f){var _;const C=d.filter||{},b={only:null===(_=C.include)||void 0===_?void 0:_.value,trigger:d.type},w=new m.YQ(o,f),y=getCodeActionProviders(e,o,C),L=new g.SL,x=y.map((e=>__awaiter(this,void 0,void 0,(function*(){try{p.report(e);const l=yield e.provideCodeActions(o,s,b,w.token);if(l&&L.add(l),w.token.isCancellationRequested)return E;const d=((null===l||void 0===l?void 0:l.actions)||[]).filter((e=>e&&(0,S.Yl)(C,e))),u=getDocumentation(e,d,C.include);return{actions:d.map((o=>new CodeActionItem(o,e))),documentation:u}}catch(l){if((0,u.n2)(l))throw l;return(0,u.Cp)(l),E}})))),k=e.onDidChange((()=>{const s=e.all(o);(0,l.fS)(s,y)||w.cancel()}));return Promise.all(x).then((e=>{const o=(0,l.xH)(e.map((e=>e.actions))),s=(0,l.kX)(e.map((e=>e.documentation)));return new ManagedCodeActionSet(o,s,L)})).finally((()=>{k.dispose(),w.dispose()}))}function getCodeActionProviders(e,o,s){return e.all(o).filter((e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some((e=>(0,S.EU)(s,new S.yN(e))))))}function getDocumentation(e,o,s){if(!e.documentation)return;const l=e.documentation.map((e=>({kind:new S.yN(e.kind),command:e.command})));if(s){let e;for(const o of l)o.kind.contains(s)&&(e?e.kind.contains(o.kind)&&(e=o):e=o);if(e)return null===e||void 0===e?void 0:e.command}for(const d of o)if(d.kind)for(const e of l)if(e.kind.contains(new S.yN(d.kind)))return e.command}b.P0.registerCommand("_executeCodeActionProvider",(function(e,o,s,l,g){return __awaiter(this,void 0,void 0,(function*(){if(!(o instanceof p.o))throw(0,u.b1)();const{codeActionProvider:m}=e.get(y.p),b=e.get(C.q).getModel(o);if(!b)throw(0,u.b1)();const L=_.Y.isISelection(s)?_.Y.liftSelection(s):f.e.isIRange(s)?b.validateRange(s):void 0;if(!L)throw(0,u.b1)();const x="string"===typeof l?new S.yN(l):void 0,k=yield getCodeActions(m,b,L,{type:1,filter:{includeSourceActions:!0,include:x}},w.Ex.None,d.T.None),N=[],D=Math.min(k.validActions.length,"number"===typeof g?g:0);for(let e=0;e<D;e++)N.push(k.validActions[e].resolve(d.T.None));try{return yield Promise.all(N),k.validActions.map((e=>e.action))}finally{setTimeout((()=>k.dispose()),100)}}))}))},3412:function(e,o,s){"use strict";s.d(o,{S5:function(){return AutoFixAction},dW:function(){return CodeActionCommand},Hv:function(){return FixAllAction},o$:function(){return OrganizeImportsAction},E7:function(){return QuickFixAction},pY:function(){return ne},Eb:function(){return RefactorAction},VQ:function(){return SourceAction}});var l=s(1050),d=s(9579),u=s(5976),g=s(2677),p=s(6830),m=s(6007),f=s(9102),_=s(1922),C=s(5396),b=s(7301),w=s(7753),S=s(2065),y=s(5321),L=s(4741),x=s(187),k=s(6014),N=s(5606),D=s(1847),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class CodeActionAction extends L.aU{constructor(e,o){super(e.command?e.command.id:e.title,stripNewlines(e.title),void 0,!e.disabled,o),this.action=e}}function stripNewlines(e){return e.replace(/\r\n|\r|\n/g," ")}let E=class CodeActionMenu extends u.JT{constructor(e,o,s,l,d){super(),this._editor=e,this._delegate=o,this._contextMenuService=s,this._languageFeaturesService=d,this._visible=!1,this._showingActions=this._register(new u.XK),this._keybindingResolver=new CodeActionKeybindingResolver({getKeybindings:()=>l.getKeybindings()})}get isVisible(){return this._visible}show(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=l.includeDisabledActions?o.allActions:o.validActions;if(!d.length)return void(this._visible=!1);if(!this._editor.getDomNode())throw this._visible=!1,(0,b.F0)();this._visible=!0,this._showingActions.value=o;const u=this.getMenuActions(e,d,o.documentation),g=x.L.isIPosition(s)?this._toCoords(s):s||{x:0,y:0},p=this._keybindingResolver.getResolver(),m=this._editor.getOption(115);this._contextMenuService.showContextMenu({domForShadowRoot:m?this._editor.getDomNode():void 0,getAnchor:()=>g,getActions:()=>u,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:e=>e instanceof CodeActionAction?p(e.action):void 0})}))}getMenuActions(e,o,s){var l,d;const toCodeActionAction=e=>new CodeActionAction(e.action,(()=>this._delegate.onSelectCodeAction(e))),u=o.map(toCodeActionAction),g=[...s],p=this._editor.getModel();if(p&&u.length)for(const m of this._languageFeaturesService.codeActionProvider.all(p))m._getAdditionalMenuItems&&g.push(...m._getAdditionalMenuItems({trigger:e.type,only:null===(d=null===(l=e.filter)||void 0===l?void 0:l.include)||void 0===d?void 0:d.value},o.map((e=>e.action))));return g.length&&u.push(new L.Z0,...g.map((e=>toCodeActionAction(new C.bA({title:e.title,command:e},void 0))))),u}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const o=this._editor.getScrolledVisiblePosition(e),s=(0,y.i)(this._editor.getDomNode()),l=s.left+o.left,d=s.top+o.top+o.height;return{x:l,y:d}}};E=__decorate([__param(2,N.i),__param(3,D.d),__param(4,_.p)],E);class CodeActionKeybindingResolver{constructor(e){this._keybindingProvider=e}getResolver(){const e=new d.o((()=>this._keybindingProvider.getKeybindings().filter((e=>CodeActionKeybindingResolver.codeActionCommands.indexOf(e.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let o=e.commandArgs;return e.command===C.uH?o={kind:k.yN.SourceOrganizeImports.value}:e.command===C.TM&&(o={kind:k.yN.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},k.wZ.fromUser(o,{kind:k.yN.None,apply:"never"}))}))));return o=>{if(o.kind){const s=this.bestKeybindingForCodeAction(o,e.getValue());return null===s||void 0===s?void 0:s.resolvedKeybinding}}}bestKeybindingForCodeAction(e,o){if(!e.kind)return;const s=new k.yN(e.kind);return o.filter((e=>e.kind.contains(s))).filter((o=>!o.preferred||e.isPreferred)).reduceRight(((e,o)=>e?e.kind.contains(o.kind)?o:e:o),void 0)}}CodeActionKeybindingResolver.codeActionCommands=[C.Bb,C.RB,C.MN,C.uH,C.TM];var T,I=s(7974),A=s(553),M=s(3046),R=s(4669),P=s(9616),O=s(3580),F=s(3910),B=s(7781),lightBulbWidget_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},lightBulbWidget_param=function(e,o){return function(s,l){o(s,l,e)}};(function(e){e.Hidden={type:0};class Showing{constructor(e,o,s,l){this.actions=e,this.trigger=o,this.editorPosition=s,this.widgetPosition=l,this.type=1}}e.Showing=Showing})(T||(T={}));let W=class LightBulbWidget extends u.JT{constructor(e,o,s,l){super(),this._editor=e,this._quickFixActionId=o,this._preferredFixActionId=s,this._keybindingService=l,this._onClick=this._register(new R.Q5),this.onClick=this._onClick.event,this._state=T.Hidden,this._domNode=document.createElement("div"),this._domNode.className=M.lA.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((e=>{const o=this._editor.getModel();(1!==this.state.type||!o||this.state.editorPosition.lineNumber>=o.getLineCount())&&this.hide()}))),A.o.ignoreTarget(this._domNode),this._register(y.GQ(this._domNode,(e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:o,height:s}=y.i(this._domNode),l=this._editor.getOption(59);let d=Math.floor(l/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(d+=l),this._onClick.fire({x:e.posx,y:o+s+d,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(y.nm(this._domNode,"mouseenter",(e=>{if(1!==(1&e.buttons))return;this.hide();const o=new I.Z;o.startMonitoring(e.target,e.buttons,I.e,(()=>{}),(()=>{o.dispose()}))}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(57)&&!this._editor.getOption(57).enabled&&this.hide()}))),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(e,o,s){if(e.validActions.length<=0)return this.hide();const l=this._editor.getOptions();if(!l.get(57).enabled)return this.hide();const d=this._editor.getModel();if(!d)return this.hide();const{lineNumber:u,column:g}=d.validatePosition(s),p=d.getOptions().tabSize,m=l.get(44),f=d.getLineContent(u),_=(0,P.q)(f,p),C=m.spaceWidth*_>22,isFolded=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let b=u;if(!C)if(u>1&&!isFolded(u-1))b-=1;else if(isFolded(u+1)){if(g*m.spaceWidth<22)return this.hide()}else b+=1;this.state=new T.Showing(e,o,s,{position:{lineNumber:b,column:1},preference:LightBulbWidget._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=T.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(1===this.state.type&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...M.lA.lightBulb.classNamesArray),this._domNode.classList.add(...M.lA.lightbulbAutofix.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(e)return void(this.title=O.N("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",e.getLabel()))}this._domNode.classList.remove(...M.lA.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...M.lA.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);this.title=e?O.N("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):O.N("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};W._posPref=[0],W=lightBulbWidget_decorate([lightBulbWidget_param(3,D.d)],W),(0,B.Ic)(((e,o)=>{var s;const l=null===(s=e.getColor(F.cvW))||void 0===s?void 0:s.transparent(.7),d=e.getColor(F.Fu1);d&&o.addRule(`\n\t\t.monaco-editor .contentWidgets ${M.lA.lightBulb.cssSelector} {\n\t\t\tcolor: ${d};\n\t\t\tbackground-color: ${l};\n\t\t}`);const u=e.getColor(F.sKV);u&&o.addRule(`\n\t\t.monaco-editor .contentWidgets ${M.lA.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${u};\n\t\t\tbackground-color: ${l};\n\t\t}`)}));var V,codeActionUi_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},codeActionUi_param=function(e,o){return function(s,l){o(s,l,e)}},codeActionUi_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))},__classPrivateFieldSet=function(e,o,s,l,d){if("m"===l)throw new TypeError("Private method is not writable");if("a"===l&&!d)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof o?e!==o||!d:!o.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===l?d.call(e,s):d?d.value=s:o.set(e,s),s},__classPrivateFieldGet=function(e,o,s,l){if("a"===s&&!l)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof o?e!==o||!l:!o.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?l:"a"===s?l.call(e):l?l.value:o.get(e)};let H=class CodeActionUi extends u.JT{constructor(e,o,s,l,g){super(),this._editor=e,this.delegate=l,this._activeCodeActions=this._register(new u.XK),V.set(this,!1),this._codeActionWidget=new d.o((()=>this._register(g.createInstance(E,this._editor,{onSelectCodeAction:e=>codeActionUi_awaiter(this,void 0,void 0,(function*(){this.delegate.applyCodeAction(e,!0)}))})))),this._lightBulbWidget=new d.o((()=>{const e=this._register(g.createInstance(W,this._editor,o,s));return this._register(e.onClick((e=>this.showCodeActionList(e.trigger,e.actions,e,{includeDisabledActions:!1})))),e}))}dispose(){__classPrivateFieldSet(this,V,!0,"f"),super.dispose()}update(e){var o,s,l,d,u;return codeActionUi_awaiter(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(o=this._lightBulbWidget.rawValue)||void 0===o||o.hide());let g;try{g=yield e.actions}catch(p){return void(0,b.dL)(p)}if(!__classPrivateFieldGet(this,V,"f"))if(this._lightBulbWidget.getValue().update(g,e.trigger,e.position),1===e.trigger.type){if(null===(s=e.trigger.filter)||void 0===s?void 0:s.include){const o=this.tryGetValidActionToApply(e.trigger,g);if(o){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(o,!1)}finally{g.dispose()}return}if(e.trigger.context){const o=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,g);if(o&&o.action.disabled)return null===(l=w.O.get(this._editor))||void 0===l||l.showMessage(o.action.disabled,e.trigger.context.position),void g.dispose()}}const o=!!(null===(d=e.trigger.filter)||void 0===d?void 0:d.include);if(e.trigger.context&&(!g.allActions.length||!o&&!g.validActions.length))return null===(u=w.O.get(this._editor))||void 0===u||u.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=g,void g.dispose();this._activeCodeActions.value=g,this._codeActionWidget.getValue().show(e.trigger,g,e.position,{includeDisabledActions:o})}else this._codeActionWidget.getValue().isVisible?g.dispose():this._activeCodeActions.value=g}))}getInvalidActionThatWouldHaveBeenApplied(e,o){if(o.allActions.length)return"first"===e.autoApply&&0===o.validActions.length||"ifSingle"===e.autoApply&&1===o.allActions.length?o.allActions.find((({action:e})=>e.disabled)):void 0}tryGetValidActionToApply(e,o){if(o.validActions.length)return"first"===e.autoApply&&o.validActions.length>0||"ifSingle"===e.autoApply&&1===o.validActions.length?o.validActions[0]:void 0}showCodeActionList(e,o,s,l){return codeActionUi_awaiter(this,void 0,void 0,(function*(){this._codeActionWidget.getValue().show(e,o,s,l)}))}};V=new WeakMap,H=codeActionUi_decorate([codeActionUi_param(4,S.TG)],H);var z,U=s(4565),K=s(8819),j=s(8674),G=s(9422),q=s(535),Q=s(829),Z=s(5393),Y=s(5935),J=s(4314),codeActionModel_classPrivateFieldGet=function(e,o,s,l){if("a"===s&&!l)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof o?e!==o||!l:!o.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?l:"a"===s?l.call(e):l?l.value:o.get(e)},codeActionModel_classPrivateFieldSet=function(e,o,s,l,d){if("m"===l)throw new TypeError("Private method is not writable");if("a"===l&&!d)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof o?e!==o||!d:!o.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===l?d.call(e,s):d?d.value=s:o.set(e,s),s};const X=new K.uy("supportedCodeAction","");class CodeActionOracle extends u.JT{constructor(e,o,s,l=250){super(),this._editor=e,this._markerService=o,this._signalChange=s,this._delay=l,this._autoTriggerTimer=this._register(new Z._F),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._onCursorChange())))}trigger(e){const o=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,o)}_onMarkerChanges(e){const o=this._editor.getModel();o&&e.some((e=>(0,Y.Xy)(e,o.uri)))&&this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2})}),this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2})}),this._delay)}_getRangeOfMarker(e){const o=this._editor.getModel();if(o)for(const s of this._markerService.read({resource:o.uri})){const l=o.validateRange(s);if(J.e.intersectRanges(l,e))return J.e.lift(l)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const o=this._editor.getModel(),s=this._editor.getSelection();if(s.isEmpty()&&2===e.type){const{lineNumber:e,column:l}=s.getPosition(),d=o.getLineContent(e);if(0===d.length)return;if(1===l){if(/\s/.test(d[0]))return}else if(l===o.getLineMaxColumn(e)){if(/\s/.test(d[d.length-1]))return}else if(/\s/.test(d[l-2])&&/\s/.test(d[l-1]))return}return s}_createEventAndSignalChange(e,o){const s=this._editor.getModel();if(!o||!s)return void this._signalChange(void 0);const l=this._getRangeOfMarker(o),d=l?l.getStartPosition():o.getStartPosition(),u={trigger:e,selection:o,position:d};return this._signalChange(u),u}}var ee;(function(e){e.Empty={type:0};class Triggered{constructor(e,o,s,l){this.trigger=e,this.rangeOrSelection=o,this.position=s,this._cancellablePromise=l,this.type=1,this.actions=l.catch((e=>{if((0,b.n2)(e))return te;throw e}))}cancel(){this._cancellablePromise.cancel()}}e.Triggered=Triggered})(ee||(ee={}));const te={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class CodeActionModel extends u.JT{constructor(e,o,s,l,d){super(),this._editor=e,this._registry=o,this._markerService=s,this._progressService=d,this._codeActionOracle=this._register(new u.XK),this._state=ee.Empty,this._onDidChangeState=this._register(new R.Q5),this.onDidChangeState=this._onDidChangeState.event,z.set(this,!1),this._supportedCodeActions=X.bindTo(l),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(this._registry.onDidChange((()=>this._update()))),this._update()}dispose(){codeActionModel_classPrivateFieldGet(this,z,"f")||(codeActionModel_classPrivateFieldSet(this,z,!0,"f"),super.dispose(),this.setState(ee.Empty,!0))}_update(){if(codeActionModel_classPrivateFieldGet(this,z,"f"))return;this._codeActionOracle.value=void 0,this.setState(ee.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(81)){const o=[];for(const s of this._registry.all(e))Array.isArray(s.providedCodeActionKinds)&&o.push(...s.providedCodeActionKinds);this._supportedCodeActions.set(o.join(" ")),this._codeActionOracle.value=new CodeActionOracle(this._editor,this._markerService,(o=>{var s;if(!o)return void this.setState(ee.Empty);const l=(0,Z.PG)((s=>(0,C.aI)(this._registry,e,o.selection,o.trigger,q.Ex.None,s)));1===o.trigger.type&&(null===(s=this._progressService)||void 0===s||s.showWhile(l,250)),this.setState(new ee.Triggered(o.trigger,o.selection,o.position,l))}),void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,o){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,o||codeActionModel_classPrivateFieldGet(this,z,"f")||this._onDidChangeState.fire(e))}}z=new WeakMap;var codeActionCommands_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},codeActionCommands_param=function(e,o){return function(s,l){o(s,l,e)}},codeActionCommands_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function contextKeyForSupportedActions(e){return K.Ao.regex(X.keys()[0],new RegExp("(\\s|^)"+(0,g.ec)(e.value)+"\\b"))}const ie={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:O.N("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:O.N("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[O.N("args.schema.apply.first","Always apply the first returned code action."),O.N("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),O.N("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:O.N("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let ne=class QuickFixController extends u.JT{constructor(e,o,s,l,u,g){super(),this._instantiationService=u,this._editor=e,this._model=this._register(new CodeActionModel(this._editor,g.codeActionProvider,o,s,l)),this._register(this._model.onDidChangeState((e=>this.update(e)))),this._ui=new d.o((()=>this._register(new H(e,QuickFixAction.Id,AutoFixAction.Id,{applyCodeAction:(e,o)=>codeActionCommands_awaiter(this,void 0,void 0,(function*(){try{yield this._applyCodeAction(e)}finally{o&&this._trigger({type:2,filter:{}})}}))},this._instantiationService))))}static get(e){return e.getContribution(QuickFixController.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,o,s){return this._ui.getValue().showCodeActionList(e,o,s,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,o,s){var l;if(!this._editor.hasModel())return;null===(l=w.O.get(this._editor))||void 0===l||l.closeMessage();const d=this._editor.getPosition();this._trigger({type:1,filter:o,autoApply:s,context:{notAvailableMessage:e,position:d}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(applyCodeAction,e,this._editor)}};function applyCodeAction(e,o,s){return codeActionCommands_awaiter(this,void 0,void 0,(function*(){const d=e.get(m.vu),u=e.get(U.Hy),g=e.get(Q.b),p=e.get(G.lT);if(g.publicLog2("codeAction.applyCodeAction",{codeActionTitle:o.action.title,codeActionKind:o.action.kind,codeActionIsPreferred:!!o.action.isPreferred}),yield o.resolve(l.T.None),o.action.edit&&(yield d.apply(m.fo.convert(o.action.edit),{editor:s,label:o.action.title})),o.action.command)try{yield u.executeCommand(o.action.command.id,...o.action.command.arguments||[])}catch(f){const e=asMessage(f);p.error("string"===typeof e?e:O.N("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}))}function asMessage(e){return"string"===typeof e?e:e instanceof Error&&"string"===typeof e.message?e.message:void 0}function triggerCodeActionsForEditorSelection(e,o,s,l){if(e.hasModel()){const d=ne.get(e);d&&d.manualTriggerAtCurrentPosition(o,s,l)}}ne.ID="editor.contrib.quickFixController",ne=codeActionCommands_decorate([codeActionCommands_param(1,j.lT),codeActionCommands_param(2,K.i6),codeActionCommands_param(3,q.ek),codeActionCommands_param(4,S.TG),codeActionCommands_param(5,_.p)],ne);class QuickFixAction extends p.R6{constructor(){super({id:QuickFixAction.Id,label:O.N("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:K.Ao.and(f.u.writable,f.u.hasCodeActionsProvider),kbOpts:{kbExpr:f.u.editorTextFocus,primary:2132,weight:100}})}run(e,o){return triggerCodeActionsForEditorSelection(o,O.N("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}QuickFixAction.Id="editor.action.quickFix";class CodeActionCommand extends p._l{constructor(){super({id:C.RB,precondition:K.Ao.and(f.u.writable,f.u.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:ie}]}})}runEditorCommand(e,o,s){const l=k.wZ.fromUser(s,{kind:k.yN.Empty,apply:"ifSingle"});return triggerCodeActionsForEditorSelection(o,"string"===typeof(null===s||void 0===s?void 0:s.kind)?l.preferred?O.N("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",s.kind):O.N("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",s.kind):l.preferred?O.N("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):O.N("editor.action.codeAction.noneMessage","No code actions available"),{include:l.kind,includeSourceActions:!0,onlyIncludePreferredActions:l.preferred},l.apply)}}class RefactorAction extends p.R6{constructor(){super({id:C.Bb,label:O.N("refactor.label","Refactor..."),alias:"Refactor...",precondition:K.Ao.and(f.u.writable,f.u.hasCodeActionsProvider),kbOpts:{kbExpr:f.u.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:K.Ao.and(f.u.writable,contextKeyForSupportedActions(k.yN.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:ie}]}})}run(e,o,s){const l=k.wZ.fromUser(s,{kind:k.yN.Refactor,apply:"never"});return triggerCodeActionsForEditorSelection(o,"string"===typeof(null===s||void 0===s?void 0:s.kind)?l.preferred?O.N("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",s.kind):O.N("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",s.kind):l.preferred?O.N("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):O.N("editor.action.refactor.noneMessage","No refactorings available"),{include:k.yN.Refactor.contains(l.kind)?l.kind:k.yN.None,onlyIncludePreferredActions:l.preferred},l.apply)}}class SourceAction extends p.R6{constructor(){super({id:C.MN,label:O.N("source.label","Source Action..."),alias:"Source Action...",precondition:K.Ao.and(f.u.writable,f.u.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:K.Ao.and(f.u.writable,contextKeyForSupportedActions(k.yN.Source))},description:{description:"Source Action...",args:[{name:"args",schema:ie}]}})}run(e,o,s){const l=k.wZ.fromUser(s,{kind:k.yN.Source,apply:"never"});return triggerCodeActionsForEditorSelection(o,"string"===typeof(null===s||void 0===s?void 0:s.kind)?l.preferred?O.N("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",s.kind):O.N("editor.action.source.noneMessage.kind","No source actions for '{0}' available",s.kind):l.preferred?O.N("editor.action.source.noneMessage.preferred","No preferred source actions available"):O.N("editor.action.source.noneMessage","No source actions available"),{include:k.yN.Source.contains(l.kind)?l.kind:k.yN.None,includeSourceActions:!0,onlyIncludePreferredActions:l.preferred},l.apply)}}class OrganizeImportsAction extends p.R6{constructor(){super({id:C.uH,label:O.N("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:K.Ao.and(f.u.writable,contextKeyForSupportedActions(k.yN.SourceOrganizeImports)),kbOpts:{kbExpr:f.u.editorTextFocus,primary:1581,weight:100}})}run(e,o){return triggerCodeActionsForEditorSelection(o,O.N("editor.action.organize.noneMessage","No organize imports action available"),{include:k.yN.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class FixAllAction extends p.R6{constructor(){super({id:C.TM,label:O.N("fixAll.label","Fix All"),alias:"Fix All",precondition:K.Ao.and(f.u.writable,contextKeyForSupportedActions(k.yN.SourceFixAll))})}run(e,o){return triggerCodeActionsForEditorSelection(o,O.N("fixAll.noneMessage","No fix all action available"),{include:k.yN.SourceFixAll,includeSourceActions:!0},"ifSingle")}}class AutoFixAction extends p.R6{constructor(){super({id:AutoFixAction.Id,label:O.N("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:K.Ao.and(f.u.writable,contextKeyForSupportedActions(k.yN.QuickFix)),kbOpts:{kbExpr:f.u.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,o){return triggerCodeActionsForEditorSelection(o,O.N("editor.action.autoFix.noneMessage","No auto fixes available"),{include:k.yN.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}AutoFixAction.Id="editor.action.autoFix"},9575:function(e,o,s){"use strict";s.r(o);var l=s(6830),d=s(3412);(0,l._K)(d.pY.ID,d.pY),(0,l.Qr)(d.E7),(0,l.Qr)(d.Eb),(0,l.Qr)(d.VQ),(0,l.Qr)(d.o$),(0,l.Qr)(d.S5),(0,l.Qr)(d.Hv),(0,l.fK)(new d.dW)},6014:function(e,o,s){"use strict";s.d(o,{EU:function(){return mayIncludeActionsOfKind},Yl:function(){return filtersAction},wZ:function(){return CodeActionCommandArgs},yN:function(){return CodeActionKind}});class CodeActionKind{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+CodeActionKind.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new CodeActionKind(this.value+CodeActionKind.sep+e)}}function mayIncludeActionsOfKind(e,o){return!(e.include&&!e.include.intersects(o))&&((!e.excludes||!e.excludes.some((s=>excludesAction(o,s,e.include))))&&!(!e.includeSourceActions&&CodeActionKind.Source.contains(o)))}function filtersAction(e,o){const s=o.kind?new CodeActionKind(o.kind):void 0;return!!(!e.include||s&&e.include.contains(s))&&(!(e.excludes&&s&&e.excludes.some((o=>excludesAction(s,o,e.include))))&&(!(!e.includeSourceActions&&s&&CodeActionKind.Source.contains(s))&&!(e.onlyIncludePreferredActions&&!o.isPreferred)))}function excludesAction(e,o,s){return!!o.contains(e)&&(!s||!o.contains(s))}CodeActionKind.sep=".",CodeActionKind.None=new CodeActionKind("@@none@@"),CodeActionKind.Empty=new CodeActionKind(""),CodeActionKind.QuickFix=new CodeActionKind("quickfix"),CodeActionKind.Refactor=new CodeActionKind("refactor"),CodeActionKind.Source=new CodeActionKind("source"),CodeActionKind.SourceOrganizeImports=CodeActionKind.Source.append("organizeImports"),CodeActionKind.SourceFixAll=CodeActionKind.Source.append("fixAll");class CodeActionCommandArgs{constructor(e,o,s){this.kind=e,this.apply=o,this.preferred=s}static fromUser(e,o){return e&&"object"===typeof e?new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(e,o.kind),CodeActionCommandArgs.getApplyFromUser(e,o.apply),CodeActionCommandArgs.getPreferredUser(e)):new CodeActionCommandArgs(o.kind,o.apply,!1)}static getApplyFromUser(e,o){switch("string"===typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return o}}static getKindFromUser(e,o){return"string"===typeof e.kind?new CodeActionKind(e.kind):o}static getPreferredUser(e){return"boolean"===typeof e.preferred&&e.preferred}}},8334:function(e,o,s){"use strict";s.r(o),s.d(o,{CodeLensContribution:function(){return V}});var l=s(5321),d=s(5393),u=s(7301),g=s(9954),p=s(5976),m=s(3407),f=s(6830),_=s(4141),C=s(9102),b=s(1050),w=s(8401),S=s(666),y=s(3733),L=s(4565),x=s(1922),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class CodeLensModel{constructor(){this.lenses=[],this._disposables=new p.SL}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,o){this._disposables.add(e);for(const s of e.lenses)this.lenses.push({symbol:s,provider:o})}}function getCodeLensModel(e,o,s){return __awaiter(this,void 0,void 0,(function*(){const l=e.ordered(o),d=new Map,g=new CodeLensModel,p=l.map(((e,l)=>__awaiter(this,void 0,void 0,(function*(){d.set(e,l);try{const l=yield Promise.resolve(e.provideCodeLenses(o,s));l&&g.add(l,e)}catch(p){(0,u.Cp)(p)}}))));return yield Promise.all(p),g.lenses=g.lenses.sort(((e,o)=>e.symbol.range.startLineNumber<o.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>o.symbol.range.startLineNumber?1:d.get(e.provider)<d.get(o.provider)?-1:d.get(e.provider)>d.get(o.provider)?1:e.symbol.range.startColumn<o.symbol.range.startColumn?-1:e.symbol.range.startColumn>o.symbol.range.startColumn?1:0)),g}))}L.P0.registerCommand("_executeCodeLensProvider",(function(e,...o){let[s,l]=o;(0,w.p_)(S.o.isUri(s)),(0,w.p_)("number"===typeof l||!l);const{codeLensProvider:d}=e.get(x.p),g=e.get(y.q).getModel(s);if(!g)throw(0,u.b1)();const m=[],f=new p.SL;return getCodeLensModel(d,g,b.T.None).then((e=>{f.add(e);let o=[];for(const s of e.lenses)void 0===l||null===l||Boolean(s.symbol.command)?m.push(s.symbol):l-- >0&&s.provider.resolveCodeLens&&o.push(Promise.resolve(s.provider.resolveCodeLens(g,s.symbol,b.T.None)).then((e=>m.push(e||s.symbol))));return Promise.all(o)})).then((()=>m)).finally((()=>{setTimeout((()=>f.dispose()),100)}))}));var k=s(8289),N=s(3702),D=s(4314),E=s(5026),T=s(2065),I=s(7060),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const A=(0,T.yh)("ICodeLensCache");class CacheItem{constructor(e,o){this.lineCount=e,this.data=o}}let M=class CodeLensCache{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new N.z6(20,.75);const o="codelens/cache";(0,d.To)((()=>e.remove(o,1)));const s="codelens/cache2",l=e.get(s,1,"{}");this._deserialize(l),(0,k.I)(e.onWillSaveState)((o=>{o.reason===I.fk.SHUTDOWN&&e.store(s,this._serialize(),1,1)}))}put(e,o){const s=o.lenses.map((e=>{var o;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(o=e.symbol.command)||void 0===o?void 0:o.title}}})),l=new CodeLensModel;l.add({lenses:s,dispose:()=>{}},this._fakeProvider);const d=new CacheItem(e.getLineCount(),l);this._cache.set(e.uri.toString(),d)}get(e){const o=this._cache.get(e.uri.toString());return o&&o.lineCount===e.getLineCount()?o.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[o,s]of this._cache){const l=new Set;for(const e of s.data.lenses)l.add(e.symbol.range.startLineNumber);e[o]={lineCount:s.lineCount,lines:[...l.values()]}}return JSON.stringify(e)}_deserialize(e){try{const o=JSON.parse(e);for(const e in o){const s=o[e],l=[];for(const e of s.lines)l.push({range:new D.e(e,1,e,11)});const d=new CodeLensModel;d.add({lenses:l,dispose(){}},this._fakeProvider),this._cache.set(e,new CacheItem(s.lineCount,d))}}catch(o){}}};M=__decorate([__param(0,I.Uy)],M),(0,E.z)(A,M);var R=s(6811),P=s(2822);class CodeLensViewZone{constructor(e,o,s){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=o,this._onHeight=s,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class CodeLensContentWidget{constructor(e,o,s){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+CodeLensContentWidget._idPool++,this.updatePosition(s),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${o}`}withCommands(e,o){this._commands.clear();let s=[],d=!1;for(let u=0;u<e.length;u++){const o=e[u];if(o&&(d=!0,o.command)){const d=(0,R.T)(o.command.title.trim());o.command.id?(s.push(l.$("a",{id:String(u),title:o.command.tooltip},...d)),this._commands.set(String(u),o.command)):s.push(l.$("span",{title:o.command.tooltip},...d)),u+1<e.length&&s.push(l.$("span",void 0," | "))}}d?(l.mc(this._domNode,...s),this._isEmpty&&o&&this._domNode.classList.add("fadein"),this._isEmpty=!1):l.mc(this._domNode,l.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const o=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:o},preference:[1]}}getPosition(){return this._widgetPosition||null}}CodeLensContentWidget._idPool=0;class CodeLensHelper{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,o){this._addDecorations.push(e),this._addDecorationsCallbacks.push(o)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let o=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let s=0,l=o.length;s<l;s++)this._addDecorationsCallbacks[s](o[s])}}class CodeLensWidget{constructor(e,o,s,l,d,u,g){let p;this._isDisposed=!1,this._editor=o,this._className=s,this._data=e,this._decorationIds=[];let m=[];this._data.forEach(((e,o)=>{e.symbol.command&&m.push(e.symbol),l.addDecoration({range:e.symbol.range,options:P.qx.EMPTY},(e=>this._decorationIds[o]=e)),p=p?D.e.plusRange(p,e.symbol.range):D.e.lift(e.symbol.range)})),this._viewZone=new CodeLensViewZone(p.startLineNumber-1,u,g),this._viewZoneId=d.addZone(this._viewZone),m.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(m,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new CodeLensContentWidget(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,o){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],o&&o.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,o)=>{const s=this._editor.getModel().getDecorationRange(e),l=this._data[o].symbol;return!(!s||D.e.isEmpty(l.range)!==s.isEmpty())}))}updateCodeLensSymbols(e,o){this._decorationIds.forEach(o.removeDecoration,o),this._decorationIds=[],this._data=e,this._data.forEach(((e,s)=>{o.addDecoration({range:e.symbol.range,options:P.qx.EMPTY},(e=>this._decorationIds[s]=e))}))}updateHeight(e,o){this._viewZone.heightInPx=e,o.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let o=0;o<this._decorationIds.length;o++){const s=e.getDecorationRange(this._decorationIds[o]);s&&(this._data[o].symbol.range=s)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let o=0;o<this._data.length;o++){const s=e[o];if(s){const{symbol:e}=this._data[o];e.command=s.command||e.command}}}getCommand(e){var o;return null===(o=this._contentWidget)||void 0===o?void 0:o.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const o=this._editor.getModel().getDecorationRange(this._decorationIds[0]);o&&(this._viewZone.afterLineNumber=o.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(o.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var O=s(3580),F=s(9422),B=s(1157),W=s(8191),codelensController_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},codelensController_param=function(e,o){return function(s,l){o(s,l,e)}},codelensController_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let V=class CodeLensContribution{constructor(e,o,s,u,m,f){this._editor=e,this._languageFeaturesService=o,this._commandService=u,this._notificationService=m,this._codeLensCache=f,this._disposables=new p.SL,this._localToDispose=new p.SL,this._lenses=[],this._oldCodeLensModels=new p.SL,this._provideCodeLensDebounce=s.for(o.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=s.for(o.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new d.pY((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(44)||e.hasChanged(16)||e.hasChanged(15))&&this._updateLensStyle(),e.hasChanged(14)&&this._onModelChange()}))),this._disposables.add(o.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,g.vp)(this._editor.getId()).toString(16),this._styleElement=l.dS(l.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e,o=this._editor.getOption(16);return!o||o<5?(o=.9*this._editor.getOption(46)|0,e=this._editor.getOption(59)):e=o*Math.max(1.3,this._editor.getOption(59)/this._editor.getOption(46))|0,{codeLensHeight:e,fontSize:o}}_updateLensStyle(){const{codeLensHeight:e,fontSize:o}=this._getLayoutInfo(),s=this._editor.getOption(15),l=this._editor.getOption(44),d=`--codelens-font-family${this._styleClassName}`,u=`--codelens-font-features${this._styleClassName}`;let g=`\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${o}px; padding-right: ${Math.round(.5*o)}px; font-feature-settings: var(${u}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${o}px; }\n\t\t`;s&&(g+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${d}), ${_.hL.fontFamily}}`),this._styleElement.textContent=g,this._editor.getContainerDomNode().style.setProperty(d,null!==s&&void 0!==s?s:"inherit"),this._editor.getContainerDomNode().style.setProperty(u,l.fontFeatureSettings),this._editor.changeViewZones((o=>{for(let s of this._lenses)s.updateHeight(e,o)}))}_localDispose(){var e,o,s;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(o=this._resolveCodeLensesPromise)||void 0===o||o.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(s=this._currentCodeLensModel)||void 0===s||s.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(14))return;const o=this._codeLensCache.get(e);if(o&&this._renderCodeLensSymbols(o),!this._languageFeaturesService.codeLensProvider.has(e))return void(o&&this._localToDispose.add((0,d.Vg)((()=>{const s=this._codeLensCache.get(e);o===s&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4)));for(const l of this._languageFeaturesService.codeLensProvider.all(e))if("function"===typeof l.onDidChange){let e=l.onDidChange((()=>s.schedule()));this._localToDispose.add(e)}const s=new d.pY((()=>{var o;const l=Date.now();null===(o=this._getCodeLensModelPromise)||void 0===o||o.cancel(),this._getCodeLensModelPromise=(0,d.PG)((o=>getCodeLensModel(this._languageFeaturesService.codeLensProvider,e,o))),this._getCodeLensModelPromise.then((o=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=o,this._codeLensCache.put(e,o);const d=this._provideCodeLensDebounce.update(e,Date.now()-l);s.delay=d,this._renderCodeLensSymbols(o),this._resolveCodeLensesInViewportSoon()}),u.dL)}),this._provideCodeLensDebounce.get(e));this._localToDispose.add(s),this._localToDispose.add((0,p.OF)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._editor.changeDecorations((e=>{this._editor.changeViewZones((o=>{let s=[],l=-1;this._lenses.forEach((e=>{e.isValid()&&l!==e.getLineNumber()?(e.update(o),l=e.getLineNumber()):s.push(e)}));let d=new CodeLensHelper;s.forEach((e=>{e.dispose(d,o),this._lenses.splice(this._lenses.indexOf(e),1)})),d.commit(e)}))})),s.schedule()}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{s.schedule()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,p.OF)((()=>{if(this._editor.getModel()){const e=m.Z.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((o=>{this._disposeAllLenses(e,o)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let o=e.target.element;if("SPAN"===(null===o||void 0===o?void 0:o.tagName)&&(o=o.parentElement),"A"===(null===o||void 0===o?void 0:o.tagName))for(const s of this._lenses){let e=s.getCommand(o);if(e){this._commandService.executeCommand(e.id,...e.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),s.schedule()}_disposeAllLenses(e,o){const s=new CodeLensHelper;for(const l of this._lenses)l.dispose(s,o);e&&s.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let o,s=this._editor.getModel().getLineCount(),l=[];for(let g of e.lenses){let e=g.symbol.range.startLineNumber;e<1||e>s||(o&&o[o.length-1].symbol.range.startLineNumber===e?o.push(g):(o=[g],l.push(o)))}const d=m.Z.capture(this._editor),u=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((o=>{const s=new CodeLensHelper;let d=0,g=0;while(g<l.length&&d<this._lenses.length){let e=l[g][0].symbol.range.startLineNumber,p=this._lenses[d].getLineNumber();p<e?(this._lenses[d].dispose(s,o),this._lenses.splice(d,1)):p===e?(this._lenses[d].updateCodeLensSymbols(l[g],s),g++,d++):(this._lenses.splice(d,0,new CodeLensWidget(l[g],this._editor,this._styleClassName,s,o,u.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),d++,g++)}while(d<this._lenses.length)this._lenses[d].dispose(s,o),this._lenses.splice(d,1);while(g<l.length)this._lenses.push(new CodeLensWidget(l[g],this._editor,this._styleClassName,s,o,u.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),g++;s.commit(e)}))})),d.restore(this._editor)}_resolveCodeLensesInViewportSoon(){const e=this._editor.getModel();e&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const o=this._editor.getModel();if(!o)return;const s=[],l=[];if(this._lenses.forEach((e=>{const d=e.computeIfNecessary(o);d&&(s.push(d),l.push(e))})),0===s.length)return;const g=Date.now(),p=(0,d.PG)((e=>{const d=s.map(((s,d)=>{const g=new Array(s.length),p=s.map(((s,l)=>s.symbol.command||"function"!==typeof s.provider.resolveCodeLens?(g[l]=s.symbol,Promise.resolve(void 0)):Promise.resolve(s.provider.resolveCodeLens(o,s.symbol,e)).then((e=>{g[l]=e}),u.Cp)));return Promise.all(p).then((()=>{e.isCancellationRequested||l[d].isDisposed()||l[d].updateCommands(g)}))}));return Promise.all(d)}));this._resolveCodeLensesPromise=p,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDebounce.update(o,Date.now()-g);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(o,this._currentCodeLensModel),this._oldCodeLensModels.clear(),p===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,u.dL)(e),p===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getModel(){return this._currentCodeLensModel}};V.ID="css.editor.codeLens",V=codelensController_decorate([codelensController_param(1,x.p),codelensController_param(2,W.A),codelensController_param(3,L.Hy),codelensController_param(4,F.lT),codelensController_param(5,A)],V),(0,f._K)(V.ID,V),(0,f.Qr)(class ShowLensesInCurrentLine extends f.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:C.u.hasCodeLensProvider,label:(0,O.N)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,o){return codelensController_awaiter(this,void 0,void 0,(function*(){if(!o.hasModel())return;const s=e.get(B.eJ),l=e.get(L.Hy),d=e.get(F.lT),u=o.getSelection().positionLineNumber,g=o.getContribution(V.ID);if(!g)return;const p=g.getModel();if(!p)return;const m=[];for(const e of p.lenses)e.symbol.command&&e.symbol.range.startLineNumber===u&&m.push({label:e.symbol.command.title,command:e.symbol.command});if(0===m.length)return;const f=yield s.pick(m,{canPickMany:!1});if(f){if(p.isDisposed)return yield l.executeCommand(this.id);try{yield l.executeCommand(f.command.id,...f.command.arguments||[])}catch(_){d.error(_)}}}))}})},9079:function(e,o,s){"use strict";s.r(o),s.d(o,{ColorContribution:function(){return ColorContribution}});var l=s(5976),d=s(6830),u=s(4314),g=s(5393),p=s(1264),m=s(7301),f=s(4013),_=s(2677),C=s(9994),b=s(2822),w=s(8191),S=s(1922),y=s(1050),L=s(666),x=s(3733),k=s(4565);function getColors(e,o,s){const l=[],d=e.ordered(o).reverse(),u=d.map((e=>Promise.resolve(e.provideDocumentColors(o,s)).then((o=>{if(Array.isArray(o))for(let s of o)l.push({colorInfo:s,provider:e})}))));return Promise.all(u).then((()=>l))}function getColorPresentations(e,o,s,l){return Promise.resolve(s.provideColorPresentations(e,o,l))}k.P0.registerCommand("_executeDocumentColorProvider",(function(e,...o){const[s]=o;if(!(s instanceof L.o))throw(0,m.b1)();const{colorProvider:l}=e.get(S.p),d=e.get(x.q).getModel(s);if(!d)throw(0,m.b1)();const u=[],g=l.ordered(d).reverse(),p=g.map((e=>Promise.resolve(e.provideDocumentColors(d,y.T.None)).then((e=>{if(Array.isArray(e))for(let o of e)u.push({range:o.range,color:[o.color.red,o.color.green,o.color.blue,o.color.alpha]})}))));return Promise.all(p).then((()=>u))})),k.P0.registerCommand("_executeColorPresentationProvider",(function(e,...o){const[s,l]=o,{uri:d,range:g}=l;if(!(d instanceof L.o)||!Array.isArray(s)||4!==s.length||!u.e.isIRange(g))throw(0,m.b1)();const[p,f,_,C]=s,{colorProvider:b}=e.get(S.p),w=e.get(x.q).getModel(d);if(!w)throw(0,m.b1)();const k={range:g,color:{red:p,green:f,blue:_,alpha:C}},N=[],D=b.ordered(w).reverse(),E=D.map((e=>Promise.resolve(e.provideColorPresentations(w,k,y.T.None)).then((e=>{Array.isArray(e)&&N.push(...e)}))));return Promise.all(E).then((()=>N))}));var N=s(3108),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const D=Object.create({}),E=500;let T=class ColorDetector extends l.JT{constructor(e,o,s,d){super(),this._editor=e,this._configurationService=o,this._languageFeaturesService=s,this._localToDispose=this._register(new l.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new C.t7(this._editor),this._colorDecorationClassRefs=this._register(new l.SL),this._debounceInformation=d.for(s.colorProvider,"Document Colors",{min:ColorDetector.RECOMPUTE_TIME}),this._register(e.onDidChangeModel((()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()}))),this._register(e.onDidChangeModelLanguage((()=>this.onModelChanged()))),this._register(s.colorProvider.onDidChange((()=>this.onModelChanged()))),this._register(e.onDidChangeConfiguration((()=>{let e=this._isEnabled;this._isEnabled=this.isEnabled(),e!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const o=e.getLanguageId(),s=this._configurationService.getValue(o);if(s&&"object"===typeof s){const e=s["colorDecorators"];if(e&&void 0!==e["enable"]&&!e["enable"])return e["enable"]}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();e&&this._languageFeaturesService.colorProvider.has(e)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new g._F,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),this._debounceInformation.get(e)))}))),this.beginCompute())}beginCompute(){this._computePromise=(0,g.PG)((e=>__awaiter(this,void 0,void 0,(function*(){const o=this._editor.getModel();if(!o)return Promise.resolve([]);const s=new f.G(!1),l=yield getColors(this._languageFeaturesService.colorProvider,o,e);return this._debounceInformation.update(o,s.elapsed()),l})))),this._computePromise.then((e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}),m.dL)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const o=e.map((e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:b.qx.EMPTY})));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,o),this._colorDatas=new Map,this._decorationsIds.forEach(((o,s)=>this._colorDatas.set(o,e[s])))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let o=[];for(let s=0;s<e.length&&o.length<E;s++){const{red:l,green:d,blue:u,alpha:g}=e[s].colorInfo.color,m=new p.VS(Math.round(255*l),Math.round(255*d),Math.round(255*u),g);let f=`rgba(${m.r}, ${m.g}, ${m.b}, ${m.a})`;const C=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:f}));o.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:_.B4,inlineClassName:`${C.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:D}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],o))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(e){const o=this._editor.getModel();if(!o)return null;const s=o.getDecorationsInRange(u.e.fromPositions(e,e)).filter((e=>this._colorDatas.has(e.id)));return 0===s.length?null:this._colorDatas.get(s[0].id)}isColorDecorationId(e){return this._colorDecoratorIds.has(e)}};T.ID="editor.contrib.colorDetector",T.RECOMPUTE_TIME=1e3,T=__decorate([__param(1,N.Ui),__param(2,S.p),__param(3,w.A)],T),(0,d._K)(T.ID,T);var I=s(4669);class ColorPickerModel{constructor(e,o,s){this.presentationIndex=s,this._onColorFlushed=new I.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new I.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new I.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=o}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,o){for(let s=0;s<this.colorPresentations.length;s++)if(o.toLowerCase()===this.colorPresentations[s].label){this.presentationIndex=s,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}var A=s(6268),M=s(5321),R=s(7974),P=s(3794),O=s(3580),F=s(3910),B=s(7781);const W=M.$;class ColorPickerHeader extends l.JT{constructor(e,o,s){super(),this.model=o,this.domNode=W(".colorpicker-header"),M.R3(e,this.domNode),this.pickedColorNode=M.R3(this.domNode,W(".picked-color"));const l=(0,O.N)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",l);const d=M.R3(this.domNode,W(".original-color"));d.style.backgroundColor=p.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=s.getColorTheme().getColor(F.yJx)||p.Il.white,this._register((0,B.Ic)(((e,o)=>{this.backgroundColor=e.getColor(F.yJx)||p.Il.white}))),this._register(M.nm(this.pickedColorNode,M.tw.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(M.nm(d,M.tw.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(o.onDidChangeColor(this.onDidChangeColor,this)),this._register(o.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=p.Il.Format.CSS.format(o.color)||"",this.pickedColorNode.classList.toggle("light",o.color.rgba.a<.5?this.backgroundColor.isLighter():o.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=p.Il.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(W(".codicon.codicon-color-mode"))}}class ColorPickerBody extends l.JT{constructor(e,o,s){super(),this.model=o,this.pixelRatio=s,this.domNode=W(".colorpicker-body"),M.R3(e,this.domNode),this.saturationBox=new SaturationBox(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new OpacityStrip(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new HueStrip(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:o}){const s=this.model.color.hsva;this.model.color=new p.Il(new p.tx(s.h,e,o,s.a))}onDidOpacityChange(e){const o=this.model.color.hsva;this.model.color=new p.Il(new p.tx(o.h,o.s,o.v,e))}onDidHueChange(e){const o=this.model.color.hsva,s=360*(1-e);this.model.color=new p.Il(new p.tx(360===s?0:s,o.s,o.v,o.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class SaturationBox extends l.JT{constructor(e,o,s){super(),this.model=o,this.pixelRatio=s,this._onDidChange=new I.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new I.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=W(".saturation-wrap"),M.R3(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",M.R3(this.domNode,this.canvas),this.selection=W(".saturation-selection"),M.R3(this.domNode,this.selection),this.layout(),this._register(M.u0(this.domNode,(e=>this.onMouseDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new R.Z);const o=M.i(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,R.e,(e=>this.onDidChangePosition(e.posx-o.left,e.posy-o.top)),(()=>null));const s=M.q6(document,(()=>{this._onColorFlushed.fire(),s.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(e,o){const s=Math.max(0,Math.min(1,e/this.width)),l=Math.max(0,Math.min(1,1-o/this.height));this.paintSelection(s,l),this._onDidChange.fire({s:s,v:l})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,o=new p.Il(new p.tx(e.h,1,1,1)),s=this.canvas.getContext("2d"),l=s.createLinearGradient(0,0,this.canvas.width,0);l.addColorStop(0,"rgba(255, 255, 255, 1)"),l.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),l.addColorStop(1,"rgba(255, 255, 255, 0)");const d=s.createLinearGradient(0,0,0,this.canvas.height);d.addColorStop(0,"rgba(0, 0, 0, 0)"),d.addColorStop(1,"rgba(0, 0, 0, 1)"),s.rect(0,0,this.canvas.width,this.canvas.height),s.fillStyle=p.Il.Format.CSS.format(o),s.fill(),s.fillStyle=l,s.fill(),s.fillStyle=d,s.fill()}paintSelection(e,o){this.selection.style.left=e*this.width+"px",this.selection.style.top=this.height-o*this.height+"px"}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class Strip extends l.JT{constructor(e,o){super(),this.model=o,this._onDidChange=new I.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new I.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=M.R3(e,W(".strip")),this.overlay=M.R3(this.domNode,W(".overlay")),this.slider=M.R3(this.domNode,W(".slider")),this.slider.style.top="0px",this._register(M.u0(this.domNode,(e=>this.onMouseDown(e)))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const o=this._register(new R.Z),s=M.i(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),o.startMonitoring(e.target,e.buttons,R.e,(e=>this.onDidChangeTop(e.posy-s.top)),(()=>null));const l=M.q6(document,(()=>{this._onColorFlushed.fire(),l.dispose(),o.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(e){const o=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(o),this._onDidChange.fire(o)}updateSliderPosition(e){this.slider.style.top=(1-e)*this.height+"px"}}class OpacityStrip extends Strip{constructor(e,o){super(e,o),this.domNode.classList.add("opacity-strip"),this._register(o.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:o,g:s,b:l}=e.rgba,d=new p.Il(new p.VS(o,s,l,1)),u=new p.Il(new p.VS(o,s,l,0));this.overlay.style.background=`linear-gradient(to bottom, ${d} 0%, ${u} 100%)`}getValue(e){return e.hsva.a}}class HueStrip extends Strip{constructor(e,o){super(e,o),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class ColorPickerWidget extends P.${constructor(e,o,s,l){super(),this.model=o,this.pixelRatio=s,this._register(A.PixelRatio.onDidChange((()=>this.layout())));const d=W(".colorpicker-widget");e.appendChild(d);const u=new ColorPickerHeader(d,this.model,l);this.body=new ColorPickerBody(d,this.model,this.pixelRatio),this._register(u),this._register(this.body)}layout(){this.body.layout()}}var colorHoverParticipant_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},colorHoverParticipant_param=function(e,o){return function(s,l){o(s,l,e)}},colorHoverParticipant_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class ColorHover{constructor(e,o,s,l){this.owner=e,this.range=o,this.model=s,this.provider=l,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let V=class ColorHoverParticipant{constructor(e,o){this._editor=e,this._themeService=o,this.hoverOrdinal=1}computeSync(e,o){return[]}computeAsync(e,o,s){return g.Aq.fromPromise(this._computeAsync(e,o,s))}_computeAsync(e,o,s){return colorHoverParticipant_awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=T.get(this._editor);if(!e)return[];for(const s of o){if(!e.isColorDecorationId(s.id))continue;const o=e.getColorData(s.range.getStartPosition());if(o){const e=yield this._createColorHover(this._editor.getModel(),o.colorInfo,o.provider);return[e]}}return[]}))}_createColorHover(e,o,s){return colorHoverParticipant_awaiter(this,void 0,void 0,(function*(){const l=e.getValueInRange(o.range),{red:d,green:g,blue:m,alpha:f}=o.color,_=new p.VS(Math.round(255*d),Math.round(255*g),Math.round(255*m),f),C=new p.Il(_),b=yield getColorPresentations(e,o,s,y.T.None),w=new ColorPickerModel(C,[],0);return w.colorPresentations=b||[],w.guessColorPresentation(C,l),new ColorHover(this,u.e.lift(o.range),w,s)}))}renderHoverParts(e,o){if(0===o.length||!this._editor.hasModel())return l.JT.None;const s=new l.SL,d=o[0],g=this._editor.getModel(),p=d.model,m=s.add(new ColorPickerWidget(e.fragment,p,this._editor.getOption(129),this._themeService));e.setColorPicker(m);let f=new u.e(d.range.startLineNumber,d.range.startColumn,d.range.endLineNumber,d.range.endColumn);const updateEditorModel=()=>{let o,s;if(p.presentation.textEdit){o=[p.presentation.textEdit],s=new u.e(p.presentation.textEdit.range.startLineNumber,p.presentation.textEdit.range.startColumn,p.presentation.textEdit.range.endLineNumber,p.presentation.textEdit.range.endColumn);const e=this._editor.getModel()._setTrackedRange(null,s,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",o),s=this._editor.getModel()._getTrackedRange(e)||s}else o=[{range:f,text:p.presentation.label,forceMoveMarkers:!1}],s=f.setEndPosition(f.endLineNumber,f.startColumn+p.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",o);p.presentation.additionalTextEdits&&(o=[...p.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",o),e.hide()),this._editor.pushUndoStop(),f=s},updateColorPresentations=e=>getColorPresentations(g,{range:f,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},d.provider,y.T.None).then((e=>{p.colorPresentations=e||[]}));return s.add(p.onColorFlushed((e=>{updateColorPresentations(e).then(updateEditorModel)}))),s.add(p.onDidChangeColor(updateColorPresentations)),s}};V=colorHoverParticipant_decorate([colorHoverParticipant_param(1,B.XE)],V);var H=s(6122),z=s(6520);class ColorContribution extends l.JT{constructor(e){super(),this._editor=e,this._register(e.onMouseDown((e=>this.onMouseDown(e))))}dispose(){super.dispose()}onMouseDown(e){const o=e.target;if(6!==o.type)return;if(!o.detail.injectedText)return;if(o.detail.injectedText.options.attachedData!==D)return;if(!o.range)return;const s=this._editor.getContribution(H.ModesHoverController.ID);if(s&&!s.isColorPickerVisible()){const e=new u.e(o.range.startLineNumber,o.range.startColumn+1,o.range.endLineNumber,o.range.endColumn+1);s.showContentHover(e,1,!1)}}}ColorContribution.ID="editor.contrib.colorContribution",(0,d._K)(ColorContribution.ID,ColorContribution),z.Ae.register(V)},9956:function(e,o,s){"use strict";s.r(o);var l=s(2258),d=s(6830),u=s(4314),g=s(9102),p=s(5638),m=s(9386),f=s(187),_=s(3860);class BlockCommentCommand{constructor(e,o,s){this.languageConfigurationService=s,this._selection=e,this._insertSpace=o,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,o,s){if(s<0)return!1;const l=o.length,d=e.length;if(s+l>d)return!1;for(let u=0;u<l;u++){const l=e.charCodeAt(s+u),d=o.charCodeAt(u);if(l!==d&&(!(l>=65&&l<=90&&l+32===d)&&!(d>=65&&d<=90&&d+32===l)))return!1}return!0}_createOperationsForBlockComment(e,o,s,l,d,g){const p=e.startLineNumber,m=e.startColumn,f=e.endLineNumber,_=e.endColumn,C=d.getLineContent(p),b=d.getLineContent(f);let w,S=C.lastIndexOf(o,m-1+o.length),y=b.indexOf(s,_-1-s.length);if(-1!==S&&-1!==y)if(p===f){const e=C.substring(S+o.length,y);e.indexOf(s)>=0&&(S=-1,y=-1)}else{const e=C.substring(S+o.length),l=b.substring(0,y);(e.indexOf(s)>=0||l.indexOf(s)>=0)&&(S=-1,y=-1)}-1!==S&&-1!==y?(l&&S+o.length<C.length&&32===C.charCodeAt(S+o.length)&&(o+=" "),l&&y>0&&32===b.charCodeAt(y-1)&&(s=" "+s,y-=1),w=BlockCommentCommand._createRemoveBlockCommentOperations(new u.e(p,S+o.length+1,f,y+1),o,s)):(w=BlockCommentCommand._createAddBlockCommentOperations(e,o,s,this._insertSpace),this._usedEndToken=1===w.length?s:null);for(const u of w)g.addTrackedEditOperation(u.range,u.text)}static _createRemoveBlockCommentOperations(e,o,s){let l=[];return u.e.isEmpty(e)?l.push(m.h["delete"](new u.e(e.startLineNumber,e.startColumn-o.length,e.endLineNumber,e.endColumn+s.length))):(l.push(m.h["delete"](new u.e(e.startLineNumber,e.startColumn-o.length,e.startLineNumber,e.startColumn))),l.push(m.h["delete"](new u.e(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+s.length)))),l}static _createAddBlockCommentOperations(e,o,s,l){let d=[];return u.e.isEmpty(e)?d.push(m.h.replace(new u.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),o+"  "+s)):(d.push(m.h.insert(new f.L(e.startLineNumber,e.startColumn),o+(l?" ":""))),d.push(m.h.insert(new f.L(e.endLineNumber,e.endColumn),(l?" ":"")+s))),d}getEditOperations(e,o){const s=this._selection.startLineNumber,l=this._selection.startColumn;e.tokenizeIfCheap(s);const d=e.getLanguageIdAtPosition(s,l),u=this.languageConfigurationService.getLanguageConfiguration(d).comments;u&&u.blockCommentStartToken&&u.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,u.blockCommentStartToken,u.blockCommentEndToken,this._insertSpace,e,o)}computeCursorState(e,o){const s=o.getInverseEditOperations();if(2===s.length){const e=s[0],o=s[1];return new _.Y(e.range.endLineNumber,e.range.endColumn,o.range.startLineNumber,o.range.startColumn)}{const e=s[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new _.Y(e.endLineNumber,e.endColumn+o,e.endLineNumber,e.endColumn+o)}}}var C=s(2677);class LineCommentCommand{constructor(e,o,s,l,d,u,g){this.languageConfigurationService=e,this._selection=o,this._tabSize=s,this._type=l,this._insertSpace=d,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=u,this._ignoreFirstLine=g||!1}static _gatherPreflightCommentStrings(e,o,s,l){e.tokenizeIfCheap(o);const d=e.getLanguageIdAtPosition(o,1),u=l.getLanguageConfiguration(d).comments,g=u?u.lineCommentToken:null;if(!g)return null;let p=[];for(let m=0,f=s-o+1;m<f;m++)p[m]={ignore:!1,commentStr:g,commentStrOffset:0,commentStrLength:g.length};return p}static _analyzeLines(e,o,s,l,d,u,g,p){let m,f=!0;m=0===e||1!==e;for(let _=0,b=l.length;_<b;_++){const p=l[_],b=d+_;if(b===d&&g){p.ignore=!0;continue}const w=s.getLineContent(b),S=C.LC(w);if(-1!==S){if(f=!1,p.ignore=!1,p.commentStrOffset=S,m&&!BlockCommentCommand._haystackHasNeedleAtOffset(w,p.commentStr,S)&&(0===e?m=!1:1===e||(p.ignore=!0)),m&&o){const e=S+p.commentStrLength;e<w.length&&32===w.charCodeAt(e)&&(p.commentStrLength+=1)}}else p.ignore=u,p.commentStrOffset=w.length}if(0===e&&f){m=!1;for(let e=0,o=l.length;e<o;e++)l[e].ignore=!1}return{supported:!0,shouldRemoveComments:m,lines:l}}static _gatherPreflightData(e,o,s,l,d,u,g,p){const m=LineCommentCommand._gatherPreflightCommentStrings(s,l,d,p);return null===m?{supported:!1}:LineCommentCommand._analyzeLines(e,o,s,m,l,u,g,p)}_executeLineComments(e,o,s,l){let d;s.shouldRemoveComments?d=LineCommentCommand._createRemoveLineCommentsOperations(s.lines,l.startLineNumber):(LineCommentCommand._normalizeInsertionPoint(e,s.lines,l.startLineNumber,this._tabSize),d=this._createAddLineCommentsOperations(s.lines,l.startLineNumber));const g=new f.L(l.positionLineNumber,l.positionColumn);for(let p=0,m=d.length;p<m;p++)if(o.addEditOperation(d[p].range,d[p].text),u.e.isEmpty(d[p].range)&&u.e.getStartPosition(d[p].range).equals(g)){const o=e.getLineContent(g.lineNumber);o.length+1===g.column&&(this._deltaColumn=(d[p].text||"").length)}this._selectionId=o.trackSelection(l)}_attemptRemoveBlockComment(e,o,s,l){let d=o.startLineNumber,g=o.endLineNumber,p=l.length+Math.max(e.getLineFirstNonWhitespaceColumn(o.startLineNumber),o.startColumn),m=e.getLineContent(d).lastIndexOf(s,p-1),f=e.getLineContent(g).indexOf(l,o.endColumn-1-s.length);return-1!==m&&-1===f&&(f=e.getLineContent(d).indexOf(l,m+s.length),g=d),-1===m&&-1!==f&&(m=e.getLineContent(g).lastIndexOf(s,f),d=g),!o.isEmpty()||-1!==m&&-1!==f||(m=e.getLineContent(d).indexOf(s),-1!==m&&(f=e.getLineContent(d).indexOf(l,m+s.length))),-1!==m&&32===e.getLineContent(d).charCodeAt(m+s.length)&&(s+=" "),-1!==f&&32===e.getLineContent(g).charCodeAt(f-1)&&(l=" "+l,f-=1),-1!==m&&-1!==f?BlockCommentCommand._createRemoveBlockCommentOperations(new u.e(d,m+s.length+1,g,f+1),s,l):null}_executeBlockComment(e,o,s){e.tokenizeIfCheap(s.startLineNumber);let l=e.getLanguageIdAtPosition(s.startLineNumber,1),d=p.zu.getComments(l);if(!d||!d.blockCommentStartToken||!d.blockCommentEndToken)return;const g=d.blockCommentStartToken,m=d.blockCommentEndToken;let f=this._attemptRemoveBlockComment(e,s,g,m);if(!f){if(s.isEmpty()){const o=e.getLineContent(s.startLineNumber);let l=C.LC(o);-1===l&&(l=o.length),f=BlockCommentCommand._createAddBlockCommentOperations(new u.e(s.startLineNumber,l+1,s.startLineNumber,o.length+1),g,m,this._insertSpace)}else f=BlockCommentCommand._createAddBlockCommentOperations(new u.e(s.startLineNumber,e.getLineFirstNonWhitespaceColumn(s.startLineNumber),s.endLineNumber,e.getLineMaxColumn(s.endLineNumber)),g,m,this._insertSpace);1===f.length&&(this._deltaColumn=g.length+1)}this._selectionId=o.trackSelection(s);for(const u of f)o.addEditOperation(u.range,u.text)}getEditOperations(e,o){let s=this._selection;if(this._moveEndPositionDown=!1,s.startLineNumber===s.endLineNumber&&this._ignoreFirstLine)return o.addEditOperation(new u.e(s.startLineNumber,e.getLineMaxColumn(s.startLineNumber),s.startLineNumber+1,1),s.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=o.trackSelection(s));s.startLineNumber<s.endLineNumber&&1===s.endColumn&&(this._moveEndPositionDown=!0,s=s.setEndPosition(s.endLineNumber-1,e.getLineMaxColumn(s.endLineNumber-1)));const l=LineCommentCommand._gatherPreflightData(this._type,this._insertSpace,e,s.startLineNumber,s.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return l.supported?this._executeLineComments(e,o,l,s):this._executeBlockComment(e,o,s)}computeCursorState(e,o){let s=o.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(s=s.setEndPosition(s.endLineNumber+1,1)),new _.Y(s.selectionStartLineNumber,s.selectionStartColumn+this._deltaColumn,s.positionLineNumber,s.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,o){let s=[];for(let l=0,d=e.length;l<d;l++){const d=e[l];d.ignore||s.push(m.h["delete"](new u.e(o+l,d.commentStrOffset+1,o+l,d.commentStrOffset+d.commentStrLength+1)))}return s}_createAddLineCommentsOperations(e,o){let s=[];const l=this._insertSpace?" ":"";for(let d=0,u=e.length;d<u;d++){const u=e[d];u.ignore||s.push(m.h.insert(new f.L(o+d,u.commentStrOffset+1),u.commentStr+l))}return s}static nextVisibleColumn(e,o,s,l){return s?e+(o-e%o):e+l}static _normalizeInsertionPoint(e,o,s,l){let d,u,g=1073741824;for(let p=0,m=o.length;p<m;p++){if(o[p].ignore)continue;const d=e.getLineContent(s+p);let u=0;for(let e=0,s=o[p].commentStrOffset;u<g&&e<s;e++)u=LineCommentCommand.nextVisibleColumn(u,l,9===d.charCodeAt(e),1);u<g&&(g=u)}g=Math.floor(g/l)*l;for(let p=0,m=o.length;p<m;p++){if(o[p].ignore)continue;const m=e.getLineContent(s+p);let f=0;for(d=0,u=o[p].commentStrOffset;f<g&&d<u;d++)f=LineCommentCommand.nextVisibleColumn(f,l,9===m.charCodeAt(d),1);o[p].commentStrOffset=f>g?d-1:d}}}var b=s(3580),w=s(4144);class CommentLineAction extends d.R6{constructor(e,o){super(o),this._type=e}run(e,o){const s=e.get(p.c_);if(!o.hasModel())return;const l=o.getModel(),d=[],g=l.getOptions(),m=o.getOption(19),f=o.getSelections().map(((e,o)=>({selection:e,index:o,ignoreFirstLine:!1})));f.sort(((e,o)=>u.e.compareRangesUsingStarts(e.selection,o.selection)));let _=f[0];for(let u=1;u<f.length;u++){const e=f[u];_.selection.endLineNumber===e.selection.startLineNumber&&(_.index<e.index?e.ignoreFirstLine=!0:(_.ignoreFirstLine=!0,_=e))}for(const u of f)d.push(new LineCommentCommand(s,u.selection,g.tabSize,this._type,m.insertSpace,m.ignoreEmptyLines,u.ignoreFirstLine));o.pushUndoStop(),o.executeCommands(this.id,d),o.pushUndoStop()}}class ToggleCommentLineAction extends CommentLineAction{constructor(){super(0,{id:"editor.action.commentLine",label:b.N("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:w.eH.MenubarEditMenu,group:"5_insert",title:b.N({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class AddLineCommentAction extends CommentLineAction{constructor(){super(1,{id:"editor.action.addCommentLine",label:b.N("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:(0,l.gx)(2089,2081),weight:100}})}}class RemoveLineCommentAction extends CommentLineAction{constructor(){super(2,{id:"editor.action.removeCommentLine",label:b.N("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:(0,l.gx)(2089,2099),weight:100}})}}class BlockCommentAction extends d.R6{constructor(){super({id:"editor.action.blockComment",label:b.N("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:w.eH.MenubarEditMenu,group:"5_insert",title:b.N({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,o){const s=e.get(p.c_);if(!o.hasModel())return;const l=o.getOption(19),d=[],u=o.getSelections();for(const g of u)d.push(new BlockCommentCommand(g,l.insertSpace,s));o.pushUndoStop(),o.executeCommands(this.id,d),o.pushUndoStop()}}(0,d.Qr)(ToggleCommentLineAction),(0,d.Qr)(AddLineCommentAction),(0,d.Qr)(RemoveLineCommentAction),(0,d.Qr)(BlockCommentAction)},3740:function(e,o,s){"use strict";s.r(o),s.d(o,{ContextMenuController:function(){return y}});var l=s(5321),d=s(6033),u=s(4741),g=s(5976),p=s(1432),m=s(6830),f=s(9102),_=s(3580),C=s(4144),b=s(8819),w=s(5606),S=s(1847),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let y=class ContextMenuController{constructor(e,o,s,d,u,p){this._contextMenuService=o,this._contextViewService=s,this._contextKeyService=d,this._keybindingService=u,this._menuService=p,this._toDispose=new g.SL,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const o=this._contextViewService.getContextViewElement(),s=e.srcElement;s.shadowRoot&&l.Ay(o)===s.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}static get(e){return e.getContribution(ContextMenuController.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(6===e.target.type&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let o=!1;for(const s of this._editor.getSelections())if(s.containsPosition(e.target.position)){o=!0;break}o||this._editor.setPosition(e.target.position)}let o=null;1!==e.target.type&&(o={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(o)}showContextMenu(e){if(!this._editor.getOption(20))return;if(!this._editor.hasModel())return;if(!this._contextMenuService)return void this._editor.focus();const o=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?C.eH.SimpleEditorContext:C.eH.EditorContext);o.length>0&&this._doShowContextMenu(o,e)}_getMenuActions(e,o){const s=[],l=this._menuService.createMenu(o,this._contextKeyService),d=l.getActions({arg:e.uri});l.dispose();for(let g of d){const[,o]=g;let l=0;for(const d of o)if(d instanceof C.NZ){const o=this._getMenuActions(e,d.item.submenu);o.length>0&&(s.push(new u.wY(d.id,d.label,o)),l++)}else s.push(d),l++;l&&s.push(new u.Z0)}return s.length&&s.pop(),s}_doShowContextMenu(e,o=null){if(!this._editor.hasModel())return;const s=this._editor.getOption(53);if(this._editor.updateOptions({hover:{enabled:!1}}),!o){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),s=l.i(this._editor.getDomNode()),d=s.left+e.left,u=s.top+e.top+e.height;o={x:d,y:u}}const u=this._editor.getOption(115)&&!p.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:u?this._editor.getDomNode():void 0,getAnchor:()=>o,getActions:()=>e,getActionViewItem:e=>{const o=this._keybindingFor(e);if(o)return new d.g(e,e,{label:!0,keybinding:o.getLabel(),isMenu:!0});const s=e;return"function"===typeof s.getActionViewItem?s.getActionViewItem():new d.g(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:s})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};y.ID="editor.contrib.contextmenu",y=__decorate([__param(1,w.i),__param(2,w.u),__param(3,b.i6),__param(4,S.d),__param(5,C.co)],y);class ShowContextMenu extends m.R6{constructor(){super({id:"editor.action.showContextMenu",label:_.N("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:f.u.textInputFocus,primary:1092,weight:100}})}run(e,o){var s;null===(s=y.get(o))||void 0===s||s.showContextMenu()}}(0,m._K)(y.ID,y),(0,m.Qr)(ShowContextMenu)},1895:function(e,o,s){"use strict";s.r(o),s.d(o,{CursorRedo:function(){return CursorRedo},CursorUndo:function(){return CursorUndo},CursorUndoRedoController:function(){return CursorUndoRedoController}});var l=s(5976),d=s(6830),u=s(9102),g=s(3580);class CursorState{constructor(e){this.selections=e}equals(e){const o=this.selections.length,s=e.selections.length;if(o!==s)return!1;for(let l=0;l<o;l++)if(!this.selections[l].equalsSelection(e.selections[l]))return!1;return!0}}class StackElement{constructor(e,o,s){this.cursorState=e,this.scrollTop=o,this.scrollLeft=s}}class CursorUndoRedoController extends l.JT{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((o=>{if(this._isCursorUndoRedo)return;if(!o.oldSelections)return;if(o.oldModelVersionId!==o.modelVersionId)return;const s=new CursorState(o.oldSelections),l=this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(s);l||(this._undoStack.push(new StackElement(s,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}static get(e){return e.getContribution(CursorUndoRedoController.ID)}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}CursorUndoRedoController.ID="editor.contrib.cursorUndoRedoController";class CursorUndo extends d.R6{constructor(){super({id:"cursorUndo",label:g.N("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:u.u.textInputFocus,primary:2099,weight:100}})}run(e,o,s){var l;null===(l=CursorUndoRedoController.get(o))||void 0===l||l.cursorUndo()}}class CursorRedo extends d.R6{constructor(){super({id:"cursorRedo",label:g.N("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,o,s){var l;null===(l=CursorUndoRedoController.get(o))||void 0===l||l.cursorRedo()}}(0,d._K)(CursorUndoRedoController.ID,CursorUndoRedoController),(0,d.Qr)(CursorUndo),(0,d.Qr)(CursorRedo)},7107:function(e,o,s){"use strict";s.r(o),s.d(o,{DragAndDropController:function(){return DragAndDropController}});var l=s(5976),d=s(1432),u=s(6830),g=s(187),p=s(4314),m=s(3860),f=s(2822);class DragAndDropCommand{constructor(e,o,s){this.selection=e,this.targetPosition=o,this.copy=s,this.targetSelection=null}getEditOperations(e,o){let s=e.getValueInRange(this.selection);this.copy||o.addEditOperation(this.selection,null),o.addEditOperation(new p.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),s),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new m.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new m.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new m.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new m.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new m.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(e,o){return this.targetSelection}}function hasTriggerModifier(e){return d.dz?e.altKey:e.ctrlKey}class DragAndDropController extends l.JT{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._register(this._editor.onMouseDrag((e=>this._onEditorMouseDrag(e)))),this._register(this._editor.onMouseDrop((e=>this._onEditorMouseDrop(e)))),this._register(this._editor.onMouseDropCanceled((()=>this._onEditorMouseDropCanceled()))),this._register(this._editor.onKeyDown((e=>this.onEditorKeyDown(e)))),this._register(this._editor.onKeyUp((e=>this.onEditorKeyUp(e)))),this._register(this._editor.onDidBlurEditorWidget((()=>this.onEditorBlur()))),this._register(this._editor.onDidBlurEditorText((()=>this.onEditorBlur()))),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(hasTriggerModifier(e)&&(this._modifierPressed=!0),this._mouseDown&&hasTriggerModifier(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(hasTriggerModifier(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===DragAndDropController.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let o=e.target;if(null===this._dragSelection){const e=this._editor.getSelections()||[];let s=e.filter((e=>o.position&&e.containsPosition(o.position)));if(1!==s.length)return;this._dragSelection=s[0]}hasTriggerModifier(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),o.position&&(this._dragSelection.containsPosition(o.position)?this._removeDecoration():this.showAt(o.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let o=new g.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let s=null;if(e.event.shiftKey){let e=this._editor.getSelection();if(e){const{selectionStartLineNumber:l,selectionStartColumn:d}=e;s=[new m.Y(l,d,o.lineNumber,o.column)]}}else s=(this._editor.getSelections()||[]).map((e=>e.containsPosition(o)?new m.Y(o.lineNumber,o.column,o.lineNumber,o.column):e));this._editor.setSelections(s||[],"mouse",3)}else(!this._dragSelection.containsPosition(o)||(hasTriggerModifier(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(o)||this._dragSelection.getStartPosition().equals(o)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(DragAndDropController.ID,new DragAndDropCommand(this._dragSelection,o,hasTriggerModifier(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let o=[{range:new p.e(e.lineNumber,e.column,e.lineNumber,e.column),options:DragAndDropController._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,o),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}DragAndDropController.ID="editor.contrib.dragAndDrop",DragAndDropController.TRIGGER_KEY_VALUE=d.dz?6:5,DragAndDropController._DECORATION_OPTIONS=f.qx.register({description:"dnd-target",className:"dnd-target"}),(0,u._K)(DragAndDropController.ID,DragAndDropController)},6917:function(e,o,s){"use strict";s.r(o);var l=s(1050),d=s(8401),u=s(666),g=s(8216),p=s(335),m=s(4565),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};m.P0.registerCommand("_executeDocumentSymbolProvider",(function(e,...o){return __awaiter(this,void 0,void 0,(function*(){const[s]=o;(0,d.p_)(u.o.isUri(s));const m=e.get(p.Je),f=e.get(g.S),_=yield f.createModelReference(s);try{return(yield m.getOrCreate(_.object.textEditorModel,l.T.None)).getTopLevelSymbols()}finally{_.dispose()}}))}))},335:function(e,o,s){"use strict";s.d(o,{Je:function(){return L}});var l=s(9488),d=s(1050),u=s(7301),g=s(3725),p=s(3702),m=s(187),f=s(4314),_=s(8191),C=s(2065),b=s(5026),w=s(3733),S=s(5976),y=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class TreeElement{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,o){let s;"string"===typeof e?s=`${o.id}/${e}`:(s=`${o.id}/${e.name}`,void 0!==o.children.get(s)&&(s=`${o.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let l=s;for(let d=0;void 0!==o.children.get(l);d++)l=`${s}_${d}`;return l}static empty(e){return 0===e.children.size}}class OutlineElement extends TreeElement{constructor(e,o,s){super(),this.id=e,this.parent=o,this.symbol=s,this.children=new Map}}class OutlineGroup extends TreeElement{constructor(e,o,s,l){super(),this.id=e,this.parent=o,this.label=s,this.order=l,this.children=new Map}}class OutlineModel extends TreeElement{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,o,s){const g=new d.A(s),p=new OutlineModel(o.uri),m=e.ordered(o),f=m.map(((e,s)=>{var l;let d=TreeElement.findId(`provider_${s}`,p),m=new OutlineGroup(d,p,null!==(l=e.displayName)&&void 0!==l?l:"Unknown Outline Provider",s);return Promise.resolve(e.provideDocumentSymbols(o,g.token)).then((e=>{for(const o of e||[])OutlineModel._makeOutlineElement(o,m);return m}),(e=>((0,u.Cp)(e),m))).then((e=>{TreeElement.empty(e)?e.remove():p._groups.set(d,e)}))})),_=e.onDidChange((()=>{const s=e.ordered(o);(0,l.fS)(s,m)||g.cancel()}));return Promise.all(f).then((()=>g.token.isCancellationRequested&&!s.isCancellationRequested?OutlineModel.create(e,o,s):p._compact())).finally((()=>{_.dispose()}))}static _makeOutlineElement(e,o){let s=TreeElement.findId(e,o),l=new OutlineElement(s,o,e);if(e.children)for(const d of e.children)OutlineModel._makeOutlineElement(d,l);o.children.set(l.id,l)}_compact(){let e=0;for(const[o,s]of this._groups)0===s.children.size?this._groups.delete(o):e+=1;if(1!==e)this.children=this._groups;else{let e=g.$.first(this._groups.values());for(let[,o]of e.children)o.parent=this,this.children.set(o.id,o)}return this}getTopLevelSymbols(){const e=[];for(const o of this.children.values())o instanceof OutlineElement?e.push(o.symbol):e.push(...g.$.map(o.children.values(),(e=>e.symbol)));return e.sort(((e,o)=>f.e.compareRangesUsingStarts(e.range,o.range)))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),o=[];return OutlineModel._flattenDocumentSymbols(o,e,""),o.sort(((e,o)=>m.L.compare(f.e.getStartPosition(e.range),f.e.getStartPosition(o.range))||m.L.compare(f.e.getEndPosition(o.range),f.e.getEndPosition(e.range))))}static _flattenDocumentSymbols(e,o,s){for(const l of o)e.push({kind:l.kind,tags:l.tags,name:l.name,detail:l.detail,containerName:l.containerName||s,range:l.range,selectionRange:l.selectionRange,children:void 0}),l.children&&OutlineModel._flattenDocumentSymbols(e,l.children,l.name)}}const L=(0,C.yh)("IOutlineModelService");let x=class OutlineModelService{constructor(e,o,s){this._languageFeaturesService=e,this._disposables=new S.SL,this._cache=new p.z6(10,.7),this._debounceInformation=o.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(s.onModelRemoved((e=>{this._cache.delete(e.id)})))}dispose(){this._disposables.dispose()}getOrCreate(e,o){return __awaiter(this,void 0,void 0,(function*(){const s=this._languageFeaturesService.documentSymbolProvider,u=s.ordered(e);let g=this._cache.get(e.id);if(!g||g.versionId!==e.getVersionId()||!(0,l.fS)(g.provider,u)){let o=new d.A;g={versionId:e.getVersionId(),provider:u,promiseCnt:0,source:o,promise:OutlineModel.create(s,e,o.token),model:void 0},this._cache.set(e.id,g);const l=Date.now();g.promise.then((o=>{g.model=o,this._debounceInformation.update(e,Date.now()-l)})).catch((o=>{this._cache.delete(e.id)}))}if(g.model)return g.model;g.promiseCnt+=1;const p=o.onCancellationRequested((()=>{0===--g.promiseCnt&&(g.source.cancel(),this._cache.delete(e.id))}));try{return yield g.promise}finally{p.dispose()}}))}};x=__decorate([__param(0,y.p),__param(1,_.A),__param(2,w.q)],x),(0,b.z)(L,x,!0)},4410:function(e,o,s){"use strict";s.d(o,{yy:function(){return EditorState},Dl:function(){return EditorStateCancellationTokenSource},YQ:function(){return TextModelCancellationTokenSource}});var l=s(2677),d=s(4314),u=s(1050),g=s(5976),p=s(6830),m=s(8819),f=s(1741),_=s(2065),C=s(5026),b=s(3580);const w=(0,_.yh)("IEditorCancelService"),S=new m.uy("cancellableOperation",!1,(0,b.N)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,C.z)(w,class{constructor(){this._tokens=new WeakMap}add(e,o){let s,l=this._tokens.get(e);return l||(l=e.invokeWithinContext((e=>{const o=S.bindTo(e.get(m.i6)),s=new f.S;return{key:o,tokens:s}})),this._tokens.set(e,l)),l.key.set(!0),s=l.tokens.push(o),()=>{s&&(s(),l.key.set(!l.tokens.isEmpty()),s=void 0)}}cancel(e){const o=this._tokens.get(e);if(!o)return;const s=o.tokens.pop();s&&(s.cancel(),o.key.set(!o.tokens.isEmpty()))}},!0);class EditorKeybindingCancellationTokenSource extends u.A{constructor(e,o){super(o),this.editor=e,this._unregister=e.invokeWithinContext((o=>o.get(w).add(e,this)))}dispose(){this._unregister(),super.dispose()}}(0,p.fK)(new class extends p._l{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:S})}runEditorCommand(e,o){e.get(w).cancel(o)}});class EditorState{constructor(e,o){if(this.flags=o,0!==(1&this.flags)){const o=e.getModel();this.modelVersionId=o?l.WU("{0}#{1}",o.uri.toString(),o.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=e.getPosition():this.position=null,0!==(2&this.flags)?this.selection=e.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof EditorState))return!1;const o=e;return this.modelVersionId===o.modelVersionId&&(this.scrollLeft===o.scrollLeft&&this.scrollTop===o.scrollTop&&(!(!this.position&&o.position||this.position&&!o.position||this.position&&o.position&&!this.position.equals(o.position))&&!(!this.selection&&o.selection||this.selection&&!o.selection||this.selection&&o.selection&&!this.selection.equalsRange(o.selection))))}validate(e){return this._equals(new EditorState(e,this.flags))}}class EditorStateCancellationTokenSource extends EditorKeybindingCancellationTokenSource{constructor(e,o,s,l){super(e,l),this._listener=new g.SL,4&o&&this._listener.add(e.onDidChangeCursorPosition((e=>{s&&d.e.containsPosition(s,e.position)||this.cancel()}))),2&o&&this._listener.add(e.onDidChangeCursorSelection((e=>{s&&d.e.containsRange(s,e.selection)||this.cancel()}))),8&o&&this._listener.add(e.onDidScrollChange((e=>this.cancel()))),1&o&&(this._listener.add(e.onDidChangeModel((e=>this.cancel()))),this._listener.add(e.onDidChangeModelContent((e=>this.cancel()))))}dispose(){this._listener.dispose(),super.dispose()}}class TextModelCancellationTokenSource extends u.A{constructor(e,o){super(o),this._listener=e.onDidChangeContent((()=>this.cancel()))}dispose(){this._listener.dispose(),super.dispose()}}},5826:function(e,o,s){"use strict";s.r(o),s.d(o,{CommonFindController:function(){return Me},FindController:function(){return Re},MatchFindAction:function(){return MatchFindAction},NextMatchFindAction:function(){return NextMatchFindAction},NextSelectionMatchFindAction:function(){return NextSelectionMatchFindAction},PreviousMatchFindAction:function(){return PreviousMatchFindAction},PreviousSelectionMatchFindAction:function(){return PreviousSelectionMatchFindAction},SelectionMatchFindAction:function(){return SelectionMatchFindAction},StartFindAction:function(){return Pe},StartFindReplaceAction:function(){return Fe},StartFindWithArgsAction:function(){return StartFindWithArgsAction},StartFindWithSelectionAction:function(){return StartFindWithSelectionAction},getSelectionSearchString:function(){return getSelectionSearchString}});var l=s(5393),d=s(5976),u=s(2677),g=s(6830),p=s(9102),m=s(9488),f=s(1329),_=s(187),C=s(4314),b=s(3860),w=s(7277),S=s(4973),y=s(2822),L=s(3910),x=s(7781);class FindDecorations{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map((e=>this._editor.getModel().getDecorationRange(e))).filter((e=>!!e));if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const o=this._decorations.indexOf(e);return o>=0?o+1:1}getCurrentMatchesPosition(e){let o=this._editor.getModel().getDecorationsInRange(e);for(const s of o){const e=s.options;if(e===FindDecorations._FIND_MATCH_DECORATION||e===FindDecorations._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(s.id)}return 0}setCurrentFindMatch(e){let o=null,s=0;if(e)for(let l=0,d=this._decorations.length;l<d;l++){let d=this._editor.getModel().getDecorationRange(this._decorations[l]);if(e.equalsRange(d)){o=this._decorations[l],s=l+1;break}}return null===this._highlightedDecorationId&&null===o||this._editor.changeDecorations((e=>{if(null!==this._highlightedDecorationId&&(e.changeDecorationOptions(this._highlightedDecorationId,FindDecorations._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==o&&(this._highlightedDecorationId=o,e.changeDecorationOptions(this._highlightedDecorationId,FindDecorations._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==o){let s=this._editor.getModel().getDecorationRange(o);if(s.startLineNumber!==s.endLineNumber&&1===s.endColumn){let e=s.endLineNumber-1,o=this._editor.getModel().getLineMaxColumn(e);s=new C.e(s.startLineNumber,s.startColumn,e,o)}this._rangeHighlightDecorationId=e.addDecoration(s,FindDecorations._RANGE_HIGHLIGHT_DECORATION)}})),s}set(e,o){this._editor.changeDecorations((s=>{let l=FindDecorations._FIND_MATCH_DECORATION,d=[];if(e.length>1e3){l=FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;const o=this._editor.getModel().getLineCount(),s=this._editor.getLayoutInfo().height,u=s/o,g=Math.max(2,Math.ceil(3/u));let p=e[0].range.startLineNumber,m=e[0].range.endLineNumber;for(let l=1,f=e.length;l<f;l++){const o=e[l].range;m+g>=o.startLineNumber?o.endLineNumber>m&&(m=o.endLineNumber):(d.push({range:new C.e(p,1,m,1),options:FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),p=o.startLineNumber,m=o.endLineNumber)}d.push({range:new C.e(p,1,m,1),options:FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let u=new Array(e.length);for(let o=0,g=e.length;o<g;o++)u[o]={range:e[o].range,options:l};this._decorations=s.deltaDecorations(this._decorations,u),this._overviewRulerApproximateDecorations=s.deltaDecorations(this._overviewRulerApproximateDecorations,d),this._rangeHighlightDecorationId&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach((e=>s.removeDecoration(e))),this._findScopeDecorationIds=[]),(null===o||void 0===o?void 0:o.length)&&(this._findScopeDecorationIds=o.map((e=>s.addDecoration(e,FindDecorations._FIND_SCOPE_DECORATION))))}))}matchBeforePosition(e){if(0===this._decorations.length)return null;for(let o=this._decorations.length-1;o>=0;o--){let s=this._decorations[o],l=this._editor.getModel().getDecorationRange(s);if(l&&!(l.endLineNumber>e.lineNumber)){if(l.endLineNumber<e.lineNumber)return l;if(!(l.endColumn>e.column))return l}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(0===this._decorations.length)return null;for(let o=0,s=this._decorations.length;o<s;o++){let s=this._decorations[o],l=this._editor.getModel().getDecorationRange(s);if(l&&!(l.startLineNumber<e.lineNumber)){if(l.startLineNumber>e.lineNumber)return l;if(!(l.startColumn<e.column))return l}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}FindDecorations._CURRENT_FIND_MATCH_DECORATION=y.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,x.EN)(L.Fm_),position:S.sh.Center},minimap:{color:(0,x.EN)(L.SUY),position:S.F5.Inline}}),FindDecorations._FIND_MATCH_DECORATION=y.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,x.EN)(L.Fm_),position:S.sh.Center},minimap:{color:(0,x.EN)(L.SUY),position:S.F5.Inline}}),FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION=y.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION=y.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,x.EN)(L.Fm_),position:S.sh.Center}}),FindDecorations._RANGE_HIGHLIGHT_DECORATION=y.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),FindDecorations._FIND_SCOPE_DECORATION=y.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});class ReplaceAllCommand{constructor(e,o,s){this._editorSelection=e,this._ranges=o,this._replaceStrings=s,this._trackedEditorSelectionId=null}getEditOperations(e,o){if(this._ranges.length>0){let e=[];for(let o=0;o<this._ranges.length;o++)e.push({range:this._ranges[o],text:this._replaceStrings[o]});e.sort(((e,o)=>C.e.compareRangesUsingStarts(e.range,o.range)));let s=[],l=e[0];for(let o=1;o<e.length;o++)l.range.endLineNumber===e[o].range.startLineNumber&&l.range.endColumn===e[o].range.startColumn?(l.range=l.range.plusRange(e[o].range),l.text=l.text+e[o].text):(s.push(l),l=e[o]);s.push(l);for(const d of s)o.addEditOperation(d.range,d.text)}this._trackedEditorSelectionId=o.trackSelection(this._editorSelection)}computeCursorState(e,o){return o.getTrackedSelection(this._trackedEditorSelectionId)}}function buildReplaceStringWithCasePreserved(e,o){if(e&&""!==e[0]){const s=validateSpecificSpecialCharacter(e,o,"-"),l=validateSpecificSpecialCharacter(e,o,"_");return s&&!l?buildReplaceStringForSpecificSpecialCharacter(e,o,"-"):!s&&l?buildReplaceStringForSpecificSpecialCharacter(e,o,"_"):e[0].toUpperCase()===e[0]?o.toUpperCase():e[0].toLowerCase()===e[0]?o.toLowerCase():u.Kw(e[0][0])&&o.length>0?o[0].toUpperCase()+o.substr(1):e[0][0].toUpperCase()!==e[0][0]&&o.length>0?o[0].toLowerCase()+o.substr(1):o}return o}function validateSpecificSpecialCharacter(e,o,s){const l=-1!==e[0].indexOf(s)&&-1!==o.indexOf(s);return l&&e[0].split(s).length===o.split(s).length}function buildReplaceStringForSpecificSpecialCharacter(e,o,s){const l=o.split(s),d=e[0].split(s);let u="";return l.forEach(((e,o)=>{u+=buildReplaceStringWithCasePreserved([d[o]],e)+s})),u.slice(0,-1)}class StaticValueReplacePattern{constructor(e){this.staticValue=e,this.kind=0}}class DynamicPiecesReplacePattern{constructor(e){this.pieces=e,this.kind=1}}class ReplacePattern{constructor(e){e&&0!==e.length?1===e.length&&null!==e[0].staticValue?this._state=new StaticValueReplacePattern(e[0].staticValue):this._state=new DynamicPiecesReplacePattern(e):this._state=new StaticValueReplacePattern("")}static fromStaticValue(e){return new ReplacePattern([ReplacePiece.staticValue(e)])}get hasReplacementPatterns(){return 1===this._state.kind}buildReplaceString(e,o){if(0===this._state.kind)return o?buildReplaceStringWithCasePreserved(e,this._state.staticValue):this._state.staticValue;let s="";for(let l=0,d=this._state.pieces.length;l<d;l++){let o=this._state.pieces[l];if(null!==o.staticValue){s+=o.staticValue;continue}let d=ReplacePattern._substitute(o.matchIndex,e);if(null!==o.caseOps&&o.caseOps.length>0){let e=[],s=o.caseOps.length,l=0;for(let u=0,g=d.length;u<g;u++){if(l>=s){e.push(d.slice(u));break}switch(o.caseOps[l]){case"U":e.push(d[u].toUpperCase());break;case"u":e.push(d[u].toUpperCase()),l++;break;case"L":e.push(d[u].toLowerCase());break;case"l":e.push(d[u].toLowerCase()),l++;break;default:e.push(d[u])}}d=e.join("")}s+=d}return s}static _substitute(e,o){if(null===o)return"";if(0===e)return o[0];let s="";while(e>0){if(e<o.length){let l=o[e]||"";return l+s}s=String(e%10)+s,e=Math.floor(e/10)}return"$"+s}}class ReplacePiece{constructor(e,o,s){this.staticValue=e,this.matchIndex=o,s&&0!==s.length?this.caseOps=s.slice(0):this.caseOps=null}static staticValue(e){return new ReplacePiece(e,-1,null)}static caseOps(e,o){return new ReplacePiece(null,e,o)}}class ReplacePieceBuilder{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,o){this._emitStatic(e),this._lastCharIndex=o}_emitStatic(e){0!==e.length&&(this._currentStaticPiece+=e)}emitMatchIndex(e,o,s){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=ReplacePiece.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=ReplacePiece.caseOps(e,s),this._lastCharIndex=o}finalize(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=ReplacePiece.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new ReplacePattern(this._result)}}function parseReplaceString(e){if(!e||0===e.length)return new ReplacePattern(null);let o=[],s=new ReplacePieceBuilder(e);for(let l=0,d=e.length;l<d;l++){let u=e.charCodeAt(l);if(92!==u){if(36===u){if(l++,l>=d)break;let u=e.charCodeAt(l);if(36===u){s.emitUnchanged(l-1),s.emitStatic("$",l+1);continue}if(48===u||38===u){s.emitUnchanged(l-1),s.emitMatchIndex(0,l+1,o),o.length=0;continue}if(49<=u&&u<=57){let g=u-48;if(l+1<d){let d=e.charCodeAt(l+1);if(48<=d&&d<=57){l++,g=10*g+(d-48),s.emitUnchanged(l-2),s.emitMatchIndex(g,l+1,o),o.length=0;continue}}s.emitUnchanged(l-1),s.emitMatchIndex(g,l+1,o),o.length=0;continue}}}else{if(l++,l>=d)break;let u=e.charCodeAt(l);switch(u){case 92:s.emitUnchanged(l-1),s.emitStatic("\\",l+1);break;case 110:s.emitUnchanged(l-1),s.emitStatic("\n",l+1);break;case 116:s.emitUnchanged(l-1),s.emitStatic("\t",l+1);break;case 117:case 85:case 108:case 76:s.emitUnchanged(l-1),s.emitStatic("",l+1),o.push(String.fromCharCode(u));break}}}return s.finalize()}var k=s(8819);const N=new k.uy("findWidgetVisible",!1),D=(N.toNegated(),new k.uy("findInputFocussed",!1)),E=new k.uy("replaceInputFocussed",!1),T={primary:545,mac:{primary:2593}},I={primary:565,mac:{primary:2613}},A={primary:560,mac:{primary:2608}},M={primary:554,mac:{primary:2602}},R={primary:558,mac:{primary:2606}},P={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},O=19999,F=240;class FindModelBoundToEditorModel{constructor(e,o){this._toDispose=new d.SL,this._editor=e,this._state=o,this._isDisposed=!1,this._startSearchingTimer=new l._F,this._decorations=new FindDecorations(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new l.pY((()=>this.research(!1)),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((e=>{3!==e.reason&&5!==e.reason&&6!==e.reason||this._decorations.setStartPosition(this._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((e=>{this._ignoreModelContentChanged||(e.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,(0,d.B9)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){let o=this._editor.getModel();o.isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}),F)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}}static _getSearchRange(e,o){return o||e.getFullModelRange()}research(e,o){let s=null;"undefined"!==typeof o?null!==o&&(s=Array.isArray(o)?o:[o]):s=this._decorations.getFindScopes(),null!==s&&(s=s.map((e=>{if(e.startLineNumber!==e.endLineNumber){let o=e.endLineNumber;return 1===e.endColumn&&(o-=1),new C.e(e.startLineNumber,1,o,this._editor.getModel().getLineMaxColumn(o))}return e})));let l=this._findMatches(s,!1,O);this._decorations.set(l,s);const d=this._editor.getSelection();let u=this._decorations.getCurrentMatchesPosition(d);if(0===u&&l.length>0){const e=(0,m.lG)(l.map((e=>e.range)),(e=>C.e.compareRangesUsingStarts(e,d)>=0));u=e>0?e-1+1:u}this._state.changeMatchInfo(u,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let o=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(o,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let o=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:s,column:l}=e,d=this._editor.getModel();return o||1===l?(1===s?s=d.getLineCount():s--,l=d.getLineMaxColumn(s)):l--,new _.L(s,l)}_moveToPrevMatch(e,o=!1){if(!this._state.canNavigateBack()){const o=this._decorations.matchAfterPosition(e);return void(o&&this._setCurrentFindMatch(o))}if(this._decorations.getCount()<O){let o=this._decorations.matchBeforePosition(e);return o&&o.isEmpty()&&o.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),o=this._decorations.matchBeforePosition(e)),void(o&&this._setCurrentFindMatch(o))}if(this._cannotFind())return;let s=this._decorations.getFindScope(),l=FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),s);l.getEndPosition().isBefore(e)&&(e=l.getEndPosition()),e.isBefore(l.getStartPosition())&&(e=l.getEndPosition());let{lineNumber:d,column:u}=e,g=this._editor.getModel(),p=new _.L(d,u),m=g.findPreviousMatch(this._state.searchString,p,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,!1);return m&&m.range.isEmpty()&&m.range.getStartPosition().equals(p)&&(p=this._prevSearchPosition(p),m=g.findPreviousMatch(this._state.searchString,p,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,!1)),m?o||l.containsRange(m.range)?void this._setCurrentFindMatch(m.range):this._moveToPrevMatch(m.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let o=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:s,column:l}=e,d=this._editor.getModel();return o||l===d.getLineMaxColumn(s)?(s===d.getLineCount()?s=1:s++,l=1):l++,new _.L(s,l)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const o=this._decorations.matchBeforePosition(e);return void(o&&this._setCurrentFindMatch(o))}if(this._decorations.getCount()<O){let o=this._decorations.matchAfterPosition(e);return o&&o.isEmpty()&&o.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),o=this._decorations.matchAfterPosition(e)),void(o&&this._setCurrentFindMatch(o))}let o=this._getNextMatch(e,!1,!0);o&&this._setCurrentFindMatch(o.range)}_getNextMatch(e,o,s,l=!1){if(this._cannotFind())return null;let d=this._decorations.getFindScope(),u=FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),d);u.getEndPosition().isBefore(e)&&(e=u.getStartPosition()),e.isBefore(u.getStartPosition())&&(e=u.getStartPosition());let{lineNumber:g,column:p}=e,m=this._editor.getModel(),f=new _.L(g,p),C=m.findNextMatch(this._state.searchString,f,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,o);return s&&C&&C.range.isEmpty()&&C.range.getStartPosition().equals(f)&&(f=this._nextSearchPosition(f),C=m.findNextMatch(this._state.searchString,f,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,o)),C?l||u.containsRange(C.range)?C:this._getNextMatch(C.range.getEndPosition(),o,s,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?parseReplaceString(this._state.replaceString):ReplacePattern.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),o=this._editor.getSelection(),s=this._getNextMatch(o.getStartPosition(),!0,!1);if(s)if(o.equalsRange(s.range)){let l=e.buildReplaceString(s.matches,this._state.preserveCase),d=new f.T4(o,l);this._executeEditorCommand("replace",d),this._decorations.setStartPosition(new _.L(o.startLineNumber,o.startColumn+l.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(s.range)}_findMatches(e,o,s){const l=(e||[null]).map((e=>FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),e)));return this._editor.getModel().findMatches(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,o,s)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=O?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const e=new w.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null),o=e.parseSearchRequest();if(!o)return;let s=o.regex;if(!s.multiline){let e="mu";s.ignoreCase&&(e+="i"),s.global&&(e+="g"),s=new RegExp(s.source,e)}const l=this._editor.getModel(),d=l.getValue(1),u=l.getFullModelRange(),g=this._getReplacePattern();let p;const m=this._state.preserveCase;p=g.hasReplacementPatterns||m?d.replace(s,(function(){return g.buildReplaceString(arguments,m)})):d.replace(s,g.buildReplaceString(null,m));let _=new f.hP(u,p,this._editor.getSelection());this._executeEditorCommand("replaceAll",_)}_regularReplaceAll(e){const o=this._getReplacePattern();let s=this._findMatches(e,o.hasReplacementPatterns||this._state.preserveCase,1073741824),l=[];for(let u=0,g=s.length;u<g;u++)l[u]=o.buildReplaceString(s[u].matches,this._state.preserveCase);let d=new ReplaceAllCommand(this._editor.getSelection(),s.map((e=>e.range)),l);this._executeEditorCommand("replaceAll",d)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),o=this._findMatches(e,!1,1073741824),s=o.map((e=>new b.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))),l=this._editor.getSelection();for(let d=0,u=s.length;d<u;d++){let e=s[d];if(e.equalsRange(l)){s=[l].concat(s.slice(0,d)).concat(s.slice(d+1));break}}this._editor.setSelections(s)}_executeEditorCommand(e,o){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,o),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}var B=s(5321),W=s(3331),V=s(3794);class FindOptionsWidget extends V.${constructor(e,o,s,d){super(),this._hideSoon=this._register(new l.pY((()=>this._hide()),2e3)),this._isVisible=!1,this._editor=e,this._state=o,this._keybindingService=s,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const u=d.getColorTheme().getColor(L.PRb),g=d.getColorTheme().getColor(L.Pvw),p=d.getColorTheme().getColor(L.XEs);this.caseSensitive=this._register(new W.vk({appendTitle:this._keybindingLabelFor(P.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:u,inputActiveOptionForeground:g,inputActiveOptionBackground:p})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange((()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)}))),this.wholeWords=this._register(new W.n3({appendTitle:this._keybindingLabelFor(P.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:u,inputActiveOptionForeground:g,inputActiveOptionBackground:p})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange((()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)}))),this.regex=this._register(new W.am({appendTitle:this._keybindingLabelFor(P.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:u,inputActiveOptionForeground:g,inputActiveOptionBackground:p})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange((()=>{this._state.change({isRegex:this.regex.checked},!1)}))),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange((e=>{let o=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,o=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,o=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,o=!0),!this._state.isRevealed&&o&&this._revealTemporarily()}))),this._register(B.j_(this._domNode,(e=>this._onMouseOut()))),this._register(B.nm(this._domNode,"mouseover",(e=>this._onMouseOver()))),this._applyTheme(d.getColorTheme()),this._register(d.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let o=this._keybindingService.lookupKeybinding(e);return o?` (${o.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return FindOptionsWidget.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let o={inputActiveOptionBorder:e.getColor(L.PRb),inputActiveOptionForeground:e.getColor(L.Pvw),inputActiveOptionBackground:e.getColor(L.XEs)};this.caseSensitive.style(o),this.wholeWords.style(o),this.regex.style(o)}}FindOptionsWidget.ID="editor.contrib.findOptionsWidget",(0,x.Ic)(((e,o)=>{const s=e.getColor(L.D0T);s&&o.addRule(`.monaco-editor .findOptionsWidget { background-color: ${s}; }`);const l=e.getColor(L.Hfx);l&&o.addRule(`.monaco-editor .findOptionsWidget { color: ${l}; }`);const d=e.getColor(L.rh);d&&o.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${d}; }`);const u=e.getColor(L.lRK);u&&o.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${u}; }`)}));var H=s(4669);function effectiveOptionValue(e,o){return 1===e||2!==e&&o}class FindReplaceState extends d.JT{constructor(){super(),this._onFindReplaceStateChange=this._register(new H.Q5),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return effectiveOptionValue(this._isRegexOverride,this._isRegex)}get wholeWord(){return effectiveOptionValue(this._wholeWordOverride,this._wholeWord)}get matchCase(){return effectiveOptionValue(this._matchCaseOverride,this._matchCase)}get preserveCase(){return effectiveOptionValue(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,o,s){let l={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},d=!1;0===o&&(e=0),e>o&&(e=o),this._matchesPosition!==e&&(this._matchesPosition=e,l.matchesPosition=!0,d=!0),this._matchesCount!==o&&(this._matchesCount=o,l.matchesCount=!0,d=!0),"undefined"!==typeof s&&(C.e.equalsRange(this._currentMatch,s)||(this._currentMatch=s,l.currentMatch=!0,d=!0)),d&&this._onFindReplaceStateChange.fire(l)}change(e,o,s=!0){var l;let d={moveCursor:o,updateHistory:s,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},u=!1;const g=this.isRegex,p=this.wholeWord,m=this.matchCase,f=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,d.searchString=!0,u=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,d.replaceString=!0,u=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,d.isRevealed=!0,u=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,d.isReplaceRevealed=!0,u=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(l=e.searchScope)||void 0===l?void 0:l.every((e=>{var o;return null===(o=this._searchScope)||void 0===o?void 0:o.some((o=>!C.e.equalsRange(o,e)))})))||(this._searchScope=e.searchScope,d.searchScope=!0,u=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,d.loop=!0,u=!0),"undefined"!==typeof e.isSearching&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,d.isSearching=!0,u=!0),"undefined"!==typeof e.filters&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,d.filters=!0,u=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,g!==this.isRegex&&(u=!0,d.isRegex=!0),p!==this.wholeWord&&(u=!0,d.wholeWord=!0),m!==this.matchCase&&(u=!0,d.matchCase=!0),f!==this.preserveCase&&(u=!0,d.preserveCase=!0),u&&this._onFindReplaceStateChange.fire(d)}canNavigateBack(){return this.canNavigateInLoop()||1!==this.matchesPosition}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=O}}var z=s(5152),U=s(6229),K=s(3098),j=s(3046),G=s(7301),q=s(1432),Q=s(3580),Z=s(7466);function showHistoryKeybindingHint(e){var o,s;return"Up"===(null===(o=e.lookupKeybinding("history.showPrevious"))||void 0===o?void 0:o.getElectronAccelerator())&&"Down"===(null===(s=e.lookupKeybinding("history.showNext"))||void 0===s?void 0:s.getElectronAccelerator())}var Y=s(9554),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const J=(0,Y.q5)("find-selection",j.lA.selection,Q.N("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),X=(0,Y.q5)("find-collapsed",j.lA.chevronRight,Q.N("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),ee=(0,Y.q5)("find-expanded",j.lA.chevronDown,Q.N("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),te=(0,Y.q5)("find-replace",j.lA.replace,Q.N("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),ie=(0,Y.q5)("find-replace-all",j.lA.replaceAll,Q.N("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),ne=(0,Y.q5)("find-previous-match",j.lA.arrowUp,Q.N("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),oe=(0,Y.q5)("find-next-match",j.lA.arrowDown,Q.N("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),se=Q.N("label.find","Find"),re=Q.N("placeholder.find","Find"),ae=Q.N("label.previousMatchButton","Previous Match"),le=Q.N("label.nextMatchButton","Next Match"),ce=Q.N("label.toggleSelectionFind","Find in Selection"),de=Q.N("label.closeButton","Close"),he=Q.N("label.replace","Replace"),ue=Q.N("placeholder.replace","Replace"),ge=Q.N("label.replaceButton","Replace"),pe=Q.N("label.replaceAllButton","Replace All"),me=Q.N("label.toggleReplaceButton","Toggle Replace"),fe=Q.N("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",O),_e=Q.N("label.matchesLocation","{0} of {1}"),Ce=Q.N("label.noResults","No results"),ve=419,be=275,we=be-54;let Se=69;const ye=33,Le="ctrlEnterReplaceAll.windows.donotask",xe=q.dz?256:2048;class FindWidgetViewZone{constructor(e){this.afterLineNumber=e,this.heightInPx=ye,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function stopPropagationForMultiLineUpwards(e,o,s){const l=!!o.match(/\n/);s&&l&&s.selectionStart>0&&e.stopPropagation()}function stopPropagationForMultiLineDownwards(e,o,s){const l=!!o.match(/\n/);s&&l&&s.selectionEnd<s.value.length&&e.stopPropagation()}class FindWidget extends V.${constructor(e,o,s,u,g,p,m,f,_){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=o,this._state=s,this._contextViewProvider=u,this._keybindingService=g,this._contextKeyService=p,this._storageService=f,this._notificationService=_,this._ctrlEnterReplaceAllWarningPrompted=!!f.getBoolean(Le,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new l.vp(500),this._register((0,d.OF)((()=>this._updateHistoryDelayer.cancel()))),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration((e=>{if(e.hasChanged(81)&&(this._codeEditor.getOption(81)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(131)&&this._tryUpdateWidgetWidth(),e.hasChanged(2)&&this.updateAccessibilitySupport(),e.hasChanged(35)){const e=this._codeEditor.getOption(35).addExtraSpaceOnTop;e&&!this._viewZone&&(this._viewZone=new FindWidgetViewZone(0),this._showViewZone()),!e&&this._viewZone&&this._removeViewZone()}}))),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection((()=>{this._isVisible&&this._updateToggleSelectionFindButton()}))),this._register(this._codeEditor.onDidFocusEditorWidget((()=>__awaiter(this,void 0,void 0,(function*(){if(this._isVisible){let e=yield this._controller.getGlobalBufferTerm();e&&e!==this._state.searchString&&(this._state.change({searchString:e},!1),this._findInput.select())}}))))),this._findInputFocused=D.bindTo(p),this._findFocusTracker=this._register(B.go(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus((()=>{this._findInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._findFocusTracker.onDidBlur((()=>{this._findInputFocused.set(!1)}))),this._replaceInputFocused=E.bindTo(p),this._replaceFocusTracker=this._register(B.go(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus((()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._replaceFocusTracker.onDidBlur((()=>{this._replaceInputFocused.set(!1)}))),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new FindWidgetViewZone(0)),this._applyTheme(m.getColorTheme()),this._register(m.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel((()=>{this._isVisible&&(this._viewZoneId=void 0)}))),this._register(this._codeEditor.onDidScrollChange((e=>{e.scrollTopChanged?this._layoutViewZone():setTimeout((()=>{this._layoutViewZone()}),0)})))}getId(){return FindWidget.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(81)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=B.w(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let e=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",e),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,G.dL)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let e;if(this._matchesCount.style.minWidth=Se+"px",this._state.matchesCount>=O?this._matchesCount.title=fe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let o=String(this._state.matchesCount);this._state.matchesCount>=O&&(o+="+");let s=String(this._state.matchesPosition);"0"===s&&(s="?"),e=u.WU(_e,s,o)}else e=Ce;this._matchesCount.appendChild(document.createTextNode(e)),(0,z.Z9)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Se=Math.max(Se,this._matchesCount.clientWidth)}_getAriaLabel(e,o,s){if(e===Ce)return""===s?Q.N("ariaSearchNoResultEmpty","{0} found",e):Q.N("ariaSearchNoResult","{0} found for '{1}'",e,s);if(o){const l=Q.N("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,s,o.startLineNumber+":"+o.startColumn),d=this._codeEditor.getModel();if(d&&o.startLineNumber<=d.getLineCount()&&o.startLineNumber>=1){const e=d.getLineContent(o.startLineNumber);return`${e}, ${l}`}return l}return Q.N("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,s)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),o=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),s=this._toggleSelectionFind.checked;this._isVisible&&(s||o)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,o=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&o&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&o&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let s=!this._codeEditor.getOption(81);this._toggleReplaceBtn.setEnabled(this._isVisible&&s)}_reveal(){if(this._revealTimeouts.forEach((e=>{clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const o=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=o;break}default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((()=>{this._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);let o=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const s=this._codeEditor.getDomNode();if(s){const l=B.i(s),d=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),u=l.left+(d?d.left:0),g=d?d.top:0;if(this._viewZone&&g<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(o=!1);const s=B.xQ(this._domNode).left;u>s&&(o=!1);const d=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition()),g=l.left+(d?d.left:0);g>s&&(o=!1)}}}this._showViewZone(o)}}_hide(e){this._revealTimeouts.forEach((e=>{clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){const o=this._codeEditor.getOption(35).addExtraSpaceOnTop;if(!o)return void this._removeViewZone();if(!this._isVisible)return;const s=this._viewZone;void 0===this._viewZoneId&&s&&this._codeEditor.changeViewZones((o=>{s.heightInPx=this._getHeight(),this._viewZoneId=o.addZone(s),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+s.heightInPx)}))}_showViewZone(e=!0){if(!this._isVisible)return;const o=this._codeEditor.getOption(35).addExtraSpaceOnTop;if(!o)return;void 0===this._viewZone&&(this._viewZone=new FindWidgetViewZone(0));const s=this._viewZone;this._codeEditor.changeViewZones((o=>{if(void 0!==this._viewZoneId){const l=this._getHeight();if(l===s.heightInPx)return;let d=l-s.heightInPx;return s.heightInPx=l,o.layoutZone(this._viewZoneId),void(e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+d))}{let l=this._getHeight();if(l-=this._codeEditor.getOption(75).top,l<=0)return;s.heightInPx=l,this._viewZoneId=o.addZone(s),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+l)}}))}_removeViewZone(){this._codeEditor.changeViewZones((e=>{void 0!==this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))}))}_applyTheme(e){let o={inputActiveOptionBorder:e.getColor(L.PRb),inputActiveOptionBackground:e.getColor(L.XEs),inputActiveOptionForeground:e.getColor(L.Pvw),inputBackground:e.getColor(L.sEe),inputForeground:e.getColor(L.zJb),inputBorder:e.getColor(L.dt_),inputValidationInfoBackground:e.getColor(L._lC),inputValidationInfoForeground:e.getColor(L.YI3),inputValidationInfoBorder:e.getColor(L.EPQ),inputValidationWarningBackground:e.getColor(L.RV_),inputValidationWarningForeground:e.getColor(L.SUG),inputValidationWarningBorder:e.getColor(L.C3g),inputValidationErrorBackground:e.getColor(L.paE),inputValidationErrorForeground:e.getColor(L._t9),inputValidationErrorBorder:e.getColor(L.OZR)};this._findInput.style(o),this._replaceInput.style(o),this._toggleSelectionFind.style(o)}_tryUpdateWidgetWidth(){if(!this._isVisible)return;if(!B.Uw(this._domNode))return;const e=this._codeEditor.getLayoutInfo(),o=e.contentWidth;if(o<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const s=e.width,l=e.minimap.minimapWidth;let d=!1,u=!1,g=!1;if(this._resized){let e=B.w(this._domNode);if(e>ve)return this._domNode.style.maxWidth=s-28-l-15+"px",void(this._replaceInput.width=B.w(this._findInput.domNode))}if(ve+28+l>=s&&(u=!0),ve+28+l-Se>=s&&(g=!0),ve+28+l-Se>=s+50&&(d=!0),this._domNode.classList.toggle("collapsed-find-widget",d),this._domNode.classList.toggle("narrow-find-widget",g),this._domNode.classList.toggle("reduced-find-widget",u),g||d||(this._domNode.style.maxWidth=s-28-l-15+"px"),this._resized){this._findInput.inputBox.layout();let e=this._findInput.inputBox.element.clientWidth;e>0&&(this._replaceInput.width=e)}else this._isReplaceVisible&&(this._replaceInput.width=B.w(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map((e=>{1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));const o=this._state.currentMatch;return e.startLineNumber===e.endLineNumber||C.e.equalsRange(e,o)?null:e})).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){return e.equals(3|xe)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?stopPropagationForMultiLineUpwards(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?stopPropagationForMultiLineDownwards(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(e){return e.equals(3|xe)?(this._keybindingService.dispatchEvent(e,e.target)||(q.ED&&q.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(Q.N("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Le,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?stopPropagationForMultiLineUpwards(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?stopPropagationForMultiLineDownwards(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let o=this._keybindingService.lookupKeybinding(e);return o?` (${o.getLabel()})`:""}_buildDomNode(){const e=!0,o=!0;this._findInput=this._register(new Z.Yb(null,this._contextViewProvider,{width:we,label:se,placeholder:re,appendCaseSensitiveLabel:this._keybindingLabelFor(P.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(P.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(P.ToggleRegexCommand),validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return new RegExp(e,"gu"),null}catch(o){return{content:o.message}}},flexibleHeight:e,flexibleWidth:o,flexibleMaxHeight:118,showHistoryHint:()=>showHistoryKeybindingHint(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((e=>this._onFindInputKeyDown(e)))),this._register(this._findInput.inputBox.onDidChange((()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((e=>{e.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((e=>{this._tryUpdateHeight()&&this._showViewZone()}))),q.IJ&&this._register(this._findInput.onMouseDown((e=>this._onFindInputMouseDown(e)))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new SimpleButton({label:ae+this._keybindingLabelFor(P.PreviousMatchFindAction),icon:ne,onTrigger:()=>{this._codeEditor.getAction(P.PreviousMatchFindAction).run().then(void 0,G.dL)}})),this._nextBtn=this._register(new SimpleButton({label:le+this._keybindingLabelFor(P.NextMatchFindAction),icon:oe,onTrigger:()=>{this._codeEditor.getAction(P.NextMatchFindAction).run().then(void 0,G.dL)}}));let s=document.createElement("div");s.className="find-part",s.appendChild(this._findInput.domNode);const l=document.createElement("div");l.className="find-actions",s.appendChild(l),l.appendChild(this._matchesCount),l.appendChild(this._prevBtn.domNode),l.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new U.X({icon:J,title:ce+this._keybindingLabelFor(P.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange((()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let e=this._codeEditor.getSelections();e.map((e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e))).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}else this._state.change({searchScope:null},!0)}))),l.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new SimpleButton({label:de+this._keybindingLabelFor(P.CloseFindWidgetCommand),icon:Y.s_,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}})),l.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new Z.Nq(null,void 0,{label:he,placeholder:ue,appendPreserveCaseLabel:this._keybindingLabelFor(P.TogglePreserveCaseCommand),history:[],flexibleHeight:e,flexibleWidth:o,flexibleMaxHeight:118,showHistoryHint:()=>showHistoryKeybindingHint(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((e=>this._onReplaceInputKeyDown(e)))),this._register(this._replaceInput.inputBox.onDidChange((()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((e=>{e.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())}))),this._replaceBtn=this._register(new SimpleButton({label:ge+this._keybindingLabelFor(P.ReplaceOneAction),icon:te,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026)&&(this._closeBtn.focus(),e.preventDefault())}})),this._replaceAllBtn=this._register(new SimpleButton({label:pe+this._keybindingLabelFor(P.ReplaceAllAction),icon:ie,onTrigger:()=>{this._controller.replaceAll()}}));let d=document.createElement("div");d.className="replace-part",d.appendChild(this._replaceInput.domNode);const u=document.createElement("div");u.className="replace-actions",d.appendChild(u),u.appendChild(this._replaceBtn.domNode),u.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new SimpleButton({label:me,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=B.w(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${ve}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(s),this._domNode.appendChild(d),this._resizeSash=new K.g(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let g=ve;this._register(this._resizeSash.onDidStart((()=>{g=B.w(this._domNode)}))),this._register(this._resizeSash.onDidChange((e=>{this._resized=!0;let o=g+e.startX-e.currentX;if(o<ve)return;const s=parseFloat(B.Dx(this._domNode).maxWidth)||0;o>s||(this._domNode.style.width=`${o}px`,this._isReplaceVisible&&(this._replaceInput.width=B.w(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())}))),this._register(this._resizeSash.onDidReset((()=>{const e=B.w(this._domNode);if(e<ve)return;let o=ve;if(!this._resized||e===ve){const e=this._codeEditor.getLayoutInfo();o=e.width-28-e.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${o}px`,this._isReplaceVisible&&(this._replaceInput.width=B.w(this._findInput.domNode)),this._findInput.inputBox.layout()})))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}FindWidget.ID="editor.contrib.findWidget";class SimpleButton extends V.${constructor(e){super(),this._opts=e;let o="button";this._opts.className&&(o=o+" "+this._opts.className),this._opts.icon&&(o=o+" "+x.kS.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=o,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,(e=>{this._opts.onTrigger(),e.preventDefault()})),this.onkeydown(this._domNode,(e=>{if(e.equals(10)||e.equals(3))return this._opts.onTrigger(),void e.preventDefault();this._opts.onKeyDown&&this._opts.onKeyDown(e)}))}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...x.kS.asClassNameArray(X)),this._domNode.classList.add(...x.kS.asClassNameArray(ee))):(this._domNode.classList.remove(...x.kS.asClassNameArray(ee)),this._domNode.classList.add(...x.kS.asClassNameArray(X)))}}(0,x.Ic)(((e,o)=>{const addBackgroundColorRule=(e,s)=>{s&&o.addRule(`.monaco-editor ${e} { background-color: ${s}; }`)};addBackgroundColorRule(".findMatch",e.getColor(L.MUv)),addBackgroundColorRule(".currentFindMatch",e.getColor(L.nyM)),addBackgroundColorRule(".findScope",e.getColor(L.jUe));const s=e.getColor(L.D0T);addBackgroundColorRule(".find-widget",s);const l=e.getColor(L.rh);l&&o.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${l}; }`);const d=e.getColor(L.EiJ);d&&o.addRule(`.monaco-editor .findMatch { border: 1px ${"hc"===e.type?"dotted":"solid"} ${d}; box-sizing: border-box; }`);const u=e.getColor(L.pnM);u&&o.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${u}; padding: 1px; box-sizing: border-box; }`);const g=e.getColor(L.gkn);g&&o.addRule(`.monaco-editor .findScope { border: 1px ${"hc"===e.type?"dashed":"solid"} ${g}; }`);const p=e.getColor(L.lRK);p&&o.addRule(`.monaco-editor .find-widget { border: 1px solid ${p}; }`);const m=e.getColor(L.Hfx);m&&o.addRule(`.monaco-editor .find-widget { color: ${m}; }`);const f=e.getColor(L.Ido);f&&o.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${f}; }`);const _=e.getColor(L.Ng6);if(_)o.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${_}; }`);else{const s=e.getColor(L.D1_);s&&o.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${s}; }`)}const C=e.getColor(L.lUq);C&&o.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${C} !important;\n\t\t}\n\t`);const b=e.getColor(L.R80);b&&o.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${b}; }`)}));var ke=s(4144),Ne=s(4972),De=s(5606),Ee=s(1847),Te=s(9422),Ie=s(7060),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},findController_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const Ae=524288;function getSelectionSearchString(e,o="single",s=!1){if(!e.hasModel())return null;const l=e.getSelection();if("single"===o&&l.startLineNumber===l.endLineNumber||"multiple"===o)if(l.isEmpty()){const o=e.getConfiguredWordAtPosition(l.getStartPosition());if(o&&!1===s)return o.word}else if(e.getModel().getValueLengthInRange(l)<Ae)return e.getModel().getValueInRange(l);return null}let Me=class CommonFindController extends d.JT{constructor(e,o,s,d){super(),this._editor=e,this._findWidgetVisible=N.bindTo(o),this._contextKeyService=o,this._storageService=s,this._clipboardService=d,this._updateHistoryDelayer=new l.vp(500),this._state=this._register(new FindReplaceState),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._model=null,this._register(this._editor.onDidChangeModel((()=>{let e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})})))}get editor(){return this._editor}static get(e){return e.getContribution(CommonFindController.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!D.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map((e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e))).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=u.ec(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,o){return findController_awaiter(this,void 0,void 0,(function*(){if(this.disposeModel(),!this._editor.hasModel())return;let s=Object.assign(Object.assign({},o),{isRevealed:!0});if("single"===e.seedSearchStringFromSelection){let o=getSelectionSearchString(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);o&&(this._state.isRegex?s.searchString=u.ec(o):s.searchString=o)}else if("multiple"===e.seedSearchStringFromSelection&&!e.updateSearchScope){let o=getSelectionSearchString(this._editor,e.seedSearchStringFromSelection);o&&(s.searchString=o)}if(!s.searchString&&e.seedSearchStringFromGlobalClipboard){let e=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(s.searchString=e)}if(e.forceRevealReplace||s.isReplaceRevealed?s.isReplaceRevealed=!0:this._findWidgetVisible.get()||(s.isReplaceRevealed=!1),e.updateSearchScope){let e=this._editor.getSelections();e.some((e=>!e.isEmpty()))&&(s.searchScope=e)}s.loop=e.loop,this._state.change(s,!1),this._model||(this._model=new FindModelBoundToEditorModel(this._editor,this._state))}))}start(e,o){return this._start(e,o)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){return!!this._model&&(this._model.replaceAll(),!0)}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return findController_awaiter(this,void 0,void 0,(function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}))}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Me.ID="editor.contrib.findController",Me=__decorate([__param(1,k.i6),__param(2,Ie.Uy),__param(3,Ne.p)],Me);let Re=class FindController extends Me{constructor(e,o,s,l,d,u,g,p){super(e,s,g,p),this._contextViewService=o,this._keybindingService=l,this._themeService=d,this._notificationService=u,this._widget=null,this._findOptionsWidget=null}_start(e,o){const s=Object.create(null,{_start:{get:()=>super._start}});return findController_awaiter(this,void 0,void 0,(function*(){this._widget||this._createFindWidget();const l=this._editor.getSelection();let d=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":d=!0;break;case"never":d=!1;break;case"multiline":{const e=!!l&&l.startLineNumber!==l.endLineNumber;d=e;break}default:break}e.updateSearchScope=e.updateSearchScope||d,yield s._start.call(this,e,o),this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput())}))}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new FindWidget(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new FindOptionsWidget(this._editor,this._state,this._keybindingService,this._themeService))}};Re=__decorate([__param(1,De.u),__param(2,k.i6),__param(3,Ee.d),__param(4,x.XE),__param(5,Te.lT),__param(6,Ie.Uy),__param(7,Ne.p)],Re);const Pe=(0,g.rn)(new g.jY({id:P.StartFindAction,label:Q.N("startFindAction","Find"),alias:"Find",precondition:k.Ao.or(p.u.focus,k.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:ke.eH.MenubarEditMenu,group:"3_find",title:Q.N({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));Pe.addImplementation(0,((e,o,s)=>{const l=Me.get(o);return!!l&&l.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==o.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===o.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:o.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:o.getOption(35).loop})}));const Oe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:Q.N("actions.find.isRegexOverride",'Overrides "Use Regular Expression" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:Q.N("actions.find.wholeWordOverride",'Overrides "Match Whole Word" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:Q.N("actions.find.matchCaseOverride",'Overrides "Math Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:Q.N("actions.find.preserveCaseOverride",'Overrides "Preserve Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},findInSelection:{type:"boolean"}}}}]};class StartFindWithArgsAction extends g.R6{constructor(){super({id:P.StartFindWithArgs,label:Q.N("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Oe})}run(e,o,s){return findController_awaiter(this,void 0,void 0,(function*(){const e=Me.get(o);if(e){const l=s?{searchString:s.searchString,replaceString:s.replaceString,isReplaceRevealed:void 0!==s.replaceString,isRegex:s.isRegex,wholeWord:s.matchWholeWord,matchCase:s.isCaseSensitive,preserveCase:s.preserveCase}:{};yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==o.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===o.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null===s||void 0===s?void 0:s.findInSelection)||!1,loop:o.getOption(35).loop},l),e.setGlobalBufferTerm(e.getState().searchString)}}))}}class StartFindWithSelectionAction extends g.R6{constructor(){super({id:P.StartFindWithSelection,label:Q.N("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,o){return findController_awaiter(this,void 0,void 0,(function*(){const e=Me.get(o);e&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:o.getOption(35).loop}),e.setGlobalBufferTerm(e.getState().searchString))}))}}class MatchFindAction extends g.R6{run(e,o){return findController_awaiter(this,void 0,void 0,(function*(){const e=Me.get(o);e&&!this._run(e)&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==o.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===o.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:o.getOption(35).loop}),this._run(e))}))}}class NextMatchFindAction extends MatchFindAction{constructor(){super({id:P.NextMatchFindAction,label:Q.N("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:p.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:k.Ao.and(p.u.focus,D),primary:3,weight:100}]})}_run(e){const o=e.moveToNextMatch();return!!o&&(e.editor.pushUndoStop(),!0)}}class PreviousMatchFindAction extends MatchFindAction{constructor(){super({id:P.PreviousMatchFindAction,label:Q.N("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:p.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:k.Ao.and(p.u.focus,D),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class SelectionMatchFindAction extends g.R6{run(e,o){return findController_awaiter(this,void 0,void 0,(function*(){const e=Me.get(o);if(!e)return;const s="selection"===o.getOption(35).seedSearchStringFromSelection;let l=null;"never"!==o.getOption(35).seedSearchStringFromSelection&&(l=getSelectionSearchString(o,"single",s)),l&&e.setSearchString(l),this._run(e)||(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==o.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:s,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:o.getOption(35).loop}),this._run(e))}))}}class NextSelectionMatchFindAction extends SelectionMatchFindAction{constructor(){super({id:P.NextSelectionMatchFindAction,label:Q.N("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:p.u.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class PreviousSelectionMatchFindAction extends SelectionMatchFindAction{constructor(){super({id:P.PreviousSelectionMatchFindAction,label:Q.N("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:p.u.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const Fe=(0,g.rn)(new g.jY({id:P.StartFindReplaceAction,label:Q.N("startReplace","Replace"),alias:"Replace",precondition:k.Ao.or(p.u.focus,k.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:ke.eH.MenubarEditMenu,group:"3_find",title:Q.N({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Fe.addImplementation(0,((e,o,s)=>{if(!o.hasModel()||o.getOption(81))return!1;const l=Me.get(o);if(!l)return!1;const d=o.getSelection(),u=l.isFindInputFocused(),g=!d.isEmpty()&&d.startLineNumber===d.endLineNumber&&"never"!==o.getOption(35).seedSearchStringFromSelection&&!u,p=u||g?2:1;return l.start({forceRevealReplace:!0,seedSearchStringFromSelection:g?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===o.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==o.getOption(35).seedSearchStringFromSelection,shouldFocus:p,shouldAnimate:!0,updateSearchScope:!1,loop:o.getOption(35).loop})})),(0,g._K)(Me.ID,Re),(0,g.Qr)(StartFindWithArgsAction),(0,g.Qr)(StartFindWithSelectionAction),(0,g.Qr)(NextMatchFindAction),(0,g.Qr)(PreviousMatchFindAction),(0,g.Qr)(NextSelectionMatchFindAction),(0,g.Qr)(PreviousSelectionMatchFindAction);const Be=g._l.bindToContribution(Me.get);(0,g.fK)(new Be({id:P.CloseFindWidgetCommand,precondition:N,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:k.Ao.and(p.u.focus,k.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,g.fK)(new Be({id:P.ToggleCaseSensitiveCommand,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:p.u.focus,primary:T.primary,mac:T.mac,win:T.win,linux:T.linux}})),(0,g.fK)(new Be({id:P.ToggleWholeWordCommand,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:p.u.focus,primary:I.primary,mac:I.mac,win:I.win,linux:I.linux}})),(0,g.fK)(new Be({id:P.ToggleRegexCommand,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:p.u.focus,primary:A.primary,mac:A.mac,win:A.win,linux:A.linux}})),(0,g.fK)(new Be({id:P.ToggleSearchScopeCommand,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:p.u.focus,primary:M.primary,mac:M.mac,win:M.win,linux:M.linux}})),(0,g.fK)(new Be({id:P.TogglePreserveCaseCommand,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:p.u.focus,primary:R.primary,mac:R.mac,win:R.win,linux:R.linux}})),(0,g.fK)(new Be({id:P.ReplaceOneAction,precondition:N,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:p.u.focus,primary:3094}})),(0,g.fK)(new Be({id:P.ReplaceOneAction,precondition:N,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:k.Ao.and(p.u.focus,E),primary:3}})),(0,g.fK)(new Be({id:P.ReplaceAllAction,precondition:N,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:p.u.focus,primary:2563}})),(0,g.fK)(new Be({id:P.ReplaceAllAction,precondition:N,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:k.Ao.and(p.u.focus,E),primary:void 0,mac:{primary:2051}}})),(0,g.fK)(new Be({id:P.SelectAllMatchesAction,precondition:N,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:p.u.focus,primary:515}}))},5808:function(e,o,s){"use strict";s.r(o),s.d(o,{FoldingController:function(){return Y},editorFoldForeground:function(){return X},foldBackgroundBackground:function(){return J}});var l=s(5393),d=s(7301),u=s(2258),g=s(5976),p=s(2677),m=s(8401),f=s(3407),_=s(6830),C=s(9102),b=s(3155),w=s(5638),S=s(4669);const y=65535,L=16777215,x=4278190080;class FoldingRegions{constructor(e,o,s){if(e.length!==o.length||e.length>y)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=o,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=s,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],isInsideLast=(o,s)=>{let l=e[e.length-1];return this.getStartLineNumber(l)<=o&&this.getEndLineNumber(l)>=s};for(let o=0,s=this._startIndexes.length;o<s;o++){let s=this._startIndexes[o],l=this._endIndexes[o];if(s>L||l>L)throw new Error("startLineNumber or endLineNumber must not exceed "+L);while(e.length>0&&!isInsideLast(s,l))e.pop();let d=e.length>0?e[e.length-1]:-1;e.push(o),this._startIndexes[o]=s+((255&d)<<24),this._endIndexes[o]=l+((65280&d)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&L}getEndLineNumber(e){return this._endIndexes[e]&L}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let o=e/32|0,s=e%32;return 0!==(this._collapseStates[o]&1<<s)}setCollapsed(e,o){let s=e/32|0,l=e%32,d=this._collapseStates[s];this._collapseStates[s]=o?d|1<<l:d&~(1<<l)}setCollapsedAllOfType(e,o){let s=!1;if(this._types)for(let l=0;l<this._types.length;l++)this._types[l]===e&&(this.setCollapsed(l,o),s=!0);return s}toRegion(e){return new FoldingRegion(this,e)}getParentIndex(e){this.ensureParentIndices();let o=((this._startIndexes[e]&x)>>>24)+((this._endIndexes[e]&x)>>>16);return o===y?-1:o}contains(e,o){return this.getStartLineNumber(e)<=o&&this.getEndLineNumber(e)>=o}findIndex(e){let o=0,s=this._startIndexes.length;if(0===s)return-1;while(o<s){let l=Math.floor((o+s)/2);e<this.getStartLineNumber(l)?s=l:o=l+1}return o-1}findRange(e){let o=this.findIndex(e);if(o>=0){let s=this.getEndLineNumber(o);if(s>=e)return o;o=this.getParentIndex(o);while(-1!==o){if(this.contains(o,e))return o;o=this.getParentIndex(o)}}return-1}toString(){let e=[];for(let o=0;o<this.length;o++)e[o]=`[${this.isCollapsed(o)?"+":"-"}] ${this.getStartLineNumber(o)}/${this.getEndLineNumber(o)}`;return e.join(", ")}}class FoldingRegion{constructor(e,o){this.ranges=e,this.index=o}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class FoldingModel{constructor(e,o){this._updateEventEmitter=new S.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=o,this._regions=new FoldingRegions(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort(((e,o)=>e.regionIndex-o.regionIndex));const o={};this._decorationProvider.changeDecorations((s=>{let l=0,d=-1,u=-1;const updateDecorationsUntil=e=>{while(l<e){const e=this._regions.getEndLineNumber(l),o=this._regions.isCollapsed(l);e<=d&&s.changeDecorationOptions(this._editorDecorationIds[l],this._decorationProvider.getDecorationOption(o,e<=u)),o&&e>u&&(u=e),l++}};for(let g of e){let e=g.regionIndex,s=this._editorDecorationIds[e];if(s&&!o[s]){o[s]=!0,updateDecorationsUntil(e);let l=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,l),d=Math.max(d,this._regions.getEndLineNumber(e))}}updateDecorationsUntil(this._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,o=[]){let s=[],isBlocked=(e,s)=>{for(let l of o)if(e<l&&l<=s)return!0;return!1},l=-1,initRange=(o,d)=>{const u=e.getStartLineNumber(o),g=e.getEndLineNumber(o);d||(d=e.isCollapsed(o)),d&&isBlocked(u,g)&&(d=!1),e.setCollapsed(o,d);const p=this._textModel.getLineMaxColumn(u),m={startLineNumber:u,startColumn:Math.max(p-1,1),endLineNumber:u,endColumn:p};s.push({range:m,options:this._decorationProvider.getDecorationOption(d,g<=l)}),d&&g>l&&(l=g)},d=0,nextCollapsed=()=>{while(d<this._regions.length){let e=this._regions.isCollapsed(d);if(d++,e)return d-1}return-1},u=0,g=nextCollapsed();while(-1!==g&&u<e.length){let o=this._textModel.getDecorationRange(this._editorDecorationIds[g]);if(o){let s=o.startLineNumber;if(o.startColumn===Math.max(o.endColumn-1,1)&&this._textModel.getLineMaxColumn(s)===o.endColumn)while(u<e.length){let o=e.getStartLineNumber(u);if(!(s>=o))break;initRange(u,s===o),u++}}g=nextCollapsed()}while(u<e.length)initRange(u,!1),u++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,s),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let o=0;o<this._regions.length;o++)if(this._regions.isCollapsed(o)){let s=this._textModel.getDecorationRange(this._editorDecorationIds[o]);if(s){let l=s.startLineNumber,d=s.endLineNumber+this._regions.getEndLineNumber(o)-this._regions.getStartLineNumber(o);e.push({startLineNumber:l,endLineNumber:d})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let o=[];for(let s of e){let e=this.getRegionAtLine(s.startLineNumber);e&&!e.isCollapsed&&o.push(e)}this.toggleCollapseState(o)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,o){let s=[];if(this._regions){let l=this._regions.findRange(e),d=1;while(l>=0){let e=this._regions.toRegion(l);o&&!o(e,d)||s.push(e),d++,l=e.parentIndex}}return s}getRegionAtLine(e){if(this._regions){let o=this._regions.findRange(e);if(o>=0)return this._regions.toRegion(o)}return null}getRegionsInside(e,o){let s=[],l=e?e.regionIndex+1:0,d=e?e.endLineNumber:Number.MAX_VALUE;if(o&&2===o.length){const e=[];for(let u=l,g=this._regions.length;u<g;u++){let l=this._regions.toRegion(u);if(!(this._regions.getStartLineNumber(u)<d))break;while(e.length>0&&!l.containedBy(e[e.length-1]))e.pop();e.push(l),o(l,e.length)&&s.push(l)}}else for(let u=l,g=this._regions.length;u<g;u++){let e=this._regions.toRegion(u);if(!(this._regions.getStartLineNumber(u)<d))break;o&&!o(e)||s.push(e)}return s}}function toggleCollapseState(e,o,s){let l=[];for(let d of s){let s=e.getRegionAtLine(d);if(s){const d=!s.isCollapsed;if(l.push(s),o>1){let u=e.getRegionsInside(s,((e,s)=>e.isCollapsed!==d&&s<o));l.push(...u)}}}e.toggleCollapseState(l)}function setCollapseStateLevelsDown(e,o,s=Number.MAX_VALUE,l){let d=[];if(l&&l.length>0)for(let u of l){let l=e.getRegionAtLine(u);if(l&&(l.isCollapsed!==o&&d.push(l),s>1)){let u=e.getRegionsInside(l,((e,l)=>e.isCollapsed!==o&&l<s));d.push(...u)}}else{let l=e.getRegionsInside(null,((e,l)=>e.isCollapsed!==o&&l<s));d.push(...l)}e.toggleCollapseState(d)}function setCollapseStateLevelsUp(e,o,s,l){let d=[];for(let u of l){let l=e.getAllRegionsAtLine(u,((e,l)=>e.isCollapsed!==o&&l<=s));d.push(...l)}e.toggleCollapseState(d)}function setCollapseStateUp(e,o,s){let l=[];for(let d of s){let s=e.getAllRegionsAtLine(d,(e=>e.isCollapsed!==o));s.length>0&&l.push(s[0])}e.toggleCollapseState(l)}function setCollapseStateAtLevel(e,o,s,l){let filter=(e,d)=>d===o&&e.isCollapsed!==s&&!l.some((o=>e.containsLine(o))),d=e.getRegionsInside(null,filter);e.toggleCollapseState(d)}function setCollapseStateForRest(e,o,s){let l=[];for(let u of s){const o=e.getAllRegionsAtLine(u,void 0);o.length>0&&l.push(o[0])}let filter=e=>l.every((o=>!o.containedBy(e)&&!e.containedBy(o)))&&e.isCollapsed!==o,d=e.getRegionsInside(null,filter);e.toggleCollapseState(d)}function setCollapseStateForMatchingLines(e,o,s){let l=e.textModel,d=e.regions,u=[];for(let g=d.length-1;g>=0;g--)if(s!==d.isCollapsed(g)){let e=d.getStartLineNumber(g);o.test(l.getLineContent(e))&&u.push(d.toRegion(g))}e.toggleCollapseState(u)}function setCollapseStateForType(e,o,s){let l=e.regions,d=[];for(let u=l.length-1;u>=0;u--)s!==l.isCollapsed(u)&&o===l.getType(u)&&d.push(l.toRegion(u));e.toggleCollapseState(d)}function getParentFoldLine(e,o){let s=null,l=o.getRegionAtLine(e);if(null!==l&&(s=l.startLineNumber,e===s)){let e=l.parentIndex;s=-1!==e?o.regions.getStartLineNumber(e):null}return s}function getPreviousFoldLine(e,o){let s=o.getRegionAtLine(e);if(null!==s&&s.startLineNumber===e){if(e!==s.startLineNumber)return s.startLineNumber;{let e=s.parentIndex,l=0;-1!==e&&(l=o.regions.getStartLineNumber(s.parentIndex));while(null!==s){if(!(s.regionIndex>0))return null;if(s=o.regions.toRegion(s.regionIndex-1),s.startLineNumber<=l)return null;if(s.parentIndex===e)return s.startLineNumber}}}else if(o.regions.length>0){s=o.regions.toRegion(o.regions.length-1);while(null!==s){if(s.startLineNumber<e)return s.startLineNumber;s=s.regionIndex>0?o.regions.toRegion(s.regionIndex-1):null}}return null}function getNextFoldLine(e,o){let s=o.getRegionAtLine(e);if(null!==s&&s.startLineNumber===e){let e=s.parentIndex,l=0;if(-1!==e)l=o.regions.getEndLineNumber(s.parentIndex);else{if(0===o.regions.length)return null;l=o.regions.getEndLineNumber(o.regions.length-1)}while(null!==s){if(!(s.regionIndex<o.regions.length))return null;if(s=o.regions.toRegion(s.regionIndex+1),s.startLineNumber>=l)return null;if(s.parentIndex===e)return s.startLineNumber}}else if(o.regions.length>0){s=o.regions.toRegion(0);while(null!==s){if(s.startLineNumber>e)return s.startLineNumber;s=s.regionIndex<o.regions.length?o.regions.toRegion(s.regionIndex+1):null}}return null}var k=s(9488),N=s(4314),D=s(3795);class HiddenRangeModel{constructor(e){this._updateEventEmitter=new S.Q5,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange((e=>this.updateHiddenRanges())),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some((e=>e.range.endLineNumber!==e.range.startLineNumber||0!==(0,D.Q)(e.text)[0])))}updateHiddenRanges(){let e=!1,o=[],s=0,l=0,d=Number.MAX_VALUE,u=-1,g=this._foldingModel.regions;for(;s<g.length;s++){if(!g.isCollapsed(s))continue;let p=g.getStartLineNumber(s)+1,m=g.getEndLineNumber(s);d<=p&&m<=u||(!e&&l<this._hiddenRanges.length&&this._hiddenRanges[l].startLineNumber===p&&this._hiddenRanges[l].endLineNumber===m?(o.push(this._hiddenRanges[l]),l++):(e=!0,o.push(new N.e(p,1,m,1))),d=p,u=m)}(this._hasLineChanges||e||l<this._hiddenRanges.length)&&this.applyHiddenRanges(o)}applyMemento(e){if(!Array.isArray(e)||0===e.length)return!1;let o=[];for(let s of e){if(!s.startLineNumber||!s.endLineNumber)return!1;o.push(new N.e(s.startLineNumber+1,1,s.endLineNumber,1))}return this.applyHiddenRanges(o),!0}getMemento(){return this._hiddenRanges.map((e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber})))}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==findRange(this._hiddenRanges,e)}adjustSelections(e){let o=!1,s=this._foldingModel.textModel,l=null,adjustLine=e=>(l&&isInside(e,l)||(l=findRange(this._hiddenRanges,e)),l?l.startLineNumber-1:null);for(let d=0,u=e.length;d<u;d++){let l=e[d],u=adjustLine(l.startLineNumber);u&&(l=l.setStartPosition(u,s.getLineMaxColumn(u)),o=!0);let g=adjustLine(l.endLineNumber);g&&(l=l.setEndPosition(g,s.getLineMaxColumn(g)),o=!0),e[d]=l}return o}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function isInside(e,o){return e>=o.startLineNumber&&e<=o.endLineNumber}function findRange(e,o){let s=(0,k.lG)(e,(e=>o<e.startLineNumber))-1;return s>=0&&e[s].endLineNumber>=o?e[s]:null}var E=s(9616);const T=5e3,I="indent";class IndentRangeProvider{constructor(e,o,s){this.editorModel=e,this.languageConfigurationService=o,this.maxFoldingRegions=s,this.id=I}dispose(){}compute(e,o){let s=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,l=s&&!!s.offSide,d=s&&s.markers;return Promise.resolve(computeRanges(this.editorModel,l,d,this.maxFoldingRegions,o))}}class RangesCollector{constructor(e,o){this._notifyTooManyRegions=o,this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,o,s){if(e>L||o>L)return;let l=this._length;this._startIndexes[l]=e,this._endIndexes[l]=o,this._length++,s<1e3&&(this._indentOccurrences[s]=(this._indentOccurrences[s]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),o=new Uint32Array(this._length);for(let s=this._length-1,l=0;s>=0;s--,l++)e[l]=this._startIndexes[s],o[l]=this._endIndexes[s];return new FoldingRegions(e,o)}{this._notifyTooManyRegions&&this._notifyTooManyRegions(this._foldingRangesLimit);let o=0,s=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let l=this._indentOccurrences[e];if(l){if(l+o>this._foldingRangesLimit){s=e;break}o+=l}}const l=e.getOptions().tabSize;let d=new Uint32Array(this._foldingRangesLimit),u=new Uint32Array(this._foldingRangesLimit);for(let g=this._length-1,p=0;g>=0;g--){let m=this._startIndexes[g],f=e.getLineContent(m),_=(0,E.q)(f,l);(_<s||_===s&&o++<this._foldingRangesLimit)&&(d[p]=m,u[p]=this._endIndexes[g],p++)}return new FoldingRegions(d,u)}}}function computeRanges(e,o,s,l,d){const u=e.getOptions().tabSize;l=null!==l&&void 0!==l?l:T;let g,p=new RangesCollector(l,d);s&&(g=new RegExp(`(${s.start.source})|(?:${s.end.source})`));let m=[],f=e.getLineCount()+1;m.push({indent:-1,endAbove:f,line:f});for(let _=e.getLineCount();_>0;_--){let s,l=e.getLineContent(_),d=(0,E.q)(l,u),f=m[m.length-1];if(-1!==d){if(g&&(s=l.match(g))){if(!s[1]){m.push({indent:-2,endAbove:_,line:_});continue}{let e=m.length-1;while(e>0&&-2!==m[e].indent)e--;if(e>0){m.length=e+1,f=m[e],p.insertFirst(_,f.line,d),f.line=_,f.indent=d,f.endAbove=_;continue}}}if(f.indent>d){do{m.pop(),f=m[m.length-1]}while(f.indent>d);let e=f.endAbove-1;e-_>=1&&p.insertFirst(_,e,d)}f.indent===d?f.endAbove=_:m.push({indent:d,endAbove:_,line:_})}else o&&(f.endAbove=_)}return p.toIndentRanges(e)}const A={},M="syntax";class SyntaxRangeProvider{constructor(e,o,s,l){this.editorModel=e,this.providers=o,this.limit=l,this.id=M;for(const d of o)"function"===typeof d.onDidChange&&(this.disposables||(this.disposables=new g.SL),this.disposables.add(d.onDidChange(s)))}compute(e,o){return collectSyntaxRanges(this.providers,this.editorModel,e).then((e=>{if(e){let s=sanitizeRanges(e,this.limit,o);return s}return null}))}dispose(){var e;null===(e=this.disposables)||void 0===e||e.dispose()}}function collectSyntaxRanges(e,o,s){let l=null,u=e.map(((e,u)=>Promise.resolve(e.provideFoldingRanges(o,A,s)).then((e=>{if(!s.isCancellationRequested&&Array.isArray(e)){Array.isArray(l)||(l=[]);let s=o.getLineCount();for(let o of e)o.start>0&&o.end>o.start&&o.end<=s&&l.push({start:o.start,end:o.end,rank:u,kind:o.kind})}}),d.Cp)));return Promise.all(u).then((e=>l))}class syntaxRangeProvider_RangesCollector{constructor(e,o){this._notifyTooManyRegions=o,this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,o,s,l){if(e>L||o>L)return;let d=this._length;this._startIndexes[d]=e,this._endIndexes[d]=o,this._nestingLevels[d]=l,this._types[d]=s,this._length++,l<30&&(this._nestingLevelCounts[l]=(this._nestingLevelCounts[l]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),o=new Uint32Array(this._length);for(let s=0;s<this._length;s++)e[s]=this._startIndexes[s],o[s]=this._endIndexes[s];return new FoldingRegions(e,o,this._types)}{this._notifyTooManyRegions&&this._notifyTooManyRegions(this._foldingRangesLimit);let e=0,o=this._nestingLevelCounts.length;for(let u=0;u<this._nestingLevelCounts.length;u++){let s=this._nestingLevelCounts[u];if(s){if(s+e>this._foldingRangesLimit){o=u;break}e+=s}}let s=new Uint32Array(this._foldingRangesLimit),l=new Uint32Array(this._foldingRangesLimit),d=[];for(let u=0,g=0;u<this._length;u++){let p=this._nestingLevels[u];(p<o||p===o&&e++<this._foldingRangesLimit)&&(s[g]=this._startIndexes[u],l[g]=this._endIndexes[u],d[g]=this._types[u],g++)}return new FoldingRegions(s,l,d)}}}function sanitizeRanges(e,o,s){let l,d=e.sort(((e,o)=>{let s=e.start-o.start;return 0===s&&(s=e.rank-o.rank),s})),u=new syntaxRangeProvider_RangesCollector(o,s),g=[];for(let p of d)if(l){if(p.start>l.start)if(p.end<=l.end)g.push(l),l=p,u.add(p.start,p.end,p.kind&&p.kind.value,g.length);else{if(p.start>l.end){do{l=g.pop()}while(l&&p.start>l.end);l&&g.push(l),l=p}u.add(p.start,p.end,p.kind&&p.kind.value,g.length)}}else l=p,u.add(p.start,p.end,p.kind&&p.kind.value,g.length);return u.toIndentRanges()}const R="init";class InitializingRangeProvider{constructor(e,o,s,l){if(this.editorModel=e,this.id=R,o.length){let toDecorationRange=o=>({range:{startLineNumber:o.startLineNumber,startColumn:0,endLineNumber:o.endLineNumber,endColumn:e.getLineLength(o.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],o.map(toDecorationRange)),this.timeout=setTimeout(s,l)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"===typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let o=[];if(this.decorationIds)for(let s of this.decorationIds){let e=this.editorModel.getDecorationRange(s);e&&o.push({start:e.startLineNumber,end:e.endLineNumber,rank:1})}return Promise.resolve(sanitizeRanges(o,Number.MAX_VALUE))}}var P=s(3580),O=s(8819),F=s(3910),B=s(7781),W=s(3046),V=s(2822),H=s(9554);const z=(0,H.q5)("folding-expanded",W.lA.chevronDown,(0,P.N)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),U=(0,H.q5)("folding-collapsed",W.lA.chevronRight,(0,P.N)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class FoldingDecorationProvider{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,o){return o?FoldingDecorationProvider.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,o){return this.editor.deltaDecorations(e,o)}changeDecorations(e){return this.editor.changeDecorations(e)}}FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION=V.qx.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:B.kS.asClassName(U)}),FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=V.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:B.kS.asClassName(U)}),FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=V.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:B.kS.asClassName(z)}),FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION=V.qx.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+B.kS.asClassName(z)}),FoldingDecorationProvider.HIDDEN_RANGE_DECORATION=V.qx.register({description:"folding-hidden-range-decoration",stickiness:1});var K=s(9422),j=s(4603),G=s(8191),q=s(4013),Q=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const Z=new O.uy("foldingEnabled",!1);let Y=class FoldingController extends g.JT{constructor(e,o,s,l,d,u){super(),this.contextKeyService=o,this.languageConfigurationService=s,this.languageFeaturesService=u,this._tooManyRegionsNotified=!1,this.localToDispose=this._register(new g.SL),this.editor=e;const p=this.editor.getOptions();this._isEnabled=p.get(37),this._useFoldingProviders="indentation"!==p.get(38),this._unfoldOnClickAfterEndOfLine=p.get(42),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=p.get(40),this._maxFoldingRegions=p.get(41),this.updateDebounceInfo=d.for(u.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new FoldingDecorationProvider(e),this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===p.get(99),this.foldingDecorationProvider.showFoldingHighlights=p.get(39),this.foldingEnabled=Z.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._notifyTooManyRegions=e=>{this._tooManyRegionsNotified||(l.notify({severity:j.Z.Warning,sticky:!0,message:P.N("maximum fold ranges","The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?[\"editor.foldingMaximumRegions\"]) to enable more.",e)}),this._tooManyRegionsNotified=!0)},this._register(this.editor.onDidChangeModel((()=>this.onModelChanged()))),this._register(this.editor.onDidChangeConfiguration((e=>{if(e.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(41)&&(this._maxFoldingRegions=this.editor.getOptions().get(41),this._tooManyRegionsNotified=!1,this.onModelChanged()),e.hasChanged(99)||e.hasChanged(39)){const e=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===e.get(99),this.foldingDecorationProvider.showFoldingHighlights=e.get(39),this.triggerFoldingModelChanged()}e.hasChanged(38)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(38),this.onFoldingStrategyChanged()),e.hasChanged(42)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(42)),e.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))}))),this.onModelChanged()}static get(e){return e.getContribution(FoldingController.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let o=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),s=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:o,lineCount:e.getLineCount(),provider:s,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let o=this.editor.getModel();if(!o||!this._isEnabled||o.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!e||e.lineCount!==o.getLineCount())return;if(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions)return;e.provider!==M&&e.provider!==R||(this.foldingStateMemento=e);const s=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(s)){const e=this.getFoldingModel();e&&e.then((e=>{if(e){this._restoringViewState=!0;try{e.applyMemento(s)}finally{this._restoringViewState=!1}}})).then(void 0,d.dL)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new FoldingModel(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new HiddenRangeModel(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((e=>this.onHiddenRangesChanges(e)))),this.updateScheduler=new l.vp(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new l.pY((()=>this.revealCursor()),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelContent((e=>this.onDidChangeModelContent(e)))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((()=>this.onCursorPositionChanged()))),this.localToDispose.add(this.editor.onMouseDown((e=>this.onEditorMouseDown(e)))),this.localToDispose.add(this.editor.onMouseUp((e=>this.onEditorMouseUp(e)))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new IndentRangeProvider(e,this.languageConfigurationService,this._maxFoldingRegions),this._useFoldingProviders&&this.foldingModel){let o=this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);if(0===o.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){const o=this.rangeProvider=new InitializingRangeProvider(e,this.foldingStateMemento.collapsedRegions,(()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()}),3e4);return o}o.length>0&&(this.rangeProvider=new SyntaxRangeProvider(e,o,(()=>this.triggerFoldingModelChanged()),this._maxFoldingRegions))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var o;null===(o=this.hiddenRangeModel)||void 0===o||o.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((()=>{const e=this.foldingModel;if(!e)return null;const o=new q.G(!0),s=this.getRangeProvider(e.textModel);let d=this.foldingRegionPromise=(0,l.PG)((e=>s.compute(e,this._notifyTooManyRegions)));return d.then((s=>{if(s&&d===this.foldingRegionPromise){let l;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=s.setCollapsedAllOfType(b.AD.Imports.value,!0);e&&(l=f.Z.capture(this.editor),this._currentModelHasFoldedImports=e)}let d=this.editor.getSelections(),u=d?d.map((e=>e.startLineNumber)):[];e.update(s,u),l&&l.restore(this.editor);const g=this.updateDebounceInfo.update(e.textModel,o.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=g)}return e}))})).then(void 0,(e=>((0,d.dL)(e),null))))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then((e=>{if(e){let o=this.editor.getSelections();if(o&&o.length>0){let s=[];for(let l of o){let o=l.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&s.push(...e.getAllRegionsAtLine(o,(e=>e.isCollapsed&&o>e.startLineNumber)))}s.length&&(e.toggleCollapseState(s),this.reveal(o[0].getPosition()))}}})).then(void 0,d.dL)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const o=e.target.range;let s=!1;switch(e.target.type){case 4:{const o=e.target.detail,l=e.target.element.offsetLeft,d=o.offsetX-l;if(d<5)return;s=!0;break}case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){const o=e.target.detail;if(!o.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&o.startColumn===e.getLineMaxColumn(o.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:o.startLineNumber,iconClicked:s}}onEditorMouseUp(e){const o=this.getFoldingModel();if(!o||!this.mouseDownInfo||!e.target)return;let s=this.mouseDownInfo.lineNumber,l=this.mouseDownInfo.iconClicked,u=e.target.range;if(u&&u.startLineNumber===s){if(l){if(4!==e.target.type)return}else{let e=this.editor.getModel();if(!e||u.startColumn!==e.getLineMaxColumn(s))return}o.then((o=>{if(o){let d=o.getRegionAtLine(s);if(d&&d.startLineNumber===s){let u=d.isCollapsed;if(l||u){let l=e.event.altKey,g=[];if(l){let filter=e=>!e.containedBy(d)&&!d.containedBy(e),e=o.getRegionsInside(null,filter);for(const o of e)o.isCollapsed&&g.push(o);0===g.length&&(g=e)}else{let s=e.event.middleButton||e.event.shiftKey;if(s)for(const e of o.getRegionsInside(d))e.isCollapsed===u&&g.push(e);!u&&s&&0!==g.length||g.push(d)}o.toggleCollapseState(g),this.reveal({lineNumber:s,column:1})}}}})).then(void 0,d.dL)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};Y.ID="editor.contrib.folding",Y=__decorate([__param(1,O.i6),__param(2,w.c_),__param(3,K.lT),__param(4,G.A),__param(5,Q.p)],Y);class FoldingAction extends _.R6{runEditorCommand(e,o,s){const l=e.get(w.c_),d=Y.get(o);if(!d)return;const u=d.getFoldingModel();return u?(this.reportTelemetry(e,o),u.then((e=>{if(e){this.invoke(d,e,o,s,l);const u=o.getSelection();u&&d.reveal(u.getStartPosition())}}))):void 0}getSelectedLines(e){let o=e.getSelections();return o?o.map((e=>e.startLineNumber)):[]}getLineNumbers(e,o){return e&&e.selectionLines?e.selectionLines.map((e=>e+1)):this.getSelectedLines(o)}run(e,o){}}function foldingArgumentsConstraint(e){if(!m.o8(e)){if(!m.Kn(e))return!1;const o=e;if(!m.o8(o.levels)&&!m.hj(o.levels))return!1;if(!m.o8(o.direction)&&!m.HD(o.direction))return!1;if(!m.o8(o.selectionLines)&&(!m.kJ(o.selectionLines)||!o.selectionLines.every(m.hj)))return!1}return!0}class UnfoldAction extends FoldingAction{constructor(){super({id:"editor.unfold",label:P.N("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:foldingArgumentsConstraint,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,o,s,l){let d=l&&l.levels||1,u=this.getLineNumbers(l,s);l&&"up"===l.direction?setCollapseStateLevelsUp(o,!1,d,u):setCollapseStateLevelsDown(o,!1,d,u)}}class UnFoldRecursivelyAction extends FoldingAction{constructor(){super({id:"editor.unfoldRecursively",label:P.N("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2137),weight:100}})}invoke(e,o,s,l){setCollapseStateLevelsDown(o,!1,Number.MAX_VALUE,this.getSelectedLines(s))}}class FoldAction extends FoldingAction{constructor(){super({id:"editor.fold",label:P.N("foldAction.label","Fold"),alias:"Fold",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:foldingArgumentsConstraint,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,o,s,l){let d=this.getLineNumbers(l,s);const u=l&&l.levels,g=l&&l.direction;"number"!==typeof u&&"string"!==typeof g?setCollapseStateUp(o,!0,d):"up"===g?setCollapseStateLevelsUp(o,!0,u||1,d):setCollapseStateLevelsDown(o,!0,u||1,d)}}class ToggleFoldAction extends FoldingAction{constructor(){super({id:"editor.toggleFold",label:P.N("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2090),weight:100}})}invoke(e,o,s){let l=this.getSelectedLines(s);toggleCollapseState(o,1,l)}}class FoldRecursivelyAction extends FoldingAction{constructor(){super({id:"editor.foldRecursively",label:P.N("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2135),weight:100}})}invoke(e,o,s){let l=this.getSelectedLines(s);setCollapseStateLevelsDown(o,!0,Number.MAX_VALUE,l)}}class FoldAllBlockCommentsAction extends FoldingAction{constructor(){super({id:"editor.foldAllBlockComments",label:P.N("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2133),weight:100}})}invoke(e,o,s,l,d){if(o.regions.hasTypes())setCollapseStateForType(o,b.AD.Comment.value,!0);else{const e=s.getModel();if(!e)return;const l=d.getLanguageConfiguration(e.getLanguageId()).comments;if(l&&l.blockCommentStartToken){let e=new RegExp("^\\s*"+(0,p.ec)(l.blockCommentStartToken));setCollapseStateForMatchingLines(o,e,!0)}}}}class FoldAllRegionsAction extends FoldingAction{constructor(){super({id:"editor.foldAllMarkerRegions",label:P.N("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2077),weight:100}})}invoke(e,o,s,l,d){if(o.regions.hasTypes())setCollapseStateForType(o,b.AD.Region.value,!0);else{const e=s.getModel();if(!e)return;const l=d.getLanguageConfiguration(e.getLanguageId()).foldingRules;if(l&&l.markers&&l.markers.start){let e=new RegExp(l.markers.start);setCollapseStateForMatchingLines(o,e,!0)}}}}class UnfoldAllRegionsAction extends FoldingAction{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:P.N("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2078),weight:100}})}invoke(e,o,s,l,d){if(o.regions.hasTypes())setCollapseStateForType(o,b.AD.Region.value,!1);else{const e=s.getModel();if(!e)return;const l=d.getLanguageConfiguration(e.getLanguageId()).foldingRules;if(l&&l.markers&&l.markers.start){let e=new RegExp(l.markers.start);setCollapseStateForMatchingLines(o,e,!1)}}}}class FoldAllRegionsExceptAction extends FoldingAction{constructor(){super({id:"editor.foldAllExcept",label:P.N("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2131),weight:100}})}invoke(e,o,s){let l=this.getSelectedLines(s);setCollapseStateForRest(o,!0,l)}}class UnfoldAllRegionsExceptAction extends FoldingAction{constructor(){super({id:"editor.unfoldAllExcept",label:P.N("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2129),weight:100}})}invoke(e,o,s){let l=this.getSelectedLines(s);setCollapseStateForRest(o,!1,l)}}class FoldAllAction extends FoldingAction{constructor(){super({id:"editor.foldAll",label:P.N("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2069),weight:100}})}invoke(e,o,s){setCollapseStateLevelsDown(o,!0)}}class UnfoldAllAction extends FoldingAction{constructor(){super({id:"editor.unfoldAll",label:P.N("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2088),weight:100}})}invoke(e,o,s){setCollapseStateLevelsDown(o,!1)}}class FoldLevelAction extends FoldingAction{getFoldingLevel(){return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length))}invoke(e,o,s){setCollapseStateAtLevel(o,this.getFoldingLevel(),!0,this.getSelectedLines(s))}}FoldLevelAction.ID_PREFIX="editor.foldLevel",FoldLevelAction.ID=e=>FoldLevelAction.ID_PREFIX+e;class GotoParentFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoParentFold",label:P.N("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,weight:100}})}invoke(e,o,s){let l=this.getSelectedLines(s);if(l.length>0){let e=getParentFoldLine(l[0],o);null!==e&&s.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class GotoPreviousFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoPreviousFold",label:P.N("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,weight:100}})}invoke(e,o,s){let l=this.getSelectedLines(s);if(l.length>0){let e=getPreviousFoldLine(l[0],o);null!==e&&s.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class GotoNextFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoNextFold",label:P.N("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,weight:100}})}invoke(e,o,s){let l=this.getSelectedLines(s);if(l.length>0){let e=getNextFoldLine(l[0],o);null!==e&&s.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}(0,_._K)(Y.ID,Y),(0,_.Qr)(UnfoldAction),(0,_.Qr)(UnFoldRecursivelyAction),(0,_.Qr)(FoldAction),(0,_.Qr)(FoldRecursivelyAction),(0,_.Qr)(FoldAllAction),(0,_.Qr)(UnfoldAllAction),(0,_.Qr)(FoldAllBlockCommentsAction),(0,_.Qr)(FoldAllRegionsAction),(0,_.Qr)(UnfoldAllRegionsAction),(0,_.Qr)(FoldAllRegionsExceptAction),(0,_.Qr)(UnfoldAllRegionsExceptAction),(0,_.Qr)(ToggleFoldAction),(0,_.Qr)(GotoParentFoldAction),(0,_.Qr)(GotoPreviousFoldAction),(0,_.Qr)(GotoNextFoldAction);for(let ee=1;ee<=7;ee++)(0,_.QG)(new FoldLevelAction({id:FoldLevelAction.ID(ee),label:P.N("foldLevelAction.label","Fold Level {0}",ee),alias:`Fold Level ${ee}`,precondition:Z,kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,u.gx)(2089,2048|21+ee),weight:100}}));const J=(0,F.P6G)("editor.foldBackground",{light:(0,F.ZnX)(F.hEj,.3),dark:(0,F.ZnX)(F.hEj,.3),hc:null},P.N("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),X=(0,F.P6G)("editorGutter.foldingControlForeground",{dark:F.XZx,light:F.XZx,hc:F.XZx},P.N("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));(0,B.Ic)(((e,o)=>{const s=e.getColor(J);s&&o.addRule(`.monaco-editor .folded-background { background-color: ${s}; }`);const l=e.getColor(X);l&&o.addRule(`\n\t\t.monaco-editor .cldr${B.kS.asCSSSelector(z)},\n\t\t.monaco-editor .cldr${B.kS.asCSSSelector(U)} {\n\t\t\tcolor: ${l} !important;\n\t\t}\n\t\t`)}))},4125:function(e,o,s){"use strict";s.r(o);var l=s(6830),d=s(2334),u=s(3580);class EditorFontZoomIn extends l.R6{constructor(){super({id:"editor.action.fontZoomIn",label:u.N("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,o){d.C.setZoomLevel(d.C.getZoomLevel()+1)}}class EditorFontZoomOut extends l.R6{constructor(){super({id:"editor.action.fontZoomOut",label:u.N("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,o){d.C.setZoomLevel(d.C.getZoomLevel()-1)}}class EditorFontZoomReset extends l.R6{constructor(){super({id:"editor.action.fontZoomReset",label:u.N("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,o){d.C.setZoomLevel(0)}}(0,l.Qr)(EditorFontZoomIn),(0,l.Qr)(EditorFontZoomOut),(0,l.Qr)(EditorFontZoomReset)},1373:function(e,o,s){"use strict";s.d(o,{xC:function(){return FormattingConflicts},Zg:function(){return alertFormattingEdits},x$:function(){return formatDocumentRangesWithSelectedProvider},Qq:function(){return formatDocumentWithSelectedProvider},Qs:function(){return getOnTypeFormattingEdits}});var l=s(5152),d=s(9488),u=s(1050),g=s(7301),p=s(3725),m=s(1741),f=s(8401),_=s(666),C=s(4410),b=s(5520),w=s(187),S=s(4314),y=s(3860),L=s(4319),x=s(8216),k=s(5120),N=s(3580),D=s(4565);class ExtensionIdentifier{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return"string"===typeof e?e.toLowerCase():e._lower}}var E=s(2065),T=s(1922),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function alertFormattingEdits(e){if(e=e.filter((e=>e.range)),!e.length)return;let{range:o}=e[0];for(let l=1;l<e.length;l++)o=S.e.plusRange(o,e[l].range);const{startLineNumber:s,endLineNumber:d}=o;s===d?1===e.length?(0,l.Z9)(N.N("hint11","Made 1 formatting edit on line {0}",s)):(0,l.Z9)(N.N("hintn1","Made {0} formatting edits on line {1}",e.length,s)):1===e.length?(0,l.Z9)(N.N("hint1n","Made 1 formatting edit between lines {0} and {1}",s,d)):(0,l.Z9)(N.N("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,s,d))}function getRealAndSyntheticDocumentFormattersOrdered(e,o,s){const l=[],d=new Set,u=e.ordered(s);for(const p of u)l.push(p),p.extensionId&&d.add(ExtensionIdentifier.toKey(p.extensionId));const g=o.ordered(s);for(const p of g){if(p.extensionId){if(d.has(ExtensionIdentifier.toKey(p.extensionId)))continue;d.add(ExtensionIdentifier.toKey(p.extensionId))}l.push({displayName:p.displayName,extensionId:p.extensionId,provideDocumentFormattingEdits(e,o,s){return p.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),o,s)}})}return l}class FormattingConflicts{static setFormatterSelector(e){const o=FormattingConflicts._selectors.unshift(e);return{dispose:o}}static select(e,o,s){return __awaiter(this,void 0,void 0,(function*(){if(0===e.length)return;const l=p.$.first(FormattingConflicts._selectors);return l?yield l(e,o,s):void 0}))}}function formatDocumentRangesWithSelectedProvider(e,o,s,l,d,u){return __awaiter(this,void 0,void 0,(function*(){const g=e.get(E.TG),{documentRangeFormattingEditProvider:p}=e.get(T.p),m=(0,b.CL)(o)?o.getModel():o,f=p.ordered(m),_=yield FormattingConflicts.select(f,m,l);_&&(d.report(_),yield g.invokeFunction(formatDocumentRangesWithProvider,_,o,s,u))}))}function formatDocumentRangesWithProvider(e,o,s,l,u){return __awaiter(this,void 0,void 0,(function*(){const g=e.get(L.p);let p,m;(0,b.CL)(s)?(p=s.getModel(),m=new C.Dl(s,5,void 0,u)):(p=s,m=new C.YQ(s,u));let f=[],_=0;for(let e of(0,d._2)(l).sort(S.e.compareRangesUsingStarts))_>0&&S.e.areIntersectingOrTouching(f[_-1],e)?f[_-1]=S.e.fromPositions(f[_-1].getStartPosition(),e.getEndPosition()):_=f.push(e);const computeEdits=e=>__awaiter(this,void 0,void 0,(function*(){return(yield o.provideDocumentRangeFormattingEdits(p,e,p.getFormattingOptions(),m.token))||[]})),hasIntersectingEdit=(e,o)=>{if(!e.length||!o.length)return!1;const s=e.reduce(((e,o)=>S.e.plusRange(e,o.range)),e[0].range);if(!o.some((e=>S.e.intersectRanges(s,e.range))))return!1;for(let l of e)for(let e of o)if(S.e.intersectRanges(l.range,e.range))return!0;return!1},w=[],x=[];try{for(let e of f){if(m.token.isCancellationRequested)return!0;x.push(yield computeEdits(e))}for(let e=0;e<f.length;++e)for(let o=e+1;o<f.length;++o){if(m.token.isCancellationRequested)return!0;if(hasIntersectingEdit(x[e],x[o])){const s=S.e.plusRange(f[e],f[o]),l=yield computeEdits(s);f.splice(o,1),f.splice(e,1),f.push(s),x.splice(o,1),x.splice(e,1),x.push(l),e=0,o=0}}for(let e of x){if(m.token.isCancellationRequested)return!0;const o=yield g.computeMoreMinimalEdits(p.uri,e);o&&w.push(...o)}}finally{m.dispose()}if(0===w.length)return!1;if((0,b.CL)(s))k.V.execute(s,w,!0),alertFormattingEdits(w),s.revealPositionInCenterIfOutsideViewport(s.getPosition(),1);else{const[{range:e}]=w,o=new y.Y(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);p.pushEditOperations([o],w.map((e=>({text:e.text,range:S.e.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:s}of e)if(S.e.areIntersectingOrTouching(s,o))return[new y.Y(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn)];return null}))}return!0}))}function formatDocumentWithSelectedProvider(e,o,s,l,d){return __awaiter(this,void 0,void 0,(function*(){const u=e.get(E.TG),g=e.get(T.p),p=(0,b.CL)(o)?o.getModel():o,m=getRealAndSyntheticDocumentFormattersOrdered(g.documentFormattingEditProvider,g.documentRangeFormattingEditProvider,p),f=yield FormattingConflicts.select(m,p,s);f&&(l.report(f),yield u.invokeFunction(formatDocumentWithProvider,f,o,s,d))}))}function formatDocumentWithProvider(e,o,s,l,d){return __awaiter(this,void 0,void 0,(function*(){const u=e.get(L.p);let g,p,m;(0,b.CL)(s)?(g=s.getModel(),p=new C.Dl(s,5,void 0,d)):(g=s,p=new C.YQ(s,d));try{const e=yield o.provideDocumentFormattingEdits(g,g.getFormattingOptions(),p.token);if(m=yield u.computeMoreMinimalEdits(g.uri,e),p.token.isCancellationRequested)return!0}finally{p.dispose()}if(!m||0===m.length)return!1;if((0,b.CL)(s))k.V.execute(s,m,2!==l),2!==l&&(alertFormattingEdits(m),s.revealPositionInCenterIfOutsideViewport(s.getPosition(),1));else{const[{range:e}]=m,o=new y.Y(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);g.pushEditOperations([o],m.map((e=>({text:e.text,range:S.e.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:s}of e)if(S.e.areIntersectingOrTouching(s,o))return[new y.Y(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn)];return null}))}return!0}))}function getDocumentRangeFormattingEditsUntilResult(e,o,s,l,u,p){return __awaiter(this,void 0,void 0,(function*(){const m=o.documentRangeFormattingEditProvider.ordered(s);for(const o of m){let m=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(s,l,u,p)).catch(g.Cp);if((0,d.Of)(m))return yield e.computeMoreMinimalEdits(s.uri,m)}}))}function getDocumentFormattingEditsUntilResult(e,o,s,l,u){return __awaiter(this,void 0,void 0,(function*(){const p=getRealAndSyntheticDocumentFormattersOrdered(o.documentFormattingEditProvider,o.documentRangeFormattingEditProvider,s);for(const o of p){let p=yield Promise.resolve(o.provideDocumentFormattingEdits(s,l,u)).catch(g.Cp);if((0,d.Of)(p))return yield e.computeMoreMinimalEdits(s.uri,p)}}))}function getOnTypeFormattingEdits(e,o,s,l,d,u,p){const m=o.onTypeFormattingEditProvider.ordered(s);return 0===m.length||m[0].autoFormatTriggerCharacters.indexOf(d)<0?Promise.resolve(void 0):Promise.resolve(m[0].provideOnTypeFormattingEdits(s,l,d,u,p)).catch(g.Cp).then((o=>e.computeMoreMinimalEdits(s.uri,o)))}FormattingConflicts._selectors=new m.S,D.P0.registerCommand("_executeFormatRangeProvider",(function(e,...o){return __awaiter(this,void 0,void 0,(function*(){const[s,l,d]=o;(0,f.p_)(_.o.isUri(s)),(0,f.p_)(S.e.isIRange(l));const g=e.get(x.S),p=e.get(L.p),m=e.get(T.p),C=yield g.createModelReference(s);try{return getDocumentRangeFormattingEditsUntilResult(p,m,C.object.textEditorModel,S.e.lift(l),d,u.T.None)}finally{C.dispose()}}))})),D.P0.registerCommand("_executeFormatDocumentProvider",(function(e,...o){return __awaiter(this,void 0,void 0,(function*(){const[s,l]=o;(0,f.p_)(_.o.isUri(s));const d=e.get(x.S),g=e.get(L.p),p=e.get(T.p),m=yield d.createModelReference(s);try{return getDocumentFormattingEditsUntilResult(g,p,m.object.textEditorModel,l,u.T.None)}finally{m.dispose()}}))})),D.P0.registerCommand("_executeFormatOnTypeProvider",(function(e,...o){return __awaiter(this,void 0,void 0,(function*(){const[s,l,d,g]=o;(0,f.p_)(_.o.isUri(s)),(0,f.p_)(w.L.isIPosition(l)),(0,f.p_)("string"===typeof d);const p=e.get(x.S),m=e.get(L.p),C=e.get(T.p),b=yield p.createModelReference(s);try{return getOnTypeFormattingEdits(m,C,b.object.textEditorModel,w.L.lift(l),d,g,u.T.None)}finally{b.dispose()}}))}))},1097:function(e,o,s){"use strict";s.r(o);var l=s(9488),d=s(1050),u=s(7301),g=s(2258),p=s(5976),m=s(6830),f=s(1640),_=s(4906),C=s(4314),b=s(9102),w=s(4319),S=s(1922),y=s(1373),L=s(5120),x=s(3580),k=s(4565),N=s(8819),D=s(2065),E=s(535),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let T=class FormatOnType{constructor(e,o,s){this._editor=e,this._languageFeaturesService=o,this._workerService=s,this._disposables=new p.SL,this._sessionDisposables=new p.SL,this._disposables.add(o.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(49)&&this._update()})))}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(49))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[o]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!o||!o.autoFormatTriggerCharacters)return;let s=new _.q;for(let l of o.autoFormatTriggerCharacters)s.add(l.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType((e=>{let o=e.charCodeAt(e.length-1);s.has(o)&&this._trigger(String.fromCharCode(o))})))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const o=this._editor.getModel(),s=this._editor.getPosition(),u=new d.A,g=this._editor.onDidChangeModelContent((e=>{if(e.isFlush)return u.cancel(),void g.dispose();for(let o=0,l=e.changes.length;o<l;o++){const l=e.changes[o];if(l.range.endLineNumber<=s.lineNumber)return u.cancel(),void g.dispose()}}));(0,y.Qs)(this._workerService,this._languageFeaturesService,o,s,e,o.getFormattingOptions(),u.token).then((e=>{u.token.isCancellationRequested||(0,l.Of)(e)&&(L.V.execute(this._editor,e,!0),(0,y.Zg)(e))})).finally((()=>{g.dispose()}))}};T.ID="editor.contrib.autoFormat",T=__decorate([__param(1,S.p),__param(2,w.p)],T);let I=class FormatOnPaste{constructor(e,o,s){this.editor=e,this._languageFeaturesService=o,this._instantiationService=s,this._callOnDispose=new p.SL,this._callOnModel=new p.SL,this._callOnDispose.add(e.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(o.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(48)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((({range:e})=>this._trigger(e))))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(y.x$,this.editor,e,2,E.Ex.None,d.T.None).catch(u.dL))}};I.ID="editor.contrib.formatOnPaste",I=__decorate([__param(1,S.p),__param(2,D.TG)],I);class FormatDocumentAction extends m.R6{constructor(){super({id:"editor.action.formatDocument",label:x.N("formatDocument.label","Format Document"),alias:"Format Document",precondition:N.Ao.and(b.u.notInCompositeEditor,b.u.writable,b.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:b.u.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,o){return __awaiter(this,void 0,void 0,(function*(){if(o.hasModel()){const s=e.get(D.TG),l=e.get(E.ek);yield l.showWhile(s.invokeFunction(y.Qq,o,1,E.Ex.None,d.T.None),250)}}))}}class FormatSelectionAction extends m.R6{constructor(){super({id:"editor.action.formatSelection",label:x.N("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:N.Ao.and(b.u.writable,b.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:b.u.editorTextFocus,primary:(0,g.gx)(2089,2084),weight:100},contextMenuOpts:{when:b.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,o){return __awaiter(this,void 0,void 0,(function*(){if(!o.hasModel())return;const s=e.get(D.TG),l=o.getModel(),u=o.getSelections().map((e=>e.isEmpty()?new C.e(e.startLineNumber,1,e.startLineNumber,l.getLineMaxColumn(e.startLineNumber)):e)),g=e.get(E.ek);yield g.showWhile(s.invokeFunction(y.x$,o,u,1,E.Ex.None,d.T.None),250)}))}}(0,m._K)(T.ID,T),(0,m._K)(I.ID,I),(0,m.Qr)(FormatDocumentAction),(0,m.Qr)(FormatSelectionAction),k.P0.registerCommand("editor.action.format",(e=>__awaiter(void 0,void 0,void 0,(function*(){const o=e.get(f.$).getFocusedCodeEditor();if(!o||!o.hasModel())return;const s=e.get(k.Hy);o.getSelection().isEmpty()?yield s.executeCommand("editor.action.formatDocument"):yield s.executeCommand("editor.action.formatSelection")}))))},5120:function(e,o,s){"use strict";s.d(o,{V:function(){return FormattingEdit}});var l=s(9386),d=s(4314);class FormattingEdit{static _handleEolEdits(e,o){let s,l=[];for(let d of o)"number"===typeof d.eol&&(s=d.eol),d.range&&"string"===typeof d.text&&l.push(d);return"number"===typeof s&&e.hasModel()&&e.getModel().pushEOL(s),l}static _isFullModelReplaceEdit(e,o){if(!e.hasModel())return!1;const s=e.getModel(),l=s.validateRange(o.range),d=s.getFullModelRange();return d.equalsRange(l)}static execute(e,o,s){s&&e.pushUndoStop();const u=FormattingEdit._handleEolEdits(e,o);1===u.length&&FormattingEdit._isFullModelReplaceEdit(e,u[0])?e.executeEdits("formatEditsCommand",u.map((e=>l.h.replace(d.e.lift(e.range),e.text)))):e.executeEdits("formatEditsCommand",u.map((e=>l.h.replaceMove(d.e.lift(e.range),e.text)))),s&&e.pushUndoStop()}}},9803:function(e,o,s){"use strict";s.r(o),s.d(o,{MarkerController:function(){return se},NextMarkerAction:function(){return NextMarkerAction}});var l=s(3046),d=s(5976),u=s(6830),g=s(1640),p=s(187),m=s(4314),f=s(9102),_=s(9488),C=s(4669),b=s(1741),w=s(2677),S=s(666),y=s(5026),L=s(2065),x=s(8674),k=s(3108),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};class MarkerCoordinate{constructor(e,o,s){this.marker=e,this.index=o,this.total=s}}let N=class MarkerList{constructor(e,o,s){this._markerService=o,this._configService=s,this._onDidChange=new C.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new d.SL,this._markers=[],this._nextIdx=-1,S.o.isUri(e)?this._resourceFilter=o=>o.toString()===e.toString():e&&(this._resourceFilter=e);const l=this._configService.getValue("problems.sortOrder"),compareMarker=(e,o)=>{let s=(0,w.qu)(e.resource.toString(),o.resource.toString());return 0===s&&(s="position"===l?m.e.compareRangesUsingStarts(e,o)||x.ZL.compare(e.severity,o.severity):x.ZL.compare(e.severity,o.severity)||m.e.compareRangesUsingStarts(e,o)),s},updateMarker=()=>{this._markers=this._markerService.read({resource:S.o.isUri(e)?e:void 0,severities:x.ZL.Error|x.ZL.Warning|x.ZL.Info}),"function"===typeof e&&(this._markers=this._markers.filter((e=>this._resourceFilter(e.resource)))),this._markers.sort(compareMarker)};updateMarker(),this._dispoables.add(o.onMarkerChanged((e=>{this._resourceFilter&&!e.some((e=>this._resourceFilter(e)))||(updateMarker(),this._nextIdx=-1,this._onDidChange.fire())})))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new MarkerCoordinate(e,this._nextIdx+1,this._markers.length)}_initIdx(e,o,s){let l=!1,d=this._markers.findIndex((o=>o.resource.toString()===e.uri.toString()));d<0&&(d=(0,_.ry)(this._markers,{resource:e.uri},((e,o)=>(0,w.qu)(e.resource.toString(),o.resource.toString()))),d<0&&(d=~d));for(let u=d;u<this._markers.length;u++){let s=m.e.lift(this._markers[u]);if(s.isEmpty()){const o=e.getWordAtPosition(s.getStartPosition());o&&(s=new m.e(s.startLineNumber,o.startColumn,s.startLineNumber,o.endColumn))}if(o&&(s.containsPosition(o)||o.isBeforeOrEqual(s.getStartPosition()))){this._nextIdx=u,l=!0;break}if(this._markers[u].resource.toString()!==e.uri.toString())break}l||(this._nextIdx=s?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,o,s){if(0===this._markers.length)return!1;let l=this._nextIdx;return-1===this._nextIdx?this._initIdx(o,s,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),l!==this._nextIdx}find(e,o){let s=this._markers.findIndex((o=>o.resource.toString()===e.toString()));if(!(s<0))for(;s<this._markers.length;s++)if(m.e.containsPosition(this._markers[s],o))return new MarkerCoordinate(this._markers[s],s+1,this._markers.length)}};N=__decorate([__param(1,x.lT),__param(2,k.Ui)],N);const D=(0,L.yh)("IMarkerNavigationService");let E=class MarkerNavigationService{constructor(e,o){this._markerService=e,this._configService=o,this._provider=new b.S}getMarkerList(e){for(let o of this._provider){const s=o.getMarkerList(e);if(s)return s}return new N(e,this._markerService,this._configService)}};E=__decorate([__param(0,x.lT),__param(1,k.Ui)],E),(0,y.z)(D,E,!0);var T,I=s(3580),A=s(4144),M=s(8819),R=s(9554),P=s(5321),O=s(3161),F=s(1264),B=s(8843),W=s(5935),V=s(6943),H=s(4167),z=s(4349),U=s(988),K=s(4603),j=s(3910),G=s(7781);(function(e){function className(e){switch(e){case K.Z.Ignore:return"severity-ignore "+l.lA.info.classNames;case K.Z.Info:return l.lA.info.classNames;case K.Z.Warning:return l.lA.warning.classNames;case K.Z.Error:return l.lA.error.classNames;default:return""}}e.className=className})(T||(T={})),(0,G.Ic)(((e,o)=>{const s=e.getColor(j.JpG);if(s){const e=l.lA.error.cssSelector;o.addRule(`\n\t\t\t.monaco-editor .zone-widget ${e},\n\t\t\t.markers-panel .marker-icon${e},\n\t\t\t.text-search-provider-messages .providerMessage ${e},\n\t\t\t.extensions-viewlet > .extensions ${e} {\n\t\t\t\tcolor: ${s};\n\t\t\t}\n\t\t`)}const d=e.getColor(j.BOY);if(d){const e=l.lA.warning.cssSelector;o.addRule(`\n\t\t\t.monaco-editor .zone-widget ${e},\n\t\t\t.markers-panel .marker-icon${e},\n\t\t\t.extensions-viewlet > .extensions ${e},\n\t\t\t.extension-editor ${e},\n\t\t\t.text-search-provider-messages .providerMessage ${e},\n\t\t\t.preferences-editor ${e} {\n\t\t\t\tcolor: ${d};\n\t\t\t}\n\t\t`)}const u=e.getColor(j.OLZ);if(u){const e=l.lA.info.cssSelector;o.addRule(`\n\t\t\t.monaco-editor .zone-widget ${e},\n\t\t\t.markers-panel .marker-icon${e},\n\t\t\t.extensions-viewlet > .extensions ${e},\n\t\t\t.text-search-provider-messages .providerMessage ${e},\n\t\t\t.extension-editor ${e} {\n\t\t\t\tcolor: ${u};\n\t\t\t}\n\t\t`)}}));var gotoErrorWidget_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},gotoErrorWidget_param=function(e,o){return function(s,l){o(s,l,e)}};class MessageWidget{constructor(e,o,s,l,u){this._openerService=l,this._labelService=u,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new d.SL,this._editor=o;const g=document.createElement("div");g.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),g.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),g.appendChild(this._relatedBlock),this._disposables.add(P.mu(this._relatedBlock,"click",(e=>{e.preventDefault();const o=this._relatedDiagnostics.get(e.target);o&&s(o)}))),this._scrollable=new O.NB(g,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((e=>{g.style.left=`-${e.scrollLeft}px`,g.style.top=`-${e.scrollTop}px`}))),this._disposables.add(this._scrollable)}dispose(){(0,d.B9)(this._disposables)}update(e){const{source:o,message:s,relatedInformation:l,code:d}=e;let u=((null===o||void 0===o?void 0:o.length)||0)+"()".length;d&&(u+="string"===typeof d?d.length:d.value.length);const g=(0,w.uq)(s);this._lines=g.length,this._longestLineLength=0;for(const _ of g)this._longestLineLength=Math.max(_.length+u,this._longestLineLength);P.PO(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let p=this._messageBlock;for(const _ of g)p=document.createElement("div"),p.innerText=_,""===_&&(p.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(p);if(o||d){const e=document.createElement("span");if(e.classList.add("details"),p.appendChild(e),o){const s=document.createElement("span");s.innerText=o,s.classList.add("source"),e.appendChild(s)}if(d)if("string"===typeof d){const o=document.createElement("span");o.innerText=`(${d})`,o.classList.add("code"),e.appendChild(o)}else{this._codeLink=P.$("a.code-link"),this._codeLink.setAttribute("href",`${d.target.toString()}`),this._codeLink.onclick=e=>{this._openerService.open(d.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};const o=P.R3(this._codeLink,P.$("span"));o.innerText=d.value,e.appendChild(this._codeLink)}}if(P.PO(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,_.Of)(l)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop=`${Math.floor(.66*this._editor.getOption(59))}px`,this._lines+=1;for(const o of l){let s=document.createElement("div"),l=document.createElement("a");l.classList.add("filename"),l.innerText=`${(0,B.p)(o.resource)}(${o.startLineNumber}, ${o.startColumn}): `,l.title=this._labelService.getUriLabel(o.resource),this._relatedDiagnostics.set(l,o);let d=document.createElement("span");d.innerText=o.message,s.appendChild(l),s.appendChild(d),this._lines+=1,e.appendChild(s)}}const m=this._editor.getOption(44),f=Math.ceil(m.typicalFullwidthCharacterWidth*this._longestLineLength*.75),C=m.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:f,scrollHeight:C})}layout(e,o){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${o}px`,this._scrollable.setScrollDimensions({width:o,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let o="";switch(e.severity){case x.ZL.Error:o=I.N("Error","Error");break;case x.ZL.Warning:o=I.N("Warning","Warning");break;case x.ZL.Info:o=I.N("Info","Info");break;case x.ZL.Hint:o=I.N("Hint","Hint");break}let s=I.N("marker aria","{0} at {1}. ",o,e.startLineNumber+":"+e.startColumn);const l=this._editor.getModel();if(l&&e.startLineNumber<=l.getLineCount()&&e.startLineNumber>=1){const o=l.getLineContent(e.startLineNumber);s=`${o}, ${s}`}return s}}let q=class MarkerNavigationWidget extends V.vk{constructor(e,o,s,l,u,g,p){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},u),this._themeService=o,this._openerService=s,this._menuService=l,this._contextKeyService=g,this._labelService=p,this._callOnDispose=new d.SL,this._onDidSelectRelatedInformation=new C.Q5,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=x.ZL.Warning,this._backgroundColor=F.Il.white,this._applyTheme(o.getColorTheme()),this._callOnDispose.add(o.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(oe);let o=J,s=X;this._severity===x.ZL.Warning?(o=ee,s=te):this._severity===x.ZL.Info&&(o=ie,s=ne);const l=e.getColor(o),d=e.getColor(s);this.style({arrowColor:l,frameColor:l,headerBackgroundColor:d,primaryHeadingColor:e.getColor(V.IH),secondaryHeadingColor:e.getColor(V.R7)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun((e=>this.editor.focus())));const o=[],s=this._menuService.createMenu(MarkerNavigationWidget.TitleMenu,this._contextKeyService);(0,H.vr)(s,void 0,o),this._actionbarWidget.push(o,{label:!1,icon:!0,index:0}),s.dispose()}_fillTitleIcon(e){this._icon=P.R3(e,P.$(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new MessageWidget(this._container,this.editor,(e=>this._onDidSelectRelatedInformation.fire(e)),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,o,s){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let l=m.e.lift(e);const d=this.editor.getPosition();let u=d&&l.containsPosition(d)?d:l.getStartPosition();super.show(u,this.computeRequiredHeight());const g=this.editor.getModel();if(g){const e=s>1?I.N("problems","{0} of {1} problems",o,s):I.N("change","{0} of {1} problem",o,s);this.setTitle((0,W.EZ)(g.uri),e)}this._icon.className=`codicon ${T.className(x.ZL.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(u,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,o){super._doLayoutBody(e,o),this._heightInPixel=e,this._message.layout(e,o),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};q.TitleMenu=new A.eH("gotoErrorTitleMenu"),q=gotoErrorWidget_decorate([gotoErrorWidget_param(1,G.XE),gotoErrorWidget_param(2,U.v4),gotoErrorWidget_param(3,A.co),gotoErrorWidget_param(4,L.TG),gotoErrorWidget_param(5,M.i6),gotoErrorWidget_param(6,z.e)],q);let Q=(0,j.kwl)(j.lXJ,j.b6y),Z=(0,j.kwl)(j.uoC,j.pW3),Y=(0,j.kwl)(j.c63,j.T83);const J=(0,j.P6G)("editorMarkerNavigationError.background",{dark:Q,light:Q,hc:j.lRK},I.N("editorMarkerNavigationError","Editor marker navigation widget error color.")),X=(0,j.P6G)("editorMarkerNavigationError.headerBackground",{dark:(0,j.ZnX)(J,.1),light:(0,j.ZnX)(J,.1),hc:null},I.N("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),ee=(0,j.P6G)("editorMarkerNavigationWarning.background",{dark:Z,light:Z,hc:j.lRK},I.N("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),te=(0,j.P6G)("editorMarkerNavigationWarning.headerBackground",{dark:(0,j.ZnX)(ee,.1),light:(0,j.ZnX)(ee,.1),hc:"#0C141F"},I.N("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),ie=(0,j.P6G)("editorMarkerNavigationInfo.background",{dark:Y,light:Y,hc:j.lRK},I.N("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),ne=(0,j.P6G)("editorMarkerNavigationInfo.headerBackground",{dark:(0,j.ZnX)(ie,.1),light:(0,j.ZnX)(ie,.1),hc:null},I.N("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),oe=(0,j.P6G)("editorMarkerNavigation.background",{dark:j.cvW,light:j.cvW,hc:j.cvW},I.N("editorMarkerNavigationBackground","Editor marker navigation widget background."));var gotoError_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},gotoError_param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let se=class MarkerController{constructor(e,o,s,l,u){this._markerNavigationService=o,this._contextKeyService=s,this._editorService=l,this._instantiationService=u,this._sessionDispoables=new d.SL,this._editor=e,this._widgetVisible=re.bindTo(this._contextKeyService)}static get(e){return e.getContribution(MarkerController.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let o=!1;return this._model&&(o=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),o&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(q,this._editor),this._widget.onDidClose((()=>this.close()),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((e=>{var o,s,l;(null===(o=this._model)||void 0===o?void 0:o.selected)&&m.e.containsPosition(null===(s=this._model)||void 0===s?void 0:s.selected.marker,e.position)||null===(l=this._model)||void 0===l||l.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:m.e.lift(e).collapseToStart()}},this._editor),this.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((()=>this._cleanUp()))),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const o=this._getOrCreateModel(this._editor.getModel().uri);o.resetIndex(),o.move(!0,this._editor.getModel(),new p.L(e.startLineNumber,e.startColumn)),o.selected&&this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}nagivate(e,o){var s,l;return __awaiter(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const d=this._getOrCreateModel(o?void 0:this._editor.getModel().uri);if(d.move(e,this._editor.getModel(),this._editor.getPosition()),!d.selected)return;if(d.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const u=yield this._editorService.openCodeEditor({resource:d.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:d.selected.marker}},this._editor);u&&(null===(s=MarkerController.get(u))||void 0===s||s.close(),null===(l=MarkerController.get(u))||void 0===l||l.nagivate(e,o))}else this._widget.showAtMarker(d.selected.marker,d.selected.index,d.selected.total)}}))}};se.ID="editor.contrib.markerController",se=gotoError_decorate([gotoError_param(1,D),gotoError_param(2,M.i6),gotoError_param(3,g.$),gotoError_param(4,L.TG)],se);class MarkerNavigationAction extends u.R6{constructor(e,o,s){super(s),this._next=e,this._multiFile=o}run(e,o){var s;return __awaiter(this,void 0,void 0,(function*(){o.hasModel()&&(null===(s=se.get(o))||void 0===s||s.nagivate(this._next,this._multiFile))}))}}class NextMarkerAction extends MarkerNavigationAction{constructor(){super(!0,!1,{id:NextMarkerAction.ID,label:NextMarkerAction.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:f.u.focus,primary:578,weight:100},menuOpts:{menuId:q.TitleMenu,title:NextMarkerAction.LABEL,icon:(0,R.q5)("marker-navigation-next",l.lA.arrowDown,I.N("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}NextMarkerAction.ID="editor.action.marker.next",NextMarkerAction.LABEL=I.N("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class PrevMarkerAction extends MarkerNavigationAction{constructor(){super(!1,!1,{id:PrevMarkerAction.ID,label:PrevMarkerAction.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:f.u.focus,primary:1602,weight:100},menuOpts:{menuId:q.TitleMenu,title:PrevMarkerAction.LABEL,icon:(0,R.q5)("marker-navigation-previous",l.lA.arrowUp,I.N("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}PrevMarkerAction.ID="editor.action.marker.prev",PrevMarkerAction.LABEL=I.N("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class NextMarkerInFilesAction extends MarkerNavigationAction{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:I.N("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:f.u.focus,primary:66,weight:100},menuOpts:{menuId:A.eH.MenubarGoMenu,title:I.N({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class PrevMarkerInFilesAction extends MarkerNavigationAction{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:I.N("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:f.u.focus,primary:1090,weight:100},menuOpts:{menuId:A.eH.MenubarGoMenu,title:I.N({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}(0,u._K)(se.ID,se),(0,u.Qr)(NextMarkerAction),(0,u.Qr)(PrevMarkerAction),(0,u.Qr)(NextMarkerInFilesAction),(0,u.Qr)(PrevMarkerInFilesAction);const re=new M.uy("markersNavigationVisible",!1),ae=u._l.bindToContribution(se.get);(0,u.fK)(new ae({id:"closeMarkersNavigation",precondition:re,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:f.u.focus,primary:9,secondary:[1033]}}))},5817:function(e,o,s){"use strict";s.r(o),s.d(o,{DefinitionAction:function(){return DefinitionAction},SymbolNavigationAction:function(){return SymbolNavigationAction},SymbolNavigationAnchor:function(){return SymbolNavigationAnchor}});var l=s(6268),d=s(5152),u=s(5393),g=s(2258),p=s(1432),m=s(8401),f=s(666),_=s(4410),C=s(5520),b=s(6830),w=s(1640),S=s(4527),y=s(187),L=s(4314),x=s(9102),k=s(3155),N=s(9010),D=s(1293),E=s(4669),T=s(5976),I=s(5935),A=s(3580),M=s(8819),R=s(5026),P=s(2065),O=s(1847),F=s(9989),B=s(9422),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const W=new M.uy("hasSymbols",!1,(0,A.N)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),V=(0,P.yh)("ISymbolNavigationService");let H=class SymbolNavigationService{constructor(e,o,s,l){this._editorService=o,this._notificationService=s,this._keybindingService=l,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=W.bindTo(e)}reset(){var e,o;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(o=this._currentMessage)||void 0===o||o.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const o=e.parent.parent;if(o.references.length<=1)return void this.reset();this._currentModel=o,this._currentIdx=o.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const s=new z(this._editorService),l=s.onDidChange((e=>{if(this._ignoreEditorChange)return;const s=this._editorService.getActiveCodeEditor();if(!s)return;const l=s.getModel(),d=s.getPosition();if(!l||!d)return;let u=!1,g=!1;for(const p of o.references)if((0,I.Xy)(p.uri,l.uri))u=!0,g=g||L.e.containsPosition(p.range,d);else if(u)break;u&&g||this.reset()}));this._currentState=(0,T.F8)(s,l)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const o=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:o.uri,options:{selection:L.e.collapseToStart(o.range),selectionRevealType:3}},e).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const o=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),s=o?(0,A.N)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,o.getLabel()):(0,A.N)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(s)}};H=__decorate([__param(0,M.i6),__param(1,w.$),__param(2,B.lT),__param(3,O.d)],H),(0,R.z)(V,H,!0),(0,b.fK)(new class extends b._l{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:W,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,o){return e.get(V).revealNext(o)}}),F.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:W,primary:9,handler(e){e.get(V).reset()}});let z=class EditorState{constructor(e){this._listener=new Map,this._disposables=new T.SL,this._onDidChange=new E.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,T.B9)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,T.F8)(e.onDidChangeCursorPosition((o=>this._onDidChange.fire({editor:e}))),e.onDidChangeModelContent((o=>this._onDidChange.fire({editor:e})))))}_onDidRemoveEditor(e){var o;null===(o=this._listener.get(e))||void 0===o||o.dispose(),this._listener.delete(e)}};z=__decorate([__param(0,w.$)],z);var U,K,j,G,q,Q,Z,Y,J=s(7753),X=s(6943),ee=s(4144),te=s(4565),ie=s(535),ne=s(184),oe=s(1922),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};ee.BH.appendMenuItem(ee.eH.EditorContext,{submenu:ee.eH.EditorContextPeek,title:A.N("peek.submenu","Peek"),group:"navigation",order:100});const se=new Set;function registerGoToAction(e){const o=new e;return(0,b.QG)(o),se.add(o.id),o}class SymbolNavigationAnchor{constructor(e,o){this.model=e,this.position=o}static is(e){return!(!e||"object"!==typeof e)&&(e instanceof SymbolNavigationAnchor||!(!y.L.isIPosition(e.position)||!e.model))}}class SymbolNavigationAction extends b.R6{constructor(e,o){super(o),this.configuration=e}run(e,o,s){if(!o.hasModel())return Promise.resolve(void 0);const l=e.get(B.lT),g=e.get(w.$),p=e.get(ie.ek),m=e.get(V),f=e.get(oe.p),C=o.getModel(),b=o.getPosition(),S=SymbolNavigationAnchor.is(s)?s:new SymbolNavigationAnchor(C,b),y=new _.Dl(o,5),L=(0,u.eP)(this._getLocationModel(f,S.model,S.position,y.token),y.token).then((e=>__awaiter(this,void 0,void 0,(function*(){var s;if(!e||y.token.isCancellationRequested)return;let l;if((0,d.Z9)(e.ariaMessage),e.referenceAt(C.uri,b)){const e=this._getAlternativeCommand(o);e!==this.id&&se.has(e)&&(l=o.getAction(e))}const u=e.references.length;if(0===u){if(!this.configuration.muteMessage){const e=C.getWordAtPosition(b);null===(s=J.O.get(o))||void 0===s||s.showMessage(this._getNoResultFoundMessage(e),b)}}else{if(1!==u||!l)return this._onResult(g,m,o,e);l.run()}}))),(e=>{l.error(e)})).finally((()=>{y.dispose()}));return p.showWhile(L,250),L}_onResult(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=this._getGoToPreference(s);if(s instanceof S.H||!(this.configuration.openInPeek||"peek"===d&&l.references.length>1)){const u=l.firstReference(),g=l.references.length>1&&"gotoAndPeek"===d,p=yield this._openReference(s,e,u,this.configuration.openToSide,!g);g&&p?this._openInPeek(p,l):l.dispose(),"goto"===d&&o.put(u)}else this._openInPeek(s,l)}))}_openReference(e,o,s,l,d){return __awaiter(this,void 0,void 0,(function*(){let u;if((0,k.vx)(s)&&(u=s.targetSelectionRange),u||(u=s.range),!u)return;const g=yield o.openCodeEditor({resource:s.uri,options:{selection:L.e.collapseToStart(u),selectionRevealType:3,selectionSource:"code.jump"}},e,l);if(g){if(d){const e=g.getModel(),o=g.deltaDecorations([],[{range:u,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((()=>{g.getModel()===e&&g.deltaDecorations(o,[])}),350)}return g}}))}_openInPeek(e,o){const s=N.J.get(e);s&&e.hasModel()?s.toggleWidget(e.getSelection(),(0,u.PG)((e=>Promise.resolve(o))),this.configuration.openInPeek):o.dispose()}}class DefinitionAction extends SymbolNavigationAction{_getLocationModel(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){return new D.oQ(yield(0,ne.nD)(e.definitionProvider,o,s,l),A.N("def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?A.N("noResultWord","No definition found for '{0}'",e.word):A.N("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(51).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(51).multipleDefinitions}}const re=p.$L&&!l.isStandalone?2118:70;registerGoToAction((U=class GoToDefinitionAction extends DefinitionAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:GoToDefinitionAction.id,label:A.N("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:M.Ao.and(x.u.hasDefinitionProvider,x.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:x.u.editorTextFocus,primary:re,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),te.P0.registerCommandAlias("editor.action.goToDeclaration",GoToDefinitionAction.id)}},U.id="editor.action.revealDefinition",U)),registerGoToAction((K=class OpenDefinitionToSideAction extends DefinitionAction{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:OpenDefinitionToSideAction.id,label:A.N("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:M.Ao.and(x.u.hasDefinitionProvider,x.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:x.u.editorTextFocus,primary:(0,g.gx)(2089,re),weight:100}}),te.P0.registerCommandAlias("editor.action.openDeclarationToTheSide",OpenDefinitionToSideAction.id)}},K.id="editor.action.revealDefinitionAside",K)),registerGoToAction((j=class PeekDefinitionAction extends DefinitionAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:PeekDefinitionAction.id,label:A.N("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:M.Ao.and(x.u.hasDefinitionProvider,X.Jy.notInPeekEditor,x.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:x.u.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:ee.eH.EditorContextPeek,group:"peek",order:2}}),te.P0.registerCommandAlias("editor.action.previewDeclaration",PeekDefinitionAction.id)}},j.id="editor.action.peekDefinition",j));class DeclarationAction extends SymbolNavigationAction{_getLocationModel(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){return new D.oQ(yield(0,ne.zq)(e.declarationProvider,o,s,l),A.N("decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?A.N("decl.noResultWord","No declaration found for '{0}'",e.word):A.N("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(51).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(51).multipleDeclarations}}registerGoToAction((G=class GoToDeclarationAction extends DeclarationAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:GoToDeclarationAction.id,label:A.N("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:M.Ao.and(x.u.hasDeclarationProvider,x.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?A.N("decl.noResultWord","No declaration found for '{0}'",e.word):A.N("decl.generic.noResults","No declaration found")}},G.id="editor.action.revealDeclaration",G)),registerGoToAction(class PeekDeclarationAction extends DeclarationAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:A.N("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:M.Ao.and(x.u.hasDeclarationProvider,X.Jy.notInPeekEditor,x.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ee.eH.EditorContextPeek,group:"peek",order:3}})}});class TypeDefinitionAction extends SymbolNavigationAction{_getLocationModel(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){return new D.oQ(yield(0,ne.L3)(e.typeDefinitionProvider,o,s,l),A.N("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?A.N("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):A.N("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(51).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(51).multipleTypeDefinitions}}registerGoToAction((q=class GoToTypeDefinitionAction extends TypeDefinitionAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:GoToTypeDefinitionAction.ID,label:A.N("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:M.Ao.and(x.u.hasTypeDefinitionProvider,x.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:x.u.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},q.ID="editor.action.goToTypeDefinition",q)),registerGoToAction((Q=class PeekTypeDefinitionAction extends TypeDefinitionAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:PeekTypeDefinitionAction.ID,label:A.N("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:M.Ao.and(x.u.hasTypeDefinitionProvider,X.Jy.notInPeekEditor,x.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ee.eH.EditorContextPeek,group:"peek",order:4}})}},Q.ID="editor.action.peekTypeDefinition",Q));class ImplementationAction extends SymbolNavigationAction{_getLocationModel(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){return new D.oQ(yield(0,ne.f4)(e.implementationProvider,o,s,l),A.N("impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?A.N("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):A.N("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(51).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(51).multipleImplementations}}registerGoToAction((Z=class GoToImplementationAction extends ImplementationAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:GoToImplementationAction.ID,label:A.N("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:M.Ao.and(x.u.hasImplementationProvider,x.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:x.u.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},Z.ID="editor.action.goToImplementation",Z)),registerGoToAction((Y=class PeekImplementationAction extends ImplementationAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:PeekImplementationAction.ID,label:A.N("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:M.Ao.and(x.u.hasImplementationProvider,X.Jy.notInPeekEditor,x.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:x.u.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:ee.eH.EditorContextPeek,group:"peek",order:5}})}},Y.ID="editor.action.peekImplementation",Y));class ReferencesAction extends SymbolNavigationAction{_getNoResultFoundMessage(e){return e?A.N("references.no","No references found for '{0}'",e.word):A.N("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(51).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(51).multipleReferences}}registerGoToAction(class GoToReferencesAction extends ReferencesAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:A.N("goToReferences.label","Go to References"),alias:"Go to References",precondition:M.Ao.and(x.u.hasReferenceProvider,X.Jy.notInPeekEditor,x.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:x.u.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){return new D.oQ(yield(0,ne.aA)(e.referenceProvider,o,s,!0,l),A.N("ref.title","References"))}))}}),registerGoToAction(class PeekReferencesAction extends ReferencesAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:A.N("references.action.label","Peek References"),alias:"Peek References",precondition:M.Ao.and(x.u.hasReferenceProvider,X.Jy.notInPeekEditor,x.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ee.eH.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){return new D.oQ(yield(0,ne.aA)(e.referenceProvider,o,s,!1,l),A.N("ref.title","References"))}))}});class GenericGoToLocationAction extends SymbolNavigationAction{constructor(e,o,s){super(e,{id:"editor.action.goToLocation",label:A.N("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:M.Ao.and(X.Jy.notInPeekEditor,x.u.isInWalkThroughSnippet.toNegated())}),this._references=o,this._gotoMultipleBehaviour=s}_getLocationModel(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){return new D.oQ(this._references,A.N("generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&A.N("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var o;return null!==(o=this._gotoMultipleBehaviour)&&void 0!==o?o:e.getOption(51).multipleReferences}_getAlternativeCommand(){return""}}te.P0.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:f.o},{name:"position",description:"The position at which to start",constraint:y.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,o,s,l,d,u,g)=>__awaiter(void 0,void 0,void 0,(function*(){(0,m.p_)(f.o.isUri(o)),(0,m.p_)(y.L.isIPosition(s)),(0,m.p_)(Array.isArray(l)),(0,m.p_)("undefined"===typeof d||"string"===typeof d),(0,m.p_)("undefined"===typeof g||"boolean"===typeof g);const p=e.get(w.$),_=yield p.openCodeEditor({resource:o},p.getFocusedCodeEditor());if((0,C.CL)(_))return _.setPosition(s),_.revealPositionInCenterIfOutsideViewport(s,0),_.invokeWithinContext((e=>{const o=new class extends GenericGoToLocationAction{_getNoResultFoundMessage(e){return u||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(u),openInPeek:Boolean(g),openToSide:!1},l,d);e.get(P.TG).invokeFunction(o.run.bind(o),_)}))}))}),te.P0.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:f.o},{name:"position",description:"The position at which to start",constraint:y.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,o,s,l,d)=>__awaiter(void 0,void 0,void 0,(function*(){e.get(te.Hy).executeCommand("editor.action.goToLocations",o,s,l,d,void 0,!0)}))}),te.P0.registerCommand({id:"editor.action.findReferences",handler:(e,o,s)=>{(0,m.p_)(f.o.isUri(o)),(0,m.p_)(y.L.isIPosition(s));const l=e.get(oe.p),d=e.get(w.$);return d.openCodeEditor({resource:o},d.getFocusedCodeEditor()).then((e=>{if(!(0,C.CL)(e)||!e.hasModel())return;const o=N.J.get(e);if(!o)return;const d=(0,u.PG)((o=>(0,ne.aA)(l.referenceProvider,e.getModel(),y.L.lift(s),!1,o).then((e=>new D.oQ(e,A.N("ref.title","References")))))),g=new L.e(s.lineNumber,s.column,s.lineNumber,s.column);return Promise.resolve(o.toggleWidget(g,d,!1))}))}}),te.P0.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),ee.BH.appendMenuItems([{id:ee.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:A.N({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:ee.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:A.N({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:ee.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:A.N({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:ee.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:A.N({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:ee.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:A.N({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}])},184:function(e,o,s){"use strict";s.d(o,{L3:function(){return getTypeDefinitionsAtPosition},aA:function(){return getReferencesAtPosition},f4:function(){return getImplementationsAtPosition},nD:function(){return getDefinitionsAtPosition},zq:function(){return getDeclarationsAtPosition}});var l=s(1050),d=s(7301),u=s(6830),g=s(1293),p=s(1922),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function getLocationLinks(e,o,s,l){const u=s.ordered(e),g=u.map((s=>Promise.resolve(l(s,e,o)).then(void 0,(e=>{(0,d.Cp)(e)}))));return Promise.all(g).then((e=>{const o=[];for(let s of e)Array.isArray(s)?o.push(...s):s&&o.push(s);return o}))}function getDefinitionsAtPosition(e,o,s,l){return getLocationLinks(o,s,e,((e,o,s)=>e.provideDefinition(o,s,l)))}function getDeclarationsAtPosition(e,o,s,l){return getLocationLinks(o,s,e,((e,o,s)=>e.provideDeclaration(o,s,l)))}function getImplementationsAtPosition(e,o,s,l){return getLocationLinks(o,s,e,((e,o,s)=>e.provideImplementation(o,s,l)))}function getTypeDefinitionsAtPosition(e,o,s,l){return getLocationLinks(o,s,e,((e,o,s)=>e.provideTypeDefinition(o,s,l)))}function getReferencesAtPosition(e,o,s,l,d){return getLocationLinks(o,s,e,((e,o,s)=>__awaiter(this,void 0,void 0,(function*(){const u=yield e.provideReferences(o,s,{includeDeclaration:!0},d);if(!l||!u||2!==u.length)return u;const g=yield e.provideReferences(o,s,{includeDeclaration:!1},d);return g&&1===g.length?g:u}))))}function _sortedAndDeduped(e){return __awaiter(this,void 0,void 0,(function*(){const o=yield e(),s=new g.oQ(o,""),l=s.references.map((e=>e.link));return s.dispose(),l}))}(0,u.sb)("_executeDefinitionProvider",((e,o,s)=>{const d=e.get(p.p),u=getDefinitionsAtPosition(d.definitionProvider,o,s,l.T.None);return _sortedAndDeduped((()=>u))})),(0,u.sb)("_executeTypeDefinitionProvider",((e,o,s)=>{const d=e.get(p.p),u=getTypeDefinitionsAtPosition(d.typeDefinitionProvider,o,s,l.T.None);return _sortedAndDeduped((()=>u))})),(0,u.sb)("_executeDeclarationProvider",((e,o,s)=>{const d=e.get(p.p),u=getDeclarationsAtPosition(d.declarationProvider,o,s,l.T.None);return _sortedAndDeduped((()=>u))})),(0,u.sb)("_executeReferenceProvider",((e,o,s)=>{const d=e.get(p.p),u=getReferencesAtPosition(d.referenceProvider,o,s,!1,l.T.None);return _sortedAndDeduped((()=>u))})),(0,u.sb)("_executeImplementationProvider",((e,o,s)=>{const d=e.get(p.p),u=getImplementationsAtPosition(d.implementationProvider,o,s,l.T.None);return _sortedAndDeduped((()=>u))}))},2005:function(e,o,s){"use strict";s.d(o,{yN:function(){return ClickLinkGesture}});var l=s(4669),d=s(5976),u=s(1432);function hasModifier(e,o){return!!e[o]}class ClickLinkMouseEvent{constructor(e,o){this.target=e.target,this.hasTriggerModifier=hasModifier(e.event,o.triggerModifier),this.hasSideBySideModifier=hasModifier(e.event,o.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class ClickLinkKeyboardEvent{constructor(e,o){this.keyCodeIsTriggerKey=e.keyCode===o.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===o.triggerSideBySideKey,this.hasTriggerModifier=hasModifier(e,o.triggerModifier)}}class ClickLinkOptions{constructor(e,o,s,l){this.triggerKey=e,this.triggerModifier=o,this.triggerSideBySideKey=s,this.triggerSideBySideModifier=l}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function createOptions(e){return"altKey"===e?u.dz?new ClickLinkOptions(57,"metaKey",6,"altKey"):new ClickLinkOptions(5,"ctrlKey",6,"altKey"):u.dz?new ClickLinkOptions(6,"altKey",57,"metaKey"):new ClickLinkOptions(6,"altKey",5,"ctrlKey")}class ClickLinkGesture extends d.JT{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new l.Q5),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new l.Q5),this.onExecute=this._onExecute.event,this._onCancel=this._register(new l.Q5),this.onCancel=this._onCancel.event,this._editor=e,this._opts=createOptions(this._editor.getOption(70)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration((e=>{if(e.hasChanged(70)){const e=createOptions(this._editor.getOption(70));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}}))),this._register(this._editor.onMouseMove((e=>this._onEditorMouseMove(new ClickLinkMouseEvent(e,this._opts))))),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(new ClickLinkMouseEvent(e,this._opts))))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(new ClickLinkMouseEvent(e,this._opts))))),this._register(this._editor.onKeyDown((e=>this._onEditorKeyDown(new ClickLinkKeyboardEvent(e,this._opts))))),this._register(this._editor.onKeyUp((e=>this._onEditorKeyUp(new ClickLinkKeyboardEvent(e,this._opts))))),this._register(this._editor.onMouseDrag((()=>this._resetHandler()))),this._register(this._editor.onDidChangeCursorSelection((e=>this._onDidChangeCursorSelection(e)))),this._register(this._editor.onDidChangeModel((e=>this._resetHandler()))),this._register(this._editor.onDidChangeModelContent((()=>this._resetHandler()))),this._register(this._editor.onDidScrollChange((e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()})))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const o=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===o&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},2470:function(e,o,s){"use strict";s.r(o),s.d(o,{GotoDefinitionAtPositionEditorContribution:function(){return I}});var l=s(5393),d=s(7301),u=s(9365),g=s(5976),p=s(8401),m=s(4410),f=s(6830),_=s(187),C=s(4314),b=s(2042),w=s(8216),S=s(2005),y=s(6943),L=s(3580),x=s(8819),k=s(3910),N=s(7781),D=s(5817),E=s(184),T=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let I=class GotoDefinitionAtPositionEditorContribution{constructor(e,o,s,l){this.textModelResolverService=o,this.languageService=s,this.languageFeaturesService=l,this.toUnhook=new g.SL,this.toUnhookForKeyboard=new g.SL,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let u=new S.yN(e);this.toUnhook.add(u),this.toUnhook.add(u.onMouseMoveOrRelevantKeyDown((([e,o])=>{this.startFindDefinitionFromMouse(e,(0,p.f6)(o))}))),this.toUnhook.add(u.onExecute((e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).then((()=>{this.removeLinkDecorations()}),(e=>{this.removeLinkDecorations(),(0,d.dL)(e)}))}))),this.toUnhook.add(u.onCancel((()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null})))}static get(e){return e.getContribution(GotoDefinitionAtPositionEditorContribution.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then((()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())})))}))}startFindDefinitionFromMouse(e,o){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,o))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const s=e.target.position;this.startFindDefinition(s)}startFindDefinition(e){var o;this.toUnhookForKeyboard.clear();const s=e?null===(o=this.editor.getModel())||void 0===o?void 0:o.getWordAtPosition(e):null;if(!s)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===s.startColumn&&this.currentWordAtPosition.endColumn===s.endColumn&&this.currentWordAtPosition.word===s.word)return Promise.resolve(0);this.currentWordAtPosition=s;let g=new m.yy(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,l.PG)((o=>this.findDefinition(e,o))),this.previousPromise.then((o=>{if(o&&o.length&&g.validate(this.editor))if(o.length>1)this.addDecoration(new C.e(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn),(new u.W5).appendText(L.N("multipleResults","Click to show {0} definitions.",o.length)));else{let l=o[0];if(!l.uri)return;this.textModelResolverService.createModelReference(l.uri).then((o=>{if(!o.object||!o.object.textEditorModel)return void o.dispose();const{object:{textEditorModel:d}}=o,{startLineNumber:g}=l.range;if(g<1||g>d.getLineCount())return void o.dispose();const p=this.getPreviewValue(d,g,l);let m;m=l.originSelectionRange?C.e.lift(l.originSelectionRange):new C.e(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn);const f=this.languageService.guessLanguageIdByFilepathOrFirstLine(d.uri);this.addDecoration(m,(new u.W5).appendCodeblock(f||"",p)),o.dispose()}))}else this.removeLinkDecorations()})).then(void 0,d.dL)}getPreviewValue(e,o,s){let l=s.targetSelectionRange?s.range:this.getPreviewRangeBasedOnBrackets(e,o);const d=l.endLineNumber-l.startLineNumber;d>=GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES&&(l=this.getPreviewRangeBasedOnIndentation(e,o));const u=this.stripIndentationFromPreviewRange(e,o,l);return u}stripIndentationFromPreviewRange(e,o,s){const l=e.getLineFirstNonWhitespaceColumn(o);let d=l;for(let g=o+1;g<s.endLineNumber;g++){const o=e.getLineFirstNonWhitespaceColumn(g);d=Math.min(d,o)}const u=e.getValueInRange(s).replace(new RegExp(`^\\s{${d-1}}`,"gm"),"").trim();return u}getPreviewRangeBasedOnIndentation(e,o){const s=e.getLineFirstNonWhitespaceColumn(o),l=Math.min(e.getLineCount(),o+GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);let d=o+1;for(;d<l;d++){let o=e.getLineFirstNonWhitespaceColumn(d);if(s===o)break}return new C.e(o,1,d+1,1)}getPreviewRangeBasedOnBrackets(e,o){const s=Math.min(e.getLineCount(),o+GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES),l=[];let d=!0,u=e.bracketPairs.findNextBracket(new _.L(o,1));while(null!==u){if(0===l.length)l.push(u);else{const e=l[l.length-1];if(e.open[0]===u.open[0]&&e.isOpen&&!u.isOpen?l.pop():l.push(u),0===l.length){if(!d)return new C.e(o,1,u.range.endLineNumber+1,1);d=!1}}const g=e.getLineMaxColumn(o);let p=u.range.endLineNumber,m=u.range.endColumn;if(g===u.range.endColumn&&(p++,m=1),p>s)return new C.e(o,1,s+1,1);u=e.bracketPairs.findNextBracket(new _.L(p,m))}return new C.e(o,1,s+1,1)}addDecoration(e,o){const s={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:o}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[s])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,o){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!o&&o.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,o){const s=this.editor.getModel();return s?(0,E.nD)(this.languageFeaturesService.definitionProvider,s,e,o):Promise.resolve(null)}gotoDefinition(e,o){return this.editor.setPosition(e),this.editor.invokeWithinContext((e=>{const s=!o&&this.editor.getOption(78)&&!this.isInPeekEditor(e),l=new D.DefinitionAction({openToSide:o,openInPeek:s,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0});return l.run(e,this.editor)}))}isInPeekEditor(e){const o=e.get(x.i6);return y.Jy.inPeekEditor.getValue(o)}dispose(){this.toUnhook.dispose()}};I.ID="editor.contrib.gotodefinitionatposition",I.MAX_SOURCE_PREVIEW_LINES=8,I=__decorate([__param(1,w.S),__param(2,b.O),__param(3,T.p)],I),(0,f._K)(I.ID,I),(0,N.Ic)(((e,o)=>{const s=e.getColor(k._Yy);s&&o.addRule(`.monaco-editor .goto-definition-link { color: ${s} !important; }`)}))},9010:function(e,o,s){"use strict";s.d(o,{J:function(){return oe}});var l=s(5393),d=s(7301),u=s(2258),g=s(5976),p=s(1640),m=s(187),f=s(4314),_=s(6943),C=s(3580),b=s(4565),w=s(3108),S=s(8819),y=s(2065),L=s(9989),x=s(9785),k=s(9422),N=s(7060),D=s(1293),E=s(5321),T=s(3937),I=s(1264),A=s(4669),M=s(6663),R=s(5935),P=s(4527),O=s(2822),F=s(5638),B=s(8801),W=s(2042),V=s(8216),H=s(7488),z=s(4650),U=s(489),K=s(5392),j=s(8843),G=s(1847),q=s(4349),Q=s(8810),Z=s(7781),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let Y=class DataSource{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof D.oQ||e instanceof D.F2}getChildren(e){if(e instanceof D.oQ)return e.groups;if(e instanceof D.F2)return e.resolve(this._resolverService).then((e=>e.children));throw new Error("bad tree")}};Y=__decorate([__param(0,V.S)],Y);class Delegate{getHeight(){return 23}getTemplateId(e){return e instanceof D.F2?ee.id:OneReferenceRenderer.id}}let J=class StringRepresentationProvider{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var o;if(e instanceof D.WX){const s=null===(o=e.parent.getPreview(e))||void 0===o?void 0:o.preview(e.range);if(s)return s.value}return(0,R.EZ)(e.uri)}};J=__decorate([__param(0,G.d)],J);class IdentityProvider{getId(e){return e instanceof D.WX?e.id:e.uri}}let X=class FileReferencesTemplate extends g.JT{constructor(e,o,s){super(),this._uriLabel=o;const l=document.createElement("div");l.classList.add("reference-file"),this.file=this._register(new U.g(l,{supportHighlights:!0})),this.badge=new H.Z(E.R3(l,E.$(".count"))),this._register((0,Q.WZ)(this.badge,s)),e.appendChild(l)}set(e,o){let s=(0,R.XX)(e.uri);this.file.setLabel((0,j.p)(e.uri),this._uriLabel.getUriLabel(s,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:o});const l=e.children.length;this.badge.setCount(l),l>1?this.badge.setTitleFormat((0,C.N)("referencesCount","{0} references",l)):this.badge.setTitleFormat((0,C.N)("referenceCount","{0} reference",l))}};X=__decorate([__param(1,q.e),__param(2,Z.XE)],X);let ee=class FileReferencesRenderer{constructor(e){this._instantiationService=e,this.templateId=FileReferencesRenderer.id}renderTemplate(e){return this._instantiationService.createInstance(X,e)}renderElement(e,o,s){s.set(e.element,(0,K.mB)(e.filterData))}disposeTemplate(e){e.dispose()}};ee.id="FileReferencesRenderer",ee=__decorate([__param(0,y.TG)],ee);class OneReferenceTemplate{constructor(e){this.label=new z.q(e)}set(e,o){var s;const l=null===(s=e.parent.getPreview(e))||void 0===s?void 0:s.preview(e.range);if(l&&l.value){const{value:e,highlight:s}=l;o&&!K.CL.isDefault(o)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,(0,K.mB)(o))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[s]))}else this.label.set(`${(0,R.EZ)(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}}class OneReferenceRenderer{constructor(){this.templateId=OneReferenceRenderer.id}renderTemplate(e){return new OneReferenceTemplate(e)}renderElement(e,o,s){s.set(e.element,e.filterData)}disposeTemplate(){}}OneReferenceRenderer.id="OneReferenceRenderer";class AccessibilityProvider{getWidgetAriaLabel(){return(0,C.N)("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var te=s(4862),referencesWidget_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},referencesWidget_param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class DecorationsManager{constructor(e,o){this._editor=e,this._model=o,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new g.SL,this._callOnModelChange=new g.SL,this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(let o of this._model.references)if(o.uri.toString()===e.uri.toString())return void this._addDecorations(o.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const o=[],s=[];for(let d=0,u=e.children.length;d<u;d++){let l=e.children[d];this._decorationIgnoreSet.has(l.id)||l.uri.toString()===this._editor.getModel().uri.toString()&&(o.push({range:l.range,options:DecorationsManager.DecorationOptions}),s.push(d))}const l=this._editor.deltaDecorations([],o);for(let d=0;d<l.length;d++)this._decorations.set(l[d],e.children[s[d]])}_onDecorationChanged(){const e=[],o=this._editor.getModel();if(o){for(let[s,l]of this._decorations){const d=o.getDecorationRange(s);if(!d)continue;let u=!1;if(!f.e.equalsRange(d,l.range)){if(f.e.spansMultipleLines(d))u=!0;else{const e=l.range.endColumn-l.range.startColumn,o=d.endColumn-d.startColumn;e!==o&&(u=!0)}u?(this._decorationIgnoreSet.add(l.id),e.push(s)):l.range=d}}for(let o=0,s=e.length;o<s;o++)this._decorations.delete(e[o]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}DecorationsManager.DecorationOptions=O.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class LayoutData{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let o,s;try{const l=JSON.parse(e);o=l.ratio,s=l.heightInLines}catch(l){}return{ratio:o||.7,heightInLines:s||18}}}class ReferencesTree extends x.ls{}let ie=class ReferenceWidget extends _.vk{constructor(e,o,s,l,d,u,p,m,f,_,C,b){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},u),this._defaultTreeKeyboardSupport=o,this.layoutData=s,this._textModelResolverService=d,this._instantiationService=u,this._peekViewService=p,this._uriLabel=m,this._undoRedoService=f,this._keybindingService=_,this._languageService=C,this._languageConfigurationService=b,this._disposeOnNewModel=new g.SL,this._callOnDispose=new g.SL,this._onDidSelectReference=new A.Q5,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new E.Ro(0,0),this._applyTheme(l.getColorTheme()),this._callOnDispose.add(l.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,g.B9)(this._preview),(0,g.B9)(this._previewNotAvailableMessage),(0,g.B9)(this._tree),(0,g.B9)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const o=e.getColor(_.SC)||I.Il.transparent;this.style({arrowColor:o,frameColor:o,headerBackgroundColor:e.getColor(_.KY)||I.Il.transparent,primaryHeadingColor:e.getColor(_.IH),secondaryHeadingColor:e.getColor(_.R7)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=E.R3(e,E.$("div.messages")),E.Cp(this._messageContainer),this._splitView=new T.z(e,{orientation:1}),this._previewContainer=E.R3(e,E.$("div.preview.inline"));let o={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(P.H,this._previewContainer,o,this.editor),E.Cp(this._previewContainer),this._previewNotAvailableMessage=new O.yO(C.N("missingPreviewMessage","no preview available"),B.bd,O.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=E.R3(e,E.$("div.ref-tree.inline"));const s={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new AccessibilityProvider,keyboardNavigationLabelProvider:this._instantiationService.createInstance(J),identityProvider:new IdentityProvider,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:_.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(E.mu(this._treeContainer,"keydown",(e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(ReferencesTree,"ReferencesWidget",this._treeContainer,new Delegate,[this._instantiationService.createInstance(ee),this._instantiationService.createInstance(OneReferenceRenderer)],this._instantiationService.createInstance(Y),s),this._splitView.addView({onDidChange:A.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},T.M.Distribute),this._splitView.addView({onDidChange:A.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${e}px`,this._tree.layout(this._dim.height,e)}},T.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));let onEvent=(e,o)=>{e instanceof D.WX&&("show"===o&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:o,source:"tree"}))};this._tree.onDidOpen((e=>{e.sideBySide?onEvent(e.element,"side"):e.editorOptions.pinned?onEvent(e.element,"goto"):onEvent(e.element,"show")})),E.Cp(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,o){super._doLayoutBody(e,o),this._dim=new E.Ro(o,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(o),this._splitView.resizeView(0,o*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then((()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))}))}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=C.N("noResults","No results"),E.$Z(this._messageContainer),Promise.resolve(void 0)):(E.Cp(this._messageContainer),this._decorationsManager=new DecorationsManager(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((e=>this._tree.rerender(e)))),this._disposeOnNewModel.add(this._preview.onMouseDown((e=>{const{event:o,target:s}=e;if(2!==o.detail)return;const l=this._getFocusedReference();l&&this._onDidSelectReference.fire({element:{uri:l.uri,range:s.range},kind:o.ctrlKey||o.metaKey||o.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),E.$Z(this._treeContainer),E.$Z(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof D.WX?e:e instanceof D.F2&&e.children.length>0?e.children[0]:void 0}revealReference(e){return __awaiter(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,o){return __awaiter(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==M.lg.inMemory?this.setTitle((0,R.Hx)(e.uri),this._uriLabel.getUriLabel((0,R.XX)(e.uri))):this.setTitle(C.N("peekView.alternateTitle","References"));const s=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(o&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const l=yield s;if(!this._model)return void l.dispose();(0,g.B9)(this._previewModelReference);const d=l.object;if(d){const o=this._preview.getModel()===d.textEditorModel?0:1,s=f.e.lift(e.range).collapseToStart();this._previewModelReference=l,this._preview.setModel(d.textEditorModel),this._preview.setSelection(s),this._preview.revealRangeInCenter(s,o)}else this._preview.setModel(this._previewNotAvailableMessage),l.dispose()}))}};ie=referencesWidget_decorate([referencesWidget_param(3,Z.XE),referencesWidget_param(4,V.S),referencesWidget_param(5,y.TG),referencesWidget_param(6,_.Fw),referencesWidget_param(7,q.e),referencesWidget_param(8,te.tJ),referencesWidget_param(9,G.d),referencesWidget_param(10,W.O),referencesWidget_param(11,F.c_)],ie);var referencesController_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},referencesController_param=function(e,o){return function(s,l){o(s,l,e)}},referencesController_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const ne=new S.uy("referenceSearchVisible",!1,C.N("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let oe=class ReferencesController{constructor(e,o,s,l,d,u,p,m){this._defaultTreeKeyboardSupport=e,this._editor=o,this._editorService=l,this._notificationService=d,this._instantiationService=u,this._storageService=p,this._configurationService=m,this._disposables=new g.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=ne.bindTo(s)}static get(e){return e.getContribution(ReferencesController.ID)}dispose(){var e,o;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(o=this._model)||void 0===o||o.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,o,s){let l;if(this._widget&&(l=this._widget.position),this.closeWidget(),l&&e.containsPosition(l))return;this._peekMode=s,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>{this.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((()=>{this._ignoreModelChangeEvent||this.closeWidget()})));const d="peekViewLayout",u=LayoutData.fromJSON(this._storageService.get(d,0,"{}"));this._widget=this._instantiationService.createInstance(ie,this._editor,this._defaultTreeKeyboardSupport,u),this._widget.setTitle(C.N("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((()=>{o.cancel(),this._widget&&(this._storageService.store(d,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((e=>{let{element:o,kind:l}=e;if(o)switch(l){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(o,!1,!1);break;case"side":this.openReference(o,!0,!1);break;case"goto":s?this._gotoReference(o):this.openReference(o,!1,!0);break}})));const g=++this._requestIdPool;o.then((o=>{var s;if(g===this._requestIdPool&&this._widget)return null===(s=this._model)||void 0===s||s.dispose(),this._model=o,this._widget.setModel(this._model).then((()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(C.N("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let o=this._editor.getModel().uri,s=new m.L(e.startLineNumber,e.startColumn),l=this._model.nearestReference(o,s);if(l)return this._widget.setSelection(l).then((()=>{this._widget&&"editor"===this._editor.getOption(77)&&this._widget.focusOnPreviewEditor()}))}}));o.dispose()}),(e=>{this._notificationService.error(e)}))}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return referencesController_awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const o=this._widget.position;if(!o)return;const s=this._model.nearestReference(this._editor.getModel().uri,o);if(!s)return;const l=this._model.nextOrPreviousReference(s,e),d=this._editor.hasTextFocus(),u=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(l),yield this._gotoReference(l),d?this._editor.focus():this._widget&&u&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return referencesController_awaiter(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(e=!0){var o,s;null===(o=this._widget)||void 0===o||o.dispose(),null===(s=this._model)||void 0===s||s.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const o=f.e.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:o,selectionSource:"code.jump"}},this._editor).then((e=>{var s;if(this._ignoreModelChangeEvent=!1,e&&this._widget)if(this._editor===e)this._widget.show(o),this._widget.focusOnReferenceTree();else{const d=ReferencesController.get(e),u=this._model.clone();this.closeWidget(),e.focus(),null===d||void 0===d||d.toggleWidget(o,(0,l.PG)((e=>Promise.resolve(u))),null!==(s=this._peekMode)&&void 0!==s&&s)}else this.closeWidget()}),(e=>{this._ignoreModelChangeEvent=!1,(0,d.dL)(e)}))}openReference(e,o,s){o||this.closeWidget();const{uri:l,range:d}=e;this._editorService.openCodeEditor({resource:l,options:{selection:d,selectionSource:"code.jump",pinned:s}},this._editor,o)}};function withController(e,o){const s=(0,_.rc)(e);if(!s)return;const l=oe.get(s);l&&o(l)}oe.ID="editor.contrib.referencesController",oe=referencesController_decorate([referencesController_param(2,S.i6),referencesController_param(3,p.$),referencesController_param(4,k.lT),referencesController_param(5,y.TG),referencesController_param(6,N.Uy),referencesController_param(7,w.Ui)],oe),L.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,u.gx)(2089,60),when:S.Ao.or(ne,_.Jy.inPeekEditor),handler(e){withController(e,(e=>{e.changeFocusBetweenPreviewAndReferences()}))}}),L.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:S.Ao.or(ne,_.Jy.inPeekEditor),handler(e){withController(e,(e=>{e.goToNextOrPreviousReference(!0)}))}}),L.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:S.Ao.or(ne,_.Jy.inPeekEditor),handler(e){withController(e,(e=>{e.goToNextOrPreviousReference(!1)}))}}),b.P0.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),b.P0.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),b.P0.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),b.P0.registerCommand("closeReferenceSearch",(e=>withController(e,(e=>e.closeWidget())))),L.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:S.Ao.and(_.Jy.inPeekEditor,S.Ao.not("config.editor.stablePeek"))}),L.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:S.Ao.and(ne,S.Ao.not("config.editor.stablePeek"))}),L.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:S.Ao.and(ne,x.CQ,x.PS.negate(),x.uJ.negate()),handler(e){var o;const s=e.get(x.Lw),l=null===(o=s.lastFocusedList)||void 0===o?void 0:o.getFocus();Array.isArray(l)&&l[0]instanceof D.WX&&withController(e,(e=>e.revealReference(l[0])))}}),L.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:S.Ao.and(ne,x.CQ,x.PS.negate(),x.uJ.negate()),handler(e){var o;const s=e.get(x.Lw),l=null===(o=s.lastFocusedList)||void 0===o?void 0:o.getFocus();Array.isArray(l)&&l[0]instanceof D.WX&&withController(e,(e=>e.openReference(l[0],!0,!0)))}}),b.P0.registerCommand("openReference",(e=>{var o;const s=e.get(x.Lw),l=null===(o=s.lastFocusedList)||void 0===o?void 0:o.getFocus();Array.isArray(l)&&l[0]instanceof D.WX&&withController(e,(e=>e.openReference(l[0],!1,!0)))}))},1293:function(e,o,s){"use strict";s.d(o,{F2:function(){return FileReferences},WX:function(){return OneReference},oQ:function(){return ReferencesModel}});var l=s(7301),d=s(4669),u=s(4742),g=s(5976),p=s(3702),m=s(5935),f=s(2677),_=s(4314),C=s(3580),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class OneReference{constructor(e,o,s,l){this.isProviderFirst=e,this.parent=o,this.link=s,this._rangeCallback=l,this.id=u.a.nextId()}get uri(){return this.link.uri}get range(){var e,o;return null!==(o=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==o?o:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const o=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return o?(0,C.N)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,m.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,o.value):(0,C.N)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,m.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class FilePreview{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,o=8){const s=this._modelReference.object.textEditorModel;if(!s)return;const{startLineNumber:l,startColumn:d,endLineNumber:u,endColumn:g}=e,p=s.getWordUntilPosition({lineNumber:l,column:d-o}),m=new _.e(l,p.startColumn,l,d),f=new _.e(u,g,u,1073741824),C=s.getValueInRange(m).replace(/^\s+/,""),b=s.getValueInRange(e),w=s.getValueInRange(f).replace(/\s+$/,"");return{value:C+b+w,highlight:{start:C.length,end:C.length+b.length}}}}class FileReferences{constructor(e,o){this.parent=e,this.uri=o,this.children=[],this._previews=new p.Y9}dispose(){(0,g.B9)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?(0,C.N)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,m.EZ)(this.uri),this.uri.fsPath):(0,C.N)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,m.EZ)(this.uri),this.uri.fsPath)}resolve(e){return __awaiter(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(let s of this.children)if(!this._previews.has(s.uri))try{const o=yield e.createModelReference(s.uri);this._previews.set(s.uri,new FilePreview(o))}catch(o){(0,l.dL)(o)}return this}))}}class ReferencesModel{constructor(e,o){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new d.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=o;const[s]=e;let l;e.sort(ReferencesModel._compareReferences);for(let d of e)if(l&&m.SF.isEqual(l.uri,d.uri,!0)||(l=new FileReferences(this,d.uri),this.groups.push(l)),0===l.children.length||0!==ReferencesModel._compareReferences(d,l.children[l.children.length-1])){const e=new OneReference(s===d,l,d,(e=>this._onDidChangeReferenceRange.fire(e)));this.references.push(e),l.children.push(e)}}dispose(){(0,g.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new ReferencesModel(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,C.N)("aria.result.0","No results found"):1===this.references.length?(0,C.N)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,C.N)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,C.N)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,o){let{parent:s}=e,l=s.children.indexOf(e),d=s.children.length,u=s.parent.groups.length;return 1===u||o&&l+1<d||!o&&l>0?(l=o?(l+1)%d:(l+d-1)%d,s.children[l]):(l=s.parent.groups.indexOf(s),o?(l=(l+1)%u,s.parent.groups[l].children[0]):(l=(l+u-1)%u,s.parent.groups[l].children[s.parent.groups[l].children.length-1]))}nearestReference(e,o){const s=this.references.map(((s,l)=>({idx:l,prefixLen:f.Mh(s.uri.toString(),e.toString()),offsetDist:100*Math.abs(s.range.startLineNumber-o.lineNumber)+Math.abs(s.range.startColumn-o.column)}))).sort(((e,o)=>e.prefixLen>o.prefixLen?-1:e.prefixLen<o.prefixLen?1:e.offsetDist<o.offsetDist?-1:e.offsetDist>o.offsetDist?1:0))[0];if(s)return this.references[s.idx]}referenceAt(e,o){for(const s of this.references)if(s.uri.toString()===e.toString()&&_.e.containsPosition(s.range,o))return s}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,o){return m.SF.compare(e.uri,o.uri)||_.e.compareRangesUsingStarts(e.range,o.range)}}},1095:function(e,o,s){"use strict";s.d(o,{R8:function(){return getHover}});var l=s(5393),d=s(1050),u=s(7301),g=s(6830),p=s(1922),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class HoverProviderResult{constructor(e,o,s){this.provider=e,this.hover=o,this.ordinal=s}}function executeProvider(e,o,s,l,d){return __awaiter(this,void 0,void 0,(function*(){try{const u=yield Promise.resolve(e.provideHover(s,l,d));if(u&&isValid(u))return new HoverProviderResult(e,u,o)}catch(g){(0,u.Cp)(g)}}))}function getHover(e,o,s,d){const u=e.ordered(o),g=u.map(((e,l)=>executeProvider(e,l,o,s,d)));return l.Aq.fromPromises(g).coalesce()}function getHoverPromise(e,o,s,l){return getHover(e,o,s,l).map((e=>e.hover)).toPromise()}function isValid(e){const o="undefined"!==typeof e.range,s="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return o&&s}(0,g.sb)("_executeHoverProvider",((e,o,s)=>{const l=e.get(p.p);return getHoverPromise(l.hoverProvider,o,s,d.T.None)}))},6122:function(e,o,s){"use strict";s.r(o),s.d(o,{ModesHoverController:function(){return se}});var l=s(2258),d=s(5976),u=s(6830),g=s(4314),p=s(9102),m=s(2042),f=s(2470),_=s(5321),C=s(9069),b=s(3161);const w=_.$;class HoverWidget extends d.JT{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new b.s$(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class HoverAction extends d.JT{constructor(e,o,s){super(),this.actionContainer=_.R3(e,w("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=_.R3(this.actionContainer,w("a.action")),this.action.setAttribute("role","button"),o.iconClass&&_.R3(this.action,w(`span.icon.${o.iconClass}`));const l=_.R3(this.action,w("span"));l.textContent=s?`${o.label} (${s})`:o.label,this._register(_.nm(this.actionContainer,_.tw.CLICK,(e=>{e.stopPropagation(),e.preventDefault(),o.run(this.actionContainer)}))),this._register(_.nm(this.actionContainer,_.tw.KEY_UP,(e=>{const s=new C.y(e);s.equals(3)&&(e.stopPropagation(),e.preventDefault(),o.run(this.actionContainer))}))),this.setEnabled(!0)}static render(e,o,s){return new HoverAction(e,o,s)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}var S=s(9488),y=s(187),L=s(2822),x=s(3155),k=s(5393),N=s(7301),D=s(4669),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))},__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=e[Symbol.asyncIterator];return s?s.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o);function verb(s){o[s]=e[s]&&function(o){return new Promise((function(l,d){o=e[s](o),settle(l,d,o.done,o.value)}))}}function settle(e,o,s,l){Promise.resolve(l).then((function(o){e({value:o,done:s})}),o)}};class HoverResult{constructor(e,o,s){this.value=e,this.isComplete=o,this.hasLoadingMessage=s}}class HoverOperation extends d.JT{constructor(e,o){super(),this._editor=e,this._computer=o,this._onResult=this._register(new D.Q5),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new k.pY((()=>this._triggerAsyncComputation()),0)),this._secondWaitScheduler=this._register(new k.pY((()=>this._triggerSyncComputation()),0)),this._loadingMessageScheduler=this._register(new k.pY((()=>this._triggerLoadingMessage()),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(53).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,o=!0){this._state=e,o&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,k.zS)((e=>this._computer.computeAsync(e))),(()=>{__awaiter(this,void 0,void 0,(function*(){var e,o;try{try{for(var s,l=__asyncValues(this._asyncIterable);s=yield l.next(),!s.done;){const e=s.value;e&&(this._result.push(e),this._fireResult())}}catch(d){e={error:d}}finally{try{s&&!s.done&&(o=l.return)&&(yield o.call(l))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,3!==this._state&&4!==this._state||this._setState(0)}catch(u){(0,N.dL)(u)}}))})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){3===this._state&&this._setState(4)}_fireResult(){if(1===this._state||2===this._state)return;const e=0===this._state,o=4===this._state;this._onResult.fire(new HoverResult(this._result.slice(0),e,o))}start(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}var E=s(6520),T=s(8819),I=s(2065),A=s(1847),M=s(5621),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const R=_.$;let P=class ContentHoverController extends d.JT{constructor(e,o,s){super(),this._editor=e,this._instantiationService=o,this._keybindingService=s,this._widget=this._register(this._instantiationService.createInstance(O,this._editor)),this._decorationsChangerListener=this._register(new EditorDecorationsChangerListener(this._editor)),this._messages=[],this._messagesAreComplete=!1,this._participants=[];for(const l of E.Ae.getAll())this._participants.push(this._instantiationService.createInstance(l,this._editor));this._participants.sort(((e,o)=>e.hoverOrdinal-o.hoverOrdinal)),this._computer=new ContentHoverComputer(this._editor,this._participants),this._hoverOperation=this._register(new HoverOperation(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{this._withResult(e.value,e.isComplete,e.hasLoadingMessage)}))),this._register(this._decorationsChangerListener.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged()))),this._register(_.mu(this._widget.getDomNode(),"keydown",(e=>{e.equals(9)&&this.hide()}))),this._register(x.RW.onDidChange((()=>{this._widget.position&&this._computer.anchor&&this._messages.length>0&&(this._widget.clear(),this._renderMessages(this._computer.anchor,this._messages))})))}_onModelDecorationsChanged(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}maybeShowAt(e){const o=[];for(const l of this._participants)if(l.suggestHoverAnchor){const s=l.suggestHoverAnchor(e);s&&o.push(s)}const s=e.target;if(6===s.type&&o.push(new E.Qj(0,s.range)),7===s.type){const e=this._editor.getOption(44).typicalHalfwidthCharacterWidth/2;!s.detail.isAfterLines&&"number"===typeof s.detail.horizontalDistanceToText&&s.detail.horizontalDistanceToText<e&&o.push(new E.Qj(0,s.range))}return 0!==o.length&&(o.sort(((e,o)=>o.priority-e.priority)),this._startShowingAt(o[0],0,!1),!0)}startShowingAtRange(e,o,s){this._startShowingAt(new E.Qj(0,e),o,s)}_startShowingAt(e,o,s){if(!this._computer.anchor||!this._computer.anchor.equals(e)){if(this._hoverOperation.cancel(),this._widget.position)if(this._computer.anchor&&e.canAdoptVisibleHover(this._computer.anchor,this._widget.position)){const o=this._messages.filter((o=>o.isValidForHoverAnchor(e)));if(0===o.length)this.hide();else{if(o.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,o)}}else this.hide();this._computer.anchor=e,this._computer.shouldFocus=s,this._hoverOperation.start(o)}}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}isColorPickerVisible(){return this._widget.isColorPickerVisible}_addLoadingMessage(e){if(this._computer.anchor)for(const o of this._participants)if(o.createLoadingMessage){const s=o.createLoadingMessage(this._computer.anchor);if(s)return e.slice(0).concat([s])}return e}_withResult(e,o,s){this._messages=s?this._addLoadingMessage(e):e,this._messagesAreComplete=o,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):o&&this.hide()}_renderMessages(e,o){let s=1073741824,l=o[0].range,u=null;for(const d of o)s=Math.min(s,d.range.startColumn),l=g.e.plusRange(l,d.range),d.forceShowAtRange&&(u=d.range);const p=new d.SL,m=p.add(new F(this._keybindingService)),f=document.createDocumentFragment();let _=null;const C={fragment:f,statusBar:m,setColorPicker:e=>_=e,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const d of this._participants){const e=o.filter((e=>e.owner===d));e.length>0&&p.add(d.renderHoverParts(C,e))}if(m.hasContent&&f.appendChild(m.hoverElement),f.hasChildNodes()){if(l){const e=this._decorationsChangerListener.deltaDecorations([],[{range:l,options:ContentHoverController._DECORATION_OPTIONS}]);p.add((0,d.OF)((()=>{this._decorationsChangerListener.deltaDecorations(e,[])})))}this._widget.showAt(f,new ContentHoverVisibleData(_,u?u.getStartPosition():new y.L(e.range.startLineNumber,s),u||l,this._editor.getOption(53).above,this._computer.shouldFocus,p))}else p.dispose()}};P._DECORATION_OPTIONS=L.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),P=__decorate([__param(1,I.TG),__param(2,A.d)],P);class EditorDecorationsChangerListener extends d.JT{constructor(e){super(),this._editor=e,this._onDidChangeModelDecorations=this._register(new D.Q5),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._isChangingDecorations=!1,this._register(this._editor.onDidChangeModelDecorations((e=>{this._isChangingDecorations||this._onDidChangeModelDecorations.fire(e)})))}deltaDecorations(e,o){try{return this._isChangingDecorations=!0,this._editor.deltaDecorations(e,o)}finally{this._isChangingDecorations=!1}}}class ContentHoverVisibleData{constructor(e,o,s,l,d,u){this.colorPicker=e,this.showAtPosition=o,this.showAtRange=s,this.preferAbove=l,this.stoleFocus=d,this.disposables=u}}let O=class ContentHoverWidget extends d.JT{constructor(e,o){super(),this._editor=e,this._contextKeyService=o,this.allowEditorOverflow=!0,this._hoverVisibleKey=p.u.hoverVisible.bindTo(this._contextKeyService),this._hover=this._register(new HoverWidget),this._visibleData=null,this._register(this._editor.onDidLayoutChange((()=>this._layout()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(44)&&this._updateFont()}))),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this)}get position(){var e,o;return null!==(o=null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition)&&void 0!==o?o:null}get isColorPickerVisible(){var e;return Boolean(null===(e=this._visibleData)||void 0===e?void 0:e.colorPicker)}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return ContentHoverWidget.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(M._y.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:o,lineHeight:s}=this._editor.getOption(44);this._hover.contentsDomNode.style.fontSize=`${o}px`,this._hover.contentsDomNode.style.lineHeight=""+s/o,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(.66*this._editor.getLayoutInfo().width,500)}px`}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach((e=>this._editor.applyFontInfo(e)))}showAt(e,o){this._setVisibleData(o),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this._editor.layoutContentWidget(this),this.onContentsChanged(),this._editor.render(),this._editor.layoutContentWidget(this),this.onContentsChanged(),o.stoleFocus&&this._hover.containerDomNode.focus(),o.colorPicker&&o.colorPicker.layout()}hide(){if(this._visibleData){const e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._hover.onContentsChanged();const e=this._hover.scrollbar.getScrollDimensions(),o=e.scrollWidth>e.width;if(o){const e=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==e&&(this._hover.contentsDomNode.style.paddingBottom=e,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}};O.ID="editor.contrib.contentHoverWidget",O=__decorate([__param(1,T.i6)],O);let F=class EditorHoverStatusBar extends d.JT{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=R("div.hover-row.status-bar"),this.actionsElement=_.R3(this.hoverElement,R("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const o=this._keybindingService.lookupKeybinding(e.commandId),s=o?o.getLabel():null;return this._hasContent=!0,this._register(HoverAction.render(this.actionsElement,e,s))}append(e){const o=_.R3(this.actionsElement,e);return this._hasContent=!0,o}};F=__decorate([__param(0,A.d)],F);class ContentHoverComputer{constructor(e,o){this._editor=e,this._participants=o,this._anchor=null,this._shouldFocus=!1}get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}static _getLineDecorations(e,o){if(1!==o.type)return[];const s=e.getModel(),l=o.range.startLineNumber,d=s.getLineMaxColumn(l);return e.getLineDecorations(l).filter((e=>{if(e.options.isWholeLine)return!0;const s=e.range.startLineNumber===l?e.range.startColumn:1,u=e.range.endLineNumber===l?e.range.endColumn:d;if(e.options.showIfCollapsed){if(s>o.range.startColumn+1||o.range.endColumn-1>u)return!1}else if(s>o.range.startColumn||o.range.endColumn>u)return!1;return!0}))}computeAsync(e){const o=this._anchor;if(!this._editor.hasModel()||!o)return k.Aq.EMPTY;const s=ContentHoverComputer._getLineDecorations(this._editor,o);return k.Aq.merge(this._participants.map((l=>l.computeAsync?l.computeAsync(o,s,e):k.Aq.EMPTY)))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=ContentHoverComputer._getLineDecorations(this._editor,this._anchor);let o=[];for(const s of this._participants)o=o.concat(s.computeSync(this._anchor,e));return(0,S.kX)(o)}}var B=s(9365),W=s(5831),V=s(988);const H=_.$;class MarginHoverWidget extends d.JT{constructor(e,o,s=V.SW){super(),this._renderDisposeables=this._register(new d.SL),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new HoverWidget),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new W.$({editor:this._editor},o,s)),this._computer=new MarginHoverComputer(this._editor),this._hoverOperation=this._register(new HoverOperation(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{this._withResult(e.value)}))),this._register(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(44)&&this._updateFont()}))),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return MarginHoverWidget.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach((e=>this._editor.applyFontInfo(e)))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,o){this._renderDisposeables.clear();const s=document.createDocumentFragment();for(const l of o){const e=H("div.hover-row.markdown-hover"),o=_.R3(e,H("div.hover-contents")),d=this._renderDisposeables.add(this._markdownRenderer.render(l.value));o.appendChild(d.element),s.appendChild(e)}this._updateContents(s),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const o=this._editor.getLayoutInfo(),s=this._editor.getTopForLineNumber(e),l=this._editor.getScrollTop(),d=this._editor.getOption(59),u=this._hover.containerDomNode.clientHeight,g=s-l-(u-d)/2;this._hover.containerDomNode.style.left=`${o.glyphMarginLeft+o.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(g),0)}px`}}MarginHoverWidget.ID="editor.contrib.modesGlyphHoverWidget";class MarginHoverComputer{constructor(e){this._editor=e,this._lineNumber=-1}get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}computeSync(){const toHoverMessage=e=>({value:e}),e=this._editor.getLineDecorations(this._lineNumber),o=[];if(!e)return o;for(const s of e){if(!s.options.glyphMarginClassName)continue;const e=s.options.glyphMarginHoverMessage;e&&!(0,B.CP)(e)&&o.push(...(0,S._2)(e).map(toHoverMessage))}return o}}var z=s(3580),U=s(3910),K=s(7781),j=s(2374),G=s(5935),q=s(6357),Q=s(5396),Z=s(3412),Y=s(6014),J=s(9803),X=s(8674),ee=s(535),te=s(1922),markerHoverParticipant_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},markerHoverParticipant_param=function(e,o){return function(s,l){o(s,l,e)}};const ie=_.$;class MarkerHover{constructor(e,o,s){this.owner=e,this.range=o,this.marker=s}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const ne={type:1,filter:{include:Y.yN.QuickFix}};let oe=class MarkerHoverParticipant{constructor(e,o,s,l){this._editor=e,this._markerDecorationsService=o,this._openerService=s,this._languageFeaturesService=l,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,o){if(!this._editor.hasModel()||1!==e.type)return[];const s=this._editor.getModel(),l=e.range.startLineNumber,d=s.getLineMaxColumn(l),u=[];for(const p of o){const o=p.range.startLineNumber===l?p.range.startColumn:1,m=p.range.endLineNumber===l?p.range.endColumn:d,f=this._markerDecorationsService.getMarker(s.uri,p);if(!f)continue;const _=new g.e(e.range.startLineNumber,o,e.range.startLineNumber,m);u.push(new MarkerHover(this,_,f))}return u}renderHoverParts(e,o){if(!o.length)return d.JT.None;const s=new d.SL;o.forEach((o=>e.fragment.appendChild(this.renderMarkerHover(o,s))));const l=1===o.length?o[0]:o.sort(((e,o)=>X.ZL.compare(e.marker.severity,o.marker.severity)))[0];return this.renderMarkerStatusbar(e,l,s),s}renderMarkerHover(e,o){const s=ie("div.hover-row"),l=_.R3(s,ie("div.marker.hover-contents")),{source:d,message:u,code:g,relatedInformation:p}=e.marker;this._editor.applyFontInfo(l);const m=_.R3(l,ie("span"));if(m.style.whiteSpace="pre-wrap",m.innerText=u,d||g)if(g&&"string"!==typeof g){const e=ie("span");if(d){const o=_.R3(e,ie("span"));o.innerText=d}const s=_.R3(e,ie("a.code-link"));s.setAttribute("href",g.target.toString()),o.add(_.nm(s,"click",(e=>{this._openerService.open(g.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()})));const u=_.R3(s,ie("span"));u.innerText=g.value;const p=_.R3(l,e);p.style.opacity="0.6",p.style.paddingLeft="6px"}else{const e=_.R3(l,ie("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=d&&g?`${d}(${g})`:d||`(${g})`}if((0,S.Of)(p))for(const{message:f,resource:C,startLineNumber:b,startColumn:w}of p){const e=_.R3(l,ie("div"));e.style.marginTop="8px";const s=_.R3(e,ie("a"));s.innerText=`${(0,G.EZ)(C)}(${b}, ${w}): `,s.style.cursor="pointer",o.add(_.nm(s,"click",(e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(C,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:b,startColumn:w}}}).catch(N.dL)})));const d=_.R3(e,ie("span"));d.innerText=f,this._editor.applyFontInfo(d)}return s}renderMarkerStatusbar(e,o,s){if(o.marker.severity!==X.ZL.Error&&o.marker.severity!==X.ZL.Warning&&o.marker.severity!==X.ZL.Info||e.statusBar.addAction({label:z.N("view problem","View Problem"),commandId:J.NextMarkerAction.ID,run:()=>{var s;e.hide(),null===(s=J.MarkerController.get(this._editor))||void 0===s||s.showAtMarker(o.marker),this._editor.focus()}}),!this._editor.getOption(81)){const l=e.statusBar.append(ie("div"));this.recentMarkerCodeActionsInfo&&(X.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===X.H0.makeKey(o.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(l.textContent=z.N("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const u=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?d.JT.None:s.add((0,k.Vg)((()=>l.textContent=z.N("checkingForQuickFixes","Checking for quick fixes...")),200));l.textContent||(l.textContent=String.fromCharCode(160));const g=this.getCodeActions(o.marker);s.add((0,d.OF)((()=>g.cancel()))),g.then((g=>{if(u.dispose(),this.recentMarkerCodeActionsInfo={marker:o.marker,hasCodeActions:g.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return g.dispose(),void(l.textContent=z.N("noQuickFixes","No quick fixes available"));l.style.display="none";let p=!1;s.add((0,d.OF)((()=>{p||g.dispose()}))),e.statusBar.addAction({label:z.N("quick fixes","Quick Fix..."),commandId:Z.E7.Id,run:o=>{p=!0;const s=Z.pY.get(this._editor),l=_.i(o);e.hide(),null===s||void 0===s||s.showCodeActions(ne,g,{x:l.left+6,y:l.top+l.height+6})}})}),N.dL)}}getCodeActions(e){return(0,k.PG)((o=>(0,Q.aI)(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new g.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),ne,ee.Ex.None,o)))}};oe=markerHoverParticipant_decorate([markerHoverParticipant_param(1,q.i),markerHoverParticipant_param(2,V.v4),markerHoverParticipant_param(3,te.p)],oe),(0,K.Ic)(((e,o)=>{const s=e.getColor(U.url);s&&o.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${s}; }`);const l=e.getColor(U.sgC);l&&o.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${l}; }`)}));var hover_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},hover_param=function(e,o){return function(s,l){o(s,l,e)}};let se=class ModesHoverController{constructor(e,o,s,l,u){this._editor=e,this._instantiationService=o,this._openerService=s,this._languageService=l,this._toUnhook=new d.SL,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((e=>{e.hasChanged(53)&&(this._unhookEvents(),this._hookEvents())}))}static get(e){return e.getContribution(ModesHoverController.ID)}_hookEvents(){const hideWidgetsEventHandler=()=>this._hideWidgets(),e=this._editor.getOption(53);this._isHoverEnabled=e.enabled,this._isHoverSticky=e.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._toUnhook.add(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))):(this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))),this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler)),this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler)),this._toUnhook.add(this._editor.onDidScrollChange((e=>this._onEditorScrollChanged(e))))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const o=e.target;9!==o.type||o.detail!==O.ID?12===o.type&&o.detail===MarginHoverWidget.ID||(12!==o.type&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var o,s,l,d,u;const g=e.target;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===g.type&&g.detail===O.ID)return;if(this._isHoverSticky&&!(null===(s=null===(o=e.event.browserEvent.view)||void 0===o?void 0:o.getSelection())||void 0===s?void 0:s.isCollapsed))return;if(!this._isHoverSticky&&9===g.type&&g.detail===O.ID&&(null===(l=this._contentWidget)||void 0===l?void 0:l.isColorPickerVisible()))return;if(this._isHoverSticky&&12===g.type&&g.detail===MarginHoverWidget.ID)return;if(!this._isHoverEnabled)return void this._hideWidgets();const p=this._getOrCreateContentWidget();if(!p.maybeShowAt(e))return 2===g.type&&g.position?(null===(u=this._contentWidget)||void 0===u||u.hide(),this._glyphWidget||(this._glyphWidget=new MarginHoverWidget(this._editor,this._languageService,this._openerService)),void this._glyphWidget.startShowingAt(g.position.lineNumber)):void this._hideWidgets();null===(d=this._glyphWidget)||void 0===d||d.hide()}_onKeyDown(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}_hideWidgets(){var e,o,s;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(o=this._glyphWidget)||void 0===o||o.hide(),null===(s=this._contentWidget)||void 0===s||s.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(P,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,o,s){this._getOrCreateContentWidget().startShowingAtRange(e,o,s)}dispose(){var e,o;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(o=this._contentWidget)||void 0===o||o.dispose()}};se.ID="editor.contrib.hover",se=hover_decorate([hover_param(1,I.TG),hover_param(2,V.v4),hover_param(3,m.O),hover_param(4,T.i6)],se);class ShowHoverAction extends u.R6{constructor(){super({id:"editor.action.showHover",label:z.N({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:p.u.editorTextFocus,primary:(0,l.gx)(2089,2087),weight:100}})}run(e,o){if(!o.hasModel())return;let s=se.get(o);if(!s)return;const l=o.getPosition(),d=new g.e(l.lineNumber,l.column,l.lineNumber,l.column),u=2===o.getOption(2);s.showContentHover(d,1,u)}}class ShowDefinitionPreviewHoverAction extends u.R6{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:z.N({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,o){const s=se.get(o);if(!s)return;const l=o.getPosition();if(!l)return;const d=new g.e(l.lineNumber,l.column,l.lineNumber,l.column),u=f.GotoDefinitionAtPositionEditorContribution.get(o);if(!u)return;const p=u.startFindDefinitionFromCursor(l);p.then((()=>{s.showContentHover(d,1,!0)}))}}(0,u._K)(se.ID,se),(0,u.Qr)(ShowHoverAction),(0,u.Qr)(ShowDefinitionPreviewHoverAction),E.Ae.register(j.D5),E.Ae.register(oe),(0,K.Ic)(((e,o)=>{const s=e.getColor(U.ptc);s&&o.addRule(`.monaco-editor .hoverHighlight { background-color: ${s}; }`);const l=e.getColor(U.yJx);l&&o.addRule(`.monaco-editor .monaco-hover { background-color: ${l}; }`);const d=e.getColor(U.CNo);d&&(o.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${d}; }`),o.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${d.transparent(.5)}; }`),o.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${d.transparent(.5)}; }`),o.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${d.transparent(.5)}; }`));const u=e.getColor(U.url);u&&o.addRule(`.monaco-editor .monaco-hover a { color: ${u}; }`);const g=e.getColor(U.sgC);g&&o.addRule(`.monaco-editor .monaco-hover a:hover { color: ${g}; }`);const p=e.getColor(U.Sbf);p&&o.addRule(`.monaco-editor .monaco-hover { color: ${p}; }`);const m=e.getColor(U.LoV);m&&o.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${m}; }`);const f=e.getColor(U.SwI);f&&o.addRule(`.monaco-editor .monaco-hover code { background-color: ${f}; }`)}))},6520:function(e,o,s){"use strict";s.d(o,{Ae:function(){return l},Qj:function(){return HoverRangeAnchor},YM:function(){return HoverForeignElementAnchor}});class HoverRangeAnchor{constructor(e,o){this.priority=e,this.range=o,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,o){return 1===e.type&&o.lineNumber===this.range.startLineNumber}}class HoverForeignElementAnchor{constructor(e,o,s){this.priority=e,this.owner=o,this.range=s,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,o){return 2===e.type&&this.owner===e.owner}}const l=new class HoverParticipantRegistry{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}}},2374:function(e,o,s){"use strict";s.d(o,{D5:function(){return k},c:function(){return renderMarkdownHovers},hU:function(){return MarkdownHover}});var l=s(5321),d=s(9488),u=s(5393),g=s(9365),p=s(5976),m=s(5831),f=s(187),_=s(4314),C=s(2042),b=s(1095),w=s(3580),S=s(3108),y=s(988),L=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const x=l.$;class MarkdownHover{constructor(e,o,s,l){this.owner=e,this.range=o,this.contents=s,this.ordinal=l}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let k=class MarkdownHoverParticipant{constructor(e,o,s,l,d){this._editor=e,this._languageService=o,this._openerService=s,this._configurationService=l,this._languageFeaturesService=d,this.hoverOrdinal=2}createLoadingMessage(e){return new MarkdownHover(this,e.range,[(new g.W5).appendText(w.N("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,o){if(!this._editor.hasModel()||1!==e.type)return[];const s=this._editor.getModel(),l=e.range.startLineNumber,u=s.getLineMaxColumn(l),p=[];let m=1e3;const f=s.getLineLength(l),C=s.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),b=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:C});"number"===typeof b&&f>=b&&p.push(new MarkdownHover(this,e.range,[{value:w.N("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],m++));for(const w of o){const o=w.range.startLineNumber===l?w.range.startColumn:1,s=w.range.endLineNumber===l?w.range.endColumn:u,f=w.options.hoverMessage;if(!f||(0,g.CP)(f))continue;const C=new _.e(e.range.startLineNumber,o,e.range.startLineNumber,s);p.push(new MarkdownHover(this,C,(0,d._2)(f),m++))}return p}computeAsync(e,o,s){if(!this._editor.hasModel()||1!==e.type)return u.Aq.EMPTY;const l=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(l))return u.Aq.EMPTY;const d=new f.L(e.range.startLineNumber,e.range.startColumn);return(0,b.R8)(this._languageFeaturesService.hoverProvider,l,d,s).filter((e=>!(0,g.CP)(e.hover.contents))).map((o=>{const s=o.hover.range?_.e.lift(o.hover.range):e.range;return new MarkdownHover(this,s,o.hover.contents,o.ordinal)}))}renderHoverParts(e,o){return renderMarkdownHovers(e,o,this._editor,this._languageService,this._openerService)}};function renderMarkdownHovers(e,o,s,d,u){o.sort(((e,o)=>e.ordinal-o.ordinal));const f=new p.SL;for(const p of o)for(const o of p.contents){if((0,g.CP)(o))continue;const p=x("div.hover-row.markdown-hover"),_=l.R3(p,x("div.hover-contents")),C=f.add(new m.$({editor:s},d,u));f.add(C.onDidRenderAsync((()=>{_.className="hover-contents code-hover-contents",e.onContentsChanged()})));const b=f.add(C.render(o));_.appendChild(b.element),e.fragment.appendChild(p)}return f}k=__decorate([__param(1,C.O),__param(2,y.v4),__param(3,S.Ui),__param(4,L.p)],k)},8077:function(e,o,s){"use strict";s.r(o);var l=s(5393),d=s(7301),u=s(4410),g=s(6830),p=s(4314),m=s(3860),f=s(9102),_=s(2822),C=s(4319),b=s(8625),w=s(3580),S=s(7781);class InPlaceReplaceCommand{constructor(e,o,s){this._editRange=e,this._originalSelection=o,this._text=s}getEditOperations(e,o){o.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,o){const s=o.getInverseEditOperations(),l=s[0].range;return this._originalSelection.isEmpty()?new m.Y(l.endLineNumber,Math.min(this._originalSelection.positionColumn,l.endColumn),l.endLineNumber,Math.min(this._originalSelection.positionColumn,l.endColumn)):new m.Y(l.endLineNumber,l.endColumn-this._text.length,l.endLineNumber,l.endColumn)}}var __decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let y=class InPlaceReplaceController{constructor(e,o){this.decorationIds=[],this.editor=e,this.editorWorkerService=o}static get(e){return e.getContribution(InPlaceReplaceController.ID)}dispose(){}run(e,o){this.currentRequest&&this.currentRequest.cancel();const s=this.editor.getSelection(),g=this.editor.getModel();if(!g||!s)return;let f=s;if(f.startLineNumber!==f.endLineNumber)return;const _=new u.yy(this.editor,5),C=g.uri;return this.editorWorkerService.canNavigateValueSet(C)?(this.currentRequest=(0,l.PG)((e=>this.editorWorkerService.navigateValueSet(C,f,o))),this.currentRequest.then((o=>{if(!o||!o.range||!o.value)return;if(!_.validate(this.editor))return;let s=p.e.lift(o.range),u=o.range,g=o.value.length-(f.endColumn-f.startColumn);u={startLineNumber:u.startLineNumber,startColumn:u.startColumn,endLineNumber:u.endLineNumber,endColumn:u.startColumn+o.value.length},g>1&&(f=new m.Y(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn+g-1));const C=new InPlaceReplaceCommand(s,f,o.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,C),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:u,options:InPlaceReplaceController.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=(0,l.Vs)(350),this.decorationRemover.then((()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[]))).catch(d.dL)})).catch(d.dL)):Promise.resolve(void 0)}};y.ID="editor.contrib.inPlaceReplaceController",y.DECORATION=_.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),y=__decorate([__param(1,C.p)],y);class InPlaceReplaceUp extends g.R6{constructor(){super({id:"editor.action.inPlaceReplace.up",label:w.N("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:f.u.writable,kbOpts:{kbExpr:f.u.editorTextFocus,primary:3154,weight:100}})}run(e,o){const s=y.get(o);return s?s.run(this.id,!0):Promise.resolve(void 0)}}class InPlaceReplaceDown extends g.R6{constructor(){super({id:"editor.action.inPlaceReplace.down",label:w.N("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:f.u.writable,kbOpts:{kbExpr:f.u.editorTextFocus,primary:3156,weight:100}})}run(e,o){const s=y.get(o);return s?s.run(this.id,!1):Promise.resolve(void 0)}}(0,g._K)(y.ID,y),(0,g.Qr)(InPlaceReplaceUp),(0,g.Qr)(InPlaceReplaceDown),(0,S.Ic)(((e,o)=>{const s=e.getColor(b.Dl);s&&o.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${s}; }`)}))},8279:function(e,o,s){"use strict";function getSpaceCnt(e,o){let s=0;for(let l=0;l<e.length;l++)"\t"===e.charAt(l)?s+=o:s++;return s}function generateIndent(e,o,s){e=e<0?0:e;let l="";if(!s){let s=Math.floor(e/o);e%=o;for(let e=0;e<s;e++)l+="\t"}for(let d=0;d<e;d++)l+=" ";return l}s.d(o,{J:function(){return generateIndent},Y:function(){return getSpaceCnt}})},4602:function(e,o,s){"use strict";s.r(o),s.d(o,{AutoIndentOnPaste:function(){return AutoIndentOnPaste},AutoIndentOnPasteCommand:function(){return AutoIndentOnPasteCommand},ChangeIndentationSizeAction:function(){return ChangeIndentationSizeAction},DetectIndentation:function(){return DetectIndentation},IndentUsingSpaces:function(){return IndentUsingSpaces},IndentUsingTabs:function(){return IndentUsingTabs},IndentationToSpacesAction:function(){return IndentationToSpacesAction},IndentationToSpacesCommand:function(){return IndentationToSpacesCommand},IndentationToTabsAction:function(){return IndentationToTabsAction},IndentationToTabsCommand:function(){return IndentationToTabsCommand},ReindentLinesAction:function(){return ReindentLinesAction},ReindentSelectedLinesAction:function(){return ReindentSelectedLinesAction},getReindentEditOperations:function(){return getReindentEditOperations}});var l=s(5976),d=s(2677),u=s(6830),g=s(291),p=s(9386),m=s(4314),f=s(3860),_=s(9102),C=s(5638),b=s(3733),w=s(8279),S=s(3580),y=s(1157),L=s(3158);function getReindentEditOperations(e,o,s,l,u){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];const m=o.getLanguageConfiguration(e.getLanguageId()).indentationRules;if(!m)return[];l=Math.min(l,e.getLineCount());while(s<=l){if(!m.unIndentedLinePattern)break;let o=e.getLineContent(s);if(!m.unIndentedLinePattern.test(o))break;s++}if(s>l-1)return[];const{tabSize:_,indentSize:C,insertSpaces:b}=e.getOptions(),shiftIndent=(e,o)=>(o=o||1,g.U.shiftIndent(e,e.length+o,_,C,b)),unshiftIndent=(e,o)=>(o=o||1,g.U.unshiftIndent(e,e.length+o,_,C,b));let w,S=[],y=e.getLineContent(s),x=y;if(void 0!==u&&null!==u){w=u;let e=d.V8(y);x=w+y.substring(e.length),m.decreaseIndentPattern&&m.decreaseIndentPattern.test(x)&&(w=unshiftIndent(w),x=w+y.substring(e.length)),y!==x&&S.push(p.h.replaceMove(new f.Y(s,1,s,e.length+1),(0,L.x)(w,C,b)))}else w=d.V8(y);let k=w;m.increaseIndentPattern&&m.increaseIndentPattern.test(x)?(k=shiftIndent(k),w=shiftIndent(w)):m.indentNextLinePattern&&m.indentNextLinePattern.test(x)&&(k=shiftIndent(k)),s++;for(let g=s;g<=l;g++){let o=e.getLineContent(g),s=d.V8(o),l=k+o.substring(s.length);m.decreaseIndentPattern&&m.decreaseIndentPattern.test(l)&&(k=unshiftIndent(k),w=unshiftIndent(w)),s!==k&&S.push(p.h.replaceMove(new f.Y(g,1,g,s.length+1),(0,L.x)(k,C,b))),m.unIndentedLinePattern&&m.unIndentedLinePattern.test(o)||(m.increaseIndentPattern&&m.increaseIndentPattern.test(l)?(w=shiftIndent(w),k=w):k=m.indentNextLinePattern&&m.indentNextLinePattern.test(l)?shiftIndent(k):w)}return S}class IndentationToSpacesAction extends u.R6{constructor(){super({id:IndentationToSpacesAction.ID,label:S.N("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:_.u.writable})}run(e,o){let s=o.getModel();if(!s)return;let l=s.getOptions(),d=o.getSelection();if(!d)return;const u=new IndentationToSpacesCommand(d,l.tabSize);o.pushUndoStop(),o.executeCommands(this.id,[u]),o.pushUndoStop(),s.updateOptions({insertSpaces:!0})}}IndentationToSpacesAction.ID="editor.action.indentationToSpaces";class IndentationToTabsAction extends u.R6{constructor(){super({id:IndentationToTabsAction.ID,label:S.N("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:_.u.writable})}run(e,o){let s=o.getModel();if(!s)return;let l=s.getOptions(),d=o.getSelection();if(!d)return;const u=new IndentationToTabsCommand(d,l.tabSize);o.pushUndoStop(),o.executeCommands(this.id,[u]),o.pushUndoStop(),s.updateOptions({insertSpaces:!1})}}IndentationToTabsAction.ID="editor.action.indentationToTabs";class ChangeIndentationSizeAction extends u.R6{constructor(e,o){super(o),this.insertSpaces=e}run(e,o){const s=e.get(y.eJ),l=e.get(b.q);let d=o.getModel();if(!d)return;const u=l.getCreationOptions(d.getLanguageId(),d.uri,d.isForSimpleWidget),g=[1,2,3,4,5,6,7,8].map((e=>({id:e.toString(),label:e.toString(),description:e===u.tabSize?S.N("configuredTabSize","Configured Tab Size"):void 0}))),p=Math.min(d.getOptions().tabSize-1,7);setTimeout((()=>{s.pick(g,{placeHolder:S.N({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:g[p]}).then((e=>{e&&d&&!d.isDisposed()&&d.updateOptions({tabSize:parseInt(e.label,10),insertSpaces:this.insertSpaces})}))}),50)}}class IndentUsingTabs extends ChangeIndentationSizeAction{constructor(){super(!1,{id:IndentUsingTabs.ID,label:S.N("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}IndentUsingTabs.ID="editor.action.indentUsingTabs";class IndentUsingSpaces extends ChangeIndentationSizeAction{constructor(){super(!0,{id:IndentUsingSpaces.ID,label:S.N("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}IndentUsingSpaces.ID="editor.action.indentUsingSpaces";class DetectIndentation extends u.R6{constructor(){super({id:DetectIndentation.ID,label:S.N("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,o){const s=e.get(b.q);let l=o.getModel();if(!l)return;const d=s.getCreationOptions(l.getLanguageId(),l.uri,l.isForSimpleWidget);l.detectIndentation(d.insertSpaces,d.tabSize)}}DetectIndentation.ID="editor.action.detectIndentation";class ReindentLinesAction extends u.R6{constructor(){super({id:"editor.action.reindentlines",label:S.N("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:_.u.writable})}run(e,o){const s=e.get(C.c_);let l=o.getModel();if(!l)return;let d=getReindentEditOperations(l,s,1,l.getLineCount());d.length>0&&(o.pushUndoStop(),o.executeEdits(this.id,d),o.pushUndoStop())}}class ReindentSelectedLinesAction extends u.R6{constructor(){super({id:"editor.action.reindentselectedlines",label:S.N("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:_.u.writable})}run(e,o){const s=e.get(C.c_);let l=o.getModel();if(!l)return;let d=o.getSelections();if(null===d)return;let u=[];for(let g of d){let e=g.startLineNumber,o=g.endLineNumber;if(e!==o&&1===g.endColumn&&o--,1===e){if(e===o)continue}else e--;let d=getReindentEditOperations(l,s,e,o);u.push(...d)}u.length>0&&(o.pushUndoStop(),o.executeEdits(this.id,u),o.pushUndoStop())}}class AutoIndentOnPasteCommand{constructor(e,o){this._initialSelection=o,this._edits=[],this._selectionId=null;for(let s of e)s.range&&"string"===typeof s.text&&this._edits.push(s)}getEditOperations(e,o){for(let l of this._edits)o.addEditOperation(m.e.lift(l.range),l.text);let s=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(s=!0,this._selectionId=o.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(s=!0,this._selectionId=o.trackSelection(this._initialSelection,!1))),s||(this._selectionId=o.trackSelection(this._initialSelection))}computeCursorState(e,o){return o.getTrackedSelection(this._selectionId)}}class AutoIndentOnPaste{constructor(e){this.callOnDispose=new l.SL,this.callOnModel=new l.SL,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModelLanguage((()=>this.update())))}update(){this.callOnModel.clear(),this.editor.getOption(9)<4||this.editor.getOption(48)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((({range:e})=>{this.trigger(e)})))}trigger(e){let o=this.editor.getSelections();if(null===o||o.length>1)return;const s=this.editor.getModel();if(!s)return;if(!s.isCheapToTokenize(e.getStartPosition().lineNumber))return;const l=this.editor.getOption(9),{tabSize:u,indentSize:p,insertSpaces:f}=s.getOptions();let _=[],b={shiftIndent:e=>g.U.shiftIndent(e,e.length+1,u,p,f),unshiftIndent:e=>g.U.unshiftIndent(e,e.length+1,u,p,f)},S=e.startLineNumber;while(S<=e.endLineNumber){if(!this.shouldIgnoreLine(s,S))break;S++}if(S>e.endLineNumber)return;let y=s.getLineContent(S);if(!/\S/.test(y.substring(0,e.startColumn-1))){const e=C.zu.getGoodIndentForLine(l,s,s.getLanguageId(),S,b);if(null!==e){let o=d.V8(y),l=w.Y(e,u),g=w.Y(o,u);if(l!==g){let e=w.J(l,u,f);_.push({range:new m.e(S,1,S,o.length+1),text:e}),y=e+y.substr(o.length)}else{let e=C.zu.getIndentMetadata(s,S);if(0===e||8===e)return}}}const L=S;while(S<e.endLineNumber){if(/\S/.test(s.getLineContent(S+1)))break;S++}if(S!==e.endLineNumber){let o={getLineTokens:e=>s.getLineTokens(e),getLanguageId:()=>s.getLanguageId(),getLanguageIdAtPosition:(e,o)=>s.getLanguageIdAtPosition(e,o),getLineContent:e=>e===L?y:s.getLineContent(e)},g=C.zu.getGoodIndentForLine(l,o,s.getLanguageId(),S+1,b);if(null!==g){let o=w.Y(g,u),l=w.Y(d.V8(s.getLineContent(S+1)),u);if(o!==l){let g=o-l;for(let o=S+1;o<=e.endLineNumber;o++){let e=s.getLineContent(o),l=d.V8(e),p=w.Y(l,u),C=p+g,b=w.J(C,u,f);b!==l&&_.push({range:new m.e(o,1,o,l.length+1),text:b})}}}}if(_.length>0){this.editor.pushUndoStop();let e=new AutoIndentOnPasteCommand(_,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,o){e.forceTokenization(o);let s=e.getLineFirstNonWhitespaceColumn(o);if(0===s)return!0;let l=e.getLineTokens(o);if(l.getCount()>0){let e=l.findTokenIndexAtOffset(s);if(e>=0&&1===l.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}function getIndentationEditOperations(e,o,s,l){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let d="";for(let g=0;g<s;g++)d+=" ";let u=new RegExp(d,"gi");for(let g=1,p=e.getLineCount();g<=p;g++){let s=e.getLineFirstNonWhitespaceColumn(g);if(0===s&&(s=e.getLineMaxColumn(g)),1===s)continue;const p=new m.e(g,1,g,s),f=e.getValueInRange(p),_=l?f.replace(/\t/gi,d):f.replace(u,"\t");o.addEditOperation(p,_)}}AutoIndentOnPaste.ID="editor.contrib.autoIndentOnPaste";class IndentationToSpacesCommand{constructor(e,o){this.selection=e,this.tabSize=o,this.selectionId=null}getEditOperations(e,o){this.selectionId=o.trackSelection(this.selection),getIndentationEditOperations(e,o,this.tabSize,!0)}computeCursorState(e,o){return o.getTrackedSelection(this.selectionId)}}class IndentationToTabsCommand{constructor(e,o){this.selection=e,this.tabSize=o,this.selectionId=null}getEditOperations(e,o){this.selectionId=o.trackSelection(this.selection),getIndentationEditOperations(e,o,this.tabSize,!1)}computeCursorState(e,o){return o.getTrackedSelection(this.selectionId)}}(0,u._K)(AutoIndentOnPaste.ID,AutoIndentOnPaste),(0,u.Qr)(IndentationToSpacesAction),(0,u.Qr)(IndentationToTabsAction),(0,u.Qr)(IndentUsingTabs),(0,u.Qr)(IndentUsingSpaces),(0,u.Qr)(DetectIndentation),(0,u.Qr)(ReindentLinesAction),(0,u.Qr)(ReindentSelectedLinesAction)},7563:function(e,o,s){"use strict";s.r(o);var l=s(6830),d=s(6520),u=s(5393),g=s(1050),p=s(7301),m=s(5976),f=s(3702),_=s(8401),C=s(666),b=s(9994),w=s(4141),S=s(4314),y=s(3155),L=s(4973),x=s(2822),k=s(8191),N=s(1922),D=s(8216),E=s(2005),T=s(187),I=s(6663),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class InlayHintAnchor{constructor(e,o){this.range=e,this.direction=o}}class InlayHintItem{constructor(e,o,s){this.hint=e,this.anchor=o,this.provider=s,this._isResolved=!1}with(e){const o=new InlayHintItem(this.hint,e.anchor,this.provider);return o._isResolved=this._isResolved,o._currentResolve=this._currentResolve,o}resolve(e){return __awaiter(this,void 0,void 0,(function*(){if("function"===typeof this.provider.resolveInlayHint){if(this._currentResolve){if(yield this._currentResolve,e.isCancellationRequested)return;return this.resolve(e)}this._isResolved||(this._currentResolve=this._doResolve(e).finally((()=>this._currentResolve=void 0))),yield this._currentResolve}}))}_doResolve(e){var o,s;return __awaiter(this,void 0,void 0,(function*(){try{const l=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=null!==(o=null===l||void 0===l?void 0:l.tooltip)&&void 0!==o?o:this.hint.tooltip,this.hint.label=null!==(s=null===l||void 0===l?void 0:l.label)&&void 0!==s?s:this.hint.label,this._isResolved=!0}catch(l){(0,p.Cp)(l),this._isResolved=!1}}))}}class InlayHintsFragments{constructor(e,o,s){this._disposables=new m.SL,this.ranges=e,this.provider=new Set;const l=[];for(const[d,u]of o){this._disposables.add(d),this.provider.add(u);for(const e of d.hints){let o=s.validatePosition(e.position),d="before";const g=InlayHintsFragments._getRangeAtPosition(s,o);let p;g.getStartPosition().isBefore(o)?(p=S.e.fromPositions(g.getStartPosition(),o),d="after"):(p=S.e.fromPositions(o,g.getEndPosition()),d="before"),l.push(new InlayHintItem(e,new InlayHintAnchor(p,d),u))}}this.items=l.sort(((e,o)=>T.L.compare(e.hint.position,o.hint.position)))}static create(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=[],u=e.ordered(o).reverse().map((e=>s.map((s=>__awaiter(this,void 0,void 0,(function*(){try{const u=yield e.provideInlayHints(o,s,l);(null===u||void 0===u?void 0:u.hints.length)&&d.push([u,e])}catch(u){(0,p.Cp)(u)}}))))));if(yield Promise.all(u.flat()),l.isCancellationRequested||o.isDisposed())throw new p.FU;return new InlayHintsFragments(s,d,o)}))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,o){const s=o.lineNumber,l=e.getWordAtPosition(o);if(l)return new S.e(s,l.startColumn,s,l.endColumn);e.tokenizeIfCheap(s);const d=e.getLineTokens(s),u=o.column-1,g=d.findTokenIndexAtOffset(u);let p=d.getStartOffset(g),m=d.getEndOffset(g);return m-p===1&&(p===u&&g>1?(p=d.getStartOffset(g-1),m=d.getEndOffset(g-1)):m===u&&g<d.getCount()-1&&(p=d.getStartOffset(g+1),m=d.getEndOffset(g+1))),new S.e(s,p+1,s,m+1)}}function asCommandLink(e){return C.o.from({scheme:I.lg.command,path:e.id,query:e.arguments&&encodeURIComponent(JSON.stringify(e.arguments))}).toString()}var A=s(5321),M=s(4741),R=s(5817),P=s(6943),O=s(4144),F=s(4565),B=s(8819),W=s(5606),V=s(2065),H=s(9422),inlayHintsLocations_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function showGoToContextMenu(e,o,s,d){var u;return inlayHintsLocations_awaiter(this,void 0,void 0,(function*(){const p=e.get(D.S),m=e.get(W.i),f=e.get(F.Hy),_=e.get(V.TG),C=e.get(H.lT);if(yield d.item.resolve(g.T.None),!d.part.location)return;const b=d.part.location,w=[],y=new Set(O.BH.getMenuItems(O.eH.EditorContext).map((e=>(0,O.vr)(e)?e.command.id:"")));for(const e of l.Uc.getEditorActions())e instanceof R.SymbolNavigationAction&&y.has(e.id)&&w.push(new M.aU(e.id,e.label,void 0,!0,(()=>inlayHintsLocations_awaiter(this,void 0,void 0,(function*(){const s=yield p.createModelReference(b.uri);try{yield _.invokeFunction(e.run.bind(e),o,new R.SymbolNavigationAnchor(s.object.textEditorModel,S.e.getStartPosition(b.range)))}finally{s.dispose()}})))));if(d.part.command){const{command:e}=d.part;w.push(new M.Z0),w.push(new M.aU(e.id,e.title,void 0,!0,(()=>inlayHintsLocations_awaiter(this,void 0,void 0,(function*(){var o;try{yield f.executeCommand(e.id,...null!==(o=e.arguments)&&void 0!==o?o:[])}catch(s){C.notify({severity:H.zb.Error,source:d.item.provider.displayName,message:s})}})))))}const L=o.getOption(115);m.showContextMenu({domForShadowRoot:L&&null!==(u=o.getDomNode())&&void 0!==u?u:void 0,getAnchor:()=>{const e=A.i(s);return{x:e.left,y:e.top+e.height+8}},getActions:()=>w,onHide:()=>{o.focus()},autoSelectFirstItem:!0})}))}function goToDefinitionWithLocation(e,o,s,l){return inlayHintsLocations_awaiter(this,void 0,void 0,(function*(){const d=e.get(D.S),u=yield d.createModelReference(l.uri);yield s.invokeWithinContext((e=>inlayHintsLocations_awaiter(this,void 0,void 0,(function*(){const d=o.hasSideBySideModifier,g=e.get(B.i6),p=P.Jy.inPeekEditor.getValue(g),m=!d&&s.getOption(78)&&!p,f=new R.DefinitionAction({openToSide:d,openInPeek:m,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0});return f.run(e,s,{model:u.object.textEditorModel,position:S.e.getStartPosition(l.range)})})))),u.dispose()}))}var z=s(5026),U=s(3910),K=s(7781),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},inlayHintsController_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class InlayHintsCache{constructor(){this._entries=new f.z6(50)}get(e){const o=InlayHintsCache._key(e);return this._entries.get(o)}set(e,o){const s=InlayHintsCache._key(e);this._entries.set(s,o)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const j=(0,V.yh)("IInlayHintsCache");(0,z.z)(j,InlayHintsCache,!0);class RenderedInlayHintLabelPart{constructor(e,o){this.item=e,this.index=o}get part(){const e=this.item.hint.label;return"string"===typeof e?{label:e}:e[this.index]}}class ActiveInlayHintInfo{constructor(e,o){this.part=e,this.hasTriggerModifier=o}}let G=class InlayHintsController{constructor(e,o,s,l,d,u,g){this._editor=e,this._languageFeaturesService=o,this._inlayHintsCache=l,this._commandService=d,this._notificationService=u,this._instaService=g,this._disposables=new m.SL,this._sessionDisposables=new m.SL,this._decorationsMetadata=new Map,this._ruleFactory=new b.t7(this._editor),this._debounceInfo=s.for(o.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(o.inlayHintsProvider.onDidChange((()=>this._update()))),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(127)&&this._update()}))),this._update()}static get(e){var o;return null!==(o=e.getContribution(InlayHintsController.ID))&&void 0!==o?o:void 0}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(127).enabled)return;const e=this._editor.getModel();if(!e||!this._languageFeaturesService.inlayHintsProvider.has(e))return;const o=this._inlayHintsCache.get(e);let s;o&&this._updateHintsDecorators([e.getFullModelRange()],o),this._sessionDisposables.add((0,m.OF)((()=>{e.isDisposed()||this._cacheHintsForFastRestore(e)})));let l=new Set;const d=new u.pY((()=>inlayHintsController_awaiter(this,void 0,void 0,(function*(){const o=Date.now();null===s||void 0===s||s.dispose(!0),s=new g.A;const u=e.onWillDispose((()=>null===s||void 0===s?void 0:s.cancel()));try{const g=s.token,p=yield InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider,e,this._getHintsRanges(),g);if(d.delay=this._debounceInfo.update(e,Date.now()-o),g.isCancellationRequested)return void p.dispose();for(const e of p.provider)"function"!==typeof e.onDidChangeInlayHints||l.has(e)||(l.add(e),this._sessionDisposables.add(e.onDidChangeInlayHints((()=>{d.isScheduled()||d.schedule()}))));this._sessionDisposables.add(p),this._updateHintsDecorators(p.ranges,p.items),this._cacheHintsForFastRestore(e)}catch(m){(0,p.dL)(m)}finally{s.dispose(),u.dispose()}}))),this._debounceInfo.get(e));this._sessionDisposables.add(d),this._sessionDisposables.add((0,m.OF)((()=>null===s||void 0===s?void 0:s.dispose(!0)))),d.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((e=>{!e.scrollTopChanged&&d.isScheduled()||d.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((e=>{const o=Math.max(d.delay,1250);d.schedule(o)}))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installDblClickGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new m.SL,o=e.add(new E.yN(this._editor)),s=new m.SL;return e.add(s),e.add(o.onMouseMoveOrRelevantKeyDown((e=>{const[o]=e,l=this._getInlayHintLabelPart(o),d=this._editor.getModel();if(!l||!d)return void s.clear();const u=new g.A;s.add((0,m.OF)((()=>u.dispose(!0)))),l.item.resolve(u.token),this._activeInlayHintPart=l.part.command||l.part.location?new ActiveInlayHintInfo(l,o.hasTriggerModifier):void 0;const p=l.item.hint.position.lineNumber,f=new S.e(p,1,p,d.getLineMaxColumn(p)),_=new Set;for(const s of this._decorationsMetadata.values())f.containsRange(s.item.anchor.range)&&_.add(s.item);this._updateHintsDecorators([f],Array.from(_)),s.add((0,m.OF)((()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([f],Array.from(_))})))}))),e.add(o.onCancel((()=>s.clear()))),e.add(o.onExecute((e=>inlayHintsController_awaiter(this,void 0,void 0,(function*(){const o=this._getInlayHintLabelPart(e);if(o){const s=o.part;s.location?this._instaService.invokeFunction(goToDefinitionWithLocation,e,this._editor,s.location):y.mY.is(s.command)&&(yield this._invokeCommand(s.command,o.item))}}))))),e}_installDblClickGesture(){return this._editor.onMouseUp((e=>inlayHintsController_awaiter(this,void 0,void 0,(function*(){if(2!==e.event.detail)return;const o=this._getInlayHintLabelPart(e);o&&(e.event.preventDefault(),yield o.item.resolve(g.T.None),o.item.hint.command&&(yield this._invokeCommand(o.item.hint.command,o.item)))}))))}_installContextMenu(){return this._editor.onContextMenu((e=>inlayHintsController_awaiter(this,void 0,void 0,(function*(){if(!(e.event.target instanceof HTMLElement))return;const o=this._getInlayHintLabelPart(e);o&&(yield this._instaService.invokeFunction(showGoToContextMenu,this._editor,e.event.target,o))}))))}_getInlayHintLabelPart(e){var o;if(6!==e.target.type)return;const s=null===(o=e.target.detail.injectedText)||void 0===o?void 0:o.options;return s instanceof x.HS&&(null===s||void 0===s?void 0:s.attachedData)instanceof RenderedInlayHintLabelPart?s.attachedData:void 0}_invokeCommand(e,o){var s;return inlayHintsController_awaiter(this,void 0,void 0,(function*(){try{yield this._commandService.executeCommand(e.id,...null!==(s=e.arguments)&&void 0!==s?s:[])}catch(l){this._notificationService.notify({severity:H.zb.Error,source:o.provider.displayName,message:l})}}))}_cacheHintsForFastRestore(e){const o=new Map;for(const[s,l]of this._decorationsMetadata){if(o.has(l.item))continue;let d=l.item;const u=e.getDecorationRange(s);if(u){const e=new InlayHintAnchor(u,l.item.anchor.direction);d=l.item.with({anchor:e})}o.set(l.item,d)}this._inlayHintsCache.set(e,Array.from(o.values()))}_getHintsRanges(){const e=30,o=this._editor.getModel(),s=this._editor.getVisibleRangesPlusViewportAboveBelow(),l=[];for(const d of s.sort(S.e.compareRangesUsingStarts)){const s=o.validateRange(new S.e(d.startLineNumber-e,d.startColumn,d.endLineNumber+e,d.endColumn));0!==l.length&&S.e.areIntersectingOrTouching(l[l.length-1],s)?l[l.length-1]=S.e.plusRange(l[l.length-1],s):l.push(s)}return l}_updateHintsDecorators(e,o){var s,l;const d=[],addInjectedText=(e,o,s,l,u)=>{d.push({item:e,classNameRef:o,decoration:{range:e.anchor.range,options:{description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0,[e.anchor.direction]:{content:s,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:o.className,cursorStops:l,attachedData:u}}}})},addInjectedWhitespace=(e,o)=>{const s=this._ruleFactory.createClassNameRef({width:(u/3|0)+"px",display:"inline-block"});addInjectedText(e,s," ",o?L.RM.Right:L.RM.None)},{fontSize:u,fontFamily:g}=this._getLayoutInfo(),p="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(p,g);for(const _ of o){_.hint.paddingLeft&&addInjectedWhitespace(_,!1);const e="string"===typeof _.hint.label?[{label:_.hint.label}]:_.hint.label;for(let o=0;o<e.length;o++){const l=e[o],d=0===o,g=o===e.length-1,m={fontSize:`${u}px`,fontFamily:`var(${p}), ${w.hL.fontFamily}`,verticalAlign:"middle"};_.hint.command&&(m.cursor="pointer"),this._fillInColors(m,_.hint),(l.command||l.location)&&(null===(s=this._activeInlayHintPart)||void 0===s?void 0:s.part.item)===_&&this._activeInlayHintPart.part.index===o&&(m.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(m.color=(0,K.EN)(U._Yy),m.cursor="pointer")),d&&g?(m.padding=`1px ${0|Math.max(1,u/4)}px`,m.borderRadius=(u/4|0)+"px"):d?(m.padding=`1px 0 1px ${0|Math.max(1,u/4)}px`,m.borderRadius=`${u/4|0}px 0 0 ${u/4|0}px`):g?(m.padding=`1px ${0|Math.max(1,u/4)}px 1px 0`,m.borderRadius=`0 ${u/4|0}px ${u/4|0}px 0`):m.padding="1px 0 1px 0",addInjectedText(_,this._ruleFactory.createClassNameRef(m),fixSpace(l.label),g&&!_.hint.paddingRight?L.RM.Right:L.RM.None,new RenderedInlayHintLabelPart(_,o))}if(_.hint.paddingRight&&addInjectedWhitespace(_,!0),d.length>InlayHintsController._MAX_DECORATORS)break}const m=[];for(const _ of e)for(const{id:e}of null!==(l=this._editor.getDecorationsInRange(_))&&void 0!==l?l:[]){const o=this._decorationsMetadata.get(e);o&&(m.push(e),o.classNameRef.dispose(),this._decorationsMetadata.delete(e))}const f=this._editor.deltaDecorations(m,d.map((e=>e.decoration)));for(let _=0;_<f.length;_++){const e=d[_];this._decorationsMetadata.set(f[_],{item:e.item,classNameRef:e.classNameRef})}}_fillInColors(e,o){o.kind===y.gl.Parameter?(e.backgroundColor=(0,K.EN)(U.phM),e.color=(0,K.EN)(U.HCL)):o.kind===y.gl.Type?(e.backgroundColor=(0,K.EN)(U.bKB),e.color=(0,K.EN)(U.hX8)):(e.backgroundColor=(0,K.EN)(U.PpC),e.color=(0,K.EN)(U.VVv))}_getLayoutInfo(){const e=this._editor.getOption(127),o=this._editor.getOption(46);let s=e.fontSize;(!s||s<5||s>o)&&(s=.9*o|0);const l=e.fontFamily||this._editor.getOption(43);return{fontSize:s,fontFamily:l}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()),[]);for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};function fixSpace(e){const o=" ";return e.replace(/[ \t]/g,o)}G.ID="editor.contrib.InlayHints",G._MAX_DECORATORS=1500,G=__decorate([__param(1,N.p),__param(2,k.A),__param(3,j),__param(4,F.Hy),__param(5,H.lT),__param(6,V.TG)],G),F.P0.registerCommand("_executeInlayHintProvider",((e,...o)=>inlayHintsController_awaiter(void 0,void 0,void 0,(function*(){const[s,l]=o;(0,_.p_)(C.o.isUri(s)),(0,_.p_)(S.e.isIRange(l));const{inlayHintsProvider:d}=e.get(N.p),u=yield e.get(D.S).createModelReference(s);try{const e=yield InlayHintsFragments.create(d,u.object.textEditorModel,[S.e.lift(l)],g.T.None),o=e.items.map((e=>e.hint));return setTimeout((()=>e.dispose()),0),o}finally{u.dispose()}}))));var q=s(9365),Q=s(2042),Z=s(1095),Y=s(2374),J=s(3108),X=s(988),ee=s(3580),te=s(1432),inlayHintsHover_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},inlayHintsHover_param=function(e,o){return function(s,l){o(s,l,e)}},inlayHintsHover_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))},__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=e[Symbol.asyncIterator];return s?s.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o);function verb(s){o[s]=e[s]&&function(o){return new Promise((function(l,d){o=e[s](o),settle(l,d,o.done,o.value)}))}}function settle(e,o,s,l){Promise.resolve(l).then((function(o){e({value:o,done:s})}),o)}};class InlayHintsHoverAnchor extends d.YM{constructor(e,o){super(10,o,e.item.anchor.range),this.part=e}}let ie=class InlayHintsHover extends Y.D5{constructor(e,o,s,l,d,u){super(e,o,s,l,u),this._resolverService=d,this.hoverOrdinal=6}suggestHoverAnchor(e){var o;const s=G.get(this._editor);if(!s)return null;if(6!==e.target.type)return null;const l=null===(o=e.target.detail.injectedText)||void 0===o?void 0:o.options;return l instanceof x.HS&&l.attachedData instanceof RenderedInlayHintLabelPart?new InlayHintsHoverAnchor(l.attachedData,this):null}computeSync(){return[]}computeAsync(e,o,s){return e instanceof InlayHintsHoverAnchor?new u.Aq((o=>inlayHintsHover_awaiter(this,void 0,void 0,(function*(){var l,d;const{part:u}=e;if(yield u.item.resolve(s),s.isCancellationRequested)return;let g,p;if("string"===typeof u.item.hint.tooltip?g=(new q.W5).appendText(u.item.hint.tooltip):u.item.hint.tooltip&&(g=u.item.hint.tooltip),g&&o.emitOne(new Y.hU(this,e.range,[g],0)),"string"===typeof u.part.tooltip?p=(new q.W5).appendText(u.part.tooltip):u.part.tooltip&&(p=u.part.tooltip),p&&o.emitOne(new Y.hU(this,e.range,[p],1)),u.part.location||u.part.command){let s;const l="altKey"===this._editor.getOption(70),d=l?te.dz?(0,ee.N)("links.navigate.kb.meta.mac","cmd + click"):(0,ee.N)("links.navigate.kb.meta","ctrl + click"):te.dz?(0,ee.N)("links.navigate.kb.alt.mac","option + click"):(0,ee.N)("links.navigate.kb.alt","alt + click");u.part.location&&u.part.command?s=(new q.W5).appendText((0,ee.N)("hint.defAndCommand","Go to Definition ({0}), right click for more",d)):u.part.location?s=(new q.W5).appendText((0,ee.N)("hint.def","Go to Definition ({0})",d)):u.part.command&&(s=new q.W5(`[${(0,ee.N)("hint.cmd","Execute Command")}](${asCommandLink(u.part.command)} "${u.part.command.title}") (${d})`,{isTrusted:!0})),s&&o.emitOne(new Y.hU(this,e.range,[s],1e4))}const m=yield this._resolveInlayHintLabelPartHover(u,s);try{for(var f,_=__asyncValues(m);f=yield _.next(),!f.done;){let e=f.value;o.emitOne(e)}}catch(C){l={error:C}}finally{try{f&&!f.done&&(d=_.return)&&(yield d.call(_))}finally{if(l)throw l.error}}})))):u.Aq.EMPTY}_resolveInlayHintLabelPartHover(e,o){return inlayHintsHover_awaiter(this,void 0,void 0,(function*(){if(!e.part.location)return u.Aq.EMPTY;const{uri:s,range:l}=e.part.location,d=yield this._resolverService.createModelReference(s);try{const s=d.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(s)?(0,Z.R8)(this._languageFeaturesService.hoverProvider,s,new T.L(l.startLineNumber,l.startColumn),o).filter((e=>!(0,q.CP)(e.hover.contents))).map((o=>new Y.hU(this,e.item.anchor.range,o.hover.contents,2+o.ordinal))):u.Aq.EMPTY}finally{d.dispose()}}))}};ie=inlayHintsHover_decorate([inlayHintsHover_param(1,Q.O),inlayHintsHover_param(2,X.v4),inlayHintsHover_param(3,J.Ui),inlayHintsHover_param(4,D.S),inlayHintsHover_param(5,N.p)],ie),(0,l._K)(G.ID,G),d.Ae.register(ie)},5369:function(e,o,s){"use strict";s.r(o);var l=s(6830),d=s(6520),u=s(4669),g=s(5976),p=s(2677),m=s(7988),f=s(9102);const _="editor.action.inlineSuggest.commit";var C=s(187),b=s(3155),w=s(5393),S=s(1050),y=s(7301),L=s(2549),x=s(9386),k=s(4314);class GhostText{constructor(e,o,s=0){this.lineNumber=e,this.parts=o,this.additionalReservedLineCount=s}renderForScreenReader(e){if(0===this.parts.length)return"";const o=this.parts[this.parts.length-1],s=e.substr(0,o.column-1),l=applyEdits(s,this.parts.map((e=>({range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")}))));return l.substring(this.parts[0].column-1)}}class PositionOffsetTransformer{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let o=0;o<e.length;o++)"\n"===e.charAt(o)&&this.lineStartOffsetByLineIdx.push(o+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function applyEdits(e,o){const s=new PositionOffsetTransformer(e),l=o.map((e=>{const o=k.e.lift(e.range);return{startOffset:s.getOffset(o.getStartPosition()),endOffset:s.getOffset(o.getEndPosition()),text:e.text}}));l.sort(((e,o)=>o.startOffset-e.startOffset));for(const d of l)e=e.substring(0,d.startOffset)+d.text+e.substring(d.endOffset);return e}class GhostTextPart{constructor(e,o,s){this.column=e,this.lines=o,this.preview=s}}class BaseGhostTextWidgetModel extends g.JT{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new u.Q5,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(106)&&void 0===this._expanded&&this.onDidChangeEmitter.fire()})))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}var N=s(4565),D=s(2571);function normalizedInlineCompletionsEquals(e,o){return e===o||!(!e||!o)&&(e.range.equalsRange(o.range)&&e.text===o.text&&e.command===o.command)}function inlineCompletionToGhostText(e,o,s,l,d=0){if(e.range.startLineNumber!==e.range.endLineNumber)return;const u=o.getLineContent(e.range.startLineNumber),g=p.V8(u).length,m=e.range.startColumn-1<=g;if(m){const o=p.V8(e.text).length,s=u.substring(e.range.startColumn-1,g),l=k.e.fromPositions(e.range.getStartPosition().delta(0,s.length),e.range.getEndPosition()),d=e.text.startsWith(s)?e.text.substring(s.length):e.text.substring(o);e={range:l,text:d,command:e.command}}const f=o.getValueInRange(e.range),_=cachingDiff(f,e.text);if(!_)return;const C=e.range.startLineNumber,b=new Array;if("prefix"===s){const e=_.filter((e=>0===e.originalLength));if(e.length>1||1===e.length&&e[0].originalStart!==f.length)return}const w=e.text.length-d;for(const S of _){const o=e.range.startColumn+S.originalStart+S.originalLength;if("subwordSmart"===s&&l&&l.lineNumber===e.range.startLineNumber&&o<l.column)return;if(S.originalLength>0)return;if(0===S.modifiedLength)continue;const d=S.modifiedStart+S.modifiedLength,u=Math.max(S.modifiedStart,Math.min(d,w)),g=e.text.substring(S.modifiedStart,u),m=e.text.substring(u,Math.max(S.modifiedStart,d));if(g.length>0){const e=p.uq(g);b.push(new GhostTextPart(o,e,!1))}if(m.length>0){const e=p.uq(m);b.push(new GhostTextPart(o,e,!0))}}return new GhostText(C,b,0)}let E;function cachingDiff(e,o){if((null===E||void 0===E?void 0:E.originalValue)===e&&(null===E||void 0===E?void 0:E.newValue)===o)return null===E||void 0===E?void 0:E.changes;{const s=smartDiff(e,o);return E={originalValue:e,newValue:o,changes:s},s}}function smartDiff(e,o){if(e.length>5e3||o.length>5e3)return;function getMaxCharCode(e){let o=0;for(let s=0,l=e.length;s<l;s++){const l=e.charCodeAt(s);l>o&&(o=l)}return o}const s=Math.max(getMaxCharCode(e),getMaxCharCode(o));function getUniqueCharCode(e){if(e<0)throw new Error("unexpected");return s+e+1}function getElements(e){let o=0,s=0;const l=new Int32Array(e.length);for(let d=0,u=e.length;d<u;d++){const u=100*s+o;"("===e[d]?(l[d]=getUniqueCharCode(2*u),o++):")"===e[d]?(l[d]=getUniqueCharCode(2*u+1),1===o&&s++,o=Math.max(o-1,0)):l[d]=e.charCodeAt(d)}return l}const l=getElements(e),d=getElements(o);return new D.Hs({getElements:()=>l},{getElements:()=>d}).ComputeDiff(!1).changes}var T=s(5638),I=s(5382),A=s(5035),M=s(4837),R=s(1761),P=s(6735);function fixBracketsInLine(e,o){const s=new R.FE,l=new I.Z(s,(e=>o.getLanguageConfiguration(e))),d=new P.xH(new StaticTokenizerSource([e]),l),u=(0,M.w)(d,[],void 0,!0);let g="";const p=e.getLineContent();function processNode(e,o){if(2===e.kind)if(processNode(e.openingBracket,o),o=(0,A.Ii)(o,e.openingBracket.length),e.child&&(processNode(e.child,o),o=(0,A.Ii)(o,e.child.length)),e.closingBracket)processNode(e.closingBracket,o),o=(0,A.Ii)(o,e.closingBracket.length);else{const o=l.getSingleLanguageBracketTokens(e.openingBracket.languageId),s=o.findClosingTokenText(e.openingBracket.bracketIds);g+=s}else if(3===e.kind);else if(0===e.kind||1===e.kind)g+=p.substring((0,A.F_)(o),(0,A.F_)((0,A.Ii)(o,e.length)));else if(4===e.kind)for(const s of e.children)processNode(s,o),o=(0,A.Ii)(o,s.length)}return processNode(u,A.xl),g}class StaticTokenizerSource{constructor(e){this.lines=e}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}getLineTokens(e){return this.lines[e-1]}}var O=s(1922),F=s(8191),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let B=class InlineCompletionsModel extends g.JT{constructor(e,o,s,l,d,p){super(),this.editor=e,this.cache=o,this.commandService=s,this.languageConfigurationService=l,this.languageFeaturesService=d,this.debounceService=p,this.onDidChangeEmitter=new u.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new g.XK),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:200}),this._register(s.onDidExecuteCommand((o=>{const s=new Set([L.CoreEditingCommands.Tab.id,L.CoreEditingCommands.DeleteLeft.id,L.CoreEditingCommands.DeleteRight.id,_,"acceptSelectedSuggestion"]);s.has(o.commandId)&&e.hasTextFocus()&&this.handleUserInput()}))),this._register(this.editor.onDidType((e=>{this.handleUserInput()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.session&&!this.session.isValid&&this.hide()}))),this._register((0,g.OF)((()=>{this.disposed=!0}))),this._register(this.editor.onDidBlurEditorWidget((()=>{this.hide()})))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout((()=>{this.disposed||this.startSessionIfTriggered()}),0)}get session(){return this.completionSession.value}get ghostText(){var e;return null===(e=this.session)||void 0===e?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var o;null===(o=this.session)||void 0===o||o.setExpanded(e)}setActive(e){var o;this.active=e,e&&(null===(o=this.session)||void 0===o||o.scheduleAutomaticUpdate())}startSessionIfTriggered(){const e=this.editor.getOption(55);e.enabled&&(this.session&&this.session.isValid||this.trigger(b.bw.Automatic))}trigger(e){this.completionSession.value?e===b.bw.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext():(this.completionSession.value=new InlineCompletionsSession(this.editor,this.editor.getPosition(),(()=>this.active),this.commandService,this.cache,e,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange((()=>{this.onDidChangeEmitter.fire()}))))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;null===(e=this.session)||void 0===e||e.commitCurrentCompletion()}showNext(){var e;null===(e=this.session)||void 0===e||e.showNextInlineCompletion()}showPrevious(){var e;null===(e=this.session)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return __awaiter(this,void 0,void 0,(function*(){const o=yield null===(e=this.session)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==o&&o}))}};B=__decorate([__param(2,N.Hy),__param(3,T.c_),__param(4,O.p),__param(5,F.A)],B);class InlineCompletionsSession extends BaseGhostTextWidgetModel{constructor(e,o,s,l,d,u,p,m,f){let _;super(e),this.triggerPosition=o,this.shouldUpdate=s,this.commandService=l,this.cache=d,this.initialTriggerKind=u,this.languageConfigurationService=p,this.registry=m,this.debounce=f,this.minReservedLineCount=0,this.updateOperation=this._register(new g.XK),this.updateSoon=this._register(new w.pY((()=>{let e=this.initialTriggerKind;return this.initialTriggerKind=b.bw.Automatic,this.update(e)}),50)),this.currentlySelectedCompletionId=void 0,this._register(this.onDidChange((()=>{const e=this.currentCompletion;if(e&&e.sourceInlineCompletion!==_){_=e.sourceInlineCompletion;const o=e.sourceProvider;o.handleItemDidShow&&o.handleItemDidShow(e.sourceInlineCompletions,_)}}))),this._register((0,g.OF)((()=>{this.cache.clear()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.cache.value&&this.onDidChangeEmitter.fire()}))),this._register(this.editor.onDidChangeModelContent((e=>{this.scheduleAutomaticUpdate()}))),this._register(this.registry.onDidChange((()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}))),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value)return 0;if(0===this.cache.value.completions.length)return 0;const e=this.cache.value.completions.findIndex((e=>e.semanticId===this.currentlySelectedCompletionId));return-1===e?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return __awaiter(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const o=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[];if(o.length>0){const e=(this.fixAndGetIndexOfCurrentSelection()+1)%o.length;this.currentlySelectedCompletionId=o[e].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}showPreviousInlineCompletion(){var e;return __awaiter(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const o=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[];if(o.length>0){const e=(this.fixAndGetIndexOfCurrentSelection()+o.length-1)%o.length;this.currentlySelectedCompletionId=o[e].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}ensureUpdateWithExplicitContext(){var e;return __awaiter(this,void 0,void 0,(function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===b.bw.Explicit?yield this.updateOperation.value.promise:yield this.update(b.bw.Explicit):(null===(e=this.cache.value)||void 0===e?void 0:e.triggerKind)!==b.bw.Explicit&&(yield this.update(b.bw.Explicit))}))}hasMultipleInlineCompletions(){var e;return __awaiter(this,void 0,void 0,(function*(){return yield this.ensureUpdateWithExplicitContext(),((null===(e=this.cache.value)||void 0===e?void 0:e.completions.length)||0)>1}))}get ghostText(){const e=this.currentCompletion,o=this.editor.getOptions().get(55).mode;return e?inlineCompletionToGhostText(e,this.editor.getModel(),o,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(e){return __awaiter(this,void 0,void 0,(function*(){if(!this.shouldUpdate())return;const o=this.editor.getPosition(),s=new Date,l=(0,w.PG)((l=>__awaiter(this,void 0,void 0,(function*(){let d;try{d=yield provideInlineCompletions(this.registry,o,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},l,this.languageConfigurationService);const u=new Date;this.debounce.update(this.editor.getModel(),u.getTime()-s.getTime())}catch(u){return void(0,y.dL)(u)}l.isCancellationRequested||(this.cache.setValue(this.editor,d,e),this.onDidChangeEmitter.fire())})))),d=new UpdateOperation(l,e);this.updateOperation.value=d,yield l,this.updateOperation.value===d&&this.updateOperation.clear()}))}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const o=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[x.h.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally((()=>{null===o||void 0===o||o.dispose()})).then(void 0,y.Cp):null===o||void 0===o||o.dispose(),this.onDidChangeEmitter.fire()}}class UpdateOperation{constructor(e,o){this.promise=e,this.triggerKind=o}dispose(){this.promise.cancel()}}class SynchronizedInlineCompletionsCache extends g.JT{constructor(e,o,s,l){super(),this.triggerKind=l;const d=e.deltaDecorations([],o.items.map((e=>({range:e.range,options:{description:"inline-completion-tracking-range"}}))));this._register((0,g.OF)((()=>{e.deltaDecorations(d,[])}))),this.completions=o.items.map(((e,o)=>new CachedInlineCompletion(e,d[o]))),this._register(e.onDidChangeModelContent((()=>{let o=!1;const l=e.getModel();for(const e of this.completions){const s=l.getDecorationRange(e.decorationId);s?e.synchronizedRange.equalsRange(s)||(o=!0,e.synchronizedRange=s):(0,y.dL)(new Error("Decoration has no range"))}o&&s()}))),this._register(o)}}class CachedInlineCompletion{constructor(e,o){this.inlineCompletion=e,this.decorationId=o,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function getDefaultRange(e,o){const s=o.getWordAtPosition(e),l=o.getLineMaxColumn(e.lineNumber);return s?new k.e(e.lineNumber,s.startColumn,e.lineNumber,l):k.e.fromPositions(e,e.with(void 0,l))}function provideInlineCompletions(e,o,s,l,d=S.T.None,u){return __awaiter(this,void 0,void 0,(function*(){const g=getDefaultRange(o,s),p=e.all(s),m=yield Promise.all(p.map((e=>__awaiter(this,void 0,void 0,(function*(){const u=yield Promise.resolve(e.provideInlineCompletions(s,o,l,d)).catch(y.Cp);return{completions:u,provider:e,dispose:()=>{u&&e.freeInlineCompletions(u)}}}))))),f=new Map;for(const e of m){const o=e.completions;if(o)for(const l of o.items){const d=l.range?k.e.lift(l.range):g;if(d.startLineNumber!==d.endLineNumber)continue;const p=u&&l.completeBracketPairs?closeBrackets(l.text,d.getStartPosition(),s,u):l.text,m={text:p,range:d,command:l.command,sourceProvider:e.provider,sourceInlineCompletions:o,sourceInlineCompletion:l};f.set(JSON.stringify({text:p,range:l.range}),m)}}return{items:[...f.values()],dispose:()=>{for(const e of m)e.dispose()}}}))}function closeBrackets(e,o,s,l){const d=s.getLineContent(o.lineNumber).substring(0,o.column-1),u=d+e,g=s.tokenizeLineWithEdit(o,u.length-(o.column-1),e),p=null===g||void 0===g?void 0:g.sliceAndInflate(o.column-1,u.length,0);if(!p)return e;console.log(p);const m=fixBracketsInLine(p,l);return m}function minimizeInlineCompletion(e,o){if(!o)return o;const s=e.getValueInRange(o.range),l=(0,p.Mh)(s,o.text),d=e.getOffsetAt(o.range.getStartPosition())+l,u=e.getPositionAt(d),g=s.substr(l),m=(0,p.P1)(g,o.text),f=e.getPositionAt(Math.max(d,e.getOffsetAt(o.range.getEndPosition())-m));return{range:k.e.fromPositions(u,f),text:o.text.substr(l,o.text.length-l-m)}}var W=s(9488),V=s(5084),H=s(8398),z=s(492);class SuggestWidgetInlineCompletionProvider extends g.JT{constructor(e,o){super(),this.editor=e,this.suggestControllerPreselector=o,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new u.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new w.pY((()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())}),100)),this._register(e.onKeyDown((e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))}))),this._register(e.onKeyUp((e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))})));const s=z.SuggestController.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(e,o,l)=>{const d=this.editor.getModel(),u=minimizeInlineCompletion(d,this.suggestControllerPreselector());if(!u)return-1;const g=C.L.lift(o),p=l.map(((e,o)=>{const l=suggestionToSuggestItemInfo(s,g,e,this.isShiftKeyPressed),p=minimizeInlineCompletion(d,null===l||void 0===l?void 0:l.normalizedInlineCompletion);if(!p)return;const m=rangeStartsWith(u.range,p.range)&&u.text.startsWith(p.text);return{index:o,valid:m,prefixLength:p.text.length,suggestItem:e}})).filter((e=>e&&e.valid)),m=(0,W.Dc)(p,(0,W.tT)((e=>e.prefixLength),W.fv));return m?m.index:-1}}));let e=!1;const bindToSuggestWidget=()=>{e||(e=!0,this._register(s.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))),this._register(s.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)}))),this._register(s.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))))};this._register(u.ju.once(s.model.onDidTrigger)((e=>{bindToSuggestWidget()})))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const o=this.getSuggestItemInfo();let s=!1;suggestItemInfoEquals(this._currentSuggestItemInfo,o)||(this._currentSuggestItemInfo=o,s=!0),this._isActive!==e&&(this._isActive=e,s=!0),s&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=z.SuggestController.get(this.editor);if(!e)return;if(!this.isSuggestWidgetVisible)return;const o=e.widget.value.getFocusedItem();return o?suggestionToSuggestItemInfo(e,this.editor.getPosition(),o.item,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){const e=z.SuggestController.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=z.SuggestController.get(this.editor);e&&e.forceRenderingAbove()}}function rangeStartsWith(e,o){return o.startLineNumber===e.startLineNumber&&o.startColumn===e.startColumn&&(o.endLineNumber<e.endLineNumber||o.endLineNumber===e.endLineNumber&&o.endColumn<=e.endColumn)}function suggestItemInfoEquals(e,o){return e===o||!(!e||!o)&&(e.completionItemKind===o.completionItemKind&&e.isSnippetText===o.isSnippetText&&normalizedInlineCompletionsEquals(e.normalizedInlineCompletion,o.normalizedInlineCompletion))}function suggestionToSuggestItemInfo(e,o,s,l){if(Array.isArray(s.completion.additionalTextEdits)&&s.completion.additionalTextEdits.length>0)return{completionItemKind:s.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:k.e.fromPositions(o,o),text:""}};let{insertText:d}=s.completion,u=!1;if(4&s.completion.insertTextRules){const s=(new V.Yj).parse(d),l=e.editor.getModel();if(s.children.length>100)return;H.l.adjustWhitespace(l,o,s,!0,!0),d=s.toString(),u=!0}const g=e.getOverwriteInfo(s,l);return{isSnippetText:u,completionItemKind:s.completion.kind,normalizedInlineCompletion:{text:d,range:k.e.fromPositions(o.delta(0,-g.overwriteBefore),o.delta(0,Math.max(g.overwriteAfter,0)))}}}var suggestWidgetPreviewModel_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},suggestWidgetPreviewModel_param=function(e,o){return function(s,l){o(s,l,e)}},suggestWidgetPreviewModel_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let U=class SuggestWidgetPreviewModel extends BaseGhostTextWidgetModel{constructor(e,o,s){super(e),this.cache=o,this.languageFeaturesService=s,this.suggestionInlineCompletionSource=this._register(new SuggestWidgetInlineCompletionProvider(this.editor,(()=>{var e,o;return null===(o=null===(e=this.cache.value)||void 0===e?void 0:e.completions[0])||void 0===o?void 0:o.toLiveInlineCompletion()}))),this.updateOperation=this._register(new g.XK),this.updateCacheSoon=this._register(new w.pY((()=>this.updateCache()),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange((()=>{this.updateCacheSoon.schedule();const e=this.suggestionInlineCompletionSource.state;e||(this.minReservedLineCount=0);const o=this.ghostText;o&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,sum(o.parts.map((e=>e.lines.length-1))))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()}))),this._register(this.cache.onDidChange((()=>{this.onDidChangeEmitter.fire()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()}))),this._register((0,g.OF)((()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove())))}get isActive(){return void 0!==this.suggestionInlineCompletionSource.state}isSuggestionPreviewEnabled(){const e=this.editor.getOption(106);return e.preview}updateCache(){return suggestWidgetPreviewModel_awaiter(this,void 0,void 0,(function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const o={text:e.selectedItem.normalizedInlineCompletion.text,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},s=this.editor.getPosition(),l=(0,w.PG)((e=>suggestWidgetPreviewModel_awaiter(this,void 0,void 0,(function*(){let l;try{l=yield provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider,s,this.editor.getModel(),{triggerKind:b.bw.Automatic,selectedSuggestionInfo:o},e)}catch(d){return void(0,y.dL)(d)}e.isCancellationRequested||(this.cache.setValue(this.editor,l,b.bw.Automatic),this.onDidChangeEmitter.fire())})))),d=new UpdateOperation(l,b.bw.Automatic);this.updateOperation.value=d,yield l,this.updateOperation.value===d&&this.updateOperation.clear()}))}get ghostText(){var e,o,s;const l=this.isSuggestionPreviewEnabled(),d=minimizeInlineCompletion(this.editor.getModel(),null===(o=null===(e=this.cache.value)||void 0===e?void 0:e.completions[0])||void 0===o?void 0:o.toLiveInlineCompletion()),u=this.suggestionInlineCompletionSource.state,g=minimizeInlineCompletion(this.editor.getModel(),null===(s=null===u||void 0===u?void 0:u.selectedItem)||void 0===s?void 0:s.normalizedInlineCompletion),p=d&&g&&d.text.startsWith(g.text)&&d.range.equalsRange(g.range);if(!l&&!p)return;const m=p?d:g||d,f=p?m.text.length-g.text.length:0,_=this.toGhostText(m,f);return _}toGhostText(e,o){const s=this.editor.getOptions().get(106).previewMode;return e?inlineCompletionToGhostText(e,this.editor.getModel(),s,this.editor.getPosition(),o)||new GhostText(e.range.endLineNumber,[],this.minReservedLineCount):void 0}};function sum(e){return e.reduce(((e,o)=>e+o),0)}function createDisposableRef(e,o){return{object:e,dispose:()=>null===o||void 0===o?void 0:o.dispose()}}U=suggestWidgetPreviewModel_decorate([suggestWidgetPreviewModel_param(2,O.p)],U);var K=s(2065),ghostTextModel_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},ghostTextModel_param=function(e,o){return function(s,l){o(s,l,e)}},ghostTextModel_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class DelegatingModel extends g.JT{constructor(){super(...arguments),this.onDidChangeEmitter=new u.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new g.XK)}get targetModel(){var e;return null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object}setTargetModel(e){var o;(null===(o=this.currentModelRef.value)||void 0===o?void 0:o.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?createDisposableRef(e,e.onDidChange((()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()}))):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,o;return this.hasCachedGhostText||(this.cachedGhostText=null===(o=null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object)||void 0===o?void 0:o.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var o;null===(o=this.targetModel)||void 0===o||o.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let j=class GhostTextModel extends DelegatingModel{constructor(e,o){super(),this.editor=e,this.instantiationService=o,this.sharedCache=this._register(new SharedInlineCompletionCache),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(U,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance(B,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange((()=>{this.updateModel()}))),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var o;const s=null===(o=this.activeInlineCompletionsModel)||void 0===o?void 0:o.ghostText;return!!s&&s.parts.some((o=>e.containsPosition(new C.L(s.lineNumber,o.column))))}triggerInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.trigger(b.bw.Explicit)}commitInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.hide()}showNextInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showNext()}showPreviousInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showPrevious()}hasMultipleInlineCompletions(){var e;return ghostTextModel_awaiter(this,void 0,void 0,(function*(){const o=yield null===(e=this.activeInlineCompletionsModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==o&&o}))}};j=ghostTextModel_decorate([ghostTextModel_param(1,K.TG)],j);class SharedInlineCompletionCache extends g.JT{constructor(){super(...arguments),this.onDidChangeEmitter=new u.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new g.XK)}get value(){return this.cache.value}setValue(e,o,s){this.cache.value=new SynchronizedInlineCompletionsCache(e,o,(()=>this.onDidChangeEmitter.fire()),s)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var G,q=s(5321),Q=s(2136),Z=s(4141),Y=s(7378),J=s(72),X=s(2042),ee=s(8625),te=s(2550),ie=s(7736),ne=s(7781),ghostTextWidget_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},ghostTextWidget_param=function(e,o){return function(s,l){o(s,l,e)}};const oe=null===(G=window.trustedTypes)||void 0===G?void 0:G.createPolicy("editorGhostText",{createHTML:e=>e});let se=class GhostTextWidget extends g.JT{constructor(e,o,s,l){super(),this.editor=e,this.model=o,this.instantiationService=s,this.languageService=l,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(DecorationsWidget,this.editor)),this.additionalLinesWidget=this._register(new AdditionalLinesWidget(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(29)||e.hasChanged(105)||e.hasChanged(88)||e.hasChanged(83)||e.hasChanged(45)||e.hasChanged(44)||e.hasChanged(59))&&this.update()}))),this._register((0,g.OF)((()=>{var e;this.disposed=!0,this.update(),null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0}))),this._register(o.onDidChange((()=>{this.update()}))),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const o=this.model.ghostText;if(!this.editor.hasModel()||!o||this.disposed)return this.partsWidget.clear(),void this.additionalLinesWidget.clear();const s=new Array,l=new Array;function addToAdditionalLines(e,o){if(l.length>0){const s=l[l.length-1];o&&s.decorations.push(new te.Kp(s.content.length+1,s.content.length+1+e[0].length,o,0)),s.content+=e[0],e=e.slice(1)}for(const s of e)l.push({content:s,decorations:o?[new te.Kp(1,s.length+1,o,0)]:[]})}const d=this.editor.getModel().getLineContent(o.lineNumber);let u;this.editor.getModel().getLineTokens(o.lineNumber);let g=0;for(const p of o.parts){let e=p.lines;void 0===u?(s.push({column:p.column,text:e[0],preview:p.preview}),e=e.slice(1)):addToAdditionalLines([d.substring(g,p.column-1)],void 0),e.length>0&&(addToAdditionalLines(e,"ghost-text"),void 0===u&&p.column<=d.length&&(u=p.column)),g=p.column-1}void 0!==u&&addToAdditionalLines([d.substring(g)],void 0),this.partsWidget.setParts(o.lineNumber,s,void 0!==u?{column:u,length:d.length+1-u}:void 0),this.additionalLinesWidget.updateLines(o.lineNumber,l,o.additionalReservedLineCount),o.parts.some((e=>e.lines.length<0))?this.viewMoreContentWidget=this.renderViewMoreLines(new C.L(o.lineNumber,this.editor.getModel().getLineMaxColumn(o.lineNumber)),"",0):(null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,o,s){const l=this.editor.getOption(44),d=document.createElement("div");d.className="suggest-preview-additional-widget",(0,Q.N)(d,l);const u=document.createElement("span");u.className="content-spacer",u.append(o),d.append(u);const p=document.createElement("span");p.className="content-newline suggest-preview-text",p.append("⏎  "),d.append(p);const m=new g.SL,f=document.createElement("div");return f.className="button suggest-preview-text",f.append(`+${s} lines…`),m.add(q.mu(f,"mousedown",(e=>{var o;null===(o=this.model)||void 0===o||o.setExpanded(!0),e.preventDefault(),this.editor.focus()}))),d.append(f),new ViewMoreLinesContentWidget(this.editor,e,d,m)}};se=ghostTextWidget_decorate([ghostTextWidget_param(2,K.TG),ghostTextWidget_param(3,X.O)],se);class DecorationsWidget{constructor(e){this.editor=e,this.decorationIds=[],this.disposableStore=new g.SL}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,o,s){this.disposableStore.clear();const l=this.editor.getModel();if(!l)return;const d=new Array;s&&d.push({range:k.e.fromPositions(new C.L(e,s.column),new C.L(e,s.column+s.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,o.map((o=>({range:k.e.fromPositions(new C.L(e,o.column)),options:{description:"ghost-text",after:{content:o.text,inlineClassName:o.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}}))).concat(d))}}class AdditionalLinesWidget{constructor(e,o){this.editor=e,this.languageIdCodec=o,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones((e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(e,o,s){const l=this.editor.getModel();if(!l)return;const{tabSize:d}=l.getOptions();this.editor.changeViewZones((l=>{this._viewZoneId&&(l.removeZone(this._viewZoneId),this._viewZoneId=void 0);const u=Math.max(o.length,s);if(u>0){const s=document.createElement("div");renderLines(s,d,o,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=l.addZone({afterLineNumber:e,heightInLines:u,domNode:s,afterColumnAffinity:1})}}))}}function renderLines(e,o,s,l,d){const u=l.get(29),g=l.get(105),m="none",f=l.get(83),_=l.get(45),C=l.get(44),b=l.get(59),w=(0,J.l$)(1e4);w.appendASCIIString('<div class="suggest-preview-text">');for(let L=0,x=s.length;L<x;L++){const e=s[L],l=e.content;w.appendASCIIString('<div class="view-line'),w.appendASCIIString('" style="top:'),w.appendASCIIString(String(L*b)),w.appendASCIIString('px;width:1000000px;">');const S=p.$i(l),y=p.Ut(l),x=Y.A.createEmpty(l,d);(0,ie.d1)(new ie.IJ(C.isMonospace&&!u,C.canUseHalfwidthRightwardsArrow,l,!1,S,y,0,x,e.decorations,o,0,C.spaceWidth,C.middotWidth,C.wsmiddotWidth,g,m,f,_!==Z.n0.OFF,null),w),w.appendASCIIString("</div>")}w.appendASCIIString("</div>"),(0,Q.N)(e,C);const S=w.build(),y=oe?oe.createHTML(S):S;e.innerHTML=y}class ViewMoreLinesContentWidget extends g.JT{constructor(e,o,s,l){super(),this.editor=e,this.position=o,this.domNode=s,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(l),this._register((0,g.OF)((()=>{this.editor.removeContentWidget(this)}))),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}(0,ne.Ic)(((e,o)=>{const s=e.getColor(ee.N5);s&&(o.addRule(`.monaco-editor .ghost-text-decoration { color: ${s.toString()} !important; }`),o.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${s.toString()} !important; }`),o.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${s.toString()} !important; }`));const l=e.getColor(ee.IO);l&&(o.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${l.toString()}; }`),o.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${l.toString()}; }`),o.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${l.toString()}; }`));const d=e.getColor(ee.x3);d&&(o.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${d}; }`),o.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${d}; }`),o.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${d}; }`))}));var re=s(3580),ae=s(8819),le=s(9989),ghostTextController_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},ghostTextController_param=function(e,o){return function(s,l){o(s,l,e)}},ghostTextController_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let ce=class GhostTextController extends g.JT{constructor(e,o){super(),this.editor=e,this.instantiationService=o,this.triggeredExplicitly=!1,this.activeController=this._register(new g.XK),this.activeModelDidChangeEmitter=this._register(new u.Q5),this._register(this.editor.onDidChangeModel((()=>{this.updateModelController()}))),this._register(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(106)&&this.updateModelController(),e.hasChanged(55)&&this.updateModelController()}))),this.updateModelController()}static get(e){return e.getContribution(GhostTextController.ID)}get activeModel(){var e;return null===(e=this.activeController.value)||void 0===e?void 0:e.model}updateModelController(){const e=this.editor.getOption(106),o=this.editor.getOption(55);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||o.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(de,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}shouldShowHoverAt(e){var o;return(null===(o=this.activeModel)||void 0===o?void 0:o.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var o,s;return(null===(s=null===(o=this.activeController.value)||void 0===o?void 0:o.widget)||void 0===s?void 0:s.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),null===(e=this.activeModel)||void 0===e||e.triggerInlineCompletion()}commit(){var e;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletion()}hide(){var e;null===(e=this.activeModel)||void 0===e||e.hideInlineCompletion()}showNextInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return ghostTextController_awaiter(this,void 0,void 0,(function*(){const o=yield null===(e=this.activeModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==o&&o}))}};ce.inlineSuggestionVisible=new ae.uy("inlineSuggestionVisible",!1,re.N("inlineSuggestionVisible","Whether an inline suggestion is visible")),ce.inlineSuggestionHasIndentation=new ae.uy("inlineSuggestionHasIndentation",!1,re.N("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),ce.inlineSuggestionHasIndentationLessThanTabSize=new ae.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,re.N("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),ce.ID="editor.contrib.ghostTextController",ce=ghostTextController_decorate([ghostTextController_param(1,K.TG)],ce);class GhostTextContextKeys{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=ce.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=ce.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=ce.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let de=class ActiveGhostTextController extends g.JT{constructor(e,o,s){super(),this.editor=e,this.instantiationService=o,this.contextKeyService=s,this.contextKeys=new GhostTextContextKeys(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(j,this.editor)),this.widget=this._register(this.instantiationService.createInstance(se,this.editor,this.model)),this._register((0,g.OF)((()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)}))),this._register(this.model.onDidChange((()=>{this.updateContextKeys()}))),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(e=this.model.activeInlineCompletionsModel)||void 0===e?void 0:e.ghostText));let o=!1,s=!0;const l=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&l&&l.parts.length>0){const{column:e,lines:d}=l.parts[0],u=d[0],g=this.editor.getModel().getLineIndentColumn(l.lineNumber),f=e<=g;if(f){let e=(0,p.LC)(u);-1===e&&(e=u.length-1),o=e>0;const l=this.editor.getModel().getOptions().tabSize,d=m.i.visibleColumnFromColumn(u,e+1,l);s=d<l}}this.contextKeys.inlineCompletionSuggestsIndentation.set(o),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(s)}};de=ghostTextController_decorate([ghostTextController_param(1,K.TG),ghostTextController_param(2,ae.i6)],de);const he=l._l.bindToContribution(ce.get),ue=new he({id:_,precondition:ce.inlineSuggestionVisible,handler(e){e.commit(),e.editor.focus()}});(0,l.fK)(ue),le.W.registerKeybindingRule({primary:2,weight:200,id:ue.id,when:ae.Ao.and(ue.precondition,f.u.tabMovesFocus.toNegated(),ce.inlineSuggestionHasIndentationLessThanTabSize)}),(0,l.fK)(new he({id:"editor.action.inlineSuggest.hide",precondition:ce.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(e){e.hide()}}));class ShowNextInlineSuggestionAction extends l.R6{constructor(){super({id:ShowNextInlineSuggestionAction.ID,label:re.N("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:ae.Ao.and(f.u.writable,ce.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,o){return ghostTextController_awaiter(this,void 0,void 0,(function*(){const e=ce.get(o);e&&(e.showNextInlineCompletion(),o.focus())}))}}ShowNextInlineSuggestionAction.ID="editor.action.inlineSuggest.showNext";class ShowPreviousInlineSuggestionAction extends l.R6{constructor(){super({id:ShowPreviousInlineSuggestionAction.ID,label:re.N("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:ae.Ao.and(f.u.writable,ce.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,o){return ghostTextController_awaiter(this,void 0,void 0,(function*(){const e=ce.get(o);e&&(e.showPreviousInlineCompletion(),o.focus())}))}}ShowPreviousInlineSuggestionAction.ID="editor.action.inlineSuggest.showPrevious";class TriggerInlineSuggestionAction extends l.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:re.N("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:f.u.writable})}run(e,o){return ghostTextController_awaiter(this,void 0,void 0,(function*(){const e=ce.get(o);e&&e.trigger()}))}}var ge=s(9365),pe=s(5831),me=s(1106),fe=s(4144),_e=s(988),inlineCompletionsHoverParticipant_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},inlineCompletionsHoverParticipant_param=function(e,o){return function(s,l){o(s,l,e)}};class InlineCompletionsHover{constructor(e,o,s){this.owner=e,this.range=o,this.controller=s}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let Ce=class InlineCompletionsHoverParticipant{constructor(e,o,s,l,d,u,g){this._editor=e,this._commandService=o,this._menuService=s,this._contextKeyService=l,this._languageService=d,this._openerService=u,this.accessibilityService=g,this.hoverOrdinal=3}suggestHoverAnchor(e){const o=ce.get(this._editor);if(!o)return null;const s=e.target;if(8===s.type){const e=s.detail;if(o.shouldShowHoverAtViewZone(e.viewZoneId))return new d.YM(1e3,this,k.e.fromPositions(e.positionBefore||e.position,e.positionBefore||e.position))}if(7===s.type&&o.shouldShowHoverAt(s.range))return new d.YM(1e3,this,s.range);if(6===s.type){const e=s.detail.mightBeForeignElement;if(e&&o.shouldShowHoverAt(s.range))return new d.YM(1e3,this,s.range)}return null}computeSync(e,o){const s=ce.get(this._editor);return s&&s.shouldShowHoverAt(e.range)?[new InlineCompletionsHover(this,e.range,s)]:[]}renderHoverParts(e,o){const s=new g.SL,l=o[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,l,s);const d=s.add(this._menuService.createMenu(fe.eH.InlineCompletionsActions,this._contextKeyService)),u=e.statusBar.addAction({label:re.N("showNextInlineSuggestion","Next"),commandId:ShowNextInlineSuggestionAction.ID,run:()=>this._commandService.executeCommand(ShowNextInlineSuggestionAction.ID)}),p=e.statusBar.addAction({label:re.N("showPreviousInlineSuggestion","Previous"),commandId:ShowPreviousInlineSuggestionAction.ID,run:()=>this._commandService.executeCommand(ShowPreviousInlineSuggestionAction.ID)});e.statusBar.addAction({label:re.N("acceptInlineSuggestion","Accept"),commandId:ue.id,run:()=>this._commandService.executeCommand(ue.id)});const m=[u,p];for(const g of m)g.setEnabled(!1);l.hasMultipleSuggestions().then((e=>{for(const o of m)o.setEnabled(e)}));for(const[g,f]of d.getActions())for(const o of f)o instanceof fe.U8&&e.statusBar.addAction({label:o.label,commandId:o.item.id,run:()=>this._commandService.executeCommand(o.item.id)});return s}renderScreenReaderText(e,o,s){var l,d;const u=q.$,g=u("div.hover-row.markdown-hover"),p=q.R3(g,u("div.hover-contents")),m=s.add(new pe.$({editor:this._editor},this._languageService,this._openerService)),render=o=>{s.add(m.onDidRenderAsync((()=>{p.className="hover-contents code-hover-contents",e.onContentsChanged()})));const l=re.N("inlineSuggestionFollows","Suggestion:"),d=s.add(m.render((new ge.W5).appendText(l).appendCodeblock("text",o)));p.replaceChildren(d.element)},f=null===(d=null===(l=o.controller.activeModel)||void 0===l?void 0:l.inlineCompletionsModel)||void 0===d?void 0:d.ghostText;if(f){const e=this._editor.getModel().getLineContent(f.lineNumber);render(f.renderForScreenReader(e))}e.fragment.appendChild(g)}};Ce=inlineCompletionsHoverParticipant_decorate([inlineCompletionsHoverParticipant_param(1,N.Hy),inlineCompletionsHoverParticipant_param(2,fe.co),inlineCompletionsHoverParticipant_param(3,ae.i6),inlineCompletionsHoverParticipant_param(4,X.O),inlineCompletionsHoverParticipant_param(5,_e.v4),inlineCompletionsHoverParticipant_param(6,me.F)],Ce),(0,l._K)(ce.ID,ce),(0,l.Qr)(TriggerInlineSuggestionAction),(0,l.Qr)(ShowNextInlineSuggestionAction),(0,l.Qr)(ShowPreviousInlineSuggestionAction),d.Ae.register(Ce)},7615:function(e,o,s){"use strict";s.r(o),s.d(o,{ExpandLineSelectionAction:function(){return ExpandLineSelectionAction}});var l=s(6830),d=s(8108),u=s(9102),g=s(3580);class ExpandLineSelectionAction extends l.R6{constructor(){super({id:"expandLineSelection",label:g.N("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:u.u.textInputFocus,primary:2090}})}run(e,o,s){if(s=s||{},!o.hasModel())return;const l=o._getViewModel();l.model.pushStackElement(),l.setCursorStates(s.source,3,d.P.expandLineSelection(l,l.getCursorStates())),l.revealPrimaryCursor(s.source,!0)}}(0,l.Qr)(ExpandLineSelectionAction)},9504:function(e,o,s){"use strict";s.r(o),s.d(o,{AbstractCaseAction:function(){return AbstractCaseAction},AbstractDeleteAllToBoundaryAction:function(){return AbstractDeleteAllToBoundaryAction},AbstractSortLinesAction:function(){return AbstractSortLinesAction},DeleteAllLeftAction:function(){return DeleteAllLeftAction},DeleteAllRightAction:function(){return DeleteAllRightAction},DeleteDuplicateLinesAction:function(){return DeleteDuplicateLinesAction},DeleteLinesAction:function(){return DeleteLinesAction},DuplicateSelectionAction:function(){return DuplicateSelectionAction},IndentLinesAction:function(){return IndentLinesAction},InsertLineAfterAction:function(){return InsertLineAfterAction},InsertLineBeforeAction:function(){return InsertLineBeforeAction},JoinLinesAction:function(){return JoinLinesAction},LowerCaseAction:function(){return LowerCaseAction},SnakeCaseAction:function(){return SnakeCaseAction},SortLinesAscendingAction:function(){return SortLinesAscendingAction},SortLinesDescendingAction:function(){return SortLinesDescendingAction},TitleCaseAction:function(){return TitleCaseAction},TransposeAction:function(){return TransposeAction},TrimTrailingWhitespaceAction:function(){return TrimTrailingWhitespaceAction},UpperCaseAction:function(){return UpperCaseAction}});var l=s(2258),d=s(2549),u=s(6830),g=s(1329),p=s(2677),m=s(9386),f=s(4314);class TrimTrailingWhitespaceCommand{constructor(e,o){this._selection=e,this._cursors=o,this._selectionId=null}getEditOperations(e,o){const s=trimTrailingWhitespace(e,this._cursors);for(let l=0,d=s.length;l<d;l++){const e=s[l];o.addEditOperation(e.range,e.text)}this._selectionId=o.trackSelection(this._selection)}computeCursorState(e,o){return o.getTrackedSelection(this._selectionId)}}function trimTrailingWhitespace(e,o){o.sort(((e,o)=>e.lineNumber===o.lineNumber?e.column-o.column:e.lineNumber-o.lineNumber));for(let g=o.length-2;g>=0;g--)o[g].lineNumber===o[g+1].lineNumber&&o.splice(g,1);const s=[];let l=0,d=0;const u=o.length;for(let g=1,_=e.getLineCount();g<=_;g++){const _=e.getLineContent(g),C=_.length+1;let b=0;if(d<u&&o[d].lineNumber===g&&(b=o[d].column,d++,b===C))continue;if(0===_.length)continue;const w=p.ow(_);let S=0;if(-1===w)S=1;else{if(w===_.length-1)continue;S=w+2}S=Math.max(b,S),s[l++]=m.h["delete"](new f.e(g,S,g,C))}return s}var _=s(4729),C=s(187),b=s(3860),w=s(9102);class CopyLinesCommand{constructor(e,o,s){this._selection=e,this._isCopyingDown=o,this._noop=s||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,o){let s=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,s.startLineNumber<s.endLineNumber&&1===s.endColumn&&(this._endLineNumberDelta=1,s=s.setEndPosition(s.endLineNumber-1,e.getLineMaxColumn(s.endLineNumber-1)));let l=[];for(let u=s.startLineNumber;u<=s.endLineNumber;u++)l.push(e.getLineContent(u));const d=l.join("\n");""===d&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?o.addEditOperation(new f.e(s.endLineNumber,e.getLineMaxColumn(s.endLineNumber),s.endLineNumber+1,1),s.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?o.addEditOperation(new f.e(s.startLineNumber,1,s.startLineNumber,1),d+"\n"):o.addEditOperation(new f.e(s.endLineNumber,e.getLineMaxColumn(s.endLineNumber),s.endLineNumber,e.getLineMaxColumn(s.endLineNumber)),"\n"+d),this._selectionId=o.trackSelection(s),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,o){let s=o.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=s.startLineNumber,o=s.startColumn,l=s.endLineNumber,d=s.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,o=1),0!==this._endLineNumberDelta&&(l+=this._endLineNumberDelta,d=1),s=b.Y.createWithDirection(e,o,l,d,this._selectionDirection)}return s}}var S=s(291),y=s(9119),L=s(5638),x=s(8279);class MoveLinesCommand{constructor(e,o,s){this._selection=e,this._isMovingDown=o,this._autoIndent=s,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,o){let s=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===s)return void(this._selectionId=o.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=o.trackSelection(this._selection));this._moveEndPositionDown=!1;let l=this._selection;l.startLineNumber<l.endLineNumber&&1===l.endColumn&&(this._moveEndPositionDown=!0,l=l.setEndPosition(l.endLineNumber-1,e.getLineMaxColumn(l.endLineNumber-1)));const{tabSize:d,indentSize:u,insertSpaces:g}=e.getOptions();let m=this.buildIndentConverter(d,u,g),_={getLineTokens:o=>e.getLineTokens(o),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(o,s)=>e.getLanguageIdAtPosition(o,s),getLineContent:null};if(l.startLineNumber===l.endLineNumber&&1===e.getLineMaxColumn(l.startLineNumber)){let s=l.startLineNumber,d=this._isMovingDown?s+1:s-1;1===e.getLineMaxColumn(d)?o.addEditOperation(new f.e(1,1,1,1),null):(o.addEditOperation(new f.e(s,1,s,1),e.getLineContent(d)),o.addEditOperation(new f.e(d,1,d,e.getLineMaxColumn(d)),null)),l=new b.Y(d,1,d,1)}else{let s,u;if(this._isMovingDown){s=l.endLineNumber+1,u=e.getLineContent(s),o.addEditOperation(new f.e(s-1,e.getLineMaxColumn(s-1),s,e.getLineMaxColumn(s)),null);let C=u;if(this.shouldAutoIndent(e,l)){let b=this.matchEnterRule(e,m,d,s,l.startLineNumber-1);if(null!==b){let o=p.V8(e.getLineContent(s)),l=b+x.Y(o,d),m=x.J(l,d,g);C=m+this.trimLeft(u)}else{_.getLineContent=o=>o===l.startLineNumber?e.getLineContent(s):e.getLineContent(o);let o=L.zu.getGoodIndentForLine(this._autoIndent,_,e.getLanguageIdAtPosition(s,1),l.startLineNumber,m);if(null!==o){let l=p.V8(e.getLineContent(s)),m=x.Y(o,d),f=x.Y(l,d);if(m!==f){let e=x.J(m,d,g);C=e+this.trimLeft(u)}}}o.addEditOperation(new f.e(l.startLineNumber,1,l.startLineNumber,1),C+"\n");let w=this.matchEnterRuleMovingDown(e,m,d,l.startLineNumber,s,C);if(null!==w)0!==w&&this.getIndentEditsOfMovingBlock(e,o,l,d,g,w);else{_.getLineContent=o=>o===l.startLineNumber?C:o>=l.startLineNumber+1&&o<=l.endLineNumber+1?e.getLineContent(o-1):e.getLineContent(o);let u=L.zu.getGoodIndentForLine(this._autoIndent,_,e.getLanguageIdAtPosition(s,1),l.startLineNumber+1,m);if(null!==u){const s=p.V8(e.getLineContent(l.startLineNumber)),m=x.Y(u,d),f=x.Y(s,d);if(m!==f){const s=m-f;this.getIndentEditsOfMovingBlock(e,o,l,d,g,s)}}}}else o.addEditOperation(new f.e(l.startLineNumber,1,l.startLineNumber,1),C+"\n")}else if(s=l.startLineNumber-1,u=e.getLineContent(s),o.addEditOperation(new f.e(s,1,s+1,1),null),o.addEditOperation(new f.e(l.endLineNumber,e.getLineMaxColumn(l.endLineNumber),l.endLineNumber,e.getLineMaxColumn(l.endLineNumber)),"\n"+u),this.shouldAutoIndent(e,l)){_.getLineContent=o=>o===s?e.getLineContent(l.startLineNumber):e.getLineContent(o);let u=this.matchEnterRule(e,m,d,l.startLineNumber,l.startLineNumber-2);if(null!==u)0!==u&&this.getIndentEditsOfMovingBlock(e,o,l,d,g,u);else{let u=L.zu.getGoodIndentForLine(this._autoIndent,_,e.getLanguageIdAtPosition(l.startLineNumber,1),s,m);if(null!==u){let s=p.V8(e.getLineContent(l.startLineNumber)),m=x.Y(u,d),f=x.Y(s,d);if(m!==f){let s=m-f;this.getIndentEditsOfMovingBlock(e,o,l,d,g,s)}}}}}this._selectionId=o.trackSelection(l)}buildIndentConverter(e,o,s){return{shiftIndent:l=>S.U.shiftIndent(l,l.length+1,e,o,s),unshiftIndent:l=>S.U.unshiftIndent(l,l.length+1,e,o,s)}}parseEnterResult(e,o,s,l,d){if(d){let u=d.indentation;d.indentAction===y.wU.None||d.indentAction===y.wU.Indent?u=d.indentation+d.appendText:d.indentAction===y.wU.IndentOutdent?u=d.indentation:d.indentAction===y.wU.Outdent&&(u=o.unshiftIndent(d.indentation)+d.appendText);let g=e.getLineContent(l);if(this.trimLeft(g).indexOf(this.trimLeft(u))>=0){let d=p.V8(e.getLineContent(l)),g=p.V8(u),m=L.zu.getIndentMetadata(e,l);null!==m&&2&m&&(g=o.unshiftIndent(g));let f=x.Y(g,s),_=x.Y(d,s);return f-_}}return null}matchEnterRuleMovingDown(e,o,s,l,d,u){if(p.ow(u)>=0){let u=e.getLineMaxColumn(d),g=L.zu.getEnterAction(this._autoIndent,e,new f.e(d,u,d,u));return this.parseEnterResult(e,o,s,l,g)}{let d=l-1;while(d>=1){let o=e.getLineContent(d),s=p.ow(o);if(s>=0)break;d--}if(d<1||l>e.getLineCount())return null;let u=e.getLineMaxColumn(d),g=L.zu.getEnterAction(this._autoIndent,e,new f.e(d,u,d,u));return this.parseEnterResult(e,o,s,l,g)}}matchEnterRule(e,o,s,l,d,u){let g=d;while(g>=1){let o;o=g===d&&void 0!==u?u:e.getLineContent(g);let s=p.ow(o);if(s>=0)break;g--}if(g<1||l>e.getLineCount())return null;let m=e.getLineMaxColumn(g),_=L.zu.getEnterAction(this._autoIndent,e,new f.e(g,m,g,m));return this.parseEnterResult(e,o,s,l,_)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,o){if(this._autoIndent<4)return!1;if(!e.isCheapToTokenize(o.startLineNumber))return!1;let s=e.getLanguageIdAtPosition(o.startLineNumber,1),l=e.getLanguageIdAtPosition(o.endLineNumber,1);return s===l&&null!==L.zu.getIndentRulesSupport(s)}getIndentEditsOfMovingBlock(e,o,s,l,d,u){for(let g=s.startLineNumber;g<=s.endLineNumber;g++){let m=e.getLineContent(g),_=p.V8(m),C=x.Y(_,l),b=C+u,w=x.J(b,l,d);w!==_&&(o.addEditOperation(new f.e(g,1,g,_.length+1),w),g===s.endLineNumber&&s.endColumn<=_.length+1&&""===w&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,o){let s=o.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(s=s.setEndPosition(s.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&s.startLineNumber<s.endLineNumber&&(s=s.setEndPosition(s.endLineNumber,2)),s}}class SortLinesCommand{constructor(e,o){this.selection=e,this.descending=o,this.selectionId=null}static getCollator(){return SortLinesCommand._COLLATOR||(SortLinesCommand._COLLATOR=new Intl.Collator),SortLinesCommand._COLLATOR}getEditOperations(e,o){let s=sortLines(e,this.selection,this.descending);s&&o.addEditOperation(s.range,s.text),this.selectionId=o.trackSelection(this.selection)}computeCursorState(e,o){return o.getTrackedSelection(this.selectionId)}static canRun(e,o,s){if(null===e)return!1;let l=getSortData(e,o,s);if(!l)return!1;for(let d=0,u=l.before.length;d<u;d++)if(l.before[d]!==l.after[d])return!0;return!1}}function getSortData(e,o,s){let l=o.startLineNumber,d=o.endLineNumber;if(1===o.endColumn&&d--,l>=d)return null;let u=[];for(let p=l;p<=d;p++)u.push(e.getLineContent(p));let g=u.slice(0);return g.sort(SortLinesCommand.getCollator().compare),!0===s&&(g=g.reverse()),{startLineNumber:l,endLineNumber:d,before:u,after:g}}function sortLines(e,o,s){let l=getSortData(e,o,s);return l?m.h.replace(new f.e(l.startLineNumber,1,l.endLineNumber,e.getLineMaxColumn(l.endLineNumber)),l.after.join("\n")):null}SortLinesCommand._COLLATOR=null;var k=s(3580),N=s(4144);class AbstractCopyLinesAction extends u.R6{constructor(e,o){super(o),this.down=e}run(e,o){if(!o.hasModel())return;const s=o.getSelections().map(((e,o)=>({selection:e,index:o,ignore:!1})));s.sort(((e,o)=>f.e.compareRangesUsingStarts(e.selection,o.selection)));let l=s[0];for(let u=1;u<s.length;u++){const e=s[u];l.selection.endLineNumber===e.selection.startLineNumber&&(l.index<e.index?e.ignore=!0:(l.ignore=!0,l=e))}const d=[];for(const u of s)d.push(new CopyLinesCommand(u.selection,this.down,u.ignore));o.pushUndoStop(),o.executeCommands(this.id,d),o.pushUndoStop()}}class CopyLinesUpAction extends AbstractCopyLinesAction{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:k.N("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:N.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class CopyLinesDownAction extends AbstractCopyLinesAction{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:k.N("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:N.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class DuplicateSelectionAction extends u.R6{constructor(){super({id:"editor.action.duplicateSelection",label:k.N("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:w.u.writable,menuOpts:{menuId:N.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,o,s){if(!o.hasModel())return;const l=[],d=o.getSelections(),u=o.getModel();for(const p of d)if(p.isEmpty())l.push(new CopyLinesCommand(p,!0));else{const e=new b.Y(p.endLineNumber,p.endColumn,p.endLineNumber,p.endColumn);l.push(new g.OY(e,u.getValueInRange(p)))}o.pushUndoStop(),o.executeCommands(this.id,l),o.pushUndoStop()}}class AbstractMoveLinesAction extends u.R6{constructor(e,o){super(o),this.down=e}run(e,o){let s=[],l=o.getSelections()||[];const d=o.getOption(9);for(const u of l)s.push(new MoveLinesCommand(u,this.down,d));o.pushUndoStop(),o.executeCommands(this.id,s),o.pushUndoStop()}}class MoveLinesUpAction extends AbstractMoveLinesAction{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:k.N("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:N.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class MoveLinesDownAction extends AbstractMoveLinesAction{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:k.N("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:N.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class AbstractSortLinesAction extends u.R6{constructor(e,o){super(o),this.descending=e}run(e,o){const s=o.getSelections()||[];for(const d of s)if(!SortLinesCommand.canRun(o.getModel(),d,this.descending))return;let l=[];for(let d=0,u=s.length;d<u;d++)l[d]=new SortLinesCommand(s[d],this.descending);o.pushUndoStop(),o.executeCommands(this.id,l),o.pushUndoStop()}}class SortLinesAscendingAction extends AbstractSortLinesAction{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:k.N("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:w.u.writable})}}class SortLinesDescendingAction extends AbstractSortLinesAction{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:k.N("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:w.u.writable})}}class DeleteDuplicateLinesAction extends u.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:k.N("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:w.u.writable})}run(e,o){if(!o.hasModel())return;let s=o.getModel();if(1===s.getLineCount()&&1===s.getLineMaxColumn(1))return;let l=[],d=[],u=0;for(let g of o.getSelections()){let e=new Set,o=[];for(let l=g.startLineNumber;l<=g.endLineNumber;l++){let d=s.getLineContent(l);e.has(d)||(o.push(d),e.add(d))}let p=new b.Y(g.startLineNumber,1,g.endLineNumber,s.getLineMaxColumn(g.endLineNumber)),f=g.startLineNumber-u,_=new b.Y(f,1,f+o.length-1,o[o.length-1].length);l.push(m.h.replace(p,o.join("\n"))),d.push(_),u+=g.endLineNumber-g.startLineNumber+1-o.length}o.pushUndoStop(),o.executeEdits(this.id,l,d),o.pushUndoStop()}}class TrimTrailingWhitespaceAction extends u.R6{constructor(){super({id:TrimTrailingWhitespaceAction.ID,label:k.N("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:(0,l.gx)(2089,2102),weight:100}})}run(e,o,s){let l=[];"auto-save"===s.reason&&(l=(o.getSelections()||[]).map((e=>new C.L(e.positionLineNumber,e.positionColumn))));let d=o.getSelection();if(null===d)return;let u=new TrimTrailingWhitespaceCommand(d,l);o.pushUndoStop(),o.executeCommands(this.id,[u]),o.pushUndoStop()}}TrimTrailingWhitespaceAction.ID="editor.action.trimTrailingWhitespace";class DeleteLinesAction extends u.R6{constructor(){super({id:"editor.action.deleteLines",label:k.N("lines.delete","Delete Line"),alias:"Delete Line",precondition:w.u.writable,kbOpts:{kbExpr:w.u.textInputFocus,primary:3113,weight:100}})}run(e,o){if(!o.hasModel())return;let s=this._getLinesToRemove(o),l=o.getModel();if(1===l.getLineCount()&&1===l.getLineMaxColumn(1))return;let d=0,u=[],g=[];for(let p=0,f=s.length;p<f;p++){const e=s[p];let o=e.startLineNumber,f=e.endLineNumber,_=1,C=l.getLineMaxColumn(f);f<l.getLineCount()?(f+=1,C=1):o>1&&(o-=1,_=l.getLineMaxColumn(o)),u.push(m.h.replace(new b.Y(o,_,f,C),"")),g.push(new b.Y(o-d,e.positionColumn,o-d,e.positionColumn)),d+=e.endLineNumber-e.startLineNumber+1}o.pushUndoStop(),o.executeEdits(this.id,u,g),o.pushUndoStop()}_getLinesToRemove(e){let o=e.getSelections().map((e=>{let o=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(o-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:o,positionColumn:e.positionColumn}}));o.sort(((e,o)=>e.startLineNumber===o.startLineNumber?e.endLineNumber-o.endLineNumber:e.startLineNumber-o.startLineNumber));let s=[],l=o[0];for(let d=1;d<o.length;d++)l.endLineNumber+1>=o[d].startLineNumber?l.endLineNumber=o[d].endLineNumber:(s.push(l),l=o[d]);return s.push(l),s}}class IndentLinesAction extends u.R6{constructor(){super({id:"editor.action.indentLines",label:k.N("lines.indent","Indent Line"),alias:"Indent Line",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:2137,weight:100}})}run(e,o){const s=o._getViewModel();s&&(o.pushUndoStop(),o.executeCommands(this.id,_.u.indent(s.cursorConfig,o.getModel(),o.getSelections())),o.pushUndoStop())}}class OutdentLinesAction extends u.R6{constructor(){super({id:"editor.action.outdentLines",label:k.N("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:2135,weight:100}})}run(e,o){d.CoreEditingCommands.Outdent.runEditorCommand(e,o,null)}}class InsertLineBeforeAction extends u.R6{constructor(){super({id:"editor.action.insertLineBefore",label:k.N("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:3075,weight:100}})}run(e,o){const s=o._getViewModel();s&&(o.pushUndoStop(),o.executeCommands(this.id,_.u.lineInsertBefore(s.cursorConfig,o.getModel(),o.getSelections())))}}class InsertLineAfterAction extends u.R6{constructor(){super({id:"editor.action.insertLineAfter",label:k.N("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:2051,weight:100}})}run(e,o){const s=o._getViewModel();s&&(o.pushUndoStop(),o.executeCommands(this.id,_.u.lineInsertAfter(s.cursorConfig,o.getModel(),o.getSelections())))}}class AbstractDeleteAllToBoundaryAction extends u.R6{run(e,o){if(!o.hasModel())return;const s=o.getSelection();let l=this._getRangesToDelete(o),d=[];for(let p=0,m=l.length-1;p<m;p++){let e=l[p],o=l[p+1];null===f.e.intersectRanges(e,o)?d.push(e):l[p+1]=f.e.plusRange(e,o)}d.push(l[l.length-1]);let u=this._getEndCursorState(s,d),g=d.map((e=>m.h.replace(e,"")));o.pushUndoStop(),o.executeEdits(this.id,g,u),o.pushUndoStop()}}class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction{constructor(){super({id:"deleteAllLeft",label:k.N("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:w.u.writable,kbOpts:{kbExpr:w.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,o){let s=null,l=[],d=0;return o.forEach((o=>{let u;if(1===o.endColumn&&d>0){let e=o.startLineNumber-d;u=new b.Y(e,o.startColumn,e,o.startColumn)}else u=new b.Y(o.startLineNumber,o.startColumn,o.startLineNumber,o.startColumn);d+=o.endLineNumber-o.startLineNumber,o.intersectRanges(e)?s=u:l.push(u)})),s&&l.unshift(s),l}_getRangesToDelete(e){let o=e.getSelections();if(null===o)return[];let s=o,l=e.getModel();return null===l?[]:(s.sort(f.e.compareRangesUsingStarts),s=s.map((e=>{if(e.isEmpty()){if(1===e.startColumn){let o=Math.max(1,e.startLineNumber-1),s=1===e.startLineNumber?1:l.getLineContent(o).length+1;return new f.e(o,s,e.startLineNumber,1)}return new f.e(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new f.e(e.startLineNumber,1,e.endLineNumber,e.endColumn)})),s)}}class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction{constructor(){super({id:"deleteAllRight",label:k.N("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:w.u.writable,kbOpts:{kbExpr:w.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,o){let s=null,l=[];for(let d=0,u=o.length,g=0;d<u;d++){let u=o[d],p=new b.Y(u.startLineNumber-g,u.startColumn,u.startLineNumber-g,u.startColumn);u.intersectRanges(e)?s=p:l.push(p)}return s&&l.unshift(s),l}_getRangesToDelete(e){let o=e.getModel();if(null===o)return[];let s=e.getSelections();if(null===s)return[];let l=s.map((e=>{if(e.isEmpty()){const s=o.getLineMaxColumn(e.startLineNumber);return e.startColumn===s?new f.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new f.e(e.startLineNumber,e.startColumn,e.startLineNumber,s)}return e}));return l.sort(f.e.compareRangesUsingStarts),l}}class JoinLinesAction extends u.R6{constructor(){super({id:"editor.action.joinLines",label:k.N("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:w.u.writable,kbOpts:{kbExpr:w.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,o){let s=o.getSelections();if(null===s)return;let l=o.getSelection();if(null===l)return;s.sort(f.e.compareRangesUsingStarts);let d=[],u=s.reduce(((e,o)=>e.isEmpty()?e.endLineNumber===o.startLineNumber?(l.equalsSelection(e)&&(l=o),o):o.startLineNumber>e.endLineNumber+1?(d.push(e),o):new b.Y(e.startLineNumber,e.startColumn,o.endLineNumber,o.endColumn):o.startLineNumber>e.endLineNumber?(d.push(e),o):new b.Y(e.startLineNumber,e.startColumn,o.endLineNumber,o.endColumn)));d.push(u);let g=o.getModel();if(null===g)return;let p=[],_=[],C=l,w=0;for(let S=0,y=d.length;S<y;S++){let e,o,s=d[S],u=s.startLineNumber,y=1,L=0,x=g.getLineContent(s.endLineNumber).length-s.endColumn;if(s.isEmpty()||s.startLineNumber===s.endLineNumber){let l=s.getStartPosition();l.lineNumber<g.getLineCount()?(e=u+1,o=g.getLineMaxColumn(e)):(e=l.lineNumber,o=g.getLineMaxColumn(l.lineNumber))}else e=s.endLineNumber,o=g.getLineMaxColumn(e);let k=g.getLineContent(u);for(let l=u+1;l<=e;l++){let e=g.getLineContent(l),o=g.getLineFirstNonWhitespaceColumn(l);if(o>=1){let s=!0;""===k&&(s=!1),!s||" "!==k.charAt(k.length-1)&&"\t"!==k.charAt(k.length-1)||(s=!1,k=k.replace(/[\s\uFEFF\xA0]+$/g," "));let l=e.substr(o-1);k+=(s?" ":"")+l,L=s?l.length+1:l.length}else L=0}let N=new f.e(u,y,e,o);if(!N.isEmpty()){let e;s.isEmpty()?(p.push(m.h.replace(N,k)),e=new b.Y(N.startLineNumber-w,k.length-L+1,u-w,k.length-L+1)):s.startLineNumber===s.endLineNumber?(p.push(m.h.replace(N,k)),e=new b.Y(s.startLineNumber-w,s.startColumn,s.endLineNumber-w,s.endColumn)):(p.push(m.h.replace(N,k)),e=new b.Y(s.startLineNumber-w,s.startColumn,s.startLineNumber-w,k.length-x)),null!==f.e.intersectRanges(N,l)?C=e:_.push(e)}w+=N.endLineNumber-N.startLineNumber}_.unshift(C),o.pushUndoStop(),o.executeEdits(this.id,p,_),o.pushUndoStop()}}class TransposeAction extends u.R6{constructor(){super({id:"editor.action.transpose",label:k.N("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:w.u.writable})}run(e,o){let s=o.getSelections();if(null===s)return;let l=o.getModel();if(null===l)return;let d=[];for(let u=0,p=s.length;u<p;u++){let e=s[u];if(!e.isEmpty())continue;let o=e.getStartPosition(),p=l.getLineMaxColumn(o.lineNumber);if(o.column>=p){if(o.lineNumber===l.getLineCount())continue;let e=new f.e(o.lineNumber,Math.max(1,o.column-1),o.lineNumber+1,1),s=l.getValueInRange(e).split("").reverse().join("");d.push(new g.T4(new b.Y(o.lineNumber,Math.max(1,o.column-1),o.lineNumber+1,1),s))}else{let e=new f.e(o.lineNumber,Math.max(1,o.column-1),o.lineNumber,o.column+1),s=l.getValueInRange(e).split("").reverse().join("");d.push(new g.hP(e,s,new b.Y(o.lineNumber,o.column+1,o.lineNumber,o.column+1)))}}o.pushUndoStop(),o.executeCommands(this.id,d),o.pushUndoStop()}}class AbstractCaseAction extends u.R6{run(e,o){const s=o.getSelections();if(null===s)return;const l=o.getModel();if(null===l)return;const d=o.getOption(117),u=[];for(const g of s)if(g.isEmpty()){const e=g.getStartPosition(),s=o.getConfiguredWordAtPosition(e);if(!s)continue;const p=new f.e(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn),_=l.getValueInRange(p);u.push(m.h.replace(p,this._modifyText(_,d)))}else{const e=l.getValueInRange(g);u.push(m.h.replace(g,this._modifyText(e,d)))}o.pushUndoStop(),o.executeEdits(this.id,u),o.pushUndoStop()}}class UpperCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToUppercase",label:k.N("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:w.u.writable})}_modifyText(e,o){return e.toLocaleUpperCase()}}class LowerCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToLowercase",label:k.N("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:w.u.writable})}_modifyText(e,o){return e.toLocaleLowerCase()}}class BackwardsCompatibleRegExp{constructor(e,o){this._pattern=e,this._flags=o,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}}class TitleCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToTitlecase",label:k.N("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:w.u.writable})}_modifyText(e,o){const s=TitleCaseAction.titleBoundary.get();return s?e.toLocaleLowerCase().replace(s,(e=>e.toLocaleUpperCase())):e}}TitleCaseAction.titleBoundary=new BackwardsCompatibleRegExp("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class SnakeCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToSnakecase",label:k.N("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:w.u.writable})}_modifyText(e,o){const s=SnakeCaseAction.caseBoundary.get(),l=SnakeCaseAction.singleLetters.get();return s&&l?e.replace(s,"$1_$2").replace(l,"$1_$2$3").toLocaleLowerCase():e}}SnakeCaseAction.caseBoundary=new BackwardsCompatibleRegExp("(\\p{Ll})(\\p{Lu})","gmu"),SnakeCaseAction.singleLetters=new BackwardsCompatibleRegExp("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu"),(0,u.Qr)(CopyLinesUpAction),(0,u.Qr)(CopyLinesDownAction),(0,u.Qr)(DuplicateSelectionAction),(0,u.Qr)(MoveLinesUpAction),(0,u.Qr)(MoveLinesDownAction),(0,u.Qr)(SortLinesAscendingAction),(0,u.Qr)(SortLinesDescendingAction),(0,u.Qr)(DeleteDuplicateLinesAction),(0,u.Qr)(TrimTrailingWhitespaceAction),(0,u.Qr)(DeleteLinesAction),(0,u.Qr)(IndentLinesAction),(0,u.Qr)(OutdentLinesAction),(0,u.Qr)(InsertLineBeforeAction),(0,u.Qr)(InsertLineAfterAction),(0,u.Qr)(DeleteAllLeftAction),(0,u.Qr)(DeleteAllRightAction),(0,u.Qr)(JoinLinesAction),(0,u.Qr)(TransposeAction),(0,u.Qr)(UpperCaseAction),(0,u.Qr)(LowerCaseAction),SnakeCaseAction.caseBoundary.isSupported()&&SnakeCaseAction.singleLetters.isSupported()&&(0,u.Qr)(SnakeCaseAction),TitleCaseAction.titleBoundary.isSupported()&&(0,u.Qr)(TitleCaseAction)},76:function(e,o,s){"use strict";s.r(o),s.d(o,{CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE:function(){return R},LinkedEditingAction:function(){return LinkedEditingAction},LinkedEditingContribution:function(){return O},editorLinkedEditingBackground:function(){return B}});var l=s(9488),d=s(5393),u=s(1050),g=s(1264),p=s(7301),m=s(4669),f=s(5976),_=s(2677),C=s(666),b=s(6830),w=s(1640),S=s(187),y=s(4314),L=s(9102),x=s(2822),k=s(5638),N=s(3580),D=s(8819),E=s(3910),T=s(7781),I=s(1922),A=s(8191),M=s(4013),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const R=new D.uy("LinkedEditingInputVisible",!1),P="linked-editing-decoration";let O=class LinkedEditingContribution extends f.JT{constructor(e,o,s,l,d){super(),this.languageConfigurationService=l,this._localToDispose=this._register(new f.SL),this._editor=e,this._providers=s.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=R.bindTo(o),this._debounceInformation=d.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new f.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(62)||e.hasChanged(82))&&this.reinitialize(!1)}))),this._register(this._providers.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}static get(e){return e.getContribution(LinkedEditingContribution.ID)}reinitialize(e){const o=this._editor.getModel(),s=null!==o&&(this._editor.getOption(62)||this._editor.getOption(82))&&this._providers.has(o);if(s===this._enabled&&!e)return;if(this._enabled=s,this.clearRanges(),this._localToDispose.clear(),!s||null===o)return;this._localToDispose.add(m.ju.runAndSubscribe(o.onDidChangeLanguageConfiguration,(()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId()).getWordDefinition()})));const l=new d.vp(this._debounceInformation.get(o)),triggerRangeUpdate=()=>{var e;this._rangeUpdateTriggerPromise=l.trigger((()=>this.updateRanges()),null!==(e=this._debounceDuration)&&void 0!==e?e:this._debounceInformation.get(o))},u=new d.vp(0),triggerRangeSync=e=>{this._rangeSyncTriggerPromise=u.trigger((()=>this._syncRanges(e)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{triggerRangeUpdate()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const s=o.getDecorationRange(this._currentDecorations[0]);if(s&&e.changes.every((e=>s.intersectRanges(e.range))))return void triggerRangeSync(this._currentDecorations)}triggerRangeUpdate()}))),this._localToDispose.add({dispose:()=>{l.dispose(),u.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||0===e.length)return;const o=this._editor.getModel(),s=o.getDecorationRange(e[0]);if(!s||s.startLineNumber!==s.endLineNumber)return this.clearRanges();const l=o.getValueInRange(s);if(this._currentWordPattern){const e=l.match(this._currentWordPattern),o=e?e[0].length:0;if(o!==l.length)return this.clearRanges()}let d=[];for(let u=1,g=e.length;u<g;u++){const s=o.getDecorationRange(e[u]);if(s)if(s.startLineNumber!==s.endLineNumber)d.push({range:s,text:l});else{let e=o.getValueInRange(s),u=l,g=s.startColumn,p=s.endColumn;const m=_.Mh(e,u);g+=m,e=e.substr(m),u=u.substr(m);const f=_.P1(e,u);p-=f,e=e.substr(0,e.length-f),u=u.substr(0,u.length-f),g===p&&0===u.length||d.push({range:new y.e(s.startLineNumber,g,s.endLineNumber,p),text:u})}}if(0!==d.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",d),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return __awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return void this.clearRanges();const o=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1)return void this.clearRanges();const s=this._editor.getModel(),l=s.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===l){if(o.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const e=s.getDecorationRange(this._currentDecorations[0]);if(e&&e.containsPosition(o))return}}this._currentRequestPosition=o,this._currentRequestModelVersion=l;const u=(0,d.PG)((e=>__awaiter(this,void 0,void 0,(function*(){try{const d=new M.G(!1),g=yield getLinkedEditingRanges(this._providers,s,o,e);if(this._debounceInformation.update(s,d.elapsed()),u!==this._currentRequest)return;if(this._currentRequest=null,l!==s.getVersionId())return;let p=[];(null===g||void 0===g?void 0:g.ranges)&&(p=g.ranges),this._currentWordPattern=(null===g||void 0===g?void 0:g.wordPattern)||this._languageWordPattern;let m=!1;for(let e=0,s=p.length;e<s;e++)if(y.e.containsPosition(p[e],o)){if(m=!0,0!==e){const o=p[e];p.splice(e,1),p.unshift(o)}break}if(!m)return void this.clearRanges();const f=p.map((e=>({range:e,options:LinkedEditingContribution.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,f)}catch(d){(0,p.n2)(d)||(0,p.dL)(d),this._currentRequest!==u&&this._currentRequest||this.clearRanges()}}))));return this._currentRequest=u,u}))}};O.ID="editor.contrib.linkedEditing",O.DECORATION=x.qx.register({description:"linked-editing",stickiness:0,className:P}),O=__decorate([__param(1,D.i6),__param(2,I.p),__param(3,k.c_),__param(4,A.A)],O);class LinkedEditingAction extends b.R6{constructor(){super({id:"editor.action.linkedEditing",label:N.N("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:D.Ao.and(L.u.writable,L.u.hasRenameProvider),kbOpts:{kbExpr:L.u.editorTextFocus,primary:3132,weight:100}})}runCommand(e,o){const s=e.get(w.$),[l,d]=Array.isArray(o)&&o||[void 0,void 0];return C.o.isUri(l)&&S.L.isIPosition(d)?s.openCodeEditor({resource:l},s.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(d),e.invokeWithinContext((o=>(this.reportTelemetry(o,e),this.run(o,e)))))}),p.dL):super.runCommand(e,o)}run(e,o){const s=O.get(o);return s?Promise.resolve(s.updateRanges(!0)):Promise.resolve()}}const F=b._l.bindToContribution(O.get);function getLinkedEditingRanges(e,o,s,u){const g=e.ordered(o);return(0,d.Ps)(g.map((e=>()=>__awaiter(this,void 0,void 0,(function*(){try{return yield e.provideLinkedEditingRanges(o,s,u)}catch(l){return void(0,p.Cp)(l)}})))),(e=>!!e&&l.Of(null===e||void 0===e?void 0:e.ranges)))}(0,b.fK)(new F({id:"cancelLinkedEditingInput",precondition:R,handler:e=>e.clearRanges(),kbOpts:{kbExpr:L.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));const B=(0,E.P6G)("editor.linkedEditingBackground",{dark:g.Il.fromHex("#f00").transparent(.3),light:g.Il.fromHex("#f00").transparent(.3),hc:g.Il.fromHex("#f00").transparent(.3)},N.N("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,T.Ic)(((e,o)=>{const s=e.getColor(B);s&&o.addRule(`.monaco-editor .${P} { background: ${s}; border-left-color: ${s}; }`)})),(0,b.sb)("_executeLinkedEditingProvider",((e,o,s)=>{const{linkedEditingRangeProvider:l}=e.get(I.p);return getLinkedEditingRanges(l,o,s,u.T.None)})),(0,b._K)(O.ID,O),(0,b.Qr)(LinkedEditingAction)},8408:function(e,o,s){"use strict";s.r(o),s.d(o,{LinkDetector:function(){return O}});var l=s(5393),d=s(1050),u=s(7301),g=s(9365),p=s(5976),m=s(6663),f=s(1432),_=s(5935),C=s(4013),b=s(666),w=s(6830),S=s(2822),y=s(8191),L=s(1922),x=s(2005),k=s(9488),N=s(8401),D=s(4314),E=s(3733),T=s(4565),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class Link{constructor(e,o){this._link=e,this._provider=o}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return __awaiter(this,void 0,void 0,(function*(){return this._link.url?this._link.url:"function"===typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,e)).then((o=>(this._link=o||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing"))))):Promise.reject(new Error("missing"))}))}}class LinksList{constructor(e){this._disposables=new p.SL;let o=[];for(const[s,l]of e){const e=s.links.map((e=>new Link(e,l)));o=LinksList._union(o,e),(0,p.Wf)(s)&&this._disposables.add(s)}this.links=o}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,o){let s,l,d,u,g=[];for(s=0,d=0,l=e.length,u=o.length;s<l&&d<u;){const l=e[s],u=o[d];if(D.e.areIntersectingOrTouching(l.range,u.range)){s++;continue}const p=D.e.compareRangesUsingStarts(l.range,u.range);p<0?(g.push(l),s++):(g.push(u),d++)}for(;s<l;s++)g.push(e[s]);for(;d<u;d++)g.push(o[d]);return g}}function getLinks(e,o,s){const l=[],d=e.ordered(o).reverse().map(((e,d)=>Promise.resolve(e.provideLinks(o,s)).then((o=>{o&&(l[d]=[o,e])}),u.Cp)));return Promise.all(d).then((()=>{const e=new LinksList((0,k.kX)(l));return s.isCancellationRequested?(e.dispose(),new LinksList([])):e}))}T.P0.registerCommand("_executeLinkProvider",((e,...o)=>__awaiter(void 0,void 0,void 0,(function*(){let[s,l]=o;(0,N.p_)(s instanceof b.o),"number"!==typeof l&&(l=0);const{linkProvider:u}=e.get(L.p),g=e.get(E.q).getModel(s);if(!g)return[];const p=yield getLinks(u,g,d.T.None);if(!p)return[];for(let e=0;e<Math.min(l,p.links.length);e++)yield p.links[e].resolve(d.T.None);const m=p.links.slice(0);return p.dispose(),m}))));var I=s(3580),A=s(9422),M=s(988),R=s(3910),P=s(7781),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},links_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let O=class LinkDetector extends p.JT{constructor(e,o,s,d,u){super(),this.editor=e,this.openerService=o,this.notificationService=s,this.languageFeaturesService=d,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=u.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new l.pY((()=>this.computeLinksNow()),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const g=this._register(new x.yN(e));this._register(g.onMouseMoveOrRelevantKeyDown((([e,o])=>{this._onEditorMouseMove(e,o)}))),this._register(g.onExecute((e=>{this.onEditorMouseUp(e)}))),this._register(g.onCancel((e=>{this.cleanUpActiveLinkDecoration()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(63)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))}))),this._register(e.onDidChangeModelContent((e=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))}))),this._register(e.onDidChangeModel((e=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)}))),this._register(e.onDidChangeModelLanguage((e=>{this.stop(),this.computeLinks.schedule(0)}))),this._register(this.providers.onDidChange((e=>{this.stop(),this.computeLinks.schedule(0)}))),this.computeLinks.schedule(0)}static get(e){return e.getContribution(LinkDetector.ID)}computeLinksNow(){return links_awaiter(this,void 0,void 0,(function*(){if(!this.editor.hasModel()||!this.editor.getOption(63))return;const e=this.editor.getModel();if(this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,l.PG)((o=>getLinks(this.providers,e,o)));try{const o=new C.G(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,o.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(o){(0,u.dL)(o)}finally{this.computePromise=null}}}))}updateDecorations(e){const o="altKey"===this.editor.getOption(70),s=[],l=Object.keys(this.currentOccurrences);for(const g of l){const e=this.currentOccurrences[g];s.push(e.decorationId)}const d=[];if(e)for(const g of e)d.push(LinkOccurrence.decoration(g,o));const u=this.editor.deltaDecorations(s,d);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let g=0,p=u.length;g<p;g++){const o=new LinkOccurrence(e[g],u[g]);this.currentOccurrences[o.decorationId]=o}}_onEditorMouseMove(e,o){const s="altKey"===this.editor.getOption(70);if(this.isEnabled(e,o)){this.cleanUpActiveLinkDecoration();const o=this.getLinkOccurrence(e.target.position);o&&this.editor.changeDecorations((e=>{o.activate(e,s),this.activeLinkDecorationId=o.decorationId}))}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e="altKey"===this.editor.getOption(70);if(this.activeLinkDecorationId){const o=this.currentOccurrences[this.activeLinkDecorationId];o&&this.editor.changeDecorations((s=>{o.deactivate(s,e)})),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const o=this.getLinkOccurrence(e.target.position);o&&this.openLinkOccurrence(o,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,o,s=!1){if(!this.openerService)return;const{link:l}=e;l.resolve(d.T.None).then((e=>{if("string"===typeof e&&this.editor.hasModel()){const o=this.editor.getModel().uri;if(o.scheme===m.lg.file&&e.startsWith(`${m.lg.file}:`)){const s=b.o.parse(e);if(s.scheme===m.lg.file){const l=_.z_(s);let d=null;l.startsWith("/./")?d=`.${l.substr(1)}`:l.startsWith("//./")&&(d=`.${l.substr(2)}`),d&&(e=_.Vo(o,d))}}}return this.openerService.open(e,{openToSide:o,fromUserGesture:s,allowContributedOpeners:!0,allowCommands:!0})}),(e=>{const o=e instanceof Error?e.message:e;"invalid"===o?this.notificationService.warn(I.N("invalid.url","Failed to open this link because it is not well-formed: {0}",l.url.toString())):"missing"===o?this.notificationService.warn(I.N("missing.url","Failed to open this link because its target is missing.")):(0,u.dL)(e)}))}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const o=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const s of o){const e=this.currentOccurrences[s.id];if(e)return e}return null}isEnabled(e,o){return Boolean(6===e.target.type&&(e.hasTriggerModifier||o&&o.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};O.ID="editor.linkDetector",O=__decorate([__param(1,M.v4),__param(2,A.lT),__param(3,L.p),__param(4,y.A)],O);const F={general:S.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:S.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class LinkOccurrence{constructor(e,o){this.link=e,this.decorationId=o}static decoration(e,o){return{range:e.range,options:LinkOccurrence._getOptions(e,o,!1)}}static _getOptions(e,o,s){const l=Object.assign({},s?F.active:F.general);return l.hoverMessage=getHoverMessage(e,o),l}activate(e,o){e.changeDecorationOptions(this.decorationId,LinkOccurrence._getOptions(this.link,o,!0))}deactivate(e,o){e.changeDecorationOptions(this.decorationId,LinkOccurrence._getOptions(this.link,o,!1))}}function getHoverMessage(e,o){const s=e.url&&/^command:/i.test(e.url.toString()),l=e.tooltip?e.tooltip:s?I.N("links.navigate.executeCmd","Execute command"):I.N("links.navigate.follow","Follow link"),d=o?f.dz?I.N("links.navigate.kb.meta.mac","cmd + click"):I.N("links.navigate.kb.meta","ctrl + click"):f.dz?I.N("links.navigate.kb.alt.mac","option + click"):I.N("links.navigate.kb.alt","alt + click");if(e.url){let o="";if(/^command:/i.test(e.url.toString())){const s=e.url.toString().match(/^command:([^?#]+)/);if(s){const e=s[1],l=I.N("tooltip.explanation","Execute command {0}",e);o=` "${l}"`}}const s=new g.W5("",!0).appendMarkdown(`[${l}](${e.url.toString(!0).replace(/ /g,"%20")}${o}) (${d})`);return s}return(new g.W5).appendText(`${l} (${d})`)}class OpenLinkAction extends w.R6{constructor(){super({id:"editor.action.openLink",label:I.N("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,o){const s=O.get(o);if(!s)return;if(!o.hasModel())return;const l=o.getSelections();for(const d of l){const e=s.getLinkOccurrence(d.getEndPosition());e&&s.openLinkOccurrence(e,!1)}}}(0,w._K)(O.ID,O),(0,w.Qr)(OpenLinkAction),(0,P.Ic)(((e,o)=>{const s=e.getColor(R._Yy);s&&o.addRule(`.monaco-editor .detected-link-active { color: ${s} !important; }`)}))},5831:function(e,o,s){"use strict";s.d(o,{$:function(){return Ie}});var l=s(5321);
/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */
function _toConsumableArray(e){if(Array.isArray(e)){for(var o=0,s=Array(e.length);o<e.length;o++)s[o]=e[o];return s}return Array.from(e)}var d=Object.hasOwnProperty,u=Object.setPrototypeOf,g=Object.isFrozen,p=Object.getPrototypeOf,m=Object.getOwnPropertyDescriptor,f=Object.freeze,_=Object.seal,C=Object.create,b="undefined"!==typeof Reflect&&Reflect,w=b.apply,S=b.construct;w||(w=function apply(e,o,s){return e.apply(o,s)}),f||(f=function freeze(e){return e}),_||(_=function seal(e){return e}),S||(S=function construct(e,o){return new(Function.prototype.bind.apply(e,[null].concat(_toConsumableArray(o))))});var y=unapply(Array.prototype.forEach),L=unapply(Array.prototype.pop),x=unapply(Array.prototype.push),k=unapply(String.prototype.toLowerCase),N=unapply(String.prototype.match),D=unapply(String.prototype.replace),E=unapply(String.prototype.indexOf),T=unapply(String.prototype.trim),I=unapply(RegExp.prototype.test),A=unconstruct(TypeError);function unapply(e){return function(o){for(var s=arguments.length,l=Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];return w(e,o,l)}}function unconstruct(e){return function(){for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return S(e,s)}}function addToSet(e,o){u&&u(e,null);var s=o.length;while(s--){var l=o[s];if("string"===typeof l){var d=k(l);d!==l&&(g(o)||(o[s]=d),l=d)}e[l]=!0}return e}function clone(e){var o=C(null),s=void 0;for(s in e)w(d,e,[s])&&(o[s]=e[s]);return o}function lookupGetter(e,o){while(null!==e){var s=m(e,o);if(s){if(s.get)return unapply(s.get);if("function"===typeof s.value)return unapply(s.value)}e=p(e)}function fallbackValue(e){return console.warn("fallback value for",e),null}return fallbackValue}var M=f(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=f(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=f(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=f(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F=f(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),B=f(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),W=f(["#text"]),V=f(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),H=f(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z=f(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),U=f(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K=_(/\{\{[\s\S]*|[\s\S]*\}\}/gm),j=_(/<%[\s\S]*|[\s\S]*%>/gm),G=_(/^data-[\-\w.\u00B7-\uFFFF]/),q=_(/^aria-[\-\w]+$/),Q=_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=_(/^(?:\w+script|data):/i),Y=_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray$1(e){if(Array.isArray(e)){for(var o=0,s=Array(e.length);o<e.length;o++)s[o]=e[o];return s}return Array.from(e)}var X=function getGlobal(){return"undefined"===typeof window?null:window},ee=function _createTrustedTypesPolicy(e,o){if("object"!==("undefined"===typeof e?"undefined":J(e))||"function"!==typeof e.createPolicy)return null;var s=null,l="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(l)&&(s=o.currentScript.getAttribute(l));var d="dompurify"+(s?"#"+s:"");try{return e.createPolicy(d,{createHTML:function createHTML(e){return e}})}catch(u){return console.warn("TrustedTypes policy "+d+" could not be created."),null}};function createDOMPurify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X(),o=function DOMPurify(e){return createDOMPurify(e)};if(o.version="2.3.1",o.removed=[],!e||!e.document||9!==e.document.nodeType)return o.isSupported=!1,o;var s=e.document,l=e.document,d=e.DocumentFragment,u=e.HTMLTemplateElement,g=e.Node,p=e.Element,m=e.NodeFilter,_=e.NamedNodeMap,C=void 0===_?e.NamedNodeMap||e.MozNamedAttrMap:_,b=e.Text,w=e.Comment,S=e.DOMParser,te=e.trustedTypes,ie=p.prototype,ne=lookupGetter(ie,"cloneNode"),oe=lookupGetter(ie,"nextSibling"),se=lookupGetter(ie,"childNodes"),re=lookupGetter(ie,"parentNode");if("function"===typeof u){var ae=l.createElement("template");ae.content&&ae.content.ownerDocument&&(l=ae.content.ownerDocument)}var le=ee(te,s),ce=le&&He?le.createHTML(""):"",de=l,he=de.implementation,ue=de.createNodeIterator,ge=de.createDocumentFragment,pe=de.getElementsByTagName,me=s.importNode,fe={};try{fe=clone(l).documentMode?l.documentMode:{}}catch(St){}var _e={};o.isSupported="function"===typeof re&&he&&"undefined"!==typeof he.createHTMLDocument&&9!==fe;var Ce=K,ve=j,be=G,we=q,Se=Z,ye=Y,Le=Q,xe=null,ke=addToSet({},[].concat(_toConsumableArray$1(M),_toConsumableArray$1(R),_toConsumableArray$1(P),_toConsumableArray$1(F),_toConsumableArray$1(W))),Ne=null,De=addToSet({},[].concat(_toConsumableArray$1(V),_toConsumableArray$1(H),_toConsumableArray$1(z),_toConsumableArray$1(U))),Ee=null,Te=null,Ie=!0,Ae=!0,Me=!1,Re=!1,Pe=!1,Oe=!1,Fe=!1,Be=!1,We=!1,Ve=!0,He=!1,ze=!0,Ue=!0,Ke=!1,je={},$e=null,Ge=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qe=null,Qe=addToSet({},["audio","video","img","source","image","track"]),Ze=null,Ye=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml",tt=et,it=!1,nt=null,ot=l.createElement("form"),st=function _parseConfig(e){nt&&nt===e||(e&&"object"===("undefined"===typeof e?"undefined":J(e))||(e={}),e=clone(e),xe="ALLOWED_TAGS"in e?addToSet({},e.ALLOWED_TAGS):ke,Ne="ALLOWED_ATTR"in e?addToSet({},e.ALLOWED_ATTR):De,Ze="ADD_URI_SAFE_ATTR"in e?addToSet(clone(Ye),e.ADD_URI_SAFE_ATTR):Ye,qe="ADD_DATA_URI_TAGS"in e?addToSet(clone(Qe),e.ADD_DATA_URI_TAGS):Qe,$e="FORBID_CONTENTS"in e?addToSet({},e.FORBID_CONTENTS):Ge,Ee="FORBID_TAGS"in e?addToSet({},e.FORBID_TAGS):{},Te="FORBID_ATTR"in e?addToSet({},e.FORBID_ATTR):{},je="USE_PROFILES"in e&&e.USE_PROFILES,Ie=!1!==e.ALLOW_ARIA_ATTR,Ae=!1!==e.ALLOW_DATA_ATTR,Me=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=e.SAFE_FOR_TEMPLATES||!1,Pe=e.WHOLE_DOCUMENT||!1,Be=e.RETURN_DOM||!1,We=e.RETURN_DOM_FRAGMENT||!1,Ve=!1!==e.RETURN_DOM_IMPORT,He=e.RETURN_TRUSTED_TYPE||!1,Fe=e.FORCE_BODY||!1,ze=!1!==e.SANITIZE_DOM,Ue=!1!==e.KEEP_CONTENT,Ke=e.IN_PLACE||!1,Le=e.ALLOWED_URI_REGEXP||Le,tt=e.NAMESPACE||et,Re&&(Ae=!1),We&&(Be=!0),je&&(xe=addToSet({},[].concat(_toConsumableArray$1(W))),Ne=[],!0===je.html&&(addToSet(xe,M),addToSet(Ne,V)),!0===je.svg&&(addToSet(xe,R),addToSet(Ne,H),addToSet(Ne,U)),!0===je.svgFilters&&(addToSet(xe,P),addToSet(Ne,H),addToSet(Ne,U)),!0===je.mathMl&&(addToSet(xe,F),addToSet(Ne,z),addToSet(Ne,U))),e.ADD_TAGS&&(xe===ke&&(xe=clone(xe)),addToSet(xe,e.ADD_TAGS)),e.ADD_ATTR&&(Ne===De&&(Ne=clone(Ne)),addToSet(Ne,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&addToSet(Ze,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&($e===Ge&&($e=clone($e)),addToSet($e,e.FORBID_CONTENTS)),Ue&&(xe["#text"]=!0),Pe&&addToSet(xe,["html","head","body"]),xe.table&&(addToSet(xe,["tbody"]),delete Ee.tbody),f&&f(e),nt=e)},rt=addToSet({},["mi","mo","mn","ms","mtext"]),at=addToSet({},["foreignobject","desc","title","annotation-xml"]),lt=addToSet({},R);addToSet(lt,P),addToSet(lt,O);var ct=addToSet({},F);addToSet(ct,B);var dt=function _checkValidNamespace(e){var o=re(e);o&&o.tagName||(o={namespaceURI:et,tagName:"template"});var s=k(e.tagName),l=k(o.tagName);if(e.namespaceURI===Xe)return o.namespaceURI===et?"svg"===s:o.namespaceURI===Je?"svg"===s&&("annotation-xml"===l||rt[l]):Boolean(lt[s]);if(e.namespaceURI===Je)return o.namespaceURI===et?"math"===s:o.namespaceURI===Xe?"math"===s&&at[l]:Boolean(ct[s]);if(e.namespaceURI===et){if(o.namespaceURI===Xe&&!at[l])return!1;if(o.namespaceURI===Je&&!rt[l])return!1;var d=addToSet({},["title","style","font","a","script"]);return!ct[s]&&(d[s]||!lt[s])}return!1},ht=function _forceRemove(e){x(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch(St){try{e.outerHTML=ce}catch(St){e.remove()}}},ut=function _removeAttribute(e,s){try{x(o.removed,{attribute:s.getAttributeNode(e),from:s})}catch(St){x(o.removed,{attribute:null,from:s})}if(s.removeAttribute(e),"is"===e&&!Ne[e])if(Be||We)try{ht(s)}catch(St){}else try{s.setAttribute(e,"")}catch(St){}},gt=function _initDocument(e){var o=void 0,s=void 0;if(Fe)e="<remove></remove>"+e;else{var d=N(e,/^[\r\n\t ]+/);s=d&&d[0]}var u=le?le.createHTML(e):e;if(tt===et)try{o=(new S).parseFromString(u,"text/html")}catch(St){}if(!o||!o.documentElement){o=he.createDocument(tt,"template",null);try{o.documentElement.innerHTML=it?"":u}catch(St){}}var g=o.body||o.documentElement;return e&&s&&g.insertBefore(l.createTextNode(s),g.childNodes[0]||null),tt===et?pe.call(o,Pe?"html":"body")[0]:Pe?o.documentElement:g},pt=function _createIterator(e){return ue.call(e.ownerDocument||e,e,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},mt=function _isClobbered(e){return!(e instanceof b||e instanceof w)&&!("string"===typeof e.nodeName&&"string"===typeof e.textContent&&"function"===typeof e.removeChild&&e.attributes instanceof C&&"function"===typeof e.removeAttribute&&"function"===typeof e.setAttribute&&"string"===typeof e.namespaceURI&&"function"===typeof e.insertBefore)},ft=function _isNode(e){return"object"===("undefined"===typeof g?"undefined":J(g))?e instanceof g:e&&"object"===("undefined"===typeof e?"undefined":J(e))&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},_t=function _executeHook(e,s,l){_e[e]&&y(_e[e],(function(e){e.call(o,s,l,nt)}))},Ct=function _sanitizeElements(e){var s=void 0;if(_t("beforeSanitizeElements",e,null),mt(e))return ht(e),!0;if(N(e.nodeName,/[\u0080-\uFFFF]/))return ht(e),!0;var l=k(e.nodeName);if(_t("uponSanitizeElement",e,{tagName:l,allowedTags:xe}),!ft(e.firstElementChild)&&(!ft(e.content)||!ft(e.content.firstElementChild))&&I(/<[/\w]/g,e.innerHTML)&&I(/<[/\w]/g,e.textContent))return ht(e),!0;if("select"===l&&I(/<template/i,e.innerHTML))return ht(e),!0;if(!xe[l]||Ee[l]){if(Ue&&!$e[l]){var d=re(e)||e.parentNode,u=se(e)||e.childNodes;if(u&&d)for(var g=u.length,m=g-1;m>=0;--m)d.insertBefore(ne(u[m],!0),oe(e))}return ht(e),!0}return e instanceof p&&!dt(e)?(ht(e),!0):"noscript"!==l&&"noembed"!==l||!I(/<\/no(script|embed)/i,e.innerHTML)?(Re&&3===e.nodeType&&(s=e.textContent,s=D(s,Ce," "),s=D(s,ve," "),e.textContent!==s&&(x(o.removed,{element:e.cloneNode()}),e.textContent=s)),_t("afterSanitizeElements",e,null),!1):(ht(e),!0)},vt=function _isValidAttribute(e,o,s){if(ze&&("id"===o||"name"===o)&&(s in l||s in ot))return!1;if(Ae&&!Te[o]&&I(be,o));else if(Ie&&I(we,o));else{if(!Ne[o]||Te[o])return!1;if(Ze[o]);else if(I(Le,D(s,ye,"")));else if("src"!==o&&"xlink:href"!==o&&"href"!==o||"script"===e||0!==E(s,"data:")||!qe[e]){if(Me&&!I(Se,D(s,ye,"")));else if(s)return!1}else;}return!0},bt=function _sanitizeAttributes(e){var s=void 0,l=void 0,d=void 0,u=void 0;_t("beforeSanitizeAttributes",e,null);var g=e.attributes;if(g){var p={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ne};u=g.length;while(u--){s=g[u];var m=s,f=m.name,_=m.namespaceURI;if(l=T(s.value),d=k(f),p.attrName=d,p.attrValue=l,p.keepAttr=!0,p.forceKeepAttr=void 0,_t("uponSanitizeAttribute",e,p),l=p.attrValue,!p.forceKeepAttr&&(ut(f,e),p.keepAttr))if(I(/\/>/i,l))ut(f,e);else{Re&&(l=D(l,Ce," "),l=D(l,ve," "));var C=e.nodeName.toLowerCase();if(vt(C,d,l))try{_?e.setAttributeNS(_,f,l):e.setAttribute(f,l),L(o.removed)}catch(St){}}}_t("afterSanitizeAttributes",e,null)}},wt=function _sanitizeShadowDOM(e){var o=void 0,s=pt(e);_t("beforeSanitizeShadowDOM",e,null);while(o=s.nextNode())_t("uponSanitizeShadowNode",o,null),Ct(o)||(o.content instanceof d&&_sanitizeShadowDOM(o.content),bt(o));_t("afterSanitizeShadowDOM",e,null)};return o.sanitize=function(l,u){var p=void 0,m=void 0,f=void 0,_=void 0,C=void 0;if(it=!l,it&&(l="\x3c!--\x3e"),"string"!==typeof l&&!ft(l)){if("function"!==typeof l.toString)throw A("toString is not a function");if(l=l.toString(),"string"!==typeof l)throw A("dirty is not a string, aborting")}if(!o.isSupported){if("object"===J(e.toStaticHTML)||"function"===typeof e.toStaticHTML){if("string"===typeof l)return e.toStaticHTML(l);if(ft(l))return e.toStaticHTML(l.outerHTML)}return l}if(Oe||st(u),o.removed=[],"string"===typeof l&&(Ke=!1),Ke);else if(l instanceof g)p=gt("\x3c!----\x3e"),m=p.ownerDocument.importNode(l,!0),1===m.nodeType&&"BODY"===m.nodeName||"HTML"===m.nodeName?p=m:p.appendChild(m);else{if(!Be&&!Re&&!Pe&&-1===l.indexOf("<"))return le&&He?le.createHTML(l):l;if(p=gt(l),!p)return Be?null:ce}p&&Fe&&ht(p.firstChild);var b=pt(Ke?l:p);while(f=b.nextNode())3===f.nodeType&&f===_||Ct(f)||(f.content instanceof d&&wt(f.content),bt(f),_=f);if(_=null,Ke)return l;if(Be){if(We){C=ge.call(p.ownerDocument);while(p.firstChild)C.appendChild(p.firstChild)}else C=p;return Ve&&(C=me.call(s,C,!0)),C}var w=Pe?p.outerHTML:p.innerHTML;return Re&&(w=D(w,Ce," "),w=D(w,ve," ")),le&&He?le.createHTML(w):w},o.setConfig=function(e){st(e),Oe=!0},o.clearConfig=function(){nt=null,Oe=!1},o.isValidAttribute=function(e,o,s){nt||st({});var l=k(e),d=k(o);return vt(l,d,s)},o.addHook=function(e,o){"function"===typeof o&&(_e[e]=_e[e]||[],x(_e[e],o))},o.removeHook=function(e){_e[e]&&L(_e[e])},o.removeHooks=function(e){_e[e]&&(_e[e]=[])},o.removeAllHooks=function(){_e={}},o}var te=createDOMPurify();te.version,te.isSupported;const ie=te.sanitize,ne=(te.setConfig,te.clearConfig,te.isValidAttribute,te.addHook),oe=te.removeHook;te.removeHooks,te.removeAllHooks;var se=s(4850),re=s(8764),ae=s(3938),le=s(6811),ce=s(5393),de=s(1050),he=s(7301),ue=s(4669),ge=s(9365),pe=s(1212),me=s(4742),fe=s(5976);let _e={};(function(){function define(e,o){o(_e)}define.amd=!0,function(e,o){"object"===typeof exports?o(exports):"function"===typeof define&&define.amd?define(["exports"],o):(e="undefined"!==typeof globalThis?globalThis:e||self,o(e.marked={}))}(this,(function(e){function _defineProperties(e,o){for(var s=0;s<o.length;s++){var l=o[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,o,s){return o&&_defineProperties(e.prototype,o),s&&_defineProperties(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function _unsupportedIterableToArray(e,o){if(e){if("string"===typeof e)return _arrayLikeToArray(e,o);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,o):void 0}}function _arrayLikeToArray(e,o){(null==o||o>e.length)&&(o=e.length);for(var s=0,l=new Array(o);s<o;s++)l[s]=e[s];return l}function _createForOfIteratorHelperLoose(e,o){var s="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return(s=s.call(e)).next.bind(s);if(Array.isArray(e)||(s=_unsupportedIterableToArray(e))||o&&e&&"number"===typeof e.length){s&&(e=s);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function getDefaults(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function changeDefaults(o){e.defaults=o}e.defaults=getDefaults();var o=/[&<>"']/,s=/[&<>"']/g,l=/[<>"']|&(?!#?\w+;)/,d=/[<>"']|&(?!#?\w+;)/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function getEscapeReplacement(e){return u[e]};function escape(e,u){if(u){if(o.test(e))return e.replace(s,g)}else if(l.test(e))return e.replace(d,g);return e}var p=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function unescape(e){return e.replace(p,(function(e,o){return o=o.toLowerCase(),"colon"===o?":":"#"===o.charAt(0)?"x"===o.charAt(1)?String.fromCharCode(parseInt(o.substring(2),16)):String.fromCharCode(+o.substring(1)):""}))}var m=/(^|[^\[])\^/g;function edit(e,o){e=e.source||e,o=o||"";var s={replace:function replace(o,l){return l=l.source||l,l=l.replace(m,"$1"),e=e.replace(o,l),s},getRegex:function getRegex(){return new RegExp(e,o)}};return s}var f=/[^\w:]/g,_=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(e,o,s){if(e){var l;try{l=decodeURIComponent(unescape(s)).replace(f,"").toLowerCase()}catch(d){return null}if(0===l.indexOf("javascript:")||0===l.indexOf("vbscript:")||0===l.indexOf("data:"))return null}o&&!_.test(s)&&(s=resolveUrl(o,s));try{s=encodeURI(s).replace(/%25/g,"%")}catch(d){return null}return s}var C={},b=/^[^:]+:\/*[^/]*$/,w=/^([^:]+:)[\s\S]*$/,S=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(e,o){C[" "+e]||(b.test(e)?C[" "+e]=e+"/":C[" "+e]=rtrim(e,"/",!0)),e=C[" "+e];var s=-1===e.indexOf(":");return"//"===o.substring(0,2)?s?o:e.replace(w,"$1")+o:"/"===o.charAt(0)?s?o:e.replace(S,"$1")+o:e+o}var y={exec:function noopTest(){}};function merge(e){for(var o,s,l=1;l<arguments.length;l++)for(s in o=arguments[l],o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);return e}function splitCells(e,o){var s=e.replace(/\|/g,(function(e,o,s){var l=!1,d=o;while(--d>=0&&"\\"===s[d])l=!l;return l?"|":" |"})),l=s.split(/ \|/),d=0;if(l[0].trim()||l.shift(),l[l.length-1].trim()||l.pop(),l.length>o)l.splice(o);else while(l.length<o)l.push("");for(;d<l.length;d++)l[d]=l[d].trim().replace(/\\\|/g,"|");return l}function rtrim(e,o,s){var l=e.length;if(0===l)return"";var d=0;while(d<l){var u=e.charAt(l-d-1);if(u!==o||s){if(u===o||!s)break;d++}else d++}return e.substr(0,l-d)}function findClosingBracket(e,o){if(-1===e.indexOf(o[1]))return-1;for(var s=e.length,l=0,d=0;d<s;d++)if("\\"===e[d])d++;else if(e[d]===o[0])l++;else if(e[d]===o[1]&&(l--,l<0))return d;return-1}function checkSanitizeDeprecation(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(e,o){if(o<1)return"";var s="";while(o>1)1&o&&(s+=e),o>>=1,e+=e;return s+e}function outputLink(e,o,s,l){var d=o.href,u=o.title?escape(o.title):null,g=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){l.state.inLink=!0;var p={type:"link",raw:s,href:d,title:u,text:g,tokens:l.inlineTokens(g,[])};return l.state.inLink=!1,p}return{type:"image",raw:s,href:d,title:u,text:escape(g)}}function indentCodeCompensation(e,o){var s=e.match(/^(\s+)(?:```)/);if(null===s)return o;var l=s[1];return o.split("\n").map((function(e){var o=e.match(/^\s+/);if(null===o)return e;var s=o[0];return s.length>=l.length?e.slice(l.length):e})).join("\n")}var L=function(){function Tokenizer(o){this.options=o||e.defaults}var o=Tokenizer.prototype;return o.space=function space(e){var o=this.rules.block.newline.exec(e);if(o&&o[0].length>0)return{type:"space",raw:o[0]}},o.code=function code(e){var o=this.rules.block.code.exec(e);if(o){var s=o[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:o[0],codeBlockStyle:"indented",text:this.options.pedantic?s:rtrim(s,"\n")}}},o.fences=function fences(e){var o=this.rules.block.fences.exec(e);if(o){var s=o[0],l=indentCodeCompensation(s,o[3]||"");return{type:"code",raw:s,lang:o[2]?o[2].trim():o[2],text:l}}},o.heading=function heading(e){var o=this.rules.block.heading.exec(e);if(o){var s=o[2].trim();if(/#$/.test(s)){var l=rtrim(s,"#");this.options.pedantic?s=l.trim():l&&!/ $/.test(l)||(s=l.trim())}var d={type:"heading",raw:o[0],depth:o[1].length,text:s,tokens:[]};return this.lexer.inline(d.text,d.tokens),d}},o.hr=function hr(e){var o=this.rules.block.hr.exec(e);if(o)return{type:"hr",raw:o[0]}},o.blockquote=function blockquote(e){var o=this.rules.block.blockquote.exec(e);if(o){var s=o[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:o[0],tokens:this.lexer.blockTokens(s,[]),text:s}}},o.list=function list(e){var o=this.rules.block.list.exec(e);if(o){var s,l,d,u,g,p,m,f,_,C,b,w,S=o[1].trim(),y=S.length>1,list={type:"list",raw:"",ordered:y,start:y?+S.slice(0,-1):"",loose:!1,items:[]};S=y?"\\d{1,9}\\"+S.slice(-1):"\\"+S,this.options.pedantic&&(S=y?S:"[*+-]");var L=new RegExp("^( {0,3}"+S+")((?: [^\\n]*)?(?:\\n|$))");while(e){if(w=!1,!(o=L.exec(e)))break;if(this.rules.block.hr.test(e))break;if(s=o[0],e=e.substring(s.length),f=o[2].split("\n",1)[0],_=e.split("\n",1)[0],this.options.pedantic?(u=2,b=f.trimLeft()):(u=o[2].search(/[^ ]/),u=u>4?1:u,b=f.slice(u),u+=o[1].length),p=!1,!f&&/^ *$/.test(_)&&(s+=_+"\n",e=e.substring(_.length+1),w=!0),!w){var x=new RegExp("^ {0,"+Math.min(3,u-1)+"}(?:[*+-]|\\d{1,9}[.)])");while(e){if(C=e.split("\n",1)[0],f=C,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),x.test(f))break;if(f.search(/[^ ]/)>=u||!f.trim())b+="\n"+f.slice(u);else{if(p)break;b+="\n"+f}p||f.trim()||(p=!0),s+=C+"\n",e=e.substring(C.length+1)}}list.loose||(m?list.loose=!0:/\n *\n *$/.test(s)&&(m=!0)),this.options.gfm&&(l=/^\[[ xX]\] /.exec(b),l&&(d="[ ] "!==l[0],b=b.replace(/^\[[ xX]\] +/,""))),list.items.push({type:"list_item",raw:s,task:!!l,checked:d,loose:!1,text:b}),list.raw+=s}list.items[list.items.length-1].raw=s.trimRight(),list.items[list.items.length-1].text=b.trimRight(),list.raw=list.raw.trimRight();var k=list.items.length;for(g=0;g<k;g++){this.lexer.state.top=!1,list.items[g].tokens=this.lexer.blockTokens(list.items[g].text,[]);var N=list.items[g].tokens.filter((function(e){return"space"===e.type})),D=N.every((function(e){for(var o,s=e.raw.split(""),l=0,d=_createForOfIteratorHelperLoose(s);!(o=d()).done;){var u=o.value;if("\n"===u&&(l+=1),l>1)return!0}return!1}));!list.loose&&N.length&&D&&(list.loose=!0,list.items[g].loose=!0)}return list}},o.html=function html(e){var o=this.rules.block.html.exec(e);if(o){var s={type:"html",raw:o[0],pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]};return this.options.sanitize&&(s.type="paragraph",s.text=this.options.sanitizer?this.options.sanitizer(o[0]):escape(o[0]),s.tokens=[],this.lexer.inline(s.text,s.tokens)),s}},o.def=function def(e){var o=this.rules.block.def.exec(e);if(o){o[3]&&(o[3]=o[3].substring(1,o[3].length-1));var s=o[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:s,raw:o[0],href:o[2],title:o[3]}}},o.table=function table(e){var o=this.rules.block.table.exec(e);if(o){var s={type:"table",header:splitCells(o[1]).map((function(e){return{text:e}})),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:o[3]?o[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(s.header.length===s.align.length){s.raw=o[0];var l,d,u,g,p=s.align.length;for(l=0;l<p;l++)/^ *-+: *$/.test(s.align[l])?s.align[l]="right":/^ *:-+: *$/.test(s.align[l])?s.align[l]="center":/^ *:-+ *$/.test(s.align[l])?s.align[l]="left":s.align[l]=null;for(p=s.rows.length,l=0;l<p;l++)s.rows[l]=splitCells(s.rows[l],s.header.length).map((function(e){return{text:e}}));for(p=s.header.length,d=0;d<p;d++)s.header[d].tokens=[],this.lexer.inlineTokens(s.header[d].text,s.header[d].tokens);for(p=s.rows.length,d=0;d<p;d++)for(g=s.rows[d],u=0;u<g.length;u++)g[u].tokens=[],this.lexer.inlineTokens(g[u].text,g[u].tokens);return s}}},o.lheading=function lheading(e){var o=this.rules.block.lheading.exec(e);if(o){var s={type:"heading",raw:o[0],depth:"="===o[2].charAt(0)?1:2,text:o[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}},o.paragraph=function paragraph(e){var o=this.rules.block.paragraph.exec(e);if(o){var s={type:"paragraph",raw:o[0],text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}},o.text=function text(e){var o=this.rules.block.text.exec(e);if(o){var s={type:"text",raw:o[0],text:o[0],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}},o.escape=function escape$1(e){var o=this.rules.inline.escape.exec(e);if(o)return{type:"escape",raw:o[0],text:escape(o[1])}},o.tag=function tag(e){var o=this.rules.inline.tag.exec(e);if(o)return!this.lexer.state.inLink&&/^<a /i.test(o[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(o[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(o[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(o[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:o[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):escape(o[0]):o[0]}},o.link=function link(e){var o=this.rules.inline.link.exec(e);if(o){var s=o[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;var l=rtrim(s.slice(0,-1),"\\");if((s.length-l.length)%2===0)return}else{var d=findClosingBracket(o[2],"()");if(d>-1){var u=0===o[0].indexOf("!")?5:4,g=u+o[1].length+d;o[2]=o[2].substring(0,d),o[0]=o[0].substring(0,g).trim(),o[3]=""}}var p=o[2],m="";if(this.options.pedantic){var link=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(p);link&&(p=link[1],m=link[3])}else m=o[3]?o[3].slice(1,-1):"";return p=p.trim(),/^</.test(p)&&(p=this.options.pedantic&&!/>$/.test(s)?p.slice(1):p.slice(1,-1)),outputLink(o,{href:p?p.replace(this.rules.inline._escapes,"$1"):p,title:m?m.replace(this.rules.inline._escapes,"$1"):m},o[0],this.lexer)}},o.reflink=function reflink(e,o){var s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){var l=(s[2]||s[1]).replace(/\s+/g," ");if(l=o[l.toLowerCase()],!l||!l.href){var d=s[0].charAt(0);return{type:"text",raw:d,text:d}}return outputLink(s,l,s[0],this.lexer)}},o.emStrong=function emStrong(e,o,s){void 0===s&&(s="");var l=this.rules.inline.emStrong.lDelim.exec(e);if(l&&(!l[3]||!s.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var d=l[1]||l[2]||"";if(!d||d&&(""===s||this.rules.inline.punctuation.exec(s))){var u,g,p=l[0].length-1,m=p,f=0,_="*"===l[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;_.lastIndex=0,o=o.slice(-1*e.length+p);while(null!=(l=_.exec(o)))if(u=l[1]||l[2]||l[3]||l[4]||l[5]||l[6],u)if(g=u.length,l[3]||l[4])m+=g;else if(!((l[5]||l[6])&&p%3)||(p+g)%3){if(m-=g,!(m>0)){if(g=Math.min(g,g+m+f),Math.min(p,g)%2){var C=e.slice(1,p+l.index+g);return{type:"em",raw:e.slice(0,p+l.index+g+1),text:C,tokens:this.lexer.inlineTokens(C,[])}}var b=e.slice(2,p+l.index+g-1);return{type:"strong",raw:e.slice(0,p+l.index+g+1),text:b,tokens:this.lexer.inlineTokens(b,[])}}}else f+=g}}},o.codespan=function codespan(e){var o=this.rules.inline.code.exec(e);if(o){var s=o[2].replace(/\n/g," "),l=/[^ ]/.test(s),d=/^ /.test(s)&&/ $/.test(s);return l&&d&&(s=s.substring(1,s.length-1)),s=escape(s,!0),{type:"codespan",raw:o[0],text:s}}},o.br=function br(e){var o=this.rules.inline.br.exec(e);if(o)return{type:"br",raw:o[0]}},o.del=function del(e){var o=this.rules.inline.del.exec(e);if(o)return{type:"del",raw:o[0],text:o[2],tokens:this.lexer.inlineTokens(o[2],[])}},o.autolink=function autolink(e,o){var s,l,d=this.rules.inline.autolink.exec(e);if(d)return"@"===d[2]?(s=escape(this.options.mangle?o(d[1]):d[1]),l="mailto:"+s):(s=escape(d[1]),l=s),{type:"link",raw:d[0],text:s,href:l,tokens:[{type:"text",raw:s,text:s}]}},o.url=function url(e,o){var s;if(s=this.rules.inline.url.exec(e)){var l,d;if("@"===s[2])l=escape(this.options.mangle?o(s[0]):s[0]),d="mailto:"+l;else{var u;do{u=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0]}while(u!==s[0]);l=escape(s[0]),d="www."===s[1]?"http://"+l:l}return{type:"link",raw:s[0],text:l,href:d,tokens:[{type:"text",raw:l,text:l}]}}},o.inlineText=function inlineText(e,o){var s,l=this.rules.inline.text.exec(e);if(l)return s=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):escape(l[0]):l[0]:escape(this.options.smartypants?o(l[0]):l[0]),{type:"text",raw:l[0],text:s}},Tokenizer}(),x={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:y,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};x.def=edit(x.def).replace("label",x._label).replace("title",x._title).getRegex(),x.bullet=/(?:[*+-]|\d{1,9}[.)])/,x.listItemStart=edit(/^( *)(bull) */).replace("bull",x.bullet).getRegex(),x.list=edit(x.list).replace(/bull/g,x.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+x.def.source+")").getRegex(),x._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",x._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,x.html=edit(x.html,"i").replace("comment",x._comment).replace("tag",x._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),x.paragraph=edit(x._paragraph).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x._tag).getRegex(),x.blockquote=edit(x.blockquote).replace("paragraph",x.paragraph).getRegex(),x.normal=merge({},x),x.gfm=merge({},x.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),x.gfm.table=edit(x.gfm.table).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x._tag).getRegex(),x.gfm.paragraph=edit(x._paragraph).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",x.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x._tag).getRegex(),x.pedantic=merge({},x.normal,{html:edit("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",x._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:y,paragraph:edit(x.normal._paragraph).replace("hr",x.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",x.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var k={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:y,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:y,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function smartypants(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(e){var o,s,l="",d=e.length;for(o=0;o<d;o++)s=e.charCodeAt(o),Math.random()>.5&&(s="x"+s.toString(16)),l+="&#"+s+";";return l}k._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",k.punctuation=edit(k.punctuation).replace(/punctuation/g,k._punctuation).getRegex(),k.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,k.escapedEmSt=/\\\*|\\_/g,k._comment=edit(x._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),k.emStrong.lDelim=edit(k.emStrong.lDelim).replace(/punct/g,k._punctuation).getRegex(),k.emStrong.rDelimAst=edit(k.emStrong.rDelimAst,"g").replace(/punct/g,k._punctuation).getRegex(),k.emStrong.rDelimUnd=edit(k.emStrong.rDelimUnd,"g").replace(/punct/g,k._punctuation).getRegex(),k._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,k._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,k._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,k.autolink=edit(k.autolink).replace("scheme",k._scheme).replace("email",k._email).getRegex(),k._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,k.tag=edit(k.tag).replace("comment",k._comment).replace("attribute",k._attribute).getRegex(),k._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,k._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,k._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,k.link=edit(k.link).replace("label",k._label).replace("href",k._href).replace("title",k._title).getRegex(),k.reflink=edit(k.reflink).replace("label",k._label).replace("ref",x._label).getRegex(),k.nolink=edit(k.nolink).replace("ref",x._label).getRegex(),k.reflinkSearch=edit(k.reflinkSearch,"g").replace("reflink",k.reflink).replace("nolink",k.nolink).getRegex(),k.normal=merge({},k),k.pedantic=merge({},k.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",k._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",k._label).getRegex()}),k.gfm=merge({},k.normal,{escape:edit(k.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),k.gfm.url=edit(k.gfm.url,"i").replace("email",k.gfm._extended_email).getRegex(),k.breaks=merge({},k.gfm,{br:edit(k.br).replace("{2,}","*").getRegex(),text:edit(k.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var N=function(){function Lexer(o){this.tokens=[],this.tokens.links=Object.create(null),this.options=o||e.defaults,this.options.tokenizer=this.options.tokenizer||new L,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var s={block:x.normal,inline:k.normal};this.options.pedantic?(s.block=x.pedantic,s.inline=k.pedantic):this.options.gfm&&(s.block=x.gfm,this.options.breaks?s.inline=k.breaks:s.inline=k.gfm),this.tokenizer.rules=s}Lexer.lex=function lex(e,o){var s=new Lexer(o);return s.lex(e)},Lexer.lexInline=function lexInline(e,o){var s=new Lexer(o);return s.inlineTokens(e)};var o=Lexer.prototype;return o.lex=function lex(e){var o;e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);while(o=this.inlineQueue.shift())this.inlineTokens(o.src,o.tokens);return this.tokens},o.blockTokens=function blockTokens(e,o){var s,l,d,u,g=this;void 0===o&&(o=[]),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));while(e)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(l){return!!(s=l.call({lexer:g},e,o))&&(e=e.substring(s.raw.length),o.push(s),!0)}))))if(s=this.tokenizer.space(e))e=e.substring(s.raw.length),1===s.raw.length&&o.length>0?o[o.length-1].raw+="\n":o.push(s);else if(s=this.tokenizer.code(e))e=e.substring(s.raw.length),l=o[o.length-1],!l||"paragraph"!==l.type&&"text"!==l.type?o.push(s):(l.raw+="\n"+s.raw,l.text+="\n"+s.text,this.inlineQueue[this.inlineQueue.length-1].src=l.text);else if(s=this.tokenizer.fences(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.heading(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.hr(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.blockquote(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.list(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.html(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.def(e))e=e.substring(s.raw.length),l=o[o.length-1],!l||"paragraph"!==l.type&&"text"!==l.type?this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title}):(l.raw+="\n"+s.raw,l.text+="\n"+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=l.text);else if(s=this.tokenizer.table(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.lheading(e))e=e.substring(s.raw.length),o.push(s);else if(d=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var o=1/0,s=e.slice(1),l=void 0;g.options.extensions.startBlock.forEach((function(e){l=e.call({lexer:this},s),"number"===typeof l&&l>=0&&(o=Math.min(o,l))})),o<1/0&&o>=0&&(d=e.substring(0,o+1))}(),this.state.top&&(s=this.tokenizer.paragraph(d)))l=o[o.length-1],u&&"paragraph"===l.type?(l.raw+="\n"+s.raw,l.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):o.push(s),u=d.length!==e.length,e=e.substring(s.raw.length);else if(s=this.tokenizer.text(e))e=e.substring(s.raw.length),l=o[o.length-1],l&&"text"===l.type?(l.raw+="\n"+s.raw,l.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):o.push(s);else if(e){var p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}throw new Error(p)}return this.state.top=!0,o},o.inline=function inline(e,o){this.inlineQueue.push({src:e,tokens:o})},o.inlineTokens=function inlineTokens(e,o){var s,l,d,u=this;void 0===o&&(o=[]);var g,p,m,f=e;if(this.tokens.links){var _=Object.keys(this.tokens.links);if(_.length>0)while(null!=(g=this.tokenizer.rules.inline.reflinkSearch.exec(f)))_.includes(g[0].slice(g[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,g.index)+"["+repeatString("a",g[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}while(null!=(g=this.tokenizer.rules.inline.blockSkip.exec(f)))f=f.slice(0,g.index)+"["+repeatString("a",g[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while(null!=(g=this.tokenizer.rules.inline.escapedEmSt.exec(f)))f=f.slice(0,g.index)+"++"+f.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);while(e)if(p||(m=""),p=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(l){return!!(s=l.call({lexer:u},e,o))&&(e=e.substring(s.raw.length),o.push(s),!0)}))))if(s=this.tokenizer.escape(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.tag(e))e=e.substring(s.raw.length),l=o[o.length-1],l&&"text"===s.type&&"text"===l.type?(l.raw+=s.raw,l.text+=s.text):o.push(s);else if(s=this.tokenizer.link(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(s.raw.length),l=o[o.length-1],l&&"text"===s.type&&"text"===l.type?(l.raw+=s.raw,l.text+=s.text):o.push(s);else if(s=this.tokenizer.emStrong(e,f,m))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.codespan(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.br(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.del(e))e=e.substring(s.raw.length),o.push(s);else if(s=this.tokenizer.autolink(e,mangle))e=e.substring(s.raw.length),o.push(s);else if(this.state.inLink||!(s=this.tokenizer.url(e,mangle))){if(d=e,this.options.extensions&&this.options.extensions.startInline&&function(){var o=1/0,s=e.slice(1),l=void 0;u.options.extensions.startInline.forEach((function(e){l=e.call({lexer:this},s),"number"===typeof l&&l>=0&&(o=Math.min(o,l))})),o<1/0&&o>=0&&(d=e.substring(0,o+1))}(),s=this.tokenizer.inlineText(d,smartypants))e=e.substring(s.raw.length),"_"!==s.raw.slice(-1)&&(m=s.raw.slice(-1)),p=!0,l=o[o.length-1],l&&"text"===l.type?(l.raw+=s.raw,l.text+=s.text):o.push(s);else if(e){var C="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(C);break}throw new Error(C)}}else e=e.substring(s.raw.length),o.push(s);return o},_createClass(Lexer,null,[{key:"rules",get:function get(){return{block:x,inline:k}}}]),Lexer}(),D=function(){function Renderer(o){this.options=o||e.defaults}var o=Renderer.prototype;return o.code=function code(e,o,s){var l=(o||"").match(/\S*/)[0];if(this.options.highlight){var d=this.options.highlight(e,l);null!=d&&d!==e&&(s=!0,e=d)}return e=e.replace(/\n$/,"")+"\n",l?'<pre><code class="'+this.options.langPrefix+escape(l,!0)+'">'+(s?e:escape(e,!0))+"</code></pre>\n":"<pre><code>"+(s?e:escape(e,!0))+"</code></pre>\n"},o.blockquote=function blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.html=function html(e){return e},o.heading=function heading(e,o,s,l){return this.options.headerIds?"<h"+o+' id="'+this.options.headerPrefix+l.slug(s)+'">'+e+"</h"+o+">\n":"<h"+o+">"+e+"</h"+o+">\n"},o.hr=function hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.list=function list(e,o,s){var l=o?"ol":"ul",d=o&&1!==s?' start="'+s+'"':"";return"<"+l+d+">\n"+e+"</"+l+">\n"},o.listitem=function listitem(e){return"<li>"+e+"</li>\n"},o.checkbox=function checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},o.paragraph=function paragraph(e){return"<p>"+e+"</p>\n"},o.table=function table(e,o){return o&&(o="<tbody>"+o+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+o+"</table>\n"},o.tablerow=function tablerow(e){return"<tr>\n"+e+"</tr>\n"},o.tablecell=function tablecell(e,o){var s=o.header?"th":"td",l=o.align?"<"+s+' align="'+o.align+'">':"<"+s+">";return l+e+"</"+s+">\n"},o.strong=function strong(e){return"<strong>"+e+"</strong>"},o.em=function em(e){return"<em>"+e+"</em>"},o.codespan=function codespan(e){return"<code>"+e+"</code>"},o.br=function br(){return this.options.xhtml?"<br/>":"<br>"},o.del=function del(e){return"<del>"+e+"</del>"},o.link=function link(e,o,s){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),null===e)return s;var l='<a href="'+escape(e)+'"';return o&&(l+=' title="'+o+'"'),l+=">"+s+"</a>",l},o.image=function image(e,o,s){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),null===e)return s;var l='<img src="'+e+'" alt="'+s+'"';return o&&(l+=' title="'+o+'"'),l+=this.options.xhtml?"/>":">",l},o.text=function text(e){return e},Renderer}(),E=function(){function TextRenderer(){}var e=TextRenderer.prototype;return e.strong=function strong(e){return e},e.em=function em(e){return e},e.codespan=function codespan(e){return e},e.del=function del(e){return e},e.html=function html(e){return e},e.text=function text(e){return e},e.link=function link(e,o,s){return""+s},e.image=function image(e,o,s){return""+s},e.br=function br(){return""},TextRenderer}(),T=function(){function Slugger(){this.seen={}}var e=Slugger.prototype;return e.serialize=function serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},e.getNextSafeSlug=function getNextSafeSlug(e,o){var s=e,l=0;if(this.seen.hasOwnProperty(s)){l=this.seen[e];do{l++,s=e+"-"+l}while(this.seen.hasOwnProperty(s))}return o||(this.seen[e]=l,this.seen[s]=0),s},e.slug=function slug(e,o){void 0===o&&(o={});var slug=this.serialize(e);return this.getNextSafeSlug(slug,o.dryrun)},Slugger}(),I=function(){function Parser(o){this.options=o||e.defaults,this.options.renderer=this.options.renderer||new D,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new E,this.slugger=new T}Parser.parse=function parse(e,o){var s=new Parser(o);return s.parse(e)},Parser.parseInline=function parseInline(e,o){var s=new Parser(o);return s.parseInline(e)};var o=Parser.prototype;return o.parse=function parse(e,o){void 0===o&&(o=!0);var s,l,d,u,g,p,m,f,_,C,b,w,S,y,L,x,k,N,D,E="",T=e.length;for(s=0;s<T;s++)if(C=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[C.type]&&(D=this.options.extensions.renderers[C.type].call({parser:this},C),!1!==D||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(C.type)))E+=D||"";else switch(C.type){case"space":continue;case"hr":E+=this.renderer.hr();continue;case"heading":E+=this.renderer.heading(this.parseInline(C.tokens),C.depth,unescape(this.parseInline(C.tokens,this.textRenderer)),this.slugger);continue;case"code":E+=this.renderer.code(C.text,C.lang,C.escaped);continue;case"table":for(f="",m="",u=C.header.length,l=0;l<u;l++)m+=this.renderer.tablecell(this.parseInline(C.header[l].tokens),{header:!0,align:C.align[l]});for(f+=this.renderer.tablerow(m),_="",u=C.rows.length,l=0;l<u;l++){for(p=C.rows[l],m="",g=p.length,d=0;d<g;d++)m+=this.renderer.tablecell(this.parseInline(p[d].tokens),{header:!1,align:C.align[d]});_+=this.renderer.tablerow(m)}E+=this.renderer.table(f,_);continue;case"blockquote":_=this.parse(C.tokens),E+=this.renderer.blockquote(_);continue;case"list":for(b=C.ordered,w=C.start,S=C.loose,u=C.items.length,_="",l=0;l<u;l++)L=C.items[l],x=L.checked,k=L.task,y="",L.task&&(N=this.renderer.checkbox(x),S?L.tokens.length>0&&"paragraph"===L.tokens[0].type?(L.tokens[0].text=N+" "+L.tokens[0].text,L.tokens[0].tokens&&L.tokens[0].tokens.length>0&&"text"===L.tokens[0].tokens[0].type&&(L.tokens[0].tokens[0].text=N+" "+L.tokens[0].tokens[0].text)):L.tokens.unshift({type:"text",text:N}):y+=N),y+=this.parse(L.tokens,S),_+=this.renderer.listitem(y,k,x);E+=this.renderer.list(_,b,w);continue;case"html":E+=this.renderer.html(C.text);continue;case"paragraph":E+=this.renderer.paragraph(this.parseInline(C.tokens));continue;case"text":_=C.tokens?this.parseInline(C.tokens):C.text;while(s+1<T&&"text"===e[s+1].type)C=e[++s],_+="\n"+(C.tokens?this.parseInline(C.tokens):C.text);E+=o?this.renderer.paragraph(_):_;continue;default:var I='Token with "'+C.type+'" type was not found.';if(this.options.silent)return void console.error(I);throw new Error(I)}return E},o.parseInline=function parseInline(e,o){o=o||this.renderer;var s,l,d,u="",g=e.length;for(s=0;s<g;s++)if(l=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]&&(d=this.options.extensions.renderers[l.type].call({parser:this},l),!1!==d||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)))u+=d||"";else switch(l.type){case"escape":u+=o.text(l.text);break;case"html":u+=o.html(l.text);break;case"link":u+=o.link(l.href,l.title,this.parseInline(l.tokens,o));break;case"image":u+=o.image(l.href,l.title,l.text);break;case"strong":u+=o.strong(this.parseInline(l.tokens,o));break;case"em":u+=o.em(this.parseInline(l.tokens,o));break;case"codespan":u+=o.codespan(l.text);break;case"br":u+=o.br();break;case"del":u+=o.del(this.parseInline(l.tokens,o));break;case"text":u+=o.text(l.text);break;default:var p='Token with "'+l.type+'" type was not found.';if(this.options.silent)return void console.error(p);throw new Error(p)}return u},Parser}();function marked(e,o,s){if("undefined"===typeof e||null===e)throw new Error("marked(): input parameter is undefined or null");if("string"!==typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"===typeof o&&(s=o,o=null),o=merge({},marked.defaults,o||{}),checkSanitizeDeprecation(o),s){var l,d=o.highlight;try{l=N.lex(e,o)}catch(m){return s(m)}var u=function done(e){var u;if(!e)try{o.walkTokens&&marked.walkTokens(l,o.walkTokens),u=I.parse(l,o)}catch(m){e=m}return o.highlight=d,e?s(e):s(null,u)};if(!d||d.length<3)return u();if(delete o.highlight,!l.length)return u();var g=0;return marked.walkTokens(l,(function(e){"code"===e.type&&(g++,setTimeout((function(){d(e.text,e.lang,(function(o,s){if(o)return u(o);null!=s&&s!==e.text&&(e.text=s,e.escaped=!0),g--,0===g&&u()}))}),0))})),void(0===g&&u())}try{var p=N.lex(e,o);return o.walkTokens&&marked.walkTokens(p,o.walkTokens),I.parse(p,o)}catch(m){if(m.message+="\nPlease report this to https://github.com/markedjs/marked.",o.silent)return"<p>An error occurred:</p><pre>"+escape(m.message+"",!0)+"</pre>";throw m}}marked.options=marked.setOptions=function(e){return merge(marked.defaults,e),changeDefaults(marked.defaults),marked},marked.getDefaults=getDefaults,marked.defaults=e.defaults,marked.use=function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];var l,d=merge.apply(void 0,[{}].concat(o)),u=marked.defaults.extensions||{renderers:{},childTokens:{}};o.forEach((function(e){if(e.extensions&&(l=!0,e.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var o=u.renderers?u.renderers[e.name]:null;u.renderers[e.name]=o?function(){for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];var u=e.renderer.apply(this,l);return!1===u&&(u=o.apply(this,l)),u}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");u[e.level]?u[e.level].unshift(e.tokenizer):u[e.level]=[e.tokenizer],e.start&&("block"===e.level?u.startBlock?u.startBlock.push(e.start):u.startBlock=[e.start]:"inline"===e.level&&(u.startInline?u.startInline.push(e.start):u.startInline=[e.start]))}e.childTokens&&(u.childTokens[e.name]=e.childTokens)}))),e.renderer&&function(){var o=marked.defaults.renderer||new D,s=function _loop(s){var l=o[s];o[s]=function(){for(var d=arguments.length,u=new Array(d),g=0;g<d;g++)u[g]=arguments[g];var p=e.renderer[s].apply(o,u);return!1===p&&(p=l.apply(o,u)),p}};for(var l in e.renderer)s(l);d.renderer=o}(),e.tokenizer&&function(){var o=marked.defaults.tokenizer||new L,s=function _loop2(s){var l=o[s];o[s]=function(){for(var d=arguments.length,u=new Array(d),g=0;g<d;g++)u[g]=arguments[g];var p=e.tokenizer[s].apply(o,u);return!1===p&&(p=l.apply(o,u)),p}};for(var l in e.tokenizer)s(l);d.tokenizer=o}(),e.walkTokens){var o=marked.defaults.walkTokens;d.walkTokens=function(s){e.walkTokens.call(this,s),o&&o.call(this,s)}}l&&(d.extensions=u),marked.setOptions(d)}))},marked.walkTokens=function(e,o){for(var s,l=function _loop3(){var e=s.value;switch(o.call(marked,e),e.type){case"table":for(var l,d=_createForOfIteratorHelperLoose(e.header);!(l=d()).done;){var u=l.value;marked.walkTokens(u.tokens,o)}for(var g,p=_createForOfIteratorHelperLoose(e.rows);!(g=p()).done;)for(var m,f=g.value,_=_createForOfIteratorHelperLoose(f);!(m=_()).done;){var C=m.value;marked.walkTokens(C.tokens,o)}break;case"list":marked.walkTokens(e.items,o);break;default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[e.type]?marked.defaults.extensions.childTokens[e.type].forEach((function(s){marked.walkTokens(e[s],o)})):e.tokens&&marked.walkTokens(e.tokens,o)}},d=_createForOfIteratorHelperLoose(e);!(s=d()).done;)l()},marked.parseInline=function(e,o){if("undefined"===typeof e||null===e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!==typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");o=merge({},marked.defaults,o||{}),checkSanitizeDeprecation(o);try{var s=N.lexInline(e,o);return o.walkTokens&&marked.walkTokens(s,o.walkTokens),I.parseInline(s,o)}catch(l){if(l.message+="\nPlease report this to https://github.com/markedjs/marked.",o.silent)return"<p>An error occurred:</p><pre>"+escape(l.message+"",!0)+"</pre>";throw l}},marked.Parser=I,marked.parser=I.parse,marked.Renderer=D,marked.TextRenderer=E,marked.Lexer=N,marked.lexer=N.lex,marked.Tokenizer=L,marked.Slugger=T,marked.parse=marked;var A=marked.options,M=marked.setOptions,R=marked.use,P=marked.walkTokens,O=marked.parseInline,F=marked,B=I.parse,W=N.lex;e.Lexer=N,e.Parser=I,e.Renderer=D,e.Slugger=T,e.TextRenderer=E,e.Tokenizer=L,e.getDefaults=getDefaults,e.lexer=W,e.marked=marked,e.options=A,e.parse=F,e.parseInline=O,e.parser=B,e.setOptions=M,e.use=R,e.walkTokens=P,Object.defineProperty(e,"__esModule",{value:!0})}))})();var Ce=_e||exports,ve=s(3897),be=s(6663),we=s(6248),Se=s(5935),ye=s(2677),Le=s(666);function renderMarkdown(e,o={},s={}){var d;const u=new fe.SL;let g=!1;const p=u.add(new de.A),m=(0,re.az)(o),_uriMassage=function(o){let s;try{s=(0,ve.Q)(decodeURIComponent(o))}catch(l){}return s?(s=(0,we.rs)(s,(o=>e.uris&&e.uris[o]?Le.o.revive(e.uris[o]):void 0)),encodeURIComponent(JSON.stringify(s))):o},_href=function(o,s){const l=e.uris&&e.uris[o];let d=Le.o.revive(l);return s?o.startsWith(be.lg.data+":")?o:(d||(d=Le.o.parse(o)),be.Gi.asBrowserUri(d).toString(!0)):d?Le.o.parse(o).toString()===d.toString()?o:(d.query&&(d=d.with({query:_uriMassage(d.query)})),d.toString()):o};let f;const _=new Promise((e=>f=e)),C=new Ce.Renderer;if(C.image=(e,o,s)=>{let l=[],d=[];return e&&(({href:e,dimensions:l}=(0,ge.v1)(e)),d.push(`src="${e}"`)),s&&d.push(`alt="${s}"`),o&&d.push(`title="${o}"`),l.length&&(d=d.concat(l)),"<img "+d.join(" ")+">"},C.link=(o,s,l)=>"string"!==typeof o?"":(o===l&&(l=(0,ge.oR)(l)),o=_href(o,!1),e.baseUri&&(o=resolveWithBaseUri(Le.o.from(e.baseUri),o)),s="string"===typeof s?(0,ge.oR)(s):"",o=(0,ge.oR)(o),!o||/^data:|javascript:/i.test(o)||/^command:/i.test(o)&&!e.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(o)?l:(o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a data-href="${o}" title="${s||o}">${l}</a>`)),C.paragraph=e=>`<p>${e}</p>`,o.codeBlockRenderer&&(C.code=(e,s)=>{const d=o.codeBlockRenderer(null!==s&&void 0!==s?s:"",e),u=me.a.nextId();return(0,ce.eP)(Promise.all([d,_]),p.token).then((e=>{var s;if(!g&&e){const d=m.querySelector(`div[data-code="${u}"]`);d&&l.mc(d,e[0]),null===(s=o.asyncRenderCallback)||void 0===s||s.call(o)}})).catch((()=>{})),`<div class="code" data-code="${u}">${(0,ye.YU)(e)}</div>`}),o.actionHandler){const s=o.actionHandler.disposables.add(new se.Y(m,"click")),l=o.actionHandler.disposables.add(new se.Y(m,"auxclick"));o.actionHandler.disposables.add(ue.ju.any(s.event,l.event)((s=>{const l=new ae.n(s);if(!l.leftButton&&!l.middleButton)return;let d=l.target;if("A"===d.tagName||(d=d.parentElement,d&&"A"===d.tagName))try{let s=d.dataset["href"];s&&(e.baseUri&&(s=resolveWithBaseUri(Le.o.from(e.baseUri),s)),o.actionHandler.callback(s,l))}catch(u){(0,he.dL)(u)}finally{l.preventDefault()}})))}e.supportHtml||(s.sanitizer=o=>{const s=e.isTrusted?o.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0;return s?o:""},s.sanitize=!0,s.silent=!0),s.renderer=C;let b=null!==(d=e.value)&&void 0!==d?d:"";b.length>1e5&&(b=`${b.substr(0,1e5)}…`),e.supportThemeIcons&&(b=(0,pe.f$)(b));let w=Ce.parse(b,s);if(e.supportThemeIcons){const e=(0,le.T)(w);w=e.map((e=>"string"===typeof e?e:e.outerHTML)).join("")}const S=new DOMParser,y=S.parseFromString(sanitizeRenderedMarkdown(e,w),"text/html");if(y.body.querySelectorAll("img").forEach((o=>{const s=o.getAttribute("src");if(s){let d=s;try{e.baseUri&&(d=resolveWithBaseUri(Le.o.from(e.baseUri),d))}catch(l){}o.src=_href(d,!0)}})),m.innerHTML=sanitizeRenderedMarkdown(e,y.body.innerHTML),f(),o.asyncRenderCallback)for(const L of m.getElementsByTagName("img")){const e=u.add(l.nm(L,"load",(()=>{e.dispose(),o.asyncRenderCallback()})))}return{element:m,dispose:()=>{g=!0,p.cancel(),u.dispose()}}}function resolveWithBaseUri(e,o){const s=/^\w[\w\d+.-]*:/.test(o);return s?o:e.path.endsWith("/")?(0,Se.i3)(e,o).toString():(0,Se.i3)((0,Se.XX)(e),o).toString()}function sanitizeRenderedMarkdown(e,o){const{config:s,allowedSchemes:l}=getSanitizerOptions(e);ne("uponSanitizeAttribute",((e,o)=>{if("style"!==o.attrName&&"class"!==o.attrName);else{if("SPAN"===e.tagName){if("style"===o.attrName)return void(o.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(o.attrValue));if("class"===o.attrName)return void(o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue))}o.keepAttr=!1}}));const d=document.createElement("a");ne("afterSanitizeAttributes",(e=>{for(const o of["href","src"])e.hasAttribute(o)&&(d.href=e.getAttribute(o),l.includes(d.protocol.replace(/:$/,""))||e.removeAttribute(o))}));try{return ie(o,Object.assign(Object.assign({},s),{RETURN_TRUSTED_TYPE:!0}))}finally{oe("uponSanitizeAttribute"),oe("afterSanitizeAttributes")}}function getSanitizerOptions(e){const o=[be.lg.http,be.lg.https,be.lg.mailto,be.lg.data,be.lg.file,be.lg.vscodeFileResource,be.lg.vscodeRemote,be.lg.vscodeRemoteResource];return e.isTrusted&&o.push(be.lg.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:o}}var xe,ke=s(988),Ne=s(2042),De=s(2963),Ee=s(2136),Te=s(8801),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let Ie=class MarkdownRenderer{constructor(e,o,s){this._options=e,this._languageService=o,this._openerService=s,this._onDidRenderAsync=new ue.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,o,s){if(!e){const e=document.createElement("span");return{element:e,dispose:()=>{}}}const l=new fe.SL,d=l.add(renderMarkdown(e,Object.assign(Object.assign({},this._getRenderOptions(e,l)),o),s));return{element:d.element,dispose:()=>l.dispose()}}_getRenderOptions(e,o){return{codeBlockRenderer:(e,o)=>__awaiter(this,void 0,void 0,(function*(){var s,l,d;let u;e?u=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(u=null===(s=this._options.editor.getModel())||void 0===s?void 0:s.getLanguageId()),u||(u=Te.bd);const g=yield(0,De.C2)(this._languageService,o,u),p=document.createElement("span");if(p.innerHTML=null!==(d=null===(l=MarkdownRenderer._ttpTokenizer)||void 0===l?void 0:l.createHTML(g))&&void 0!==d?d:g,this._options.editor){const e=this._options.editor.getOption(44);(0,Ee.N)(p,e)}else this._options.codeBlockFontFamily&&(p.style.fontFamily=this._options.codeBlockFontFamily);return p})),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:o=>this._openerService.open(o,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(he.dL),disposables:o}}}};Ie._ttpTokenizer=null===(xe=window.trustedTypes)||void 0===xe?void 0:xe.createPolicy("tokenizeToString",{createHTML(e){return e}}),Ie=__decorate([__param(1,Ne.O),__param(2,ke.v4)],Ie)},7753:function(e,o,s){"use strict";s.d(o,{O:function(){return _}});var l=s(5152),d=s(5393),u=s(5976),g=s(6830),p=s(4314),m=s(3580),f=s(8819),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let _=class MessageController{constructor(e,o){this._messageWidget=new u.XK,this._messageListeners=new u.SL,this._editor=e,this._visible=MessageController.MESSAGE_VISIBLE.bindTo(o),this._editorListener=this._editor.onDidAttemptReadOnlyEdit((()=>this._onDidAttemptReadOnlyEdit()))}static get(e){return e.getContribution(MessageController.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,o){let s;(0,l.Z9)(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new MessageWidget(this._editor,o,e),this._messageListeners.add(this._editor.onDidBlurEditorText((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(new d._F((()=>this.closeMessage()),3e3)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(s?s.containsPosition(e.target.position)||this.closeMessage():s=new p.e(o.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(m.N("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};_.ID="editor.contrib.messageController",_.MESSAGE_VISIBLE=new f.uy("messageVisible",!1,m.N("messageVisible","Whether the editor is currently showing an inline message")),_=__decorate([__param(1,f.i6)],_);const C=g._l.bindToContribution(_.get);(0,g.fK)(new C({id:"leaveEditorMessage",precondition:_.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class MessageWidget{constructor(e,{lineNumber:o,column:s},l){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(o,o,0),this._position={lineNumber:o,column:s-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const d=document.createElement("div");d.classList.add("anchor","top"),this._domNode.appendChild(d);const u=document.createElement("div");u.classList.add("message"),u.textContent=l,this._domNode.appendChild(u);const g=document.createElement("div");g.classList.add("anchor","below"),this._domNode.appendChild(g),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let o;const dispose=()=>{e.dispose(),clearTimeout(o),e.getDomNode().removeEventListener("animationend",dispose)};return o=setTimeout(dispose,110),e.getDomNode().addEventListener("animationend",dispose),e.getDomNode().classList.add("fadeOut"),{dispose:dispose}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",2===e)}}(0,g._K)(_.ID,_)},7061:function(e,o,s){"use strict";s.r(o),s.d(o,{AddSelectionToNextFindMatchAction:function(){return AddSelectionToNextFindMatchAction},AddSelectionToPreviousFindMatchAction:function(){return AddSelectionToPreviousFindMatchAction},CompatChangeAll:function(){return CompatChangeAll},InsertCursorAbove:function(){return InsertCursorAbove},InsertCursorBelow:function(){return InsertCursorBelow},MoveSelectionToNextFindMatchAction:function(){return MoveSelectionToNextFindMatchAction},MoveSelectionToPreviousFindMatchAction:function(){return MoveSelectionToPreviousFindMatchAction},MultiCursorSelectionController:function(){return MultiCursorSelectionController},MultiCursorSelectionControllerAction:function(){return MultiCursorSelectionControllerAction},MultiCursorSession:function(){return MultiCursorSession},MultiCursorSessionResult:function(){return MultiCursorSessionResult},SelectHighlightsAction:function(){return SelectHighlightsAction},SelectionHighlighter:function(){return E}});var l=s(5152),d=s(5393),u=s(2258),g=s(5976),p=s(6830),m=s(8108),f=s(4314),_=s(3860),C=s(9102),b=s(4973),w=s(2822),S=s(5826),y=s(3580),L=s(4144),x=s(8819),k=s(3910),N=s(7781),D=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};function announceCursorChange(e,o){const s=o.filter((o=>!e.find((e=>e.equals(o)))));if(s.length>=1){const e=s.map((e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`)).join(", "),o=1===s.length?y.N("cursorAdded","Cursor added: {0}",e):y.N("cursorsAdded","Cursors added: {0}",e);(0,l.i7)(o)}}class InsertCursorAbove extends p.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:y.N("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:C.u.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:L.eH.MenubarSelectionMenu,group:"3_multi",title:y.N({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,o,s){if(!o.hasModel())return;let l=!0;s&&!1===s.logicalLine&&(l=!1);const d=o._getViewModel();if(d.cursorConfig.readOnly)return;d.model.pushStackElement();const u=d.getCursorStates();d.setCursorStates(s.source,3,m.P.addCursorUp(d,u,l)),d.revealTopMostCursor(s.source),announceCursorChange(u,d.getCursorStates())}}class InsertCursorBelow extends p.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:y.N("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:C.u.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:L.eH.MenubarSelectionMenu,group:"3_multi",title:y.N({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,o,s){if(!o.hasModel())return;let l=!0;s&&!1===s.logicalLine&&(l=!1);const d=o._getViewModel();if(d.cursorConfig.readOnly)return;d.model.pushStackElement();const u=d.getCursorStates();d.setCursorStates(s.source,3,m.P.addCursorDown(d,u,l)),d.revealBottomMostCursor(s.source),announceCursorChange(u,d.getCursorStates())}}class InsertCursorAtEndOfEachLineSelected extends p.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:y.N("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:C.u.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:L.eH.MenubarSelectionMenu,group:"3_multi",title:y.N({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,o,s){if(!e.isEmpty()){for(let l=e.startLineNumber;l<e.endLineNumber;l++){let e=o.getLineMaxColumn(l);s.push(new _.Y(l,e,l,e))}e.endColumn>1&&s.push(new _.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,o){if(!o.hasModel())return;const s=o.getModel(),l=o.getSelections(),d=o._getViewModel(),u=d.getCursorStates();let g=[];l.forEach((e=>this.getCursorsForSelection(e,s,g))),g.length>0&&o.setSelections(g),announceCursorChange(u,d.getCursorStates())}}class InsertCursorAtEndOfLineSelected extends p.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:y.N("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,o){if(!o.hasModel())return;const s=o.getSelections(),l=o.getModel().getLineCount();let d=[];for(let p=s[0].startLineNumber;p<=l;p++)d.push(new _.Y(p,s[0].startColumn,p,s[0].endColumn));const u=o._getViewModel(),g=u.getCursorStates();d.length>0&&o.setSelections(d),announceCursorChange(g,u.getCursorStates())}}class InsertCursorAtTopOfLineSelected extends p.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:y.N("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,o){if(!o.hasModel())return;const s=o.getSelections();let l=[];for(let g=s[0].startLineNumber;g>=1;g--)l.push(new _.Y(g,s[0].startColumn,g,s[0].endColumn));const d=o._getViewModel(),u=d.getCursorStates();l.length>0&&o.setSelections(l),announceCursorChange(u,d.getCursorStates())}}class MultiCursorSessionResult{constructor(e,o,s){this.selections=e,this.revealRange=o,this.revealScrollType=s}}class MultiCursorSession{constructor(e,o,s,l,d,u,g){this._editor=e,this.findController=o,this.isDisconnectedFromFindController=s,this.searchText=l,this.wholeWord=d,this.matchCase=u,this.currentMatch=g}static create(e,o){if(!e.hasModel())return null;const s=o.getState();if(!e.hasTextFocus()&&s.isRevealed&&s.searchString.length>0)return new MultiCursorSession(e,o,!1,s.searchString,s.wholeWord,s.matchCase,null);let l,d,u=!1;const g=e.getSelections();1===g.length&&g[0].isEmpty()?(u=!0,l=!0,d=!0):(l=s.wholeWord,d=s.matchCase);const p=e.getSelection();let m,f=null;if(p.isEmpty()){const o=e.getConfiguredWordAtPosition(p.getStartPosition());if(!o)return null;m=o.word,f=new _.Y(p.startLineNumber,o.startColumn,p.startLineNumber,o.endColumn)}else m=e.getModel().getValueInRange(p).replace(/\r\n/g,"\n");return new MultiCursorSession(e,o,u,m,l,d,f)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const o=this._editor.getSelections();return new MultiCursorSessionResult(o.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const o=this._editor.getSelections();return new MultiCursorSessionResult(o.slice(0,o.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),o=e[e.length-1],s=this._editor.getModel().findNextMatch(this.searchText,o.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1);return s?new _.Y(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const o=this._editor.getSelections();return new MultiCursorSessionResult(o.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const o=this._editor.getSelections();return new MultiCursorSessionResult(o.slice(0,o.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),o=e[e.length-1],s=this._editor.getModel().findPreviousMatch(this.searchText,o.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1);return s?new _.Y(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1,1073741824)):[]}}class MultiCursorSelectionController extends g.JT{constructor(e){super(),this._sessionDispose=this._register(new g.SL),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(MultiCursorSelectionController.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const o=MultiCursorSession.create(this._editor,e);if(!o)return;this._session=o;const s={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(s.wholeWordOverride=1,s.matchCaseOverride=1,s.isRegexOverride=2),e.getState().change(s,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,o){if(!o.isEmpty())return o;const s=this._editor.getConfiguredWordAtPosition(o.getStartPosition());return s?new _.Y(o.startLineNumber,s.startColumn,o.startLineNumber,s.endColumn):o}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const o=this._editor.getSelections();if(o.length>1){const s=e.getState(),l=s.matchCase,d=modelRangesContainSameText(this._editor.getModel(),o,l);if(!d){const e=this._editor.getModel();let s=[];for(let l=0,d=o.length;l<d;l++)s[l]=this._expandEmptyToWord(e,o[l]);return void this._editor.setSelections(s)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let o=null;const s=e.getState();if(s.isRevealed&&s.searchString.length>0&&s.isRegex)o=this._editor.getModel().findMatches(s.searchString,!0,s.isRegex,s.matchCase,s.wholeWord?this._editor.getOption(117):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;o=this._session.selectAll()}if(s.searchScope){const e=s.searchScope;let l=[];o.forEach((o=>{e.forEach((e=>{o.range.endLineNumber<=e.endLineNumber&&o.range.startLineNumber>=e.startLineNumber&&l.push(o)}))})),o=l}if(o.length>0){const e=this._editor.getSelection();for(let s=0,l=o.length;s<l;s++){const l=o[s],d=l.range.intersectRanges(e);if(d){o[s]=o[0],o[0]=l;break}}this._setSelections(o.map((e=>new _.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}}MultiCursorSelectionController.ID="editor.contrib.multiCursorController";class MultiCursorSelectionControllerAction extends p.R6{run(e,o){const s=MultiCursorSelectionController.get(o);if(!s)return;const l=S.CommonFindController.get(o);if(!l)return;const d=o._getViewModel();if(d){const e=d.getCursorStates();this._run(s,l),announceCursorChange(e,d.getCursorStates())}}}class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:y.N("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:C.u.focus,primary:2082,weight:100},menuOpts:{menuId:L.eH.MenubarSelectionMenu,group:"3_multi",title:y.N({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,o){e.addSelectionToNextFindMatch(o)}}class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:y.N("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:L.eH.MenubarSelectionMenu,group:"3_multi",title:y.N({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,o){e.addSelectionToPreviousFindMatch(o)}}class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:y.N("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:C.u.focus,primary:(0,u.gx)(2089,2082),weight:100}})}_run(e,o){e.moveSelectionToNextFindMatch(o)}}class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:y.N("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,o){e.moveSelectionToPreviousFindMatch(o)}}class SelectHighlightsAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.selectHighlights",label:y.N("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:C.u.focus,primary:3114,weight:100},menuOpts:{menuId:L.eH.MenubarSelectionMenu,group:"3_multi",title:y.N({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,o){e.selectAll(o)}}class CompatChangeAll extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.changeAll",label:y.N("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:x.Ao.and(C.u.writable,C.u.editorTextFocus),kbOpts:{kbExpr:C.u.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,o){e.selectAll(o)}}class SelectionHighlighterState{constructor(e,o,s,l,d){this._model=e,this._searchText=o,this._matchCase=s,this._wordSeparators=l,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,d&&this._model===d._model&&this._searchText===d._searchText&&this._matchCase===d._matchCase&&this._wordSeparators===d._wordSeparators&&this._modelVersionId===d._modelVersionId&&(this._cachedFindMatches=d._cachedFindMatches)}findMatches(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((e=>e.range)),this._cachedFindMatches.sort(f.e.compareRangesUsingStarts)),this._cachedFindMatches}}let E=class SelectionHighlighter extends g.JT{constructor(e,o){super(),this._languageFeaturesService=o,this.editor=e,this._isEnabled=e.getOption(97),this.decorations=[],this.updateSoon=this._register(new d.pY((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((o=>{this._isEnabled=e.getOption(97)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()})));const s=S.CommonFindController.get(e);s&&this._register(s.getState().onFindReplaceStateChange((e=>{this._update()})))}_update(){this._setState(SelectionHighlighter._createState(this.state,this._isEnabled,this.editor))}static _createState(e,o,s){if(!o)return null;if(!s.hasModel())return null;const l=s.getSelection();if(l.startLineNumber!==l.endLineNumber)return null;const d=MultiCursorSelectionController.get(s);if(!d)return null;const u=S.CommonFindController.get(s);if(!u)return null;let g=d.getSession(u);if(!g){const e=s.getSelections();if(e.length>1){const o=u.getState(),l=o.matchCase,d=modelRangesContainSameText(s.getModel(),e,l);if(!d)return null}g=MultiCursorSession.create(s,u)}if(!g)return null;if(g.currentMatch)return null;if(/^[ \t]+$/.test(g.searchText))return null;if(g.searchText.length>200)return null;const p=u.getState(),m=p.matchCase;if(p.isRevealed){let e=p.searchString;m||(e=e.toLowerCase());let o=g.searchText;if(m||(o=o.toLowerCase()),e===o&&g.matchCase===p.matchCase&&g.wholeWord===p.wholeWord&&!p.isRegex)return null}return new SelectionHighlighterState(s.getModel(),g.searchText,g.matchCase,g.wholeWord?s.getOption(117):null,e)}_setState(e){if(this.state=e,!this.state)return void(this.decorations=this.editor.deltaDecorations(this.decorations,[]));if(!this.editor.hasModel())return;const o=this.editor.getModel();if(o.isTooLargeForTokenization())return;const s=this.state.findMatches(),l=this.editor.getSelections();l.sort(f.e.compareRangesUsingStarts);const d=[];for(let p=0,m=0,_=s.length,C=l.length;p<_;){const e=s[p];if(m>=C)d.push(e),p++;else{const o=f.e.compareRangesUsingStarts(e,l[m]);o<0?(!l[m].isEmpty()&&f.e.areIntersecting(e,l[m])||d.push(e),p++):(o>0||p++,m++)}}const u=this._languageFeaturesService.documentHighlightProvider.has(o)&&this.editor.getOption(72),g=d.map((e=>({range:e,options:u?SelectionHighlighter._SELECTION_HIGHLIGHT:SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW})));this.decorations=this.editor.deltaDecorations(this.decorations,g)}dispose(){this._setState(null),super.dispose()}};function modelRangesContainSameText(e,o,s){const l=getValueInRange(e,o[0],!s);for(let d=1,u=o.length;d<u;d++){const u=o[d];if(u.isEmpty())return!1;const g=getValueInRange(e,u,!s);if(l!==g)return!1}return!0}function getValueInRange(e,o,s){const l=e.getValueInRange(o);return s?l.toLowerCase():l}E.ID="editor.contrib.selectionHighlighter",E._SELECTION_HIGHLIGHT_OVERVIEW=w.qx.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:(0,N.EN)(k.IYc),position:b.F5.Inline},overviewRuler:{color:(0,N.EN)(k.SPM),position:b.sh.Center}}),E._SELECTION_HIGHLIGHT=w.qx.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),E=__decorate([__param(1,D.p)],E),(0,p._K)(MultiCursorSelectionController.ID,MultiCursorSelectionController),(0,p._K)(E.ID,E),(0,p.Qr)(InsertCursorAbove),(0,p.Qr)(InsertCursorBelow),(0,p.Qr)(InsertCursorAtEndOfEachLineSelected),(0,p.Qr)(AddSelectionToNextFindMatchAction),(0,p.Qr)(AddSelectionToPreviousFindMatchAction),(0,p.Qr)(MoveSelectionToNextFindMatchAction),(0,p.Qr)(MoveSelectionToPreviousFindMatchAction),(0,p.Qr)(SelectHighlightsAction),(0,p.Qr)(CompatChangeAll),(0,p.Qr)(InsertCursorAtEndOfLineSelected),(0,p.Qr)(InsertCursorAtTopOfLineSelected)},7660:function(e,o,s){"use strict";s.r(o),s.d(o,{TriggerParameterHintsAction:function(){return TriggerParameterHintsAction}});var l=s(5976),d=s(6830),u=s(9102),g=s(3155),p=s(1050),m=s(7301),f=s(8401),_=s(666),C=s(187),b=s(8216),w=s(4565),S=s(8819),y=s(1922),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const L={Visible:new S.uy("parameterHintsVisible",!1),MultipleSignatures:new S.uy("parameterHintsMultipleSignatures",!1)};function provideSignatureHelp(e,o,s,l,d){return __awaiter(this,void 0,void 0,(function*(){const u=e.ordered(o);for(const e of u)try{const u=yield e.provideSignatureHelp(o,s,d,l);if(u)return u}catch(g){(0,m.Cp)(g)}}))}w.P0.registerCommand("_executeSignatureHelpProvider",((e,...o)=>__awaiter(void 0,void 0,void 0,(function*(){const[s,l,d]=o;(0,f.p_)(_.o.isUri(s)),(0,f.p_)(C.L.isIPosition(l)),(0,f.p_)("string"===typeof d||!d);const u=e.get(y.p),m=yield e.get(b.S).createModelReference(s);try{const e=yield provideSignatureHelp(u.signatureHelpProvider,m.object.textEditorModel,C.L.lift(l),{triggerKind:g.WW.Invoke,isRetrigger:!1,triggerCharacter:d},p.T.None);if(!e)return;return setTimeout((()=>e.dispose()),0),e.value}finally{m.dispose()}}))));var x,k=s(3580),N=s(2065),D=s(5321),E=s(5152),T=s(3161),I=s(3046),A=s(4669),M=s(2677),R=s(5831),P=s(2042),O=s(5393),F=s(4906),parameterHintsModel_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};(function(e){e.Default={type:0};class Pending{constructor(e,o){this.request=e,this.previouslyActiveHints=o,this.type=2}}e.Pending=Pending;class Active{constructor(e){this.hints=e,this.type=1}}e.Active=Active})(x||(x={}));class ParameterHintsModel extends l.JT{constructor(e,o,s=ParameterHintsModel.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new A.Q5),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=x.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new l.XK),this.triggerChars=new F.q,this.retriggerChars=new F.q,this.triggerId=0,this.editor=e,this.providers=o,this.throttledDelayer=new O.vp(s),this._register(this.editor.onDidBlurEditorWidget((()=>this.cancel()))),this._register(this.editor.onDidChangeConfiguration((()=>this.onEditorConfigurationChange()))),this._register(this.editor.onDidChangeModel((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeModelLanguage((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeCursorSelection((e=>this.onCursorChange(e)))),this._register(this.editor.onDidChangeModelContent((e=>this.onModelContentChange()))),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType((e=>this.onDidType(e)))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){2===this._state.type&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=x.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,o){const s=this.editor.getModel();if(!s||!this.providers.has(s))return;const l=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger((()=>this.doTrigger(l)),o).catch(m.dL)}next(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,o=this.state.hints.activeSignature,s=o%e===e-1,l=this.editor.getOption(76).cycle;!(e<2||s)||l?this.updateActiveSignature(s&&l?0:o+1):this.cancel()}previous(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,o=this.state.hints.activeSignature,s=0===o,l=this.editor.getOption(76).cycle;!(e<2||s)||l?this.updateActiveSignature(s&&l?e-1:o-1):this.cancel()}updateActiveSignature(e){1===this.state.type&&(this.state=new x.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return parameterHintsModel_awaiter(this,void 0,void 0,(function*(){const o=1===this.state.type||2===this.state.type,s=this.getLastActiveHints();if(this.cancel(!0),0===this._pendingTriggers.length)return!1;const l=this._pendingTriggers.reduce(mergeTriggerContexts);this._pendingTriggers=[];const d={triggerKind:l.triggerKind,triggerCharacter:l.triggerCharacter,isRetrigger:o,activeSignatureHelp:s};if(!this.editor.hasModel())return!1;const u=this.editor.getModel(),g=this.editor.getPosition();this.state=new x.Pending((0,O.PG)((e=>provideSignatureHelp(this.providers,u,g,d,e))),s);try{const o=yield this.state.request;return e!==this.triggerId?(null===o||void 0===o||o.dispose(),!1):o&&o.value.signatures&&0!==o.value.signatures.length?(this.state=new x.Active(o.value),this._lastSignatureHelpResult.value=o,this._onChangedHints.fire(this.state.hints),!0):(null===o||void 0===o||o.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(p){return e===this.triggerId&&(this.state=x.Default),(0,m.dL)(p),!1}}))}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new F.q,this.retriggerChars=new F.q;const e=this.editor.getModel();if(e)for(const o of this.providers.ordered(e)){for(const e of o.signatureHelpTriggerCharacters||[])this.triggerChars.add(e.charCodeAt(0)),this.retriggerChars.add(e.charCodeAt(0));for(const e of o.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(e.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const o=e.length-1,s=e.charCodeAt(o);(this.triggerChars.has(s)||this.isTriggered&&this.retriggerChars.has(s))&&this.trigger({triggerKind:g.WW.TriggerCharacter,triggerCharacter:e.charAt(o)})}onCursorChange(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:g.WW.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:g.WW.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(76).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}function mergeTriggerContexts(e,o){switch(o.triggerKind){case g.WW.Invoke:return o;case g.WW.ContentChange:return e;case g.WW.TriggerCharacter:default:return o}}ParameterHintsModel.DEFAULT_DELAY=120;var B=s(988),W=s(3910),V=s(9554),H=s(2321),z=s(7781),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const U=D.$,K=(0,V.q5)("parameter-hints-next",I.lA.chevronDown,k.N("parameterHintsNextIcon","Icon for show next parameter hint.")),j=(0,V.q5)("parameter-hints-previous",I.lA.chevronUp,k.N("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let G=class ParameterHintsWidget extends l.JT{constructor(e,o,s,d,u){super(),this.editor=e,this.renderDisposeables=this._register(new l.SL),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new R.$({editor:e},d,s)),this.model=this._register(new ParameterHintsModel(e,u.signatureHelpProvider)),this.keyVisible=L.Visible.bindTo(o),this.keyMultipleSignatures=L.MultipleSignatures.bindTo(o),this._register(this.model.onChangedHints((e=>{e?(this.show(),this.render(e)):this.hide()})))}createParameterHintDOMNodes(){const e=U(".editor-widget.parameter-hints-widget"),o=D.R3(e,U(".phwrapper"));o.tabIndex=-1;const s=D.R3(o,U(".controls")),l=D.R3(s,U(".button"+z.kS.asCSSSelector(j))),d=D.R3(s,U(".overloads")),u=D.R3(s,U(".button"+z.kS.asCSSSelector(K)));this._register(D.nm(l,"click",(e=>{D.zB.stop(e),this.previous()}))),this._register(D.nm(u,"click",(e=>{D.zB.stop(e),this.next()})));const g=U(".body"),p=new T.s$(g,{});this._register(p),o.appendChild(p.getDomNode());const m=D.R3(g,U(".signature")),f=D.R3(g,U(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:m,overloads:d,docs:f,scrollbar:p},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((e=>{this.visible&&this.editor.layoutContentWidget(this)})));const updateFont=()=>{if(!this.domNodes)return;const e=this.editor.getOption(44);this.domNodes.element.style.fontSize=`${e.fontSize}px`,this.domNodes.element.style.lineHeight=""+e.lineHeight/e.fontSize};updateFont(),this._register(A.ju.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter((e=>e.hasChanged(44))).on(updateFont,null)),this._register(this.editor.onDidLayoutChange((e=>this.updateMaxHeight()))),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((()=>{this.domNodes&&this.domNodes.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var o;if(this.renderDisposeables.clear(),!this.domNodes)return;const s=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",s),this.keyMultipleSignatures.set(s),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const l=e.signatures[e.activeSignature];if(!l)return;const d=D.R3(this.domNodes.signature,U(".code")),u=this.editor.getOption(44);d.style.fontSize=`${u.fontSize}px`,d.style.fontFamily=u.fontFamily;const g=l.parameters.length>0,p=null!==(o=l.activeParameter)&&void 0!==o?o:e.activeParameter;if(g)this.renderParameters(d,l,p);else{const e=D.R3(d,U("span"));e.textContent=l.label}const m=l.parameters[p];if(null===m||void 0===m?void 0:m.documentation){const e=U("span.documentation");if("string"===typeof m.documentation)e.textContent=m.documentation;else{const o=this.renderMarkdownDocs(m.documentation);e.appendChild(o.element)}D.R3(this.domNodes.docs,U("p",{},e))}if(void 0===l.documentation);else if("string"===typeof l.documentation)D.R3(this.domNodes.docs,U("p",{},l.documentation));else{const e=this.renderMarkdownDocs(l.documentation);D.R3(this.domNodes.docs,e.element)}const f=this.hasDocs(l,m);if(this.domNodes.signature.classList.toggle("has-docs",f),this.domNodes.docs.classList.toggle("empty",!f),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,m){let e="";const o=l.parameters[p];e=Array.isArray(o.label)?l.label.substring(o.label[0],o.label[1]):o.label,o.documentation&&(e+="string"===typeof o.documentation?`, ${o.documentation}`:`, ${o.documentation.value}`),l.documentation&&(e+="string"===typeof l.documentation?`, ${l.documentation}`:`, ${l.documentation.value}`),this.announcedLabel!==e&&(E.Z9(k.N("hint","{0}, hint",e)),this.announcedLabel=e)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const o=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var e;null===(e=this.domNodes)||void 0===e||e.scrollbar.scanDomNode()}}));return o.element.classList.add("markdown-docs"),o}hasDocs(e,o){return!!(o&&"string"===typeof o.documentation&&(0,f.cW)(o.documentation).length>0)||(!!(o&&"object"===typeof o.documentation&&(0,f.cW)(o.documentation).value.length>0)||(!!(e.documentation&&"string"===typeof e.documentation&&(0,f.cW)(e.documentation).length>0)||!!(e.documentation&&"object"===typeof e.documentation&&(0,f.cW)(e.documentation.value).length>0)))}renderParameters(e,o,s){const[l,d]=this.getParameterLabelOffsets(o,s),u=document.createElement("span");u.textContent=o.label.substring(0,l);const g=document.createElement("span");g.textContent=o.label.substring(l,d),g.className="parameter active";const p=document.createElement("span");p.textContent=o.label.substring(d),D.R3(e,u,g,p)}getParameterLabelOffsets(e,o){const s=e.parameters[o];if(s){if(Array.isArray(s.label))return s.label;if(s.label.length){const o=new RegExp(`(\\W|^)${(0,M.ec)(s.label)}(?=\\W|$)`,"g");o.test(e.label);const l=o.lastIndex-s.label.length;return l>=0?[l,o.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return ParameterHintsWidget.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const e=Math.max(this.editor.getLayoutInfo().height/4,250),o=`${e}px`;this.domNodes.element.style.maxHeight=o;const s=this.domNodes.element.getElementsByClassName("phwrapper");s.length&&(s[0].style.maxHeight=o)}};G.ID="editor.widget.parameterHintsWidget",G=__decorate([__param(1,S.i6),__param(2,B.v4),__param(3,P.O),__param(4,y.p)],G);const q=(0,W.P6G)("editorHoverWidget.highlightForeground",{dark:W.Gwp,light:W.Gwp,hc:W.Gwp},k.N("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));(0,z.Ic)(((e,o)=>{const s=e.getColor(W.CNo);if(s){const l=e.type===H.e.HIGH_CONTRAST?2:1;o.addRule(`.monaco-editor .parameter-hints-widget { border: ${l}px solid ${s}; }`),o.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${s.transparent(.5)}; }`),o.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${s.transparent(.5)}; }`)}const l=e.getColor(W.yJx);l&&o.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${l}; }`);const d=e.getColor(W.url);d&&o.addRule(`.monaco-editor .parameter-hints-widget a { color: ${d}; }`);const u=e.getColor(W.sgC);u&&o.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${u}; }`);const g=e.getColor(W.Sbf);g&&o.addRule(`.monaco-editor .parameter-hints-widget { color: ${g}; }`);const p=e.getColor(W.SwI);p&&o.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${p}; }`);const m=e.getColor(q);m&&o.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${m}}`)}));var parameterHints_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},parameterHints_param=function(e,o){return function(s,l){o(s,l,e)}};let Q=class ParameterHintsController extends l.JT{constructor(e,o){super(),this.editor=e,this.widget=this._register(o.createInstance(G,this.editor))}static get(e){return e.getContribution(ParameterHintsController.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};Q.ID="editor.controller.parameterHints",Q=parameterHints_decorate([parameterHints_param(1,N.TG)],Q);class TriggerParameterHintsAction extends d.R6{constructor(){super({id:"editor.action.triggerParameterHints",label:k.N("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:u.u.hasSignatureHelpProvider,kbOpts:{kbExpr:u.u.editorTextFocus,primary:3082,weight:100}})}run(e,o){const s=Q.get(o);s&&s.trigger({triggerKind:g.WW.Invoke})}}(0,d._K)(Q.ID,Q),(0,d.Qr)(TriggerParameterHintsAction);const Z=175,Y=d._l.bindToContribution(Q.get);(0,d.fK)(new Y({id:"closeParameterHints",precondition:L.Visible,handler:e=>e.cancel(),kbOpts:{weight:Z,kbExpr:u.u.focus,primary:9,secondary:[1033]}})),(0,d.fK)(new Y({id:"showPrevParameterHint",precondition:S.Ao.and(L.Visible,L.MultipleSignatures),handler:e=>e.previous(),kbOpts:{weight:Z,kbExpr:u.u.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,d.fK)(new Y({id:"showNextParameterHint",precondition:S.Ao.and(L.Visible,L.MultipleSignatures),handler:e=>e.next(),kbOpts:{weight:Z,kbExpr:u.u.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}))},6943:function(e,o,s){"use strict";s.d(o,{Fw:function(){return P},Jy:function(){return O},vk:function(){return W},rc:function(){return getOuterEditor},SC:function(){return U},M8:function(){return K},KY:function(){return V},IH:function(){return H},R7:function(){return z}});var l=s(5321),d=s(317),u=s(4741),g=s(3046),p=s(1264),m=s(4669),f=s(6248),_=s(6830),C=s(1640),b=s(4527),w=s(3098),S=s(4742),y=s(5976),L=s(4314),x=s(2822);const k=new p.Il(new p.VS(0,122,204)),N={showArrow:!0,showFrame:!0,className:"",frameColor:k,arrowColor:k,keepEditorSelection:!1},D="vs.editor.contrib.zoneWidget";class ViewZoneDelegate{constructor(e,o,s,l,d,u){this.id="",this.domNode=e,this.afterLineNumber=o,this.afterColumn=s,this.heightInLines=l,this._onDomNodeTop=d,this._onComputedHeight=u}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class OverlayWidgetDelegate{constructor(e,o){this._id=e,this._domNode=o}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class Arrow{constructor(e){this._editor=e,this._ruleName=Arrow._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),l.uN(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){l.uN(this._ruleName),l.fk(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){1===e.column&&(e={lineNumber:e.lineNumber,column:2}),this._decorations=this._editor.deltaDecorations(this._decorations,[{range:L.e.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}Arrow._IdGenerator=new S.R(".arrow-decoration-");class ZoneWidget{constructor(e,o={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new y.SL,this.container=null,this._isShowing=!1,this.editor=e,this.options=f.I8(o),f.jB(this.options,N,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange((e=>{const o=this._getWidth(e);this.domNode.style.width=o+"px",this.domNode.style.left=this._getLeft(e)+"px",this._onWidth(o)})))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones((e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null})),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Arrow(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let o=e-this._decoratingElementsHeight();this.container.style.height=`${o}px`;const s=this.editor.getLayoutInfo();this._doLayout(o,this._getWidth(s))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const o=this.editor.getModel();if(!o)return;const s=o.getDecorationRange(e);return s?s.getStartPosition():void 0}show(e,o){const s=L.e.isIRange(e)?L.e.lift(e):L.e.fromPositions(e);this._isShowing=!0,this._showImpl(s,o),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:s,options:x.qx.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones((e=>{this._viewZone&&e.removeZone(this._viewZone.id)})),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(59),o=0;if(this.options.showArrow){let s=Math.round(e/3);o+=2*s}if(this.options.showFrame){let s=Math.round(e/9);o+=2*s}return o}_showImpl(e,o){const s=e.getStartPosition(),l=this.editor.getLayoutInfo(),d=this._getWidth(l);this.domNode.style.width=`${d}px`,this.domNode.style.left=this._getLeft(l)+"px";const u=document.createElement("div");u.style.overflow="hidden";const g=this.editor.getOption(59),p=Math.max(12,this.editor.getLayoutInfo().height/g*.8);o=Math.min(o,p);let m=0,f=0;if(this._arrow&&this.options.showArrow&&(m=Math.round(g/3),this._arrow.height=m,this._arrow.show(s)),this.options.showFrame&&(f=Math.round(g/9)),this.editor.changeViewZones((e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new ViewZoneDelegate(u,s.lineNumber,s.column,o,(e=>this._onViewZoneTop(e)),(e=>this._onViewZoneHeight(e))),this._viewZone.id=e.addZone(this._viewZone),this._overlayWidget=new OverlayWidgetDelegate(D+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)})),this.container&&this.options.showFrame){const e=this.options.frameWidth?this.options.frameWidth:f;this.container.style.borderTopWidth=e+"px",this.container.style.borderBottomWidth=e+"px"}let _=o*g-this._decoratingElementsHeight();this.container&&(this.container.style.top=m+"px",this.container.style.height=_+"px",this.container.style.overflow="hidden"),this._doLayout(_,d),this.options.keepEditorSelection||this.editor.setSelection(e);const C=this.editor.getModel();if(C){const o=e.endLineNumber+1;o<=C.getLineCount()?this.revealLine(o,!1):this.revealLine(C.getLineCount(),!0)}}revealLine(e,o){o?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,o){this.container&&(o&&this.container.classList.remove(o),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,o){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones((o=>{this._viewZone&&(this._viewZone.heightInLines=e,o.layoutZone(this._viewZone.id))}))}_initSash(){if(this._resizeSash)return;let e;this._resizeSash=this._disposables.add(new w.g(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0),this._disposables.add(this._resizeSash.onDidStart((o=>{this._viewZone&&(e={startY:o.startY,heightInLines:this._viewZone.heightInLines})}))),this._disposables.add(this._resizeSash.onDidEnd((()=>{e=void 0}))),this._disposables.add(this._resizeSash.onDidChange((o=>{if(e){let s=(o.currentY-e.startY)/this.editor.getOption(59),l=s<0?Math.ceil(s):Math.floor(s),d=e.heightInLines+l;d>5&&d<35&&this._relayout(d)}})))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(null===this.domNode.style.height?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var E=s(3580),T=s(4167),I=s(8819),A=s(5026),M=s(2065),R=s(3910),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const P=(0,M.yh)("IPeekViewService");var O;(0,A.z)(P,class{constructor(){this._widgets=new Map}addExclusiveWidget(e,o){const s=this._widgets.get(e);s&&(s.listener.dispose(),s.widget.dispose());const remove=()=>{const s=this._widgets.get(e);s&&s.widget===o&&(s.listener.dispose(),this._widgets.delete(e))};this._widgets.set(e,{widget:o,listener:o.onDidClose(remove)})}}),function(e){e.inPeekEditor=new I.uy("inReferenceSearchEditor",!0,E.N("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),e.notInPeekEditor=e.inPeekEditor.toNegated()}(O||(O={}));let F=class PeekContextController{constructor(e,o){e instanceof b.H&&O.inPeekEditor.bindTo(o)}dispose(){}};function getOuterEditor(e){let o=e.get(C.$).getFocusedCodeEditor();return o instanceof b.H?o.getParentEditor():o}F.ID="editor.contrib.referenceController",F=__decorate([__param(1,I.i6)],F),(0,_._K)(F.ID,F);const B={headerBackgroundColor:p.Il.white,primaryHeadingColor:p.Il.fromHex("#333333"),secondaryHeadingColor:p.Il.fromHex("#6c6c6cb3")};let W=class PeekViewWidget extends ZoneWidget{constructor(e,o,s){super(e,o),this.instantiationService=s,this._onDidClose=new m.Q5,this.onDidClose=this._onDidClose.event,f.jB(this.options,B,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let o=this.options;e.headerBackgroundColor&&(o.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(o.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(o.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=l.$(".head"),this._bodyElement=l.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,o){const s=l.$(".peekview-title");this.options.supportOnTitleClick&&(s.classList.add("clickable"),l.mu(s,"click",(e=>this._onTitleClick(e)))),l.R3(this._headElement,s),this._fillTitleIcon(s),this._primaryHeading=l.$("span.filename"),this._secondaryHeading=l.$("span.dirname"),this._metaHeading=l.$("span.meta"),l.R3(s,this._primaryHeading,this._secondaryHeading,this._metaHeading);const p=l.$(".peekview-actions");l.R3(this._headElement,p);const m=this._getActionBarOptions();this._actionbarWidget=new d.o(p,m),this._disposables.add(this._actionbarWidget),o||this._actionbarWidget.push(new u.aU("peekview.close",E.N("label.close","Close"),g.lA.close.classNames,!0,(()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:T.Id.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,o){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),o?this._secondaryHeading.innerText=o:l.PO(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,l.$Z(this._metaHeading)):l.Cp(this._metaHeading))}_doLayout(e,o){if(!this._isShowing&&e<0)return void this.dispose();const s=Math.ceil(1.2*this.editor.getOption(59)),l=Math.round(e-(s+2));this._doLayoutHead(s,o),this._doLayoutBody(l,o)}_doLayoutHead(e,o){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,o){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};W=__decorate([__param(2,M.TG)],W);const V=(0,R.P6G)("peekViewTitle.background",{dark:(0,R.ZnX)(R.c63,.1),light:(0,R.ZnX)(R.c63,.1),hc:null},E.N("peekViewTitleBackground","Background color of the peek view title area.")),H=(0,R.P6G)("peekViewTitleLabel.foreground",{dark:p.Il.white,light:p.Il.black,hc:p.Il.white},E.N("peekViewTitleForeground","Color of the peek view title.")),z=(0,R.P6G)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},E.N("peekViewTitleInfoForeground","Color of the peek view title info.")),U=(0,R.P6G)("peekView.border",{dark:R.c63,light:R.c63,hc:R.lRK},E.N("peekViewBorder","Color of the peek view borders and arrow.")),K=(0,R.P6G)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:p.Il.black},E.N("peekViewResultsBackground","Background color of the peek view result list.")),j=((0,R.P6G)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:p.Il.white},E.N("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),(0,R.P6G)("peekViewResult.fileForeground",{dark:p.Il.white,light:"#1E1E1E",hc:p.Il.white},E.N("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),(0,R.P6G)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},E.N("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),(0,R.P6G)("peekViewResult.selectionForeground",{dark:p.Il.white,light:"#6C6C6C",hc:p.Il.white},E.N("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),(0,R.P6G)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:p.Il.black},E.N("peekViewEditorBackground","Background color of the peek view editor.")));(0,R.P6G)("peekViewEditorGutter.background",{dark:j,light:j,hc:j},E.N("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),(0,R.P6G)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},E.N("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),(0,R.P6G)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},E.N("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),(0,R.P6G)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:R.xL1},E.N("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."))},3943:function(e,o,s){"use strict";s.d(o,{X:function(){return AbstractEditorNavigationQuickAccessProvider}});var l=s(8289),d=s(5976),u=s(8401),g=s(5520),p=s(4973),m=s(8625),f=s(7781);class AbstractEditorNavigationQuickAccessProvider{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,o){var s;const l=new d.SL;e.canAcceptInBackground=!!(null===(s=this.options)||void 0===s?void 0:s.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const u=l.add(new d.XK);return u.value=this.doProvide(e,o),l.add(this.onDidActiveTextEditorControlChange((()=>{u.value=void 0,u.value=this.doProvide(e,o)}))),l}doProvide(e,o){const s=new d.SL,p=this.activeTextEditorControl;if(p&&this.canProvideWithTextEditor(p)){const m={editor:p},f=(0,g.Pi)(p);if(f){let e=(0,u.f6)(p.saveViewState());s.add(f.onDidChangeCursorPosition((()=>{e=(0,u.f6)(p.saveViewState())}))),m.restoreViewState=()=>{e&&p===this.activeTextEditorControl&&p.restoreViewState(e)},s.add((0,l.I)(o.onCancellationRequested)((()=>{var e;return null===(e=m.restoreViewState)||void 0===e?void 0:e.call(m)})))}s.add((0,d.OF)((()=>this.clearDecorations(p)))),s.add(this.provideWithTextEditor(m,e,o))}else s.add(this.provideWithoutTextEditor(e,o));return s}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},o){e.setSelection(o.range),e.revealRangeInCenter(o.range,0),o.preserveFocus||e.focus()}getModel(e){var o;return(0,g.QI)(e)?null===(o=e.getModel())||void 0===o?void 0:o.modified:e.getModel()}addDecorations(e,o){e.changeDecorations((e=>{const s=[];this.rangeHighlightDecorationId&&(s.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),s.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const l=[{range:o,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:o,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,f.EN)(m.m9),position:p.sh.Full}}}],[d,u]=e.deltaDecorations(s,l);this.rangeHighlightDecorationId={rangeHighlightId:d,overviewRulerDecorationId:u}}))}clearDecorations(e){const o=this.rangeHighlightDecorationId;o&&(e.changeDecorations((e=>{e.deltaDecorations([o.overviewRulerDecorationId,o.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}},2379:function(e,o,s){"use strict";s.r(o),s.d(o,{RenameAction:function(){return RenameAction},rename:function(){return rename}});var l=s(5152),d=s(5393),u=s(1050),g=s(7301),p=s(5976),m=s(8401),f=s(666),_=s(4410),C=s(6830),b=s(6007),w=s(1640),S=s(187),y=s(4314),L=s(9102),x=s(1765),k=s(7753),N=s(3580),D=s(3193),E=s(8819),T=s(2065),I=s(3557),A=s(9422),M=s(535),R=s(9872),P=s(1847),O=s(3910),F=s(7781),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const B=new E.uy("renameInputVisible",!1,(0,N.N)("renameInputVisible","Whether the rename input widget is visible"));let W=class RenameInputField{constructor(e,o,s,l,d){this._editor=e,this._acceptKeybindings=o,this._themeService=s,this._keybindingService=l,this._disposables=new p.SL,this.allowEditorOverflow=!0,this._visibleContextKey=B.bindTo(d),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(44)&&this._updateFont()}))),this._disposables.add(s.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,N.N)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const updateLabel=()=>{var e,o;const[s,l]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(s),this._label.innerText=(0,N.N)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(s))||void 0===e?void 0:e.getLabel(),null===(o=this._keybindingService.lookupKeybinding(l))||void 0===o?void 0:o.getLabel())};updateLabel(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var o,s,l,d;if(!this._input||!this._domNode)return;const u=e.getColor(O.rh);this._domNode.style.backgroundColor=String(null!==(o=e.getColor(O.D0T))&&void 0!==o?o:""),this._domNode.style.boxShadow=u?` 0 0 8px 2px ${u}`:"",this._domNode.style.color=String(null!==(s=e.getColor(O.zJb))&&void 0!==s?s:""),this._input.style.backgroundColor=String(null!==(l=e.getColor(O.sEe))&&void 0!==l?l:"");const g=e.getColor(O.dt_);this._input.style.borderWidth=g?"1px":"0px",this._input.style.borderStyle=g?"solid":"none",this._input.style.borderColor=null!==(d=null===g||void 0===g?void 0:g.toString())&&void 0!==d?d:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(44);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=.8*e.fontSize+"px"}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,o,s,l,d,u){this._domNode.classList.toggle("preview",d),this._position=new S.L(e.startLineNumber,e.startColumn),this._input.value=o,this._input.setAttribute("selectionStart",s.toString()),this._input.setAttribute("selectionEnd",l.toString()),this._input.size=Math.max(1.1*(e.endColumn-e.startColumn),20);const g=new p.SL;return new Promise((e=>{this._currentCancelInput=o=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e(o),!0),this._currentAcceptInput=s=>{0!==this._input.value.trim().length&&this._input.value!==o?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e({newName:this._input.value,wantsPreview:d&&s})):this.cancelInput(!0)},g.add(u.onCancellationRequested((()=>this.cancelInput(!0)))),g.add(this._editor.onDidBlurEditorWidget((()=>this.cancelInput(!1)))),this._show()})).finally((()=>{g.dispose(),this._hide()}))}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))}),100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};W=__decorate([__param(2,F.XE),__param(3,P.d),__param(4,E.i6)],W);var V=s(1922),rename_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},rename_param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class RenameSkeleton{constructor(e,o,s){this.model=e,this.position=o,this._providerRenameIdx=0,this._providers=s.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return __awaiter(this,void 0,void 0,(function*(){const o=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const s=this._providers[this._providerRenameIdx];if(!s.resolveRenameLocation)break;let l=yield s.resolveRenameLocation(this.model,this.position,e);if(l){if(!l.rejectReason)return l;o.push(l.rejectReason)}}const s=this.model.getWordAtPosition(this.position);return s?{range:new y.e(this.position.lineNumber,s.startColumn,this.position.lineNumber,s.endColumn),text:s.word,rejectReason:o.length>0?o.join("\n"):void 0}:{range:y.e.fromPositions(this.position),text:"",rejectReason:o.length>0?o.join("\n"):void 0}}))}provideRenameEdits(e,o){return __awaiter(this,void 0,void 0,(function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],o)}))}_provideRenameEdits(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=this._providers[o];if(!d)return{edits:[],rejectReason:s.join("\n")};const u=yield d.provideRenameEdits(this.model,this.position,e,l);return u?u.rejectReason?this._provideRenameEdits(e,o+1,s.concat(u.rejectReason),l):u:this._provideRenameEdits(e,o+1,s.concat(N.N("no result","No result.")),l)}))}}function rename(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=new RenameSkeleton(o,s,e),g=yield d.resolveRenameLocation(u.T.None);return(null===g||void 0===g?void 0:g.rejectReason)?{edits:[],rejectReason:g.rejectReason}:d.provideRenameEdits(l,u.T.None)}))}let H=class RenameController{constructor(e,o,s,l,g,m,f,_){this.editor=e,this._instaService=o,this._notificationService=s,this._bulkEditService=l,this._progressService=g,this._logService=m,this._configService=f,this._languageFeaturesService=_,this._dispoableStore=new p.SL,this._cts=new u.A,this._renameInputField=this._dispoableStore.add(new d.Ue((()=>this._dispoableStore.add(this._instaService.createInstance(W,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"])))))}static get(e){return e.getContribution(RenameController.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){var e,o;return __awaiter(this,void 0,void 0,(function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const s=this.editor.getPosition(),u=new RenameSkeleton(this.editor.getModel(),s,this._languageFeaturesService.renameProvider);if(!u.hasProvider())return;let g;this._cts=new _.Dl(this.editor,5);try{const e=u.resolveRenameLocation(this._cts.token);this._progressService.showWhile(e,250),g=yield e}catch(L){return void(null===(e=k.O.get(this.editor))||void 0===e||e.showMessage(L||N.N("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),s))}if(!g)return;if(g.rejectReason)return void(null===(o=k.O.get(this.editor))||void 0===o||o.showMessage(g.rejectReason,s));if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new _.Dl(this.editor,5,g.range);let p=this.editor.getSelection(),m=0,f=g.text.length;y.e.isEmpty(p)||y.e.spansMultipleLines(p)||!y.e.containsRange(g.range,p)||(m=Math.max(0,p.startColumn-g.range.startColumn),f=Math.min(g.range.endColumn,p.endColumn)-g.range.startColumn);const C=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),w=yield this._renameInputField.value.getInput(g.range,g.text,m,f,C,this._cts.token);if("boolean"===typeof w)return void(w&&this.editor.focus());this.editor.focus();const S=(0,d.eP)(u.provideRenameEdits(w.newName,this._cts.token),this._cts.token).then((e=>__awaiter(this,void 0,void 0,(function*(){e&&this.editor.hasModel()&&(e.rejectReason?this._notificationService.info(e.rejectReason):(this.editor.setSelection(y.e.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(b.fo.convert(e),{editor:this.editor,showPreview:w.wantsPreview,label:N.N("label","Renaming '{0}'",null===g||void 0===g?void 0:g.text),quotableLabel:N.N("quotableLabel","Renaming {0}",null===g||void 0===g?void 0:g.text)}).then((e=>{e.ariaSummary&&(0,l.Z9)(N.N("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",g.text,w.newName,e.ariaSummary))})).catch((e=>{this._notificationService.error(N.N("rename.failedApply","Rename failed to apply edits")),this._logService.error(e)}))))}))),(e=>{this._notificationService.error(N.N("rename.failed","Rename failed to compute edits")),this._logService.error(e)}));return this._progressService.showWhile(S,250),S}))}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};H.ID="editor.contrib.renameController",H=rename_decorate([rename_param(1,T.TG),rename_param(2,A.lT),rename_param(3,b.vu),rename_param(4,M.ek),rename_param(5,I.VZ),rename_param(6,x.V),rename_param(7,V.p)],H);class RenameAction extends C.R6{constructor(){super({id:"editor.action.rename",label:N.N("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:E.Ao.and(L.u.writable,L.u.hasRenameProvider),kbOpts:{kbExpr:L.u.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,o){const s=e.get(w.$),[l,d]=Array.isArray(o)&&o||[void 0,void 0];return f.o.isUri(l)&&S.L.isIPosition(d)?s.openCodeEditor({resource:l},s.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(d),e.invokeWithinContext((o=>(this.reportTelemetry(o,e),this.run(o,e)))))}),g.dL):super.runCommand(e,o)}run(e,o){const s=H.get(o);return s?s.run():Promise.resolve()}}(0,C._K)(H.ID,H),(0,C.Qr)(RenameAction);const z=C._l.bindToContribution(H.get);(0,C.fK)(new z({id:"acceptRenameInput",precondition:B,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:L.u.focus,primary:3}})),(0,C.fK)(new z({id:"acceptRenameInputWithPreview",precondition:E.Ao.and(B,E.Ao.has("config.editor.rename.enablePreview")),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:L.u.focus,primary:1027}})),(0,C.fK)(new z({id:"cancelRenameInput",precondition:B,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:L.u.focus,primary:9,secondary:[1033]}})),(0,C.sb)("_executeDocumentRenameProvider",(function(e,o,s,...l){const[d]=l;(0,m.p_)("string"===typeof d);const{renameProvider:u}=e.get(V.p);return rename(u,o,s,d)})),(0,C.sb)("_executePrepareRename",(function(e,o,s){return __awaiter(this,void 0,void 0,(function*(){const{renameProvider:l}=e.get(V.p),d=new RenameSkeleton(o,s,l),g=yield d.resolveRenameLocation(u.T.None);if(null===g||void 0===g?void 0:g.rejectReason)throw new Error(g.rejectReason);return g}))})),R.B.as(D.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:N.N("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})},9694:function(e,o,s){"use strict";s.d(o,{x:function(){return BracketSelectionRangeProvider}});var l=s(1741),d=s(187),u=s(4314),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class BracketSelectionRangeProvider{provideSelectionRanges(e,o){return __awaiter(this,void 0,void 0,(function*(){const s=[];for(const l of o){const o=[];s.push(o);const d=new Map;yield new Promise((o=>BracketSelectionRangeProvider._bracketsRightYield(o,0,e,l,d))),yield new Promise((s=>BracketSelectionRangeProvider._bracketsLeftYield(s,0,e,l,d,o)))}return s}))}static _bracketsRightYield(e,o,s,d,u){const g=new Map,p=Date.now();while(1){if(o>=BracketSelectionRangeProvider._maxRounds){e();break}if(!d){e();break}let m=s.bracketPairs.findNextBracket(d);if(!m){e();break}let f=Date.now()-p;if(f>BracketSelectionRangeProvider._maxDuration){setTimeout((()=>BracketSelectionRangeProvider._bracketsRightYield(e,o+1,s,d,u)));break}const _=m.close[0];if(m.isOpen){let e=g.has(_)?g.get(_):0;g.set(_,e+1)}else{let e=g.has(_)?g.get(_):0;if(e-=1,g.set(_,Math.max(0,e)),e<0){let e=u.get(_);e||(e=new l.S,u.set(_,e)),e.push(m.range)}}d=m.range.getEndPosition()}}static _bracketsLeftYield(e,o,s,l,d,g){const p=new Map,m=Date.now();while(1){if(o>=BracketSelectionRangeProvider._maxRounds&&0===d.size){e();break}if(!l){e();break}let f=s.bracketPairs.findPrevBracket(l);if(!f){e();break}let _=Date.now()-m;if(_>BracketSelectionRangeProvider._maxDuration){setTimeout((()=>BracketSelectionRangeProvider._bracketsLeftYield(e,o+1,s,l,d,g)));break}const C=f.close[0];if(f.isOpen){let e=p.has(C)?p.get(C):0;if(e-=1,p.set(C,Math.max(0,e)),e<0){let e=d.get(C);if(e){let o=e.shift();0===e.size&&d.delete(C);const l=u.e.fromPositions(f.range.getEndPosition(),o.getStartPosition()),p=u.e.fromPositions(f.range.getStartPosition(),o.getEndPosition());g.push({range:l}),g.push({range:p}),BracketSelectionRangeProvider._addBracketLeading(s,p,g)}}}else{let e=p.has(C)?p.get(C):0;p.set(C,e+1)}l=f.range.getStartPosition()}}static _addBracketLeading(e,o,s){if(o.startLineNumber===o.endLineNumber)return;const l=o.startLineNumber,g=e.getLineFirstNonWhitespaceColumn(l);0!==g&&g!==o.startColumn&&(s.push({range:u.e.fromPositions(new d.L(l,g),o.getEndPosition())}),s.push({range:u.e.fromPositions(new d.L(l,1),o.getEndPosition())}));const p=l-1;if(p>0){const l=e.getLineFirstNonWhitespaceColumn(p);l===o.startColumn&&l!==e.getLineLastNonWhitespaceColumn(p)&&(s.push({range:u.e.fromPositions(new d.L(p,l),o.getEndPosition())}),s.push({range:u.e.fromPositions(new d.L(p,1),o.getEndPosition())}))}}}BracketSelectionRangeProvider._maxDuration=30,BracketSelectionRangeProvider._maxRounds=2},7721:function(e,o,s){"use strict";s.r(o),s.d(o,{provideSelectionRanges:function(){return provideSelectionRanges}});var l=s(9488),d=s(1050),u=s(7301),g=s(6830),p=s(187),m=s(4314),f=s(3860),_=s(9102),C=s(9694),b=s(2677);class WordSelectionRangeProvider{provideSelectionRanges(e,o){const s=[];for(const l of o){const o=[];s.push(o),this._addInWordRanges(o,e,l),this._addWordRanges(o,e,l),this._addWhitespaceLine(o,e,l),o.push({range:e.getFullModelRange()})}return s}_addInWordRanges(e,o,s){const l=o.getWordAtPosition(s);if(!l)return;let{word:d,startColumn:u}=l,g=s.column-u,p=g,f=g,_=0;for(;p>=0;p--){let e=d.charCodeAt(p);if(p!==g&&(95===e||45===e))break;if((0,b.mK)(e)&&(0,b.df)(_))break;_=e}for(p+=1;f<d.length;f++){let e=d.charCodeAt(f);if((0,b.df)(e)&&(0,b.mK)(_))break;if(95===e||45===e)break;_=e}p<f&&e.push({range:new m.e(s.lineNumber,u+p,s.lineNumber,u+f)})}_addWordRanges(e,o,s){const l=o.getWordAtPosition(s);l&&e.push({range:new m.e(s.lineNumber,l.startColumn,s.lineNumber,l.endColumn)})}_addWhitespaceLine(e,o,s){o.getLineLength(s.lineNumber)>0&&0===o.getLineFirstNonWhitespaceColumn(s.lineNumber)&&0===o.getLineLastNonWhitespaceColumn(s.lineNumber)&&e.push({range:new m.e(s.lineNumber,1,s.lineNumber,o.getLineMaxColumn(s.lineNumber))})}}var w=s(3580),S=s(4144),y=s(4565),L=s(1922),x=s(8216),k=s(8401),N=s(666),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class SelectionRanges{constructor(e,o){this.index=e,this.ranges=o}mov(e){let o=this.index+(e?1:-1);if(o<0||o>=this.ranges.length)return this;const s=new SelectionRanges(o,this.ranges);return s.ranges[o].equalsRange(this.ranges[this.index])?s.mov(e):s}}let D=class SmartSelectController{constructor(e,o){this._editor=e,this._languageFeaturesService=o,this._ignoreSelection=!1}static get(e){return e.getContribution(SmartSelectController.ID)}dispose(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}run(e){return __awaiter(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return;const o=this._editor.getSelections(),s=this._editor.getModel();if(this._state||(yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider,s,o.map((e=>e.getPosition())),this._editor.getOption(102),d.T.None).then((e=>{var s;if(l.Of(e)&&e.length===o.length&&this._editor.hasModel()&&l.fS(this._editor.getSelections(),o,((e,o)=>e.equalsSelection(o)))){for(let s=0;s<e.length;s++)e[s]=e[s].filter((e=>e.containsPosition(o[s].getStartPosition())&&e.containsPosition(o[s].getEndPosition()))),e[s].unshift(o[s]);this._state=e.map((e=>new SelectionRanges(0,e))),null===(s=this._selectionListener)||void 0===s||s.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition((()=>{var e;this._ignoreSelection||(null===(e=this._selectionListener)||void 0===e||e.dispose(),this._state=void 0)}))}}))),!this._state)return;this._state=this._state.map((o=>o.mov(e)));const u=this._state.map((e=>f.Y.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())));this._ignoreSelection=!0;try{this._editor.setSelections(u)}finally{this._ignoreSelection=!1}}))}};D.ID="editor.contrib.smartSelectController",D=__decorate([__param(1,L.p)],D);class AbstractSmartSelect extends g.R6{constructor(e,o){super(o),this._forward=e}run(e,o){return __awaiter(this,void 0,void 0,(function*(){let e=D.get(o);e&&(yield e.run(this._forward))}))}}class GrowSelectionAction extends AbstractSmartSelect{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:w.N("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:_.u.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:S.eH.MenubarSelectionMenu,group:"1_basic",title:w.N({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}y.P0.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class ShrinkSelectionAction extends AbstractSmartSelect{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:w.N("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:_.u.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:S.eH.MenubarSelectionMenu,group:"1_basic",title:w.N({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}function provideSelectionRanges(e,o,s,d,g){return __awaiter(this,void 0,void 0,(function*(){const f=e.all(o).concat(new WordSelectionRangeProvider);1===f.length&&f.unshift(new C.x);let _=[],b=[];for(const e of f)_.push(Promise.resolve(e.provideSelectionRanges(o,s,g)).then((e=>{if(l.Of(e)&&e.length===s.length)for(let o=0;o<s.length;o++){b[o]||(b[o]=[]);for(const l of e[o])m.e.isIRange(l.range)&&m.e.containsPosition(l.range,s[o])&&b[o].push(m.e.lift(l.range))}}),u.Cp));return yield Promise.all(_),b.map((e=>{if(0===e.length)return[];e.sort(((e,o)=>p.L.isBefore(e.getStartPosition(),o.getStartPosition())?1:p.L.isBefore(o.getStartPosition(),e.getStartPosition())||p.L.isBefore(e.getEndPosition(),o.getEndPosition())?-1:p.L.isBefore(o.getEndPosition(),e.getEndPosition())?1:0));let s,l=[];for(const o of e)(!s||m.e.containsRange(o,s)&&!m.e.equalsRange(o,s))&&(l.push(o),s=o);if(!d.selectLeadingAndTrailingWhitespace)return l;let u=[l[0]];for(let d=1;d<l.length;d++){const e=l[d-1],s=l[d];if(s.startLineNumber!==e.startLineNumber||s.endLineNumber!==e.endLineNumber){const l=new m.e(e.startLineNumber,o.getLineFirstNonWhitespaceColumn(e.startLineNumber),e.endLineNumber,o.getLineLastNonWhitespaceColumn(e.endLineNumber));l.containsRange(e)&&!l.equalsRange(e)&&s.containsRange(l)&&!s.equalsRange(l)&&u.push(l);const d=new m.e(e.startLineNumber,1,e.endLineNumber,o.getLineMaxColumn(e.endLineNumber));d.containsRange(e)&&!d.equalsRange(l)&&s.containsRange(d)&&!s.equalsRange(d)&&u.push(d)}u.push(s)}return u}))}))}(0,g._K)(D.ID,D),(0,g.Qr)(GrowSelectionAction),(0,g.Qr)(ShrinkSelectionAction),y.P0.registerCommand("_executeSelectionRangeProvider",(function(e,...o){return __awaiter(this,void 0,void 0,(function*(){const[s,l]=o;(0,k.p_)(N.o.isUri(s));const u=e.get(L.p).selectionRangeProvider,g=yield e.get(x.S).createModelReference(s);try{return provideSelectionRanges(u,g.object.textEditorModel,l,{selectLeadingAndTrailingWhitespace:!0},d.T.None)}finally{g.dispose()}}))}))},8762:function(e,o,s){"use strict";s.r(o),s.d(o,{SnippetController2:function(){return y}});var l=s(5976),d=s(6830),u=s(4314),g=s(3860),p=s(9102),m=s(5621),f=s(3580),_=s(8819),C=s(2065),b=s(3557),w=s(8398),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const S={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let y=class SnippetController2{constructor(e,o,s,d){this._editor=e,this._instantiationService=o,this._logService=s,this._snippetListener=new l.SL,this._modelVersionId=-1,this._inSnippet=SnippetController2.InSnippetMode.bindTo(d),this._hasNextTabstop=SnippetController2.HasNextTabstop.bindTo(d),this._hasPrevTabstop=SnippetController2.HasPrevTabstop.bindTo(d)}static get(e){return e.getContribution(SnippetController2.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}insert(e,o){try{this._doInsert(e,"undefined"===typeof o?S:Object.assign(Object.assign({},S),o))}catch(s){this.cancel(),this._logService.error(s),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,o){this._editor.hasModel()&&(this._snippetListener.clear(),o.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,o):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new w.l(this._editor,e,o),this._session.insert()),o.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((e=>e.isFlush&&this.cancel()))),this._snippetListener.add(this._editor.onDidChangeModel((()=>this.cancel()))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((()=>this._updateState()))))}_updateState(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel())return void(this._currentChoice=void 0);const{choice:e}=this._session;if(e){if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map((e=>g.Y.fromPositions(e.getStartPosition()))));const[o]=e.options;this._instantiationService.invokeFunction(m.i5,this._editor,e.options.map(((e,s)=>({kind:13,label:e.value,insertText:e.value,sortText:"a".repeat(s+1),range:u.e.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,o.value.length))}))))}}else this._currentChoice=void 0}finish(){while(this._inSnippet.get())this.next()}cancel(e=!1){var o;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),null===(o=this._session)||void 0===o||o.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};y.ID="snippetController2",y.InSnippetMode=new _.uy("inSnippetMode",!1,(0,f.N)("inSnippetMode","Whether the editor in current in snippet mode")),y.HasNextTabstop=new _.uy("hasNextTabstop",!1,(0,f.N)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),y.HasPrevTabstop=new _.uy("hasPrevTabstop",!1,(0,f.N)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),y=__decorate([__param(1,C.TG),__param(2,b.VZ),__param(3,_.i6)],y),(0,d._K)(y.ID,y);const L=d._l.bindToContribution(y.get);(0,d.fK)(new L({id:"jumpToNextSnippetPlaceholder",precondition:_.Ao.and(y.InSnippetMode,y.HasNextTabstop),handler:e=>e.next(),kbOpts:{weight:130,kbExpr:p.u.editorTextFocus,primary:2}})),(0,d.fK)(new L({id:"jumpToPrevSnippetPlaceholder",precondition:_.Ao.and(y.InSnippetMode,y.HasPrevTabstop),handler:e=>e.prev(),kbOpts:{weight:130,kbExpr:p.u.editorTextFocus,primary:1026}})),(0,d.fK)(new L({id:"leaveSnippet",precondition:y.InSnippetMode,handler:e=>e.cancel(!0),kbOpts:{weight:130,kbExpr:p.u.editorTextFocus,primary:9,secondary:[1033]}})),(0,d.fK)(new L({id:"acceptSnippet",precondition:y.InSnippetMode,handler:e=>e.finish()}))},5084:function(e,o,s){"use strict";s.d(o,{Lv:function(){return Choice},Vm:function(){return Placeholder},Yj:function(){return SnippetParser},xv:function(){return Text}});class Scanner{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e,o=this.pos,s=0,l=this.value.charCodeAt(o);if(e=Scanner._table[l],"number"===typeof e)return this.pos+=1,{type:e,pos:o,len:1};if(Scanner.isDigitCharacter(l)){e=8;do{s+=1,l=this.value.charCodeAt(o+s)}while(Scanner.isDigitCharacter(l));return this.pos+=s,{type:e,pos:o,len:s}}if(Scanner.isVariableCharacter(l)){e=9;do{l=this.value.charCodeAt(o+ ++s)}while(Scanner.isVariableCharacter(l)||Scanner.isDigitCharacter(l));return this.pos+=s,{type:e,pos:o,len:s}}e=10;do{s+=1,l=this.value.charCodeAt(o+s)}while(!isNaN(l)&&"undefined"===typeof Scanner._table[l]&&!Scanner.isDigitCharacter(l)&&!Scanner.isVariableCharacter(l));return this.pos+=s,{type:e,pos:o,len:s}}}Scanner._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class Marker{constructor(){this._children=[]}appendChild(e){return e instanceof Text&&this._children[this._children.length-1]instanceof Text?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,o){const{parent:s}=e,l=s.children.indexOf(e),d=s.children.slice(0);d.splice(l,1,...o),s._children=d,function _fixParent(e,o){for(const s of e)s.parent=o,_fixParent(s.children,s)}(o,s)}get children(){return this._children}get snippet(){let e=this;while(1){if(!e)return;if(e instanceof TextmateSnippet)return e;e=e.parent}}toString(){return this.children.reduce(((e,o)=>e+o.toString()),"")}len(){return 0}}class Text extends Marker{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Text(this.value)}}class TransformableMarker extends Marker{}class Placeholder extends TransformableMarker{constructor(e){super(),this.index=e}static compareByIndex(e,o){return e.index===o.index?0:e.isFinalTabstop?1:o.isFinalTabstop||e.index<o.index?-1:e.index>o.index?1:0}get isFinalTabstop(){return 0===this.index}get choice(){return 1===this._children.length&&this._children[0]instanceof Choice?this._children[0]:void 0}clone(){let e=new Placeholder(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((e=>e.clone())),e}}class Choice extends Marker{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Text&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new Choice;return this.options.forEach(e.appendChild,e),e}}class Transform extends Marker{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const o=this;let s=!1,l=e.replace(this.regexp,(function(){return s=!0,o._replace(Array.prototype.slice.call(arguments,0,-2))}));return!s&&this._children.some((e=>e instanceof FormatString&&Boolean(e.elseValue)))&&(l=this._replace([])),l}_replace(e){let o="";for(const s of this._children)if(s instanceof FormatString){let l=e[s.index]||"";l=s.resolve(l),o+=l}else o+=s.toString();return o}toString(){return""}clone(){let e=new Transform;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((e=>e.clone())),e}}class FormatString extends Marker{constructor(e,o,s,l){super(),this.index=e,this.shorthandName=o,this.ifValue=s,this.elseValue=l}resolve(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:Boolean(e)||"string"!==typeof this.elseValue?e||"":this.elseValue}_toPascalCase(e){const o=e.match(/[a-z0-9]+/gi);return o?o.map((e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())).join(""):e}_toCamelCase(e){const o=e.match(/[a-z0-9]+/gi);return o?o.map(((e,o)=>0===o?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())).join(""):e}clone(){let e=new FormatString(this.index,this.shorthandName,this.ifValue,this.elseValue);return e}}class Variable extends TransformableMarker{constructor(e){super(),this.name=e}resolve(e){let o=e.resolve(this);return this.transform&&(o=this.transform.resolve(o||"")),void 0!==o&&(this._children=[new Text(o)],!0)}clone(){const e=new Variable(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((e=>e.clone())),e}}function walk(e,o){const s=[...e];while(s.length>0){const e=s.shift(),l=o(e);if(!l)break;s.unshift(...e.children)}}class TextmateSnippet extends Marker{get placeholderInfo(){if(!this._placeholders){let e,o=[];this.walk((function(s){return s instanceof Placeholder&&(o.push(s),e=!e||e.index<s.index?s:e),!0})),this._placeholders={all:o,last:e}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let o=0,s=!1;return this.walk((l=>l===e?(s=!0,!1):(o+=l.len(),!0))),s?o:-1}fullLen(e){let o=0;return walk([e],(e=>(o+=e.len(),!0))),o}enclosingPlaceholders(e){let o=[],{parent:s}=e;while(s)s instanceof Placeholder&&o.push(s),s=s.parent;return o}resolveVariables(e){return this.walk((o=>(o instanceof Variable&&o.resolve(e)&&(this._placeholders=void 0),!0))),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,o){return this._placeholders=void 0,super.replace(e,o)}clone(){let e=new TextmateSnippet;return this._children=this.children.map((e=>e.clone())),e}walk(e){walk(this.children,e)}}class SnippetParser{constructor(){this._scanner=new Scanner,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,o,s){this._scanner.text(e),this._token=this._scanner.next();const l=new TextmateSnippet;while(this._parse(l));const d=new Map,u=[];let g=0;l.walk((e=>(e instanceof Placeholder&&(g+=1,e.isFinalTabstop?d.set(0,void 0):!d.has(e.index)&&e.children.length>0?d.set(e.index,e.children):u.push(e)),!0)));for(const p of u){const e=d.get(p.index);if(e){const o=new Placeholder(p.index);o.transform=p.transform;for(const s of e)o.appendChild(s.clone());l.replace(p,[o])}}return s||(s=g>0&&o),!d.has(0)&&s&&l.appendChild(new Placeholder(0)),l}_accept(e,o){if(void 0===e||this._token.type===e){let e=!o||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),e}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const o=this._token;while(this._token.type!==e){if(14===this._token.type)return!1;if(5===this._token.type){const e=this._scanner.next();if(0!==e.type&&4!==e.type&&5!==e.type)return!1}this._token=this._scanner.next()}const s=this._scanner.value.substring(o.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),s}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let o;return!!(o=this._accept(5,!0))&&(o=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||o,e.appendChild(new Text(o)),!0)}_parseTabstopOrVariableName(e){let o;const s=this._token,l=this._accept(0)&&(o=this._accept(9,!0)||this._accept(8,!0));return l?(e.appendChild(/^\d+$/.test(o)?new Placeholder(Number(o)):new Variable(o)),!0):this._backTo(s)}_parseComplexPlaceholder(e){let o;const s=this._token,l=this._accept(0)&&this._accept(3)&&(o=this._accept(8,!0));if(!l)return this._backTo(s);const d=new Placeholder(Number(o));if(this._accept(1))while(1){if(this._accept(4))return e.appendChild(d),!0;if(!this._parse(d))return e.appendChild(new Text("${"+o+":")),d.children.forEach(e.appendChild,e),!0}else{if(!(d.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(d)?(e.appendChild(d),!0):(this._backTo(s),!1):this._accept(4)?(e.appendChild(d),!0):this._backTo(s);{const o=new Choice;while(1){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(d.appendChild(o),this._accept(4)))return e.appendChild(d),!0}return this._backTo(s),!1}}}}_parseChoiceElement(e){const o=this._token,s=[];while(1){if(2===this._token.type||7===this._token.type)break;let e;if(e=(e=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||e:this._accept(void 0,!0),!e)return this._backTo(o),!1;s.push(e)}return 0===s.length?(this._backTo(o),!1):(e.appendChild(new Text(s.join(""))),!0)}_parseComplexVariable(e){let o;const s=this._token,l=this._accept(0)&&this._accept(3)&&(o=this._accept(9,!0));if(!l)return this._backTo(s);const d=new Variable(o);if(!this._accept(1))return this._accept(6)?this._parseTransform(d)?(e.appendChild(d),!0):(this._backTo(s),!1):this._accept(4)?(e.appendChild(d),!0):this._backTo(s);while(1){if(this._accept(4))return e.appendChild(d),!0;if(!this._parse(d))return e.appendChild(new Text("${"+o+":")),d.children.forEach(e.appendChild,e),!0}}_parseTransform(e){let o=new Transform,s="",l="";while(1){if(this._accept(6))break;let e;if(e=this._accept(5,!0))e=this._accept(6,!0)||e,s+=e;else{if(14===this._token.type)return!1;s+=this._accept(void 0,!0)}}while(1){if(this._accept(6))break;let e;if(e=this._accept(5,!0))e=this._accept(5,!0)||this._accept(6,!0)||e,o.appendChild(new Text(e));else if(!this._parseFormatString(o)&&!this._parseAnything(o))return!1}while(1){if(this._accept(4))break;if(14===this._token.type)return!1;l+=this._accept(void 0,!0)}try{o.regexp=new RegExp(s,l)}catch(d){return!1}return e.transform=o,!0}_parseFormatString(e){const o=this._token;if(!this._accept(0))return!1;let s=!1;this._accept(3)&&(s=!0);let l=this._accept(8,!0);if(!l)return this._backTo(o),!1;if(!s)return e.appendChild(new FormatString(Number(l))),!0;if(this._accept(4))return e.appendChild(new FormatString(Number(l))),!0;if(!this._accept(1))return this._backTo(o),!1;if(this._accept(6)){let s=this._accept(9,!0);return s&&this._accept(4)?(e.appendChild(new FormatString(Number(l),s)),!0):(this._backTo(o),!1)}if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new FormatString(Number(l),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new FormatString(Number(l),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new FormatString(Number(l),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new FormatString(Number(l),void 0,void 0,o)),!0}return this._backTo(o),!1}_parseAnything(e){return 14!==this._token.type&&(e.appendChild(new Text(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}},8398:function(e,o,s){"use strict";s.d(o,{l:function(){return SnippetSession}});var l=s(9488),d=s(5976),u=s(2677),g=s(9386),p=s(4314),m=s(3860),f=s(2822),_=s(4349),C=s(382),b=s(5084),w=s(8843),S=s(5336),y=s(5935);const L=new Uint8Array(16),x=[];for(let T=0;T<256;T++)x.push(T.toString(16).padStart(2,"0"));let k;function generateUuid(){k(L),L[6]=15&L[6]|64,L[8]=63&L[8]|128;let e=0,o="";return o+=x[L[e++]],o+=x[L[e++]],o+=x[L[e++]],o+=x[L[e++]],o+="-",o+=x[L[e++]],o+=x[L[e++]],o+="-",o+=x[L[e++]],o+=x[L[e++]],o+="-",o+=x[L[e++]],o+=x[L[e++]],o+="-",o+=x[L[e++]],o+=x[L[e++]],o+=x[L[e++]],o+=x[L[e++]],o+=x[L[e++]],o+=x[L[e++]],o}k="object"===typeof crypto&&"function"===typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let o=0;o<e.length;o++)e[o]=Math.floor(256*Math.random());return e};var N=s(5638),D=s(3580);Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class CompositeSnippetVariableResolver{constructor(e){this._delegates=e}resolve(e){for(const o of this._delegates){let s=o.resolve(e);if(void 0!==s)return s}}}class SelectionBasedVariableResolver{constructor(e,o,s,l){this._model=e,this._selection=o,this._selectionIdx=s,this._overtypingCapturer=l}resolve(e){const{name:o}=e;if("SELECTION"===o||"TM_SELECTED_TEXT"===o){let o=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!o&&this._overtypingCapturer){const e=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);e&&(o=e.value,s=e.multiline)}if(o&&s&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),l=(0,u.V8)(s,0,this._selection.startColumn-1);let d=l;e.snippet.walk((o=>o!==e&&(o instanceof b.xv&&(d=(0,u.V8)((0,u.uq)(o.value).pop())),!0)));const g=(0,u.Mh)(d,l);o=o.replace(/(\r\n|\r|\n)(.*)/g,((e,o,s)=>`${o}${d.substr(g)}${s}`))}return o}if("TM_CURRENT_LINE"===o)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===o){const e=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return e&&e.word||void 0}return"TM_LINE_INDEX"===o?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===o?String(this._selection.positionLineNumber):void 0}}class ModelBasedVariableResolver{constructor(e,o){this._labelService=e,this._model=o}resolve(e){const{name:o}=e;if("TM_FILENAME"===o)return S.EZ(this._model.uri.fsPath);if("TM_FILENAME_BASE"===o){const e=S.EZ(this._model.uri.fsPath),o=e.lastIndexOf(".");return o<=0?e:e.slice(0,o)}return"TM_DIRECTORY"===o?"."===S.XX(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,y.XX)(this._model.uri)):"TM_FILEPATH"===o?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===o?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}class ClipboardBasedVariableResolver{constructor(e,o,s,l){this._readClipboardText=e,this._selectionIdx=o,this._selectionCount=s,this._spread=l}resolve(e){if("CLIPBOARD"!==e.name)return;const o=this._readClipboardText();if(o){if(this._spread){const e=o.split(/\r\n|\n|\r/).filter((e=>!(0,u.m5)(e)));if(e.length===this._selectionCount)return e[this._selectionIdx]}return o}}}class CommentBasedVariableResolver{constructor(e,o){this._model=e,this._selection=o}resolve(e){const{name:o}=e,s=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),l=N.zu.getComments(s);if(l)return"LINE_COMMENT"===o?l.lineCommentToken||void 0:"BLOCK_COMMENT_START"===o?l.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===o&&l.blockCommentEndToken||void 0}}class TimeBasedVariableResolver{constructor(){this._date=new Date}resolve(e){const{name:o}=e;return"CURRENT_YEAR"===o?String(this._date.getFullYear()):"CURRENT_YEAR_SHORT"===o?String(this._date.getFullYear()).slice(-2):"CURRENT_MONTH"===o?String(this._date.getMonth().valueOf()+1).padStart(2,"0"):"CURRENT_DATE"===o?String(this._date.getDate().valueOf()).padStart(2,"0"):"CURRENT_HOUR"===o?String(this._date.getHours().valueOf()).padStart(2,"0"):"CURRENT_MINUTE"===o?String(this._date.getMinutes().valueOf()).padStart(2,"0"):"CURRENT_SECOND"===o?String(this._date.getSeconds().valueOf()).padStart(2,"0"):"CURRENT_DAY_NAME"===o?TimeBasedVariableResolver.dayNames[this._date.getDay()]:"CURRENT_DAY_NAME_SHORT"===o?TimeBasedVariableResolver.dayNamesShort[this._date.getDay()]:"CURRENT_MONTH_NAME"===o?TimeBasedVariableResolver.monthNames[this._date.getMonth()]:"CURRENT_MONTH_NAME_SHORT"===o?TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()]:"CURRENT_SECONDS_UNIX"===o?String(Math.floor(this._date.getTime()/1e3)):void 0}}TimeBasedVariableResolver.dayNames=[D.N("Sunday","Sunday"),D.N("Monday","Monday"),D.N("Tuesday","Tuesday"),D.N("Wednesday","Wednesday"),D.N("Thursday","Thursday"),D.N("Friday","Friday"),D.N("Saturday","Saturday")],TimeBasedVariableResolver.dayNamesShort=[D.N("SundayShort","Sun"),D.N("MondayShort","Mon"),D.N("TuesdayShort","Tue"),D.N("WednesdayShort","Wed"),D.N("ThursdayShort","Thu"),D.N("FridayShort","Fri"),D.N("SaturdayShort","Sat")],TimeBasedVariableResolver.monthNames=[D.N("January","January"),D.N("February","February"),D.N("March","March"),D.N("April","April"),D.N("May","May"),D.N("June","June"),D.N("July","July"),D.N("August","August"),D.N("September","September"),D.N("October","October"),D.N("November","November"),D.N("December","December")],TimeBasedVariableResolver.monthNamesShort=[D.N("JanuaryShort","Jan"),D.N("FebruaryShort","Feb"),D.N("MarchShort","Mar"),D.N("AprilShort","Apr"),D.N("MayShort","May"),D.N("JuneShort","Jun"),D.N("JulyShort","Jul"),D.N("AugustShort","Aug"),D.N("SeptemberShort","Sep"),D.N("OctoberShort","Oct"),D.N("NovemberShort","Nov"),D.N("DecemberShort","Dec")];class WorkspaceBasedVariableResolver{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const o=(0,C.uT)(this._workspaceService.getWorkspace());return o?"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(o):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(o):void 0:void 0}_resolveWorkspaceName(e){if((0,C.eb)(e))return S.EZ(e.uri.path);let o=S.EZ(e.configPath.path);return o.endsWith(C.A6)&&(o=o.substr(0,o.length-C.A6.length-1)),o}_resoveWorkspacePath(e){if((0,C.eb)(e))return(0,w.D)(e.uri.fsPath);let o=S.EZ(e.configPath.path),s=e.configPath.fsPath;return s.endsWith(o)&&(s=s.substr(0,s.length-o.length-1)),s?(0,w.D)(s):"/"}}class RandomBasedVariableResolver{resolve(e){const{name:o}=e;return"RANDOM"===o?Math.random().toString().slice(-6):"RANDOM_HEX"===o?Math.random().toString(16).slice(-6):"UUID"===o?generateUuid():void 0}}class OneSnippet{constructor(e,o,s,d){this._editor=e,this._snippet=o,this._offset=s,this._snippetLineLeadingWhitespace=d,this._nestingLevel=1,this._placeholderGroups=(0,l.vM)(o.placeholders,b.Vm.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations((o=>{for(const s of this._snippet.placeholders){const l=this._snippet.offset(s),d=this._snippet.fullLen(s),u=p.e.fromPositions(e.getPositionAt(this._offset+l),e.getPositionAt(this._offset+l+d)),g=s.isFinalTabstop?OneSnippet._decor.inactiveFinal:OneSnippet._decor.inactive,m=o.addDecoration(u,g);this._placeholderDecorations.set(s,m)}}))}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let e=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const s=this._placeholderDecorations.get(o),l=this._editor.getModel().getDecorationRange(s),d=this._editor.getModel().getValueInRange(l),u=o.transform.resolve(d).split(/\r\n|\r|\n/);for(let e=1;e<u.length;e++)u[e]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+u[e]);e.push(g.h.replace(l,u.join(this._editor.getModel().getEOL())))}e.length>0&&this._editor.executeEdits("snippet.placeholderTransform",e)}let o=!1;!0===e&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,o=!0):!1===e&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,o=!0);const s=this._editor.getModel().changeDecorations((e=>{const s=new Set,l=[];for(const d of this._placeholderGroups[this._placeholderGroupsIdx]){const u=this._placeholderDecorations.get(d),g=this._editor.getModel().getDecorationRange(u);l.push(new m.Y(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn)),o=o&&this._hasPlaceholderBeenCollapsed(d),e.changeDecorationOptions(u,d.isFinalTabstop?OneSnippet._decor.activeFinal:OneSnippet._decor.active),s.add(d);for(const o of this._snippet.enclosingPlaceholders(d)){const l=this._placeholderDecorations.get(o);e.changeDecorationOptions(l,o.isFinalTabstop?OneSnippet._decor.activeFinal:OneSnippet._decor.active),s.add(o)}}for(const[o,d]of this._placeholderDecorations)s.has(o)||e.changeDecorationOptions(d,o.isFinalTabstop?OneSnippet._decor.inactiveFinal:OneSnippet._decor.inactive);return l}));return o?this.move(e):null!==s&&void 0!==s?s:[]}_hasPlaceholderBeenCollapsed(e){let o=e;while(o){if(o instanceof b.Vm){const e=this._placeholderDecorations.get(o),s=this._editor.getModel().getDecorationRange(e);if(s.isEmpty()&&o.toString().length>0)return!0}o=o.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const o of this._placeholderGroups){let s;for(const l of o){if(l.isFinalTabstop)break;s||(s=[],e.set(l.index,s));const o=this._placeholderDecorations.get(l),d=this._editor.getModel().getDecorationRange(o);if(!d){e.delete(l.index);break}s.push(d)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const o=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((s=>{for(const l of this._placeholderGroups[this._placeholderGroupsIdx]){const d=e.shift();console.assert(!d._placeholderDecorations);const u=d._snippet.placeholderInfo.last.index;for(const e of d._snippet.placeholderInfo.all)e.isFinalTabstop?e.index=l.index+(u+1)/this._nestingLevel:e.index=l.index+e.index/this._nestingLevel;this._snippet.replace(l,d._snippet.children);const g=this._placeholderDecorations.get(l);s.removeDecoration(g),this._placeholderDecorations.delete(l);for(const e of d._snippet.placeholders){const l=d._snippet.offset(e),u=d._snippet.fullLen(e),g=p.e.fromPositions(o.getPositionAt(d._offset+l),o.getPositionAt(d._offset+l+u)),m=s.addDecoration(g,OneSnippet._decor.inactive);this._placeholderDecorations.set(e,m)}}this._placeholderGroups=(0,l.vM)(this._snippet.placeholders,b.Vm.compareByIndex)}))}}OneSnippet._decor={active:f.qx.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:f.qx.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:f.qx.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:f.qx.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const E={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class SnippetSession{constructor(e,o,s=E){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=o,this._options=s}static adjustWhitespace(e,o,s,l,d){const g=e.getLineContent(o.lineNumber),p=(0,u.V8)(g,0,o.column-1);let m;return s.walk((o=>{if(!(o instanceof b.xv)||o.parent instanceof b.Lv)return!0;const d=o.value.split(/\r\n|\r|\n/);if(l){const l=s.offset(o);if(0===l)d[0]=e.normalizeIndentation(d[0]);else{m=null!==m&&void 0!==m?m:s.toString();let o=m.charCodeAt(l-1);10!==o&&13!==o||(d[0]=e.normalizeIndentation(p+d[0]))}for(let o=1;o<d.length;o++)d[o]=e.normalizeIndentation(p+d[o])}const u=d.join(e.getEOL());return u!==o.value&&(o.parent.replace(o,[new b.xv(u)]),m=void 0),!0})),p}static adjustSelection(e,o,s,l){if(0!==s||0!==l){const{positionLineNumber:d,positionColumn:u}=o,g=u-s,p=u+l,f=e.validateRange({startLineNumber:d,startColumn:g,endLineNumber:d,endColumn:p});o=m.Y.createWithDirection(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn,o.getDirection())}return o}static createEditsAndSnippets(e,o,s,l,d,u,m,f){const w=[],S=[];if(!e.hasModel())return{edits:w,snippets:S};const y=e.getModel(),L=e.invokeWithinContext((e=>e.get(C.ec))),x=e.invokeWithinContext((e=>new ModelBasedVariableResolver(e.get(_.e),y))),readClipboardText=()=>m;let k=0,N=y.getValueInRange(SnippetSession.adjustSelection(y,e.getSelection(),s,0)),D=y.getValueInRange(SnippetSession.adjustSelection(y,e.getSelection(),0,l)),E=y.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const T=e.getSelections().map(((e,o)=>({selection:e,idx:o}))).sort(((e,o)=>p.e.compareRangesUsingStarts(e.selection,o.selection)));for(const{selection:p,idx:_}of T){let m=SnippetSession.adjustSelection(y,p,s,0),C=SnippetSession.adjustSelection(y,p,0,l);N!==y.getValueInRange(m)&&(m=p),D!==y.getValueInRange(C)&&(C=p);const I=p.setStartPosition(m.startLineNumber,m.startColumn).setEndPosition(C.endLineNumber,C.endColumn),A=(new b.Yj).parse(o,!0,d),M=I.getStartPosition(),R=SnippetSession.adjustWhitespace(y,M,A,u||_>0&&E!==y.getLineFirstNonWhitespaceColumn(p.positionLineNumber),!0);A.resolveVariables(new CompositeSnippetVariableResolver([x,new ClipboardBasedVariableResolver(readClipboardText,_,T.length,"spread"===e.getOption(71)),new SelectionBasedVariableResolver(y,p,_,f),new CommentBasedVariableResolver(y,p),new TimeBasedVariableResolver,new WorkspaceBasedVariableResolver(L),new RandomBasedVariableResolver]));const P=y.getOffsetAt(M)+k;k+=A.toString().length-y.getValueLengthInRange(I),w[_]=g.h.replace(I,A.toString()),w[_].identifier={major:_,minor:0},S[_]=new OneSnippet(e,A,P,R)}return{edits:w,snippets:S}}dispose(){(0,d.B9)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:o}=SnippetSession.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=o,this._editor.executeEdits("snippet",e,(e=>this._snippets[0].hasPlaceholder?this._move(!0):e.filter((e=>!!e.identifier)).map((e=>m.Y.fromPositions(e.range.getEndPosition()))))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,o=E){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:s,snippets:l}=SnippetSession.createEditsAndSnippets(this._editor,e,o.overwriteBefore,o.overwriteAfter,!0,o.adjustWhitespace,o.clipboardText,o.overtypingCapturer);this._editor.executeEdits("snippet",s,(e=>{for(const o of this._snippets)o.merge(l);return console.assert(0===l.length),this._snippets[0].hasPlaceholder?this._move(void 0):e.filter((e=>!!e.identifier)).map((e=>m.Y.fromPositions(e.range.getEndPosition())))}))}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const o=[];for(const s of this._snippets){const l=s.move(e);o.push(...l)}return o}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let o=new Map;for(const s of this._snippets){const l=s.computePossibleSelections();if(0===o.size)for(const[s,d]of l){d.sort(p.e.compareRangesUsingStarts);for(const l of e)if(d[0].containsRange(l)){o.set(s,[]);break}}if(0===o.size)return!1;o.forEach(((e,o)=>{e.push(...l.get(o))}))}e.sort(p.e.compareRangesUsingStarts);for(let[s,l]of o)if(l.length===e.length){l.sort(p.e.compareRangesUsingStarts);for(let d=0;d<l.length;d++)l[d].containsRange(e[d])||o.delete(s)}else o.delete(s);return o.size>0}}},5621:function(e,o,s){"use strict";s.d(o,{A9:function(){return CompletionOptions},GI:function(){return E},ZJ:function(){return getSnippetSuggestSupport},_y:function(){return D},i5:function(){return showSimpleSuggestions},kL:function(){return provideSuggestionItems},wg:function(){return getSuggestionComparator}});var l=s(1050),d=s(7301),u=s(5392),g=s(5976),p=s(4013),m=s(8401),f=s(666),_=s(187),C=s(4314),b=s(8216),w=s(5084),S=s(3580),y=s(4144),L=s(4565),x=s(8819),k=s(1922),N=s(7466),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const D={Visible:N.iX,DetailsVisible:new x.uy("suggestWidgetDetailsVisible",!1,(0,S.N)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new x.uy("suggestWidgetMultipleSuggestions",!1,(0,S.N)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new x.uy("suggestionMakesTextEdit",!0,(0,S.N)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new x.uy("acceptSuggestionOnEnter",!0,(0,S.N)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new x.uy("suggestionHasInsertAndReplaceRange",!1,(0,S.N)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new x.uy("suggestionInsertMode",void 0,{type:"string",description:(0,S.N)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new x.uy("suggestionCanResolve",!1,(0,S.N)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},E=new y.eH("suggestWidgetStatusBar");class CompletionItem{constructor(e,o,s,l){this.position=e,this.completion=o,this.container=s,this.provider=l,this.isInvalid=!1,this.score=u.CL.Default,this.distance=0,this.textLabel="string"===typeof o.label?o.label:o.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=o.sortText&&o.sortText.toLowerCase(),this.filterTextLow=o.filterText&&o.filterText.toLowerCase(),C.e.isIRange(o.range)?(this.editStart=new _.L(o.range.startLineNumber,o.range.startColumn),this.editInsertEnd=new _.L(o.range.endLineNumber,o.range.endColumn),this.editReplaceEnd=new _.L(o.range.endLineNumber,o.range.endColumn),this.isInvalid=this.isInvalid||C.e.spansMultipleLines(o.range)||o.range.startLineNumber!==e.lineNumber):(this.editStart=new _.L(o.range.insert.startLineNumber,o.range.insert.startColumn),this.editInsertEnd=new _.L(o.range.insert.endLineNumber,o.range.insert.endColumn),this.editReplaceEnd=new _.L(o.range.replace.endLineNumber,o.range.replace.endColumn),this.isInvalid=this.isInvalid||C.e.spansMultipleLines(o.range.insert)||C.e.spansMultipleLines(o.range.replace)||o.range.insert.startLineNumber!==e.lineNumber||o.range.replace.startLineNumber!==e.lineNumber||o.range.insert.startColumn!==o.range.replace.startColumn),"function"!==typeof l.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return __awaiter(this,void 0,void 0,(function*(){if(!this._resolveCache){const o=e.onCancellationRequested((()=>{this._resolveCache=void 0,this._isResolved=!1}));this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then((e=>{Object.assign(this.completion,e),this._isResolved=!0,o.dispose()}),(e=>{(0,d.n2)(e)&&(this._resolveCache=void 0,this._isResolved=!1)}))}return this._resolveCache}))}}class CompletionOptions{constructor(e=2,o=new Set,s=new Set,l=!0){this.snippetSortOrder=e,this.kindFilter=o,this.providerFilter=s,this.showDeprecated=l}}let T;function getSnippetSuggestSupport(){return T}CompletionOptions.default=new CompletionOptions;class CompletionItemModel{constructor(e,o,s,l){this.items=e,this.needsClipboard=o,this.durations=s,this.disposable=l}}function provideSuggestionItems(e,o,s,u=CompletionOptions.default,m={triggerKind:0},f=l.T.None){return __awaiter(this,void 0,void 0,(function*(){const l=new p.G(!0);s=s.clone();const _=o.getWordAtPosition(s),b=_?new C.e(s.lineNumber,_.startColumn,s.lineNumber,_.endColumn):C.e.fromPositions(s),S={replace:b,insert:b.setEndPosition(s.lineNumber,s.column)},y=[],L=new g.SL,x=[];let k=!1;const onCompletionList=(e,o,l)=>{var d,p,m;let f=!1;if(!o)return f;for(let g of o.suggestions)if(!u.kindFilter.has(g.kind)){if(!u.showDeprecated&&(null===(d=null===g||void 0===g?void 0:g.tags)||void 0===d?void 0:d.includes(1)))continue;g.range||(g.range=S),g.sortText||(g.sortText="string"===typeof g.label?g.label:g.label.label),!k&&g.insertTextRules&&4&g.insertTextRules&&(k=w.Yj.guessNeedsClipboard(g.insertText)),y.push(new CompletionItem(s,g,o,e)),f=!0}return(0,g.Wf)(o)&&L.add(o),x.push({providerName:null!==(p=e._debugDisplayName)&&void 0!==p?p:"unknown_provider",elapsedProvider:null!==(m=o.duration)&&void 0!==m?m:-1,elapsedOverall:l.elapsed()}),f},N=(()=>__awaiter(this,void 0,void 0,(function*(){if(!T||u.kindFilter.has(27))return;if(u.providerFilter.size>0&&!u.providerFilter.has(T))return;const e=new p.G(!0),l=yield T.provideCompletionItems(o,s,m,f);onCompletionList(T,l,e)})))();for(let g of e.orderedGroups(o)){let e=!1;if(yield Promise.all(g.map((l=>__awaiter(this,void 0,void 0,(function*(){if(!(u.providerFilter.size>0)||u.providerFilter.has(l))try{const d=new p.G(!0),u=yield l.provideCompletionItems(o,s,m,f);e=onCompletionList(l,u,d)||e}catch(g){(0,d.Cp)(g)}}))))),e||f.isCancellationRequested)break}return yield N,f.isCancellationRequested?(L.dispose(),Promise.reject((0,d.F0)())):new CompletionItemModel(y.sort(getSuggestionComparator(u.snippetSortOrder)),k,{entries:x,elapsed:l.elapsed()},L)}))}function defaultComparator(e,o){if(e.sortTextLow&&o.sortTextLow){if(e.sortTextLow<o.sortTextLow)return-1;if(e.sortTextLow>o.sortTextLow)return 1}return e.completion.label<o.completion.label?-1:e.completion.label>o.completion.label?1:e.completion.kind-o.completion.kind}function snippetUpComparator(e,o){if(e.completion.kind!==o.completion.kind){if(27===e.completion.kind)return-1;if(27===o.completion.kind)return 1}return defaultComparator(e,o)}function snippetDownComparator(e,o){if(e.completion.kind!==o.completion.kind){if(27===e.completion.kind)return 1;if(27===o.completion.kind)return-1}return defaultComparator(e,o)}const I=new Map;function getSuggestionComparator(e){return I.get(e)}let A;I.set(0,snippetUpComparator),I.set(2,snippetDownComparator),I.set(1,defaultComparator),L.P0.registerCommand("_executeCompletionItemProvider",((e,...o)=>__awaiter(void 0,void 0,void 0,(function*(){const[s,d,u,g]=o;(0,m.p_)(f.o.isUri(s)),(0,m.p_)(_.L.isIPosition(d)),(0,m.p_)("string"===typeof u||!u),(0,m.p_)("number"===typeof g||!g);const{completionProvider:p}=e.get(k.p),C=yield e.get(b.S).createModelReference(s);try{const e={incomplete:!1,suggestions:[]},o=[],s=yield provideSuggestionItems(p,C.object.textEditorModel,_.L.lift(d),void 0,{triggerCharacter:u,triggerKind:u?1:0});for(const d of s.items)o.length<(null!==g&&void 0!==g?g:0)&&o.push(d.resolve(l.T.None)),e.incomplete=e.incomplete||d.container.incomplete,e.suggestions.push(d.completion);try{return yield Promise.all(o),e}finally{setTimeout((()=>s.disposable.dispose()),100)}}finally{C.dispose()}}))));let M=[];function showSimpleSuggestions(e,o,s){const{completionProvider:l}=e.get(k.p);A||(A=new class{provideCompletionItems(){let e=M.slice(0),o={suggestions:e};return M.length=0,o}},l.register("*",A)),setTimeout((()=>{var e;M.push(...s),null===(e=o.getContribution("editor.contrib.suggestController"))||void 0===e||e.triggerSuggest((new Set).add(A))}),0)}},492:function(e,o,s){"use strict";s.r(o),s.d(o,{SuggestController:function(){return He},TriggerSuggestAction:function(){return TriggerSuggestAction}});var l=s(5152),d=s(9488),u=s(5393),g=s(1050),p=s(7301),m=s(4669),f=s(8313),_=s(5976),C=s(1432),b=s(4013),w=s(8401),S=s(3407),y=s(6830),L=s(9386),x=s(187),k=s(4314),N=s(9102),D=s(8762),E=s(5084),T=s(3702),I=s(3155),A=s(3108),M=s(5026),R=s(2065),P=s(7060),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};class Memory{constructor(e){this.name=e}select(e,o,s){if(0===s.length)return 0;let l=s[0].score[0];for(let d=0;d<s.length;d++){const{score:e,completion:o}=s[d];if(e[0]!==l)break;if(o.preselect)return d}return 0}}class NoMemory extends Memory{constructor(){super("first")}memorize(e,o,s){}toJSON(){}fromJSON(){}}class LRUMemory extends Memory{constructor(){super("recentlyUsed"),this._cache=new T.z6(300,.66),this._seq=0}memorize(e,o,s){const l=`${e.getLanguageId()}/${s.textLabel}`;this._cache.set(l,{touch:this._seq++,type:s.completion.kind,insertText:s.completion.insertText})}select(e,o,s){if(0===s.length)return 0;const l=e.getLineContent(o.lineNumber).substr(o.column-10,o.column-1);if(/\s$/.test(l))return super.select(e,o,s);let d=s[0].score[0],u=-1,g=-1,p=-1;for(let m=0;m<s.length;m++){if(s[m].score[0]!==d)break;const o=`${e.getLanguageId()}/${s[m].textLabel}`,l=this._cache.peek(o);if(l&&l.touch>p&&l.type===s[m].completion.kind&&l.insertText===s[m].completion.insertText&&(p=l.touch,g=m),s[m].completion.preselect&&-1===u)return m}return-1!==g?g:-1!==u?u:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let o=0;for(const[s,l]of e)l.touch=o,l.type="number"===typeof l.type?l.type:I.gX.fromString(l.type),this._cache.set(s,l);this._seq=this._cache.size}}class PrefixMemory extends Memory{constructor(){super("recentlyUsedByPrefix"),this._trie=T.Id.forStrings(),this._seq=0}memorize(e,o,s){const{word:l}=e.getWordUntilPosition(o),d=`${e.getLanguageId()}/${l}`;this._trie.set(d,{type:s.completion.kind,insertText:s.completion.insertText,touch:this._seq++})}select(e,o,s){let{word:l}=e.getWordUntilPosition(o);if(!l)return super.select(e,o,s);let d=`${e.getLanguageId()}/${l}`,u=this._trie.get(d);if(u||(u=this._trie.findSubstr(d)),u)for(let g=0;g<s.length;g++){let{kind:e,insertText:o}=s[g].completion;if(e===u.type&&o===u.insertText)return g}return super.select(e,o,s)}toJSON(){let e=[];return this._trie.forEach(((o,s)=>e.push([s,o]))),e.sort(((e,o)=>-(e[1].touch-o[1].touch))).forEach(((e,o)=>e[1].touch=o)),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[o,s]of e)s.type="number"===typeof s.type?s.type:I.gX.fromString(s.type),this._trie.set(o,s)}}}let O=class SuggestMemoryService{constructor(e,o){this._storageService=e,this._configService=o,this._disposables=new _.SL,this._persistSoon=new u.pY((()=>this._saveState()),500),this._disposables.add(e.onWillSaveState((e=>{e.reason===P.fk.SHUTDOWN&&this._saveState()})))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,o,s){this._withStrategy(e,o).memorize(e,o,s),this._persistSoon.schedule()}select(e,o,s){return this._withStrategy(e,o).select(e,o,s)}_withStrategy(e,o){var s;const l=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(o.lineNumber,o.column),resource:e.uri});if((null===(s=this._strategy)||void 0===s?void 0:s.name)!==l){this._saveState();const e=SuggestMemoryService._strategyCtors.get(l)||NoMemory;this._strategy=new e;try{const e=this._configService.getValue("editor.suggest.shareSuggestSelections"),o=e?0:1,s=this._storageService.get(`${SuggestMemoryService._storagePrefix}/${l}`,o);s&&this._strategy.fromJSON(JSON.parse(s))}catch(d){}}return this._strategy}_saveState(){if(this._strategy){const e=this._configService.getValue("editor.suggest.shareSuggestSelections"),o=e?0:1,s=JSON.stringify(this._strategy);this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`,s,o,1)}}};O._strategyCtors=new Map([["recentlyUsedByPrefix",PrefixMemory],["recentlyUsed",LRUMemory],["first",NoMemory]]),O._storagePrefix="suggest/memories",O=__decorate([__param(0,P.Uy),__param(1,A.Ui)],O);const F=(0,R.yh)("ISuggestMemories");(0,M.z)(F,O,!0);var B=s(8819),wordContextKey_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},wordContextKey_param=function(e,o){return function(s,l){o(s,l,e)}};let W=class WordContextKey{constructor(e,o){this._editor=e,this._enabled=!1,this._ckAtEnd=WordContextKey.AtEnd.bindTo(o),this._configListener=this._editor.onDidChangeConfiguration((e=>e.hasChanged(111)&&this._update())),this._update()}dispose(){var e;this._configListener.dispose(),null===(e=this._selectionListener)||void 0===e||e.dispose(),this._ckAtEnd.reset()}_update(){const e="on"===this._editor.getOption(111);if(this._enabled!==e)if(this._enabled=e,this._enabled){const checkForWordEnd=()=>{if(!this._editor.hasModel())return void this._ckAtEnd.set(!1);const e=this._editor.getModel(),o=this._editor.getSelection(),s=e.getWordAtPosition(o.getStartPosition());s?this._ckAtEnd.set(s.endColumn===o.getStartPosition().column):this._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(checkForWordEnd),checkForWordEnd()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};W.AtEnd=new B.uy("atEndOfWord",!1),W=wordContextKey_decorate([wordContextKey_param(1,B.i6)],W);var V=s(3580),H=s(4144),z=s(4565),U=s(9989),K=s(3557),j=s(5621),suggestAlternatives_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},suggestAlternatives_param=function(e,o){return function(s,l){o(s,l,e)}};let G=class SuggestAlternatives{constructor(e,o){this._editor=e,this._index=0,this._ckOtherSuggestions=SuggestAlternatives.OtherSuggestions.bindTo(o)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:o},s){if(0===e.items.length)return void this.reset();let l=SuggestAlternatives._moveIndex(!0,e,o);l!==o?(this._acceptNext=s,this._model=e,this._index=o,this._listener=this._editor.onDidChangeCursorPosition((()=>{this._ignore||this.reset()})),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(e,o,s){let l=s;while(1){if(l=(l+o.items.length+(e?1:-1))%o.items.length,l===s)break;if(!o.items[l].completion.additionalTextEdits)break}return l}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=SuggestAlternatives._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};G.OtherSuggestions=new B.uy("hasOtherSuggestions",!1),G=suggestAlternatives_decorate([suggestAlternatives_param(1,B.i6)],G);var q=s(4906);class CommitCharacterController{constructor(e,o,s){this._disposables=new _.SL,this._disposables.add(o.onDidShow((()=>this._onItem(o.getFocusedItem())))),this._disposables.add(o.onDidFocus(this._onItem,this)),this._disposables.add(o.onDidHide(this.reset,this)),this._disposables.add(e.onWillType((l=>{if(this._active&&!o.isFrozen()){const o=l.charCodeAt(l.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&s(this._active.item)}})))}_onItem(e){if(!e||!(0,d.Of)(e.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===e.item)return;const o=new q.q;for(const s of e.item.completion.commitCharacters)s.length>0&&o.add(s.charCodeAt(0));this._active={acceptCharacters:o,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var Q=s(2677),Z=s(3860),Y=s(4319),J=s(9694),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class WordDistance{static create(e,o){return __awaiter(this,void 0,void 0,(function*(){if(!o.getOption(106).localityBonus)return WordDistance.None;if(!o.hasModel())return WordDistance.None;const s=o.getModel(),l=o.getPosition();if(!e.canComputeWordRanges(s.uri))return WordDistance.None;const[u]=yield(new J.x).provideSelectionRanges(s,[l]);if(0===u.length)return WordDistance.None;const g=yield e.computeWordRanges(s.uri,u[0].range);if(!g)return WordDistance.None;const p=s.getWordUntilPosition(l);return delete g[p.word],new class extends WordDistance{distance(e,s){if(!l.equals(o.getPosition()))return 0;if(17===s.kind)return 2<<20;let p="string"===typeof s.label?s.label:s.label.label,m=g[p];if((0,d.XY)(m))return 2<<20;let f=(0,d.ry)(m,k.e.fromPositions(e),k.e.compareRangesUsingStarts),_=f>=0?m[f]:m[Math.max(0,~f-1)],C=u.length;for(const o of u){if(!k.e.containsRange(o.range,_))break;C-=1}return C}}}))}}WordDistance.None=new class extends WordDistance{distance(){return 0}};var X=s(4972),ee=s(829),te=s(5392);class CompletionModel{constructor(e,o,s,l,d,u,g){this.clipboardText=g,this._snippetCompareFn=CompletionModel._compareCompletionItems,this._items=e,this._column=o,this._wordDistance=l,this._options=d,this._refilterKind=1,this._lineContext=s,"top"===u?this._snippetCompareFn=CompletionModel._compareCompletionItemsSnippetsUp:"bottom"===u&&(this._snippetCompareFn=CompletionModel._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[o,s]of this._providerInfo)s&&e.add(o);return e}adopt(e){let o=[];for(let s=0;s<this._items.length;)e.has(this._items[s].provider)?s++:(o.push(this._items[s]),this._items[s]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,o}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){0!==this._refilterKind&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:o,characterCountDelta:s}=this._lineContext;let l="",u="";const g=1===this._refilterKind?this._items:this._filteredItems,p=[],m=!this._options.filterGraceful||g.length>2e3?te.EW:te.l7;for(let d=0;d<g.length;d++){const f=g[d];if(f.isInvalid)continue;this._providerInfo.set(f.provider,Boolean(f.container.incomplete));const _=f.position.column-f.editStart.column,C=_+s-(f.position.column-this._column);if(l.length!==C&&(l=0===C?"":o.slice(-C),u=l.toLowerCase()),f.word=l,0===C)f.score=te.CL.Default;else{let e=0;while(e<_){const o=l.charCodeAt(e);if(32!==o&&9!==o)break;e+=1}if(e>=C)f.score=te.CL.Default;else if("string"===typeof f.completion.filterText){let o=m(l,u,e,f.completion.filterText,f.filterTextLow,0,!1);if(!o)continue;0===(0,Q.zY)(f.completion.filterText,f.textLabel)?f.score=o:(f.score=(0,te.jB)(l,u,e,f.textLabel,f.labelLow,0),f.score[0]=o[0])}else{let o=m(l,u,e,f.textLabel,f.labelLow,0,!1);if(!o)continue;f.score=o}}f.idx=d,f.distance=this._wordDistance.distance(f.position,f.completion),p.push(f),e.push(f.textLabel.length)}this._filteredItems=p.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,d.HW)(e.length-.85,e,((e,o)=>e-o)):0}}static _compareCompletionItems(e,o){return e.score[0]>o.score[0]?-1:e.score[0]<o.score[0]?1:e.distance<o.distance?-1:e.distance>o.distance?1:e.idx<o.idx?-1:e.idx>o.idx?1:0}static _compareCompletionItemsSnippetsDown(e,o){if(e.completion.kind!==o.completion.kind){if(27===e.completion.kind)return 1;if(27===o.completion.kind)return-1}return CompletionModel._compareCompletionItems(e,o)}static _compareCompletionItemsSnippetsUp(e,o){if(e.completion.kind!==o.completion.kind){if(27===e.completion.kind)return-1;if(27===o.completion.kind)return 1}return CompletionModel._compareCompletionItems(e,o)}}var ie=s(1922),suggestModel_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},suggestModel_param=function(e,o){return function(s,l){o(s,l,e)}},suggestModel_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class suggestModel_LineContext{constructor(e,o,s,l){this.leadingLineContent=e.getLineContent(o.lineNumber).substr(0,o.column-1),this.leadingWord=e.getWordUntilPosition(o),this.lineNumber=o.lineNumber,this.column=o.column,this.auto=s,this.shy=l}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const o=e.getModel(),s=e.getPosition();o.tokenizeIfCheap(s.lineNumber);const l=o.getWordAtPosition(s);return!!l&&(l.endColumn===s.column&&!!isNaN(Number(l.word)))}}function canShowQuickSuggest(e,o,s){if(!Boolean(o.getContextKeyValue("inlineSuggestionVisible")))return!0;const l=s.getValue("editor.inlineSuggest.allowQuickSuggestions");return void 0!==l&&Boolean(l)}function canShowSuggestOnTriggerCharacters(e,o,s){if(!Boolean(o.getContextKeyValue("inlineSuggestionVisible")))return!0;const l=s.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return void 0!==l&&Boolean(l)}let ne=class SuggestModel{constructor(e,o,s,l,d,g,p,f){this._editor=e,this._editorWorkerService=o,this._clipboardService=s,this._telemetryService=l,this._logService=d,this._contextKeyService=g,this._configurationService=p,this._languageFeaturesService=f,this._toDispose=new _.SL,this._quickSuggestDelay=10,this._triggerCharacterListener=new _.SL,this._triggerQuickSuggest=new u._F,this._state=0,this._completionDisposables=new _.SL,this._onDidCancel=new m.Q5,this._onDidTrigger=new m.Q5,this._onDidSuggest=new m.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Z.Y(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()}))),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange((()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})));let C=!1;this._toDispose.add(this._editor.onDidCompositionStart((()=>{C=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((()=>{C=!1,this._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((e=>{C||this._onCursorChange(e)}))),this._toDispose.add(this._editor.onDidChangeModelContent((()=>{C||this._refilterCompletionItems()}))),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){(0,_.B9)(this._triggerCharacterListener),(0,_.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(80),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&0!==this._quickSuggestDelay||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(81)||!this._editor.hasModel()||!this._editor.getOption(109))return;const e=new Map;for(const o of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const s of o.triggerCharacters||[]){let l=e.get(s);l||(l=new Set,l.add((0,j.ZJ)()),e.set(s,l)),l.add(o)}const checkTriggerCharacter=o=>{if(!canShowSuggestOnTriggerCharacters(this._editor,this._contextKeyService,this._configurationService))return;if(suggestModel_LineContext.shouldAutoTrigger(this._editor))return;if(!o){const e=this._editor.getPosition(),s=this._editor.getModel();o=s.getLineContent(e.lineNumber).substr(0,e.column-1)}let s="";(0,Q.YK)(o.charCodeAt(o.length-1))?(0,Q.ZG)(o.charCodeAt(o.length-2))&&(s=o.substr(o.length-2)):s=o.charAt(o.length-1);const l=e.get(s);if(l){const e=this._completionModel?{items:this._completionModel.adopt(l),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:s},Boolean(this._completionModel),l,e)}};this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd((()=>checkTriggerCharacter())))}get state(){return this._state}cancel(e=!1){var o;0!==this._state&&(this._triggerQuickSuggest.cancel(),null===(o=this._requestToken)||void 0===o||o.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){0!==this._state&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:2===this._state,shy:!1},!0):this.cancel())}_onCursorChange(e){if(!this._editor.hasModel())return;const o=this._currentSelection;this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source?this.cancel():0===this._state&&0===e.reason?(o.containsRange(this._currentSelection)||o.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():0!==this._state&&3===e.reason&&this._refilterCompletionItems()}_onCompositionEnd(){0===this._state?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;!1!==this._editor.getOption(79)&&(this._editor.getOption(106).snippetsPreventQuickSuggestions&&(null===(e=D.SnippetController2.get(this._editor))||void 0===e?void 0:e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((()=>{if(0!==this._state)return;if(!suggestModel_LineContext.shouldAutoTrigger(this._editor))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),o=this._editor.getPosition(),s=this._editor.getOption(79);if(!1!==s){if(!0===s);else{e.tokenizeIfCheap(o.lineNumber);const l=e.getLineTokens(o.lineNumber),d=l.getStandardTokenType(l.findTokenIndexAtOffset(Math.max(o.column-1-1,0))),u=s.other&&0===d||s.comments&&1===d||s.strings&&2===d;if(!u)return}canShowQuickSuggest(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(e)&&this.trigger({auto:!0,shy:!1})}}),this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then((()=>{if(0===this._state)return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),o=this._editor.getPosition(),s=new suggestModel_LineContext(e,o,2===this._state,!1);this._onNewContext(s)}))}trigger(e,o=!1,s,l){var d;if(!this._editor.hasModel())return;const u=this._editor.getModel(),m=e.auto,f=new suggestModel_LineContext(u,this._editor.getPosition(),m,e.shy);this.cancel(o),this._state=m?2:1,this._onDidTrigger.fire({auto:m,shy:e.shy,position:this._editor.getPosition()}),this._context=f;let _={triggerKind:null!==(d=e.triggerKind)&&void 0!==d?d:0};e.triggerCharacter&&(_={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new g.A;const C=this._editor.getOption(101);let b=1;switch(C){case"top":b=0;break;case"bottom":b=2;break}const{itemKind:w,showDeprecated:S}=SuggestModel._createSuggestFilter(this._editor),y=WordDistance.create(this._editorWorkerService,this._editor),L=(0,j.kL)(this._languageFeaturesService.completionProvider,u,this._editor.getPosition(),new j.A9(b,w,s,S),_,this._requestToken.token);Promise.all([L,y]).then((([o,s])=>suggestModel_awaiter(this,void 0,void 0,(function*(){var d;if(null===(d=this._requestToken)||void 0===d||d.dispose(),!this._editor.hasModel())return;let u=null===l||void 0===l?void 0:l.clipboardText;if(!u&&o.needsClipboard&&(u=yield this._clipboardService.readText()),0===this._state)return;const g=this._editor.getModel();let p=o.items;if(l){const e=(0,j.wg)(b);p=p.concat(l.items).sort(e)}const f=new suggestModel_LineContext(g,this._editor.getPosition(),m,e.shy);this._completionModel=new CompletionModel(p,this._context.column,{leadingLineContent:f.leadingLineContent,characterCountDelta:f.column-this._context.column},s,this._editor.getOption(106),this._editor.getOption(101),u),this._completionDisposables.add(o.disposable),this._onNewContext(f),this._reportDurationsTelemetry(o.durations)})))).catch(p.dL)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout((()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)}))}static _createSuggestFilter(e){const o=new Set,s=e.getOption(101);"none"===s&&o.add(27);const l=e.getOption(106);return l.showMethods||o.add(0),l.showFunctions||o.add(1),l.showConstructors||o.add(2),l.showFields||o.add(3),l.showVariables||o.add(4),l.showClasses||o.add(5),l.showStructs||o.add(6),l.showInterfaces||o.add(7),l.showModules||o.add(8),l.showProperties||o.add(9),l.showEvents||o.add(10),l.showOperators||o.add(11),l.showUnits||o.add(12),l.showValues||o.add(13),l.showConstants||o.add(14),l.showEnums||o.add(15),l.showEnumMembers||o.add(16),l.showKeywords||o.add(17),l.showWords||o.add(18),l.showColors||o.add(19),l.showFiles||o.add(20),l.showReferences||o.add(21),l.showColors||o.add(22),l.showFolders||o.add(23),l.showTypeParameters||o.add(24),l.showSnippets||o.add(27),l.showUsers||o.add(25),l.showIssues||o.add(26),{itemKind:o,showDeprecated:l.showDeprecated}}_onNewContext(e){if(this._context)if(e.lineNumber===this._context.lineNumber)if((0,Q.V8)(e.leadingLineContent)===(0,Q.V8)(this._context.leadingLineContent)){if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();else if(this._completionModel)if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const e=new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));for(let s of this._completionModel.allProvider)e.delete(s);const o=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,e,{items:o,clipboardText:this._completionModel.clipboardText})}else if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&0!==e.leadingWord.word.length){const{incomplete:e}=this._completionModel,o=this._completionModel.adopt(e);this.trigger({auto:2===this._state,shy:!1,triggerKind:2},!0,e,{items:o,clipboardText:this._completionModel.clipboardText})}else{let o=this._completionModel.lineContext,s=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){if(suggestModel_LineContext.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.auto,shy:!1},!0);if(this._context.auto)return void this.cancel();if(this._completionModel.lineContext=o,s=this._completionModel.items.length>0,s&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:s})}}else this.cancel();else this.cancel()}};ne=suggestModel_decorate([suggestModel_param(1,Y.p),suggestModel_param(2,X.p),suggestModel_param(3,ee.b),suggestModel_param(4,K.VZ),suggestModel_param(5,B.i6),suggestModel_param(6,A.Ui),suggestModel_param(7,ie.p)],ne);class OvertypingCapturer{constructor(e,o){this._disposables=new _.SL,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType((()=>{if(!this._empty)return;if(!e.hasModel())return;const o=e.getSelections(),s=o.length;let l=!1;for(let e=0;e<s;e++)if(!o[e].isEmpty()){l=!0;break}if(!l)return;this._lastOvertyped=[];const d=e.getModel();for(let e=0;e<s;e++){const s=o[e];if(d.getValueLengthInRange(s)>OvertypingCapturer._maxSelectionLength)return;this._lastOvertyped[e]={value:d.getValueInRange(s),multiline:s.startLineNumber!==s.endLineNumber}}this._empty=!1}))),this._disposables.add(o.onDidCancel((e=>{this._empty||e.retrigger||(this._empty=!0)})))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}OvertypingCapturer._maxSelectionLength=51200;var oe=s(5321),se=(s(8609),s(9047)),re=s(9870),ae=s(4527),le=s(317),ce=s(4167),suggestWidgetStatus_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},suggestWidgetStatus_param=function(e,o){return function(s,l){o(s,l,e)}};class StatusBarViewItem extends ce.Mm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=(0,V.N)("ddd","{0} ({1})",this._action.label,StatusBarViewItem.symbolPrintEnter(e)))}static symbolPrintEnter(e){var o;return null===(o=e.getLabel())||void 0===o?void 0:o.replace(/\benter\b/gi,"⏎")}}let de=class SuggestWidgetStatus{constructor(e,o,s,l){this._menuService=s,this._contextKeyService=l,this._menuDisposables=new _.SL,this.element=oe.R3(e,oe.$(".suggest-status-bar"));const actionViewItemProvider=e=>e instanceof H.U8?o.createInstance(StatusBarViewItem,e,void 0):void 0;this._leftActions=new le.o(this.element,{actionViewItemProvider:actionViewItemProvider}),this._rightActions=new le.o(this.element,{actionViewItemProvider:actionViewItemProvider}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(j.GI,this._contextKeyService),renderMenu=()=>{const o=[],s=[];for(let[l,d]of e.getActions())"left"===l?o.push(...d):s.push(...d);this._leftActions.clear(),this._leftActions.push(o),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange((()=>renderMenu()))),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};de=suggestWidgetStatus_decorate([suggestWidgetStatus_param(1,R.TG),suggestWidgetStatus_param(2,H.co),suggestWidgetStatus_param(3,B.i6)],de);s(1713);var he=s(3910),ue=s(8810),ge=s(7781),pe=s(3098);class ResizableHTMLElement{constructor(){let e;this._onDidWillResize=new m.Q5,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new m.Q5,this.onDidResize=this._onDidResize.event,this._sashListener=new _.SL,this._size=new oe.Ro(0,0),this._minSize=new oe.Ro(0,0),this._maxSize=new oe.Ro(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new pe.g(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new pe.g(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new pe.g(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:pe.l.North}),this._southSash=new pe.g(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:pe.l.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let o=0,s=0;this._sashListener.add(m.ju.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)((()=>{void 0===e&&(this._onDidWillResize.fire(),e=this._size,o=0,s=0)}))),this._sashListener.add(m.ju.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)((()=>{void 0!==e&&(e=void 0,o=0,s=0,this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(this._eastSash.onDidChange((l=>{e&&(s=l.currentX-l.startX,this.layout(e.height+o,e.width+s),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))}))),this._sashListener.add(this._westSash.onDidChange((l=>{e&&(s=-(l.currentX-l.startX),this.layout(e.height+o,e.width+s),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))}))),this._sashListener.add(this._northSash.onDidChange((l=>{e&&(o=-(l.currentY-l.startY),this.layout(e.height+o,e.width+s),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))}))),this._sashListener.add(this._southSash.onDidChange((l=>{e&&(o=l.currentY-l.startY,this.layout(e.height+o,e.width+s),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))}))),this._sashListener.add(m.ju.any(this._eastSash.onDidReset,this._westSash.onDidReset)((e=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(m.ju.any(this._northSash.onDidReset,this._southSash.onDidReset)((e=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))})))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,o,s,l){this._northSash.state=e?3:0,this._eastSash.state=o?3:0,this._southSash.state=s?3:0,this._westSash.state=l?3:0}layout(e=this.size.height,o=this.size.width){const{height:s,width:l}=this._minSize,{height:d,width:u}=this._maxSize;e=Math.max(s,Math.min(d,e)),o=Math.max(l,Math.min(u,o));const g=new oe.Ro(o,e);oe.Ro.equals(g,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=o+"px",this._size=g,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var me=s(6268),fe=s(3161),_e=s(3046),Ce=s(9365),ve=s(5831),be=s(4141),suggestWidgetDetails_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},suggestWidgetDetails_param=function(e,o){return function(s,l){o(s,l,e)}};function canExpandCompletionItem(e){return!!e&&Boolean(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}let we=class SuggestDetailsWidget{constructor(e,o){this._editor=e,this._onDidClose=new m.Q5,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new m.Q5,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new _.SL,this._renderDisposeable=new _.SL,this._borderWidth=1,this._size=new oe.Ro(330,0),this.domNode=oe.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=o.createInstance(ve.$,{editor:e}),this._body=oe.$(".body"),this._scrollbar=new fe.s$(this._body,{}),oe.R3(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=oe.R3(this._body,oe.$(".header")),this._close=oe.R3(this._header,oe.$("span"+_e.lA.close.cssSelector)),this._close.title=V.N("details.close","Close"),this._type=oe.R3(this._header,oe.$("p.type")),this._docs=oe.R3(this._body,oe.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(44)&&this._configureFont()})))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),o=e.get(44),s=o.getMassagedFontFamily(me.isSafari?be.hL.fontFamily:null),l=e.get(107)||o.fontSize,d=e.get(108)||o.lineHeight,u=o.fontWeight,g=`${l}px`,p=`${d}px`;this.domNode.style.fontSize=g,this.domNode.style.lineHeight=""+d/l,this.domNode.style.fontWeight=u,this.domNode.style.fontFeatureSettings=o.fontFeatureSettings,this._type.style.fontFamily=s,this._close.style.height=p,this._close.style.width=p}getLayoutInfo(){const e=this._editor.getOption(108)||this._editor.getOption(44).lineHeight,o=this._borderWidth,s=2*o;return{lineHeight:e,borderWidth:o,borderHeight:s,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=V.N("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}renderItem(e,o){var s,l;this._renderDisposeable.clear();let{detail:d,documentation:u}=e.completion;if(o){let o="";o+=`score: ${e.score[0]}\n`,o+=`prefix: ${null!==(s=e.word)&&void 0!==s?s:"(no prefix)"}\n`,o+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}\n`,o+=`distance: ${e.distance} (localityBonus-setting)\n`,o+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}\n`,o+=`commit_chars: ${null===(l=e.completion.commitCharacters)||void 0===l?void 0:l.join("")}\n`,u=(new Ce.W5).appendCodeblock("empty",o),d=`Provider: ${e.provider._debugDisplayName}`}if(o||canExpandCompletionItem(e)){if(this.domNode.classList.remove("no-docs","no-type"),d){const e=d.length>1e5?`${d.substr(0,1e5)}…`:d;this._type.textContent=e,this._type.title=e,oe.$Z(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(e))}else oe.PO(this._type),this._type.title="",oe.Cp(this._type),this.domNode.classList.add("no-type");if(oe.PO(this._docs),"string"===typeof u)this._docs.classList.remove("markdown-docs"),this._docs.textContent=u;else if(u){this._docs.classList.add("markdown-docs"),oe.PO(this._docs);const e=this._markdownRenderer.render(u);this._docs.appendChild(e.element),this._renderDisposeable.add(e),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=e=>{e.preventDefault(),e.stopPropagation()},this._close.onclick=e=>{e.preventDefault(),e.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,o){const s=new oe.Ro(e,o);oe.Ro.equals(s,this._size)||(this._size=s,oe.dp(this.domNode,e,o)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};we=suggestWidgetDetails_decorate([suggestWidgetDetails_param(1,R.TG)],we);class SuggestDetailsOverlay{constructor(e,o){let s,l;this.widget=e,this._editor=o,this._disposables=new _.SL,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new ResizableHTMLElement,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let d=0,u=0;this._disposables.add(this._resizable.onDidWillResize((()=>{s=this._topLeft,l=this._resizable.size}))),this._disposables.add(this._resizable.onDidResize((e=>{if(s&&l){this.widget.layout(e.dimension.width,e.dimension.height);let o=!1;e.west&&(u=l.width-e.dimension.width,o=!0),e.north&&(d=l.height-e.dimension.height,o=!0),o&&this._applyTopLeft({top:s.top+d,left:s.left+u})}e.done&&(s=void 0,l=void 0,d=0,u=0,this._userSize=e.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((()=>{var e;this._anchorBox&&this._placeAtAnchor(this._anchorBox,null!==(e=this._userSize)&&void 0!==e?e:this.widget.size,this._preferAlignAtTop)})))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,o){var s;const l=e.getBoundingClientRect();this._anchorBox=l,this._preferAlignAtTop=o,this._placeAtAnchor(this._anchorBox,null!==(s=this._userSize)&&void 0!==s?s:this.widget.size,o)}_placeAtAnchor(e,o,s){var l;const d=oe.D6(document.body),u=this.widget.getLayoutInfo(),g=new oe.Ro(220,2*u.lineHeight),p=e.top,m=function(){const s=d.width-(e.left+e.width+u.borderWidth+u.horizontalPadding),l=-u.borderWidth+e.left+e.width,m=new oe.Ro(s,d.height-e.top-u.borderHeight-u.verticalPadding),f=m.with(void 0,e.top+e.height-u.borderHeight-u.verticalPadding);return{top:p,left:l,fit:s-o.width,maxSizeTop:m,maxSizeBottom:f,minSize:g.with(Math.min(s,g.width))}}(),f=function(){const s=e.left-u.borderWidth-u.horizontalPadding,l=Math.max(u.horizontalPadding,e.left-o.width-u.borderWidth),m=new oe.Ro(s,d.height-e.top-u.borderHeight-u.verticalPadding),f=m.with(void 0,e.top+e.height-u.borderHeight-u.verticalPadding);return{top:p,left:l,fit:s-o.width,maxSizeTop:m,maxSizeBottom:f,minSize:g.with(Math.min(s,g.width))}}(),_=function(){const s=e.left,l=-u.borderWidth+e.top+e.height,p=new oe.Ro(e.width-u.borderHeight,d.height-e.top-e.height-u.verticalPadding);return{top:l,left:s,fit:p.height-o.height,maxSizeBottom:p,maxSizeTop:p,minSize:g.with(p.width)}}(),C=[m,f,_],b=null!==(l=C.find((e=>e.fit>=0)))&&void 0!==l?l:C.sort(((e,o)=>o.fit-e.fit))[0],w=e.top+e.height-u.borderHeight;let S,y=o.height;const L=Math.max(b.maxSizeTop.height,b.maxSizeBottom.height);let x;y>L&&(y=L),s?y<=b.maxSizeTop.height?(S=!0,x=b.maxSizeTop):(S=!1,x=b.maxSizeBottom):y<=b.maxSizeBottom.height?(S=!1,x=b.maxSizeBottom):(S=!0,x=b.maxSizeTop),this._applyTopLeft({left:b.left,top:S?b.top:w-y}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!S,b===m,S,b!==m),this._resizable.minSize=b.minSize,this._resizable.maxSize=x,this._resizable.layout(y,Math.min(x.width,o.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Se,ye=s(489),Le=s(666),xe=s(6663),ke=s(5935),Ne=s(8801);(function(e){e[e["FILE"]=0]="FILE",e[e["FOLDER"]=1]="FOLDER",e[e["ROOT_FOLDER"]=2]="ROOT_FOLDER"})(Se||(Se={}));const De=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function getIconClasses(e,o,s,l){const d=l===Se.ROOT_FOLDER?["rootfolder-icon"]:l===Se.FOLDER?["folder-icon"]:["file-icon"];if(s){let u;if(s.scheme===xe.lg.data){const e=ke.Vb.parseMetaData(s);u=e.get(ke.Vb.META_DATA_LABEL)}else{const e=s.path.match(De);e?(u=cssEscape(e[2].toLowerCase()),e[1]&&d.push(`${cssEscape(e[1].toLowerCase())}-name-dir-icon`)):u=cssEscape(s.authority.toLowerCase())}if(l===Se.FOLDER)d.push(`${u}-name-folder-icon`);else{if(u){if(d.push(`${u}-name-file-icon`),d.push("name-file-icon"),u.length<=255){const e=u.split(".");for(let o=1;o<e.length;o++)d.push(`${e.slice(o).join(".")}-ext-file-icon`)}d.push("ext-file-icon")}const l=detectLanguageId(e,o,s);l&&d.push(`${cssEscape(l)}-lang-file-icon`)}}return d}function detectLanguageId(e,o,s){if(!s)return null;let l=null;if(s.scheme===xe.lg.data){const e=ke.Vb.parseMetaData(s),d=e.get(ke.Vb.META_DATA_MIME);d&&(l=o.getLanguageIdByMimeType(d))}else{const o=e.getModel(s);o&&(l=o.getLanguageId())}return l&&l!==Ne.bd?l:o.guessLanguageIdByFilepathOrFirstLine(s)}function cssEscape(e){return e.replace(/[\11\12\14\15\40]/g,"/")}var Ee,Te=s(3733),Ie=s(2042),Ae=s(9554),suggestWidgetRenderer_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},suggestWidgetRenderer_param=function(e,o){return function(s,l){o(s,l,e)}};function getAriaId(e){return`suggest-aria-id:${e}`}const Me=(0,Ae.q5)("suggest-more-info",_e.lA.chevronRight,V.N("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),Re=new(Ee=class ColorExtractor{extract(e,o){if(e.textLabel.match(ColorExtractor._regexStrict))return o[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(ColorExtractor._regexStrict))return o[0]=e.completion.detail,!0;if("string"===typeof e.completion.documentation){const s=ColorExtractor._regexRelaxed.exec(e.completion.documentation);if(s&&(0===s.index||s.index+s[0].length===e.completion.documentation.length))return o[0]=s[0],!0}return!1}},Ee._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Ee._regexStrict=new RegExp(`^${Ee._regexRelaxed.source}$`,"i"),Ee);let Pe=class ItemRenderer{constructor(e,o,s,l){this._editor=e,this._modelService=o,this._languageService=s,this._themeService=l,this._onDidToggleDetails=new m.Q5,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const o=Object.create(null);o.disposables=new _.SL,o.root=e,o.root.classList.add("show-file-icons"),o.icon=(0,oe.R3)(e,(0,oe.$)(".icon")),o.colorspan=(0,oe.R3)(o.icon,(0,oe.$)("span.colorspan"));const s=(0,oe.R3)(e,(0,oe.$)(".contents")),l=(0,oe.R3)(s,(0,oe.$)(".main"));o.iconContainer=(0,oe.R3)(l,(0,oe.$)(".icon-label.codicon")),o.left=(0,oe.R3)(l,(0,oe.$)("span.left")),o.right=(0,oe.R3)(l,(0,oe.$)("span.right")),o.iconLabel=new ye.g(o.left,{supportHighlights:!0,supportIcons:!0}),o.disposables.add(o.iconLabel),o.parametersLabel=(0,oe.R3)(o.left,(0,oe.$)("span.signature-label")),o.qualifierLabel=(0,oe.R3)(o.left,(0,oe.$)("span.qualifier-label")),o.detailsLabel=(0,oe.R3)(o.right,(0,oe.$)("span.details-label")),o.readMore=(0,oe.R3)(o.right,(0,oe.$)("span.readMore"+ge.kS.asCSSSelector(Me))),o.readMore.title=V.N("readMore","Read More");const configureFont=()=>{const e=this._editor.getOptions(),s=e.get(44),d=s.getMassagedFontFamily(me.isSafari?be.hL.fontFamily:null),u=s.fontFeatureSettings,g=e.get(107)||s.fontSize,p=e.get(108)||s.lineHeight,m=s.fontWeight,f=`${g}px`,_=`${p}px`;o.root.style.fontSize=f,o.root.style.fontWeight=m,l.style.fontFamily=d,l.style.fontFeatureSettings=u,l.style.lineHeight=_,o.icon.style.height=_,o.icon.style.width=_,o.readMore.style.height=_,o.readMore.style.width=_};return configureFont(),o.disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(44)||e.hasChanged(107)||e.hasChanged(108))&&configureFont()}))),o}renderElement(e,o,s){const{completion:l}=e;s.root.id=getAriaId(o),s.colorspan.style.backgroundColor="";const u={labelEscapeNewLines:!0,matches:(0,te.mB)(e.score)};let g=[];if(19===l.kind&&Re.extract(e,g))s.icon.className="icon customcolor",s.iconContainer.className="icon hide",s.colorspan.style.backgroundColor=g[0];else if(20===l.kind&&this._themeService.getFileIconTheme().hasFileIcons){s.icon.className="icon hide",s.iconContainer.className="icon hide";const o=getIconClasses(this._modelService,this._languageService,Le.o.from({scheme:"fake",path:e.textLabel}),Se.FILE),d=getIconClasses(this._modelService,this._languageService,Le.o.from({scheme:"fake",path:l.detail}),Se.FILE);u.extraClasses=o.length>d.length?o:d}else 23===l.kind&&this._themeService.getFileIconTheme().hasFolderIcons?(s.icon.className="icon hide",s.iconContainer.className="icon hide",u.extraClasses=(0,d.xH)([getIconClasses(this._modelService,this._languageService,Le.o.from({scheme:"fake",path:e.textLabel}),Se.FOLDER),getIconClasses(this._modelService,this._languageService,Le.o.from({scheme:"fake",path:l.detail}),Se.FOLDER)])):(s.icon.className="icon hide",s.iconContainer.className="",s.iconContainer.classList.add("suggest-icon",..._e.dT.asClassNameArray(I.gX.toIcon(l.kind))));l.tags&&l.tags.indexOf(1)>=0&&(u.extraClasses=(u.extraClasses||[]).concat(["deprecated"]),u.matches=[]),s.iconLabel.setLabel(e.textLabel,void 0,u),"string"===typeof l.label?(s.parametersLabel.textContent="",s.detailsLabel.textContent=stripNewLines(l.detail||""),s.root.classList.add("string-label")):(s.parametersLabel.textContent=stripNewLines(l.label.detail||""),s.detailsLabel.textContent=stripNewLines(l.label.description||""),s.root.classList.remove("string-label")),this._editor.getOption(106).showInlineDetails?(0,oe.$Z)(s.detailsLabel):(0,oe.Cp)(s.detailsLabel),canExpandCompletionItem(e)?(s.right.classList.add("can-expand-details"),(0,oe.$Z)(s.readMore),s.readMore.onmousedown=e=>{e.stopPropagation(),e.preventDefault()},s.readMore.onclick=e=>{e.stopPropagation(),e.preventDefault(),this._onDidToggleDetails.fire()}):(s.right.classList.remove("can-expand-details"),(0,oe.Cp)(s.readMore),s.readMore.onmousedown=null,s.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};function stripNewLines(e){return e.replace(/\r\n|\r|\n/g,"")}Pe=suggestWidgetRenderer_decorate([suggestWidgetRenderer_param(1,Te.q),suggestWidgetRenderer_param(2,Ie.O),suggestWidgetRenderer_param(3,ge.XE)],Pe);var suggestWidget_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},suggestWidget_param=function(e,o){return function(s,l){o(s,l,e)}},suggestWidget_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};(0,he.P6G)("editorSuggestWidget.background",{dark:he.D0T,light:he.D0T,hc:he.D0T},V.N("editorSuggestWidgetBackground","Background color of the suggest widget.")),(0,he.P6G)("editorSuggestWidget.border",{dark:he.D1_,light:he.D1_,hc:he.D1_},V.N("editorSuggestWidgetBorder","Border color of the suggest widget."));const Oe=(0,he.P6G)("editorSuggestWidget.foreground",{dark:he.NOs,light:he.NOs,hc:he.NOs},V.N("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),Fe=((0,he.P6G)("editorSuggestWidget.selectedForeground",{dark:he.NPS,light:he.NPS,hc:he.NPS},V.N("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),(0,he.P6G)("editorSuggestWidget.selectedIconForeground",{dark:he.cbQ,light:he.cbQ,hc:he.cbQ},V.N("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),(0,he.P6G)("editorSuggestWidget.selectedBackground",{dark:he.Vqd,light:he.Vqd,hc:he.Vqd},V.N("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")));(0,he.P6G)("editorSuggestWidget.highlightForeground",{dark:he.Gwp,light:he.Gwp,hc:he.Gwp},V.N("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),(0,he.P6G)("editorSuggestWidget.focusHighlightForeground",{dark:he.PX0,light:he.PX0,hc:he.PX0},V.N("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),(0,he.P6G)("editorSuggestWidgetStatus.foreground",{dark:(0,he.ZnX)(Oe,.5),light:(0,he.ZnX)(Oe,.5),hc:(0,he.ZnX)(Oe,.5)},V.N("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class PersistedWidgetSize{constructor(e,o){this._service=e,this._key=`suggestWidget.size/${o.getEditorType()}/${o instanceof ae.H}`}restore(){var e;const o=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{const e=JSON.parse(o);if(oe.Ro.is(e))return oe.Ro.lift(e)}catch(s){}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let Be=class SuggestWidget{constructor(e,o,s,l,d){this.editor=e,this._storageService=o,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new u._F,this._disposables=new _.SL,this._onDidSelect=new m.Q5,this._onDidFocus=new m.Q5,this._onDidHide=new m.Q5,this._onDidShow=new m.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new m.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new ResizableHTMLElement,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new SuggestContentWidget(this,e),this._persistedSize=new PersistedWidgetSize(o,e);class ResizeState{constructor(e,o,s=!1,l=!1){this.persistedSize=e,this.currentSize=o,this.persistHeight=s,this.persistWidth=l}}let g;this._disposables.add(this.element.onDidWillResize((()=>{this._contentWidget.lockPreference(),g=new ResizeState(this._persistedSize.restore(),this.element.size)}))),this._disposables.add(this.element.onDidResize((e=>{var o,s,l,d;if(this._resize(e.dimension.width,e.dimension.height),g&&(g.persistHeight=g.persistHeight||!!e.north||!!e.south,g.persistWidth=g.persistWidth||!!e.east||!!e.west),e.done){if(g){const{itemHeight:e,defaultSize:u}=this.getLayoutInfo(),p=Math.round(e/2);let{width:m,height:f}=this.element.size;(!g.persistHeight||Math.abs(g.currentSize.height-f)<=p)&&(f=null!==(s=null===(o=g.persistedSize)||void 0===o?void 0:o.height)&&void 0!==s?s:u.height),(!g.persistWidth||Math.abs(g.currentSize.width-m)<=p)&&(m=null!==(d=null===(l=g.persistedSize)||void 0===l?void 0:l.width)&&void 0!==d?d:u.width),this._persistedSize.store(new oe.Ro(m,f))}this._contentWidget.unlockPreference(),g=void 0}}))),this._messageElement=oe.R3(this.element.domNode,oe.$(".message")),this._listElement=oe.R3(this.element.domNode,oe.$(".tree"));const p=d.createInstance(we,this.editor);p.onDidClose(this.toggleDetails,this,this._disposables),this._details=new SuggestDetailsOverlay(p,this.editor);const applyIconStyle=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(106).showIcons);applyIconStyle();const f=d.createInstance(Pe,this.editor);this._disposables.add(f),this._disposables.add(f.onDidToggleDetails((()=>this.toggleDetails()))),this._list=new se.aV("SuggestWidget",this._listElement,{getHeight:e=>this.getLayoutInfo().itemHeight,getTemplateId:e=>"suggestion"},[f],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>V.N("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:e=>{let o=e.textLabel;if("string"!==typeof e.completion.label){const{detail:s,description:l}=e.completion.label;s&&l?o=V.N("label.full","{0}{1}, {2}",o,s,l):s?o=V.N("label.detail","{0}{1}",o,s):l&&(o=V.N("label.desc","{0}, {1}",o,l))}if(!e.isResolved||!this._isDetailsVisible())return o;const{documentation:s,detail:l}=e.completion,d=Q.WU("{0}{1}",l||"",s?"string"===typeof s?s:s.value:"");return V.N("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",o,d)}}}),this._status=d.createInstance(de,this.element.domNode);const applyStatusBarStyle=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(106).showStatusBar);applyStatusBarStyle(),this._disposables.add((0,ue.Jl)(this._list,l,{listInactiveFocusBackground:Fe,listInactiveFocusOutline:he.xL1})),this._disposables.add(l.onDidColorThemeChange((e=>this._onThemeChange(e)))),this._onThemeChange(l.getColorTheme()),this._disposables.add(this._list.onMouseDown((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onTap((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onDidChangeSelection((e=>this._onListSelection(e)))),this._disposables.add(this._list.onDidChangeFocus((e=>this._onListFocus(e)))),this._disposables.add(this.editor.onDidChangeCursorSelection((()=>this._onCursorSelectionChanged()))),this._disposables.add(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(106)&&(applyStatusBarStyle(),applyIconStyle())}))),this._ctxSuggestWidgetVisible=j._y.Visible.bindTo(s),this._ctxSuggestWidgetDetailsVisible=j._y.DetailsVisible.bindTo(s),this._ctxSuggestWidgetMultipleSuggestions=j._y.MultipleSuggestions.bindTo(s),this._disposables.add(oe.mu(this._details.widget.domNode,"keydown",(e=>{this._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((e=>this._onEditorMouseDown(e))))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){0!==this._state&&this._contentWidget.layout()}_onListMouseDownOrTap(e){"undefined"!==typeof e.element&&"undefined"!==typeof e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,o){const s=this._completionModel;s&&(this._onDidSelect.fire({item:e,index:o,model:s}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth="hc"===e.type?2:1}_onListFocus(e){var o;if(this._ignoreFocusEvents)return;if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),void this.editor.setAriaOptions({activeDescendant:void 0});if(!this._completionModel)return;const s=e.elements[0],l=e.indexes[0];s!==this._focusedItem&&(null===(o=this._currentSuggestionDetails)||void 0===o||o.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=s,this._list.reveal(l),this._currentSuggestionDetails=(0,u.PG)((e=>suggestWidget_awaiter(this,void 0,void 0,(function*(){const o=(0,u.Vg)((()=>{this._isDetailsVisible()&&this.showDetails(!0)}),250),l=e.onCancellationRequested((()=>o.dispose())),d=yield s.resolve(e);return o.dispose(),l.dispose(),d})))),this._currentSuggestionDetails.then((()=>{l>=this._list.length||s!==this._list.element(l)||(this._ignoreFocusEvents=!0,this._list.splice(l,1,[s]),this._list.setFocus([l]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:getAriaId(l)}))})).catch(p.dL)),this._onDidFocus.fire({item:s,index:l,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",4===e),this.element.domNode.classList.remove("message"),e){case 0:oe.Cp(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=SuggestWidget.LOADING_MESSAGE,oe.Cp(this._listElement,this._status.element),oe.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=SuggestWidget.NO_SUGGESTIONS_MESSAGE,oe.Cp(this._listElement,this._status.element),oe.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:oe.Cp(this._messageElement),oe.$Z(this._listElement,this._status.element),this._show();break;case 4:oe.Cp(this._messageElement),oe.$Z(this._listElement,this._status.element),this._show();break;case 5:oe.Cp(this._messageElement),oe.$Z(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)}),100)}showTriggered(e,o){0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,u.Vg)((()=>this._setState(1)),o)))}showSuggestions(e,o,s,l){var d,u;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(d=this._loadingTimeout)||void 0===d||d.dispose(),null===(u=this._currentSuggestionDetails)||void 0===u||u.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),s&&2!==this._state&&0!==this._state)return void this._setState(4);const g=this._completionModel.items.length,p=0===g;if(this._ctxSuggestWidgetMultipleSuggestions.set(g>1),p)return this._setState(l?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(s?4:3),this._list.reveal(o,0),this._list.setFocus([o]),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){5===this._state?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!canExpandCompletionItem(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const o=this._persistedSize.restore(),s=Math.ceil(4.3*this.getLayoutInfo().itemHeight);o&&o.height<s&&this._persistedSize.store(o.with(void 0,s))}isFrozen(){return 4===this._state}_afterRender(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}_layout(e){var o,s,l;if(!this.editor.hasModel())return;if(!this.editor.getDomNode())return;const d=oe.D6(document.body),u=this.getLayoutInfo();e||(e=u.defaultSize);let g=e.height,p=e.width;if(this._status.element.style.lineHeight=`${u.itemHeight}px`,2===this._state||1===this._state)g=u.itemHeight+u.borderHeight,p=u.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new oe.Ro(p,g),this._contentWidget.setPreference(2);else{const m=d.width-u.borderHeight-2*u.horizontalPadding;p>m&&(p=m);const f=this._completionModel?this._completionModel.stats.pLabelLen*u.typicalHalfwidthCharacterWidth:p,_=u.statusBarHeight+this._list.contentHeight+u.borderHeight,C=u.itemHeight+u.statusBarHeight,b=oe.i(this.editor.getDomNode()),w=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),S=b.top+w.top+w.height,y=Math.min(d.height-S-u.verticalPadding,_),L=b.top+w.top-u.verticalPadding,x=Math.min(L,_);let k=Math.min(Math.max(x,y)+u.borderHeight,_);g===(null===(o=this._cappedHeight)||void 0===o?void 0:o.capped)&&(g=this._cappedHeight.wanted),g<C&&(g=C),g>k&&(g=k);const N=150;g>y||this._forceRenderingAbove&&L>N?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),k=x):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),k=y),this.element.preferredSize=new oe.Ro(f,u.defaultSize.height),this.element.maxSize=new oe.Ro(m,k),this.element.minSize=new oe.Ro(220,C),this._cappedHeight=g===_?{wanted:null!==(l=null===(s=this._cappedHeight)||void 0===s?void 0:s.wanted)&&void 0!==l?l:e.height,capped:g}:void 0}this._resize(p,g)}_resize(e,o){const{width:s,height:l}=this.element.maxSize;e=Math.min(s,e),o=Math.min(l,o);const{statusBarHeight:d}=this.getLayoutInfo();this._list.layout(o-d,e),this._listElement.style.height=o-d+"px",this.element.layout(o,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,2===(null===(e=this._contentWidget.getPosition())||void 0===e?void 0:e.preference[0]))}getLayoutInfo(){const e=this.editor.getOption(44),o=(0,re.uZ)(this.editor.getOption(108)||e.lineHeight,8,1e3),s=this.editor.getOption(106).showStatusBar&&2!==this._state&&1!==this._state?o:0,l=this._details.widget.borderWidth,d=2*l;return{itemHeight:o,statusBarHeight:s,borderWidth:l,borderHeight:d,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new oe.Ro(430,s+12*o+d)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};Be.LOADING_MESSAGE=V.N("suggestWidget.loading","Loading..."),Be.NO_SUGGESTIONS_MESSAGE=V.N("suggestWidget.noSuggestions","No suggestions."),Be=suggestWidget_decorate([suggestWidget_param(1,P.Uy),suggestWidget_param(2,B.i6),suggestWidget_param(3,ge.XE),suggestWidget_param(4,R.TG)],Be);class SuggestContentWidget{constructor(e,o){this._widget=e,this._editor=o,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){const{height:e,width:o}=this._widget.element.size,{borderWidth:s,horizontalPadding:l}=this._widget.getLayoutInfo();return new oe.Ro(o+2*s+l,e+2*s)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var We=s(9954),suggestController_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},suggestController_param=function(e,o){return function(s,l){o(s,l,e)}};let Ve=!1;class LineSuffix{constructor(e,o){this._model=e,this._position=o;const s=e.getLineMaxColumn(o.lineNumber);if(s!==o.column){const s=e.getOffsetAt(o),l=e.getPositionAt(s+1);this._marker=e.deltaDecorations([],[{range:k.e.fromPositions(o,l),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const o=this._model.getDecorationRange(this._marker[0]),s=this._model.getOffsetAt(o.getStartPosition());return s-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let He=class SuggestController{constructor(e,o,s,l,d,g,p){this._memoryService=o,this._commandService=s,this._contextKeyService=l,this._instantiationService=d,this._logService=g,this._telemetryService=p,this._lineSuffix=new _.XK,this._toDispose=new _.SL,this._selectors=new PriorityRegistry((e=>e.priority)),this._telemetryGate=0,this.editor=e,this.model=d.createInstance(ne,this.editor);const m=j._y.InsertMode.bindTo(l);m.set(e.getOption(106).insertMode),this.model.onDidTrigger((()=>m.set(e.getOption(106).insertMode))),this.widget=this._toDispose.add(new u.Ue((()=>{const e=this._instantiationService.createInstance(Be,this.editor);this._toDispose.add(e),this._toDispose.add(e.onDidSelect((e=>this._insertSuggestion(e,0)),this));const o=new CommitCharacterController(this.editor,e,(e=>this._insertSuggestion(e,2)));this._toDispose.add(o),this._toDispose.add(this.model.onDidSuggest((e=>{0===e.completionModel.items.length&&o.reset()})));const s=j._y.MakesTextEdit.bindTo(this._contextKeyService),l=j._y.HasInsertAndReplaceRange.bindTo(this._contextKeyService),d=j._y.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,_.OF)((()=>{s.reset(),l.reset(),d.reset()}))),this._toDispose.add(e.onDidFocus((({item:e})=>{const o=this.editor.getPosition(),u=e.editStart.column,g=o.column;let p=!0;if("smart"===this.editor.getOption(1)&&2===this.model.state&&!e.completion.additionalTextEdits&&!(4&e.completion.insertTextRules)&&g-u===e.completion.insertText.length){const s=this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:u,endLineNumber:o.lineNumber,endColumn:g});p=s!==e.completion.insertText}s.set(p),l.set(!x.L.equals(e.editInsertEnd,e.editReplaceEnd)),d.set(Boolean(e.provider.resolveCompletionItem)||Boolean(e.completion.documentation)||e.completion.detail!==e.completion.label)}))),this._toDispose.add(e.onDetailsKeyDown((e=>{e.toKeybinding().equals(new f.QC(!0,!1,!1,!1,33))||C.dz&&e.toKeybinding().equals(new f.QC(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeybinding().isModifierKey()||this.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new u.Ue((()=>this._toDispose.add(new OvertypingCapturer(this.editor,this.model))))),this._alternatives=this._toDispose.add(new u.Ue((()=>this._toDispose.add(new G(this.editor,this._contextKeyService))))),this._toDispose.add(d.createInstance(W,e)),this._toDispose.add(this.model.onDidTrigger((e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new LineSuffix(this.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((e=>{if(!e.shy){let o=-1;for(const s of this._selectors.itemsOrderedByPriorityDesc)if(o=s.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items),-1!==o)break;-1===o&&(o=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items)),this.widget.value.showSuggestions(e.completionModel,o,e.isFrozen,e.auto)}}))),this._toDispose.add(this.model.onDidCancel((e=>{e.retrigger||this.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((()=>{Ve||(this.model.cancel(),this.model.clear())})));let b=j._y.AcceptSuggestionsOnEnter.bindTo(l),updateFromConfig=()=>{const e=this.editor.getOption(1);b.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((()=>updateFromConfig()))),updateFromConfig()}static get(e){return e.getContribution(SuggestController.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,o){if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;const s=D.SnippetController2.get(this.editor);if(!s)return;const l=this.editor.getModel(),d=l.getAlternativeVersionId(),{item:u}=e,m=[],f=new g.A;1&o||this.editor.pushUndoStop();const _=this.getOverwriteInfo(u,Boolean(8&o));if(this._memoryService.memorize(l,this.editor.getPosition(),u),Array.isArray(u.completion.additionalTextEdits)){const e=S.Z.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",u.completion.additionalTextEdits.map((e=>L.h.replace(k.e.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!u.isResolved){const e=new b.G(!0);let s;const d=l.onDidChangeContent((e=>{if(e.isFlush)return f.cancel(),void d.dispose();for(let o of e.changes){const e=k.e.getEndPosition(o.range);s&&!x.L.isBefore(e,s)||(s=e)}}));let g=o;o|=2;let p=!1,_=this.editor.onWillType((()=>{_.dispose(),p=!0,2&g||this.editor.pushUndoStop()}));m.push(u.resolve(f.token).then((()=>{if(!u.completion.additionalTextEdits||f.token.isCancellationRequested)return!1;if(s&&u.completion.additionalTextEdits.some((e=>x.L.isBefore(s,k.e.getStartPosition(e.range)))))return!1;p&&this.editor.pushUndoStop();const e=S.Z.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",u.completion.additionalTextEdits.map((e=>L.h.replace(k.e.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor),!p&&2&g||this.editor.pushUndoStop(),!0})).then((o=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",e.elapsed(),o),d.dispose(),_.dispose()})))}let{insertText:C}=u.completion;4&u.completion.insertTextRules||(C=E.Yj.escape(C)),s.insert(C,{overwriteBefore:_.overwriteBefore,overwriteAfter:_.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&u.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&o||this.editor.pushUndoStop(),u.completion.command?u.completion.command.id===TriggerSuggestAction.id?this.model.trigger({auto:!0,shy:!1},!0):(m.push(this._commandService.executeCommand(u.completion.command.id,...u.completion.command.arguments?[...u.completion.command.arguments]:[]).catch(p.dL)),this.model.cancel()):this.model.cancel(),4&o&&this._alternatives.value.set(e,(e=>{f.cancel();while(l.canUndo()){d!==l.getAlternativeVersionId()&&l.undo(),this._insertSuggestion(e,3|(8&o?8:0));break}})),this._alertCompletionItem(u),Promise.all(m).finally((()=>{this._reportSuggestionAcceptedTelemetry(l,e),this.model.clear(),f.dispose()}))}_reportSuggestionAcceptedTelemetry(e,o){var s;if(this._telemetryGate++%100!==0)return;const l=(null!==(s=o.item.provider._debugDisplayName)&&void 0!==s?s:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:l,basenameHash:(0,We.vp)((0,ke.EZ)(e.uri)).toString(16),languageId:e.getLanguageId(),fileExtension:(0,ke.DZ)(e.uri)})}getOverwriteInfo(e,o){(0,w.p_)(this.editor.hasModel());let s="replace"===this.editor.getOption(106).insertMode;o&&(s=!s);const l=e.position.column-e.editStart.column,d=(s?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,u=this.editor.getPosition().column-e.position.column,g=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:l+u,overwriteAfter:d+g}}_alertCompletionItem(e){if((0,d.Of)(e.completion.additionalTextEdits)){let o=V.N("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,l.Z9)(o)}}triggerSuggest(e,o){this.editor.hasModel()&&(this.model.trigger({auto:null!==o&&void 0!==o&&o,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const o=this.editor.getPosition(),fallback=()=>{o.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},makesTextEdit=e=>{if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),s=e.editStart.column,l=o.column;if(l-s!==e.completion.insertText.length)return!0;const d=this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:s,endLineNumber:o.lineNumber,endColumn:l});return d!==e.completion.insertText};m.ju.once(this.model.onDidTrigger)((e=>{let o=[];m.ju.any(this.model.onDidTrigger,this.model.onDidCancel)((()=>{(0,_.B9)(o),fallback()}),void 0,o),this.model.onDidSuggest((({completionModel:e})=>{if((0,_.B9)(o),0===e.items.length)return void fallback();const s=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.items),l=e.items[s];makesTextEdit(l)?(this.editor.pushUndoStop(),this._insertSuggestion({index:s,item:l,model:e},7)):fallback()}),void 0,o)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(o,0),this.editor.focus()}acceptSelectedSuggestion(e,o){const s=this.widget.value.getFocusedItem();let l=0;e&&(l|=4),o&&(l|=8),this._insertSuggestion(s,l)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};He.ID="editor.contrib.suggestController",He=suggestController_decorate([suggestController_param(1,F),suggestController_param(2,z.Hy),suggestController_param(3,B.i6),suggestController_param(4,R.TG),suggestController_param(5,K.VZ),suggestController_param(6,ee.b)],He);class PriorityRegistry{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(-1!==this._items.indexOf(e))throw new Error("Value is already registered");return this._items.push(e),this._items.sort(((e,o)=>this.prioritySelector(o)-this.prioritySelector(e))),{dispose:()=>{const o=this._items.indexOf(e);o>=0&&this._items.splice(o,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class TriggerSuggestAction extends y.R6{constructor(){super({id:TriggerSuggestAction.id,label:V.N("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:B.Ao.and(N.u.writable,N.u.hasCompletionItemProvider),kbOpts:{kbExpr:N.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,o,s){const l=He.get(o);if(!l)return;let d;s&&"object"===typeof s&&!0===s.auto&&(d=!0),l.triggerSuggest(void 0,d)}}TriggerSuggestAction.id="editor.action.triggerSuggest",(0,y._K)(He.ID,He),(0,y.Qr)(TriggerSuggestAction);const ze=190,Ue=y._l.bindToContribution(He.get);(0,y.fK)(new Ue({id:"acceptSelectedSuggestion",precondition:j._y.Visible,handler(e){e.acceptSelectedSuggestion(!0,!1)}})),U.W.registerKeybindingRule({id:"acceptSelectedSuggestion",when:B.Ao.and(j._y.Visible,N.u.textInputFocus),primary:2,weight:ze}),U.W.registerKeybindingRule({id:"acceptSelectedSuggestion",when:B.Ao.and(j._y.Visible,N.u.textInputFocus,j._y.AcceptSuggestionsOnEnter,j._y.MakesTextEdit),primary:3,weight:ze}),H.BH.appendMenuItem(j.GI,{command:{id:"acceptSelectedSuggestion",title:V.N("accept.insert","Insert")},group:"left",order:1,when:j._y.HasInsertAndReplaceRange.toNegated()}),H.BH.appendMenuItem(j.GI,{command:{id:"acceptSelectedSuggestion",title:V.N("accept.insert","Insert")},group:"left",order:1,when:B.Ao.and(j._y.HasInsertAndReplaceRange,j._y.InsertMode.isEqualTo("insert"))}),H.BH.appendMenuItem(j.GI,{command:{id:"acceptSelectedSuggestion",title:V.N("accept.replace","Replace")},group:"left",order:1,when:B.Ao.and(j._y.HasInsertAndReplaceRange,j._y.InsertMode.isEqualTo("replace"))}),(0,y.fK)(new Ue({id:"acceptAlternativeSelectedSuggestion",precondition:B.Ao.and(j._y.Visible,N.u.textInputFocus),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:1027,secondary:[1026]},handler(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:j.GI,group:"left",order:2,when:B.Ao.and(j._y.HasInsertAndReplaceRange,j._y.InsertMode.isEqualTo("insert")),title:V.N("accept.replace","Replace")},{menuId:j.GI,group:"left",order:2,when:B.Ao.and(j._y.HasInsertAndReplaceRange,j._y.InsertMode.isEqualTo("replace")),title:V.N("accept.insert","Insert")}]})),z.P0.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,y.fK)(new Ue({id:"hideSuggestWidget",precondition:j._y.Visible,handler:e=>e.cancelSuggestWidget(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:9,secondary:[1033]}})),(0,y.fK)(new Ue({id:"selectNextSuggestion",precondition:B.Ao.and(j._y.Visible,j._y.MultipleSuggestions),handler:e=>e.selectNextSuggestion(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,y.fK)(new Ue({id:"selectNextPageSuggestion",precondition:B.Ao.and(j._y.Visible,j._y.MultipleSuggestions),handler:e=>e.selectNextPageSuggestion(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:12,secondary:[2060]}})),(0,y.fK)(new Ue({id:"selectLastSuggestion",precondition:B.Ao.and(j._y.Visible,j._y.MultipleSuggestions),handler:e=>e.selectLastSuggestion()})),(0,y.fK)(new Ue({id:"selectPrevSuggestion",precondition:B.Ao.and(j._y.Visible,j._y.MultipleSuggestions),handler:e=>e.selectPrevSuggestion(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,y.fK)(new Ue({id:"selectPrevPageSuggestion",precondition:B.Ao.and(j._y.Visible,j._y.MultipleSuggestions),handler:e=>e.selectPrevPageSuggestion(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:11,secondary:[2059]}})),(0,y.fK)(new Ue({id:"selectFirstSuggestion",precondition:B.Ao.and(j._y.Visible,j._y.MultipleSuggestions),handler:e=>e.selectFirstSuggestion()})),(0,y.fK)(new Ue({id:"toggleSuggestionDetails",precondition:j._y.Visible,handler:e=>e.toggleSuggestionDetails(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:j.GI,group:"right",order:1,when:B.Ao.and(j._y.DetailsVisible,j._y.CanResolve),title:V.N("detail.more","show less")},{menuId:j.GI,group:"right",order:1,when:B.Ao.and(j._y.DetailsVisible.toNegated(),j._y.CanResolve),title:V.N("detail.less","show more")}]})),(0,y.fK)(new Ue({id:"toggleExplainMode",precondition:j._y.Visible,handler:e=>e.toggleExplainMode(),kbOpts:{weight:100,primary:2133}})),(0,y.fK)(new Ue({id:"toggleSuggestionFocus",precondition:j._y.Visible,handler:e=>e.toggleSuggestionFocus(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:2570,mac:{primary:778}}})),(0,y.fK)(new Ue({id:"insertBestCompletion",precondition:B.Ao.and(N.u.textInputFocus,B.Ao.equals("config.editor.tabCompletion","on"),W.AtEnd,j._y.Visible.toNegated(),G.OtherSuggestions.toNegated(),D.SnippetController2.InSnippetMode.toNegated()),handler:(e,o)=>{e.triggerSuggestAndAcceptBest((0,w.Kn)(o)?Object.assign({fallback:"tab"},o):{fallback:"tab"})},kbOpts:{weight:ze,primary:2}})),(0,y.fK)(new Ue({id:"insertNextSuggestion",precondition:B.Ao.and(N.u.textInputFocus,B.Ao.equals("config.editor.tabCompletion","on"),G.OtherSuggestions,j._y.Visible.toNegated(),D.SnippetController2.InSnippetMode.toNegated()),handler:e=>e.acceptNextSuggestion(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:2}})),(0,y.fK)(new Ue({id:"insertPrevSuggestion",precondition:B.Ao.and(N.u.textInputFocus,B.Ao.equals("config.editor.tabCompletion","on"),G.OtherSuggestions,j._y.Visible.toNegated(),D.SnippetController2.InSnippetMode.toNegated()),handler:e=>e.acceptPrevSuggestion(),kbOpts:{weight:ze,kbExpr:N.u.textInputFocus,primary:1026}})),(0,y.Qr)(class extends y.R6{constructor(){super({id:"editor.action.resetSuggestSize",label:V.N("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(e,o){var s;null===(s=He.get(o))||void 0===s||s.resetWidgetSize()}})},1713:function(e,o,s){"use strict";var l=s(3046),d=s(3580),u=s(3910),g=s(7781);const p=(0,u.P6G)("symbolIcon.arrayForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),m=(0,u.P6G)("symbolIcon.booleanForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),f=(0,u.P6G)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,d.N)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_=(0,u.P6G)("symbolIcon.colorForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),C=(0,u.P6G)("symbolIcon.constantForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),b=(0,u.P6G)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,d.N)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),w=(0,u.P6G)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,d.N)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),S=(0,u.P6G)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,d.N)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),y=(0,u.P6G)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,d.N)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),L=(0,u.P6G)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,d.N)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),x=(0,u.P6G)("symbolIcon.fileForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),k=(0,u.P6G)("symbolIcon.folderForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),N=(0,u.P6G)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,d.N)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),D=(0,u.P6G)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,d.N)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),E=(0,u.P6G)("symbolIcon.keyForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),T=(0,u.P6G)("symbolIcon.keywordForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),I=(0,u.P6G)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,d.N)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),A=(0,u.P6G)("symbolIcon.moduleForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),M=(0,u.P6G)("symbolIcon.namespaceForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),R=(0,u.P6G)("symbolIcon.nullForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),P=(0,u.P6G)("symbolIcon.numberForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),O=(0,u.P6G)("symbolIcon.objectForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),F=(0,u.P6G)("symbolIcon.operatorForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),B=(0,u.P6G)("symbolIcon.packageForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),W=(0,u.P6G)("symbolIcon.propertyForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),V=(0,u.P6G)("symbolIcon.referenceForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),H=(0,u.P6G)("symbolIcon.snippetForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),z=(0,u.P6G)("symbolIcon.stringForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),U=(0,u.P6G)("symbolIcon.structForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),K=(0,u.P6G)("symbolIcon.textForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),j=(0,u.P6G)("symbolIcon.typeParameterForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),G=(0,u.P6G)("symbolIcon.unitForeground",{dark:u.dRz,light:u.dRz,hc:u.dRz},(0,d.N)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),q=(0,u.P6G)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,d.N)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));(0,g.Ic)(((e,o)=>{const s=e.getColor(p);s&&o.addRule(`${l.lA.symbolArray.cssSelector} { color: ${s}; }`);const d=e.getColor(m);d&&o.addRule(`${l.lA.symbolBoolean.cssSelector} { color: ${d}; }`);const u=e.getColor(f);u&&o.addRule(`${l.lA.symbolClass.cssSelector} { color: ${u}; }`);const g=e.getColor(I);g&&o.addRule(`${l.lA.symbolMethod.cssSelector} { color: ${g}; }`);const Q=e.getColor(_);Q&&o.addRule(`${l.lA.symbolColor.cssSelector} { color: ${Q}; }`);const Z=e.getColor(C);Z&&o.addRule(`${l.lA.symbolConstant.cssSelector} { color: ${Z}; }`);const Y=e.getColor(b);Y&&o.addRule(`${l.lA.symbolConstructor.cssSelector} { color: ${Y}; }`);const J=e.getColor(w);J&&o.addRule(`\n\t\t\t${l.lA.symbolValue.cssSelector},${l.lA.symbolEnum.cssSelector} { color: ${J}; }`);const X=e.getColor(S);X&&o.addRule(`${l.lA.symbolEnumMember.cssSelector} { color: ${X}; }`);const ee=e.getColor(y);ee&&o.addRule(`${l.lA.symbolEvent.cssSelector} { color: ${ee}; }`);const te=e.getColor(L);te&&o.addRule(`${l.lA.symbolField.cssSelector} { color: ${te}; }`);const ie=e.getColor(x);ie&&o.addRule(`${l.lA.symbolFile.cssSelector} { color: ${ie}; }`);const ne=e.getColor(k);ne&&o.addRule(`${l.lA.symbolFolder.cssSelector} { color: ${ne}; }`);const oe=e.getColor(N);oe&&o.addRule(`${l.lA.symbolFunction.cssSelector} { color: ${oe}; }`);const se=e.getColor(D);se&&o.addRule(`${l.lA.symbolInterface.cssSelector} { color: ${se}; }`);const re=e.getColor(E);re&&o.addRule(`${l.lA.symbolKey.cssSelector} { color: ${re}; }`);const ae=e.getColor(T);ae&&o.addRule(`${l.lA.symbolKeyword.cssSelector} { color: ${ae}; }`);const le=e.getColor(A);le&&o.addRule(`${l.lA.symbolModule.cssSelector} { color: ${le}; }`);const ce=e.getColor(M);ce&&o.addRule(`${l.lA.symbolNamespace.cssSelector} { color: ${ce}; }`);const de=e.getColor(R);de&&o.addRule(`${l.lA.symbolNull.cssSelector} { color: ${de}; }`);const he=e.getColor(P);he&&o.addRule(`${l.lA.symbolNumber.cssSelector} { color: ${he}; }`);const ue=e.getColor(O);ue&&o.addRule(`${l.lA.symbolObject.cssSelector} { color: ${ue}; }`);const ge=e.getColor(F);ge&&o.addRule(`${l.lA.symbolOperator.cssSelector} { color: ${ge}; }`);const pe=e.getColor(B);pe&&o.addRule(`${l.lA.symbolPackage.cssSelector} { color: ${pe}; }`);const me=e.getColor(W);me&&o.addRule(`${l.lA.symbolProperty.cssSelector} { color: ${me}; }`);const fe=e.getColor(V);fe&&o.addRule(`${l.lA.symbolReference.cssSelector} { color: ${fe}; }`);const _e=e.getColor(H);_e&&o.addRule(`${l.lA.symbolSnippet.cssSelector} { color: ${_e}; }`);const Ce=e.getColor(z);Ce&&o.addRule(`${l.lA.symbolString.cssSelector} { color: ${Ce}; }`);const ve=e.getColor(U);ve&&o.addRule(`${l.lA.symbolStruct.cssSelector} { color: ${ve}; }`);const be=e.getColor(K);be&&o.addRule(`${l.lA.symbolText.cssSelector} { color: ${be}; }`);const we=e.getColor(j);we&&o.addRule(`${l.lA.symbolTypeParameter.cssSelector} { color: ${we}; }`);const Se=e.getColor(G);Se&&o.addRule(`${l.lA.symbolUnit.cssSelector} { color: ${Se}; }`);const ye=e.getColor(q);ye&&o.addRule(`${l.lA.symbolVariable.cssSelector} { color: ${ye}; }`)}))},4662:function(e,o,s){"use strict";s.r(o),s.d(o,{ToggleTabFocusModeAction:function(){return ToggleTabFocusModeAction}});var l=s(5152),d=s(7940),u=s(6830),g=s(3580);class ToggleTabFocusModeAction extends u.R6{constructor(){super({id:ToggleTabFocusModeAction.ID,label:g.N({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,o){const s=d.n.getTabFocusMode(),u=!s;d.n.setTabFocusMode(u),u?(0,l.Z9)(g.N("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,l.Z9)(g.N("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}ToggleTabFocusModeAction.ID="editor.action.toggleTabFocusMode",(0,u.Qr)(ToggleTabFocusModeAction)},2614:function(e,o,s){"use strict";s.r(o);var l=s(4013),d=s(6830),u=s(3580);class ForceRetokenizeAction extends d.R6{constructor(){super({id:"editor.action.forceRetokenize",label:u.N("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,o){if(!o.hasModel())return;const s=o.getModel();s.resetTokenization();const d=new l.G(!0);s.forceTokenization(s.getLineCount()),d.stop(),console.log(`tokenization took ${d.elapsed()}`)}}(0,d.Qr)(ForceRetokenizeAction)},5180:function(e,o,s){"use strict";s.r(o),s.d(o,{DisableHighlightingInCommentsAction:function(){return DisableHighlightingInCommentsAction},DisableHighlightingInStringsAction:function(){return DisableHighlightingInStringsAction},DisableHighlightingOfAmbiguousCharactersAction:function(){return DisableHighlightingOfAmbiguousCharactersAction},DisableHighlightingOfInvisibleCharactersAction:function(){return DisableHighlightingOfInvisibleCharactersAction},DisableHighlightingOfNonBasicAsciiCharactersAction:function(){return DisableHighlightingOfNonBasicAsciiCharactersAction},ShowExcludeOptions:function(){return ShowExcludeOptions},UnicodeHighlighter:function(){return q},UnicodeHighlighterHoverParticipant:function(){return Z},warningIcon:function(){return G}});var l=s(5393),d=s(3046),u=s(5976),g=s(1432),p=s(2677),m=s(6830),f=s(4141),_=s(2822),C=s(1446),b=s(4319),w=s(2042),S=s(168),y=s(6520),L=s(2374),x=s(5321),k=s(317),N=s(4741),D=s(5831),E=s(2065),T=s(4850),I=s(9069),A=s(553),M=s(4669),R=s(988),P=s(3910),O=s(7781),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let F=class Link extends u.JT{constructor(e,o,s={},l){var d;super(),this._link=o,this._enabled=!0,this.el=(0,x.R3)(e,(0,x.$)("a.monaco-link",{tabIndex:null!==(d=o.tabIndex)&&void 0!==d?d:0,href:o.href,title:o.title},o.label)),this.el.setAttribute("role","button");const u=this._register(new T.Y(this.el,"click")),g=this._register(new T.Y(this.el,"keypress")),p=M.ju.chain(g.event).map((e=>new I.y(e))).filter((e=>3===e.keyCode)).event,m=this._register(new T.Y(this.el,A.t.Tap)).event;this._register(A.o.addTarget(this.el));const f=M.ju.any(u.event,p,m);this._register(f((e=>{this.enabled&&(x.zB.stop(e,!0),(null===s||void 0===s?void 0:s.opener)?s.opener(this._link.href):l.open(this._link.href,{allowCommands:!0}))}))),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}};F=__decorate([__param(3,R.v4)],F),(0,O.Ic)(((e,o)=>{const s=e.getColor(P.url);s&&o.addRule(`.monaco-link { color: ${s}; }`);const l=e.getColor(P.sgC);l&&o.addRule(`.monaco-link:hover { color: ${l}; }`)}));var B=s(9554),bannerController_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},bannerController_param=function(e,o){return function(s,l){o(s,l,e)}};const W=26;let V=class BannerController extends u.JT{constructor(e,o){super(),this._editor=e,this.instantiationService=o,this.banner=this._register(this.instantiationService.createInstance(H))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{this.hide(),e.onClose&&e.onClose()}})),this._editor.setBanner(this.banner.element,W)}};V=bannerController_decorate([bannerController_param(1,E.TG)],V);let H=class Banner extends u.JT{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(D.$,{}),this.element=(0,x.$)("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){return e.ariaLabel?e.ariaLabel:"string"===typeof e.message?e.message:void 0}getBannerMessage(e){if("string"===typeof e){const o=(0,x.$)("span");return o.innerText=e,o}return this.markdownRenderer.render(e).element}clear(){(0,x.PO)(this.element)}show(e){(0,x.PO)(this.element);const o=this.getAriaLabel(e);o&&this.element.setAttribute("aria-label",o);const s=(0,x.R3)(this.element,(0,x.$)("div.icon-container"));s.setAttribute("aria-hidden","true"),e.icon&&s.appendChild((0,x.$)(`div${O.kS.asCSSSelector(e.icon)}`));const l=(0,x.R3)(this.element,(0,x.$)("div.message-container"));if(l.setAttribute("aria-hidden","true"),l.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=(0,x.R3)(this.element,(0,x.$)("div.message-actions-container")),e.actions)for(const u of e.actions)this._register(this.instantiationService.createInstance(F,this.messageActionsContainer,Object.assign(Object.assign({},u),{tabIndex:-1}),{}));const d=(0,x.R3)(this.element,(0,x.$)("div.action-container"));this.actionBar=this._register(new k.o(d)),this.actionBar.push(this._register(new N.aU("banner.close","Close Banner",O.kS.asClassName(B.s_),!0,(()=>{"function"===typeof e.onClose&&e.onClose()}))),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};H=bannerController_decorate([bannerController_param(0,E.TG)],H);var z=s(3580),U=s(3108),K=s(1157),j=s(3425),unicodeHighlighter_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},unicodeHighlighter_param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const G=(0,B.q5)("extensions-warning-message",d.lA.warning,z.N("warningIcon","Icon shown with a warning message in the extensions editor."));let q=class UnicodeHighlighter extends u.JT{constructor(e,o,s,l){super(),this._editor=e,this._editorWorkerService=o,this._workspaceTrustService=s,this._highlighter=null,this._bannerClosed=!1,this._updateState=e=>{if(e&&e.hasMore){if(this._bannerClosed)return;const o=Math.max(e.ambiguousCharacterCount,e.nonBasicAsciiCharacterCount,e.invisibleCharacterCount);let s;if(e.nonBasicAsciiCharacterCount>=o)s={message:z.N("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new DisableHighlightingOfNonBasicAsciiCharactersAction};else if(e.ambiguousCharacterCount>=o)s={message:z.N("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new DisableHighlightingOfAmbiguousCharactersAction};else{if(!(e.invisibleCharacterCount>=o))throw new Error("Unreachable");s={message:z.N("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new DisableHighlightingOfInvisibleCharactersAction}}this._bannerController.show({id:"unicodeHighlightBanner",message:s.message,icon:G,actions:[{label:s.command.shortLabel,href:`command:${s.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(l.createInstance(V,e)),this._register(this._editor.onDidChangeModel((()=>{this._bannerClosed=!1,this._updateHighlighter()}))),this._options=e.getOption(113),this._register(s.onDidChangeTrust((e=>{this._updateHighlighter()}))),this._register(e.onDidChangeConfiguration((o=>{o.hasChanged(113)&&(this._options=e.getOption(113),this._updateHighlighter())}))),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every((e=>!1===e)))return;const o={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map((e=>e.codePointAt(0))),allowedLocales:Object.keys(e.allowedLocales).map((e=>{if("_os"===e){let e=(new Intl.NumberFormat).resolvedOptions().locale;return e}return"_vscode"===e?g.dK:e}))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new Q(this._editor,o,this._updateState,this._editorWorkerService):this._highlighter=new ViewportUnicodeHighlighter(this._editor,o,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};function resolveOptions(e,o){return{nonBasicASCII:o.nonBasicASCII===f.Av?!e:o.nonBasicASCII,ambiguousCharacters:o.ambiguousCharacters,invisibleCharacters:o.invisibleCharacters,includeComments:o.includeComments===f.Av?!e:o.includeComments,includeStrings:o.includeStrings===f.Av?!e:o.includeStrings,allowedCharacters:o.allowedCharacters,allowedLocales:o.allowedLocales}}q.ID="editor.contrib.unicodeHighlighter",q=unicodeHighlighter_decorate([unicodeHighlighter_param(1,b.p),unicodeHighlighter_param(2,j.Y),unicodeHighlighter_param(3,E.TG)],q);let Q=class DocumentUnicodeHighlighter extends u.JT{constructor(e,o,s,d){super(),this._editor=e,this._options=o,this._updateState=s,this._editorWorkerService=d,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new l.pY((()=>this._update()),250)),this._register(this._editor.onDidChangeModelContent((()=>{this._updateSoon.schedule()}))),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII())return void(this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[])));const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then((o=>{if(this._model.isDisposed())return;if(this._model.getVersionId()!==e)return;this._updateState(o);const s=[];if(!o.hasMore)for(const e of o.ranges)s.push({range:e,options:Decorations.instance.getDecorationFromOptions(this._options)});this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),s))}))}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const o=this._editor.getModel(),s=o.getDecorationRange(e),l={range:s,options:Decorations.instance.getDecorationFromOptions(this._options),id:e,ownerId:0};if(!(0,S.Fd)(o,l))return null;const d=o.getValueInRange(s);return{reason:computeReason(d,this._options),inComment:(0,S.$t)(o,l),inString:(0,S.zg)(o,l)}}};Q=unicodeHighlighter_decorate([unicodeHighlighter_param(3,b.p)],Q);class ViewportUnicodeHighlighter extends u.JT{constructor(e,o,s){super(),this._editor=e,this._options=o,this._updateState=s,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new l.pY((()=>this._update()),250)),this._register(this._editor.onDidLayoutChange((()=>{this._updateSoon.schedule()}))),this._register(this._editor.onDidScrollChange((()=>{this._updateSoon.schedule()}))),this._register(this._editor.onDidChangeHiddenAreas((()=>{this._updateSoon.schedule()}))),this._register(this._editor.onDidChangeModelContent((()=>{this._updateSoon.schedule()}))),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII())return void(this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[])));const e=this._editor.getVisibleRanges(),o=[],s={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const l of e){const e=C.a.computeUnicodeHighlights(this._model,this._options,l);for(const o of e.ranges)s.ranges.push(o);s.ambiguousCharacterCount+=s.ambiguousCharacterCount,s.invisibleCharacterCount+=s.invisibleCharacterCount,s.nonBasicAsciiCharacterCount+=s.nonBasicAsciiCharacterCount,s.hasMore=s.hasMore||e.hasMore}if(!s.hasMore)for(const l of s.ranges)o.push({range:l,options:Decorations.instance.getDecorationFromOptions(this._options)});this._updateState(s),this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),o))}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const o=this._editor.getModel(),s=o.getDecorationRange(e),l=o.getValueInRange(s),d={range:s,options:Decorations.instance.getDecorationFromOptions(this._options),id:e,ownerId:0};return(0,S.Fd)(o,d)?{reason:computeReason(l,this._options),inComment:(0,S.$t)(o,d),inString:(0,S.zg)(o,d)}:null}}let Z=class UnicodeHighlighterHoverParticipant{constructor(e,o,s){this._editor=e,this._languageService=o,this._openerService=s,this.hoverOrdinal=4}computeSync(e,o){if(!this._editor.hasModel()||1!==e.type)return[];const s=this._editor.getModel(),l=this._editor.getContribution(q.ID);if(!l)return[];const d=[];let u=300;for(const g of o){const e=l.getDecorationInfo(g.id);if(!e)continue;const o=s.getValueInRange(g.range),p=o.codePointAt(0),m=formatCodePointMarkdown(p);let f;switch(e.reason.kind){case 0:f=z.N("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",m,formatCodePointMarkdown(e.reason.confusableWith.codePointAt(0)));break;case 1:f=z.N("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",m);break;case 2:f=z.N("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",m);break}const _={codePoint:p,reason:e.reason,inComment:e.inComment,inString:e.inString},C=z.N("unicodeHighlight.adjustSettings","Adjust settings"),b=[{value:`${f} [${C}](command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(_))})`,isTrusted:!0}];d.push(new L.hU(this,g.range,b,u++))}return d}renderHoverParts(e,o){return(0,L.c)(e,o,this._editor,this._languageService,this._openerService)}};function codePointToHex(e){return`U+${e.toString(16).padStart(4,"0")}`}function formatCodePointMarkdown(e){let o=`\`${codePointToHex(e)}\``;return p.vU.isInvisibleCharacter(e)||(o+=` "${renderCodePointAsInlineCode(e)}"`),o}function renderCodePointAsInlineCode(e){return 96===e?"`` ` ``":"`"+String.fromCodePoint(e)+"`"}function computeReason(e,o){return C.a.computeUnicodeHighlightReason(e,o)}Z=unicodeHighlighter_decorate([unicodeHighlighter_param(1,w.O),unicodeHighlighter_param(2,R.v4)],Z);class Decorations{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,o){const s=`${e}${o}`;let l=this.map.get(s);return l||(l=_.qx.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:o}),this.map.set(s,l)),l}}Decorations.instance=new Decorations;class DisableHighlightingInCommentsAction extends m.R6{constructor(){super({id:DisableHighlightingOfAmbiguousCharactersAction.ID,label:z.N("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=z.N("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,o,s){return __awaiter(this,void 0,void 0,(function*(){let o=null===e||void 0===e?void 0:e.get(U.Ui);o&&this.runAction(o)}))}runAction(e){return __awaiter(this,void 0,void 0,(function*(){yield e.updateValue(f.qt.includeComments,!1,1)}))}}class DisableHighlightingInStringsAction extends m.R6{constructor(){super({id:DisableHighlightingOfAmbiguousCharactersAction.ID,label:z.N("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=z.N("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,o,s){return __awaiter(this,void 0,void 0,(function*(){let o=null===e||void 0===e?void 0:e.get(U.Ui);o&&this.runAction(o)}))}runAction(e){return __awaiter(this,void 0,void 0,(function*(){yield e.updateValue(f.qt.includeStrings,!1,1)}))}}class DisableHighlightingOfAmbiguousCharactersAction extends m.R6{constructor(){super({id:DisableHighlightingOfAmbiguousCharactersAction.ID,label:z.N("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=z.N("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,o,s){return __awaiter(this,void 0,void 0,(function*(){let o=null===e||void 0===e?void 0:e.get(U.Ui);o&&this.runAction(o)}))}runAction(e){return __awaiter(this,void 0,void 0,(function*(){yield e.updateValue(f.qt.ambiguousCharacters,!1,1)}))}}DisableHighlightingOfAmbiguousCharactersAction.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class DisableHighlightingOfInvisibleCharactersAction extends m.R6{constructor(){super({id:DisableHighlightingOfInvisibleCharactersAction.ID,label:z.N("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=z.N("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,o,s){return __awaiter(this,void 0,void 0,(function*(){let o=null===e||void 0===e?void 0:e.get(U.Ui);o&&this.runAction(o)}))}runAction(e){return __awaiter(this,void 0,void 0,(function*(){yield e.updateValue(f.qt.invisibleCharacters,!1,1)}))}}DisableHighlightingOfInvisibleCharactersAction.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class DisableHighlightingOfNonBasicAsciiCharactersAction extends m.R6{constructor(){super({id:DisableHighlightingOfNonBasicAsciiCharactersAction.ID,label:z.N("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=z.N("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,o,s){return __awaiter(this,void 0,void 0,(function*(){let o=null===e||void 0===e?void 0:e.get(U.Ui);o&&this.runAction(o)}))}runAction(e){return __awaiter(this,void 0,void 0,(function*(){yield e.updateValue(f.qt.nonBasicASCII,!1,1)}))}}DisableHighlightingOfNonBasicAsciiCharactersAction.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class ShowExcludeOptions extends m.R6{constructor(){super({id:ShowExcludeOptions.ID,label:z.N("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,o,s){return __awaiter(this,void 0,void 0,(function*(){const{codePoint:o,reason:l,inString:d,inComment:u}=s,g=String.fromCodePoint(o),m=e.get(K.eJ),f=e.get(U.Ui);function getExcludeCharFromBeingHighlightedLabel(e){return p.vU.isInvisibleCharacter(e)?z.N("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",codePointToHex(e)):z.N("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${codePointToHex(e)} "${g}"`)}const _=[];if(0===l.kind)for(const e of l.notAmbiguousInLocales)_.push({label:z.N("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',e),run:()=>__awaiter(this,void 0,void 0,(function*(){excludeLocaleFromBeingHighlighted(f,[e])}))});if(_.push({label:getExcludeCharFromBeingHighlightedLabel(o),run:()=>excludeCharFromBeingHighlighted(f,[o])}),u){const e=new DisableHighlightingInCommentsAction;_.push({label:e.label,run:()=>__awaiter(this,void 0,void 0,(function*(){return e.runAction(f)}))})}else if(d){const e=new DisableHighlightingInStringsAction;_.push({label:e.label,run:()=>__awaiter(this,void 0,void 0,(function*(){return e.runAction(f)}))})}if(0===l.kind){const e=new DisableHighlightingOfAmbiguousCharactersAction;_.push({label:e.label,run:()=>__awaiter(this,void 0,void 0,(function*(){return e.runAction(f)}))})}else if(1===l.kind){const e=new DisableHighlightingOfInvisibleCharactersAction;_.push({label:e.label,run:()=>__awaiter(this,void 0,void 0,(function*(){return e.runAction(f)}))})}else if(2===l.kind){const e=new DisableHighlightingOfNonBasicAsciiCharactersAction;_.push({label:e.label,run:()=>__awaiter(this,void 0,void 0,(function*(){return e.runAction(f)}))})}else expectNever(l);const C=yield m.pick(_,{title:z.N("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});C&&(yield C.run())}))}}function excludeCharFromBeingHighlighted(e,o){return __awaiter(this,void 0,void 0,(function*(){const s=e.getValue(f.qt.allowedCharacters);let l;l="object"===typeof s&&s?s:{};for(const e of o)l[String.fromCodePoint(e)]=!0;yield e.updateValue(f.qt.allowedCharacters,l,1)}))}function excludeLocaleFromBeingHighlighted(e,o){var s;return __awaiter(this,void 0,void 0,(function*(){const l=null===(s=e.inspect(f.qt.allowedLocales).user)||void 0===s?void 0:s.value;let d;d="object"===typeof l&&l?Object.assign({},l):{};for(const e of o)d[e]=!0;yield e.updateValue(f.qt.allowedLocales,d,1)}))}function expectNever(e){throw new Error(`Unexpected value: ${e}`)}ShowExcludeOptions.ID="editor.action.unicodeHighlight.showExcludeOptions",(0,m.Qr)(DisableHighlightingOfAmbiguousCharactersAction),(0,m.Qr)(DisableHighlightingOfInvisibleCharactersAction),(0,m.Qr)(DisableHighlightingOfNonBasicAsciiCharactersAction),(0,m.Qr)(ShowExcludeOptions),(0,m._K)(q.ID,q),y.Ae.register(Z)},9607:function(e,o,s){"use strict";s.r(o),s.d(o,{UnusualLineTerminatorsDetector:function(){return _}});var l=s(5976),d=s(5935),u=s(6830),g=s(1640),p=s(3580),m=s(8820),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const f="ignoreUnusualLineTerminators";function writeIgnoreState(e,o,s){e.setModelProperty(o.uri,f,s)}function readIgnoreState(e,o){return e.getModelProperty(o.uri,f)}let _=class UnusualLineTerminatorsDetector extends l.JT{constructor(e,o,s){super(),this._editor=e,this._dialogService=o,this._codeEditorService=s,this._config=this._editor.getOption(114),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(114)&&(this._config=this._editor.getOption(114),this._checkForUnusualLineTerminators())}))),this._register(this._editor.onDidChangeModel((()=>{this._checkForUnusualLineTerminators()}))),this._register(this._editor.onDidChangeModelContent((e=>{e.isUndoing||this._checkForUnusualLineTerminators()})))}_checkForUnusualLineTerminators(){return __awaiter(this,void 0,void 0,(function*(){if("off"===this._config)return;if(!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators())return;const o=readIgnoreState(this._codeEditorService,e);if(!0===o)return;if(this._editor.getOption(81))return;if("auto"===this._config)return void e.removeUnusualLineTerminators(this._editor.getSelections());const s=yield this._dialogService.confirm({title:p.N("unusualLineTerminators.title","Unusual Line Terminators"),message:p.N("unusualLineTerminators.message","Detected unusual line terminators"),detail:p.N("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,d.EZ)(e.uri)),primaryButton:p.N("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:p.N("unusualLineTerminators.ignore","Ignore")});s.confirmed?e.removeUnusualLineTerminators(this._editor.getSelections()):writeIgnoreState(this._codeEditorService,e,!0)}))}};_.ID="editor.contrib.unusualLineTerminatorsDetector",_=__decorate([__param(1,m.S),__param(2,g.$)],_),(0,u._K)(_.ID,_)},1271:function(e,o,s){"use strict";s.r(o);var l=s(5393),d=s(5976),u=s(6830),g=s(2670),p=s(3733),m=s(1200),f=s(8997),_=s(3108),C=s(7781),b=s(8191),w=s(4013),S=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let y=class ViewportSemanticTokensContribution extends d.JT{constructor(e,o,s,d,u,g){super(),this._modelService=o,this._themeService=s,this._configurationService=d,this._editor=e,this._provider=g.documentRangeSemanticTokensProvider,this._debounceInformation=u.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new l.pY((()=>this._tokenizeViewportNow()),100)),this._outstandingRequests=[];const scheduleTokenizeViewport=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange((()=>{scheduleTokenizeViewport()}))),this._register(this._editor.onDidChangeModel((()=>{this._cancelAll(),scheduleTokenizeViewport()}))),this._register(this._editor.onDidChangeModelContent((e=>{this._cancelAll(),scheduleTokenizeViewport()}))),this._register(this._provider.onDidChange((()=>{this._cancelAll(),scheduleTokenizeViewport()}))),this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(m.e3)&&(this._cancelAll(),scheduleTokenizeViewport())}))),this._register(this._themeService.onDidColorThemeChange((()=>{this._cancelAll(),scheduleTokenizeViewport()})))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let o=0,s=this._outstandingRequests.length;o<s;o++)if(this._outstandingRequests[o]===e)return void this._outstandingRequests.splice(o,1)}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!(0,m.tw)(e,this._themeService,this._configurationService))return void(e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1));if(!(0,g.KO)(this._provider,e))return void(e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1));const o=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(o.map((o=>this._requestRange(e,o))))}_requestRange(e,o){const s=e.getVersionId(),d=(0,l.PG)((s=>Promise.resolve((0,g.OG)(this._provider,e,o,s)))),u=new w.G(!1);return d.then((l=>{if(this._debounceInformation.update(e,u.elapsed()),!l||!l.tokens||e.isDisposed()||e.getVersionId()!==s)return;const{provider:d,tokens:g}=l,p=this._modelService.getSemanticTokensProviderStyling(d);e.setPartialSemanticTokens(o,(0,f.h)(g,p,e.getLanguageId()))})).then((()=>this._removeOutstandingRequest(d)),(()=>this._removeOutstandingRequest(d))),d}};y.ID="editor.contrib.viewportSemanticTokens",y=__decorate([__param(1,p.q),__param(2,C.XE),__param(3,_.Ui),__param(4,b.A),__param(5,S.p)],y),(0,u._K)(y.ID,y)},943:function(e,o,s){"use strict";s.r(o),s.d(o,{getOccurrencesAtPosition:function(){return getOccurrencesAtPosition}});var l=s(5152),d=s(9488),u=s(5393),g=s(1050),p=s(7301),m=s(5976),f=s(6830),_=s(4314),C=s(9102),b=s(4973),w=s(2822),S=s(3155),y=s(3580),L=s(8819),x=s(3910),k=s(7781),N=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const D=(0,x.P6G)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},y.N("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),E=(0,x.P6G)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},y.N("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),T=(0,x.P6G)("editor.wordHighlightBorder",{light:null,dark:null,hc:x.xL1},y.N("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),I=(0,x.P6G)("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:x.xL1},y.N("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),A=(0,x.P6G)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},y.N("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),M=(0,x.P6G)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},y.N("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),R=new L.uy("hasWordHighlights",!1);function getOccurrencesAtPosition(e,o,s,l){const g=e.ordered(o);return(0,u.Ps)(g.map((e=>()=>Promise.resolve(e.provideDocumentHighlights(o,s,l)).then(void 0,p.Cp))),d.Of)}class OccurenceAtPositionRequest{constructor(e,o,s){this._model=e,this._selection=o,this._wordSeparators=s,this._wordRange=this._getCurrentWordRange(e,o),this._result=null}get result(){return this._result||(this._result=(0,u.PG)((e=>this._compute(this._model,this._selection,this._wordSeparators,e)))),this._result}_getCurrentWordRange(e,o){const s=e.getWordAtPosition(o.getPosition());return s?new _.e(o.startLineNumber,s.startColumn,o.startLineNumber,s.endColumn):null}isValid(e,o,s){const l=o.startLineNumber,d=o.startColumn,u=o.endColumn,g=this._getCurrentWordRange(e,o);let p=Boolean(this._wordRange&&this._wordRange.equalsRange(g));for(let m=0,f=s.length;!p&&m<f;m++){let o=e.getDecorationRange(s[m]);o&&o.startLineNumber===l&&o.startColumn<=d&&o.endColumn>=u&&(p=!0)}return p}cancel(){this.result.cancel()}}class SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest{constructor(e,o,s,l){super(e,o,s),this._providers=l}_compute(e,o,s,l){return getOccurrencesAtPosition(this._providers,e,o.getPosition(),l).then((e=>e||[]))}}class TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest{constructor(e,o,s){super(e,o,s),this._selectionIsEmpty=o.isEmpty()}_compute(e,o,s,l){return(0,u.Vs)(250,l).then((()=>{if(!o.isEmpty())return[];const l=e.getWordAtPosition(o.getPosition());if(!l||l.word.length>1e3)return[];const d=e.findMatches(l.word,!0,!1,!0,s,!1);return d.map((e=>({range:e.range,kind:S.MY.Text})))}))}isValid(e,o,s){const l=o.isEmpty();return this._selectionIsEmpty===l&&super.isValid(e,o,s)}}function computeOccurencesAtPosition(e,o,s,l){return e.has(o)?new SemanticOccurenceAtPositionRequest(o,s,l,e):new TextualOccurenceAtPositionRequest(o,s,l)}(0,f.sb)("_executeDocumentHighlights",((e,o,s)=>{const l=e.get(N.p);return getOccurrencesAtPosition(l.documentHighlightProvider,o,s,g.T.None)}));class WordHighlighter{constructor(e,o,s){this.toUnhook=new m.SL,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=o,this._hasWordHighlights=R.bindTo(s),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(72),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition((e=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(e)}))),this.toUnhook.add(e.onDidChangeModelContent((e=>{this._stopAll()}))),this.toUnhook.add(e.onDidChangeConfiguration((e=>{let o=this.editor.getOption(72);this.occurrencesHighlight!==o&&(this.occurrencesHighlight=o,this._stopAll())}))),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return d.kX(this._decorationIds.map((e=>this.model.getDecorationRange(e))).sort(_.e.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),o=e.findIndex((e=>e.containsPosition(this.editor.getPosition()))),s=(o+1)%e.length,d=e[s];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(d.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(d);const o=this._getWord();if(o){const u=this.editor.getModel().getLineContent(d.startLineNumber);(0,l.Z9)(`${u}, ${s+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),o=e.findIndex((e=>e.containsPosition(this.editor.getPosition()))),s=(o-1+e.length)%e.length,d=e[s];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(d.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(d);const o=this._getWord();if(o){const u=this.editor.getModel().getLineContent(d.startLineNumber);(0,l.Z9)(`${u}, ${s+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){this.occurrencesHighlight&&3===e.reason?this._run():this._stopAll()}_getWord(){let e=this.editor.getSelection(),o=e.startLineNumber,s=e.startColumn;return this.model.getWordAtPosition({lineNumber:o,column:s})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber)return void this._stopAll();let o=e.startColumn,s=e.endColumn;const l=this._getWord();if(!l||l.startColumn>o||l.endColumn<s)return void this._stopAll();const d=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=(new Date).getTime(),d)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let e=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=computeOccurencesAtPosition(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(117)),this.workerRequest.result.then((o=>{e===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=o||[],this._beginRenderDecorations())}),p.dL)}}_beginRenderDecorations(){let e=(new Date).getTime(),o=this.lastCursorPositionChangeTime+250;e>=o?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout((()=>{this.renderDecorations()}),o-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const o of this.workerRequestValue)o.range&&e.push({range:o.range,options:WordHighlighter._getDecorationOptions(o.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===S.MY.Write?this._WRITE_OPTIONS:e===S.MY.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}WordHighlighter._WRITE_OPTIONS=w.qx.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:(0,k.EN)(M),position:b.sh.Center},minimap:{color:(0,k.EN)(x.IYc),position:b.F5.Inline}}),WordHighlighter._TEXT_OPTIONS=w.qx.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,k.EN)(x.SPM),position:b.sh.Center},minimap:{color:(0,k.EN)(x.IYc),position:b.F5.Inline}}),WordHighlighter._REGULAR_OPTIONS=w.qx.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:(0,k.EN)(A),position:b.sh.Center},minimap:{color:(0,k.EN)(x.IYc),position:b.F5.Inline}});let P=class WordHighlighterContribution extends m.JT{constructor(e,o,s){super(),this.wordHighlighter=null;const createWordHighlighterIfPossible=()=>{e.hasModel()&&(this.wordHighlighter=new WordHighlighter(e,s.documentHighlightProvider,o))};this._register(e.onDidChangeModel((e=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),createWordHighlighterIfPossible()}))),createWordHighlighterIfPossible()}static get(e){return e.getContribution(WordHighlighterContribution.ID)}saveViewState(){return!(!this.wordHighlighter||!this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};P.ID="editor.contrib.wordHighlighter",P=__decorate([__param(1,L.i6),__param(2,N.p)],P);class WordHighlightNavigationAction extends f.R6{constructor(e,o){super(o),this._isNext=e}run(e,o){const s=P.get(o);s&&(this._isNext?s.moveNext():s.moveBack())}}class NextWordHighlightAction extends WordHighlightNavigationAction{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:y.N("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:R,kbOpts:{kbExpr:C.u.editorTextFocus,primary:65,weight:100}})}}class PrevWordHighlightAction extends WordHighlightNavigationAction{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:y.N("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:R,kbOpts:{kbExpr:C.u.editorTextFocus,primary:1089,weight:100}})}}class TriggerWordHighlightAction extends f.R6{constructor(){super({id:"editor.action.wordHighlight.trigger",label:y.N("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:R.toNegated(),kbOpts:{kbExpr:C.u.editorTextFocus,primary:0,weight:100}})}run(e,o,s){const l=P.get(o);l&&l.restoreViewState(!0)}}(0,f._K)(P.ID,P),(0,f.Qr)(NextWordHighlightAction),(0,f.Qr)(PrevWordHighlightAction),(0,f.Qr)(TriggerWordHighlightAction),(0,k.Ic)(((e,o)=>{const s=e.getColor(x.Rzx);s&&(o.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${s}; }`),o.addRule(`.monaco-editor .selectionHighlight { background-color: ${s.transparent(.5)}; }`));const l=e.getColor(D);l&&o.addRule(`.monaco-editor .wordHighlight { background-color: ${l}; }`);const d=e.getColor(E);d&&o.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${d}; }`);const u=e.getColor(x.g_n);u&&o.addRule(`.monaco-editor .selectionHighlight { border: 1px ${"hc"===e.type?"dotted":"solid"} ${u}; box-sizing: border-box; }`);const g=e.getColor(T);g&&o.addRule(`.monaco-editor .wordHighlight { border: 1px ${"hc"===e.type?"dashed":"solid"} ${g}; box-sizing: border-box; }`);const p=e.getColor(I);p&&o.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${"hc"===e.type?"dashed":"solid"} ${p}; box-sizing: border-box; }`)}))},7181:function(e,o,s){"use strict";s.r(o),s.d(o,{CursorWordAccessibilityLeft:function(){return CursorWordAccessibilityLeft},CursorWordAccessibilityLeftSelect:function(){return CursorWordAccessibilityLeftSelect},CursorWordAccessibilityRight:function(){return CursorWordAccessibilityRight},CursorWordAccessibilityRightSelect:function(){return CursorWordAccessibilityRightSelect},CursorWordEndLeft:function(){return CursorWordEndLeft},CursorWordEndLeftSelect:function(){return CursorWordEndLeftSelect},CursorWordEndRight:function(){return CursorWordEndRight},CursorWordEndRightSelect:function(){return CursorWordEndRightSelect},CursorWordLeft:function(){return CursorWordLeft},CursorWordLeftSelect:function(){return CursorWordLeftSelect},CursorWordRight:function(){return CursorWordRight},CursorWordRightSelect:function(){return CursorWordRightSelect},CursorWordStartLeft:function(){return CursorWordStartLeft},CursorWordStartLeftSelect:function(){return CursorWordStartLeftSelect},CursorWordStartRight:function(){return CursorWordStartRight},CursorWordStartRightSelect:function(){return CursorWordStartRightSelect},DeleteInsideWord:function(){return DeleteInsideWord},DeleteWordCommand:function(){return DeleteWordCommand},DeleteWordEndLeft:function(){return DeleteWordEndLeft},DeleteWordEndRight:function(){return DeleteWordEndRight},DeleteWordLeft:function(){return DeleteWordLeft},DeleteWordLeftCommand:function(){return DeleteWordLeftCommand},DeleteWordRight:function(){return DeleteWordRight},DeleteWordRightCommand:function(){return DeleteWordRightCommand},DeleteWordStartLeft:function(){return DeleteWordStartLeft},DeleteWordStartRight:function(){return DeleteWordStartRight},MoveWordCommand:function(){return MoveWordCommand},WordLeftCommand:function(){return WordLeftCommand},WordRightCommand:function(){return WordRightCommand}});var l=s(6830),d=s(1329),u=s(4141),g=s(5343),p=s(2896),m=s(4929),f=s(187),_=s(4314),C=s(3860),b=s(9102),w=s(5638),S=s(3580),y=s(1106),L=s(8819),x=s(9282);class MoveWordCommand extends l._l{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,o,s){if(!o.hasModel())return;const l=(0,m.u)(o.getOption(117)),d=o.getModel(),u=o.getSelections(),p=u.map((e=>{const o=new f.L(e.positionLineNumber,e.positionColumn),s=this._move(l,d,o,this._wordNavigationType);return this._moveTo(e,s,this._inSelectionMode)}));if(d.pushStackElement(),o._getViewModel().setCursorStates("moveWordCommand",3,p.map((e=>g.Vi.fromModelSelection(e)))),1===p.length){const e=new f.L(p[0].positionLineNumber,p[0].positionColumn);o.revealPosition(e,0)}}_moveTo(e,o,s){return s?new C.Y(e.selectionStartLineNumber,e.selectionStartColumn,o.lineNumber,o.column):new C.Y(o.lineNumber,o.column,o.lineNumber,o.column)}}class WordLeftCommand extends MoveWordCommand{_move(e,o,s,l){return p.w.moveWordLeft(e,o,s,l)}}class WordRightCommand extends MoveWordCommand{_move(e,o,s,l){return p.w.moveWordRight(e,o,s,l)}}class CursorWordStartLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class CursorWordEndLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class CursorWordLeft extends WordLeftCommand{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:L.Ao.and(b.u.textInputFocus,null===(e=L.Ao.and(y.U,x.cv))||void 0===e?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class CursorWordStartLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class CursorWordEndLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class CursorWordLeftSelect extends WordLeftCommand{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:L.Ao.and(b.u.textInputFocus,null===(e=L.Ao.and(y.U,x.cv))||void 0===e?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class CursorWordAccessibilityLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,o,s,l){return super._move((0,m.u)(u.BH.wordSeparators.defaultValue),o,s,l)}}class CursorWordAccessibilityLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,o,s,l){return super._move((0,m.u)(u.BH.wordSeparators.defaultValue),o,s,l)}}class CursorWordStartRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class CursorWordEndRight extends WordRightCommand{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:L.Ao.and(b.u.textInputFocus,null===(e=L.Ao.and(y.U,x.cv))||void 0===e?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class CursorWordRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class CursorWordStartRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class CursorWordEndRightSelect extends WordRightCommand{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:L.Ao.and(b.u.textInputFocus,null===(e=L.Ao.and(y.U,x.cv))||void 0===e?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class CursorWordRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class CursorWordAccessibilityRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,o,s,l){return super._move((0,m.u)(u.BH.wordSeparators.defaultValue),o,s,l)}}class CursorWordAccessibilityRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,o,s,l){return super._move((0,m.u)(u.BH.wordSeparators.defaultValue),o,s,l)}}class DeleteWordCommand extends l._l{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,o,s){const l=e.get(w.c_);if(!o.hasModel())return;const u=(0,m.u)(o.getOption(117)),g=o.getModel(),p=o.getSelections(),f=o.getOption(5),_=o.getOption(8),C=l.getLanguageConfiguration(g.getLanguageId()).getAutoClosingPairs(),b=o._getViewModel(),S=p.map((e=>{const s=this._delete({wordSeparators:u,model:g,selection:e,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:o.getOption(6),autoClosingBrackets:f,autoClosingQuotes:_,autoClosingPairs:C,autoClosedCharacters:b.getCursorAutoClosedCharacters()},this._wordNavigationType);return new d.T4(s,"")}));o.pushUndoStop(),o.executeCommands(this.id,S),o.pushUndoStop()}}class DeleteWordLeftCommand extends DeleteWordCommand{_delete(e,o){let s=p.w.deleteWordLeft(e,o);return s||new _.e(1,1,1,1)}}class DeleteWordRightCommand extends DeleteWordCommand{_delete(e,o){let s=p.w.deleteWordRight(e,o);if(s)return s;const l=e.model.getLineCount(),d=e.model.getLineMaxColumn(l);return new _.e(l,d,l,d)}}class DeleteWordStartLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:b.u.writable})}}class DeleteWordEndLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:b.u.writable})}}class DeleteWordLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:b.u.writable,kbOpts:{kbExpr:b.u.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class DeleteWordStartRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:b.u.writable})}}class DeleteWordEndRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:b.u.writable})}}class DeleteWordRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:b.u.writable,kbOpts:{kbExpr:b.u.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class DeleteInsideWord extends l.R6{constructor(){super({id:"deleteInsideWord",precondition:b.u.writable,label:S.N("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,o,s){if(!o.hasModel())return;const l=(0,m.u)(o.getOption(117)),u=o.getModel(),g=o.getSelections(),f=g.map((e=>{const o=p.w.deleteInsideWord(l,u,e);return new d.T4(o,"")}));o.pushUndoStop(),o.executeCommands(this.id,f),o.pushUndoStop()}}(0,l.fK)(new CursorWordStartLeft),(0,l.fK)(new CursorWordEndLeft),(0,l.fK)(new CursorWordLeft),(0,l.fK)(new CursorWordStartLeftSelect),(0,l.fK)(new CursorWordEndLeftSelect),(0,l.fK)(new CursorWordLeftSelect),(0,l.fK)(new CursorWordStartRight),(0,l.fK)(new CursorWordEndRight),(0,l.fK)(new CursorWordRight),(0,l.fK)(new CursorWordStartRightSelect),(0,l.fK)(new CursorWordEndRightSelect),(0,l.fK)(new CursorWordRightSelect),(0,l.fK)(new CursorWordAccessibilityLeft),(0,l.fK)(new CursorWordAccessibilityLeftSelect),(0,l.fK)(new CursorWordAccessibilityRight),(0,l.fK)(new CursorWordAccessibilityRightSelect),(0,l.fK)(new DeleteWordStartLeft),(0,l.fK)(new DeleteWordEndLeft),(0,l.fK)(new DeleteWordLeft),(0,l.fK)(new DeleteWordStartRight),(0,l.fK)(new DeleteWordEndRight),(0,l.fK)(new DeleteWordRight),(0,l.Qr)(DeleteInsideWord)},6709:function(e,o,s){"use strict";s.r(o),s.d(o,{CursorWordPartLeft:function(){return CursorWordPartLeft},CursorWordPartLeftSelect:function(){return CursorWordPartLeftSelect},CursorWordPartRight:function(){return CursorWordPartRight},CursorWordPartRightSelect:function(){return CursorWordPartRightSelect},DeleteWordPartLeft:function(){return DeleteWordPartLeft},DeleteWordPartRight:function(){return DeleteWordPartRight},WordPartLeftCommand:function(){return WordPartLeftCommand},WordPartRightCommand:function(){return WordPartRightCommand}});var l=s(6830),d=s(2896),u=s(4314),g=s(9102),p=s(7181),m=s(4565);class DeleteWordPartLeft extends p.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,o){let s=d.L.deleteWordPartLeft(e);return s||new u.e(1,1,1,1)}}class DeleteWordPartRight extends p.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,o){let s=d.L.deleteWordPartRight(e);if(s)return s;const l=e.model.getLineCount(),g=e.model.getLineMaxColumn(l);return new u.e(l,g,l,g)}}class WordPartLeftCommand extends p.MoveWordCommand{_move(e,o,s,l){return d.L.moveWordPartLeft(e,o,s)}}class CursorWordPartLeft extends WordPartLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}m.P0.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class CursorWordPartLeftSelect extends WordPartLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}m.P0.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class WordPartRightCommand extends p.MoveWordCommand{_move(e,o,s,l){return d.L.moveWordPartRight(e,o,s)}}class CursorWordPartRight extends WordPartRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class CursorWordPartRightSelect extends WordPartRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}(0,l.fK)(new DeleteWordPartLeft),(0,l.fK)(new DeleteWordPartRight),(0,l.fK)(new CursorWordPartLeft),(0,l.fK)(new CursorWordPartLeftSelect),(0,l.fK)(new CursorWordPartRight),(0,l.fK)(new CursorWordPartRightSelect)},2363:function(e,o,s){"use strict";s.r(o),s.d(o,{CancellationTokenSource:function(){return Co},Emitter:function(){return vo},KeyCode:function(){return bo},KeyMod:function(){return wo},MarkerSeverity:function(){return ko},MarkerTag:function(){return No},Position:function(){return So},Range:function(){return yo},Selection:function(){return Lo},SelectionDirection:function(){return xo},Token:function(){return Eo},Uri:function(){return Do},editor:function(){return To},languages:function(){return Io}});var l,d,u,g,p,m,f,_,C,b,w,S,y,L,x,k,N,D,E,T,I,A,M,R,P,O,F,B,W,V,H,z,U,K,j,G,q,Q=s(4141),Z=s(1050),Y=s(4669),J=s(2258),X=s(666),ee=s(187),te=s(4314),ie=s(3860),ne=s(3155);(function(e){e[e["Unknown"]=0]="Unknown",e[e["Disabled"]=1]="Disabled",e[e["Enabled"]=2]="Enabled"})(l||(l={})),function(e){e[e["KeepWhitespace"]=1]="KeepWhitespace",e[e["InsertAsSnippet"]=4]="InsertAsSnippet"}(d||(d={})),function(e){e[e["Method"]=0]="Method",e[e["Function"]=1]="Function",e[e["Constructor"]=2]="Constructor",e[e["Field"]=3]="Field",e[e["Variable"]=4]="Variable",e[e["Class"]=5]="Class",e[e["Struct"]=6]="Struct",e[e["Interface"]=7]="Interface",e[e["Module"]=8]="Module",e[e["Property"]=9]="Property",e[e["Event"]=10]="Event",e[e["Operator"]=11]="Operator",e[e["Unit"]=12]="Unit",e[e["Value"]=13]="Value",e[e["Constant"]=14]="Constant",e[e["Enum"]=15]="Enum",e[e["EnumMember"]=16]="EnumMember",e[e["Keyword"]=17]="Keyword",e[e["Text"]=18]="Text",e[e["Color"]=19]="Color",e[e["File"]=20]="File",e[e["Reference"]=21]="Reference",e[e["Customcolor"]=22]="Customcolor",e[e["Folder"]=23]="Folder",e[e["TypeParameter"]=24]="TypeParameter",e[e["User"]=25]="User",e[e["Issue"]=26]="Issue",e[e["Snippet"]=27]="Snippet"}(u||(u={})),function(e){e[e["Deprecated"]=1]="Deprecated"}(g||(g={})),function(e){e[e["Invoke"]=0]="Invoke",e[e["TriggerCharacter"]=1]="TriggerCharacter",e[e["TriggerForIncompleteCompletions"]=2]="TriggerForIncompleteCompletions"}(p||(p={})),function(e){e[e["EXACT"]=0]="EXACT",e[e["ABOVE"]=1]="ABOVE",e[e["BELOW"]=2]="BELOW"}(m||(m={})),function(e){e[e["NotSet"]=0]="NotSet",e[e["ContentFlush"]=1]="ContentFlush",e[e["RecoverFromMarkers"]=2]="RecoverFromMarkers",e[e["Explicit"]=3]="Explicit",e[e["Paste"]=4]="Paste",e[e["Undo"]=5]="Undo",e[e["Redo"]=6]="Redo"}(f||(f={})),function(e){e[e["LF"]=1]="LF",e[e["CRLF"]=2]="CRLF"}(_||(_={})),function(e){e[e["Text"]=0]="Text",e[e["Read"]=1]="Read",e[e["Write"]=2]="Write"}(C||(C={})),function(e){e[e["None"]=0]="None",e[e["Keep"]=1]="Keep",e[e["Brackets"]=2]="Brackets",e[e["Advanced"]=3]="Advanced",e[e["Full"]=4]="Full"}(b||(b={})),function(e){e[e["acceptSuggestionOnCommitCharacter"]=0]="acceptSuggestionOnCommitCharacter",e[e["acceptSuggestionOnEnter"]=1]="acceptSuggestionOnEnter",e[e["accessibilitySupport"]=2]="accessibilitySupport",e[e["accessibilityPageSize"]=3]="accessibilityPageSize",e[e["ariaLabel"]=4]="ariaLabel",e[e["autoClosingBrackets"]=5]="autoClosingBrackets",e[e["autoClosingDelete"]=6]="autoClosingDelete",e[e["autoClosingOvertype"]=7]="autoClosingOvertype",e[e["autoClosingQuotes"]=8]="autoClosingQuotes",e[e["autoIndent"]=9]="autoIndent",e[e["automaticLayout"]=10]="automaticLayout",e[e["autoSurround"]=11]="autoSurround",e[e["bracketPairColorization"]=12]="bracketPairColorization",e[e["guides"]=13]="guides",e[e["codeLens"]=14]="codeLens",e[e["codeLensFontFamily"]=15]="codeLensFontFamily",e[e["codeLensFontSize"]=16]="codeLensFontSize",e[e["colorDecorators"]=17]="colorDecorators",e[e["columnSelection"]=18]="columnSelection",e[e["comments"]=19]="comments",e[e["contextmenu"]=20]="contextmenu",e[e["copyWithSyntaxHighlighting"]=21]="copyWithSyntaxHighlighting",e[e["cursorBlinking"]=22]="cursorBlinking",e[e["cursorSmoothCaretAnimation"]=23]="cursorSmoothCaretAnimation",e[e["cursorStyle"]=24]="cursorStyle",e[e["cursorSurroundingLines"]=25]="cursorSurroundingLines",e[e["cursorSurroundingLinesStyle"]=26]="cursorSurroundingLinesStyle",e[e["cursorWidth"]=27]="cursorWidth",e[e["disableLayerHinting"]=28]="disableLayerHinting",e[e["disableMonospaceOptimizations"]=29]="disableMonospaceOptimizations",e[e["domReadOnly"]=30]="domReadOnly",e[e["dragAndDrop"]=31]="dragAndDrop",e[e["emptySelectionClipboard"]=32]="emptySelectionClipboard",e[e["extraEditorClassName"]=33]="extraEditorClassName",e[e["fastScrollSensitivity"]=34]="fastScrollSensitivity",e[e["find"]=35]="find",e[e["fixedOverflowWidgets"]=36]="fixedOverflowWidgets",e[e["folding"]=37]="folding",e[e["foldingStrategy"]=38]="foldingStrategy",e[e["foldingHighlight"]=39]="foldingHighlight",e[e["foldingImportsByDefault"]=40]="foldingImportsByDefault",e[e["foldingMaximumRegions"]=41]="foldingMaximumRegions",e[e["unfoldOnClickAfterEndOfLine"]=42]="unfoldOnClickAfterEndOfLine",e[e["fontFamily"]=43]="fontFamily",e[e["fontInfo"]=44]="fontInfo",e[e["fontLigatures"]=45]="fontLigatures",e[e["fontSize"]=46]="fontSize",e[e["fontWeight"]=47]="fontWeight",e[e["formatOnPaste"]=48]="formatOnPaste",e[e["formatOnType"]=49]="formatOnType",e[e["glyphMargin"]=50]="glyphMargin",e[e["gotoLocation"]=51]="gotoLocation",e[e["hideCursorInOverviewRuler"]=52]="hideCursorInOverviewRuler",e[e["hover"]=53]="hover",e[e["inDiffEditor"]=54]="inDiffEditor",e[e["inlineSuggest"]=55]="inlineSuggest",e[e["letterSpacing"]=56]="letterSpacing",e[e["lightbulb"]=57]="lightbulb",e[e["lineDecorationsWidth"]=58]="lineDecorationsWidth",e[e["lineHeight"]=59]="lineHeight",e[e["lineNumbers"]=60]="lineNumbers",e[e["lineNumbersMinChars"]=61]="lineNumbersMinChars",e[e["linkedEditing"]=62]="linkedEditing",e[e["links"]=63]="links",e[e["matchBrackets"]=64]="matchBrackets",e[e["minimap"]=65]="minimap",e[e["mouseStyle"]=66]="mouseStyle",e[e["mouseWheelScrollSensitivity"]=67]="mouseWheelScrollSensitivity",e[e["mouseWheelZoom"]=68]="mouseWheelZoom",e[e["multiCursorMergeOverlapping"]=69]="multiCursorMergeOverlapping",e[e["multiCursorModifier"]=70]="multiCursorModifier",e[e["multiCursorPaste"]=71]="multiCursorPaste",e[e["occurrencesHighlight"]=72]="occurrencesHighlight",e[e["overviewRulerBorder"]=73]="overviewRulerBorder",e[e["overviewRulerLanes"]=74]="overviewRulerLanes",e[e["padding"]=75]="padding",e[e["parameterHints"]=76]="parameterHints",e[e["peekWidgetDefaultFocus"]=77]="peekWidgetDefaultFocus",e[e["definitionLinkOpensInPeek"]=78]="definitionLinkOpensInPeek",e[e["quickSuggestions"]=79]="quickSuggestions",e[e["quickSuggestionsDelay"]=80]="quickSuggestionsDelay",e[e["readOnly"]=81]="readOnly",e[e["renameOnType"]=82]="renameOnType",e[e["renderControlCharacters"]=83]="renderControlCharacters",e[e["renderFinalNewline"]=84]="renderFinalNewline",e[e["renderLineHighlight"]=85]="renderLineHighlight",e[e["renderLineHighlightOnlyWhenFocus"]=86]="renderLineHighlightOnlyWhenFocus",e[e["renderValidationDecorations"]=87]="renderValidationDecorations",e[e["renderWhitespace"]=88]="renderWhitespace",e[e["revealHorizontalRightPadding"]=89]="revealHorizontalRightPadding",e[e["roundedSelection"]=90]="roundedSelection",e[e["rulers"]=91]="rulers",e[e["scrollbar"]=92]="scrollbar",e[e["scrollBeyondLastColumn"]=93]="scrollBeyondLastColumn",e[e["scrollBeyondLastLine"]=94]="scrollBeyondLastLine",e[e["scrollPredominantAxis"]=95]="scrollPredominantAxis",e[e["selectionClipboard"]=96]="selectionClipboard",e[e["selectionHighlight"]=97]="selectionHighlight",e[e["selectOnLineNumbers"]=98]="selectOnLineNumbers",e[e["showFoldingControls"]=99]="showFoldingControls",e[e["showUnused"]=100]="showUnused",e[e["snippetSuggestions"]=101]="snippetSuggestions",e[e["smartSelect"]=102]="smartSelect",e[e["smoothScrolling"]=103]="smoothScrolling",e[e["stickyTabStops"]=104]="stickyTabStops",e[e["stopRenderingLineAfter"]=105]="stopRenderingLineAfter",e[e["suggest"]=106]="suggest",e[e["suggestFontSize"]=107]="suggestFontSize",e[e["suggestLineHeight"]=108]="suggestLineHeight",e[e["suggestOnTriggerCharacters"]=109]="suggestOnTriggerCharacters",e[e["suggestSelection"]=110]="suggestSelection",e[e["tabCompletion"]=111]="tabCompletion",e[e["tabIndex"]=112]="tabIndex",e[e["unicodeHighlighting"]=113]="unicodeHighlighting",e[e["unusualLineTerminators"]=114]="unusualLineTerminators",e[e["useShadowDOM"]=115]="useShadowDOM",e[e["useTabStops"]=116]="useTabStops",e[e["wordSeparators"]=117]="wordSeparators",e[e["wordWrap"]=118]="wordWrap",e[e["wordWrapBreakAfterCharacters"]=119]="wordWrapBreakAfterCharacters",e[e["wordWrapBreakBeforeCharacters"]=120]="wordWrapBreakBeforeCharacters",e[e["wordWrapColumn"]=121]="wordWrapColumn",e[e["wordWrapOverride1"]=122]="wordWrapOverride1",e[e["wordWrapOverride2"]=123]="wordWrapOverride2",e[e["wrappingIndent"]=124]="wrappingIndent",e[e["wrappingStrategy"]=125]="wrappingStrategy",e[e["showDeprecated"]=126]="showDeprecated",e[e["inlayHints"]=127]="inlayHints",e[e["editorClassName"]=128]="editorClassName",e[e["pixelRatio"]=129]="pixelRatio",e[e["tabFocusMode"]=130]="tabFocusMode",e[e["layoutInfo"]=131]="layoutInfo",e[e["wrappingInfo"]=132]="wrappingInfo"}(w||(w={})),function(e){e[e["TextDefined"]=0]="TextDefined",e[e["LF"]=1]="LF",e[e["CRLF"]=2]="CRLF"}(S||(S={})),function(e){e[e["LF"]=0]="LF",e[e["CRLF"]=1]="CRLF"}(y||(y={})),function(e){e[e["None"]=0]="None",e[e["Indent"]=1]="Indent",e[e["IndentOutdent"]=2]="IndentOutdent",e[e["Outdent"]=3]="Outdent"}(L||(L={})),function(e){e[e["Both"]=0]="Both",e[e["Right"]=1]="Right",e[e["Left"]=2]="Left",e[e["None"]=3]="None"}(x||(x={})),function(e){e[e["Type"]=1]="Type",e[e["Parameter"]=2]="Parameter"}(k||(k={})),function(e){e[e["Automatic"]=0]="Automatic",e[e["Explicit"]=1]="Explicit"}(N||(N={})),function(e){e[e["DependsOnKbLayout"]=-1]="DependsOnKbLayout",e[e["Unknown"]=0]="Unknown",e[e["Backspace"]=1]="Backspace",e[e["Tab"]=2]="Tab",e[e["Enter"]=3]="Enter",e[e["Shift"]=4]="Shift",e[e["Ctrl"]=5]="Ctrl",e[e["Alt"]=6]="Alt",e[e["PauseBreak"]=7]="PauseBreak",e[e["CapsLock"]=8]="CapsLock",e[e["Escape"]=9]="Escape",e[e["Space"]=10]="Space",e[e["PageUp"]=11]="PageUp",e[e["PageDown"]=12]="PageDown",e[e["End"]=13]="End",e[e["Home"]=14]="Home",e[e["LeftArrow"]=15]="LeftArrow",e[e["UpArrow"]=16]="UpArrow",e[e["RightArrow"]=17]="RightArrow",e[e["DownArrow"]=18]="DownArrow",e[e["Insert"]=19]="Insert",e[e["Delete"]=20]="Delete",e[e["Digit0"]=21]="Digit0",e[e["Digit1"]=22]="Digit1",e[e["Digit2"]=23]="Digit2",e[e["Digit3"]=24]="Digit3",e[e["Digit4"]=25]="Digit4",e[e["Digit5"]=26]="Digit5",e[e["Digit6"]=27]="Digit6",e[e["Digit7"]=28]="Digit7",e[e["Digit8"]=29]="Digit8",e[e["Digit9"]=30]="Digit9",e[e["KeyA"]=31]="KeyA",e[e["KeyB"]=32]="KeyB",e[e["KeyC"]=33]="KeyC",e[e["KeyD"]=34]="KeyD",e[e["KeyE"]=35]="KeyE",e[e["KeyF"]=36]="KeyF",e[e["KeyG"]=37]="KeyG",e[e["KeyH"]=38]="KeyH",e[e["KeyI"]=39]="KeyI",e[e["KeyJ"]=40]="KeyJ",e[e["KeyK"]=41]="KeyK",e[e["KeyL"]=42]="KeyL",e[e["KeyM"]=43]="KeyM",e[e["KeyN"]=44]="KeyN",e[e["KeyO"]=45]="KeyO",e[e["KeyP"]=46]="KeyP",e[e["KeyQ"]=47]="KeyQ",e[e["KeyR"]=48]="KeyR",e[e["KeyS"]=49]="KeyS",e[e["KeyT"]=50]="KeyT",e[e["KeyU"]=51]="KeyU",e[e["KeyV"]=52]="KeyV",e[e["KeyW"]=53]="KeyW",e[e["KeyX"]=54]="KeyX",e[e["KeyY"]=55]="KeyY",e[e["KeyZ"]=56]="KeyZ",e[e["Meta"]=57]="Meta",e[e["ContextMenu"]=58]="ContextMenu",e[e["F1"]=59]="F1",e[e["F2"]=60]="F2",e[e["F3"]=61]="F3",e[e["F4"]=62]="F4",e[e["F5"]=63]="F5",e[e["F6"]=64]="F6",e[e["F7"]=65]="F7",e[e["F8"]=66]="F8",e[e["F9"]=67]="F9",e[e["F10"]=68]="F10",e[e["F11"]=69]="F11",e[e["F12"]=70]="F12",e[e["F13"]=71]="F13",e[e["F14"]=72]="F14",e[e["F15"]=73]="F15",e[e["F16"]=74]="F16",e[e["F17"]=75]="F17",e[e["F18"]=76]="F18",e[e["F19"]=77]="F19",e[e["NumLock"]=78]="NumLock",e[e["ScrollLock"]=79]="ScrollLock",e[e["Semicolon"]=80]="Semicolon",e[e["Equal"]=81]="Equal",e[e["Comma"]=82]="Comma",e[e["Minus"]=83]="Minus",e[e["Period"]=84]="Period",e[e["Slash"]=85]="Slash",e[e["Backquote"]=86]="Backquote",e[e["BracketLeft"]=87]="BracketLeft",e[e["Backslash"]=88]="Backslash",e[e["BracketRight"]=89]="BracketRight",e[e["Quote"]=90]="Quote",e[e["OEM_8"]=91]="OEM_8",e[e["IntlBackslash"]=92]="IntlBackslash",e[e["Numpad0"]=93]="Numpad0",e[e["Numpad1"]=94]="Numpad1",e[e["Numpad2"]=95]="Numpad2",e[e["Numpad3"]=96]="Numpad3",e[e["Numpad4"]=97]="Numpad4",e[e["Numpad5"]=98]="Numpad5",e[e["Numpad6"]=99]="Numpad6",e[e["Numpad7"]=100]="Numpad7",e[e["Numpad8"]=101]="Numpad8",e[e["Numpad9"]=102]="Numpad9",e[e["NumpadMultiply"]=103]="NumpadMultiply",e[e["NumpadAdd"]=104]="NumpadAdd",e[e["NUMPAD_SEPARATOR"]=105]="NUMPAD_SEPARATOR",e[e["NumpadSubtract"]=106]="NumpadSubtract",e[e["NumpadDecimal"]=107]="NumpadDecimal",e[e["NumpadDivide"]=108]="NumpadDivide",e[e["KEY_IN_COMPOSITION"]=109]="KEY_IN_COMPOSITION",e[e["ABNT_C1"]=110]="ABNT_C1",e[e["ABNT_C2"]=111]="ABNT_C2",e[e["AudioVolumeMute"]=112]="AudioVolumeMute",e[e["AudioVolumeUp"]=113]="AudioVolumeUp",e[e["AudioVolumeDown"]=114]="AudioVolumeDown",e[e["BrowserSearch"]=115]="BrowserSearch",e[e["BrowserHome"]=116]="BrowserHome",e[e["BrowserBack"]=117]="BrowserBack",e[e["BrowserForward"]=118]="BrowserForward",e[e["MediaTrackNext"]=119]="MediaTrackNext",e[e["MediaTrackPrevious"]=120]="MediaTrackPrevious",e[e["MediaStop"]=121]="MediaStop",e[e["MediaPlayPause"]=122]="MediaPlayPause",e[e["LaunchMediaPlayer"]=123]="LaunchMediaPlayer",e[e["LaunchMail"]=124]="LaunchMail",e[e["LaunchApp2"]=125]="LaunchApp2",e[e["Clear"]=126]="Clear",e[e["MAX_VALUE"]=127]="MAX_VALUE"}(D||(D={})),function(e){e[e["Hint"]=1]="Hint",e[e["Info"]=2]="Info",e[e["Warning"]=4]="Warning",e[e["Error"]=8]="Error"}(E||(E={})),function(e){e[e["Unnecessary"]=1]="Unnecessary",e[e["Deprecated"]=2]="Deprecated"}(T||(T={})),function(e){e[e["Inline"]=1]="Inline",e[e["Gutter"]=2]="Gutter"}(I||(I={})),function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["TEXTAREA"]=1]="TEXTAREA",e[e["GUTTER_GLYPH_MARGIN"]=2]="GUTTER_GLYPH_MARGIN",e[e["GUTTER_LINE_NUMBERS"]=3]="GUTTER_LINE_NUMBERS",e[e["GUTTER_LINE_DECORATIONS"]=4]="GUTTER_LINE_DECORATIONS",e[e["GUTTER_VIEW_ZONE"]=5]="GUTTER_VIEW_ZONE",e[e["CONTENT_TEXT"]=6]="CONTENT_TEXT",e[e["CONTENT_EMPTY"]=7]="CONTENT_EMPTY",e[e["CONTENT_VIEW_ZONE"]=8]="CONTENT_VIEW_ZONE",e[e["CONTENT_WIDGET"]=9]="CONTENT_WIDGET",e[e["OVERVIEW_RULER"]=10]="OVERVIEW_RULER",e[e["SCROLLBAR"]=11]="SCROLLBAR",e[e["OVERLAY_WIDGET"]=12]="OVERLAY_WIDGET",e[e["OUTSIDE_EDITOR"]=13]="OUTSIDE_EDITOR"}(A||(A={})),function(e){e[e["TOP_RIGHT_CORNER"]=0]="TOP_RIGHT_CORNER",e[e["BOTTOM_RIGHT_CORNER"]=1]="BOTTOM_RIGHT_CORNER",e[e["TOP_CENTER"]=2]="TOP_CENTER"}(M||(M={})),function(e){e[e["Left"]=1]="Left",e[e["Center"]=2]="Center",e[e["Right"]=4]="Right",e[e["Full"]=7]="Full"}(R||(R={})),function(e){e[e["Left"]=0]="Left",e[e["Right"]=1]="Right",e[e["None"]=2]="None"}(P||(P={})),function(e){e[e["Off"]=0]="Off",e[e["On"]=1]="On",e[e["Relative"]=2]="Relative",e[e["Interval"]=3]="Interval",e[e["Custom"]=4]="Custom"}(O||(O={})),function(e){e[e["None"]=0]="None",e[e["Text"]=1]="Text",e[e["Blocks"]=2]="Blocks"}(F||(F={})),function(e){e[e["Smooth"]=0]="Smooth",e[e["Immediate"]=1]="Immediate"}(B||(B={})),function(e){e[e["Auto"]=1]="Auto",e[e["Hidden"]=2]="Hidden",e[e["Visible"]=3]="Visible"}(W||(W={})),function(e){e[e["LTR"]=0]="LTR",e[e["RTL"]=1]="RTL"}(V||(V={})),function(e){e[e["Invoke"]=1]="Invoke",e[e["TriggerCharacter"]=2]="TriggerCharacter",e[e["ContentChange"]=3]="ContentChange"}(H||(H={})),function(e){e[e["File"]=0]="File",e[e["Module"]=1]="Module",e[e["Namespace"]=2]="Namespace",e[e["Package"]=3]="Package",e[e["Class"]=4]="Class",e[e["Method"]=5]="Method",e[e["Property"]=6]="Property",e[e["Field"]=7]="Field",e[e["Constructor"]=8]="Constructor",e[e["Enum"]=9]="Enum",e[e["Interface"]=10]="Interface",e[e["Function"]=11]="Function",e[e["Variable"]=12]="Variable",e[e["Constant"]=13]="Constant",e[e["String"]=14]="String",e[e["Number"]=15]="Number",e[e["Boolean"]=16]="Boolean",e[e["Array"]=17]="Array",e[e["Object"]=18]="Object",e[e["Key"]=19]="Key",e[e["Null"]=20]="Null",e[e["EnumMember"]=21]="EnumMember",e[e["Struct"]=22]="Struct",e[e["Event"]=23]="Event",e[e["Operator"]=24]="Operator",e[e["TypeParameter"]=25]="TypeParameter"}(z||(z={})),function(e){e[e["Deprecated"]=1]="Deprecated"}(U||(U={})),function(e){e[e["Hidden"]=0]="Hidden",e[e["Blink"]=1]="Blink",e[e["Smooth"]=2]="Smooth",e[e["Phase"]=3]="Phase",e[e["Expand"]=4]="Expand",e[e["Solid"]=5]="Solid"}(K||(K={})),function(e){e[e["Line"]=1]="Line",e[e["Block"]=2]="Block",e[e["Underline"]=3]="Underline",e[e["LineThin"]=4]="LineThin",e[e["BlockOutline"]=5]="BlockOutline",e[e["UnderlineThin"]=6]="UnderlineThin"}(j||(j={})),function(e){e[e["AlwaysGrowsWhenTypingAtEdges"]=0]="AlwaysGrowsWhenTypingAtEdges",e[e["NeverGrowsWhenTypingAtEdges"]=1]="NeverGrowsWhenTypingAtEdges",e[e["GrowsOnlyWhenTypingBefore"]=2]="GrowsOnlyWhenTypingBefore",e[e["GrowsOnlyWhenTypingAfter"]=3]="GrowsOnlyWhenTypingAfter"}(G||(G={})),function(e){e[e["None"]=0]="None",e[e["Same"]=1]="Same",e[e["Indent"]=2]="Indent",e[e["DeepIndent"]=3]="DeepIndent"}(q||(q={}));class KeyMod{static chord(e,o){return(0,J.gx)(e,o)}}function createMonacoBaseAPI(){return{editor:void 0,languages:void 0,CancellationTokenSource:Z.A,Emitter:Y.Q5,KeyCode:D,KeyMod:KeyMod,Position:ee.L,Range:te.e,Selection:ie.Y,SelectionDirection:V,MarkerSeverity:E,MarkerTag:T,Uri:X.o,Token:ne.WU}}KeyMod.CtrlCmd=2048,KeyMod.Shift=1024,KeyMod.Alt=512,KeyMod.WinCtrl=256;var oe=s(2677),se=s(6059),re=s(1640),ae=s(5623),le=s(7374),ce=s(6518),de=s(4973),he=s(5638),ue=s(276),ge=s(2042),pe=s(3733),me=s(5393),fe=s(5976),_e=s(7301),Ce=s(1432),ve=s(8401);const be="$initialize";let we=!1;function logOnceWebWorkerWarning(e){Ce.$L&&(we||(we=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message))}class RequestMessage{constructor(e,o,s,l){this.vsWorker=e,this.req=o,this.method=s,this.args=l,this.type=0}}class ReplyMessage{constructor(e,o,s,l){this.vsWorker=e,this.seq=o,this.res=s,this.err=l,this.type=1}}class SubscribeEventMessage{constructor(e,o,s,l){this.vsWorker=e,this.req=o,this.eventName=s,this.arg=l,this.type=2}}class EventMessage{constructor(e,o,s){this.vsWorker=e,this.req=o,this.event=s,this.type=3}}class UnsubscribeEventMessage{constructor(e,o){this.vsWorker=e,this.req=o,this.type=4}}class SimpleWorkerProtocol{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,o){const s=String(++this._lastSentReq);return new Promise(((l,d)=>{this._pendingReplies[s]={resolve:l,reject:d},this._send(new RequestMessage(this._workerId,s,e,o))}))}listen(e,o){let s=null;const l=new Y.Q5({onFirstListenerAdd:()=>{s=String(++this._lastSentReq),this._pendingEmitters.set(s,l),this._send(new SubscribeEventMessage(this._workerId,s,e,o))},onLastListenerRemove:()=>{this._pendingEmitters.delete(s),this._send(new UnsubscribeEventMessage(this._workerId,s)),s=null}});return l.event}handleMessage(e){e&&e.vsWorker&&(-1!==this._workerId&&e.vsWorker!==this._workerId||this._handleMessage(e))}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq])return void console.warn("Got reply to unknown seq");let o=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let s=e.err;return e.err.$isError&&(s=new Error,s.name=e.err.name,s.message=e.err.message,s.stack=e.err.stack),void o.reject(s)}o.resolve(e.res)}_handleRequestMessage(e){let o=e.req,s=this._handler.handleMessage(e.method,e.args);s.then((e=>{this._send(new ReplyMessage(this._workerId,o,e,void 0))}),(e=>{e.detail instanceof Error&&(e.detail=(0,_e.ri)(e.detail)),this._send(new ReplyMessage(this._workerId,o,void 0,(0,_e.ri)(e)))}))}_handleSubscribeEventMessage(e){const o=e.req,s=this._handler.handleEvent(e.eventName,e.arg)((e=>{this._send(new EventMessage(this._workerId,o,e))}));this._pendingEvents.set(o,s)}_handleEventMessage(e){this._pendingEmitters.has(e.req)?this._pendingEmitters.get(e.req).fire(e.event):console.warn("Got event for unknown req")}_handleUnsubscribeEventMessage(e){this._pendingEvents.has(e.req)?(this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)):console.warn("Got unsubscribe for unknown req")}_send(e){let o=[];if(0===e.type)for(let s=0;s<e.args.length;s++)e.args[s]instanceof ArrayBuffer&&o.push(e.args[s]);else 1===e.type&&e.res instanceof ArrayBuffer&&o.push(e.res);this._handler.sendMessage(e,o)}}class SimpleWorkerClient extends fe.JT{constructor(e,o,s){super();let l=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",(e=>{this._protocol.handleMessage(e)}),(e=>{l&&l(e)}))),this._protocol=new SimpleWorkerProtocol({sendMessage:(e,o)=>{this._worker.postMessage(e,o)},handleMessage:(e,o)=>{if("function"!==typeof s[e])return Promise.reject(new Error("Missing method "+e+" on main thread host."));try{return Promise.resolve(s[e].apply(s,o))}catch(l){return Promise.reject(l)}},handleEvent:(e,o)=>{if(propertyIsDynamicEvent(e)){const l=s[e].call(s,o);if("function"!==typeof l)throw new Error(`Missing dynamic event ${e} on main thread host.`);return l}if(propertyIsEvent(e)){const o=s[e];if("function"!==typeof o)throw new Error(`Missing event ${e} on main thread host.`);return o}throw new Error(`Malformed event name ${e}`)}}),this._protocol.setWorkerId(this._worker.getId());let d=null;"undefined"!==typeof Ce.li.require&&"function"===typeof Ce.li.require.getConfig?d=Ce.li.require.getConfig():"undefined"!==typeof Ce.li.requirejs&&(d=Ce.li.requirejs.s.contexts._.config);const u=ve.$E(s);this._onModuleLoaded=this._protocol.sendMessage(be,[this._worker.getId(),JSON.parse(JSON.stringify(d)),o,u]);const proxyMethodRequest=(e,o)=>this._request(e,o),proxyListen=(e,o)=>this._protocol.listen(e,o);this._lazyProxy=new Promise(((e,s)=>{l=s,this._onModuleLoaded.then((o=>{e(createProxyObject(o,proxyMethodRequest,proxyListen))}),(e=>{s(e),this._onError("Worker failed to load "+o,e)}))}))}getProxyObject(){return this._lazyProxy}_request(e,o){return new Promise(((s,l)=>{this._onModuleLoaded.then((()=>{this._protocol.sendMessage(e,o).then(s,l)}),l)}))}_onError(e,o){console.error(e),console.info(o)}}function propertyIsEvent(e){return"o"===e[0]&&"n"===e[1]&&oe.df(e.charCodeAt(2))}function propertyIsDynamicEvent(e){return/^onDynamic/.test(e)&&oe.df(e.charCodeAt(9))}function createProxyObject(e,o,s){const createProxyMethod=e=>function(){const s=Array.prototype.slice.call(arguments,0);return o(e,s)},createProxyDynamicEvent=e=>function(o){return s(e,o)};let l={};for(const d of e)propertyIsDynamicEvent(d)?l[d]=createProxyDynamicEvent(d):propertyIsEvent(d)?l[d]=s(d,void 0):l[d]=createProxyMethod(d);return l}var Se;const ye=null===(Se=window.trustedTypes)||void 0===Se?void 0:Se.createPolicy("defaultWorkerFactory",{createScriptURL:e=>e});function getWorker(e){if(Ce.li.MonacoEnvironment){if("function"===typeof Ce.li.MonacoEnvironment.getWorker)return Ce.li.MonacoEnvironment.getWorker("workerMain.js",e);if("function"===typeof Ce.li.MonacoEnvironment.getWorkerUrl){const o=Ce.li.MonacoEnvironment.getWorkerUrl("workerMain.js",e);return new Worker(ye?ye.createScriptURL(o):o,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function isPromiseLike(e){return"function"===typeof e.then}class WebWorker{constructor(e,o,s,l,d){this.id=o;const u=getWorker(s);isPromiseLike(u)?this.worker=u:this.worker=Promise.resolve(u),this.postMessage(e,[]),this.worker.then((e=>{e.onmessage=function(e){l(e.data)},e.onmessageerror=d,"function"===typeof e.addEventListener&&e.addEventListener("error",d)}))}getId(){return this.id}postMessage(e,o){this.worker&&this.worker.then((s=>s.postMessage(e,o)))}dispose(){this.worker&&this.worker.then((e=>e.terminate())),this.worker=null}}class DefaultWorkerFactory{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,o,s){let l=++DefaultWorkerFactory.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new WebWorker(e,l,this._label||"anonymous"+l,o,(e=>{logOnceWebWorkerWarning(e),this._webWorkerFailedBeforeError=e,s(e)}))}}DefaultWorkerFactory.LAST_WORKER_ID=0;var Le=s(2571);const xe=3;function computeDiff(e,o,s,l){const d=new Le.Hs(e,o,s);return d.ComputeDiff(l)}class LineSequence{constructor(e){const o=[],s=[];for(let l=0,d=e.length;l<d;l++)o[l]=getFirstNonBlankColumn(e[l],1),s[l]=getLastNonBlankColumn(e[l],1);this.lines=e,this._startColumns=o,this._endColumns=s}getElements(){const e=[];for(let o=0,s=this.lines.length;o<s;o++)e[o]=this.lines[o].substring(this._startColumns[o]-1,this._endColumns[o]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,o,s){const l=[],d=[],u=[];let g=0;for(let p=o;p<=s;p++){const o=this.lines[p],s=e?this._startColumns[p]:1,m=e?this._endColumns[p]:o.length+1;for(let e=s;e<m;e++)l[g]=o.charCodeAt(e-1),d[g]=p+1,u[g]=e,g++}return new CharSequence(l,d,u)}}class CharSequence{constructor(e,o,s){this._charCodes=e,this._lineNumbers=o,this._columns=s}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class CharChange{constructor(e,o,s,l,d,u,g,p){this.originalStartLineNumber=e,this.originalStartColumn=o,this.originalEndLineNumber=s,this.originalEndColumn=l,this.modifiedStartLineNumber=d,this.modifiedStartColumn=u,this.modifiedEndLineNumber=g,this.modifiedEndColumn=p}static createFromDiffChange(e,o,s){let l,d,u,g,p,m,f,_;return 0===e.originalLength?(l=0,d=0,u=0,g=0):(l=o.getStartLineNumber(e.originalStart),d=o.getStartColumn(e.originalStart),u=o.getEndLineNumber(e.originalStart+e.originalLength-1),g=o.getEndColumn(e.originalStart+e.originalLength-1)),0===e.modifiedLength?(p=0,m=0,f=0,_=0):(p=s.getStartLineNumber(e.modifiedStart),m=s.getStartColumn(e.modifiedStart),f=s.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),_=s.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new CharChange(l,d,u,g,p,m,f,_)}}function postProcessCharChanges(e){if(e.length<=1)return e;const o=[e[0]];let s=o[0];for(let l=1,d=e.length;l<d;l++){const d=e[l],u=d.originalStart-(s.originalStart+s.originalLength),g=d.modifiedStart-(s.modifiedStart+s.modifiedLength),p=Math.min(u,g);p<xe?(s.originalLength=d.originalStart+d.originalLength-s.originalStart,s.modifiedLength=d.modifiedStart+d.modifiedLength-s.modifiedStart):(o.push(d),s=d)}return o}class LineChange{constructor(e,o,s,l,d){this.originalStartLineNumber=e,this.originalEndLineNumber=o,this.modifiedStartLineNumber=s,this.modifiedEndLineNumber=l,this.charChanges=d}static createFromDiffResult(e,o,s,l,d,u,g){let p,m,f,_,C;if(0===o.originalLength?(p=s.getStartLineNumber(o.originalStart)-1,m=0):(p=s.getStartLineNumber(o.originalStart),m=s.getEndLineNumber(o.originalStart+o.originalLength-1)),0===o.modifiedLength?(f=l.getStartLineNumber(o.modifiedStart)-1,_=0):(f=l.getStartLineNumber(o.modifiedStart),_=l.getEndLineNumber(o.modifiedStart+o.modifiedLength-1)),u&&o.originalLength>0&&o.originalLength<20&&o.modifiedLength>0&&o.modifiedLength<20&&d()){const u=s.createCharSequence(e,o.originalStart,o.originalStart+o.originalLength-1),p=l.createCharSequence(e,o.modifiedStart,o.modifiedStart+o.modifiedLength-1);let m=computeDiff(u,p,d,!0).changes;g&&(m=postProcessCharChanges(m)),C=[];for(let e=0,o=m.length;e<o;e++)C.push(CharChange.createFromDiffChange(m[e],u,p))}return new LineChange(p,m,f,_,C)}}class DiffComputer{constructor(e,o,s){this.shouldComputeCharChanges=s.shouldComputeCharChanges,this.shouldPostProcessCharChanges=s.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=s.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=s.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=o,this.original=new LineSequence(e),this.modified=new LineSequence(o),this.continueLineDiff=createContinueProcessingPredicate(s.maxComputationTime),this.continueCharDiff=createContinueProcessingPredicate(0===s.maxComputationTime?0:Math.min(s.maxComputationTime,5e3))}computeDiff(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return 1===this.modified.lines.length&&0===this.modified.lines[0].length?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=computeDiff(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),o=e.changes,s=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const e=[];for(let s=0,l=o.length;s<l;s++)e.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,o[s],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:s,changes:e}}const l=[];let d=0,u=0;for(let g=-1,p=o.length;g<p;g++){const e=g+1<p?o[g+1]:null,s=e?e.originalStart:this.originalLines.length,m=e?e.modifiedStart:this.modifiedLines.length;while(d<s&&u<m){const e=this.originalLines[d],o=this.modifiedLines[u];if(e!==o){{let s=getFirstNonBlankColumn(e,1),g=getFirstNonBlankColumn(o,1);while(s>1&&g>1){const l=e.charCodeAt(s-2),d=o.charCodeAt(g-2);if(l!==d)break;s--,g--}(s>1||g>1)&&this._pushTrimWhitespaceCharChange(l,d+1,1,s,u+1,1,g)}{let s=getLastNonBlankColumn(e,1),g=getLastNonBlankColumn(o,1);const p=e.length+1,m=o.length+1;while(s<p&&g<m){const o=e.charCodeAt(s-1),l=e.charCodeAt(g-1);if(o!==l)break;s++,g++}(s<p||g<m)&&this._pushTrimWhitespaceCharChange(l,d+1,s,p,u+1,g,m)}}d++,u++}e&&(l.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,e,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),d+=e.originalLength,u+=e.modifiedLength)}return{quitEarly:s,changes:l}}_pushTrimWhitespaceCharChange(e,o,s,l,d,u,g){if(this._mergeTrimWhitespaceCharChange(e,o,s,l,d,u,g))return;let p;this.shouldComputeCharChanges&&(p=[new CharChange(o,s,o,l,d,u,d,g)]),e.push(new LineChange(o,o,d,d,p))}_mergeTrimWhitespaceCharChange(e,o,s,l,d,u,g){const p=e.length;if(0===p)return!1;const m=e[p-1];return 0!==m.originalEndLineNumber&&0!==m.modifiedEndLineNumber&&(m.originalEndLineNumber+1===o&&m.modifiedEndLineNumber+1===d&&(m.originalEndLineNumber=o,m.modifiedEndLineNumber=d,this.shouldComputeCharChanges&&m.charChanges&&m.charChanges.push(new CharChange(o,s,o,l,d,u,d,g)),!0))}}function getFirstNonBlankColumn(e,o){const s=oe.LC(e);return-1===s?o:s+1}function getLastNonBlankColumn(e,o){const s=oe.ow(e);return-1===s?o:s+2}function createContinueProcessingPredicate(e){if(0===e)return()=>!0;const o=Date.now();return()=>Date.now()-o<e}var ke=s(310);class MirrorTextModel{constructor(e,o,s,l){this._uri=e,this._lines=o,this._eol=s,this._versionId=l,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const o=e.changes;for(const s of o)this._acceptDeleteRange(s.range),this._acceptInsertText(new ee.L(s.range.startLineNumber,s.range.startColumn),s.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,o=this._lines.length,s=new Uint32Array(o);for(let l=0;l<o;l++)s[l]=this._lines[l].length+e;this._lineStarts=new ke.oQ(s)}}_setLineText(e,o){this._lines[e]=o,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,o){if(0===o.length)return;const s=(0,oe.uq)(o);if(1===s.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+s[0]+this._lines[e.lineNumber-1].substring(e.column-1));s[s.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+s[0]);const l=new Uint32Array(s.length-1);for(let d=1;d<s.length;d++)this._lines.splice(e.lineNumber+d-1,0,s[d]),l[d-1]=s[d].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,l)}}var Ne=s(270),De=s(4906);class Uint8Matrix{constructor(e,o,s){const l=new Uint8Array(e*o);for(let d=0,u=e*o;d<u;d++)l[d]=s;this._data=l,this.rows=e,this.cols=o}get(e,o){return this._data[e*this.cols+o]}set(e,o,s){this._data[e*this.cols+o]=s}}class StateMachine{constructor(e){let o=0,s=0;for(let d=0,u=e.length;d<u;d++){const[l,u,g]=e[d];u>o&&(o=u),l>s&&(s=l),g>s&&(s=g)}o++,s++;const l=new Uint8Matrix(s,o,0);for(let d=0,u=e.length;d<u;d++){const[o,s,u]=e[d];l.set(o,s,u)}this._states=l,this._maxCharCode=o}nextState(e,o){return o<0||o>=this._maxCharCode?0:this._states.get(e,o)}}let Ee=null;function getStateMachine(){return null===Ee&&(Ee=new StateMachine([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Ee}let Te=null;function getClassifier(){if(null===Te){Te=new De.N(0);const e=" \t<>'\"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…";for(let s=0;s<e.length;s++)Te.set(e.charCodeAt(s),1);const o=".,;";for(let s=0;s<o.length;s++)Te.set(o.charCodeAt(s),2)}return Te}class LinkComputer{static _createLink(e,o,s,l,d){let u=d-1;do{const s=o.charCodeAt(u),l=e.get(s);if(2!==l)break;u--}while(u>l);if(l>0){const e=o.charCodeAt(l-1),s=o.charCodeAt(u);(40===e&&41===s||91===e&&93===s||123===e&&125===s)&&u--}return{range:{startLineNumber:s,startColumn:l+1,endLineNumber:s,endColumn:u+2},url:o.substring(l,u+1)}}static computeLinks(e,o=getStateMachine()){const s=getClassifier(),l=[];for(let d=1,u=e.getLineCount();d<=u;d++){const u=e.getLineContent(d),g=u.length;let p=0,m=0,f=0,_=1,C=!1,b=!1,w=!1,S=!1;while(p<g){let e=!1;const g=u.charCodeAt(p);if(13===_){let o;switch(g){case 40:C=!0,o=0;break;case 41:o=C?0:1;break;case 91:w=!0,b=!0,o=0;break;case 93:w=!1,o=b?0:1;break;case 123:S=!0,o=0;break;case 125:o=S?0:1;break;case 39:o=34===f||96===f?0:1;break;case 34:o=39===f||96===f?0:1;break;case 96:o=39===f||34===f?0:1;break;case 42:o=42===f?1:0;break;case 124:o=124===f?1:0;break;case 32:o=w?0:1;break;default:o=s.get(g)}1===o&&(l.push(LinkComputer._createLink(s,u,d,m,p)),e=!0)}else if(12===_){let o;91===g?(b=!0,o=0):o=s.get(g),1===o?e=!0:_=13}else _=o.nextState(_,g),0===_&&(e=!0);e&&(_=1,C=!1,b=!1,S=!1,m=p+1,f=g),p++}13===_&&l.push(LinkComputer._createLink(s,u,d,m,g))}return l}}function computeLinks(e){return e&&"function"===typeof e.getLineCount&&"function"===typeof e.getLineContent?LinkComputer.computeLinks(e):[]}class BasicInplaceReplace{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,o,s,l,d){if(e&&o){const s=this.doNavigateValueSet(o,d);if(s)return{range:e,value:s}}if(s&&l){const e=this.doNavigateValueSet(l,d);if(e)return{range:s,value:e}}return null}doNavigateValueSet(e,o){const s=this.numberReplace(e,o);return null!==s?s:this.textReplace(e,o)}numberReplace(e,o){const s=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let l=Number(e),d=parseFloat(e);return isNaN(l)||isNaN(d)||l!==d?null:0!==l||o?(l=Math.floor(l*s),l+=o?s:-s,String(l/s)):null}textReplace(e,o){return this.valueSetsReplace(this._defaultValueSet,e,o)}valueSetsReplace(e,o,s){let l=null;for(let d=0,u=e.length;null===l&&d<u;d++)l=this.valueSetReplace(e[d],o,s);return l}valueSetReplace(e,o,s){let l=e.indexOf(o);return l>=0?(l+=s?1:-1,l<0?l=e.length-1:l%=e.length,e[l]):null}}BasicInplaceReplace.INSTANCE=new BasicInplaceReplace;var Ie=s(4013),Ae=s(1446),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class MirrorModel extends MirrorTextModel{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,o){const s=(0,Ne.t2)(e.column,(0,Ne.eq)(o),this._lines[e.lineNumber-1],0);return s?new te.e(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn):null}words(e){const o=this._lines,s=this._wordenize.bind(this);let l=0,d="",u=0,g=[];return{*[Symbol.iterator](){while(1)if(u<g.length){const e=d.substring(g[u].start,g[u].end);u+=1,yield e}else{if(!(l<o.length))break;d=o[l],g=s(d,e),u=0,l+=1}}}}getLineWords(e,o){const s=this._lines[e-1],l=this._wordenize(s,o),d=[];for(const u of l)d.push({word:s.substring(u.start,u.end),startColumn:u.start+1,endColumn:u.end+1});return d}_wordenize(e,o){const s=[];let l;o.lastIndex=0;while(l=o.exec(e)){if(0===l[0].length)break;s.push({start:l.index,end:l.index+l[0].length})}return s}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const o=this._eol,s=e.startLineNumber-1,l=e.endLineNumber-1,d=[];d.push(this._lines[s].substring(e.startColumn-1));for(let u=s+1;u<l;u++)d.push(this._lines[u]);return d.push(this._lines[l].substring(0,e.endColumn-1)),d.join(o)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const o=this._lineStarts.getIndexOf(e),s=this._lines[o.index].length;return{lineNumber:1+o.index,column:1+Math.min(o.remainder,s)}}_validateRange(e){const o=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),s=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return o.lineNumber!==e.startLineNumber||o.column!==e.startColumn||s.lineNumber!==e.endLineNumber||s.column!==e.endColumn?{startLineNumber:o.lineNumber,startColumn:o.column,endLineNumber:s.lineNumber,endColumn:s.column}:e}_validatePosition(e){if(!ee.L.isIPosition(e))throw new Error("bad position");let{lineNumber:o,column:s}=e,l=!1;if(o<1)o=1,s=1,l=!0;else if(o>this._lines.length)o=this._lines.length,s=this._lines[o-1].length+1,l=!0;else{const e=this._lines[o-1].length+1;s<1?(s=1,l=!0):s>e&&(s=e,l=!0)}return l?{lineNumber:o,column:s}:e}}class EditorSimpleWorker{constructor(e,o){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=o,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach((o=>e.push(this._models[o]))),e}acceptNewModel(e){this._models[e.url]=new MirrorModel(X.o.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,o){if(!this._models[e])return;const s=this._models[e];s.onEvents(o)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,o,s){return __awaiter(this,void 0,void 0,(function*(){const l=this._getModel(e);return l?Ae.a.computeUnicodeHighlights(l,o,s):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}))}computeDiff(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=this._getModel(e),u=this._getModel(o);if(!d||!u)return null;const g=d.getLinesContent(),p=u.getLinesContent(),m=new DiffComputer(g,p,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:s,shouldMakePrettyDiff:!0,maxComputationTime:l}),f=m.computeDiff(),_=!(f.changes.length>0)&&this._modelsAreIdentical(d,u);return{quitEarly:f.quitEarly,identical:_,changes:f.changes}}))}_modelsAreIdentical(e,o){const s=e.getLineCount(),l=o.getLineCount();if(s!==l)return!1;for(let d=1;d<=s;d++){const s=e.getLineContent(d),l=o.getLineContent(d);if(s!==l)return!1}return!0}computeMoreMinimalEdits(e,o){return __awaiter(this,void 0,void 0,(function*(){const s=this._getModel(e);if(!s)return o;const l=[];let d;o=o.slice(0).sort(((e,o)=>{if(e.range&&o.range)return te.e.compareRangesUsingStarts(e.range,o.range);const s=e.range?0:1,l=o.range?0:1;return s-l}));for(let{range:e,text:u,eol:g}of o){if("number"===typeof g&&(d=g),te.e.isEmpty(e)&&!u)continue;const o=s.getValueInRange(e);if(u=u.replace(/\r\n|\n|\r/g,s.eol),o===u)continue;if(Math.max(u.length,o.length)>EditorSimpleWorker._diffLimit){l.push({range:e,text:u});continue}const p=(0,Le.a$)(o,u,!1),m=s.offsetAt(te.e.lift(e).getStartPosition());for(const e of p){const o=s.positionAt(m+e.originalStart),d=s.positionAt(m+e.originalStart+e.originalLength),g={text:u.substr(e.modifiedStart,e.modifiedLength),range:{startLineNumber:o.lineNumber,startColumn:o.column,endLineNumber:d.lineNumber,endColumn:d.column}};s.getValueInRange(g.range)!==g.text&&l.push(g)}}return"number"===typeof d&&l.push({eol:d,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),l}))}computeLinks(e){return __awaiter(this,void 0,void 0,(function*(){const o=this._getModel(e);return o?computeLinks(o):null}))}textualSuggest(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=new Ie.G(!0),u=new RegExp(s,l),g=new Set;e:for(let s of e){const e=this._getModel(s);if(e)for(let s of e.words(u))if(s!==o&&isNaN(Number(s))&&(g.add(s),g.size>EditorSimpleWorker._suggestionsLimit))break e}return{words:Array.from(g),duration:d.elapsed()}}))}computeWordRanges(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=this._getModel(e);if(!d)return Object.create(null);const u=new RegExp(s,l),g=Object.create(null);for(let e=o.startLineNumber;e<o.endLineNumber;e++){const o=d.getLineWords(e,u);for(const s of o){if(!isNaN(Number(s.word)))continue;let o=g[s.word];o||(o=[],g[s.word]=o),o.push({startLineNumber:e,startColumn:s.startColumn,endLineNumber:e,endColumn:s.endColumn})}}return g}))}navigateValueSet(e,o,s,l,d){return __awaiter(this,void 0,void 0,(function*(){const u=this._getModel(e);if(!u)return null;const g=new RegExp(l,d);o.startColumn===o.endColumn&&(o={startLineNumber:o.startLineNumber,startColumn:o.startColumn,endLineNumber:o.endLineNumber,endColumn:o.endColumn+1});const p=u.getValueInRange(o),m=u.getWordAtPosition({lineNumber:o.startLineNumber,column:o.startColumn},g);if(!m)return null;const f=u.getValueInRange(m),_=BasicInplaceReplace.INSTANCE.navigateValueSet(o,p,m,f,s);return _}))}loadForeignModule(e,o,s){const proxyMethodRequest=(e,o)=>this._host.fhr(e,o),l=ve.IU(s,proxyMethodRequest),d={host:l,getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(d,o),Promise.resolve(ve.$E(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,o){if(!this._foreignModule||"function"!==typeof this._foreignModule[e])return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,o))}catch(s){return Promise.reject(s)}}}EditorSimpleWorker._diffLimit=1e5,EditorSimpleWorker._suggestionsLimit=1e4,"function"===typeof importScripts&&(Ce.li.monaco=createMonacoBaseAPI());var Me=s(1765),Re=s(9488),Pe=s(3557),Oe=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},editorWorkerService_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const Fe=6e4,Be=3e5;function canSyncModel(e,o){const s=e.getModel(o);return!!s&&!s.isTooLargeForSyncing()}let We=class EditorWorkerService extends fe.JT{constructor(e,o,s,l,d){super(),this._modelService=e,this._workerManager=this._register(new WorkerManager(this._modelService,l)),this._logService=s,this._register(d.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(e,o)=>canSyncModel(this._modelService,e.uri)?this._workerManager.withWorker().then((o=>o.computeLinks(e.uri))).then((e=>e&&{links:e})):Promise.resolve({links:[]})})),this._register(d.completionProvider.register("*",new WordBasedCompletionItemProvider(this._workerManager,o,this._modelService,l)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return canSyncModel(this._modelService,e)}computedUnicodeHighlights(e,o,s){return this._workerManager.withWorker().then((l=>l.computedUnicodeHighlights(e,o,s)))}computeDiff(e,o,s,l){return this._workerManager.withWorker().then((d=>d.computeDiff(e,o,s,l)))}computeMoreMinimalEdits(e,o){if((0,Re.Of)(o)){if(!canSyncModel(this._modelService,e))return Promise.resolve(o);const s=Ie.G.create(!0),l=this._workerManager.withWorker().then((s=>s.computeMoreMinimalEdits(e,o)));return l.finally((()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed()))),Promise.race([l,(0,me.Vs)(1e3).then((()=>o))])}return Promise.resolve(void 0)}canNavigateValueSet(e){return canSyncModel(this._modelService,e)}navigateValueSet(e,o,s){return this._workerManager.withWorker().then((l=>l.navigateValueSet(e,o,s)))}canComputeWordRanges(e){return canSyncModel(this._modelService,e)}computeWordRanges(e,o){return this._workerManager.withWorker().then((s=>s.computeWordRanges(e,o)))}};We=__decorate([__param(0,pe.q),__param(1,Me.V),__param(2,Pe.VZ),__param(3,he.c_),__param(4,Oe.p)],We);class WordBasedCompletionItemProvider{constructor(e,o,s,l){this.languageConfigurationService=l,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=o,this._modelService=s}provideCompletionItems(e,o){return editorWorkerService_awaiter(this,void 0,void 0,(function*(){const s=this._configurationService.getValue(e.uri,o,"editor");if(!s.wordBasedSuggestions)return;const l=[];if("currentDocument"===s.wordBasedSuggestionsMode)canSyncModel(this._modelService,e.uri)&&l.push(e.uri);else for(const o of this._modelService.getModels())canSyncModel(this._modelService,o.uri)&&(o===e?l.unshift(o.uri):"allDocuments"!==s.wordBasedSuggestionsMode&&o.getLanguageId()!==e.getLanguageId()||l.push(o.uri));if(0===l.length)return;const d=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),u=e.getWordAtPosition(o),g=u?new te.e(o.lineNumber,u.startColumn,o.lineNumber,u.endColumn):te.e.fromPositions(o),p=g.setEndPosition(o.lineNumber,o.column),m=yield this._workerManager.withWorker(),f=yield m.textualSuggest(l,null===u||void 0===u?void 0:u.word,d);return f?{duration:f.duration,suggestions:f.words.map((e=>({kind:18,label:e,insertText:e,range:{insert:p,replace:g}})))}:void 0}))}}class WorkerManager extends fe.JT{constructor(e,o){super(),this.languageConfigurationService=o,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=(new Date).getTime();const s=this._register(new me.zh);s.cancelAndSet((()=>this._checkStopIdleWorker()),Math.round(Be/2)),this._register(this._modelService.onModelRemoved((e=>this._checkStopEmptyWorker())))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;const e=this._modelService.getModels();0===e.length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;const e=(new Date).getTime()-this._lastWorkerUsedTime;e>Be&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new EditorWorkerClient(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class EditorModelManager extends fe.JT{constructor(e,o,s){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=o,!s){const e=new me.zh;e.cancelAndSet((()=>this._checkStopModelSync()),Math.round(Fe/2)),this._register(e)}}dispose(){for(let e in this._syncedModels)(0,fe.B9)(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,o){for(const s of e){const e=s.toString();this._syncedModels[e]||this._beginModelSync(s,o),this._syncedModels[e]&&(this._syncedModelsLastUsedTime[e]=(new Date).getTime())}}_checkStopModelSync(){const e=(new Date).getTime(),o=[];for(let s in this._syncedModelsLastUsedTime){const l=e-this._syncedModelsLastUsedTime[s];l>Fe&&o.push(s)}for(const s of o)this._stopModelSync(s)}_beginModelSync(e,o){const s=this._modelService.getModel(e);if(!s)return;if(!o&&s.isTooLargeForSyncing())return;const l=e.toString();this._proxy.acceptNewModel({url:s.uri.toString(),lines:s.getLinesContent(),EOL:s.getEOL(),versionId:s.getVersionId()});const d=new fe.SL;d.add(s.onDidChangeContent((e=>{this._proxy.acceptModelChanged(l.toString(),e)}))),d.add(s.onWillDispose((()=>{this._stopModelSync(l)}))),d.add((0,fe.OF)((()=>{this._proxy.acceptRemovedModel(l)}))),this._syncedModels[l]=d}_stopModelSync(e){const o=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],(0,fe.B9)(o)}}class SynchronousWorkerClient{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class EditorWorkerHost{constructor(e){this._workerClient=e}fhr(e,o){return this._workerClient.fhr(e,o)}}class EditorWorkerClient extends fe.JT{constructor(e,o,s,l){super(),this.languageConfigurationService=l,this._disposed=!1,this._modelService=e,this._keepIdleModels=o,this._workerFactory=new DefaultWorkerFactory(s),this._worker=null,this._modelManager=null}fhr(e,o){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new SimpleWorkerClient(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new EditorWorkerHost(this)))}catch(e){logOnceWebWorkerWarning(e),this._worker=new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,(e=>(logOnceWebWorkerWarning(e),this._worker=new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this),null)),this._getOrCreateWorker().getProxyObject())))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new EditorModelManager(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,o=!1){return editorWorkerService_awaiter(this,void 0,void 0,(function*(){return this._disposed?Promise.reject((0,_e.F0)()):this._getProxy().then((s=>(this._getOrCreateModelManager(s).ensureSyncedResources(e,o),s)))}))}computedUnicodeHighlights(e,o,s){return this._withSyncedResources([e]).then((l=>l.computeUnicodeHighlights(e.toString(),o,s)))}computeDiff(e,o,s,l){return this._withSyncedResources([e,o],!0).then((d=>d.computeDiff(e.toString(),o.toString(),s,l)))}computeMoreMinimalEdits(e,o){return this._withSyncedResources([e]).then((s=>s.computeMoreMinimalEdits(e.toString(),o)))}computeLinks(e){return this._withSyncedResources([e]).then((o=>o.computeLinks(e.toString())))}textualSuggest(e,o,s){return editorWorkerService_awaiter(this,void 0,void 0,(function*(){const l=yield this._withSyncedResources(e),d=s.source,u=(0,oe.mr)(s);return l.textualSuggest(e.map((e=>e.toString())),o,d,u)}))}computeWordRanges(e,o){return this._withSyncedResources([e]).then((s=>{const l=this._modelService.getModel(e);if(!l)return Promise.resolve(null);const d=this.languageConfigurationService.getLanguageConfiguration(l.getLanguageId()).getWordDefinition(),u=d.source,g=(0,oe.mr)(d);return s.computeWordRanges(e.toString(),o,u,g)}))}navigateValueSet(e,o,s){return this._withSyncedResources([e]).then((l=>{const d=this._modelService.getModel(e);if(!d)return null;const u=this.languageConfigurationService.getLanguageConfiguration(d.getLanguageId()).getWordDefinition(),g=u.source,p=(0,oe.mr)(u);return l.navigateValueSet(e.toString(),o,s,g,p)}))}dispose(){super.dispose(),this._disposed=!0}}function createWebWorker(e,o,s){return new MonacoWebWorkerImpl(e,o,s)}class MonacoWebWorkerImpl extends EditorWorkerClient{constructor(e,o,s){super(e,s.keepIdleModels||!1,s.label,o),this._foreignModuleId=s.moduleId,this._foreignModuleCreateData=s.createData||null,this._foreignModuleHost=s.host||null,this._foreignProxy=null}fhr(e,o){if(!this._foreignModuleHost||"function"!==typeof this._foreignModuleHost[e])return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,o))}catch(s){return Promise.reject(s)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then((e=>{const o=this._foreignModuleHost?ve.$E(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,o).then((o=>{this._foreignModuleCreateData=null;const proxyMethodRequest=(o,s)=>e.fmr(o,s),createProxyMethod=(e,o)=>function(){const s=Array.prototype.slice.call(arguments,0);return o(e,s)},s={};for(const e of o)s[e]=createProxyMethod(e,proxyMethodRequest);return s}))}))),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then((e=>this.getProxy()))}}var Ve=s(7378),He=s(7736),ze=s(1118);function isFuzzyActionArr(e){return Array.isArray(e)}function isFuzzyAction(e){return!isFuzzyActionArr(e)}function isString(e){return"string"===typeof e}function isIAction(e){return!isString(e)}function empty(e){return!e}function fixCase(e,o){return e.ignoreCase&&o?o.toLowerCase():o}function sanitize(e){return e.replace(/[&<>'"_]/g,"-")}function monarchCommon_log(e,o){console.log(`${e.languageId}: ${o}`)}function createError(e,o){return new Error(`${e.languageId}: ${o}`)}function substituteMatches(e,o,s,l,d){const u=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let g=null;return o.replace(u,(function(o,u,p,m,f,_,C,b,w){return empty(p)?empty(m)?!empty(f)&&f<l.length?fixCase(e,l[f]):!empty(C)&&e&&"string"===typeof e[C]?e[C]:(null===g&&(g=d.split("."),g.unshift(d)),!empty(_)&&_<g.length?fixCase(e,g[_]):""):fixCase(e,s):"$"}))}function findRules(e,o){let s=o;while(s&&s.length>0){const o=e.tokenizer[s];if(o)return o;const l=s.lastIndexOf(".");s=l<0?null:s.substr(0,l)}return null}function stateExists(e,o){let s=o;while(s&&s.length>0){const o=e.stateNames[s];if(o)return!0;const l=s.lastIndexOf(".");s=l<0?null:s.substr(0,l)}return!1}const Ue=5;class MonarchStackElementFactory{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,o){return this._INSTANCE.create(e,o)}create(e,o){if(null!==e&&e.depth>=this._maxCacheDepth)return new MonarchStackElement(e,o);let s=MonarchStackElement.getStackElementId(e);s.length>0&&(s+="|"),s+=o;let l=this._entries[s];return l||(l=new MonarchStackElement(e,o),this._entries[s]=l,l)}}MonarchStackElementFactory._INSTANCE=new MonarchStackElementFactory(Ue);class MonarchStackElement{constructor(e,o){this.parent=e,this.state=o,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let o="";while(null!==e)o.length>0&&(o+="|"),o+=e.state,e=e.parent;return o}static _equals(e,o){while(null!==e&&null!==o){if(e===o)return!0;if(e.state!==o.state)return!1;e=e.parent,o=o.parent}return null===e&&null===o}equals(e){return MonarchStackElement._equals(this,e)}push(e){return MonarchStackElementFactory.create(this,e)}pop(){return this.parent}popall(){let e=this;while(e.parent)e=e.parent;return e}switchTo(e){return MonarchStackElementFactory.create(this.parent,e)}}class EmbeddedLanguageData{constructor(e,o){this.languageId=e,this.state=o}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){const e=this.state.clone();return e===this.state?this:new EmbeddedLanguageData(this.languageId,this.state)}}class MonarchLineStateFactory{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,o){return this._INSTANCE.create(e,o)}create(e,o){if(null!==o)return new MonarchLineState(e,o);if(null!==e&&e.depth>=this._maxCacheDepth)return new MonarchLineState(e,o);const s=MonarchStackElement.getStackElementId(e);let l=this._entries[s];return l||(l=new MonarchLineState(e,null),this._entries[s]=l,l)}}MonarchLineStateFactory._INSTANCE=new MonarchLineStateFactory(Ue);class MonarchLineState{constructor(e,o){this.stack=e,this.embeddedLanguageData=o}clone(){const e=this.embeddedLanguageData?this.embeddedLanguageData.clone():null;return e===this.embeddedLanguageData?this:MonarchLineStateFactory.create(this.stack,this.embeddedLanguageData)}equals(e){return e instanceof MonarchLineState&&(!!this.stack.equals(e.stack)&&(null===this.embeddedLanguageData&&null===e.embeddedLanguageData||null!==this.embeddedLanguageData&&null!==e.embeddedLanguageData&&this.embeddedLanguageData.equals(e.embeddedLanguageData)))}}class MonarchClassicTokensCollector{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,o){this._lastTokenType===o&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=o,this._lastTokenLanguage=this._languageId,this._tokens.push(new ne.WU(e,o,this._languageId)))}nestedLanguageTokenize(e,o,s,l){const d=s.languageId,u=s.state,g=ne.RW.get(d);if(!g)return this.enterLanguage(d),this.emit(l,""),u;const p=g.tokenize(e,o,u);if(0!==l)for(const m of p.tokens)this._tokens.push(new ne.WU(m.offset+l,m.type,m.language));else this._tokens=this._tokens.concat(p.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,p.endState}finalize(e){return new ne.hG(this._tokens,e)}}class MonarchModernTokensCollector{constructor(e,o){this._languageService=e,this._theme=o,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,o){const s=this._theme.match(this._currentLanguageId,o);this._lastTokenMetadata!==s&&(this._lastTokenMetadata=s,this._tokens.push(e),this._tokens.push(s))}static _merge(e,o,s){const l=null!==e?e.length:0,d=o.length,u=null!==s?s.length:0;if(0===l&&0===d&&0===u)return new Uint32Array(0);if(0===l&&0===d)return s;if(0===d&&0===u)return e;const g=new Uint32Array(l+d+u);null!==e&&g.set(e);for(let p=0;p<d;p++)g[l+p]=o[p];return null!==s&&g.set(s,l+d),g}nestedLanguageTokenize(e,o,s,l){const d=s.languageId,u=s.state,g=ne.RW.get(d);if(!g)return this.enterLanguage(d),this.emit(l,""),u;const p=g.tokenizeEncoded(e,o,u);if(0!==l)for(let m=0,f=p.tokens.length;m<f;m+=2)p.tokens[m]+=l;return this._prependTokens=MonarchModernTokensCollector._merge(this._prependTokens,this._tokens,p.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,p.endState}finalize(e){return new ne.DI(MonarchModernTokensCollector._merge(this._prependTokens,this._tokens,null),e)}}class MonarchTokenizer{constructor(e,o,s,l){this._languageService=e,this._standaloneThemeService=o,this._languageId=s,this._lexer=l,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let d=!1;this._tokenizationRegistryListener=ne.RW.onDidChange((e=>{if(d)return;let o=!1;for(let s=0,l=e.changedLanguages.length;s<l;s++){const l=e.changedLanguages[s];if(this._embeddedLanguages[l]){o=!0;break}}o&&(d=!0,ne.RW.fire([this._languageId]),d=!1)}))}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(let o in this._embeddedLanguages){const s=ne.RW.get(o);if(s){if(s instanceof MonarchTokenizer){const o=s.getLoadStatus();!1===o.loaded&&e.push(o.promise)}}else ne.RW.isResolved(o)||e.push(ne.RW.getOrCreate(o))}return 0===e.length?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then((e=>{}))}}getInitialState(){const e=MonarchStackElementFactory.create(null,this._lexer.start);return MonarchLineStateFactory.create(e,null)}tokenize(e,o,s){const l=new MonarchClassicTokensCollector,d=this._tokenize(e,o,s,l);return l.finalize(d)}tokenizeEncoded(e,o,s){const l=new MonarchModernTokensCollector(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),d=this._tokenize(e,o,s,l);return l.finalize(d)}_tokenize(e,o,s,l){return s.embeddedLanguageData?this._nestedTokenize(e,o,s,0,l):this._myTokenize(e,o,s,0,l)}_findLeavingNestedLanguageOffset(e,o){let s=this._lexer.tokenizer[o.stack.state];if(!s&&(s=findRules(this._lexer,o.stack.state),!s))throw createError(this._lexer,"tokenizer state is not defined: "+o.stack.state);let l=-1,d=!1;for(const u of s){if(!isIAction(u.action)||"@pop"!==u.action.nextEmbedded)continue;d=!0;let o=u.regex;const s=u.regex.source;if("^(?:"===s.substr(0,4)&&")"===s.substr(s.length-1,1)){const e=(o.ignoreCase?"i":"")+(o.unicode?"u":"");o=new RegExp(s.substr(4,s.length-5),e)}const g=e.search(o);-1===g||0!==g&&u.matchOnlyAtLineStart||(-1===l||g<l)&&(l=g)}if(!d)throw createError(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+o.stack.state);return l}_nestedTokenize(e,o,s,l,d){const u=this._findLeavingNestedLanguageOffset(e,s);if(-1===u){const u=d.nestedLanguageTokenize(e,o,s.embeddedLanguageData,l);return MonarchLineStateFactory.create(s.stack,new EmbeddedLanguageData(s.embeddedLanguageData.languageId,u))}const g=e.substring(0,u);g.length>0&&d.nestedLanguageTokenize(g,!1,s.embeddedLanguageData,l);const p=e.substring(u);return this._myTokenize(p,o,s,l+u,d)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,o,s,l,d){d.enterLanguage(this._languageId);const u=e.length,g=o&&this._lexer.includeLF?e+"\n":e,p=g.length;let m=s.embeddedLanguageData,f=s.stack,_=0,C=null,b=!0;while(b||_<p){const s=_,w=f.depth,S=C?C.groups.length:0,y=f.state;let L=null,x=null,k=null,N=null,D=null;if(C){L=C.matches;const e=C.groups.shift();x=e.matched,k=e.action,N=C.rule,0===C.groups.length&&(C=null)}else{if(!b&&_>=p)break;b=!1;let e=this._lexer.tokenizer[y];if(!e&&(e=findRules(this._lexer,y),!e))throw createError(this._lexer,"tokenizer state is not defined: "+y);let o=g.substr(_);for(const s of e)if((0===_||!s.matchOnlyAtLineStart)&&(L=o.match(s.regex),L)){x=L[0],k=s.action;break}}if(L||(L=[""],x=""),k||(_<p&&(L=[g.charAt(_)],x=L[0]),k=this._lexer.defaultToken),null===x)break;_+=x.length;while(isFuzzyAction(k)&&isIAction(k)&&k.test)k=k.test(x,L,y,_===p);let E=null;if("string"===typeof k||Array.isArray(k))E=k;else if(k.group)E=k.group;else if(null!==k.token&&void 0!==k.token){if(E=k.tokenSubst?substituteMatches(this._lexer,k.token,x,L,y):k.token,k.nextEmbedded)if("@pop"===k.nextEmbedded){if(!m)throw createError(this._lexer,"cannot pop embedded language if not inside one");m=null}else{if(m)throw createError(this._lexer,"cannot enter embedded language from within an embedded language");D=substituteMatches(this._lexer,k.nextEmbedded,x,L,y)}if(k.goBack&&(_=Math.max(0,_-k.goBack)),k.switchTo&&"string"===typeof k.switchTo){let e=substituteMatches(this._lexer,k.switchTo,x,L,y);if("@"===e[0]&&(e=e.substr(1)),!findRules(this._lexer,e))throw createError(this._lexer,"trying to switch to a state '"+e+"' that is undefined in rule: "+this._safeRuleName(N));f=f.switchTo(e)}else{if(k.transform&&"function"===typeof k.transform)throw createError(this._lexer,"action.transform not supported");if(k.next)if("@push"===k.next){if(f.depth>=this._lexer.maxStack)throw createError(this._lexer,"maximum tokenizer stack size reached: ["+f.state+","+f.parent.state+",...]");f=f.push(y)}else if("@pop"===k.next){if(f.depth<=1)throw createError(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(N));f=f.pop()}else if("@popall"===k.next)f=f.popall();else{let e=substituteMatches(this._lexer,k.next,x,L,y);if("@"===e[0]&&(e=e.substr(1)),!findRules(this._lexer,e))throw createError(this._lexer,"trying to set a next state '"+e+"' that is undefined in rule: "+this._safeRuleName(N));f=f.push(e)}}k.log&&"string"===typeof k.log&&monarchCommon_log(this._lexer,this._lexer.languageId+": "+substituteMatches(this._lexer,k.log,x,L,y))}if(null===E)throw createError(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(N));const computeNewStateForEmbeddedLanguage=s=>{const u=this._languageService.getLanguageIdByLanguageName(s)||this._languageService.getLanguageIdByMimeType(s)||s,g=this._getNestedEmbeddedLanguageData(u);if(_<p){const s=e.substr(_);return this._nestedTokenize(s,o,MonarchLineStateFactory.create(f,g),l+_,d)}return MonarchLineStateFactory.create(f,g)};if(Array.isArray(E)){if(C&&C.groups.length>0)throw createError(this._lexer,"groups cannot be nested: "+this._safeRuleName(N));if(L.length!==E.length+1)throw createError(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(N));let e=0;for(let o=1;o<L.length;o++)e+=L[o].length;if(e!==x.length)throw createError(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(N));C={rule:N,matches:L,groups:[]};for(let o=0;o<E.length;o++)C.groups[o]={action:E[o],matched:L[o+1]};_-=x.length}else{{if("@rematch"===E&&(_-=x.length,x="",L=null,E="",null!==D))return computeNewStateForEmbeddedLanguage(D);if(0===x.length){if(0===p||w!==f.depth||y!==f.state||(C?C.groups.length:0)!==S)continue;throw createError(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(N))}let e=null;if(isString(E)&&0===E.indexOf("@brackets")){const o=E.substr("@brackets".length),s=findBracket(this._lexer,x);if(!s)throw createError(this._lexer,"@brackets token returned but no bracket defined as: "+x);e=sanitize(s.token+o)}else{const o=""===E?"":E+this._lexer.tokenPostfix;e=sanitize(o)}s<u&&d.emit(s+l,e)}if(null!==D)return computeNewStateForEmbeddedLanguage(D)}}return MonarchLineStateFactory.create(f,m)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new EmbeddedLanguageData(e,ue.TJ);e!==this._languageId&&(ne.RW.getOrCreate(e),this._embeddedLanguages[e]=!0);const o=ne.RW.get(e);return new EmbeddedLanguageData(e,o?o.getInitialState():ue.TJ)}}function findBracket(e,o){if(!o)return null;o=fixCase(e,o);const s=e.brackets;for(const l of s){if(l.open===o)return{token:l.token,bracketType:1};if(l.close===o)return{token:l.token,bracketType:-1}}return null}var Ke,colorizer_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const je=null===(Ke=window.trustedTypes)||void 0===Ke?void 0:Ke.createPolicy("standaloneColorizer",{createHTML:e=>e});class Colorizer{static colorizeElement(e,o,s,l){l=l||{};const d=l.theme||"vs",u=l.mimeType||s.getAttribute("lang")||s.getAttribute("data-lang");if(!u)return console.error("Mode not detected"),Promise.resolve();const g=o.getLanguageIdByMimeType(u)||u;e.setTheme(d);const p=s.firstChild?s.firstChild.nodeValue:"";s.className+=" "+d;const render=e=>{var o;const l=null!==(o=null===je||void 0===je?void 0:je.createHTML(e))&&void 0!==o?o:e;s.innerHTML=l};return this.colorize(o,p||"",g,l).then(render,(e=>console.error(e)))}static colorize(e,o,s,l){return colorizer_awaiter(this,void 0,void 0,(function*(){const d=e.languageIdCodec;let u=4;l&&"number"===typeof l.tabSize&&(u=l.tabSize),oe.uS(o)&&(o=o.substr(1));const g=oe.uq(o);if(!e.isRegisteredLanguageId(s))return _fakeColorize(g,u,d);const p=yield ne.RW.getOrCreate(s);return p?_colorize(g,u,p,d):_fakeColorize(g,u,d)}))}static colorizeLine(e,o,s,l,d=4){const u=ze.wA.isBasicASCII(e,o),g=ze.wA.containsRTL(e,u,s),p=(0,He.tF)(new He.IJ(!1,!0,e,!1,u,g,0,l,[],d,0,0,0,0,-1,"none",!1,!1,null));return p.html}static colorizeModelLine(e,o,s=4){const l=e.getLineContent(o);e.forceTokenization(o);const d=e.getLineTokens(o),u=d.inflate();return this.colorizeLine(l,e.mightContainNonBasicASCII(),e.mightContainRTL(),u,s)}}function _colorize(e,o,s,l){return new Promise(((d,u)=>{const execute=()=>{const g=_actualColorize(e,o,s,l);if(s instanceof MonarchTokenizer){const e=s.getLoadStatus();if(!1===e.loaded)return void e.promise.then(execute,u)}d(g)};execute()}))}function _fakeColorize(e,o,s){let l=[];const d=16793600,u=new Uint32Array(2);u[0]=0,u[1]=d;for(let g=0,p=e.length;g<p;g++){const d=e[g];u[0]=d.length;const p=new Ve.A(u,d,s),m=ze.wA.isBasicASCII(d,!0),f=ze.wA.containsRTL(d,m,!0),_=(0,He.tF)(new He.IJ(!1,!0,d,!1,m,f,0,p,[],o,0,0,0,0,-1,"none",!1,!1,null));l=l.concat(_.html),l.push("<br/>")}return l.join("")}function _actualColorize(e,o,s,l){let d=[],u=s.getInitialState();for(let g=0,p=e.length;g<p;g++){const p=e[g],m=s.tokenizeEncoded(p,!0,u);Ve.A.convertToEndOffset(m.tokens,p.length);const f=new Ve.A(m.tokens,p,l),_=ze.wA.isBasicASCII(p,!0),C=ze.wA.containsRTL(p,_,!0),b=(0,He.tF)(new He.IJ(!1,!0,p,!1,_,C,0,f.inflate(),[],o,0,0,0,0,-1,"none",!1,!1,null));d=d.concat(b.html),d.push("<br/>"),u=m.endState}return d.join("")}var $e=s(5152),Ge=s(9182),qe=s(4869),Qe=s(653),Ze=s(4319),Ye=s(5321),Je=s(6663),Xe=s(7781),abstractCodeEditorService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},abstractCodeEditorService_param=function(e,o){return function(s,l){o(s,l,e)}};let et=class AbstractCodeEditorService extends fe.JT{constructor(e){super(),this._themeService=e,this._onCodeEditorAdd=this._register(new Y.Q5),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Y.Q5),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new Y.Q5),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new Y.Q5),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map((e=>this._codeEditors[e]))}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map((e=>this._diffEditors[e]))}getFocusedCodeEditor(){let e=null;const o=this.listCodeEditors();for(const s of o){if(s.hasTextFocus())return s;s.hasWidgetFocus()&&(e=s)}return e}removeDecorationType(e){const o=this._decorationOptionProviders.get(e);o&&(o.refCount--,o.refCount<=0&&(this._decorationOptionProviders.delete(e),o.dispose(),this.listCodeEditors().forEach((o=>o.removeDecorations(e)))))}setModelProperty(e,o,s){const l=e.toString();let d;this._modelProperties.has(l)?d=this._modelProperties.get(l):(d=new Map,this._modelProperties.set(l,d)),d.set(o,s)}getModelProperty(e,o){const s=e.toString();if(this._modelProperties.has(s)){const e=this._modelProperties.get(s);return e.get(o)}}};et=abstractCodeEditorService_decorate([abstractCodeEditorService_param(0,Xe.XE)],et);var tt=s(8819),it=s(5026),standaloneCodeEditorService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},standaloneCodeEditorService_param=function(e,o){return function(s,l){o(s,l,e)}};let nt=class StandaloneCodeEditorService extends et{constructor(e,o){super(o),this.onCodeEditorAdd((()=>this._checkContextKey())),this.onCodeEditorRemove((()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const o of this.listCodeEditors())if(!o.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,o,s){return o?Promise.resolve(this.doOpenEditor(o,e)):Promise.resolve(null)}doOpenEditor(e,o){const s=this.findModel(e,o.resource);if(!s){if(o.resource){const s=o.resource.scheme;if(s===Je.lg.http||s===Je.lg.https)return(0,Ye.V3)(o.resource.toString()),e}return null}const l=o.options?o.options.selection:null;if(l)if("number"===typeof l.endLineNumber&&"number"===typeof l.endColumn)e.setSelection(l),e.revealRangeInCenter(l,1);else{const o={lineNumber:l.startLineNumber,column:l.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,o){const s=e.getModel();return s&&s.uri.toString()!==o.toString()?null:s}};nt=standaloneCodeEditorService_decorate([standaloneCodeEditorService_param(0,tt.i6),standaloneCodeEditorService_param(1,Xe.XE)],nt),(0,it.z)(re.$,nt);var ot=s(2065);const st=(0,ot.yh)("layoutService");var standaloneLayoutService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},standaloneLayoutService_param=function(e,o){return function(s,l){o(s,l,e)}};let rt=class StandaloneLayoutService{constructor(e){this._codeEditorService=e,this.onDidLayout=Y.ju.None}get dimension(){return this._dimension||(this._dimension=Ye.D6(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;null===(e=this._codeEditorService.getFocusedCodeEditor())||void 0===e||e.focus()}};rt=standaloneLayoutService_decorate([standaloneLayoutService_param(0,re.$)],rt);let at=class EditorScopedLayoutService extends rt{constructor(e,o){super(o),this._container=e}get hasContainer(){return!1}get container(){return this._container}};at=standaloneLayoutService_decorate([standaloneLayoutService_param(1,re.$)],at),(0,it.z)(st,rt);var lt=s(4603),ct=s(3580),dt=s(8820),ht=s(9422),ut=s(4862),undoRedoService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},undoRedoService_param=function(e,o){return function(s,l){o(s,l,e)}},undoRedoService_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const gt=!1;function getResourceLabel(e){return e.scheme===Je.lg.file?e.fsPath:e.path}let pt=0;class ResourceStackElement{constructor(e,o,s,l,d,u,g){this.id=++pt,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=o,this.strResource=s,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=l,this.groupOrder=d,this.sourceId=u,this.sourceOrder=g,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class ResourceReasonPair{constructor(e,o){this.resourceLabel=e,this.reason=o}}class RemovedResources{constructor(){this.elements=new Map}createMessage(){const e=[],o=[];for(const[,l]of this.elements){const s=0===l.reason?e:o;s.push(l.resourceLabel)}let s=[];return e.length>0&&s.push(ct.N({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),o.length>0&&s.push(ct.N({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",o.join(", "))),s.join("\n")}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,o){this.elements.set(e,o)}delete(e){return this.elements.delete(e)}}class WorkspaceStackElement{constructor(e,o,s,l,d,u,g){this.id=++pt,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=o,this.strResources=s,this.groupId=l,this.groupOrder=d,this.sourceId=u,this.sourceOrder=g,this.removedResources=null,this.invalidatedResources=null}canSplit(){return"function"===typeof this.actual.split}removeResource(e,o,s){this.removedResources||(this.removedResources=new RemovedResources),this.removedResources.has(o)||this.removedResources.set(o,new ResourceReasonPair(e,s))}setValid(e,o,s){s?this.invalidatedResources&&(this.invalidatedResources.delete(o),0===this.invalidatedResources.size&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new RemovedResources),this.invalidatedResources.has(o)||this.invalidatedResources.set(o,new ResourceReasonPair(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class ResourceEditStack{constructor(e,o){this.resourceLabel=e,this.strResource=o,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let o=0;o<this._past.length;o++)e.push(`   * [UNDO] ${this._past[o]}`);for(let o=this._future.length-1;o>=0;o--)e.push(`   * [REDO] ${this._future[o]}`);return e.join("\n")}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,o){1===e.type?e.setValid(this.resourceLabel,this.strResource,o):e.setValid(o)}setElementsValidFlag(e,o){for(const s of this._past)o(s.actual)&&this._setElementValidFlag(s,e);for(const s of this._future)o(s.actual)&&this._setElementValidFlag(s,e)}pushElement(e){for(const o of this._future)1===o.type&&o.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const o=[];for(let s=0,l=this._past.length;s<l;s++)o.push(this._past[s].id);for(let s=this._future.length-1;s>=0;s--)o.push(this._future[s].id);return new ut.YO(e,o)}restoreSnapshot(e){const o=e.elements.length;let s=!0,l=0,d=-1;for(let g=0,p=this._past.length;g<p;g++,l++){const u=this._past[g];s&&(l>=o||u.id!==e.elements[l])&&(s=!1,d=0),s||1!==u.type||u.removeResource(this.resourceLabel,this.strResource,0)}let u=-1;for(let g=this._future.length-1;g>=0;g--,l++){const d=this._future[g];s&&(l>=o||d.id!==e.elements[l])&&(s=!1,u=g),s||1!==d.type||d.removeResource(this.resourceLabel,this.strResource,0)}-1!==d&&(this._past=this._past.slice(0,d)),-1!==u&&(this._future=this._future.slice(u+1)),this.versionId++}getElements(){const e=[],o=[];for(const s of this._past)e.push(s.actual);for(const s of this._future)o.push(s.actual);return{past:e,future:o}}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,o){for(let s=this._past.length-1;s>=0;s--)if(this._past[s]===e){o.has(this.strResource)?this._past[s]=o.get(this.strResource):this._past.splice(s,1);break}this.versionId++}splitFutureWorkspaceElement(e,o){for(let s=this._future.length-1;s>=0;s--)if(this._future[s]===e){o.has(this.strResource)?this._future[s]=o.get(this.strResource):this._future.splice(s,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class EditStackSnapshot{constructor(e){this.editStacks=e,this._versionIds=[];for(let o=0,s=this.editStacks.length;o<s;o++)this._versionIds[o]=this.editStacks[o].versionId}isValid(){for(let e=0,o=this.editStacks.length;e<o;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const mt=new ResourceEditStack("","");mt.locked=!0;let ft=class UndoRedoService{constructor(e,o){this._dialogService=e,this._notificationService=o,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const o of this._uriComparisonKeyComputers)if(o[0]===e.scheme)return o[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let o=[];for(const s of this._editStacks)o.push(s[1].toString());console.log(o.join("\n"))}pushElement(e,o=ut.Xt.None,s=ut.gJ.None){if(0===e.type){const l=getResourceLabel(e.resource),d=this.getUriComparisonKey(e.resource);this._pushElement(new ResourceStackElement(e,l,d,o.id,o.nextOrder(),s.id,s.nextOrder()))}else{const l=new Set,d=[],u=[];for(const o of e.resources){const e=getResourceLabel(o),s=this.getUriComparisonKey(o);l.has(s)||(l.add(s),d.push(e),u.push(s))}1===d.length?this._pushElement(new ResourceStackElement(e,d[0],u[0],o.id,o.nextOrder(),s.id,s.nextOrder())):this._pushElement(new WorkspaceStackElement(e,d,u,o.id,o.nextOrder(),s.id,s.nextOrder()))}gt&&this._print("pushElement")}_pushElement(e){for(let o=0,s=e.strResources.length;o<s;o++){const s=e.resourceLabels[o],l=e.strResources[o];let d;this._editStacks.has(l)?d=this._editStacks.get(l):(d=new ResourceEditStack(s,l),this._editStacks.set(l,d)),d.pushElement(e)}}getLastElement(e){const o=this.getUriComparisonKey(e);if(this._editStacks.has(o)){const e=this._editStacks.get(o);if(e.hasFutureElements())return null;const s=e.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,o){const s=e.actual.split(),l=new Map;for(const d of s){const e=getResourceLabel(d.resource),o=this.getUriComparisonKey(d.resource),s=new ResourceStackElement(d,e,o,0,0,0,0);l.set(s.strResource,s)}for(const d of e.strResources){if(o&&o.has(d))continue;const s=this._editStacks.get(d);s.splitPastWorkspaceElement(e,l)}}_splitFutureWorkspaceElement(e,o){const s=e.actual.split(),l=new Map;for(const d of s){const e=getResourceLabel(d.resource),o=this.getUriComparisonKey(d.resource),s=new ResourceStackElement(d,e,o,0,0,0,0);l.set(s.strResource,s)}for(const d of e.strResources){if(o&&o.has(d))continue;const s=this._editStacks.get(d);s.splitFutureWorkspaceElement(e,l)}}removeElements(e){const o="string"===typeof e?e:this.getUriComparisonKey(e);if(this._editStacks.has(o)){const e=this._editStacks.get(o);e.dispose(),this._editStacks.delete(o)}gt&&this._print("removeElements")}setElementsValidFlag(e,o,s){const l=this.getUriComparisonKey(e);if(this._editStacks.has(l)){const e=this._editStacks.get(l);e.setElementsValidFlag(o,s)}gt&&this._print("setElementsValidFlag")}createSnapshot(e){const o=this.getUriComparisonKey(e);if(this._editStacks.has(o)){const s=this._editStacks.get(o);return s.createSnapshot(e)}return new ut.YO(e,[])}restoreSnapshot(e){const o=this.getUriComparisonKey(e.resource);if(this._editStacks.has(o)){const s=this._editStacks.get(o);s.restoreSnapshot(e),s.hasPastElements()||s.hasFutureElements()||(s.dispose(),this._editStacks.delete(o))}gt&&this._print("restoreSnapshot")}getElements(e){const o=this.getUriComparisonKey(e);if(this._editStacks.has(o)){const e=this._editStacks.get(o);return e.getElements()}return{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let o=null,s=null;for(const[l,d]of this._editStacks){const u=d.getClosestPastElement();u&&(u.sourceId===e&&(!o||u.sourceOrder>o.sourceOrder)&&(o=u,s=l))}return[o,s]}canUndo(e){if(e instanceof ut.gJ){const[,o]=this._findClosestUndoElementWithSource(e.id);return!!o}const o=this.getUriComparisonKey(e);if(this._editStacks.has(o)){const e=this._editStacks.get(o);return e.hasPastElements()}return!1}_onError(e,o){(0,_e.dL)(e);for(const s of o.strResources)this.removeElements(s);this._notificationService.error(e)}_acquireLocks(e){for(const o of e.editStacks)if(o.locked)throw new Error("Cannot acquire edit stack lock");for(const o of e.editStacks)o.locked=!0;return()=>{for(const o of e.editStacks)o.locked=!1}}_safeInvokeWithLocks(e,o,s,l,d){const u=this._acquireLocks(s);let g;try{g=o()}catch(p){return u(),l.dispose(),this._onError(p,e)}return g?g.then((()=>(u(),l.dispose(),d())),(o=>(u(),l.dispose(),this._onError(o,e)))):(u(),l.dispose(),d())}_invokeWorkspacePrepare(e){return undoRedoService_awaiter(this,void 0,void 0,(function*(){if("undefined"===typeof e.actual.prepareUndoRedo)return fe.JT.None;const o=e.actual.prepareUndoRedo();return"undefined"===typeof o?fe.JT.None:o}))}_invokeResourcePrepare(e,o){if(1!==e.actual.type||"undefined"===typeof e.actual.prepareUndoRedo)return o(fe.JT.None);const s=e.actual.prepareUndoRedo();return s?(0,fe.Wf)(s)?o(s):s.then((e=>o(e))):o(fe.JT.None)}_getAffectedEditStacks(e){const o=[];for(const s of e.strResources)o.push(this._editStacks.get(s)||mt);return new EditStackSnapshot(o)}_tryToSplitAndUndo(e,o,s,l){if(o.canSplit())return this._splitPastWorkspaceElement(o,s),this._notificationService.warn(l),new WorkspaceVerificationError(this._undo(e,0,!0));for(const d of o.strResources)this.removeElements(d);return this._notificationService.warn(l),new WorkspaceVerificationError}_checkWorkspaceUndo(e,o,s,l){if(o.removedResources)return this._tryToSplitAndUndo(e,o,o.removedResources,ct.N({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",o.label,o.removedResources.createMessage()));if(l&&o.invalidatedResources)return this._tryToSplitAndUndo(e,o,o.invalidatedResources,ct.N({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",o.label,o.invalidatedResources.createMessage()));const d=[];for(const g of s.editStacks)g.getClosestPastElement()!==o&&d.push(g.resourceLabel);if(d.length>0)return this._tryToSplitAndUndo(e,o,null,ct.N({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",o.label,d.join(", ")));const u=[];for(const g of s.editStacks)g.locked&&u.push(g.resourceLabel);return u.length>0?this._tryToSplitAndUndo(e,o,null,ct.N({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",o.label,u.join(", "))):s.isValid()?null:this._tryToSplitAndUndo(e,o,null,ct.N({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",o.label))}_workspaceUndo(e,o,s){const l=this._getAffectedEditStacks(o),d=this._checkWorkspaceUndo(e,o,l,!1);return d?d.returnValue:this._confirmAndExecuteWorkspaceUndo(e,o,l,s)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,o]of this._editStacks){const s=o.getClosestPastElement();if(s){if(s===e){const s=o.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(s.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,o,s,l){return undoRedoService_awaiter(this,void 0,void 0,(function*(){if(o.canSplit()&&!this._isPartOfUndoGroup(o)){const d=yield this._dialogService.show(lt.Z.Info,ct.N("confirmWorkspace","Would you like to undo '{0}' across all files?",o.label),[ct.N({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",s.editStacks.length),ct.N("nok","Undo this File"),ct.N("cancel","Cancel")],{cancelId:2});if(2===d.choice)return;if(1===d.choice)return this._splitPastWorkspaceElement(o,null),this._undo(e,0,!0);const u=this._checkWorkspaceUndo(e,o,s,!1);if(u)return u.returnValue;l=!0}let d;try{d=yield this._invokeWorkspacePrepare(o)}catch(g){return this._onError(g,o)}const u=this._checkWorkspaceUndo(e,o,s,!0);if(u)return d.dispose(),u.returnValue;for(const e of s.editStacks)e.moveBackward(o);return this._safeInvokeWithLocks(o,(()=>o.actual.undo()),s,d,(()=>this._continueUndoInGroup(o.groupId,l)))}))}_resourceUndo(e,o,s){if(o.isValid){if(!e.locked)return this._invokeResourcePrepare(o,(l=>(e.moveBackward(o),this._safeInvokeWithLocks(o,(()=>o.actual.undo()),new EditStackSnapshot([e]),l,(()=>this._continueUndoInGroup(o.groupId,s))))));{const e=ct.N({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",o.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let o=null,s=null;for(const[l,d]of this._editStacks){const u=d.getClosestPastElement();u&&(u.groupId===e&&(!o||u.groupOrder>o.groupOrder)&&(o=u,s=l))}return[o,s]}_continueUndoInGroup(e,o){if(!e)return;const[,s]=this._findClosestUndoElementInGroup(e);return s?this._undo(s,0,o):void 0}undo(e){if(e instanceof ut.gJ){const[,o]=this._findClosestUndoElementWithSource(e.id);return o?this._undo(o,e.id,!1):void 0}return"string"===typeof e?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,o=0,s){if(!this._editStacks.has(e))return;const l=this._editStacks.get(e),d=l.getClosestPastElement();if(!d)return;if(d.groupId){const[e,l]=this._findClosestUndoElementInGroup(d.groupId);if(d!==e&&l)return this._undo(l,o,s)}const u=d.sourceId!==o||d.confirmBeforeUndo;if(u&&!s)return this._confirmAndContinueUndo(e,o,d);try{return 1===d.type?this._workspaceUndo(e,d,s):this._resourceUndo(l,d,s)}finally{gt&&this._print("undo")}}_confirmAndContinueUndo(e,o,s){return undoRedoService_awaiter(this,void 0,void 0,(function*(){const l=yield this._dialogService.show(lt.Z.Info,ct.N("confirmDifferentSource","Would you like to undo '{0}'?",s.label),[ct.N("confirmDifferentSource.yes","Yes"),ct.N("confirmDifferentSource.no","No")],{cancelId:1});if(1!==l.choice)return this._undo(e,o,!0)}))}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let o=null,s=null;for(const[l,d]of this._editStacks){const u=d.getClosestFutureElement();u&&(u.sourceId===e&&(!o||u.sourceOrder<o.sourceOrder)&&(o=u,s=l))}return[o,s]}canRedo(e){if(e instanceof ut.gJ){const[,o]=this._findClosestRedoElementWithSource(e.id);return!!o}const o=this.getUriComparisonKey(e);if(this._editStacks.has(o)){const e=this._editStacks.get(o);return e.hasFutureElements()}return!1}_tryToSplitAndRedo(e,o,s,l){if(o.canSplit())return this._splitFutureWorkspaceElement(o,s),this._notificationService.warn(l),new WorkspaceVerificationError(this._redo(e));for(const d of o.strResources)this.removeElements(d);return this._notificationService.warn(l),new WorkspaceVerificationError}_checkWorkspaceRedo(e,o,s,l){if(o.removedResources)return this._tryToSplitAndRedo(e,o,o.removedResources,ct.N({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",o.label,o.removedResources.createMessage()));if(l&&o.invalidatedResources)return this._tryToSplitAndRedo(e,o,o.invalidatedResources,ct.N({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",o.label,o.invalidatedResources.createMessage()));const d=[];for(const g of s.editStacks)g.getClosestFutureElement()!==o&&d.push(g.resourceLabel);if(d.length>0)return this._tryToSplitAndRedo(e,o,null,ct.N({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",o.label,d.join(", ")));const u=[];for(const g of s.editStacks)g.locked&&u.push(g.resourceLabel);return u.length>0?this._tryToSplitAndRedo(e,o,null,ct.N({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",o.label,u.join(", "))):s.isValid()?null:this._tryToSplitAndRedo(e,o,null,ct.N({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",o.label))}_workspaceRedo(e,o){const s=this._getAffectedEditStacks(o),l=this._checkWorkspaceRedo(e,o,s,!1);return l?l.returnValue:this._executeWorkspaceRedo(e,o,s)}_executeWorkspaceRedo(e,o,s){return undoRedoService_awaiter(this,void 0,void 0,(function*(){let l;try{l=yield this._invokeWorkspacePrepare(o)}catch(u){return this._onError(u,o)}const d=this._checkWorkspaceRedo(e,o,s,!0);if(d)return l.dispose(),d.returnValue;for(const e of s.editStacks)e.moveForward(o);return this._safeInvokeWithLocks(o,(()=>o.actual.redo()),s,l,(()=>this._continueRedoInGroup(o.groupId)))}))}_resourceRedo(e,o){if(o.isValid){if(!e.locked)return this._invokeResourcePrepare(o,(s=>(e.moveForward(o),this._safeInvokeWithLocks(o,(()=>o.actual.redo()),new EditStackSnapshot([e]),s,(()=>this._continueRedoInGroup(o.groupId))))));{const e=ct.N({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",o.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let o=null,s=null;for(const[l,d]of this._editStacks){const u=d.getClosestFutureElement();u&&(u.groupId===e&&(!o||u.groupOrder<o.groupOrder)&&(o=u,s=l))}return[o,s]}_continueRedoInGroup(e){if(!e)return;const[,o]=this._findClosestRedoElementInGroup(e);return o?this._redo(o):void 0}redo(e){if(e instanceof ut.gJ){const[,o]=this._findClosestRedoElementWithSource(e.id);return o?this._redo(o):void 0}return"string"===typeof e?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const o=this._editStacks.get(e),s=o.getClosestFutureElement();if(s){if(s.groupId){const[e,o]=this._findClosestRedoElementInGroup(s.groupId);if(s!==e&&o)return this._redo(o)}try{return 1===s.type?this._workspaceRedo(e,s):this._resourceRedo(o,s)}finally{gt&&this._print("redo")}}}};ft=undoRedoService_decorate([undoRedoService_param(0,dt.S),undoRedoService_param(1,ht.lT)],ft);class WorkspaceVerificationError{constructor(e){this.returnValue=e}}(0,it.z)(ut.tJ,ft);s(8191);var _t=s(9069),Ct=s(8313),vt=s(6007),bt=s(2075),wt=s(3193),St=s(9872);const yt=Object.freeze({id:"editor",order:5,type:"object",title:ct.N("editorConfigurationTitle","Editor"),scope:5}),Lt=Object.assign(Object.assign({},yt),{properties:{"editor.tabSize":{type:"number",default:bt.D.tabSize,minimum:1,markdownDescription:ct.N("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:bt.D.insertSpaces,markdownDescription:ct.N("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:bt.D.detectIndentation,markdownDescription:ct.N("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:bt.D.trimAutoWhitespace,description:ct.N("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:bt.D.largeFileOptimizations,description:ct.N("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:ct.N("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[ct.N("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),ct.N("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),ct.N("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:ct.N("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[ct.N("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),ct.N("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),ct.N("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:ct.N("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:ct.N("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:ct.N("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:ct.N("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:ct.N("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:ct.N("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:ct.N("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:ct.N("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:ct.N("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:ct.N("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:ct.N("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:ct.N("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:ct.N("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:ct.N("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:ct.N("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[ct.N("wordWrap.off","Lines will never wrap."),ct.N("wordWrap.on","Lines will wrap at the viewport width."),ct.N("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function isConfigurationPropertySchema(e){return"undefined"!==typeof e.type||"undefined"!==typeof e.anyOf}for(const Ao of Q.Bc){const e=Ao.schema;if("undefined"!==typeof e)if(isConfigurationPropertySchema(e))Lt.properties[`editor.${Ao.name}`]=e;else for(const o in e)Object.hasOwnProperty.call(e,o)&&(Lt.properties[o]=e[o])}let xt=null;function getEditorConfigurationKeys(){return null===xt&&(xt=Object.create(null),Object.keys(Lt.properties).forEach((e=>{xt[e]=!0}))),xt}function isEditorConfigurationKey(e){const o=getEditorConfigurationKeys();return o[`editor.${e}`]||!1}function isDiffEditorConfigurationKey(e){const o=getEditorConfigurationKeys();return o[`diffEditor.${e}`]||!1}const kt=St.B.as(wt.IP.Configuration);kt.registerConfiguration(Lt);var Nt=s(9386),Dt=s(8216),Et=s(4565),Tt=s(3108),It=s(3702),At=s(6248);class ConfigurationModel{constructor(e={},o=[],s=[]){this._contents=e,this._keys=o,this._overrides=s,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?(0,Tt.Mt)(this.contents,e):this.contents}getOverrideValue(e,o){const s=this.getContentsForOverrideIdentifer(o);return s?e?(0,Tt.Mt)(s,e):s:void 0}override(e){let o=this.overrideConfigurations.get(e);return o||(o=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,o)),o}merge(...e){const o=At.I8(this.contents),s=At.I8(this.overrides),l=[...this.keys];for(const d of e){this.mergeContents(o,d.contents);for(const e of d.overrides){const[o]=s.filter((o=>Re.fS(o.identifiers,e.identifiers)));o?(this.mergeContents(o.contents,e.contents),o.keys.push(...e.keys),o.keys=Re.EB(o.keys)):s.push(At.I8(e))}for(const e of d.keys)-1===l.indexOf(e)&&l.push(e)}return new ConfigurationModel(o,l,s)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const o=this.getContentsForOverrideIdentifer(e);if(!o||"object"!==typeof o||!Object.keys(o).length)return this;let s={};for(const l of Re.EB([...Object.keys(this.contents),...Object.keys(o)])){let e=this.contents[l],d=o[l];d&&("object"===typeof e&&"object"===typeof d?(e=At.I8(e),this.mergeContents(e,d)):e=d),s[l]=e}return new ConfigurationModel(s,this.keys,this.overrides)}mergeContents(e,o){for(const s of Object.keys(o))s in e&&ve.Kn(e[s])&&ve.Kn(o[s])?this.mergeContents(e[s],o[s]):e[s]=At.I8(o[s])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?At._A(e):e}getContentsForOverrideIdentifer(e){let o=null,s=null;const mergeContents=e=>{e&&(s?this.mergeContents(s,e):s=At.I8(e))};for(const l of this.overrides)Re.fS(l.identifiers,[e])?o=l.contents:l.identifiers.includes(e)&&mergeContents(l.contents);return mergeContents(o),s}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,o){this.addKey(e),(0,Tt.KV)(this.contents,e,o,(e=>{throw new Error(e)}))}removeValue(e){this.removeKey(e)&&(0,Tt.xL)(this.contents,e)}addKey(e){let o=this.keys.length;for(let s=0;s<o;s++)0===e.indexOf(this.keys[s])&&(o=s);this.keys.splice(o,1,e)}removeKey(e){let o=this.keys.indexOf(e);return-1!==o&&(this.keys.splice(o,1),!0)}}class DefaultConfigurationModel extends ConfigurationModel{constructor(e={}){const o=St.B.as(wt.IP.Configuration).getConfigurationProperties(),s=Object.keys(o),l=Object.create(null),d=[];for(const u in o){const s=e[u],d=void 0!==s?s:o[u].default;(0,Tt.KV)(l,u,d,(e=>console.error(`Conflict in default settings: ${e}`)))}for(const u of Object.keys(l))wt.eU.test(u)&&d.push({identifiers:(0,wt.ny)(u),keys:Object.keys(l[u]),contents:(0,Tt.Od)(l[u],(e=>console.error(`Conflict in default settings file: ${e}`)))});super(l,s,d)}}class Configuration{constructor(e,o,s=new ConfigurationModel,l=new ConfigurationModel,d=new It.Y9,u=new ConfigurationModel,g=new It.Y9,p=!0){this._defaultConfiguration=e,this._localUserConfiguration=o,this._remoteUserConfiguration=s,this._workspaceConfiguration=l,this._folderConfigurations=d,this._memoryConfiguration=u,this._memoryConfigurationByResource=g,this._freeze=p,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new It.Y9,this._userConfiguration=null}getValue(e,o,s){const l=this.getConsolidateConfigurationModel(o,s);return l.getValue(e)}updateValue(e,o,s={}){let l;s.resource?(l=this._memoryConfigurationByResource.get(s.resource),l||(l=new ConfigurationModel,this._memoryConfigurationByResource.set(s.resource,l))):l=this._memoryConfiguration,void 0===o?l.removeValue(e):l.setValue(e,o),s.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,o,s){const l=this.getConsolidateConfigurationModel(o,s),d=this.getFolderConfigurationModelForResource(o.resource,s),u=o.resource&&this._memoryConfigurationByResource.get(o.resource)||this._memoryConfiguration,g=o.overrideIdentifier?this._defaultConfiguration.freeze().override(o.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),p=o.overrideIdentifier?this.userConfiguration.freeze().override(o.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),m=o.overrideIdentifier?this.localUserConfiguration.freeze().override(o.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),f=o.overrideIdentifier?this.remoteUserConfiguration.freeze().override(o.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),_=s?o.overrideIdentifier?this._workspaceConfiguration.freeze().override(o.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,C=d?o.overrideIdentifier?d.freeze().override(o.overrideIdentifier).getValue(e):d.freeze().getValue(e):void 0,b=o.overrideIdentifier?u.override(o.overrideIdentifier).getValue(e):u.getValue(e),w=l.getValue(e),S=Re.EB(Re.xH(l.overrides.map((e=>e.identifiers)))).filter((o=>void 0!==l.getOverrideValue(e,o)));return{defaultValue:g,userValue:p,userLocalValue:m,userRemoteValue:f,workspaceValue:_,workspaceFolderValue:C,memoryValue:b,value:w,default:void 0!==g?{value:this._defaultConfiguration.freeze().getValue(e),override:o.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,o.overrideIdentifier):void 0}:void 0,user:void 0!==p?{value:this.userConfiguration.freeze().getValue(e),override:o.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,o.overrideIdentifier):void 0}:void 0,userLocal:void 0!==m?{value:this.localUserConfiguration.freeze().getValue(e),override:o.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,o.overrideIdentifier):void 0}:void 0,userRemote:void 0!==f?{value:this.remoteUserConfiguration.freeze().getValue(e),override:o.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,o.overrideIdentifier):void 0}:void 0,workspace:void 0!==_?{value:this._workspaceConfiguration.freeze().getValue(e),override:o.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,o.overrideIdentifier):void 0}:void 0,workspaceFolder:void 0!==C?{value:null===d||void 0===d?void 0:d.freeze().getValue(e),override:o.overrideIdentifier?null===d||void 0===d?void 0:d.freeze().getOverrideValue(e,o.overrideIdentifier):void 0}:void 0,memory:void 0!==b?{value:u.getValue(e),override:o.overrideIdentifier?u.getOverrideValue(e,o.overrideIdentifier):void 0}:void 0,overrideIdentifiers:S.length?S:void 0}}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidateConfigurationModel(e,o){let s=this.getConsolidatedConfigurationModelForResource(e,o);return e.overrideIdentifier?s.override(e.overrideIdentifier):s}getConsolidatedConfigurationModelForResource({resource:e},o){let s=this.getWorkspaceConsolidatedConfiguration();if(o&&e){const l=o.getFolder(e);l&&(s=this.getFolderConsolidatedConfiguration(l.uri)||s);const d=this._memoryConfigurationByResource.get(e);d&&(s=s.merge(d))}return s}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let o=this._foldersConsolidatedConfigurations.get(e);if(!o){const s=this.getWorkspaceConsolidatedConfiguration(),l=this._folderConfigurations.get(e);l?(o=s.merge(l),this._freeze&&(o=o.freeze()),this._foldersConsolidatedConfigurations.set(e,o)):o=s}return o}getFolderConfigurationModelForResource(e,o){if(o&&e){const s=o.getFolder(e);if(s)return this._folderConfigurations.get(s.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce(((e,o)=>{const{contents:s,overrides:l,keys:d}=this._folderConfigurations.get(o);return e.push([o,{contents:s,overrides:l,keys:d}]),e}),[])}}static parse(e){const o=this.parseConfigurationModel(e.defaults),s=this.parseConfigurationModel(e.user),l=this.parseConfigurationModel(e.workspace),d=e.folders.reduce(((e,o)=>(e.set(X.o.revive(o[0]),this.parseConfigurationModel(o[1])),e)),new It.Y9);return new Configuration(o,s,new ConfigurationModel,l,d,new ConfigurationModel,new It.Y9,!1)}static parseConfigurationModel(e){return new ConfigurationModel(e.contents,e.keys,e.overrides).freeze()}}class ConfigurationChangeEvent{constructor(e,o,s,l){this.change=e,this.previous=o,this.currentConfiguraiton=s,this.currentWorkspace=l,this._previousConfiguration=void 0;const d=new Set;e.keys.forEach((e=>d.add(e))),e.overrides.forEach((([,e])=>e.forEach((e=>d.add(e))))),this.affectedKeys=[...d.values()];const u=new ConfigurationModel;this.affectedKeys.forEach((e=>u.setValue(e,{}))),this.affectedKeysTree=u.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=Configuration.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,o){var s;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(o){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,o,null===(s=this.previous)||void 0===s?void 0:s.workspace):void 0,d=this.currentConfiguraiton.getValue(e,o,this.currentWorkspace);return!At.fS(l,d)}return!0}return!1}doesAffectedKeysTreeContains(e,o){let s,l=(0,Tt.Od)({[o]:!0},(()=>{}));while("object"===typeof l&&(s=Object.keys(l)[0])){if(e=e[s],!e)return!1;l=l[s]}return!0}}const Mt=/^(cursor|delete)/;class AbstractKeybindingService extends fe.JT{constructor(e,o,s,l,d){super(),this._contextKeyService=e,this._commandService=o,this._telemetryService=s,this._notificationService=l,this._logService=d,this._onDidUpdateKeybindings=this._register(new Y.Q5),this._currentChord=null,this._currentChordChecker=new me.zh,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new me._F,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Y.ju.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,o){const s=this._getResolver().lookupPrimaryKeybinding(e,o||this._contextKeyService);if(s)return s.resolvedKeybinding}dispatchEvent(e,o){return this._dispatch(e,o)}softDispatch(e,o){const s=this.resolveKeyboardEvent(e);if(s.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[l]=s.getDispatchParts();if(null===l)return null;const d=this._contextKeyService.getContext(o),u=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(d,u,l)}_enterChordMode(e,o){this._currentChord={keypress:e,label:o},this._currentChordStatusMessage=this._notificationService.status(ct.N("first.chord","({0}) was pressed. Waiting for second key of chord...",o));const s=Date.now();this._currentChordChecker.cancelAndSet((()=>{this._documentHasFocus()?Date.now()-s>5e3&&this._leaveChordMode():this._leaveChordMode()}),500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,o){return this._doDispatch(this.resolveKeyboardEvent(e),o,!1)}_singleModifierDispatch(e,o){const s=this.resolveKeyboardEvent(e),[l]=s.getSingleModifierDispatchParts();if(l)return this._ignoreSingleModifiers.has(l)?(this._log(`+ Ignoring single modifier ${l} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,null===this._currentSingleModifier?(this._log(`+ Storing single modifier for possible chord ${l}.`),this._currentSingleModifier=l,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null}),300),!1):l===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${l} ${l}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(s,o,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${l}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[d]=s.getParts();return this._ignoreSingleModifiers=new KeybindingModifierSet(d),null!==this._currentSingleModifier&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,o,s=!1){let l=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let d=null,u=null;if(s){const[o]=e.getSingleModifierDispatchParts();d=o,u=o}else[d]=e.getDispatchParts(),u=this._currentChord?this._currentChord.keypress:null;if(null===d)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),l;const g=this._contextKeyService.getContext(o),p=e.getLabel(),m=this._getResolver().resolve(g,u,d);return this._logService.trace("KeybindingService#dispatch",p,null===m||void 0===m?void 0:m.commandId),m&&m.enterChord?(l=!0,this._enterChordMode(d,p),l):(this._currentChord&&(m&&m.commandId||(this._notificationService.status(ct.N("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,p),{hideAfter:1e4}),l=!0)),this._leaveChordMode(),m&&m.commandId&&(m.bubble||(l=!0),"undefined"===typeof m.commandArgs?this._commandService.executeCommand(m.commandId).then(void 0,(e=>this._notificationService.warn(e))):this._commandService.executeCommand(m.commandId,m.commandArgs).then(void 0,(e=>this._notificationService.warn(e))),Mt.test(m.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:m.commandId,from:"keybinding"})),l)}mightProducePrintableCharacter(e){return!e.ctrlKey&&!e.metaKey&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30)}}class KeybindingModifierSet{constructor(e){this._ctrlKey=!!e&&e.ctrlKey,this._shiftKey=!!e&&e.shiftKey,this._altKey=!!e&&e.altKey,this._metaKey=!!e&&e.metaKey}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}KeybindingModifierSet.EMPTY=new KeybindingModifierSet(null);var Rt=s(1847);class KeybindingResolver{constructor(e,o,s){this._log=s,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const l of e){const e=l.command;e&&"-"!==e.charAt(0)&&this._defaultBoundCommands.set(e,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=KeybindingResolver.handleRemovals([].concat(e).concat(o));for(let l=0,d=this._keybindings.length;l<d;l++){let e=this._keybindings[l];0!==e.keypressParts.length&&(e.when&&0===e.when.type||this._addKeyPress(e.keypressParts[0],e))}}static _isTargetedForRemoval(e,o,s,l){if(o&&e.keypressParts[0]!==o)return!1;if(s&&e.keypressParts[1]!==s)return!1;if(l){if(!e.when)return!1;if(!(0,tt.Fb)(l,e.when))return!1}return!0}static handleRemovals(e){const o=new Map;for(let l=0,d=e.length;l<d;l++){const s=e[l];if(s.command&&"-"===s.command.charAt(0)){const e=s.command.substring(1);o.has(e)?o.get(e).push(s):o.set(e,[s])}}if(0===o.size)return e;const s=[];for(let l=0,d=e.length;l<d;l++){const d=e[l];if(!d.command||0===d.command.length){s.push(d);continue}if("-"===d.command.charAt(0))continue;const u=o.get(d.command);if(!u||!d.isDefault){s.push(d);continue}let g=!1;for(const e of u){const o=e.keypressParts[0],s=e.keypressParts[1],l=e.when;if(this._isTargetedForRemoval(d,o,s,l)){g=!0;break}}g||s.push(d)}return s}_addKeyPress(e,o){const s=this._map.get(e);if("undefined"===typeof s)return this._map.set(e,[o]),void this._addToLookupMap(o);for(let l=s.length-1;l>=0;l--){let e=s[l];if(e.command===o.command)continue;const d=e.keypressParts.length>1,u=o.keypressParts.length>1;d&&u&&e.keypressParts[1]!==o.keypressParts[1]||KeybindingResolver.whenIsEntirelyIncluded(e.when,o.when)&&this._removeFromLookupMap(e)}s.push(o),this._addToLookupMap(o)}_addToLookupMap(e){if(!e.command)return;let o=this._lookupMap.get(e.command);"undefined"===typeof o?(o=[e],this._lookupMap.set(e.command,o)):o.push(e)}_removeFromLookupMap(e){if(!e.command)return;let o=this._lookupMap.get(e.command);if("undefined"!==typeof o)for(let s=0,l=o.length;s<l;s++)if(o[s]===e)return void o.splice(s,1)}static whenIsEntirelyIncluded(e,o){return!o||1===o.type||!(!e||1===e.type)&&(0,tt.K8)(e,o)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,o){const s=this._lookupMap.get(e);if("undefined"===typeof s||0===s.length)return null;if(1===s.length)return s[0];for(let l=s.length-1;l>=0;l--){const e=s[l];if(o.contextMatchesRules(e.when))return e}return s[s.length-1]}resolve(e,o,s){this._log(`| Resolving ${s}${o?` chorded from ${o}`:""}`);let l=null;if(null!==o){const e=this._map.get(o);if("undefined"===typeof e)return this._log("\\ No keybinding entries."),null;l=[];for(let o=0,d=e.length;o<d;o++){let d=e[o];d.keypressParts[1]===s&&l.push(d)}}else{const e=this._map.get(s);if("undefined"===typeof e)return this._log("\\ No keybinding entries."),null;l=e}let d=this._findCommand(e,l);return d?null===o&&d.keypressParts.length>1&&null!==d.keypressParts[1]?(this._log(`\\ From ${l.length} keybinding entries, matched chord, when: ${printWhenExplanation(d.when)}, source: ${printSourceExplanation(d)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${l.length} keybinding entries, matched ${d.command}, when: ${printWhenExplanation(d.when)}, source: ${printSourceExplanation(d)}.`),{enterChord:!1,leaveChord:d.keypressParts.length>1,commandId:d.command,commandArgs:d.commandArgs,bubble:d.bubble}):(this._log(`\\ From ${l.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,o){for(let s=o.length-1;s>=0;s--){let l=o[s];if(KeybindingResolver._contextMatchesRules(e,l.when))return l}return null}static _contextMatchesRules(e,o){return!o||o.evaluate(e)}}function printWhenExplanation(e){return e?`${e.serialize()}`:"no when condition"}function printSourceExplanation(e){return e.extensionId?e.isBuiltinExtension?`built-in extension ${e.extensionId}`:`user extension ${e.extensionId}`:e.isDefault?"built-in":"user"}var Pt=s(9989);class ResolvedKeybindingItem{constructor(e,o,s,l,d,u,g){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?removeElementsAfterNulls(e.getDispatchParts()):[],e&&0===this.keypressParts.length&&(this.keypressParts=removeElementsAfterNulls(e.getSingleModifierDispatchParts())),this.bubble=!!o&&94===o.charCodeAt(0),this.command=this.bubble?o.substr(1):o,this.commandArgs=s,this.when=l,this.isDefault=d,this.extensionId=u,this.isBuiltinExtension=g}}function removeElementsAfterNulls(e){let o=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];if(!l)return o;o.push(l)}return o}var Ot=s(8030);class BaseResolvedKeybinding extends Ct.f1{constructor(e,o){if(super(),0===o.length)throw(0,_e.b1)("parts");this._os=e,this._parts=o}getLabel(){return Ot.xo.toLabel(this._os,this._parts,(e=>this._getLabel(e)))}getAriaLabel(){return Ot.X4.toLabel(this._os,this._parts,(e=>this._getAriaLabel(e)))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:Ot.jC.toLabel(this._os,this._parts,(e=>this._getElectronAccelerator(e)))}isChord(){return this._parts.length>1}getParts(){return this._parts.map((e=>this._getPart(e)))}_getPart(e){return new Ct.BQ(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map((e=>this._getDispatchPart(e)))}getSingleModifierDispatchParts(){return this._parts.map((e=>this._getSingleModifierDispatchPart(e)))}}class USLayoutResolvedKeybinding extends BaseResolvedKeybinding{constructor(e,o){super(o,e.parts)}_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return J.kL.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":J.kL.toString(e.keyCode)}_getElectronAccelerator(e){return J.kL.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return USLayoutResolvedKeybinding.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let o="";return e.ctrlKey&&(o+="ctrl+"),e.shiftKey&&(o+="shift+"),e.altKey&&(o+="alt+"),e.metaKey&&(o+="meta+"),o+=J.kL.toString(e.keyCode),o}_getSingleModifierDispatchPart(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}static _scanCodeToKeyCode(e){const o=J.Vd[e];if(-1!==o)return o;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Ct.QC)return e;const o=this._scanCodeToKeyCode(e.scanCode);return 0===o?null:new Ct.QC(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,o)}static resolveUserBinding(e,o){const s=removeElementsAfterNulls(e.map((e=>this._resolveSimpleUserBinding(e))));return s.length>0?[new USLayoutResolvedKeybinding(new Ct.X_(s),o)]:[]}}var Ft,Bt=s(4349),Wt=s(535),Vt=s(829),Ht=s(382),zt=s(913),Ut=s(3425),Kt=s(5606),jt=s(161),$t=s(1134);function layout(e,o,s){const l=s.mode===Ft.ALIGN?s.offset:s.offset+s.size,d=s.mode===Ft.ALIGN?s.offset+s.size:s.offset;return 0===s.position?o<=e-l?l:o<=d?d-o:Math.max(e-o,0):o<=d?d-o:o<=e-l?l:0}(function(e){e[e["AVOID"]=0]="AVOID",e[e["ALIGN"]=1]="ALIGN"})(Ft||(Ft={}));class ContextView extends fe.JT{constructor(e,o){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=fe.JT.None,this.toDisposeOnSetContainer=fe.JT.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Ye.$(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Ye.Cp(this.view),this.setContainer(e,o),this._register((0,fe.OF)((()=>this.setContainer(null,1))))}setContainer(e,o){var s;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,null===(s=this.shadowRootHostElement)||void 0===s||s.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=1!==o,this.useShadowDOM=3===o,this.useShadowDOM){this.shadowRootHostElement=Ye.$(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent=Gt,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Ye.$("slot"))}else this.container.appendChild(this.view);const s=new fe.SL;ContextView.BUBBLE_UP_EVENTS.forEach((e=>{s.add(Ye.mu(this.container,e,(e=>{this.onDOMEvent(e,!1)})))})),ContextView.BUBBLE_DOWN_EVENTS.forEach((e=>{s.add(Ye.mu(this.container,e,(e=>{this.onDOMEvent(e,!0)}),!0))})),this.toDisposeOnSetContainer=s}}show(e){this.isVisible()&&this.hide(),Ye.PO(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Ye.$Z(this.view),this.toDisposeOnClean=e.render(this.view)||fe.JT.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){this.isVisible()&&(!1!==this.delegate.canRelayout||Ce.gn&&jt.D.pointerEvents?(this.delegate.layout&&this.delegate.layout(),this.doLayout()):this.hide())}doLayout(){if(!this.isVisible())return;let e,o=this.delegate.getAnchor();if(Ye.Re(o)){let s=Ye.i(o);e={top:s.top,left:s.left,width:s.width,height:s.height}}else e={top:o.y,left:o.x,width:o.width||1,height:o.height||2};const s=Ye.w(this.view),l=Ye.wn(this.view),d=this.delegate.anchorPosition||0,u=this.delegate.anchorAlignment||0,g=this.delegate.anchorAxisAlignment||0;let p,m;if(0===g){const o={offset:e.top-window.pageYOffset,size:e.height,position:0===d?0:1},g={offset:e.left,size:e.width,position:0===u?0:1,mode:Ft.ALIGN};p=layout(window.innerHeight,l,o)+window.pageYOffset,$t.e.intersects({start:p,end:p+l},{start:o.offset,end:o.offset+o.size})&&(g.mode=Ft.AVOID),m=layout(window.innerWidth,s,g)}else{const o={offset:e.left,size:e.width,position:0===u?0:1},g={offset:e.top,size:e.height,position:0===d?0:1,mode:Ft.ALIGN};m=layout(window.innerWidth,s,o),$t.e.intersects({start:m,end:m+s},{start:o.offset,end:o.offset+o.size})&&(g.mode=Ft.AVOID),p=layout(window.innerHeight,l,g)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(0===d?"bottom":"top"),this.view.classList.add(0===u?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const f=Ye.i(this.container);this.view.style.top=p-(this.useFixedPosition?Ye.i(this.view).top:f.top)+"px",this.view.style.left=m-(this.useFixedPosition?Ye.i(this.view).left:f.left)+"px",this.view.style.width="initial"}hide(e){const o=this.delegate;this.delegate=null,(null===o||void 0===o?void 0:o.onHide)&&o.onHide(e),this.toDisposeOnClean.dispose(),Ye.Cp(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,o){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):o&&!Ye.jg(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}ContextView.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],ContextView.BUBBLE_DOWN_EVENTS=["click"];let Gt='\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t@font-face {\n\t\tfont-family: "codicon";\n\t\tfont-display: block;\n\t\tsrc: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");\n\t}\n\n\t.codicon[class*=\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n';var contextViewService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},contextViewService_param=function(e,o){return function(s,l){o(s,l,e)}};let qt=class ContextViewService extends fe.JT{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=fe.JT.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new ContextView(this.container,1)),this.layout(),this._register(e.onDidLayout((()=>this.layout())))}setContainer(e,o){this.contextView.setContainer(e,o||1)}showContextView(e,o,s){o?o!==this.container&&(this.container=o,this.setContainer(o,s?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const l=(0,fe.OF)((()=>{this.currentViewDisposable===l&&this.hideContextView()}));return this.currentViewDisposable=l,l}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};qt=contextViewService_decorate([contextViewService_param(0,st)],qt);var Qt=s(5527),Zt=s(5336);const Yt="**",Jt="/",Xt="[/\\\\]",ei="[^/\\\\]",ti=/\//g;function starsToRegExp(e){switch(e){case 0:return"";case 1:return`${ei}*?`;default:return`(?:${Xt}|${ei}+${Xt}|${Xt}${ei}+)*?`}}function splitGlobAware(e,o){if(!e)return[];const s=[];let l=!1,d=!1,u="";for(const g of e){switch(g){case o:if(!l&&!d){s.push(u),u="";continue}break;case"{":l=!0;break;case"}":l=!1;break;case"[":d=!0;break;case"]":d=!1;break}u+=g}return u&&s.push(u),s}function parseRegExp(e){if(!e)return"";let o="";const s=splitGlobAware(e,Jt);if(s.every((e=>e===Yt)))o=".*";else{let e=!1;s.forEach(((l,d)=>{if(l===Yt)return void(e||(o+=starsToRegExp(2),e=!0));let u=!1,g="",p=!1,m="";for(const e of l)if("}"!==e&&u)g+=e;else if(!p||"]"===e&&m)switch(e){case"{":u=!0;continue;case"[":p=!0;continue;case"}":{const e=splitGlobAware(g,","),s=`(?:${e.map((e=>parseRegExp(e))).join("|")})`;o+=s,u=!1,g="";break}case"]":o+="["+m+"]",p=!1,m="";break;case"?":o+=ei;continue;case"*":o+=starsToRegExp(1);continue;default:o+=(0,oe.ec)(e)}else{let o;o="-"===e?e:"^"!==e&&"!"!==e||m?e===Jt?"":(0,oe.ec)(e):"^",m+=o}d<s.length-1&&(s[d+1]!==Yt||d+2<s.length)&&(o+=Xt),e=!1}))}return o}const ii=/^\*\*\/\*\.[\w\.-]+$/,ni=/^\*\*\/([\w\.-]+)\/?$/,oi=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,si=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,ri=/^\*\*((\/[\w\.-]+)+)\/?$/,ai=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,li=new It.z6(1e4),FALSE=function(){return!1},NULL=function(){return null};function parsePattern(e,o){if(!e)return NULL;let s;s="string"!==typeof e?e.pattern:e,s=s.trim();const l=`${s}_${!!o.trimForExclusions}`;let d,u=li.get(l);if(u)return wrapRelativePattern(u,e);if(ii.test(s)){const e=s.substr(4);u=function(o,l){return"string"===typeof o&&o.endsWith(e)?s:null}}else u=(d=ni.exec(trimForExclusions(s,o)))?trivia2(d[1],s):(o.trimForExclusions?si:oi).test(s)?trivia3(s,o):(d=ri.exec(trimForExclusions(s,o)))?trivia4and5(d[1].substr(1),s,!0):(d=ai.exec(trimForExclusions(s,o)))?trivia4and5(d[1],s,!1):toRegExp(s);return li.set(l,u),wrapRelativePattern(u,e)}function wrapRelativePattern(e,o){return"string"===typeof o?e:function(s,l){return(0,Qt.KM)(s,o.base,!Ce.IJ)?e(s.substr(o.base.length+1),l):null}}function trimForExclusions(e,o){return o.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function trivia2(e,o){const s=`/${e}`,l=`\\${e}`,parsedPattern=function(d,u){return"string"!==typeof d?null:u?u===e?o:null:d===e||d.endsWith(s)||d.endsWith(l)?o:null},d=[e];return parsedPattern.basenames=d,parsedPattern.patterns=[o],parsedPattern.allBasenames=d,parsedPattern}function trivia3(e,o){const s=aggregateBasenameMatches(e.slice(1,-1).split(",").map((e=>parsePattern(e,o))).filter((e=>e!==NULL)),e),l=s.length;if(!l)return NULL;if(1===l)return s[0];const parsedPattern=function(o,l){for(let d=0,u=s.length;d<u;d++)if(s[d](o,l))return e;return null},d=s.find((e=>!!e.allBasenames));d&&(parsedPattern.allBasenames=d.allBasenames);const u=s.reduce(((e,o)=>o.allPaths?e.concat(o.allPaths):e),[]);return u.length&&(parsedPattern.allPaths=u),parsedPattern}function trivia4and5(e,o,s){const l=Zt.ir===Zt.KR.sep,d=l?e:e.replace(ti,Zt.ir),u=Zt.ir+d,g=Zt.KR.sep+e,p=s?function(s,p){return"string"!==typeof s||s!==d&&!s.endsWith(u)&&(l||s!==e&&!s.endsWith(g))?null:o}:function(s,u){return"string"!==typeof s||s!==d&&(l||s!==e)?null:o};return p.allPaths=[(s?"*/":"./")+e],p}function toRegExp(e){try{const o=new RegExp(`^${parseRegExp(e)}$`);return function(s){return o.lastIndex=0,"string"===typeof s&&o.test(s)?e:null}}catch(o){return NULL}}function match(e,o,s){return!(!e||"string"!==typeof o)&&parse(e)(o,void 0,s)}function parse(e,o={}){if(!e)return FALSE;if("string"===typeof e||isRelativePattern(e)){const s=parsePattern(e,o);if(s===NULL)return FALSE;const resultPattern=function(e,o){return!!s(e,o)};return s.allBasenames&&(resultPattern.allBasenames=s.allBasenames),s.allPaths&&(resultPattern.allPaths=s.allPaths),resultPattern}return parsedExpression(e,o)}function isRelativePattern(e){const o=e;return!!o&&("string"===typeof o.base&&"string"===typeof o.pattern)}function parsedExpression(e,o){const s=aggregateBasenameMatches(Object.getOwnPropertyNames(e).map((s=>parseExpressionPattern(s,e[s],o))).filter((e=>e!==NULL))),l=s.length;if(!l)return NULL;if(!s.some((e=>!!e.requiresSiblings))){if(1===l)return s[0];const resultExpression=function(e,o){for(let l=0,d=s.length;l<d;l++){const d=s[l](e,o);if(d)return d}return null},e=s.find((e=>!!e.allBasenames));e&&(resultExpression.allBasenames=e.allBasenames);const o=s.reduce(((e,o)=>o.allPaths?e.concat(o.allPaths):e),[]);return o.length&&(resultExpression.allPaths=o),resultExpression}const resultExpression=function(e,o,l){let d;for(let u=0,g=s.length;u<g;u++){const g=s[u];g.requiresSiblings&&l&&(o||(o=(0,Zt.EZ)(e)),d||(d=o.substr(0,o.length-(0,Zt.DZ)(e).length)));const p=g(e,o,d,l);if(p)return p}return null},d=s.find((e=>!!e.allBasenames));d&&(resultExpression.allBasenames=d.allBasenames);const u=s.reduce(((e,o)=>o.allPaths?e.concat(o.allPaths):e),[]);return u.length&&(resultExpression.allPaths=u),resultExpression}function parseExpressionPattern(e,o,s){if(!1===o)return NULL;const l=parsePattern(e,s);if(l===NULL)return NULL;if("boolean"===typeof o)return l;if(o){const s=o.when;if("string"===typeof s){const result=(o,d,u,g)=>{if(!g||!l(o,d))return null;const p=s.replace("$(basename)",u),m=g(p);return(0,me.J8)(m)?m.then((o=>o?e:null)):m?e:null};return result.requiresSiblings=!0,result}}return l}function aggregateBasenameMatches(e,o){const s=e.filter((e=>!!e.basenames));if(s.length<2)return e;const l=s.reduce(((e,o)=>{const s=o.basenames;return s?e.concat(s):e}),[]);let d;if(o){d=[];for(let e=0,s=l.length;e<s;e++)d.push(o)}else d=s.reduce(((e,o)=>{const s=o.patterns;return s?e.concat(s):e}),[]);const aggregate=function(e,o){if("string"!==typeof e)return null;if(!o){let s;for(s=e.length;s>0;s--){const o=e.charCodeAt(s-1);if(47===o||92===o)break}o=e.substr(s)}const s=l.indexOf(o);return-1!==s?d[s]:null};aggregate.basenames=l,aggregate.patterns=d,aggregate.allBasenames=l;const u=e.filter((e=>!e.basenames));return u.push(aggregate),u}var ci=s(1170),di=s(5935);let hi=[],ui=[],gi=[];function registerPlatformLanguageAssociation(e,o=!1){_registerLanguageAssociation(e,!1,o)}function _registerLanguageAssociation(e,o,s){const l=toLanguageAssociationItem(e,o);hi.push(l),l.userConfigured?gi.push(l):ui.push(l),s&&!l.userConfigured&&hi.forEach((e=>{e.mime===l.mime||e.userConfigured||(l.extension&&e.extension===l.extension&&console.warn(`Overwriting extension <<${l.extension}>> to now point to mime <<${l.mime}>>`),l.filename&&e.filename===l.filename&&console.warn(`Overwriting filename <<${l.filename}>> to now point to mime <<${l.mime}>>`),l.filepattern&&e.filepattern===l.filepattern&&console.warn(`Overwriting filepattern <<${l.filepattern}>> to now point to mime <<${l.mime}>>`),l.firstline&&e.firstline===l.firstline&&console.warn(`Overwriting firstline <<${l.firstline}>> to now point to mime <<${l.mime}>>`))}))}function toLanguageAssociationItem(e,o){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:o,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?parse(e.filepattern.toLowerCase()):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(Zt.KR.sep)>=0}}function clearPlatformLanguageAssociations(){hi=hi.filter((e=>e.userConfigured)),ui=[]}function getMimeTypes(e,o){let s;if(e)switch(e.scheme){case Je.lg.file:s=e.fsPath;break;case Je.lg.data:{const o=di.Vb.parseMetaData(e);s=o.get(di.Vb.META_DATA_LABEL);break}default:s=e.path}if(!s)return[ci.v.unknown];s=s.toLowerCase();const l=(0,Zt.EZ)(s),d=getMimeByPath(s,l,gi);if(d)return[d,ci.v.text];const u=getMimeByPath(s,l,ui);if(u)return[u,ci.v.text];if(o){const e=getMimeByFirstline(o);if(e)return[e,ci.v.text]}return[ci.v.unknown]}function getMimeByPath(e,o,s){var l;let d,u,g;for(let p=s.length-1;p>=0;p--){const m=s[p];if(o===m.filenameLowercase){d=m;break}if(m.filepattern&&(!u||m.filepattern.length>u.filepattern.length)){const s=m.filepatternOnPath?e:o;(null===(l=m.filepatternLowercase)||void 0===l?void 0:l.call(m,s))&&(u=m)}m.extension&&(!g||m.extension.length>g.extension.length)&&o.endsWith(m.extensionLowercase)&&(g=m)}return d?d.mime:u?u.mime:g?g.mime:void 0}function getMimeByFirstline(e){if((0,oe.uS)(e)&&(e=e.substr(1)),e.length>0)for(let o=hi.length-1;o>=0;o--){const s=hi[o];if(!s.firstline)continue;const l=e.match(s.firstline);if(l&&l.length>0)return s.mime}}var pi=s(8801);const mi=Object.prototype.hasOwnProperty,fi="vs.editor.nullLanguage";he.zu.register(fi,{});class LanguageIdCodec{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(fi,0),this._register(pi.bd,1),this._nextLanguageId=2}_register(e,o){this._languageIdToLanguage[o]=e,this._languageToLanguageId.set(e,o)}register(e){if(this._languageToLanguageId.has(e))return;const o=this._nextLanguageId++;this._register(e,o)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||fi}}class LanguagesRegistry extends fe.JT{constructor(e=!0,o=!1){super(),this._onDidChange=this._register(new Y.Q5),this.onDidChange=this._onDidChange.event,LanguagesRegistry.instanceCount++,this._warnOnOverwrite=o,this.languageIdCodec=new LanguageIdCodec,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(pi.dQ.onDidChangeLanguages((e=>{this._initializeFromRegistry()}))))}dispose(){LanguagesRegistry.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},clearPlatformLanguageAssociations();const e=[].concat(pi.dQ.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const o of e)this._registerLanguage(o);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((e=>{const o=this._languages[e];o.name&&(this._nameMap[o.name]=o.identifier),o.aliases.forEach((e=>{this._lowercaseNameMap[e.toLowerCase()]=o.identifier})),o.mimetypes.forEach((e=>{this._mimeTypesMap[e]=o.identifier}))})),St.B.as(wt.IP.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const o=e.id;let s;mi.call(this._languages,o)?s=this._languages[o]:(this.languageIdCodec.register(o),s={identifier:o,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[o]=s),this._mergeLanguage(s,e)}_mergeLanguage(e,o){const s=o.id;let l=null;if(Array.isArray(o.mimetypes)&&o.mimetypes.length>0&&(e.mimetypes.push(...o.mimetypes),l=o.mimetypes[0]),l||(l=`text/x-${s}`,e.mimetypes.push(l)),Array.isArray(o.extensions)){o.configuration?e.extensions=o.extensions.concat(e.extensions):e.extensions=e.extensions.concat(o.extensions);for(let e of o.extensions)registerPlatformLanguageAssociation({id:s,mime:l,extension:e},this._warnOnOverwrite)}if(Array.isArray(o.filenames))for(let p of o.filenames)registerPlatformLanguageAssociation({id:s,mime:l,filename:p},this._warnOnOverwrite),e.filenames.push(p);if(Array.isArray(o.filenamePatterns))for(let p of o.filenamePatterns)registerPlatformLanguageAssociation({id:s,mime:l,filepattern:p},this._warnOnOverwrite);if("string"===typeof o.firstLine&&o.firstLine.length>0){let e=o.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{const o=new RegExp(e);(0,oe.IO)(o)||registerPlatformLanguageAssociation({id:s,mime:l,firstline:o},this._warnOnOverwrite)}catch(g){(0,_e.dL)(g)}}e.aliases.push(s);let d=null;if("undefined"!==typeof o.aliases&&Array.isArray(o.aliases)&&(d=0===o.aliases.length?[null]:o.aliases),null!==d)for(const p of d)p&&0!==p.length&&e.aliases.push(p);const u=null!==d&&d.length>0;if(u&&null===d[0]);else{const o=(u?d[0]:null)||s;!u&&e.name||(e.name=o)}o.configuration&&e.configurationFiles.push(o.configuration),o.icon&&e.icons.push(o.icon)}isRegisteredLanguageId(e){return!!e&&mi.call(this._languages,e)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const o=e.toLowerCase();return mi.call(this._lowercaseNameMap,o)?this._lowercaseNameMap[o]:null}getLanguageIdByMimeType(e){return e&&mi.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,o){if(!e&&!o)return[];const s=getMimeTypes(e,o);return(0,Re.kX)(s.map((e=>this.getLanguageIdByMimeType(e))))}}LanguagesRegistry.instanceCount=0;class LanguageService extends fe.JT{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new Y.Q5),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new Y.Q5({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,LanguageService.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new LanguagesRegistry(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange((()=>this._onDidChange.fire())))}dispose(){LanguageService.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,o){const s=this._registry.guessLanguageIdByFilepathOrFirstLine(e,o);return(0,Re.Xh)(s,null)}createById(e){return new LanguageSelection(this.onDidChange,(()=>this._createAndGetLanguageIdentifier(e)))}createByFilepathOrFirstLine(e,o){return new LanguageSelection(this.onDidChange,(()=>{const s=this.guessLanguageIdByFilepathOrFirstLine(e,o);return this._createAndGetLanguageIdentifier(s)}))}_createAndGetLanguageIdentifier(e){return e&&this.isRegisteredLanguageId(e)||(e=pi.bd),this._encounteredLanguages.has(e)||(this._encounteredLanguages.add(e),ne.RW.getOrCreate(e),this._onDidEncounterLanguage.fire(e)),e}}LanguageService.instanceCount=0;class LanguageSelection{constructor(e,o){this._onDidChangeLanguages=e,this._selector=o,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages((()=>this._evaluate()))),this._emitter||(this._emitter=new Y.Q5({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._emitter&&this._emitter.fire(this.languageId))}}var _i=s(3938),Ci=s(6268),vi=s(553),bi=s(317),wi=s(6033),Si=s(8609),yi=s(3161),Li=s(4741),xi=s(3046),ki=s(1212);const Ni=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,Di=/(&amp;)?(&amp;)([^\s&])/g;var Ei;(function(e){e[e["Right"]=0]="Right",e[e["Left"]=1]="Left"})(Ei||(Ei={}));class Menu extends bi.o{constructor(e,o,s={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const l=document.createElement("div");l.classList.add("monaco-menu"),l.setAttribute("role","presentation"),super(l,{orientation:1,actionViewItemProvider:e=>this.doGetActionViewItem(e,s,d),context:s.context,actionRunner:s.actionRunner,ariaLabel:s.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Ce.dz||Ce.IJ?[10]:[]],keyDown:!0}}),this.menuElement=l,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new fe.SL),this.initializeOrUpdateStyleSheet(e,{}),this._register(vi.o.addTarget(l)),(0,Ye.nm)(l,Ye.tw.KEY_DOWN,(e=>{const o=new _t.y(e);o.equals(2)&&e.preventDefault()})),s.enableMnemonics&&this.menuDisposables.add((0,Ye.nm)(l,Ye.tw.KEY_DOWN,(e=>{const o=e.key.toLocaleLowerCase();if(this.mnemonics.has(o)){Ye.zB.stop(e,!0);const s=this.mnemonics.get(o);if(1===s.length&&(s[0]instanceof SubmenuMenuActionViewItem&&s[0].container&&this.focusItemByElement(s[0].container),s[0].onClick(e)),s.length>1){const e=s.shift();e&&e.container&&(this.focusItemByElement(e.container),s.push(e)),this.mnemonics.set(o,s)}}}))),Ce.IJ&&this._register((0,Ye.nm)(l,Ye.tw.KEY_DOWN,(e=>{const o=new _t.y(e);o.equals(14)||o.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ye.zB.stop(e,!0)):(o.equals(13)||o.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ye.zB.stop(e,!0))}))),this._register((0,Ye.nm)(this.domNode,Ye.tw.MOUSE_OUT,(e=>{let o=e.relatedTarget;(0,Ye.jg)(o,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())}))),this._register((0,Ye.nm)(this.actionsList,Ye.tw.MOUSE_OVER,(e=>{let o=e.target;if(o&&(0,Ye.jg)(o,this.actionsList)&&o!==this.actionsList){while(o.parentElement!==this.actionsList&&null!==o.parentElement)o=o.parentElement;if(o.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(o),e!==this.focusedItem&&this.updateFocus()}}}))),this._register(vi.o.addTarget(this.actionsList)),this._register((0,Ye.nm)(this.actionsList,vi.t.Tap,(e=>{let o=e.initialTarget;if(o&&(0,Ye.jg)(o,this.actionsList)&&o!==this.actionsList){while(o.parentElement!==this.actionsList&&null!==o.parentElement)o=o.parentElement;if(o.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(o),e!==this.focusedItem&&this.updateFocus()}}})));let d={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new yi.s$(l,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const u=this.scrollableElement.getDomNode();u.style.position="",this._register((0,Ye.nm)(l,vi.t.Change,(e=>{Ye.zB.stop(e,!0);const o=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:o-e.translationY})}))),this._register((0,Ye.nm)(u,Ye.tw.MOUSE_UP,(e=>{e.preventDefault()}))),l.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,o=o.filter((e=>{var o;return!(null===(o=s.submenuIds)||void 0===o?void 0:o.has(e.id))||(console.warn(`Found submenu cycle: ${e.id}`),!1)})),this.push(o,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((e=>!(e instanceof MenuSeparatorActionViewItem))).forEach(((e,o,s)=>{e.updatePositionInSet(o+1,s.length)}))}initializeOrUpdateStyleSheet(e,o){this.styleSheet||((0,Ye.OO)(e)?this.styleSheet=(0,Ye.dS)(e):(Menu.globalStyleSheet||(Menu.globalStyleSheet=(0,Ye.dS)()),this.styleSheet=Menu.globalStyleSheet)),this.styleSheet.textContent=getMenuWidgetCSS(o,(0,Ye.OO)(e))}style(e){const o=this.getContainer();this.initializeOrUpdateStyleSheet(o,e);const s=e.foregroundColor?`${e.foregroundColor}`:"",l=e.backgroundColor?`${e.backgroundColor}`:"",d=e.borderColor?`1px solid ${e.borderColor}`:"",u=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";o.style.border=d,this.domNode.style.color=s,this.domNode.style.backgroundColor=l,o.style.boxShadow=u,this.viewItems&&this.viewItems.forEach((o=>{(o instanceof BaseMenuActionViewItem||o instanceof MenuSeparatorActionViewItem)&&o.style(e)}))}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const o=this.focusedItem;this.setFocusedItem(e),o!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let o=0;o<this.actionsList.children.length;o++){let s=this.actionsList.children[o];if(e===s){this.focusedItem=o;break}}}updateFocus(e){super.updateFocus(e,!0,!0),"undefined"!==typeof this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,o,s){if(e instanceof Li.Z0)return new MenuSeparatorActionViewItem(o.context,e,{icon:!0});if(e instanceof Li.wY){const l=new SubmenuMenuActionViewItem(e,e.actions,s,Object.assign(Object.assign({},o),{submenuIds:new Set([...o.submenuIds||[],e.id])}));if(o.enableMnemonics){const e=l.getMnemonic();if(e&&l.isEnabled()){let o=[];this.mnemonics.has(e)&&(o=this.mnemonics.get(e)),o.push(l),this.mnemonics.set(e,o)}}return l}{const s={enableMnemonics:o.enableMnemonics,useEventAsContext:o.useEventAsContext};if(o.getKeyBinding){const l=o.getKeyBinding(e);if(l){const e=l.getLabel();e&&(s.keybinding=e)}}const l=new BaseMenuActionViewItem(o.context,e,s);if(o.enableMnemonics){const e=l.getMnemonic();if(e&&l.isEnabled()){let o=[];this.mnemonics.has(e)&&(o=this.mnemonics.get(e)),o.push(l),this.mnemonics.set(e,o)}}return l}}}class BaseMenuActionViewItem extends wi.Y{constructor(e,o,s={}){if(s.isMenu=!0,super(o,o,s),this.options=s,this.options.icon=void 0!==s.icon&&s.icon,this.options.label=void 0===s.label||s.label,this.cssClass="",this.options.label&&s.enableMnemonics){let e=this.getAction().label;if(e){let o=Ni.exec(e);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new me.pY((()=>{this.element&&(this._register((0,Ye.nm)(this.element,Ye.tw.MOUSE_UP,(e=>{if(Ye.zB.stop(e,!0),Ci.isFirefox){const o=new _i.n(e);if(o.rightButton)return;this.onClick(e)}else setTimeout((()=>{this.onClick(e)}),0)}))),this._register((0,Ye.nm)(this.element,Ye.tw.CONTEXT_MENU,(e=>{Ye.zB.stop(e,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=(0,Ye.R3)(this.element,(0,Ye.$)("a.action-menu-item")),this._action.id===Li.Z0.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=(0,Ye.R3)(this.item,(0,Ye.$)("span.menu-item-check"+xi.lA.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=(0,Ye.R3)(this.item,(0,Ye.$)("span.action-label")),this.options.label&&this.options.keybinding&&((0,Ye.R3)(this.item,(0,Ye.$)("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,o){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${o}`))}updateLabel(){if(this.label&&this.options.label){(0,Ye.PO)(this.label);let e=(0,ki.x$)(this.getAction().label);if(e){const o=cleanMnemonic(e);this.options.enableMnemonics||(e=o),this.label.setAttribute("aria-label",o.replace(/&&/g,"&"));const s=Ni.exec(e);if(s){e=oe.YU(e),Di.lastIndex=0;let o=Di.exec(e);while(o&&o[1])o=Di.exec(e);const replaceDoubleEscapes=e=>e.replace(/&amp;&amp;/g,"&amp;");o?this.label.append(oe.j3(replaceDoubleEscapes(e.substr(0,o.index))," "),(0,Ye.$)("u",{"aria-hidden":"true"},o[3]),oe.oL(replaceDoubleEscapes(e.substr(o.index+o[0].length))," ")):this.label.innerText=replaceDoubleEscapes(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),void 0!==e?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),o=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,s=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,l=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=o?o.toString():"",this.item.style.backgroundColor=s?s.toString():""),this.check&&(this.check.style.color=o?o.toString():""),this.container&&(this.container.style.border=l)}style(e){this.menuStyle=e,this.applyStyle()}}class SubmenuMenuActionViewItem extends BaseMenuActionViewItem{constructor(e,o,s,l){super(e,e,l),this.submenuActions=o,this.parentData=s,this.submenuOptions=l,this.mysubmenu=null,this.submenuDisposables=this._register(new fe.SL),this.mouseOver=!1,this.expandDirection=l&&void 0!==l.expandDirection?l.expandDirection:Ei.Right,this.showScheduler=new me.pY((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new me.pY((()=>{this.element&&!(0,Ye.jg)((0,Ye.vY)(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=(0,Ye.R3)(this.item,(0,Ye.$)("span.submenu-indicator"+xi.lA.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register((0,Ye.nm)(this.element,Ye.tw.KEY_UP,(e=>{let o=new _t.y(e);(o.equals(17)||o.equals(3))&&(Ye.zB.stop(e,!0),this.createSubmenu(!0))}))),this._register((0,Ye.nm)(this.element,Ye.tw.KEY_DOWN,(e=>{let o=new _t.y(e);(0,Ye.vY)()===this.item&&(o.equals(17)||o.equals(3))&&Ye.zB.stop(e,!0)}))),this._register((0,Ye.nm)(this.element,Ye.tw.MOUSE_OVER,(e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register((0,Ye.nm)(this.element,Ye.tw.MOUSE_LEAVE,(e=>{this.mouseOver=!1}))),this._register((0,Ye.nm)(this.element,Ye.tw.FOCUS_OUT,(e=>{this.element&&!(0,Ye.jg)((0,Ye.vY)(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)}))))}updateEnabled(){}onClick(e){Ye.zB.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(Se){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,o,s,l){const d={top:0,left:0};return d.left=layout(e.width,o.width,{position:l===Ei.Right?0:1,offset:s.left,size:s.width}),d.left>=s.left&&d.left<s.left+s.width&&(s.left+10+o.width<=e.width&&(d.left=s.left+10),s.top+=10,s.height=0),d.top=layout(e.height,o.height,{position:0,offset:s.top,size:0}),d.top+o.height===s.top&&d.top+s.height+o.height<=e.height&&(d.top+=s.height),d}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=(0,Ye.R3)(this.element,(0,Ye.$)("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const o=getComputedStyle(this.parentData.parent.domNode),s=parseFloat(o.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Menu(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Li.eZ],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const l=this.element.getBoundingClientRect(),d={top:l.top-s,left:l.left,height:l.height+2*s,width:l.width},u=this.submenuContainer.getBoundingClientRect(),{top:g,left:p}=this.calculateSubmenuMenuLayout(new Ye.Ro(window.innerWidth,window.innerHeight),Ye.Ro.lift(u),d,this.expandDirection);this.submenuContainer.style.left=p-u.left+"px",this.submenuContainer.style.top=g-u.top+"px",this.submenuDisposables.add((0,Ye.nm)(this.submenuContainer,Ye.tw.KEY_UP,(e=>{let o=new _t.y(e);o.equals(15)&&(Ye.zB.stop(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add((0,Ye.nm)(this.submenuContainer,Ye.tw.KEY_DOWN,(e=>{let o=new _t.y(e);o.equals(15)&&Ye.zB.stop(e,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var o;this.item&&(null===(o=this.item)||void 0===o||o.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),o=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=o?`${o}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class MenuSeparatorActionViewItem extends wi.g{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function cleanMnemonic(e){const o=Ni,s=o.exec(e);if(!s)return e;const l=!s[1];return e.replace(o,l?"$2$3":"").trim()}function getMenuWidgetCSS(e,o){let s=`\n.monaco-menu {\n\tfont-size: 13px;\n\n}\n\n${(0,Si.a)(xi.lA.menuSelection)}\n${(0,Si.a)(xi.lA.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\topacity: 0.4;\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid #bbb;\n\tpadding-top: 1px;\n\tmargin-left: .8em;\n\tmargin-right: .8em;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tpadding: 0.5em 0 0 0;\n\tmargin-bottom: 0.5em;\n\twidth: 100%;\n\theight: 0px !important;\n\tmargin-left: .8em !important;\n\tmargin-right: .8em !important;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tborder: thin solid transparent; /* prevents jumping behaviour on hover or focus */\n}\n\n\n/* High Contrast Theming */\n:host-context(.hc-black) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: .5em 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 1.8em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tpadding: 0.2em 0 0 0;\n\tmargin-bottom: 0.2em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;if(o){s+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t";const o=e.scrollbarShadow;o&&(s+=`\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${o} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${o} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${o} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`);const l=e.scrollbarSliderBackground;l&&(s+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${l};\n\t\t\t\t}\n\t\t\t`);const d=e.scrollbarSliderHoverBackground;d&&(s+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${d};\n\t\t\t\t}\n\t\t\t`);const u=e.scrollbarSliderActiveBackground;u&&(s+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${u};\n\t\t\t\t}\n\t\t\t`)}return s}var Ti=s(8810);class ContextMenuHandler{constructor(e,o,s,l,d){this.contextViewService=e,this.telemetryService=o,this.notificationService=s,this.keybindingService=l,this.themeService=d,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const o=e.getActions();if(!o.length)return;let s;this.focusToReturn=document.activeElement;let l=(0,Ye.Re)(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:l=>{let d=e.getMenuClassName?e.getMenuClassName():"";d&&(l.className+=" "+d),this.options.blockMouse&&(this.block=l.appendChild((0,Ye.$)(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(0,Ye.nm)(this.block,Ye.tw.MOUSE_DOWN,(e=>e.stopPropagation())));const u=new fe.SL,g=e.actionRunner||new Li.Wi;return g.onBeforeRun(this.onActionRun,this,u),g.onDidRun(this.onDidActionRun,this,u),s=new Menu(l,o,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:g,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)}),u.add((0,Ti.tj)(s,this.themeService)),s.onDidCancel((()=>this.contextViewService.hideContextView(!0)),null,u),s.onDidBlur((()=>this.contextViewService.hideContextView(!0)),null,u),u.add((0,Ye.nm)(window,Ye.tw.BLUR,(()=>this.contextViewService.hideContextView(!0)))),u.add((0,Ye.nm)(window,Ye.tw.MOUSE_DOWN,(e=>{if(e.defaultPrevented)return;let o=new _i.n(e),s=o.target;if(!o.rightButton){while(s){if(s===l)return;s=s.parentElement}this.contextViewService.hideContextView(!0)}}))),(0,fe.F8)(u,s)},focus:()=>{s&&s.focus(!!e.autoSelectFirstItem)},onHide:o=>{e.onHide&&e.onHide(!!o),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},l,!!l)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!(0,_e.n2)(e.error)&&this.notificationService.error(e.error)}}var contextMenuService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},contextMenuService_param=function(e,o){return function(s,l){o(s,l,e)}};let Ii=class ContextMenuService extends fe.JT{constructor(e,o,s,l,d){super(),this._onDidShowContextMenu=new Y.Q5,this._onDidHideContextMenu=new Y.Q5,this.contextMenuHandler=new ContextMenuHandler(s,e,o,l,d)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:o=>{e.onHide&&e.onHide(o),this._onDidHideContextMenu.fire()}})),Ye._q.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};Ii=contextMenuService_decorate([contextMenuService_param(0,Vt.b),contextMenuService_param(1,ht.lT),contextMenuService_param(2,Kt.u),contextMenuService_param(3,Rt.d),contextMenuService_param(4,Xe.XE)],Ii);var Ai,Mi=s(1741),Ri=s(3897);(function(e){e[e["API"]=0]="API",e[e["USER"]=1]="USER"})(Ai||(Ai={}));var Pi=s(988),openerService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},openerService_param=function(e,o){return function(s,l){o(s,l,e)}},openerService_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let Oi=class CommandOpener{constructor(e){this._commandService=e}open(e,o){return openerService_awaiter(this,void 0,void 0,(function*(){if(!(0,Pi.xn)(e,Je.lg.command))return!1;if(!(null===o||void 0===o?void 0:o.allowCommands))return!0;"string"===typeof e&&(e=X.o.parse(e));let s=[];try{s=(0,Ri.Q)(decodeURIComponent(e.query))}catch(Se){try{s=(0,Ri.Q)(e.query)}catch(l){}}return Array.isArray(s)||(s=[s]),yield this._commandService.executeCommand(e.path,...s),!0}))}};Oi=openerService_decorate([openerService_param(0,Et.Hy)],Oi);let Fi=class EditorOpener{constructor(e){this._editorService=e}open(e,o){return openerService_awaiter(this,void 0,void 0,(function*(){"string"===typeof e&&(e=X.o.parse(e));const{selection:s,uri:l}=(0,Pi.xI)(e);return e=l,e.scheme===Je.lg.file&&(e=(0,di.AH)(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:s,source:(null===o||void 0===o?void 0:o.fromUserGesture)?Ai.USER:Ai.API},null===o||void 0===o?void 0:o.editorOptions)},this._editorService.getFocusedCodeEditor(),null===o||void 0===o?void 0:o.openToSide),!0}))}};Fi=openerService_decorate([openerService_param(0,re.$)],Fi);let Bi=class OpenerService{constructor(e,o){this._openers=new Mi.S,this._validators=new Mi.S,this._resolvers=new Mi.S,this._resolvedUriTargets=new It.Y9((e=>e.with({path:null,fragment:null,query:null}).toString())),this._externalOpeners=new Mi.S,this._defaultExternalOpener={openExternal:e=>openerService_awaiter(this,void 0,void 0,(function*(){return(0,Pi.Gs)(e,Je.lg.http,Je.lg.https)?Ye.V3(e):window.location.href=e,!0}))},this._openers.push({open:(e,o)=>openerService_awaiter(this,void 0,void 0,(function*(){return!(!(null===o||void 0===o?void 0:o.openExternal)&&!(0,Pi.Gs)(e,Je.lg.mailto,Je.lg.http,Je.lg.https,Je.lg.vsls))&&(yield this._doOpenExternal(e,o),!0)}))}),this._openers.push(new Oi(o)),this._openers.push(new Fi(e))}registerOpener(e){const o=this._openers.unshift(e);return{dispose:o}}registerValidator(e){const o=this._validators.push(e);return{dispose:o}}registerExternalUriResolver(e){const o=this._resolvers.push(e);return{dispose:o}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){const o=this._externalOpeners.push(e);return{dispose:o}}open(e,o){var s;return openerService_awaiter(this,void 0,void 0,(function*(){const l="string"===typeof e?X.o.parse(e):e,d=null!==(s=this._resolvedUriTargets.get(l))&&void 0!==s?s:e;for(const e of this._validators)if(!(yield e.shouldOpen(d)))return!1;for(const s of this._openers){const l=yield s.open(e,o);if(l)return!0}return!1}))}resolveExternalUri(e,o){return openerService_awaiter(this,void 0,void 0,(function*(){for(const s of this._resolvers)try{const l=yield s.resolveExternalUri(e,o);if(l)return this._resolvedUriTargets.has(l.resolved)||this._resolvedUriTargets.set(l.resolved,e),l}catch(Se){}throw new Error("Could not resolve external URI: "+e.toString())}))}_doOpenExternal(e,o){return openerService_awaiter(this,void 0,void 0,(function*(){const s="string"===typeof e?X.o.parse(e):e;let l,d;try{l=(yield this.resolveExternalUri(s,o)).resolved}catch(Se){l=s}if(d="string"===typeof e&&s.toString()===l.toString()?e:encodeURI(l.toString(!0)),null===o||void 0===o?void 0:o.allowContributedOpeners){const e="string"===typeof(null===o||void 0===o?void 0:o.allowContributedOpeners)?null===o||void 0===o?void 0:o.allowContributedOpeners:void 0;for(const o of this._externalOpeners){const l=yield o.openExternal(d,{sourceUri:s,preferredOpenerId:e},Z.T.None);if(l)return!0}}return this._defaultExternalOpener.openExternal(d,{sourceUri:s},Z.T.None)}))}dispose(){this._validators.clear()}};Bi=openerService_decorate([openerService_param(0,re.$),openerService_param(1,Et.Hy)],Bi);var Wi=s(8674),Vi=s(8625),Hi=s(3910),markerDecorationsService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},markerDecorationsService_param=function(e,o){return function(s,l){o(s,l,e)}};class MarkerDecorations extends fe.JT{constructor(e){super(),this.model=e,this._markersData=new Map,this._register((0,fe.OF)((()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()})))}update(e,o){const s=[...this._markersData.keys()];this._markersData.clear();const l=this.model.deltaDecorations(s,o);for(let d=0;d<l.length;d++)this._markersData.set(l[d],e[d]);return 0!==s.length||0!==l.length}getMarker(e){return this._markersData.get(e.id)}}let zi=class MarkerDecorationsService extends fe.JT{constructor(e,o){super(),this._markerService=o,this._onDidChangeMarker=this._register(new Y.Q5),this._markerDecorations=new It.Y9,e.getModels().forEach((e=>this._onModelAdded(e))),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach((e=>e.dispose())),this._markerDecorations.clear()}getMarker(e,o){const s=this._markerDecorations.get(e);return s&&s.getMarker(o)||null}_handleMarkerChange(e){e.forEach((e=>{const o=this._markerDecorations.get(e);o&&this._updateDecorations(o)}))}_onModelAdded(e){const o=new MarkerDecorations(e);this._markerDecorations.set(e.uri,o),this._updateDecorations(o)}_onModelRemoved(e){const o=this._markerDecorations.get(e.uri);o&&(o.dispose(),this._markerDecorations.delete(e.uri)),e.uri.scheme!==Je.lg.inMemory&&e.uri.scheme!==Je.lg.internal&&e.uri.scheme!==Je.lg.vscode||this._markerService&&this._markerService.read({resource:e.uri}).map((e=>e.owner)).forEach((o=>this._markerService.remove(o,[e.uri])))}_updateDecorations(e){const o=this._markerService.read({resource:e.model.uri,take:500}),s=o.map((o=>({range:this._createDecorationRange(e.model,o),options:this._createDecorationOption(o)})));e.update(o,s)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,o){let s=te.e.lift(o);if(o.severity!==Wi.ZL.Hint||this._hasMarkerTag(o,1)||this._hasMarkerTag(o,2)||(s=s.setEndPosition(s.startLineNumber,s.startColumn+2)),s=e.validateRange(s),s.isEmpty()){const o=e.getLineLastNonWhitespaceColumn(s.startLineNumber)||e.getLineMaxColumn(s.startLineNumber);if(1===o||s.endColumn>=o)return s;const l=e.getWordAtPosition(s.getStartPosition());l&&(s=new te.e(s.startLineNumber,l.startColumn,s.endLineNumber,l.endColumn))}else if(o.endColumn===Number.MAX_VALUE&&1===o.startColumn&&s.startLineNumber===s.endLineNumber){let l=e.getLineFirstNonWhitespaceColumn(o.startLineNumber);l<s.endColumn&&(s=new te.e(s.startLineNumber,l,s.endLineNumber,s.endColumn),o.startColumn=l)}return s}_createDecorationOption(e){let o,s,l,d,u;switch(e.severity){case Wi.ZL.Hint:o=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",l=0;break;case Wi.ZL.Warning:o="squiggly-warning",s=(0,Xe.EN)(Vi.Re),l=20,u={color:(0,Xe.EN)(Hi.Ivo),position:de.F5.Inline};break;case Wi.ZL.Info:o="squiggly-info",s=(0,Xe.EN)(Vi.eS),l=10;break;case Wi.ZL.Error:default:o="squiggly-error",s=(0,Xe.EN)(Vi.lK),l=30,u={color:(0,Xe.EN)(Hi.Gj_),position:de.F5.Inline};break}return e.tags&&(-1!==e.tags.indexOf(1)&&(d="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(d="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:o,showIfCollapsed:!0,overviewRuler:{color:s,position:de.sh.Right},minimap:u,zIndex:l,inlineClassName:d}}_hasMarkerTag(e,o){return!!e.tags&&e.tags.indexOf(o)>=0}};zi=markerDecorationsService_decorate([markerDecorationsService_param(0,pe.q),markerDecorationsService_param(1,Wi.lT)],zi);var Ui=s(6357),Ki=s(1200),ji=s(6830),$i=s(1106),Gi=s(6811),qi=s(1264);const Qi={buttonBackground:qi.Il.fromHex("#0E639C"),buttonHoverBackground:qi.Il.fromHex("#006BB3"),buttonForeground:qi.Il.white};class Button extends fe.JT{constructor(e,o){super(),this._onDidClick=this._register(new Y.Q5),this.options=o||Object.create(null),(0,At.jB)(this.options,Qi,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(vi.o.addTarget(this._element)),[Ye.tw.CLICK,vi.t.Tap].forEach((e=>{this._register((0,Ye.nm)(this._element,e,(e=>{this.enabled?this._onDidClick.fire(e):Ye.zB.stop(e)})))})),this._register((0,Ye.nm)(this._element,Ye.tw.KEY_DOWN,(e=>{const o=new _t.y(e);let s=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(e),s=!0):o.equals(9)&&(this._element.blur(),s=!0),s&&Ye.zB.stop(o,!0)}))),this._register((0,Ye.nm)(this._element,Ye.tw.MOUSE_OVER,(e=>{this._element.classList.contains("disabled")||this.setHoverBackground()}))),this._register((0,Ye.nm)(this._element,Ye.tw.MOUSE_OUT,(e=>{this.applyStyles()}))),this.focusTracker=this._register((0,Ye.go)(this._element)),this._register(this.focusTracker.onDidFocus((()=>this.setHoverBackground()))),this._register(this.focusTracker.onDidBlur((()=>this.applyStyles()))),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;e=this.options.secondary?this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,o;this.options.secondary?(o=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(o=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const s=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=o,this._element.style.backgroundColor=e,this._element.style.borderWidth=s?"1px":"",this._element.style.borderStyle=s?"solid":"",this._element.style.borderColor=s}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?(0,Ye.mc)(this._element,...(0,Gi.T)(e)):this._element.textContent=e,"string"===typeof this.options.title?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}var Zi=s(7488);const Yi="done",Ji="active",Xi="infinite",en="infinite-long-running",tn="discrete",nn={progressBarBackground:qi.Il.fromHex("#0E70C0")};class ProgressBar extends fe.JT{constructor(e,o){super(),this.options=o||Object.create(null),(0,At.jB)(this.options,nn,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new me.pY((()=>(0,Ye.$Z)(this.element)),0)),this.longRunningScheduler=this._register(new me.pY((()=>this.infiniteLongRunning()),ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(Ji,Xi,en,tn),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(Yi),this.element.classList.contains(Xi)?(this.bit.style.opacity="0",e?setTimeout((()=>this.off()),200):this.off()):(this.bit.style.width="inherit",e?setTimeout((()=>this.off()),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(tn,Yi,en),this.element.classList.add(Ji,Xi),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(en)}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD=1e4;var on=s(4742);const sn={},rn=new on.R("quick-input-button-icon-");function getIconClass(e){if(!e)return;let o;const s=e.dark.toString();return sn[s]?o=sn[s]:(o=rn.nextId(),Ye.fk(`.${o}`,`background-image: ${Ye.wY(e.light||e.dark)}`),Ye.fk(`.vs-dark .${o}, .hc-black .${o}`,`background-image: ${Ye.wY(e.dark)}`),sn[s]=o),o}var an=s(7746),ln=s(1338);const cn=Ye.$;class QuickInputBox extends fe.JT{constructor(e){super(),this.parent=e,this.onKeyDown=e=>Ye.nm(this.inputBox.inputElement,Ye.tw.KEY_DOWN,(o=>{e(new _t.y(o))})),this.onMouseDown=e=>Ye.nm(this.inputBox.inputElement,Ye.tw.MOUSE_DOWN,(o=>{e(new _i.n(o))})),this.onDidChange=e=>this.inputBox.onDidChange(e),this.container=Ye.R3(this.parent,cn(".quick-input-box")),this.inputBox=this._register(new ln.W(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return"password"===this.inputBox.inputElement.type}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,o){this.inputBox.inputElement.setAttribute(e,o)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===lt.Z.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===lt.Z.Info?1:e===lt.Z.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===lt.Z.Info?1:e===lt.Z.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}var dn=s(489);const hn=Ye.$;class KeybindingLabel{constructor(e,o,s){this.os=o,this.keyElements=new Set,this.options=s||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=Ye.R3(e,hn(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,o){this.didEverRender&&this.keybinding===e&&KeybindingLabel.areSame(this.matches,o)||(this.keybinding=e,this.matches=o,this.render())}render(){if(this.clear(),this.keybinding){let[e,o]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),o&&(Ye.R3(this.domNode,hn("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,o,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Ye.PO(this.domNode),this.keyElements.clear()}renderPart(e,o,s){const l=Ot.xo.modifierLabels[this.os];o.ctrlKey&&this.renderKey(e,l.ctrlKey,Boolean(null===s||void 0===s?void 0:s.ctrlKey),l.separator),o.shiftKey&&this.renderKey(e,l.shiftKey,Boolean(null===s||void 0===s?void 0:s.shiftKey),l.separator),o.altKey&&this.renderKey(e,l.altKey,Boolean(null===s||void 0===s?void 0:s.altKey),l.separator),o.metaKey&&this.renderKey(e,l.metaKey,Boolean(null===s||void 0===s?void 0:s.metaKey),l.separator);const d=o.keyLabel;d&&this.renderKey(e,d,Boolean(null===s||void 0===s?void 0:s.keyCode),"")}renderKey(e,o,s,l){Ye.R3(e,this.createKeyElement(o,s?".highlight":"")),l&&Ye.R3(e,hn("span.monaco-keybinding-key-separator",void 0,l))}renderUnbound(e){Ye.R3(e,this.createKeyElement((0,ct.N)("unbound","Unbound")))}createKeyElement(e,o=""){const s=hn("span.monaco-keybinding-key"+o,void 0,e);return this.keyElements.add(s),s}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const o of this.keyElements)this.labelBackground&&(o.style.backgroundColor=null===(e=this.labelBackground)||void 0===e?void 0:e.toString()),this.labelBorder&&(o.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(o.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(o.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,o){return e===o||!e&&!o||!!e&&!!o&&(0,At.fS)(e.firstPart,o.firstPart)&&(0,At.fS)(e.chordPart,o.chordPart)}}const un=new me.Ue((()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}));new me.Ue((()=>{const e=new Intl.Collator(void 0,{numeric:!0});return{collator:e}})),new me.Ue((()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"});return{collator:e}}));function compareFileNames(e,o,s=!1){const l=e||"",d=o||"",u=un.value.collator.compare(l,d);return un.value.collatorIsNumeric&&0===u&&l!==d?l<d?-1:1:u}function compareAnything(e,o,s){const l=e.toLowerCase(),d=o.toLowerCase(),u=compareByPrefix(e,o,s);if(u)return u;const g=l.endsWith(s),p=d.endsWith(s);if(g!==p)return g?-1:1;const m=compareFileNames(l,d);return 0!==m?m:l.localeCompare(d)}function compareByPrefix(e,o,s){const l=e.toLowerCase(),d=o.toLowerCase(),u=l.startsWith(s),g=d.startsWith(s);if(u!==g)return u?-1:1;if(u&&g){if(l.length<d.length)return-1;if(l.length>d.length)return 1}return 0}var gn=s(9898),quickInputList_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},quickInputList_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const pn=Ye.$;class ListElement{constructor(e){this.hidden=!1,this._onChecked=new Y.Q5,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class ListElementRenderer{get templateId(){return ListElementRenderer.ID}renderTemplate(e){const o=Object.create(null);o.toDisposeElement=[],o.toDisposeTemplate=[],o.entry=Ye.R3(e,pn(".quick-input-list-entry"));const s=Ye.R3(o.entry,pn("label.quick-input-list-label"));o.toDisposeTemplate.push(Ye.mu(s,Ye.tw.CLICK,(e=>{o.checkbox.offsetParent||e.preventDefault()}))),o.checkbox=Ye.R3(s,pn("input.quick-input-list-checkbox")),o.checkbox.type="checkbox",o.toDisposeTemplate.push(Ye.mu(o.checkbox,Ye.tw.CHANGE,(e=>{o.element.checked=o.checkbox.checked})));const l=Ye.R3(s,pn(".quick-input-list-rows")),d=Ye.R3(l,pn(".quick-input-list-row")),u=Ye.R3(l,pn(".quick-input-list-row"));o.label=new dn.g(d,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const g=Ye.R3(d,pn(".quick-input-list-entry-keybinding"));o.keybinding=new KeybindingLabel(g,Ce.OS);const p=Ye.R3(u,pn(".quick-input-list-label-meta"));return o.detail=new dn.g(p,{supportHighlights:!0,supportIcons:!0}),o.separator=Ye.R3(o.entry,pn(".quick-input-list-separator")),o.actionBar=new bi.o(o.entry),o.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),o.toDisposeTemplate.push(o.actionBar),o}renderElement(e,o,s){s.toDisposeElement=(0,fe.B9)(s.toDisposeElement),s.element=e,s.checkbox.checked=e.checked,s.toDisposeElement.push(e.onChecked((e=>s.checkbox.checked=e)));const{labelHighlights:l,descriptionHighlights:d,detailHighlights:u}=e,g=Object.create(null);g.matches=l||[],g.descriptionTitle=e.saneDescription,g.descriptionMatches=d||[],g.extraClasses=e.item.iconClasses,g.italic=e.item.italic,g.strikethrough=e.item.strikethrough,s.label.setLabel(e.saneLabel,e.saneDescription,g),s.keybinding.set(e.item.keybinding),e.saneDetail&&s.detail.setLabel(e.saneDetail,void 0,{matches:u,title:e.saneDetail}),e.separator&&e.separator.label?(s.separator.textContent=e.separator.label,s.separator.style.display=""):s.separator.style.display="none",s.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),s.actionBar.clear();const p=e.item.buttons;p&&p.length?(s.actionBar.push(p.map(((o,s)=>{let l=o.iconClass||(o.iconPath?getIconClass(o.iconPath):void 0);o.alwaysVisible&&(l=l?`${l} always-visible`:"always-visible");const d=new Li.aU(`id-${s}`,"",l,!0,(()=>quickInputList_awaiter(this,void 0,void 0,(function*(){e.fireButtonTriggered({button:o,item:e.item})}))));return d.tooltip=o.tooltip||"",d})),{icon:!0,label:!1}),s.entry.classList.add("has-actions")):s.entry.classList.remove("has-actions")}disposeElement(e,o,s){s.toDisposeElement=(0,fe.B9)(s.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=(0,fe.B9)(e.toDisposeElement),e.toDisposeTemplate=(0,fe.B9)(e.toDisposeTemplate)}}ListElementRenderer.ID="listelement";class ListElementDelegate{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return ListElementRenderer.ID}}var mn;(function(e){e[e["First"]=1]="First",e[e["Second"]=2]="Second",e[e["Last"]=3]="Last",e[e["Next"]=4]="Next",e[e["Previous"]=5]="Previous",e[e["NextPage"]=6]="NextPage",e[e["PreviousPage"]=7]="PreviousPage"})(mn||(mn={}));class QuickInputList{constructor(e,o,s){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new Y.Q5,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new Y.Q5,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new Y.Q5,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new Y.Q5,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new Y.Q5,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new Y.Q5,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Y.Q5,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=o,this.container=Ye.R3(this.parent,pn(".quick-input-list"));const l=new ListElementDelegate,d=new QuickInputAccessibilityProvider;this.list=s.createList("QuickInput",this.container,l,[new ListElementRenderer],{identityProvider:{getId:e=>e.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:d}),this.list.getHTMLElement().id=o,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown((e=>{const o=new _t.y(e);switch(o.keyCode){case 10:this.toggleCheckbox();break;case 31:(Ce.dz?e.metaKey:e.ctrlKey)&&this.list.setFocus((0,Re.w6)(this.list.length));break;case 16:{const e=this.list.getFocus();1===e.length&&0===e[0]&&this._onLeave.fire();break}case 18:{const e=this.list.getFocus();1===e.length&&e[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(o)}))),this.disposables.push(this.list.onMouseDown((e=>{2!==e.browserEvent.button&&e.browserEvent.preventDefault()}))),this.disposables.push(Ye.nm(this.container,Ye.tw.CLICK,(e=>{(e.x||e.y)&&this._onLeave.fire()}))),this.disposables.push(this.list.onMouseMiddleClick((e=>{this._onLeave.fire()}))),this.disposables.push(this.list.onContextMenu((e=>{"number"===typeof e.index&&(e.browserEvent.preventDefault(),this.list.setSelection([e.index]))}))),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Y.ju.map(this.list.onDidChangeFocus,(e=>e.elements.map((e=>e.item))))}get onDidChangeSelection(){return Y.ju.map(this.list.onDidChangeSelection,(e=>({items:e.elements.map((e=>e.item)),event:e.browserEvent})))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,o=!0){for(let s=0,l=e.length;s<l;s++){const l=e[s];if(!l.hidden){if(!l.checked)return!1;o=!0}}return o}getCheckedCount(){let e=0;const o=this.elements;for(let s=0,l=o.length;s<l;s++)o[s].checked&&e++;return e}getVisibleCount(){let e=0;const o=this.elements;for(let s=0,l=o.length;s<l;s++)o[s].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach((o=>{o.hidden||(o.checked=e)}))}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=(0,fe.B9)(this.elementDisposables);const fireButtonTriggered=e=>this.fireButtonTriggered(e);this.inputElements=e,this.elements=e.reduce(((o,s,l)=>{var d,u,g;if("separator"!==s.type){const p=l&&e[l-1],m=s.label&&s.label.replace(/\r?\n/g," "),f=s.meta&&s.meta.replace(/\r?\n/g," "),_=s.description&&s.description.replace(/\r?\n/g," "),C=s.detail&&s.detail.replace(/\r?\n/g," "),b=s.ariaLabel||[m,_,C].map((e=>(0,xi.JL)(e))).filter((e=>!!e)).join(", "),w=this.parent.classList.contains("show-checkboxes");o.push(new ListElement({hasCheckbox:w,index:l,item:s,saneLabel:m,saneMeta:f,saneAriaLabel:b,saneDescription:_,saneDetail:C,labelHighlights:null===(d=s.highlights)||void 0===d?void 0:d.label,descriptionHighlights:null===(u=s.highlights)||void 0===u?void 0:u.description,detailHighlights:null===(g=s.highlights)||void 0===g?void 0:g.detail,checked:!1,separator:p&&"separator"===p.type?p:void 0,fireButtonTriggered:fireButtonTriggered}))}return o}),[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map((e=>e.onChecked((()=>this.fireCheckedEvents()))))),this.elementsToIndexes=this.elements.reduce(((e,o,s)=>(e.set(o.item,s),e)),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map((e=>e.item))}setFocusedElements(e){if(this.list.setFocus(e.filter((e=>this.elementsToIndexes.has(e))).map((e=>this.elementsToIndexes.get(e)))),e.length>0){const e=this.list.getFocus()[0];"number"===typeof e&&this.list.reveal(e)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter((e=>this.elementsToIndexes.has(e))).map((e=>this.elementsToIndexes.get(e))))}getCheckedElements(){return this.elements.filter((e=>e.checked)).map((e=>e.item))}setCheckedElements(e){try{this._fireCheckedEvents=!1;const o=new Set;for(const s of e)o.add(s);for(const e of this.elements)e.checked=o.has(e.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===mn.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=mn.First),e===mn.Previous&&0===this.list.getFocus()[0]&&(e=mn.Last),e===mn.Second&&this.list.length<2&&(e=mn.First),e){case mn.First:this.list.focusFirst();break;case mn.Second:this.list.focusNth(1);break;case mn.Last:this.list.focusLast();break;case mn.Next:this.list.focusNext();break;case mn.Previous:this.list.focusPrevious();break;case mn.NextPage:this.list.focusNextPage();break;case mn.PreviousPage:this.list.focusPreviousPage();break}const o=this.list.getFocus()[0];"number"===typeof o&&this.list.reveal(o)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${44*Math.floor(e/44)}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),e&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let o;this.elements.forEach((s=>{const l=this.matchOnLabel?(0,ve.f6)((0,ki.Gt)(e,(0,ki.Ho)(s.saneLabel))):void 0,d=this.matchOnDescription?(0,ve.f6)((0,ki.Gt)(e,(0,ki.Ho)(s.saneDescription||""))):void 0,u=this.matchOnDetail?(0,ve.f6)((0,ki.Gt)(e,(0,ki.Ho)(s.saneDetail||""))):void 0,g=this.matchOnMeta?(0,ve.f6)((0,ki.Gt)(e,(0,ki.Ho)(s.saneMeta||""))):void 0;if(l||d||u||g?(s.labelHighlights=l,s.descriptionHighlights=d,s.detailHighlights=u,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item.alwaysShow),s.separator=void 0,!this.sortByLabel){const e=s.index&&this.inputElements[s.index-1];o=e&&"separator"===e.type?e:o,o&&!s.hidden&&(s.separator=o,o=void 0)}}))}else this.elements.forEach((e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;const o=e.index&&this.inputElements[e.index-1];e.separator=o&&"separator"===o.type?o:void 0}));const o=this.elements.filter((e=>!e.hidden));if(this.sortByLabel&&e){const s=e.toLowerCase();o.sort(((e,o)=>compareEntries(e,o,s)))}return this.elementsToIndexes=o.reduce(((e,o,s)=>(e.set(o.item,s),e)),new Map),this.list.splice(0,this.list.length,o),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(o.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),o=this.allVisibleChecked(e);for(const s of e)s.checked=!o}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return"none"!==this.container.style.display}dispose(){this.elementDisposables=(0,fe.B9)(this.elementDisposables),this.disposables=(0,fe.B9)(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}function compareEntries(e,o,s){const l=e.labelHighlights||[],d=o.labelHighlights||[];return l.length&&!d.length?-1:!l.length&&d.length?1:0===l.length&&0===d.length?0:compareAnything(e.saneLabel,o.saneLabel,s)}quickInputList_decorate([gn.H],QuickInputList.prototype,"onDidChangeFocus",null),quickInputList_decorate([gn.H],QuickInputList.prototype,"onDidChangeSelection",null);class QuickInputAccessibilityProvider{getWidgetAriaLabel(){return(0,ct.N)("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}var quickInput_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const _n=Ye.$,Cn={iconClass:xi.lA.quickInputBack.classNames,tooltip:(0,ct.N)("quickInput.back","Back"),handle:-1};class QuickInput extends fe.JT{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=QuickInput.noPromptMessage,this._severity=lt.Z.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new Y.Q5),this.onDidHideEmitter=this._register(new Y.Q5),this.onDisposeEmitter=this._register(new Y.Q5),this.visibleDisposables=this._register(new fe.SL),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const o=this._ignoreFocusOut!==e&&!Ce.gn;this._ignoreFocusOut=e&&!Ce.gn,o&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((e=>{-1!==this.buttons.indexOf(e)&&this.onDidTriggerButtonEmitter.fire(e)}))),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=an.Jq.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:e||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText=" ");const o=this.getDescription();if(this.ui.description1.textContent!==o&&(this.ui.description1.textContent=o),this.ui.description2.textContent!==o&&(this.ui.description2.textContent=o),this.busy&&!this.busyDelay&&(this.busyDelay=new me._F,this.busyDelay.setIfNotSet((()=>{this.visible&&this.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const e=this.buttons.filter((e=>e===Cn));this.ui.leftActionBar.push(e.map(((e,o)=>{const s=new Li.aU(`id-${o}`,"",e.iconClass||getIconClass(e.iconPath),!0,(()=>quickInput_awaiter(this,void 0,void 0,(function*(){this.onDidTriggerButtonEmitter.fire(e)}))));return s.tooltip=e.tooltip||"",s})),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this.buttons.filter((e=>e!==Cn));this.ui.rightActionBar.push(o.map(((e,o)=>{const s=new Li.aU(`id-${o}`,"",e.iconClass||getIconClass(e.iconPath),!0,(()=>quickInput_awaiter(this,void 0,void 0,(function*(){this.onDidTriggerButtonEmitter.fire(e)}))));return s.tooltip=e.tooltip||"",s})),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const s=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==s&&(this._lastValidationMessage=s,Ye.mc(this.ui.message,...(0,Gi.T)(s))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,ct.N)("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==lt.Z.Ignore){const o=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=o.foreground?`${o.foreground}`:"",this.ui.message.style.backgroundColor=o.background?`${o.background}`:"",this.ui.message.style.border=o.border?`1px solid ${o.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}QuickInput.noPromptMessage=(0,ct.N)("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class QuickPick extends QuickInput{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Y.Q5),this.onWillAcceptEmitter=this._register(new Y.Q5),this.onDidAcceptEmitter=this._register(new Y.Q5),this.onDidCustomEmitter=this._register(new Y.Q5),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?an.jG.NONE:an.jG.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Y.Q5),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Y.Q5),this.onDidTriggerItemButtonEmitter=this._register(new Y.Q5),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,o){if(this._value!==e){if(this._value=e,o||this.update(),this.visible){const e=this.ui.list.filter(this.filterValue(this._value));e&&this.trySelectFirst()}this.onDidChangeValueEmitter.fire(this._value)}}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?an.X5:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(mn.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((e=>{this.doSetValue(e,!0)}))),this.visibleDisposables.add(this.ui.inputBox.onMouseDown((e=>{this.autoFocusOnList||this.ui.list.clearFocus()}))),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown((e=>{switch(e.keyCode){case 18:this.ui.list.focus(mn.Next),this.canSelectMany&&this.ui.list.domFocus(),Ye.zB.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(mn.Previous):this.ui.list.focus(mn.Last),this.canSelectMany&&this.ui.list.domFocus(),Ye.zB.stop(e,!0);break;case 12:this.ui.list.focus(mn.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ye.zB.stop(e,!0);break;case 11:this.ui.list.focus(mn.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ye.zB.stop(e,!0);break;case 17:if(!this._canAcceptInBackground)return;if(!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||(this.ui.list.focus(mn.First),Ye.zB.stop(e,!0));break;case 13:!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||(this.ui.list.focus(mn.Last),Ye.zB.stop(e,!0));break}}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((()=>{this.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this.ui.list.onDidChangeFocus((e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,Re.fS)(e,this._activeItems,((e,o)=>e===o))||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((({items:e,event:o})=>{this.canSelectMany?e.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&(0,Re.fS)(e,this._selectedItems,((e,o)=>e===o))||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(o instanceof MouseEvent&&1===o.button))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&(0,Re.fS)(e,this._selectedItems,((e,o)=>e===o))||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((e=>this.onDidTriggerItemButtonEmitter.fire(e)))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let o=!1;this.onWillAcceptEmitter.fire({veto:()=>o=!0}),o||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return Ye.nm(this.ui.container,Ye.tw.KEY_UP,(e=>{if(this.canSelectMany||!this._quickNavigate)return;const o=new _t.y(e),s=o.keyCode,l=this._quickNavigate.keybindings,d=l.some((e=>{const[l,d]=e.getParts();return!d&&(l.shiftKey&&4===s?!(o.ctrlKey||o.altKey||o.metaKey):!(!l.altKey||6!==s)||(!(!l.ctrlKey||5!==s)||!(!l.metaKey||57!==s)))}));d&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)}))}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,o=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",o&&!this.description);const s={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!o,progressBar:!o,visibleCount:!0,count:this.canSelectMany,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(s),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const l=this.ariaLabel||this.placeholder||QuickPick.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==l&&(this.ui.inputBox.ariaLabel=l),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case an.jG.NONE:this._itemActivation=an.jG.FIRST;break;case an.jG.SECOND:this.ui.list.focus(mn.Second),this._itemActivation=an.jG.FIRST;break;case an.jG.LAST:this.ui.list.focus(mn.Last),this._itemActivation=an.jG.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),s.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(mn.First)),this.keepScrollPosition&&(this.scrollTop=e)}}QuickPick.DEFAULT_ARIA_LABEL=(0,ct.N)("quickInputBox.ariaLabel","Type to narrow down results.");class QuickInputController extends fe.JT{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Y.Q5),this.onDidCustomEmitter=this._register(new Y.Q5),this.onDidTriggerButtonEmitter=this._register(new Y.Q5),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Y.Q5),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Y.Q5),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const listener=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};this._register(Ye.nm(window,Ye.tw.KEY_DOWN,listener,!0)),this._register(Ye.nm(window,Ye.tw.KEY_UP,listener,!0)),this._register(Ye.nm(window,Ye.tw.MOUSE_DOWN,listener,!0))}getUI(){if(this.ui)return this.ui;const e=Ye.R3(this.parentElement,_n(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const o=Ye.dS(e),s=Ye.R3(e,_n(".quick-input-titlebar")),l=this._register(new bi.o(s));l.domNode.classList.add("quick-input-left-action-bar");const d=Ye.R3(s,_n(".quick-input-title")),u=this._register(new bi.o(s));u.domNode.classList.add("quick-input-right-action-bar");const g=Ye.R3(e,_n(".quick-input-description")),p=Ye.R3(e,_n(".quick-input-header")),m=Ye.R3(p,_n("input.quick-input-check-all"));m.type="checkbox",this._register(Ye.mu(m,Ye.tw.CHANGE,(e=>{const o=m.checked;T.setAllVisibleChecked(o)}))),this._register(Ye.nm(m,Ye.tw.CLICK,(e=>{(e.x||e.y)&&b.setFocus()})));const f=Ye.R3(p,_n(".quick-input-description")),_=Ye.R3(p,_n(".quick-input-and-message")),C=Ye.R3(_,_n(".quick-input-filter")),b=this._register(new QuickInputBox(C));b.setAttribute("aria-describedby",`${this.idPrefix}message`);const w=Ye.R3(C,_n(".quick-input-visible-count"));w.setAttribute("aria-live","polite"),w.setAttribute("aria-atomic","true");const S=new Zi.Z(w,{countFormat:(0,ct.N)({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),y=Ye.R3(C,_n(".quick-input-count"));y.setAttribute("aria-live","polite");const L=new Zi.Z(y,{countFormat:(0,ct.N)({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),x=Ye.R3(p,_n(".quick-input-action")),k=new Button(x);k.label=(0,ct.N)("ok","OK"),this._register(k.onDidClick((e=>{this.onDidAcceptEmitter.fire()})));const N=Ye.R3(p,_n(".quick-input-action")),D=new Button(N);D.label=(0,ct.N)("custom","Custom"),this._register(D.onDidClick((e=>{this.onDidCustomEmitter.fire()})));const E=Ye.R3(_,_n(`#${this.idPrefix}message.quick-input-message`)),T=this._register(new QuickInputList(e,this.idPrefix+"list",this.options));this._register(T.onChangedAllVisibleChecked((e=>{m.checked=e}))),this._register(T.onChangedVisibleCount((e=>{S.setCount(e)}))),this._register(T.onChangedCheckedCount((e=>{L.setCount(e)}))),this._register(T.onLeave((()=>{setTimeout((()=>{b.setFocus(),this.controller instanceof QuickPick&&this.controller.canSelectMany&&T.clearFocus()}),0)}))),this._register(T.onDidChangeFocus((()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")})));const I=new ProgressBar(e);I.getContainer().classList.add("quick-input-progress");const A=Ye.go(e);return this._register(A),this._register(Ye.nm(e,Ye.tw.FOCUS,(e=>{this.previousFocusElement=e.relatedTarget instanceof HTMLElement?e.relatedTarget:void 0}),!0)),this._register(A.onDidBlur((()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(an.Jq.Blur),this.previousFocusElement=void 0}))),this._register(Ye.nm(e,Ye.tw.FOCUS,(e=>{b.setFocus()}))),this._register(Ye.nm(e,Ye.tw.KEY_DOWN,(o=>{const s=new _t.y(o);switch(s.keyCode){case 3:Ye.zB.stop(o,!0),this.onDidAcceptEmitter.fire();break;case 9:Ye.zB.stop(o,!0),this.hide(an.Jq.Gesture);break;case 2:if(!s.altKey&&!s.ctrlKey&&!s.metaKey){const l=[".action-label.codicon"];e.classList.contains("show-checkboxes")?l.push("input"):l.push("input[type=text]"),this.getUI().list.isDisplayed()&&l.push(".monaco-list");const d=e.querySelectorAll(l.join(", "));s.shiftKey&&s.target===d[0]?(Ye.zB.stop(o,!0),d[d.length-1].focus()):s.shiftKey||s.target!==d[d.length-1]||(Ye.zB.stop(o,!0),d[0].focus())}break}}))),this.ui={container:e,styleSheet:o,leftActionBar:l,titleBar:s,title:d,description1:g,description2:f,rightActionBar:u,checkAll:m,filterContainer:C,inputBox:b,visibleCountContainer:w,visibleCount:S,countContainer:y,count:L,okContainer:x,ok:k,message:E,customButtonContainer:N,customButton:D,list:T,progressBar:I,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setComboboxAccessibility:e=>this.setComboboxAccessibility(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e)},this.updateStyles(),this.ui}pick(e,o={},s=Z.T.None){return new Promise(((l,d)=>{let resolve=e=>{resolve=l,o.onKeyMods&&o.onKeyMods(u.keyMods),l(e)};if(s.isCancellationRequested)return void resolve(void 0);const u=this.createQuickPick();let g;const p=[u,u.onDidAccept((()=>{if(u.canSelectMany)resolve(u.selectedItems.slice()),u.hide();else{const e=u.activeItems[0];e&&(resolve(e),u.hide())}})),u.onDidChangeActive((e=>{const s=e[0];s&&o.onDidFocus&&o.onDidFocus(s)})),u.onDidChangeSelection((e=>{if(!u.canSelectMany){const o=e[0];o&&(resolve(o),u.hide())}})),u.onDidTriggerItemButton((e=>o.onDidTriggerItemButton&&o.onDidTriggerItemButton(Object.assign(Object.assign({},e),{removeItem:()=>{const o=u.items.indexOf(e.item);if(-1!==o){const e=u.items.slice(),s=e.splice(o,1),l=u.activeItems.filter((e=>e!==s[0])),d=u.keepScrollPosition;u.keepScrollPosition=!0,u.items=e,l&&(u.activeItems=l),u.keepScrollPosition=d}}})))),u.onDidChangeValue((e=>{!g||e||1===u.activeItems.length&&u.activeItems[0]===g||(u.activeItems=[g])})),s.onCancellationRequested((()=>{u.hide()})),u.onDidHide((()=>{(0,fe.B9)(p),resolve(void 0)}))];u.title=o.title,u.canSelectMany=!!o.canPickMany,u.placeholder=o.placeHolder,u.ignoreFocusOut=!!o.ignoreFocusLost,u.matchOnDescription=!!o.matchOnDescription,u.matchOnDetail=!!o.matchOnDetail,u.matchOnLabel=void 0===o.matchOnLabel||o.matchOnLabel,u.autoFocusOnList=void 0===o.autoFocusOnList||o.autoFocusOnList,u.quickNavigate=o.quickNavigate,u.contextKey=o.contextKey,u.busy=!0,Promise.all([e,o.activeItem]).then((([e,o])=>{g=o,u.busy=!1,u.items=e,u.canSelectMany&&(u.selectedItems=e.filter((e=>"separator"!==e.type&&e.picked))),g&&(u.activeItems=[g])})),u.show(),Promise.resolve(e).then(void 0,(e=>{d(e),u.hide()}))}))}createQuickPick(){const e=this.getUI();return new QuickPick(e)}show(e){const o=this.getUI();this.onShowEmitter.fire();const s=this.controller;this.controller=e,s&&s.didHide(),this.setEnabled(!0),o.leftActionBar.clear(),o.title.textContent="",o.description1.textContent="",o.description2.textContent="",o.rightActionBar.clear(),o.checkAll.checked=!1,o.inputBox.placeholder="",o.inputBox.password=!1,o.inputBox.showDecoration(lt.Z.Ignore),o.visibleCount.setCount(0),o.count.setCount(0),Ye.mc(o.message),o.progressBar.stop(),o.list.setElements([]),o.list.matchOnDescription=!1,o.list.matchOnDetail=!1,o.list.matchOnLabel=!0,o.list.sortByLabel=!0,o.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),o.inputBox.ariaLabel="";const l=this.options.backKeybindingLabel();Cn.tooltip=l?(0,ct.N)("quickInput.backWithKeybinding","Back ({0})",l):(0,ct.N)("quickInput.back","Back"),o.container.style.display="",this.updateLayout(),o.inputBox.setFocus()}setVisibilities(e){const o=this.getUI();o.title.style.display=e.title?"":"none",o.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",o.description2.style.display=!e.description||e.inputBox||e.checkAll?"none":"",o.checkAll.style.display=e.checkAll?"":"none",o.filterContainer.style.display=e.inputBox?"":"none",o.visibleCountContainer.style.display=e.visibleCount?"":"none",o.countContainer.style.display=e.count?"":"none",o.okContainer.style.display=e.ok?"":"none",o.customButtonContainer.style.display=e.customButton?"":"none",o.message.style.display=e.message?"":"none",o.progressBar.getContainer().style.display=e.progressBar?"":"none",o.list.display(!!e.list),o.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const o=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(o.inputBox.setAttribute("role","combobox"),o.inputBox.setAttribute("aria-haspopup","true"),o.inputBox.setAttribute("aria-autocomplete","list"),o.inputBox.setAttribute("aria-activedescendant",o.list.getActiveDescendant()||"")):(o.inputBox.removeAttribute("role"),o.inputBox.removeAttribute("aria-haspopup"),o.inputBox.removeAttribute("aria-autocomplete"),o.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const o of this.getUI().leftActionBar.viewItems)o.getAction().enabled=e;for(const o of this.getUI().rightActionBar.viewItems)o.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var o;const s=this.controller;if(s){const l=!(null===(o=this.ui)||void 0===o?void 0:o.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!l){let e=this.previousFocusElement;while(e&&!e.offsetParent)e=(0,ve.f6)(e.parentElement);(null===e||void 0===e?void 0:e.offsetParent)?(e.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}s.didHide(e)}}layout(e,o){this.dimension=e,this.titleBarOffset=o,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,o=Math.min(.62*this.dimension.width,QuickInputController.MAX_WIDTH);e.width=o+"px",e.marginLeft="-"+o/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:o,quickInputForeground:s,contrastBorder:l,widgetShadow:d}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=o?o.toString():"",this.ui.container.style.color=s?s.toString():"",this.ui.container.style.border=l?`1px solid ${l}`:"",this.ui.container.style.boxShadow=d?`0 0 8px 2px ${d}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const u=[];this.styles.list.pickerGroupBorder&&u.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&u.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(u.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&u.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&u.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&u.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&u.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&u.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),u.push("}"));const g=u.join("\n");g!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=g)}}}QuickInputController.MAX_WIDTH=600;var vn=s(9785),bn=s(8289),wn=s(725),Sn=s(1157),quickAccess_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},quickAccess_param=function(e,o){return function(s,l){o(s,l,e)}};let yn=class QuickAccessController extends fe.JT{constructor(e,o){super(),this.quickInputService=e,this.instantiationService=o,this.registry=St.B.as(wn.IP.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",o){this.doShowOrPick(e,!1,o)}doShowOrPick(e,o,s){var l;const[d,u]=this.getOrInstantiateProvider(e),g=this.visibleQuickAccess,p=null===g||void 0===g?void 0:g.descriptor;if(g&&u&&p===u)return e===u.prefix||(null===s||void 0===s?void 0:s.preserveValue)||(g.picker.value=e),void this.adjustValueSelection(g.picker,u,s);if(u&&!(null===s||void 0===s?void 0:s.preserveValue)){let o;if(g&&p&&p!==u){const e=g.value.substr(p.prefix.length);e&&(o=`${u.prefix}${e}`)}if(!o){const e=null===d||void 0===d?void 0:d.defaultFilterValue;e===wn.Ry.LAST?o=this.lastAcceptedPickerValues.get(u):"string"===typeof e&&(o=`${u.prefix}${e}`)}"string"===typeof o&&(e=o)}const m=new fe.SL,f=m.add(this.quickInputService.createQuickPick());let _;f.value=e,this.adjustValueSelection(f,u,s),f.placeholder=null===u||void 0===u?void 0:u.placeholder,f.quickNavigate=null===s||void 0===s?void 0:s.quickNavigateConfiguration,f.hideInput=!!f.quickNavigate&&!g,("number"===typeof(null===s||void 0===s?void 0:s.itemActivation)||(null===s||void 0===s?void 0:s.quickNavigateConfiguration))&&(f.itemActivation=null!==(l=null===s||void 0===s?void 0:s.itemActivation)&&void 0!==l?l:Sn.jG.SECOND),f.contextKey=null===u||void 0===u?void 0:u.contextKey,f.filterValue=e=>e.substring(u?u.prefix.length:0),(null===u||void 0===u?void 0:u.placeholder)&&(f.ariaLabel=null===u||void 0===u?void 0:u.placeholder),o&&(_=new me.CR,m.add((0,bn.I)(f.onWillAccept)((e=>{e.veto(),f.hide()})))),m.add(this.registerPickerListeners(f,d,u,e));const C=m.add(new Z.A);return d&&m.add(d.provide(f,C.token)),(0,bn.I)(f.onDidHide)((()=>{0===f.selectedItems.length&&C.cancel(),m.dispose(),null===_||void 0===_||_.complete(f.selectedItems.slice(0))})),f.show(),o?null===_||void 0===_?void 0:_.p:void 0}adjustValueSelection(e,o,s){var l;let d;d=(null===s||void 0===s?void 0:s.preserveValue)?[e.value.length,e.value.length]:[null!==(l=null===o||void 0===o?void 0:o.prefix.length)&&void 0!==l?l:0,e.value.length],e.valueSelection=d}registerPickerListeners(e,o,s,l){const d=new fe.SL,u=this.visibleQuickAccess={picker:e,descriptor:s,value:l};return d.add((0,fe.OF)((()=>{u===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)}))),d.add(e.onDidChangeValue((e=>{const[s]=this.getOrInstantiateProvider(e);s!==o?this.show(e,{preserveValue:!0}):u.value=e}))),s&&d.add(e.onDidAccept((()=>{this.lastAcceptedPickerValues.set(s,e.value)}))),d}getOrInstantiateProvider(e){const o=this.registry.getQuickAccessProvider(e);if(!o)return[void 0,void 0];let s=this.mapProviderToDescriptor.get(o);return s||(s=this.instantiationService.createInstance(o.ctor),this.mapProviderToDescriptor.set(o,s)),[s,o]}};yn=quickAccess_decorate([quickAccess_param(0,Sn.eJ),quickAccess_param(1,ot.TG)],yn);var quickInput_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},quickInput_param=function(e,o){return function(s,l){o(s,l,e)}};let Ln=class QuickInputService extends Xe.bB{constructor(e,o,s,l,d){super(s),this.instantiationService=e,this.contextKeyService=o,this.accessibilityService=l,this.layoutService=d,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(yn))),this._quickAccess}createController(e=this.layoutService,o){var s,l;const d={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:e=>this.setContextKey(e),returnFocus:()=>e.focus(),createList:(e,o,s,l,d)=>this.instantiationService.createInstance(vn.ev,e,o,s,l,d),styles:this.computeStyles()},u=this._register(new QuickInputController(Object.assign(Object.assign({},d),o)));return u.layout(e.dimension,null!==(l=null===(s=e.offset)||void 0===s?void 0:s.top)&&void 0!==l?l:0),this._register(e.onDidLayout((o=>{var s,l;return u.layout(o,null!==(l=null===(s=e.offset)||void 0===s?void 0:s.top)&&void 0!==l?l:0)}))),this._register(u.onShow((()=>this.resetContextKeys()))),this._register(u.onHide((()=>this.resetContextKeys()))),u}setContextKey(e){let o;e&&(o=this.contexts.get(e),o||(o=new tt.uy(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,o))),o&&o.get()||(this.resetContextKeys(),o&&o.set(!0))}resetContextKeys(){this.contexts.forEach((e=>{e.get()&&e.reset()}))}pick(e,o={},s=Z.T.None){return this.controller.pick(e,o,s)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},(0,Ti.o)(this.theme,{quickInputBackground:Hi.zKr,quickInputForeground:Hi.tZ6,quickInputTitleBackground:Hi.loF,contrastBorder:Hi.lRK,widgetShadow:Hi.rh})),inputBox:(0,Ti.o)(this.theme,{inputForeground:Hi.zJb,inputBackground:Hi.sEe,inputBorder:Hi.dt_,inputValidationInfoBackground:Hi._lC,inputValidationInfoForeground:Hi.YI3,inputValidationInfoBorder:Hi.EPQ,inputValidationWarningBackground:Hi.RV_,inputValidationWarningForeground:Hi.SUG,inputValidationWarningBorder:Hi.C3g,inputValidationErrorBackground:Hi.paE,inputValidationErrorForeground:Hi._t9,inputValidationErrorBorder:Hi.OZR}),countBadge:(0,Ti.o)(this.theme,{badgeBackground:Hi.g8u,badgeForeground:Hi.qeD,badgeBorder:Hi.lRK}),button:(0,Ti.o)(this.theme,{buttonForeground:Hi.j5u,buttonBackground:Hi.b7$,buttonHoverBackground:Hi.GO4,buttonBorder:Hi.lRK}),progressBar:(0,Ti.o)(this.theme,{progressBarBackground:Hi.zRJ}),keybindingLabel:(0,Ti.o)(this.theme,{keybindingLabelBackground:Hi.oQ$,keybindingLabelForeground:Hi.lWp,keybindingLabelBorder:Hi.AWI,keybindingLabelBottomBorder:Hi.K19,keybindingLabelShadow:Hi.rh}),list:(0,Ti.o)(this.theme,{listBackground:Hi.zKr,listInactiveFocusForeground:Hi.NPS,listInactiveSelectionIconForeground:Hi.cbQ,listInactiveFocusBackground:Hi.Vqd,listFocusOutline:Hi.xL1,listInactiveFocusOutline:Hi.xL1,pickerGroupBorder:Hi.opG,pickerGroupForeground:Hi.kJk})}}};Ln=quickInput_decorate([quickInput_param(0,ot.TG),quickInput_param(1,tt.i6),quickInput_param(2,Xe.XE),quickInput_param(3,$i.F),quickInput_param(4,st)],Ln);var standaloneQuickInputService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},standaloneQuickInputService_param=function(e,o){return function(s,l){o(s,l,e)}};let xn=class EditorScopedQuickInputService extends Ln{constructor(e,o,s,l,d,u){super(o,s,l,d,new at(e.getContainerDomNode(),u)),this.host=void 0;const g=QuickInputEditorContribution.get(e);if(g){const o=g.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return o.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};xn=standaloneQuickInputService_decorate([standaloneQuickInputService_param(1,ot.TG),standaloneQuickInputService_param(2,tt.i6),standaloneQuickInputService_param(3,Xe.XE),standaloneQuickInputService_param(4,$i.F),standaloneQuickInputService_param(5,re.$)],xn);let kn=class StandaloneQuickInputService{constructor(e,o){this.instantiationService=e,this.codeEditorService=o,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let o=this.mapEditorToService.get(e);if(!o){const s=o=this.instantiationService.createInstance(xn,e);this.mapEditorToService.set(e,o),(0,bn.I)(e.onDidDispose)((()=>{s.dispose(),this.mapEditorToService.delete(e)}))}return o}get quickAccess(){return this.activeService.quickAccess}pick(e,o={},s=Z.T.None){return this.activeService.pick(e,o,s)}createQuickPick(){return this.activeService.createQuickPick()}};kn=standaloneQuickInputService_decorate([standaloneQuickInputService_param(0,ot.TG),standaloneQuickInputService_param(1,re.$)],kn);class QuickInputEditorContribution{constructor(e){this.editor=e,this.widget=new QuickInputEditorWidget(this.editor)}static get(e){return e.getContribution(QuickInputEditorContribution.ID)}dispose(){this.widget.dispose()}}QuickInputEditorContribution.ID="editor.controller.quickInput";class QuickInputEditorWidget{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return QuickInputEditorWidget.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}QuickInputEditorWidget.ID="editor.contrib.quickInputWidget",(0,ji._K)(QuickInputEditorContribution.ID,QuickInputEditorContribution);class ParsedTokenThemeRule{constructor(e,o,s,l,d){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=o,this.fontStyle=s,this.foreground=l,this.background=d}}function parseTokenTheme(e){if(!e||!Array.isArray(e))return[];const o=[];let s=0;for(let l=0,d=e.length;l<d;l++){const d=e[l];let u=-1;if("string"===typeof d.fontStyle){u=0;const e=d.fontStyle.split(" ");for(let o=0,s=e.length;o<s;o++){const s=e[o];switch(s){case"italic":u|=1;break;case"bold":u|=2;break;case"underline":u|=4;break;case"strikethrough":u|=8;break}}}let g=null;"string"===typeof d.foreground&&(g=d.foreground);let p=null;"string"===typeof d.background&&(p=d.background),o[s++]=new ParsedTokenThemeRule(d.token||"",l,u,g,p)}return o}function resolveParsedTokenThemeRules(e,o){e.sort(((e,o)=>{const s=strcmp(e.token,o.token);return 0!==s?s:e.index-o.index}));let s=0,l="000000",d="ffffff";while(e.length>=1&&""===e[0].token){const o=e.shift();-1!==o.fontStyle&&(s=o.fontStyle),null!==o.foreground&&(l=o.foreground),null!==o.background&&(d=o.background)}const u=new ColorMap;for(let _ of o)u.getId(_);const g=u.getId(l),p=u.getId(d),m=new ThemeTrieElementRule(s,g,p),f=new ThemeTrieElement(m);for(let _=0,C=e.length;_<C;_++){const o=e[_];f.insert(o.token,o.fontStyle,u.getId(o.foreground),u.getId(o.background))}return new TokenTheme(u,f)}const Nn=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class ColorMap{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(null===e)return 0;const o=e.match(Nn);if(!o)throw new Error("Illegal value for token color: "+e);e=o[1].toUpperCase();let s=this._color2id.get(e);return s||(s=++this._lastColorId,this._color2id.set(e,s),this._id2color[s]=qi.Il.fromHex("#"+e),s)}getColorMap(){return this._id2color.slice(0)}}class TokenTheme{constructor(e,o){this._colorMap=e,this._root=o,this._cache=new Map}static createFromRawTokenTheme(e,o){return this.createFromParsedTokenTheme(parseTokenTheme(e),o)}static createFromParsedTokenTheme(e,o){return resolveParsedTokenThemeRules(e,o)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,o){let s=this._cache.get(o);if("undefined"===typeof s){const e=this._match(o),l=toStandardTokenType(o);s=(e.metadata|l<<8)>>>0,this._cache.set(o,s)}return(s|e<<0)>>>0}}const Dn=/\b(comment|string|regex|regexp)\b/;function toStandardTokenType(e){const o=e.match(Dn);if(!o)return 0;switch(o[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function strcmp(e,o){return e<o?-1:e>o?1:0}class ThemeTrieElementRule{constructor(e,o,s){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=o,this._background=s,this.metadata=(this._fontStyle<<10|this._foreground<<14|this._background<<23)>>>0}clone(){return new ThemeTrieElementRule(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,o,s){-1!==e&&(this._fontStyle=e),0!==o&&(this._foreground=o),0!==s&&(this._background=s),this.metadata=(this._fontStyle<<10|this._foreground<<14|this._background<<23)>>>0}}class ThemeTrieElement{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(""===e)return this._mainRule;const o=e.indexOf(".");let s,l;-1===o?(s=e,l=""):(s=e.substring(0,o),l=e.substring(o+1));const d=this._children.get(s);return"undefined"!==typeof d?d.match(l):this._mainRule}insert(e,o,s,l){if(""===e)return void this._mainRule.acceptOverwrite(o,s,l);const d=e.indexOf(".");let u,g;-1===d?(u=e,g=""):(u=e.substring(0,d),g=e.substring(d+1));let p=this._children.get(u);"undefined"===typeof p&&(p=new ThemeTrieElement(this._mainRule.clone()),this._children.set(u,p)),p.insert(g,o,s,l)}}function generateTokensCSSForColorMap(e){const o=[];for(let s=1,l=e.length;s<l;s++){const l=e[s];o[s]=`.mtk${s} { color: ${l}; }`}return o.push(".mtki { font-style: italic; }"),o.push(".mtkb { font-weight: bold; }"),o.push(".mtku { text-decoration: underline; text-underline-position: under; }"),o.push(".mtks { text-decoration: line-through; }"),o.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),o.join("\n")}const En={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Hi.cvW]:"#FFFFFE",[Hi.NOs]:"#000000",[Hi.ES4]:"#E5EBF1",[Vi.tR]:"#D3D3D3",[Vi.Ym]:"#939393",[Hi.Rzx]:"#ADD6FF4D"}},Tn={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Hi.cvW]:"#1E1E1E",[Hi.NOs]:"#D4D4D4",[Hi.ES4]:"#3A3D41",[Vi.tR]:"#404040",[Vi.Ym]:"#707070",[Hi.Rzx]:"#ADD6FF26"}},In={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Hi.cvW]:"#000000",[Hi.NOs]:"#FFFFFF",[Vi.tR]:"#FFFFFF",[Vi.Ym]:"#FFFFFF"}};var An=s(2321),Mn=s(9554);function getIconsStyleSheet(e){const o=new Y.Q5,s=(0,Mn.Ks)();return s.onDidChange((()=>o.fire())),null===e||void 0===e||e.onDidProductIconThemeChange((()=>o.fire())),{onDidChange:o.event,getCSS(){const o=e?e.getProductIconTheme():new UnthemedProductIconTheme,l={},formatIconRule=e=>{const s=o.getIcon(e);if(!s)return;const d=s.font;return d?(l[d.id]=d.definition,`.codicon-${e.id}:before { content: '${s.fontCharacter}'; font-family: ${(0,Ye._h)(d.id)}; }`):`.codicon-${e.id}:before { content: '${s.fontCharacter}'; }`},d=[];for(let e of s.getIcons()){const o=formatIconRule(e);o&&d.push(o)}for(let e in l){const o=l[e],s=o.weight?`font-weight: ${o.weight};`:"",u=o.style?`font-style: ${o.style};`:"",g=o.src.map((e=>`${(0,Ye.wY)(e.location)} format('${e.format}')`)).join(", ");d.push(`@font-face { src: ${g}; font-family: ${(0,Ye._h)(e)};${s}${u} font-display: block; }`)}return d.join("\n")}}}class UnthemedProductIconTheme{getIcon(e){const o=(0,Mn.Ks)();let s=e.defaults;while(Xe.kS.isThemeIcon(s)){const e=o.getIcon(s.id);if(!e)return;s=e.defaults}return s}}const Rn="vs",Pn="vs-dark",On="hc-black",Fn=St.B.as(Hi.IPX.ColorContribution),Bn=St.B.as(Xe.IP.ThemingContribution);class StandaloneTheme{constructor(e,o){this.semanticHighlighting=!1,this.themeData=o;const s=o.base;e.length>0?(isBuiltinTheme(e)?this.id=e:this.id=s+" "+e,this.themeName=e):(this.id=s,this.themeName=s),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let o in this.themeData.colors)e.set(o,qi.Il.fromHex(this.themeData.colors[o]));if(this.themeData.inherit){const o=getBuiltinRules(this.themeData.base);for(let s in o.colors)e.has(s)||e.set(s,qi.Il.fromHex(o.colors[s]))}this.colors=e}return this.colors}getColor(e,o){const s=this.getColors().get(e);return s||(!1!==o?this.getDefault(e):void 0)}getDefault(e){let o=this.defaultColors[e];return o||(o=Fn.resolveDefaultColor(e,this),this.defaultColors[e]=o,o)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case Rn:return An.e.LIGHT;case On:return An.e.HIGH_CONTRAST;default:return An.e.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],o=[];if(this.themeData.inherit){const s=getBuiltinRules(this.themeData.base);e=s.rules,s.encodedTokensColors&&(o=s.encodedTokensColors)}const s=this.themeData.colors["editor.foreground"],l=this.themeData.colors["editor.background"];if(s||l){const o={token:""};s&&(o.foreground=s),l&&(o.background=l),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(o=this.themeData.encodedTokensColors),this._tokenTheme=TokenTheme.createFromRawTokenTheme(e,o)}return this._tokenTheme}getTokenStyleMetadata(e,o,s){const l=this.tokenTheme._match([e].concat(o).join(".")),d=l.metadata,u=ne.NX.getForeground(d),g=ne.NX.getFontStyle(d);return{foreground:u,italic:Boolean(1&g),bold:Boolean(2&g),underline:Boolean(4&g),strikethrough:Boolean(8&g)}}}function isBuiltinTheme(e){return e===Rn||e===Pn||e===On}function getBuiltinRules(e){switch(e){case Rn:return En;case Pn:return Tn;case On:return In}}function newBuiltInTheme(e){const o=getBuiltinRules(e);return new StandaloneTheme(e,o)}class StandaloneThemeService extends fe.JT{constructor(){super(),this._onColorThemeChange=this._register(new Y.Q5),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new Y.Q5),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new UnthemedProductIconTheme,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Rn,newBuiltInTheme(Rn)),this._knownThemes.set(Pn,newBuiltInTheme(Pn)),this._knownThemes.set(On,newBuiltInTheme(On));const e=getIconsStyleSheet(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Rn),e.onDidChange((()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),Ye.uB("(forced-colors: active)",(()=>{this._updateActualTheme()}))}registerEditorContainer(e){return Ye.OO(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Ye.dS(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),fe.JT.None}_registerShadowDomContainer(e){const o=Ye.dS(e);return o.className="monaco-colors",o.textContent=this._allCSS,this._styleElements.push(o),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===o)return void this._styleElements.splice(e,1)}}}defineTheme(e,o){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!isBuiltinTheme(o.base)&&!isBuiltinTheme(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new StandaloneTheme(e,o)),isBuiltinTheme(e)&&this._knownThemes.forEach((o=>{o.base===e&&o.notifyBaseUpdated()})),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let o;o=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(Rn),this._desiredTheme=o,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(On):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){const e=[],o={},s={addRule:s=>{o[s]||(e.push(s),o[s]=!0)}};Bn.getThemingParticipants().forEach((e=>e(this._theme,s,this._environment)));const l=[];for(const u of Fn.getColors()){const e=this._theme.getColor(u.id,!0);e&&l.push(`${(0,Hi.QO2)(u.id)}: ${e.toString()};`)}s.addRule(`.monaco-editor { ${l.join("\n")} }`);const d=this._colorMapOverride||this._theme.tokenTheme.getColorMap();s.addRule(generateTokensCSSForColorMap(d)),this._themeCSS=e.join("\n"),this._updateCSS(),ne.RW.setColorMap(d),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._styleElements.forEach((e=>e.textContent=this._allCSS))}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}var Wn=s(4156),accessibilityService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},accessibilityService_param=function(e,o){return function(s,l){o(s,l,e)}};let Vn=class AccessibilityService extends fe.JT{constructor(e,o){super(),this._contextKeyService=e,this._configurationService=o,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Y.Q5,this._accessibilityModeEnabledContext=$i.U.bindTo(this._contextKeyService);const updateContextKey=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("editor.accessibilitySupport")&&(updateContextKey(),this._onDidChangeScreenReaderOptimized.fire())}))),updateContextKey(),this.onDidChangeScreenReaderOptimized((()=>updateContextKey()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return"on"===e||"auto"===e&&2===this._accessibilitySupport}getAccessibilitySupport(){return this._accessibilitySupport}};Vn=accessibilityService_decorate([accessibilityService_param(0,tt.i6),accessibilityService_param(1,Tt.Ui)],Vn);var Hn=s(4144),menuService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},menuService_param=function(e,o){return function(s,l){o(s,l,e)}};let zn=class MenuService{constructor(e){this._commandService=e}createMenu(e,o,s){return new Un(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},s),this._commandService,o,this)}};zn=menuService_decorate([menuService_param(0,Et.Hy)],zn);let Un=class Menu{constructor(e,o,s,l,d){this._id=e,this._options=o,this._commandService=s,this._contextKeyService=l,this._menuService=d,this._disposables=new fe.SL,this._menuGroups=[],this._contextKeys=new Set,this._build();const u=new me.pY((()=>{this._build(),this._onDidChange.fire(this)}),o.eventDebounceDelay);this._disposables.add(u),this._disposables.add(Hn.BH.onDidChangeMenu((o=>{o.has(e)&&u.schedule()})));const g=this._disposables.add(new fe.SL),startContextKeyListener=()=>{const e=new me.pY((()=>this._onDidChange.fire(this)),o.eventDebounceDelay);g.add(e),g.add(l.onDidChangeContext((o=>{o.affectsSome(this._contextKeys)&&e.schedule()})))};this._onDidChange=new Y.Q5({onFirstListenerAdd:startContextKeyListener,onLastListenerRemove:g.clear.bind(g)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=Hn.BH.getMenuItems(this._id);let o;e.sort(Menu._compareMenuItems);for(const s of e){const e=s.group||"";o&&o[0]===e||(o=[e,[]],this._menuGroups.push(o)),o[1].push(s),this._collectContextKeys(s)}}_collectContextKeys(e){if(Menu._fillInKbExprKeys(e.when,this._contextKeys),(0,Hn.vr)(e)){if(e.command.precondition&&Menu._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const o=e.command.toggled.condition||e.command.toggled;Menu._fillInKbExprKeys(o,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Hn.BH.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const o=[];for(let s of this._menuGroups){const[l,d]=s,u=[];for(const o of d)if(this._contextKeyService.contextMatchesRules(o.when)){const s=(0,Hn.vr)(o)?new Hn.U8(o.command,o.alt,e,this._contextKeyService,this._commandService):new Hn.NZ(o,this._menuService,this._contextKeyService,e);u.push(s)}u.length>0&&o.push([l,u])}return o}static _fillInKbExprKeys(e,o){if(e)for(let s of e.keys())o.add(s)}static _compareMenuItems(e,o){let s=e.group,l=o.group;if(s!==l){if(!s)return 1;if(!l)return-1;if("navigation"===s)return-1;if("navigation"===l)return 1;let e=s.localeCompare(l);if(0!==e)return e}let d=e.order||0,u=o.order||0;return d<u?-1:d>u?1:Menu._compareTitles((0,Hn.vr)(e)?e.command.title:e.title,(0,Hn.vr)(o)?o.command.title:o.title)}static _compareTitles(e,o){const s="string"===typeof e?e:e.original,l="string"===typeof o?o:o.original;return s.localeCompare(l)}};Un=menuService_decorate([menuService_param(2,Et.Hy),menuService_param(3,tt.i6),menuService_param(4,Hn.co)],Un);var clipboardService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},clipboardService_param=function(e,o){return function(s,l){o(s,l,e)}},clipboardService_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let Kn=class BrowserClipboardService extends fe.JT{constructor(e,o){super(),this.layoutService=e,this.logService=o,this.mapTextToType=new Map,this.findText="",(Ci.isSafari||Ci.isWebkitWebView)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const handler=()=>{const e=new me.CR;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=e,navigator.clipboard.write([new ClipboardItem({"text/plain":e.p})]).catch((o=>clipboardService_awaiter(this,void 0,void 0,(function*(){o instanceof Error&&"NotAllowedError"===o.name&&e.isRejected||this.logService.error(o)}))))};this.layoutService.hasContainer&&(this._register((0,Ye.nm)(this.layoutService.container,"click",handler)),this._register((0,Ye.nm)(this.layoutService.container,"keydown",handler)))}writeText(e,o){return clipboardService_awaiter(this,void 0,void 0,(function*(){if(o)return void this.mapTextToType.set(o,e);if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(d){console.error(d)}const s=document.activeElement,l=document.body.appendChild((0,Ye.$)("textarea",{"aria-hidden":!0}));l.style.height="1px",l.style.width="1px",l.style.position="absolute",l.value=e,l.focus(),l.select(),document.execCommand("copy"),s instanceof HTMLElement&&s.focus(),document.body.removeChild(l)}))}readText(e){return clipboardService_awaiter(this,void 0,void 0,(function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(o){return console.error(o),""}}))}readFindText(){return clipboardService_awaiter(this,void 0,void 0,(function*(){return this.findText}))}writeFindText(e){return clipboardService_awaiter(this,void 0,void 0,(function*(){this.findText=e}))}};Kn=clipboardService_decorate([clipboardService_param(0,st),clipboardService_param(1,Pe.VZ)],Kn);var jn=s(4972),$n=s(3725),contextKeyService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},contextKeyService_param=function(e,o){return function(s,l){o(s,l,e)}};const Gn="data-keybinding-context";class Context{constructor(e,o){this._id=e,this._parent=o,this._value=Object.create(null),this._value["_contextId"]=e}setValue(e,o){return this._value[e]!==o&&(this._value[e]=o,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const o=this._value[e];return"undefined"===typeof o&&this._parent?this._parent.getValue(e):o}}class NullContext extends Context{constructor(){super(-1,null)}setValue(e,o){return!1}removeValue(e){return!1}getValue(e){}}NullContext.INSTANCE=new NullContext;class ConfigAwareContextValuesContainer extends Context{constructor(e,o,s){super(e,null),this._configurationService=o,this._values=It.Id.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration((e=>{if(6===e.source){const e=Array.from($n.$.map(this._values,(([e])=>e)));this._values.clear(),s.fire(new ArrayContextKeyChangeEvent(e))}else{const o=[];for(const s of e.affectedKeys){const e=`config.${s}`,l=this._values.findSuperstr(e);void 0!==l&&(o.push(...$n.$.map(l,(([e])=>e))),this._values.deleteSuperstr(e)),this._values.has(e)&&(o.push(e),this._values.delete(e))}s.fire(new ArrayContextKeyChangeEvent(o))}}))}dispose(){this._listener.dispose()}getValue(e){if(0!==e.indexOf(ConfigAwareContextValuesContainer._keyPrefix))return super.getValue(e);if(this._values.has(e))return this._values.get(e);const o=e.substr(ConfigAwareContextValuesContainer._keyPrefix.length),s=this._configurationService.getValue(o);let l;switch(typeof s){case"number":case"boolean":case"string":l=s;break;default:l=Array.isArray(s)?JSON.stringify(s):s}return this._values.set(e,l),l}setValue(e,o){return super.setValue(e,o)}removeValue(e){return super.removeValue(e)}}ConfigAwareContextValuesContainer._keyPrefix="config.";class ContextKey{constructor(e,o,s){this._service=e,this._key=o,this._defaultValue=s,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){"undefined"===typeof this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class SimpleContextKeyChangeEvent{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class ArrayContextKeyChangeEvent{constructor(e){this.keys=e}affectsSome(e){for(const o of this.keys)if(e.has(o))return!0;return!1}}class CompositeContextKeyChangeEvent{constructor(e){this.events=e}affectsSome(e){for(const o of this.events)if(o.affectsSome(e))return!0;return!1}}class AbstractContextKeyService{constructor(e){this._onDidChangeContext=new Y.K3({merge:e=>new CompositeContextKeyChangeEvent(e)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,o){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new ContextKey(this,e,o)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new ScopedContextKeyService(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const o=this.getContextValuesContainer(this._myContextId),s=!e||e.evaluate(o);return s}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,o){if(this._isDisposed)return;const s=this.getContextValuesContainer(this._myContextId);s&&s.setValue(e,o)&&this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(e))}getContext(e){return this._isDisposed?NullContext.INSTANCE:this.getContextValuesContainer(findContextAttr(e))}}let qn=class ContextKeyService extends AbstractContextKeyService{constructor(e){super(0),this._contexts=new Map,this._toDispose=new fe.SL,this._lastContextId=0;const o=new ConfigAwareContextValuesContainer(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,o),this._toDispose.add(o)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?NullContext.INSTANCE:this._contexts.get(e)||NullContext.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let o=++this._lastContextId;return this._contexts.set(o,new Context(o,this.getContextValuesContainer(e))),o}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};qn=contextKeyService_decorate([contextKeyService_param(0,Tt.Ui)],qn);class ScopedContextKeyService extends AbstractContextKeyService{constructor(e,o){if(super(e.createChildContext()),this._parentChangeListener=new fe.XK,this._parent=e,this._updateParentChangeListener(),this._domNode=o,this._domNode.hasAttribute(Gn)){let e="";this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute"+(e?": "+e:""))}this._domNode.setAttribute(Gn,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Gn),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?NullContext.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function findContextAttr(e){while(e){if(e.hasAttribute(Gn)){const o=e.getAttribute(Gn);return o?parseInt(o,10):NaN}e=e.parentElement}return 0}Et.P0.registerCommand(tt.Eq,(function(e,o,s){e.get(tt.i6).createKey(String(o),s)})),Et.P0.registerCommand({id:"getContextKeyInfo",handler(){return[...tt.uy.all()].sort(((e,o)=>e.key.localeCompare(o.key)))},description:{description:(0,ct.N)("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),Et.P0.registerCommand("_generateContextKeyInfo",(function(){const e=[],o=new Set;for(let s of tt.uy.all())o.has(s.key)||(o.add(s.key),e.push(s));e.sort(((e,o)=>e.key.localeCompare(o.key))),console.log(JSON.stringify(e,void 0,2))}));var Qn=s(7108);class Node{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}}class Graph{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let o of this._nodes.values())0===o.outgoing.size&&e.push(o);return e}insertEdge(e,o){const s=this.lookupOrInsertNode(e),l=this.lookupOrInsertNode(o);s.outgoing.set(this._hashFn(o),l),l.incoming.set(this._hashFn(e),s)}removeNode(e){const o=this._hashFn(e);this._nodes.delete(o);for(let s of this._nodes.values())s.outgoing.delete(o),s.incoming.delete(o)}lookupOrInsertNode(e){const o=this._hashFn(e);let s=this._nodes.get(o);return s||(s=new Node(e),this._nodes.set(o,s)),s}isEmpty(){return 0===this._nodes.size}toString(){let e=[];for(let[o,s]of this._nodes)e.push(`${o}, (incoming)[${[...s.incoming.keys()].join(", ")}], (outgoing)[${[...s.outgoing.keys()].join(",")}]`);return e.join("\n")}findCycleSlow(){for(let[e,o]of this._nodes){const s=new Set([e]),l=this._findCycle(o,s);if(l)return l}}_findCycle(e,o){for(let[s,l]of e.outgoing){if(o.has(s))return[...o,s].join(" -> ");o.add(s);const e=this._findCycle(l,o);if(e)return e;o.delete(s)}}}var Zn=s(972);const Yn=!1;class CyclicDependencyError extends Error{constructor(e){var o;super("cyclic dependency between services"),this.message=null!==(o=e.findCycleSlow())&&void 0!==o?o:`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}class InstantiationService{constructor(e=new Zn.y,o=!1,s){this._activeInstantiations=new Set,this._services=e,this._strict=o,this._parent=s,this._services.set(ot.TG,this)}createChild(e){return new InstantiationService(e,this._strict,this)}invokeFunction(e,...o){let s=Trace.traceInvocation(e),l=!1;try{const d={get:e=>{if(l)throw(0,_e.L6)("service accessor is only valid during the invocation of its target method");const o=this._getOrCreateServiceInstance(e,s);if(!o)throw new Error(`[invokeFunction] unknown service '${e}'`);return o}};return e(d,...o)}finally{l=!0,s.stop()}}createInstance(e,...o){let s,l;return e instanceof Qn.M?(s=Trace.traceCreation(e.ctor),l=this._createInstance(e.ctor,e.staticArguments.concat(o),s)):(s=Trace.traceCreation(e),l=this._createInstance(e,o,s)),s.stop(),l}_createInstance(e,o=[],s){let l=ot.I8.getServiceDependencies(e).sort(((e,o)=>e.index-o.index)),d=[];for(const g of l){let o=this._getOrCreateServiceInstance(g.id,s);o||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${g.id}.`,!1),d.push(o)}let u=l.length>0?l[0].index:o.length;if(o.length!==u){console.warn(`[createInstance] First service dependency of ${e.name} at position ${u+1} conflicts with ${o.length} static arguments`);let s=u-o.length;o=s>0?o.concat(new Array(s)):o.slice(0,u)}return new e(...[...o,...d])}_setServiceInstance(e,o){if(this._services.get(e)instanceof Qn.M)this._services.set(e,o);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,o)}}_getServiceInstanceOrDescriptor(e){let o=this._services.get(e);return!o&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):o}_getOrCreateServiceInstance(e,o){let s=this._getServiceInstanceOrDescriptor(e);return s instanceof Qn.M?this._safeCreateAndCacheServiceInstance(e,s,o.branch(e,!0)):(o.branch(e,!1),s)}_safeCreateAndCacheServiceInstance(e,o,s){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,o,s)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,o,s){const l=new Graph((e=>e.id.toString()));let d=0;const u=[{id:e,desc:o,_trace:s}];while(u.length){const o=u.pop();if(l.lookupOrInsertNode(o),d++>1e3)throw new CyclicDependencyError(l);for(let s of ot.I8.getServiceDependencies(o.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(s.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${s.id} which is NOT registered.`,!0),d instanceof Qn.M){const e={id:s.id,desc:d,_trace:o._trace.branch(s.id,!0)};l.insertEdge(o,e),u.push(e)}}}while(1){const e=l.roots();if(0===e.length){if(!l.isEmpty())throw new CyclicDependencyError(l);break}for(const{data:o}of e){const e=this._getServiceInstanceOrDescriptor(o.id);if(e instanceof Qn.M){const e=this._createServiceInstanceWithOwner(o.id,o.desc.ctor,o.desc.staticArguments,o.desc.supportsDelayedInstantiation,o._trace);this._setServiceInstance(o.id,e)}l.removeNode(o)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,o,s=[],l,d){if(this._services.get(e)instanceof Qn.M)return this._createServiceInstance(o,s,l,d);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,o,s,l,d);throw new Error(`illegalState - creating UNKNOWN service instance ${o.name}`)}_createServiceInstance(e,o=[],s,l){if(s){const s=new me.Ue((()=>this._createInstance(e,o,l)));return new Proxy(Object.create(null),{get(e,o){if(o in e)return e[o];let l=s.value,d=l[o];return"function"!==typeof d||(d=d.bind(l),e[o]=d),d},set(e,o,l){return s.value[o]=l,!0}})}return this._createInstance(e,o,l)}_throwIfStrict(e,o){if(o&&console.warn(o),this._strict)throw new Error(e)}}class Trace{constructor(e,o){this.type=e,this.name=o,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return Yn?new Trace(1,e.name||e.toString().substring(0,42).replace(/\n/g,"")):Trace._None}static traceCreation(e){return Yn?new Trace(0,e.name):Trace._None}branch(e,o){let s=new Trace(2,e.toString());return this._dep.push([e,o,s]),s}stop(){let e=Date.now()-this._start;Trace._totals+=e;let o=!1;function printChild(e,s){let l=[],d=new Array(e+1).join("\t");for(const[u,g,p]of s._dep)if(g&&p){o=!0,l.push(`${d}CREATES -> ${u}`);let s=printChild(e+1,p);s&&l.push(s)}else l.push(`${d}uses -> ${u}`);return l.join("\n")}let s=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${printChild(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Trace._totals.toFixed(2)}ms)`];(e>2||o)&&console.log(s.join("\n"))}}Trace._None=new class extends Trace{constructor(){super(-1,null)}stop(){}branch(){return this}},Trace._totals=0;class DoubleResourceMap{constructor(){this._byResource=new It.Y9,this._byOwner=new Map}set(e,o,s){let l=this._byResource.get(e);l||(l=new Map,this._byResource.set(e,l)),l.set(o,s);let d=this._byOwner.get(o);d||(d=new It.Y9,this._byOwner.set(o,d)),d.set(e,s)}get(e,o){let s=this._byResource.get(e);return null===s||void 0===s?void 0:s.get(o)}delete(e,o){let s=!1,l=!1,d=this._byResource.get(e);d&&(s=d.delete(o));let u=this._byOwner.get(o);if(u&&(l=u.delete(e)),s!==l)throw new Error("illegal state");return s&&l}values(e){var o,s,l,d;return"string"===typeof e?null!==(s=null===(o=this._byOwner.get(e))||void 0===o?void 0:o.values())&&void 0!==s?s:$n.$.empty():X.o.isUri(e)?null!==(d=null===(l=this._byResource.get(e))||void 0===l?void 0:l.values())&&void 0!==d?d:$n.$.empty():$n.$.map($n.$.concat(...this._byOwner.values()),(e=>e[1]))}}class MarkerStats{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new It.Y9,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const o of e){const e=this._data.get(o);e&&this._substract(e);const s=this._resourceStats(o);this._add(s),this._data.set(o,s)}}_resourceStats(e){const o={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Je.lg.inMemory||e.scheme===Je.lg.walkThrough||e.scheme===Je.lg.walkThroughSnippet)return o;for(const{severity:s}of this._service.read({resource:e}))s===Wi.ZL.Error?o.errors+=1:s===Wi.ZL.Warning?o.warnings+=1:s===Wi.ZL.Info?o.infos+=1:o.unknowns+=1;return o}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class MarkerService{constructor(){this._onMarkerChanged=new Y.D0({delay:0,merge:MarkerService._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new DoubleResourceMap,this._stats=new MarkerStats(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,o){for(const s of o||[])this.changeOne(e,s,[])}changeOne(e,o,s){if((0,Re.XY)(s)){const s=this._data.delete(o,e);s&&this._onMarkerChanged.fire([o])}else{const l=[];for(const d of s){const s=MarkerService._toMarker(e,o,d);s&&l.push(s)}this._data.set(o,e,l),this._onMarkerChanged.fire([o])}}static _toMarker(e,o,s){let{code:l,severity:d,message:u,source:g,startLineNumber:p,startColumn:m,endLineNumber:f,endColumn:_,relatedInformation:C,tags:b}=s;if(u)return p=p>0?p:1,m=m>0?m:1,f=f>=p?f:p,_=_>0?_:m,{resource:o,owner:e,code:l,severity:d,message:u,source:g,startLineNumber:p,startColumn:m,endLineNumber:f,endColumn:_,relatedInformation:C,tags:b}}read(e=Object.create(null)){let{owner:o,resource:s,severities:l,take:d}=e;if((!d||d<0)&&(d=-1),o&&s){const e=this._data.get(s,o);if(e){const o=[];for(const s of e)if(MarkerService._accept(s,l)){const e=o.push(s);if(d>0&&e===d)break}return o}return[]}if(o||s){const e=this._data.values(null!==s&&void 0!==s?s:o),u=[];for(const o of e)for(const e of o)if(MarkerService._accept(e,l)){const o=u.push(e);if(d>0&&o===d)return u}return u}{const e=[];for(let o of this._data.values())for(let s of o)if(MarkerService._accept(s,l)){const o=e.push(s);if(d>0&&o===d)return e}return e}}static _accept(e,o){return void 0===o||(o&e.severity)===e.severity}static _merge(e){const o=new It.Y9;for(let s of e)for(let e of s)o.set(e,!0);return Array.from(o.keys())}}var Jn=s(7060);function score(e,o,s,l,d){if(Array.isArray(e)){let u=0;for(const g of e){const e=score(g,o,s,l,d);if(10===e)return e;e>u&&(u=e)}return u}if("string"===typeof e)return l?"*"===e?5:e===s?10:0:0;if(e){const{language:u,pattern:g,scheme:p,hasAccessToAllModels:m,notebookType:f}=e;if(!l&&!m)return 0;let _=0;if(p)if(p===o.scheme)_=10;else{if("*"!==p)return 0;_=5}if(u)if(u===s)_=10;else{if("*"!==u)return 0;_=Math.max(_,5)}if(f)if(f===d)_=10;else{if("*"!==f)return 0;_=Math.max(_,5)}if(g){let e;if(e="string"===typeof g?g:Object.assign(Object.assign({},g),{base:(0,Zt.Fv)(g.base)}),e!==o.fsPath&&!match(e,o.fsPath))return 0;_=10}return _}return 0}function isExclusive(e){return"string"!==typeof e&&(Array.isArray(e)?e.every(isExclusive):!!e.exclusive)}class LanguageFeatureRegistry{constructor(e){this._notebookTypeResolver=e,this._clock=0,this._entries=[],this._onDidChange=new Y.Q5,this.onDidChange=this._onDidChange.event}register(e,o){let s={selector:e,provider:o,_score:-1,_time:this._clock++};return this._entries.push(s),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,fe.OF)((()=>{if(s){const e=this._entries.indexOf(s);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),s=void 0)}}))}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const o=[];for(let s of this._entries)s._score>0&&o.push(s.provider);return o}ordered(e){const o=[];return this._orderedForEach(e,(e=>o.push(e.provider))),o}orderedGroups(e){const o=[];let s,l;return this._orderedForEach(e,(e=>{s&&l===e._score?s.push(e.provider):(l=e._score,s=[e.provider],o.push(s))})),o}_orderedForEach(e,o){if(e){this._updateScores(e);for(const e of this._entries)e._score>0&&o(e)}}_updateScores(e){var o;const s=null===(o=this._notebookTypeResolver)||void 0===o?void 0:o.call(this,e.uri),l={uri:e.uri.toString(),language:e.getLanguageId(),notebookType:s};if(!this._lastCandidate||this._lastCandidate.language!==l.language||this._lastCandidate.uri!==l.uri||this._lastCandidate.notebookType!==l.notebookType){this._lastCandidate=l;for(let o of this._entries)if(o._score=score(o.selector,e.uri,e.getLanguageId(),(0,de.pt)(e),s),isExclusive(o.selector)&&o._score>0){for(let e of this._entries)e._score=0;o._score=1e3;break}this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime)}}static _compareByScoreAndTime(e,o){return e._score<o._score?1:e._score>o._score?-1:e._time<o._time?1:e._time>o._time?-1:0}}class LanguageFeaturesService{constructor(){this.referenceProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.renameProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeActionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.definitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.typeDefinitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.declarationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.implementationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSymbolProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlayHintsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.colorProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeLensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.onTypeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.signatureHelpProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.hoverProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentHighlightProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.selectionRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.foldingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlineCompletionsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.completionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkedEditingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this))}_score(e){var o;return null===(o=this._notebookTypeResolver)||void 0===o?void 0:o.call(this,e)}}(0,it.z)(Oe.p,LanguageFeaturesService,!0);var standaloneServices_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},standaloneServices_param=function(e,o){return function(s,l){o(s,l,e)}},standaloneServices_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};class SimpleModel{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Y.Q5}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let Xn=class StandaloneTextModelService{constructor(e){this.modelService=e}createModelReference(e){const o=this.modelService.getModel(e);return o?Promise.resolve(new fe.Jz(new SimpleModel(o))):Promise.reject(new Error("Model not found"))}};Xn=standaloneServices_decorate([standaloneServices_param(0,pe.q)],Xn);class StandaloneEditorProgressService{show(){return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER}showWhile(e,o){return standaloneServices_awaiter(this,void 0,void 0,(function*(){yield e}))}}StandaloneEditorProgressService.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class StandaloneDialogService{confirm(e){return this.doConfirm(e).then((e=>({confirmed:e,checkboxChecked:!1})))}doConfirm(e){let o=e.message;return e.detail&&(o=o+"\n\n"+e.detail),Promise.resolve(window.confirm(o))}show(e,o,s,l){return Promise.resolve({choice:0})}}class StandaloneNotificationService{info(e){return this.notify({severity:lt.Z.Info,message:e})}warn(e){return this.notify({severity:lt.Z.Warning,message:e})}error(e){return this.notify({severity:lt.Z.Error,message:e})}notify(e){switch(e.severity){case lt.Z.Error:console.error(e.message);break;case lt.Z.Warning:console.warn(e.message);break;default:console.log(e.message);break}return StandaloneNotificationService.NO_OP}status(e,o){return fe.JT.None}}StandaloneNotificationService.NO_OP=new ht.EO;let eo=class StandaloneCommandService{constructor(e){this._onWillExecuteCommand=new Y.Q5,this._onDidExecuteCommand=new Y.Q5,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...o){const s=Et.P0.getCommand(e);if(!s)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:o});const l=this._instantiationService.invokeFunction.apply(this._instantiationService,[s.handler,...o]);return this._onDidExecuteCommand.fire({commandId:e,args:o}),Promise.resolve(l)}catch(l){return Promise.reject(l)}}};eo=standaloneServices_decorate([standaloneServices_param(0,ot.TG)],eo);let to=class StandaloneKeybindingService extends AbstractKeybindingService{constructor(e,o,s,l,d,u){super(e,o,s,l,d),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const addContainer=e=>{const o=new fe.SL;o.add(Ye.nm(e,Ye.tw.KEY_DOWN,(e=>{const o=new _t.y(e),s=this._dispatch(o,o.target);s&&(o.preventDefault(),o.stopPropagation())}))),o.add(Ye.nm(e,Ye.tw.KEY_UP,(e=>{const o=new _t.y(e),s=this._singleModifierDispatch(o,o.target);s&&o.preventDefault()}))),this._domNodeListeners.push(new DomNodeListeners(e,o))},removeContainer=e=>{for(let o=0;o<this._domNodeListeners.length;o++){const s=this._domNodeListeners[o];s.domNode===e&&(this._domNodeListeners.splice(o,1),s.dispose())}},addCodeEditor=e=>{e.getOption(54)||addContainer(e.getContainerDomNode())},removeCodeEditor=e=>{e.getOption(54)||removeContainer(e.getContainerDomNode())};this._register(u.onCodeEditorAdd(addCodeEditor)),this._register(u.onCodeEditorRemove(removeCodeEditor)),u.listCodeEditors().forEach(addCodeEditor);const addDiffEditor=e=>{addContainer(e.getContainerDomNode())},removeDiffEditor=e=>{removeContainer(e.getContainerDomNode())};this._register(u.onDiffEditorAdd(addDiffEditor)),this._register(u.onDiffEditorRemove(removeDiffEditor)),u.listDiffEditors().forEach(addDiffEditor)}addDynamicKeybinding(e,o,s,l){const d=(0,Ct.gm)(o,Ce.OS),u=new fe.SL;return d&&(this._dynamicKeybindings.push({keybinding:d.parts,command:e,when:l,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),u.add((0,fe.OF)((()=>{for(let o=0;o<this._dynamicKeybindings.length;o++){const s=this._dynamicKeybindings[o];if(s.command===e)return this._dynamicKeybindings.splice(o,1),void this.updateResolver({source:1})}})))),u.add(Et.P0.registerCommand(e,s)),this.updateResolver({source:1}),u}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Pt.W.getDefaultKeybindings(),!0),o=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new KeybindingResolver(e,o,(e=>this._log(e)))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,o){const s=[];let l=0;for(const d of e){const e=d.when||void 0,u=d.keybinding;if(u){const g=USLayoutResolvedKeybinding.resolveUserBinding(u,Ce.OS);for(const u of g)s[l++]=new ResolvedKeybindingItem(u,d.command,d.commandArgs,e,o,null,!1)}else s[l++]=new ResolvedKeybindingItem(void 0,d.command,d.commandArgs,e,o,null,!1)}return s}resolveKeyboardEvent(e){const o=new Ct.QC(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new USLayoutResolvedKeybinding(o,Ce.OS)}};to=standaloneServices_decorate([standaloneServices_param(0,tt.i6),standaloneServices_param(1,Et.Hy),standaloneServices_param(2,Vt.b),standaloneServices_param(3,ht.lT),standaloneServices_param(4,Pe.VZ),standaloneServices_param(5,re.$)],to);class DomNodeListeners extends fe.JT{constructor(e,o){super(),this.domNode=e,this._register(o)}}function isConfigurationOverrides(e){return e&&"object"===typeof e&&(!e.overrideIdentifier||"string"===typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof X.o)}class StandaloneConfigurationService{constructor(){this._onDidChangeConfiguration=new Y.Q5,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new Configuration(new DefaultConfigurationModel,new ConfigurationModel)}getValue(e,o){const s="string"===typeof e?e:void 0,l=isConfigurationOverrides(e)?e:isConfigurationOverrides(o)?o:{};return this._configuration.getValue(s,l,void 0)}updateValues(e){const o={data:this._configuration.toData()},s=[];for(const l of e){const[e,o]=l;this.getValue(e)!==o&&(this._configuration.updateValue(e,o),s.push(e))}if(s.length>0){const e=new ConfigurationChangeEvent({keys:s,overrides:[]},o,this._configuration);e.source=7,e.sourceConfig=null,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}updateValue(e,o,s,l){return this.updateValues([[e,o]])}inspect(e,o={}){return this._configuration.inspect(e,o,void 0)}}let io=class StandaloneResourceConfigurationService{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new Y.Q5,this.configurationService.onDidChangeConfiguration((e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(o,s)=>e.affectsConfiguration(s)})}))}getValue(e,o,s){const l=ee.L.isIPosition(o)?o:null,d=l?"string"===typeof s?s:void 0:"string"===typeof o?o:void 0;return"undefined"===typeof d?this.configurationService.getValue():this.configurationService.getValue(d)}};io=standaloneServices_decorate([standaloneServices_param(0,Tt.Ui)],io);let no=class StandaloneResourcePropertiesService{constructor(e){this.configurationService=e}getEOL(e,o){const s=this.configurationService.getValue("files.eol",{overrideIdentifier:o,resource:e});return s&&"string"===typeof s&&"auto"!==s?s:Ce.IJ||Ce.dz?"\n":"\r\n"}};no=standaloneServices_decorate([standaloneServices_param(0,Tt.Ui)],no);class StandaloneTelemetryService{publicLog(e,o){return Promise.resolve(void 0)}publicLog2(e,o){return this.publicLog(e,o)}}class StandaloneWorkspaceContextService{constructor(){const e=X.o.from({scheme:StandaloneWorkspaceContextService.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new Ht.md({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}function updateConfigurationService(e,o,s){if(!o)return;if(!(e instanceof StandaloneConfigurationService))return;const l=[];Object.keys(o).forEach((e=>{isEditorConfigurationKey(e)&&l.push([`editor.${e}`,o[e]]),s&&isDiffEditorConfigurationKey(e)&&l.push([`diffEditor.${e}`,o[e]])})),l.length>0&&e.updateValues(l)}StandaloneWorkspaceContextService.SCHEME="inmemory";let oo=class StandaloneBulkEditService{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,o){return standaloneServices_awaiter(this,void 0,void 0,(function*(){const o=new Map;for(let d of e){if(!(d instanceof vt.Gl))throw new Error("bad edit - only text edits are supported");const e=this._modelService.getModel(d.resource);if(!e)throw new Error("bad edit - model not found");if("number"===typeof d.versionId&&e.getVersionId()!==d.versionId)throw new Error("bad state - model changed in the meantime");let s=o.get(e);s||(s=[],o.set(e,s)),s.push(Nt.h.replaceMove(te.e.lift(d.textEdit.range),d.textEdit.text))}let s=0,l=0;for(const[e,d]of o)e.pushStackElement(),e.pushEditOperations([],d,(()=>[])),e.pushStackElement(),l+=1,s+=d.length;return{ariaSummary:oe.WU(zt.iN.bulkEditServiceSummary,s,l)}}))}};oo=standaloneServices_decorate([standaloneServices_param(0,pe.q)],oo);class StandaloneUriLabelService{getUriLabel(e,o){return"file"===e.scheme?e.fsPath:e.path}}let so=class StandaloneContextViewService extends qt{constructor(e,o){super(e),this._codeEditorService=o}showContextView(e,o,s){if(!o){const e=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();e&&(o=e.getContainerDomNode())}return super.showContextView(e,o,s)}};so=standaloneServices_decorate([standaloneServices_param(0,st),standaloneServices_param(1,re.$)],so);class StandaloneWorkspaceTrustManagementService{constructor(){this._neverEmitter=new Y.Q5,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class StandaloneLanguageService extends LanguageService{constructor(){super()}}class StandaloneLogService extends Pe.$V{constructor(){super(new Pe.kw)}}let ro=class StandaloneContextMenuService extends Ii{constructor(e,o,s,l,d){super(e,o,s,l,d),this.configure({blockMouse:!1})}};var ao;ro=standaloneServices_decorate([standaloneServices_param(0,Vt.b),standaloneServices_param(1,ht.lT),standaloneServices_param(2,Kt.u),standaloneServices_param(3,Rt.d),standaloneServices_param(4,Xe.XE)],ro),(0,it.z)(Tt.Ui,StandaloneConfigurationService),(0,it.z)(Me.V,io),(0,it.z)(Me.y,no),(0,it.z)(Ht.ec,StandaloneWorkspaceContextService),(0,it.z)(Bt.e,StandaloneUriLabelService),(0,it.z)(Vt.b,StandaloneTelemetryService),(0,it.z)(dt.S,StandaloneDialogService),(0,it.z)(ht.lT,StandaloneNotificationService),(0,it.z)(Wi.lT,MarkerService),(0,it.z)(ge.O,StandaloneLanguageService),(0,it.z)(Wn.Z,StandaloneThemeService),(0,it.z)(Pe.VZ,StandaloneLogService),(0,it.z)(pe.q,Ki.b$),(0,it.z)(Ui.i,zi),(0,it.z)(tt.i6,qn),(0,it.z)(Wt.ek,StandaloneEditorProgressService),(0,it.z)(Jn.Uy,Jn.vm),(0,it.z)(Ze.p,We),(0,it.z)(vt.vu,oo),(0,it.z)(Ut.Y,StandaloneWorkspaceTrustManagementService),(0,it.z)(Dt.S,Xn),(0,it.z)($i.F,Vn),(0,it.z)(vn.Lw,vn.XN),(0,it.z)(Et.Hy,eo),(0,it.z)(Rt.d,to),(0,it.z)(Sn.eJ,kn),(0,it.z)(Kt.u,so),(0,it.z)(Pi.v4,Bi),(0,it.z)(jn.p,Kn),(0,it.z)(Kt.i,ro),(0,it.z)(Hn.co,zn),function(e){const o=new Zn.y;for(const[d,u]of(0,it.d)())o.set(d,u);const s=new InstantiationService(o,!0);function get(e){const l=o.get(e);if(!l)throw new Error("Missing service "+e);return l instanceof Qn.M?s.invokeFunction((o=>o.get(e))):l}o.set(ot.TG,s),e.get=get;let l=!1;function initialize(e){if(l)return s;l=!0;for(const[s,l]of(0,it.d)())o.get(s)||o.set(s,l);for(const s in e)if(e.hasOwnProperty(s)){const l=(0,ot.yh)(s),d=o.get(l);d instanceof Qn.M&&o.set(l,e[s])}return s}e.initialize=initialize}(ao||(ao={}));var standaloneCodeEditor_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},standaloneCodeEditor_param=function(e,o){return function(s,l){o(s,l,e)}};let lo=0,co=!1;function createAriaDomNode(e){if(!e){if(co)return;co=!0}$e.wW(e||document.body)}let ho=class StandaloneCodeEditor extends Ge.Gm{constructor(e,o,s,l,d,u,g,p,m,f,_,C){const b=Object.assign({},o);b.ariaLabel=b.ariaLabel||zt.B8.editorViewAccessibleLabel,b.ariaLabel=b.ariaLabel+";"+zt.B8.accessibilityHelpMessage,super(e,b,{},s,l,d,u,p,m,f,_,C),this._standaloneKeybindingService=g instanceof to?g:null,createAriaDomNode(b.ariaContainerElement)}addCommand(e,o,s){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const l="DYNAMIC_"+ ++lo,d=tt.Ao.deserialize(s);return this._standaloneKeybindingService.addDynamicKeybinding(l,e,o,d),l}createContextKey(e,o){return this._contextKeyService.createKey(e,o)}addAction(e){if("string"!==typeof e.id||"string"!==typeof e.label||"function"!==typeof e.run)throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),fe.JT.None;const o=e.id,s=e.label,l=tt.Ao.and(tt.Ao.equals("editorId",this.getId()),tt.Ao.deserialize(e.precondition)),d=e.keybindings,u=tt.Ao.and(l,tt.Ao.deserialize(e.keybindingContext)),g=e.contextMenuGroupId||null,p=e.contextMenuOrder||0,run=(o,...s)=>Promise.resolve(e.run(this,...s)),m=new fe.SL,f=this.getId()+":"+o;if(m.add(Et.P0.registerCommand(f,run)),g){const e={command:{id:f,title:s},when:l,group:g,order:p};m.add(Hn.BH.appendMenuItem(Hn.eH.EditorContext,e))}if(Array.isArray(d))for(const C of d)m.add(this._standaloneKeybindingService.addDynamicKeybinding(f,C,run,u));const _=new Qe.p(f,s,s,l,run,this._contextKeyService);return this._actions[o]=_,m.add((0,fe.OF)((()=>{delete this._actions[o]}))),m}_triggerCommand(e,o){if(this._codeEditorService instanceof nt)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,o)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,o)}};ho=standaloneCodeEditor_decorate([standaloneCodeEditor_param(2,ot.TG),standaloneCodeEditor_param(3,re.$),standaloneCodeEditor_param(4,Et.Hy),standaloneCodeEditor_param(5,tt.i6),standaloneCodeEditor_param(6,Rt.d),standaloneCodeEditor_param(7,Xe.XE),standaloneCodeEditor_param(8,ht.lT),standaloneCodeEditor_param(9,$i.F),standaloneCodeEditor_param(10,he.c_),standaloneCodeEditor_param(11,Oe.p)],ho);let uo=class StandaloneEditor extends ho{constructor(e,o,s,l,d,u,g,p,m,f,_,C,b,w,S){const y=Object.assign({},o);updateConfigurationService(f,y,!1);const L=p.registerEditorContainer(e);"string"===typeof y.theme&&p.setTheme(y.theme),"undefined"!==typeof y.autoDetectHighContrast&&p.setAutoDetectHighContrast(Boolean(y.autoDetectHighContrast));const x=y.model;let k;if(delete y.model,super(e,y,s,l,d,u,g,p,m,_,w,S),this._configurationService=f,this._standaloneThemeService=p,this._register(L),"undefined"===typeof x){const e=b.getLanguageIdByMimeType(y.language)||y.language||pi.bd;k=createTextModel(C,b,y.value||"",e,void 0),this._ownsModel=!0}else k=x,this._ownsModel=!1;if(this._attachModel(k),k){const e={oldModelUrl:null,newModelUrl:k.uri};this._onDidChangeModel.fire(e)}}dispose(){super.dispose()}updateOptions(e){updateConfigurationService(this._configurationService,e,!1),"string"===typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),"undefined"!==typeof e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};uo=standaloneCodeEditor_decorate([standaloneCodeEditor_param(2,ot.TG),standaloneCodeEditor_param(3,re.$),standaloneCodeEditor_param(4,Et.Hy),standaloneCodeEditor_param(5,tt.i6),standaloneCodeEditor_param(6,Rt.d),standaloneCodeEditor_param(7,Wn.Z),standaloneCodeEditor_param(8,ht.lT),standaloneCodeEditor_param(9,Tt.Ui),standaloneCodeEditor_param(10,$i.F),standaloneCodeEditor_param(11,pe.q),standaloneCodeEditor_param(12,ge.O),standaloneCodeEditor_param(13,he.c_),standaloneCodeEditor_param(14,Oe.p)],uo);let po=class StandaloneDiffEditor extends qe.p{constructor(e,o,s,l,d,u,g,p,m,f,_,C){const b=Object.assign({},o);updateConfigurationService(m,b,!0);const w=g.registerEditorContainer(e);"string"===typeof b.theme&&g.setTheme(b.theme),"undefined"!==typeof b.autoDetectHighContrast&&g.setAutoDetectHighContrast(Boolean(b.autoDetectHighContrast)),super(e,b,{},C,d,l,s,u,g,p,f,_),this._configurationService=m,this._standaloneThemeService=g,this._register(w)}dispose(){super.dispose()}updateOptions(e){updateConfigurationService(this._configurationService,e,!0),"string"===typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),"undefined"!==typeof e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,o,s){return e.createInstance(ho,o,s)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,o,s){return this.getModifiedEditor().addCommand(e,o,s)}createContextKey(e,o){return this.getModifiedEditor().createContextKey(e,o)}addAction(e){return this.getModifiedEditor().addAction(e)}};function createTextModel(e,o,s,l,d){if(s=s||"",!l){const l=s.indexOf("\n");let u=s;return-1!==l&&(u=s.substring(0,l)),doCreateModel(e,s,o.createByFilepathOrFirstLine(d||null,u),d)}return doCreateModel(e,s,o.createById(l),d)}function doCreateModel(e,o,s,l){return e.createModel(o,s,l)}function standaloneEditor_create(e,o,s){const l=ao.initialize(s||{});return l.createInstance(uo,e,o)}function onDidCreateEditor(e){const o=ao.get(re.$);return o.onCodeEditorAdd((o=>{e(o)}))}function createDiffEditor(e,o,s){const l=ao.initialize(s||{});return l.createInstance(po,e,o)}function createDiffNavigator(e,o){return new ae.F(e,o)}function createModel(e,o,s){const l=ao.get(ge.O),d=l.getLanguageIdByMimeType(o)||o;return createTextModel(ao.get(pe.q),l,e,d,s)}function setModelLanguage(e,o){const s=ao.get(ge.O),l=ao.get(pe.q);l.setMode(e,s.createById(o))}function setModelMarkers(e,o,s){if(e){const l=ao.get(Wi.lT);l.changeOne(o,e.uri,s)}}function getModelMarkers(e){const o=ao.get(Wi.lT);return o.read(e)}function onDidChangeMarkers(e){const o=ao.get(Wi.lT);return o.onMarkerChanged(e)}function getModel(e){const o=ao.get(pe.q);return o.getModel(e)}function getModels(){const e=ao.get(pe.q);return e.getModels()}function onDidCreateModel(e){const o=ao.get(pe.q);return o.onModelAdded(e)}function onWillDisposeModel(e){const o=ao.get(pe.q);return o.onModelRemoved(e)}function onDidChangeModelLanguage(e){const o=ao.get(pe.q);return o.onModelLanguageChanged((o=>{e({model:o.model,oldLanguage:o.oldLanguageId})}))}function standaloneEditor_createWebWorker(e){return createWebWorker(ao.get(pe.q),ao.get(he.c_),e)}function colorizeElement(e,o){const s=ao.get(ge.O),l=ao.get(Wn.Z);return l.registerEditorContainer(e),Colorizer.colorizeElement(l,s,e,o)}function colorize(e,o,s){const l=ao.get(ge.O),d=ao.get(Wn.Z);return d.registerEditorContainer(document.body),Colorizer.colorize(l,e,o,s)}function colorizeModelLine(e,o,s=4){const l=ao.get(Wn.Z);return l.registerEditorContainer(document.body),Colorizer.colorizeModelLine(e,o,s)}function getSafeTokenizationSupport(e){const o=ne.RW.get(e);return o||{getInitialState:()=>ue.TJ,tokenize:(o,s,l)=>(0,ue.Ri)(e,l)}}function tokenize(e,o){ne.RW.getOrCreate(o);const s=getSafeTokenizationSupport(o),l=(0,oe.uq)(e),d=[];let u=s.getInitialState();for(let g=0,p=l.length;g<p;g++){const e=l[g],o=s.tokenize(e,!0,u);d[g]=o.tokens,u=o.endState}return d}function defineTheme(e,o){const s=ao.get(Wn.Z);s.defineTheme(e,o)}function setTheme(e){const o=ao.get(Wn.Z);o.setTheme(e)}function remeasureFonts(){se.g.clearAllFontInfos()}function registerCommand(e,o){return Et.P0.registerCommand({id:e,handler:o})}function createMonacoEditorAPI(){return{create:standaloneEditor_create,onDidCreateEditor:onDidCreateEditor,createDiffEditor:createDiffEditor,createDiffNavigator:createDiffNavigator,createModel:createModel,setModelLanguage:setModelLanguage,setModelMarkers:setModelMarkers,getModelMarkers:getModelMarkers,onDidChangeMarkers:onDidChangeMarkers,getModels:getModels,getModel:getModel,onDidCreateModel:onDidCreateModel,onWillDisposeModel:onWillDisposeModel,onDidChangeModelLanguage:onDidChangeModelLanguage,createWebWorker:standaloneEditor_createWebWorker,colorizeElement:colorizeElement,colorize:colorize,colorizeModelLine:colorizeModelLine,tokenize:tokenize,defineTheme:defineTheme,setTheme:setTheme,remeasureFonts:remeasureFonts,registerCommand:registerCommand,AccessibilitySupport:l,ContentWidgetPositionPreference:m,CursorChangeReason:f,DefaultEndOfLine:_,EditorAutoIndentStrategy:b,EditorOption:w,EndOfLinePreference:S,EndOfLineSequence:y,MinimapPosition:I,MouseTargetType:A,OverlayWidgetPositionPreference:M,OverviewRulerLane:R,RenderLineNumbersType:O,RenderMinimap:F,ScrollbarVisibility:W,ScrollType:B,TextEditorCursorBlinkingStyle:K,TextEditorCursorStyle:j,TrackedRangeStickiness:G,WrappingIndent:q,InjectedTextCursorStops:x,PositionAffinity:P,ConfigurationChangedEvent:Q.Bb,BareFontInfo:le.E4,FontInfo:le.pR,TextModelResolvedOptions:de.dJ,FindMatch:de.tk,ApplyUpdateResult:Q.rk,EditorType:ce.g,EditorOptions:Q.BH}}function isArrayOf(e,o){if(!o)return!1;if(!Array.isArray(o))return!1;for(const s of o)if(!e(s))return!1;return!0}function bool(e,o){return"boolean"===typeof e?e:o}function string(e,o){return"string"===typeof e?e:o}function arrayToHash(e){const o={};for(const s of e)o[s]=!0;return o}function createKeywordMatcher(e,o=!1){o&&(e=e.map((function(e){return e.toLowerCase()})));const s=arrayToHash(e);return o?function(e){return void 0!==s[e.toLowerCase()]&&s.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==s[e]&&s.hasOwnProperty(e)}}function compileRegExp(e,o){o=o.replace(/@@/g,"");let s,l=0;do{s=!1,o=o.replace(/@(\w+)/g,(function(l,d){s=!0;let u="";if("string"===typeof e[d])u=e[d];else{if(!(e[d]&&e[d]instanceof RegExp))throw void 0===e[d]?createError(e,"language definition does not contain attribute '"+d+"', used at: "+o):createError(e,"attribute reference '"+d+"' must be a string, used at: "+o);u=e[d].source}return empty(u)?"":"(?:"+u+")"})),l++}while(s&&l<5);o=o.replace(/\x01/g,"@");const d=(e.ignoreCase?"i":"")+(e.unicode?"u":"");return new RegExp(o,d)}function selectScrutinee(e,o,s,l){if(l<0)return e;if(l<o.length)return o[l];if(l>=100){l-=100;const e=s.split(".");if(e.unshift(s),l<e.length)return e[l]}return null}function createGuard(e,o,s,l){let d=-1,u=s,g=s.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);g&&(g[3]&&(d=parseInt(g[3]),g[2]&&(d+=100)),u=g[4]);let p,m="~",f=u;if(u&&0!==u.length?/^\w*$/.test(f)?m="==":(g=u.match(/^(@|!@|~|!~|==|!=)(.*)$/),g&&(m=g[1],f=g[2])):(m="!=",f=""),"~"!==m&&"!~"!==m||!/^(\w|\|)*$/.test(f))if("@"===m||"!@"===m){const s=e[f];if(!s)throw createError(e,"the @ match target '"+f+"' is not defined, in rule: "+o);if(!isArrayOf((function(e){return"string"===typeof e}),s))throw createError(e,"the @ match target '"+f+"' must be an array of strings, in rule: "+o);const l=createKeywordMatcher(s,e.ignoreCase);p=function(e){return"@"===m?l(e):!l(e)}}else if("~"===m||"!~"===m)if(f.indexOf("$")<0){const o=compileRegExp(e,"^"+f+"$");p=function(e){return"~"===m?o.test(e):!o.test(e)}}else p=function(o,s,l,d){const u=compileRegExp(e,"^"+substituteMatches(e,f,s,l,d)+"$");return u.test(o)};else if(f.indexOf("$")<0){const o=fixCase(e,f);p=function(e){return"=="===m?e===o:e!==o}}else{const o=fixCase(e,f);p=function(s,l,d,u,g){const p=substituteMatches(e,o,l,d,u);return"=="===m?s===p:s!==p}}else{const o=createKeywordMatcher(f.split("|"),e.ignoreCase);p=function(e){return"~"===m?o(e):!o(e)}}return-1===d?{name:s,value:l,test:function(e,o,s,l){return p(e,e,o,s,l)}}:{name:s,value:l,test:function(e,o,s,l){const u=selectScrutinee(e,o,s,d);return p(u||"",e,o,s,l)}}}function compileAction(e,o,s){if(s){if("string"===typeof s)return s;if(s.token||""===s.token){if("string"!==typeof s.token)throw createError(e,"a 'token' attribute must be of type string, in rule: "+o);{const l={token:s.token};if(s.token.indexOf("$")>=0&&(l.tokenSubst=!0),"string"===typeof s.bracket)if("@open"===s.bracket)l.bracket=1;else{if("@close"!==s.bracket)throw createError(e,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+o);l.bracket=-1}if(s.next){if("string"!==typeof s.next)throw createError(e,"the next state must be a string value in rule: "+o);{let d=s.next;if(!/^(@pop|@push|@popall)$/.test(d)&&("@"===d[0]&&(d=d.substr(1)),d.indexOf("$")<0&&!stateExists(e,substituteMatches(e,d,"",[],""))))throw createError(e,"the next state '"+s.next+"' is not defined in rule: "+o);l.next=d}}return"number"===typeof s.goBack&&(l.goBack=s.goBack),"string"===typeof s.switchTo&&(l.switchTo=s.switchTo),"string"===typeof s.log&&(l.log=s.log),"string"===typeof s.nextEmbedded&&(l.nextEmbedded=s.nextEmbedded,e.usesEmbedded=!0),l}}if(Array.isArray(s)){const l=[];for(let d=0,u=s.length;d<u;d++)l[d]=compileAction(e,o,s[d]);return{group:l}}if(s.cases){const l=[];for(let u in s.cases)if(s.cases.hasOwnProperty(u)){const d=compileAction(e,o,s.cases[u]);"@default"===u||"@"===u||""===u?l.push({test:void 0,value:d,name:u}):"@eos"===u?l.push({test:function(e,o,s,l){return l},value:d,name:u}):l.push(createGuard(e,o,u,d))}const d=e.defaultToken;return{test:function(e,o,s,u){for(const d of l){const l=!d.test||d.test(e,o,s,u);if(l)return d.value}return d}}}throw createError(e,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+o)}return{token:""}}po=standaloneCodeEditor_decorate([standaloneCodeEditor_param(2,ot.TG),standaloneCodeEditor_param(3,tt.i6),standaloneCodeEditor_param(4,Ze.p),standaloneCodeEditor_param(5,re.$),standaloneCodeEditor_param(6,Wn.Z),standaloneCodeEditor_param(7,ht.lT),standaloneCodeEditor_param(8,Tt.Ui),standaloneCodeEditor_param(9,Kt.i),standaloneCodeEditor_param(10,Wt.ek),standaloneCodeEditor_param(11,jn.p)],po);class Rule{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,o){let s;if("string"===typeof o)s=o;else{if(!(o instanceof RegExp))throw createError(e,"rules must start with a match string or regular expression: "+this.name);s=o.source}this.matchOnlyAtLineStart=s.length>0&&"^"===s[0],this.name=this.name+": "+s,this.regex=compileRegExp(e,"^(?:"+(this.matchOnlyAtLineStart?s.substr(1):s)+")")}setAction(e,o){this.action=compileAction(e,this.name,o)}}function compile(e,o){if(!o||"object"!==typeof o)throw new Error("Monarch: expecting a language definition object");const s={};s.languageId=e,s.includeLF=bool(o.includeLF,!1),s.noThrow=!1,s.maxStack=100,s.start="string"===typeof o.start?o.start:null,s.ignoreCase=bool(o.ignoreCase,!1),s.unicode=bool(o.unicode,!1),s.tokenPostfix=string(o.tokenPostfix,"."+s.languageId),s.defaultToken=string(o.defaultToken,"source"),s.usesEmbedded=!1;const l=o;function addRules(e,d,u){for(const g of u){let u=g.include;if(u){if("string"!==typeof u)throw createError(s,"an 'include' attribute must be a string at: "+e);if("@"===u[0]&&(u=u.substr(1)),!o.tokenizer[u])throw createError(s,"include target '"+u+"' is not defined at: "+e);addRules(e+"."+u,d,o.tokenizer[u])}else{const o=new Rule(e);if(Array.isArray(g)&&g.length>=1&&g.length<=3)if(o.setRegex(l,g[0]),g.length>=3)if("string"===typeof g[1])o.setAction(l,{token:g[1],next:g[2]});else{if("object"!==typeof g[1])throw createError(s,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+e);{const e=g[1];e.next=g[2],o.setAction(l,e)}}else o.setAction(l,g[1]);else{if(!g.regex)throw createError(s,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+e);g.name&&"string"===typeof g.name&&(o.name=g.name),g.matchOnlyAtStart&&(o.matchOnlyAtLineStart=bool(g.matchOnlyAtLineStart,!1)),o.setRegex(l,g.regex),o.setAction(l,g.action)}d.push(o)}}}if(l.languageId=e,l.includeLF=s.includeLF,l.ignoreCase=s.ignoreCase,l.unicode=s.unicode,l.noThrow=s.noThrow,l.usesEmbedded=s.usesEmbedded,l.stateNames=o.tokenizer,l.defaultToken=s.defaultToken,!o.tokenizer||"object"!==typeof o.tokenizer)throw createError(s,"a language definition must define the 'tokenizer' attribute as an object");s.tokenizer=[];for(let u in o.tokenizer)if(o.tokenizer.hasOwnProperty(u)){s.start||(s.start=u);const e=o.tokenizer[u];s.tokenizer[u]=new Array,addRules("tokenizer."+u,s.tokenizer[u],e)}if(s.usesEmbedded=l.usesEmbedded,o.brackets){if(!Array.isArray(o.brackets))throw createError(s,"the 'brackets' attribute must be defined as an array")}else o.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const d=[];for(let u of o.brackets){let e=u;if(e&&Array.isArray(e)&&3===e.length&&(e={token:e[2],open:e[0],close:e[1]}),e.open===e.close)throw createError(s,"open and close brackets in a 'brackets' attribute must be different: "+e.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required.");if("string"!==typeof e.open||"string"!==typeof e.token||"string"!==typeof e.close)throw createError(s,"every element in the 'brackets' array must be a '{open,close,token}' object or array");d.push({token:e.token+s.tokenPostfix,open:fixCase(s,e.open),close:fixCase(s,e.close)})}return s.brackets=d,s.noThrow=!0,s}var standaloneLanguages_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function register(e){pi.dQ.registerLanguage(e)}function getLanguages(){let e=[];return e=e.concat(pi.dQ.getLanguages()),e}function getEncodedLanguageId(e){const o=ao.get(ge.O);return o.languageIdCodec.encodeLanguageId(e)}function onLanguage(e,o){const s=ao.get(ge.O),l=s.onDidEncounterLanguage((s=>{s===e&&(l.dispose(),o())}));return l}function setLanguageConfiguration(e,o){const s=ao.get(ge.O);if(!s.isRegisteredLanguageId(e))throw new Error(`Cannot set configuration for unknown language ${e}`);return he.zu.register(e,o,100)}class EncodedTokenizationSupportAdapter{constructor(e,o){this._languageId=e,this._actual=o}getInitialState(){return this._actual.getInitialState()}tokenize(e,o,s){if("function"===typeof this._actual.tokenize)return TokenizationSupportAdapter.adaptTokenize(this._languageId,this._actual,e,s);throw new Error("Not supported!")}tokenizeEncoded(e,o,s){const l=this._actual.tokenizeEncoded(e,s);return new ne.DI(l.tokens,l.endState)}}class TokenizationSupportAdapter{constructor(e,o,s,l){this._languageId=e,this._actual=o,this._languageService=s,this._standaloneThemeService=l}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,o){const s=[];let l=0;for(let d=0,u=e.length;d<u;d++){const u=e[d];let g=u.startIndex;0===d?g=0:g<l&&(g=l),s[d]=new ne.WU(g,u.scopes,o),l=g}return s}static adaptTokenize(e,o,s,l){const d=o.tokenize(s,l),u=TokenizationSupportAdapter._toClassicTokens(d.tokens,e);let g;return g=d.endState.equals(l)?l:d.endState,new ne.hG(u,g)}tokenize(e,o,s){return TokenizationSupportAdapter.adaptTokenize(this._languageId,this._actual,e,s)}_toBinaryTokens(e,o){const s=e.encodeLanguageId(this._languageId),l=this._standaloneThemeService.getColorTheme().tokenTheme,d=[];let u=0,g=0;for(let m=0,f=o.length;m<f;m++){const e=o[m],p=l.match(s,e.scopes);if(u>0&&d[u-1]===p)continue;let f=e.startIndex;0===m?f=0:f<g&&(f=g),d[u++]=f,d[u++]=p,g=f}const p=new Uint32Array(u);for(let m=0;m<u;m++)p[m]=d[m];return p}tokenizeEncoded(e,o,s){const l=this._actual.tokenize(e,s),d=this._toBinaryTokens(this._languageService.languageIdCodec,l.tokens);let u;return u=l.endState.equals(s)?s:l.endState,new ne.DI(d,u)}}function isATokensProvider(e){return"function"===typeof e.getInitialState}function isEncodedTokensProvider(e){return"tokenizeEncoded"in e}function isThenable(e){return e&&"function"===typeof e.then}function setColorMap(e){const o=ao.get(Wn.Z);if(e){const s=[null];for(let o=1,l=e.length;o<l;o++)s[o]=qi.Il.fromHex(e[o]);o.setColorMapOverride(s)}else o.setColorMapOverride(null)}function createTokenizationSupportAdapter(e,o){return isEncodedTokensProvider(o)?new EncodedTokenizationSupportAdapter(e,o):new TokenizationSupportAdapter(e,o,ao.get(ge.O),ao.get(Wn.Z))}function registerTokensProviderFactory(e,o){const s={createTokenizationSupport:()=>standaloneLanguages_awaiter(this,void 0,void 0,(function*(){const s=yield Promise.resolve(o.create());return s?isATokensProvider(s)?createTokenizationSupportAdapter(e,s):new MonarchTokenizer(ao.get(ge.O),ao.get(Wn.Z),e,compile(e,s)):null}))};return ne.RW.registerFactory(e,s)}function setTokensProvider(e,o){const s=ao.get(ge.O);if(!s.isRegisteredLanguageId(e))throw new Error(`Cannot set tokens provider for unknown language ${e}`);return isThenable(o)?registerTokensProviderFactory(e,{create:()=>o}):ne.RW.register(e,createTokenizationSupportAdapter(e,o))}function setMonarchTokensProvider(e,o){const create=o=>new MonarchTokenizer(ao.get(ge.O),ao.get(Wn.Z),e,compile(e,o));return isThenable(o)?registerTokensProviderFactory(e,{create:()=>o}):ne.RW.register(e,create(o))}function registerReferenceProvider(e,o){const s=ao.get(Oe.p);return s.referenceProvider.register(e,o)}function registerRenameProvider(e,o){const s=ao.get(Oe.p);return s.renameProvider.register(e,o)}function registerSignatureHelpProvider(e,o){const s=ao.get(Oe.p);return s.signatureHelpProvider.register(e,o)}function registerHoverProvider(e,o){const s=ao.get(Oe.p);return s.hoverProvider.register(e,{provideHover:(e,s,l)=>{const d=e.getWordAtPosition(s);return Promise.resolve(o.provideHover(e,s,l)).then((e=>{if(e)return!e.range&&d&&(e.range=new te.e(s.lineNumber,d.startColumn,s.lineNumber,d.endColumn)),e.range||(e.range=new te.e(s.lineNumber,s.column,s.lineNumber,s.column)),e}))}})}function registerDocumentSymbolProvider(e,o){const s=ao.get(Oe.p);return s.documentSymbolProvider.register(e,o)}function registerDocumentHighlightProvider(e,o){const s=ao.get(Oe.p);return s.documentHighlightProvider.register(e,o)}function registerLinkedEditingRangeProvider(e,o){const s=ao.get(Oe.p);return s.linkedEditingRangeProvider.register(e,o)}function registerDefinitionProvider(e,o){const s=ao.get(Oe.p);return s.definitionProvider.register(e,o)}function registerImplementationProvider(e,o){const s=ao.get(Oe.p);return s.implementationProvider.register(e,o)}function registerTypeDefinitionProvider(e,o){const s=ao.get(Oe.p);return s.typeDefinitionProvider.register(e,o)}function registerCodeLensProvider(e,o){const s=ao.get(Oe.p);return s.codeLensProvider.register(e,o)}function registerCodeActionProvider(e,o,s){const l=ao.get(Oe.p);return l.codeActionProvider.register(e,{providedCodeActionKinds:null===s||void 0===s?void 0:s.providedCodeActionKinds,provideCodeActions:(e,s,l,d)=>{const u=ao.get(Wi.lT),g=u.read({resource:e.uri}).filter((e=>te.e.areIntersectingOrTouching(e,s)));return o.provideCodeActions(e,s,{markers:g,only:l.only},d)},resolveCodeAction:o.resolveCodeAction})}function registerDocumentFormattingEditProvider(e,o){const s=ao.get(Oe.p);return s.documentFormattingEditProvider.register(e,o)}function registerDocumentRangeFormattingEditProvider(e,o){const s=ao.get(Oe.p);return s.documentRangeFormattingEditProvider.register(e,o)}function registerOnTypeFormattingEditProvider(e,o){const s=ao.get(Oe.p);return s.onTypeFormattingEditProvider.register(e,o)}function registerLinkProvider(e,o){const s=ao.get(Oe.p);return s.linkProvider.register(e,o)}function registerCompletionItemProvider(e,o){const s=ao.get(Oe.p);return s.completionProvider.register(e,o)}function registerColorProvider(e,o){const s=ao.get(Oe.p);return s.colorProvider.register(e,o)}function registerFoldingRangeProvider(e,o){const s=ao.get(Oe.p);return s.foldingRangeProvider.register(e,o)}function registerDeclarationProvider(e,o){const s=ao.get(Oe.p);return s.declarationProvider.register(e,o)}function registerSelectionRangeProvider(e,o){const s=ao.get(Oe.p);return s.selectionRangeProvider.register(e,o)}function registerDocumentSemanticTokensProvider(e,o){const s=ao.get(Oe.p);return s.documentSemanticTokensProvider.register(e,o)}function registerDocumentRangeSemanticTokensProvider(e,o){const s=ao.get(Oe.p);return s.documentRangeSemanticTokensProvider.register(e,o)}function registerInlineCompletionsProvider(e,o){const s=ao.get(Oe.p);return s.inlineCompletionsProvider.register(e,o)}function registerInlayHintsProvider(e,o){const s=ao.get(Oe.p);return s.inlayHintsProvider.register(e,o)}function createMonacoLanguagesAPI(){return{register:register,getLanguages:getLanguages,onLanguage:onLanguage,getEncodedLanguageId:getEncodedLanguageId,setLanguageConfiguration:setLanguageConfiguration,setColorMap:setColorMap,registerTokensProviderFactory:registerTokensProviderFactory,setTokensProvider:setTokensProvider,setMonarchTokensProvider:setMonarchTokensProvider,registerReferenceProvider:registerReferenceProvider,registerRenameProvider:registerRenameProvider,registerCompletionItemProvider:registerCompletionItemProvider,registerSignatureHelpProvider:registerSignatureHelpProvider,registerHoverProvider:registerHoverProvider,registerDocumentSymbolProvider:registerDocumentSymbolProvider,registerDocumentHighlightProvider:registerDocumentHighlightProvider,registerLinkedEditingRangeProvider:registerLinkedEditingRangeProvider,registerDefinitionProvider:registerDefinitionProvider,registerImplementationProvider:registerImplementationProvider,registerTypeDefinitionProvider:registerTypeDefinitionProvider,registerCodeLensProvider:registerCodeLensProvider,registerCodeActionProvider:registerCodeActionProvider,registerDocumentFormattingEditProvider:registerDocumentFormattingEditProvider,registerDocumentRangeFormattingEditProvider:registerDocumentRangeFormattingEditProvider,registerOnTypeFormattingEditProvider:registerOnTypeFormattingEditProvider,registerLinkProvider:registerLinkProvider,registerColorProvider:registerColorProvider,registerFoldingRangeProvider:registerFoldingRangeProvider,registerDeclarationProvider:registerDeclarationProvider,registerSelectionRangeProvider:registerSelectionRangeProvider,registerDocumentSemanticTokensProvider:registerDocumentSemanticTokensProvider,registerDocumentRangeSemanticTokensProvider:registerDocumentRangeSemanticTokensProvider,registerInlineCompletionsProvider:registerInlineCompletionsProvider,registerInlayHintsProvider:registerInlayHintsProvider,DocumentHighlightKind:C,CompletionItemKind:u,CompletionItemTag:g,CompletionItemInsertTextRule:d,SymbolKind:z,SymbolTag:U,IndentAction:L,CompletionTriggerKind:p,SignatureHelpTriggerKind:H,InlayHintKind:k,InlineCompletionTriggerKind:N,FoldingRangeKind:ne.AD}}var mo,fo=s(1373);Q.BH.wrappingIndent.defaultValue=0,Q.BH.glyphMargin.defaultValue=!1,Q.BH.autoIndent.defaultValue=3,Q.BH.overviewRulerLanes.defaultValue=2,fo.xC.setFormatterSelector(((e,o,s)=>Promise.resolve(e[0])));const _o=createMonacoBaseAPI();_o.editor=createMonacoEditorAPI(),_o.languages=createMonacoLanguagesAPI();const Co=_o.CancellationTokenSource,vo=_o.Emitter,bo=_o.KeyCode,wo=_o.KeyMod,So=_o.Position,yo=_o.Range,Lo=_o.Selection,xo=_o.SelectionDirection,ko=_o.MarkerSeverity,No=_o.MarkerTag,Do=_o.Uri,Eo=_o.Token,To=_o.editor,Io=_o.languages;((null===(mo=Ce.li.MonacoEnvironment)||void 0===mo?void 0:mo.globalAPI)||"function"===typeof define&&s.amdO)&&(self.monaco=_o),"undefined"!==typeof self.require&&"function"===typeof self.require.config&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})},2144:function(e,o,s){"use strict";s.r(o),s.d(o,{CancellationTokenSource:function(){return l.CancellationTokenSource},Emitter:function(){return l.Emitter},KeyCode:function(){return l.KeyCode},KeyMod:function(){return l.KeyMod},MarkerSeverity:function(){return l.MarkerSeverity},MarkerTag:function(){return l.MarkerTag},Position:function(){return l.Position},Range:function(){return l.Range},Selection:function(){return l.Selection},SelectionDirection:function(){return l.SelectionDirection},Token:function(){return l.Token},Uri:function(){return l.Uri},__esModule:function(){return l.__esModule},editor:function(){return l.editor},languages:function(){return l.languages}});var l=s(2100),d=s(5552);
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>s.e(848).then(s.bind(s,848))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>s.e(4386).then(s.bind(s,4386))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>s.e(1471).then(s.bind(s,1471))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>s.e(4129).then(s.bind(s,4129))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>s.e(7131).then(s.bind(s,7131))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>s.e(1448).then(s.bind(s,1448))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>s.e(3036).then(s.bind(s,3036))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>s.e(1147).then(s.bind(s,1147))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>s.e(1960).then(s.bind(s,1960))}),(0,d.H)({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>s.e(1960).then(s.bind(s,1960))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>s.e(8719).then(s.bind(s,8719))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>s.e(8946).then(s.bind(s,8946))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>s.e(2075).then(s.bind(s,7566))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>s.e(9343).then(s.bind(s,9343))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>s.e(5849).then(s.bind(s,5849))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>s.e(2814).then(s.bind(s,2814))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>s.e(2240).then(s.bind(s,2240))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>s.e(4188).then(s.bind(s,4188))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>s.e(6241).then(s.bind(s,6241))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>s.e(5880).then(s.bind(s,5880)).then((e=>e.TagAutoInterpolationDollar))}),(0,d.H)({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>s.e(5880).then(s.bind(s,5880)).then((e=>e.TagAngleInterpolationDollar))}),(0,d.H)({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>s.e(5880).then(s.bind(s,5880)).then((e=>e.TagBracketInterpolationDollar))}),(0,d.H)({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>s.e(5880).then(s.bind(s,5880)).then((e=>e.TagAngleInterpolationBracket))}),(0,d.H)({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>s.e(5880).then(s.bind(s,5880)).then((e=>e.TagBracketInterpolationBracket))}),(0,d.H)({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>s.e(5880).then(s.bind(s,5880)).then((e=>e.TagAutoInterpolationDollar))}),(0,d.H)({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>s.e(5880).then(s.bind(s,5880)).then((e=>e.TagAutoInterpolationBracket))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>s.e(249).then(s.bind(s,249))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>s.e(6489).then(s.bind(s,6489))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>s.e(5703).then(s.bind(s,5703))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>s.e(3632).then(s.bind(s,3632))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>s.e(2571).then(s.bind(s,3878))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>s.e(2798).then(s.bind(s,2798))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>s.e(7043).then(s.bind(s,7043))});s(3763);
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>s.e(4946).then(s.bind(s,4946))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>s.e(4368).then(s.bind(s,4368))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>s.e(5593).then(s.bind(s,5593))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>s.e(4912).then(s.bind(s,4912))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>s.e(911).then(s.bind(s,911))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>s.e(4028).then(s.bind(s,4028))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>s.e(8906).then(s.bind(s,8906))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>s.e(2954).then(s.bind(s,2954))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>s.e(854).then(s.bind(s,854))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>s.e(9398).then(s.bind(s,9398))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>s.e(1961).then(s.bind(s,1961))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>s.e(9537).then(s.bind(s,9537))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>s.e(6082).then(s.bind(s,6082))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>s.e(8084).then(s.bind(s,8084))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>s.e(8070).then(s.bind(s,8070))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>s.e(996).then(s.bind(s,996))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>s.e(7835).then(s.bind(s,7835))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"pla",extensions:[".pla"],loader:()=>s.e(3682).then(s.bind(s,3682))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>s.e(8180).then(s.bind(s,8180))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>s.e(4407).then(s.bind(s,4407))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>s.e(7562).then(s.bind(s,7562))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>s.e(3760).then(s.bind(s,3760))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>s.e(2892).then(s.bind(s,2892))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>s.e(7287).then(s.bind(s,7287))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>s.e(9400).then(s.bind(s,9400))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>s.e(2140).then(s.bind(s,2140))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>s.e(6424).then(s.bind(s,6424))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>s.e(1259).then(s.bind(s,1259))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>s.e(6449).then(s.bind(s,6449))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>s.e(1065).then(s.bind(s,1065))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>s.e(9684).then(s.bind(s,9684))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>s.e(8715).then(s.bind(s,8715))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>s.e(5062).then(s.bind(s,5062))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>s.e(180).then(s.bind(s,180))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>s.e(2060).then(s.bind(s,2060))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>s.e(525).then(s.bind(s,525))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>s.e(8670).then(s.bind(s,8670))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>s.e(1156).then(s.bind(s,1156))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>s.e(3919).then(s.bind(s,3919))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>s.e(5962).then(s.bind(s,5962))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>s.e(7778).then(s.bind(s,7778))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>s.e(6587).then(s.bind(s,6587))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>s.e(2911).then(s.bind(s,2911))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>s.e(1886).then(s.bind(s,1886))}),(0,d.H)({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>s.e(1886).then(s.bind(s,1886))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>s.e(7637).then(s.bind(s,7637))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>s.e(8424).then(s.bind(s,8424))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>s.e(6717).then(s.bind(s,6717))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>s.e(9907).then(s.bind(s,9907))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>s.e(4902).then(s.bind(s,4902))}),
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
(0,d.H)({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>s.e(3585).then(s.bind(s,3585))});
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
var u=Object.defineProperty,g=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,m=Object.prototype.hasOwnProperty,__reExport=(e,o,s,l)=>{if(o&&"object"===typeof o||"function"===typeof o)for(let d of p(o))m.call(e,d)||!s&&"default"===d||u(e,d,{get:()=>o[d],enumerable:!(l=g(o,d))||l.enumerable});return e},f={};__reExport(f,l);var _=class{_onDidChange=new f.Emitter;_options;_modeConfiguration;_languageId;constructor(e,o,s){this._languageId=e,this.setOptions(o),this.setModeConfiguration(s)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},C={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},b={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},w=new _("css",C,b),S=new _("scss",C,b),y=new _("less",C,b);function getMode(){return s.e(5288).then(s.bind(s,5288))}f.languages.css={cssDefaults:w,lessDefaults:y,scssDefaults:S},f.languages.onLanguage("less",(()=>{getMode().then((e=>e.setupMode(y)))})),f.languages.onLanguage("scss",(()=>{getMode().then((e=>e.setupMode(S)))})),f.languages.onLanguage("css",(()=>{getMode().then((e=>e.setupMode(w)))}));
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
var L=Object.defineProperty,x=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyNames,N=Object.prototype.hasOwnProperty,monaco_contribution_reExport=(e,o,s,l)=>{if(o&&"object"===typeof o||"function"===typeof o)for(let d of k(o))N.call(e,d)||!s&&"default"===d||L(e,d,{get:()=>o[d],enumerable:!(l=x(o,d))||l.enumerable});return e},D={};monaco_contribution_reExport(D,l);var E=class{_onDidChange=new D.Emitter;_options;_modeConfiguration;_languageId;constructor(e,o,s){this._languageId=e,this.setOptions(o),this.setModeConfiguration(s)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},T={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},I={format:T,suggest:{},data:{useDefaultDataProvider:!0}};function getConfigurationDefault(e){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:e===A,documentFormattingEdits:e===A,documentRangeFormattingEdits:e===A}}var A="html",M="handlebars",R="razor",P=registerHTMLLanguageService(A,I,getConfigurationDefault(A)),O=P.defaults,F=registerHTMLLanguageService(M,I,getConfigurationDefault(M)),B=F.defaults,W=registerHTMLLanguageService(R,I,getConfigurationDefault(R)),V=W.defaults;function monaco_contribution_getMode(){return s.e(5377).then(s.bind(s,5377))}function registerHTMLLanguageService(e,o=I,s=getConfigurationDefault(e)){const l=new E(e,o,s);let d;const u=D.languages.onLanguage(e,(async()=>{d=(await monaco_contribution_getMode()).setupMode(l)}));return{defaults:l,dispose(){u.dispose(),d?.dispose(),d=void 0}}}D.languages.html={htmlDefaults:O,razorDefaults:V,handlebarDefaults:B,htmlLanguageService:P,handlebarLanguageService:F,razorLanguageService:W,registerHTMLLanguageService:registerHTMLLanguageService};
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
var H=Object.defineProperty,z=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyNames,K=Object.prototype.hasOwnProperty,json_monaco_contribution_reExport=(e,o,s,l)=>{if(o&&"object"===typeof o||"function"===typeof o)for(let d of U(o))K.call(e,d)||!s&&"default"===d||H(e,d,{get:()=>o[d],enumerable:!(l=z(o,d))||l.enumerable});return e},j={};json_monaco_contribution_reExport(j,l);var G=class{_onDidChange=new j.Emitter;_diagnosticsOptions;_modeConfiguration;_languageId;constructor(e,o,s){this._languageId=e,this.setDiagnosticsOptions(o),this.setModeConfiguration(s)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},q={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},Q={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Z=new G("json",q,Q);function json_monaco_contribution_getMode(){return s.e(665).then(s.bind(s,33))}j.languages.json={jsonDefaults:Z},j.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),j.languages.onLanguage("json",(()=>{json_monaco_contribution_getMode().then((e=>e.setupMode(Z)))}));s(9585),s(2549),s(9182),s(4869),s(5623),s(236),s(1387),s(4336),s(2102),s(5833),s(9575),s(8334),s(9079),s(9956),s(3740),s(1895),s(7107),s(5826),s(5808),s(4125),s(1097),s(6917),s(5369),s(5817),s(2470),s(9803),s(6122),s(4602),s(7563),s(8077),s(7615),s(9504),s(76),s(8408),s(7061),s(7660),s(2379),s(7721),s(8762),s(492),s(2614),s(4662),s(5180),s(9607),s(1271),s(943),s(7181),s(6709),s(913),s(8609),s(9477),s(9646),s(7830),s(669),s(2078),s(6816),s(1732),s(5048),s(5662)},9477:function(e,o,s){"use strict";s.r(o);var l=s(5321),d=s(8626),u=s(8764),g=s(5152),p=s(3794),m=s(5976),f=s(1432),_=s(2677),C=s(666),b=s(6830),w=s(9102),S=s(4662),y=s(8819),L=s(2065),x=s(1847),k=s(988),N=s(3910),D=s(7781),E=s(913),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const T=new y.uy("accessibilityHelpWidgetVisible",!1);let I=class AccessibilityHelpController extends m.JT{constructor(e,o){super(),this._editor=e,this._widget=this._register(o.createInstance(A,this._editor))}static get(e){return e.getContribution(AccessibilityHelpController.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};function getSelectionLabel(e,o){return e&&0!==e.length?1===e.length?o?_.WU(E.Oe.singleSelectionRange,e[0].positionLineNumber,e[0].positionColumn,o):_.WU(E.Oe.singleSelection,e[0].positionLineNumber,e[0].positionColumn):o?_.WU(E.Oe.multiSelectionRange,e.length,o):e.length>0?_.WU(E.Oe.multiSelection,e.length):"":E.Oe.noSelection}I.ID="editor.contrib.accessibilityHelpController",I=__decorate([__param(1,L.TG)],I);let A=class AccessibilityHelpWidget extends p.${constructor(e,o,s,u){super(),this._contextKeyService=o,this._keybindingService=s,this._openerService=u,this._editor=e,this._isVisibleKey=T.bindTo(this._contextKeyService),this._domNode=(0,d.X)(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=(0,d.X)(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange((()=>{this._isVisible&&this._layout()}))),this._register(l.mu(this._contentDomNode.domNode,"keydown",(e=>{if(this._isVisible&&(e.equals(2083)&&((0,g.Z9)(E.Oe.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),l.PO(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),e.preventDefault(),e.stopPropagation()),e.equals(2086))){(0,g.Z9)(E.Oe.openingDocs);let o=this._editor.getRawOptions().accessibilityHelpUrl;"undefined"===typeof o&&(o="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(C.o.parse(o)),e.preventDefault(),e.stopPropagation()}}))),this.onblur(this._contentDomNode.domNode,(()=>{this.hide()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return AccessibilityHelpWidget.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,o,s){const l=this._keybindingService.lookupKeybinding(e);return l?_.WU(o,l.getAriaLabel()):_.WU(s,e)}_buildContent(){const e=this._editor.getOptions(),o=this._editor.getSelections();let s=0;if(o){const e=this._editor.getModel();e&&o.forEach((o=>{s+=e.getValueLengthInRange(o)}))}let l=getSelectionLabel(o,s);e.get(54)?e.get(81)?l+=E.Oe.readonlyDiffEditor:l+=E.Oe.editableDiffEditor:e.get(81)?l+=E.Oe.readonlyEditor:l+=E.Oe.editableEditor;const d=f.dz?E.Oe.changeConfigToOnMac:E.Oe.changeConfigToOnWinLinux;switch(e.get(2)){case 0:l+="\n\n - "+d;break;case 2:l+="\n\n - "+E.Oe.auto_on;break;case 1:l+="\n\n - "+E.Oe.auto_off,l+=" "+d;break}e.get(130)?l+="\n\n - "+this._descriptionForCommand(S.ToggleTabFocusModeAction.ID,E.Oe.tabFocusModeOnMsg,E.Oe.tabFocusModeOnMsgNoKb):l+="\n\n - "+this._descriptionForCommand(S.ToggleTabFocusModeAction.ID,E.Oe.tabFocusModeOffMsg,E.Oe.tabFocusModeOffMsgNoKb);const g=f.dz?E.Oe.openDocMac:E.Oe.openDocWinLinux;l+="\n\n - "+g,l+="\n\n"+E.Oe.outroMsg,this._contentDomNode.domNode.appendChild((0,u.BO)(l)),this._contentDomNode.domNode.setAttribute("aria-label",l)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,l.PO(this._contentDomNode.domNode),this._editor.focus())}_layout(){const e=this._editor.getLayoutInfo(),o=Math.max(5,Math.min(AccessibilityHelpWidget.WIDTH,e.width-40)),s=Math.max(5,Math.min(AccessibilityHelpWidget.HEIGHT,e.height-40));this._domNode.setWidth(o),this._domNode.setHeight(s);const l=Math.round((e.height-s)/2);this._domNode.setTop(l);const d=Math.round((e.width-o)/2);this._domNode.setLeft(d)}};A.ID="editor.contrib.accessibilityHelpWidget",A.WIDTH=500,A.HEIGHT=300,A=__decorate([__param(1,y.i6),__param(2,x.d),__param(3,k.v4)],A);class ShowAccessibilityHelpAction extends b.R6{constructor(){super({id:"editor.action.showAccessibilityHelp",label:E.Oe.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,o){const s=I.get(o);s&&s.show()}}(0,b._K)(I.ID,I),(0,b.Qr)(ShowAccessibilityHelpAction);const M=b._l.bindToContribution(I.get);(0,b.fK)(new M({id:"closeAccessibilityHelp",precondition:T,handler:e=>e.hide(),kbOpts:{weight:200,kbExpr:w.u.focus,primary:9,secondary:[1033]}})),(0,D.Ic)(((e,o)=>{const s=e.getColor(N.D0T);s&&o.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${s}; }`);const l=e.getColor(N.Hfx);l&&o.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${l}; }`);const d=e.getColor(N.rh);d&&o.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${d}; }`);const u=e.getColor(N.lRK);u&&o.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${u}; }`)}))},9646:function(e,o,s){"use strict";s.r(o),s.d(o,{IPadShowKeyboard:function(){return IPadShowKeyboard}});var l=s(5321),d=s(5976),u=s(6830),g=s(1432);class IPadShowKeyboard extends d.JT{constructor(e){super(),this.editor=e,this.widget=null,g.gn&&(this._register(e.onDidChangeConfiguration((()=>this.update()))),this.update())}update(){const e=!this.editor.getOption(81);!this.widget&&e?this.widget=new ShowKeyboardWidget(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}IPadShowKeyboard.ID="editor.contrib.iPadShowKeyboard";class ShowKeyboardWidget extends d.JT{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(l.nm(this._domNode,"touchstart",(e=>{this.editor.focus()}))),this._register(l.nm(this._domNode,"focus",(e=>{this.editor.focus()}))),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return ShowKeyboardWidget.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}ShowKeyboardWidget.ID="editor.contrib.ShowKeyboardWidget",(0,u._K)(IPadShowKeyboard.ID,IPadShowKeyboard)},7830:function(e,o,s){"use strict";s.r(o);var l=s(5321),d=s(1264),u=s(5976),g=s(6830),p=s(3155),m=s(276),f=s(2042),_=s(4156),C=s(3910),b=s(7781),w=s(913),S=s(2321),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let y=class InspectTokensController extends u.JT{constructor(e,o,s){super(),this._editor=e,this._languageService=s,this._widget=null,this._register(this._editor.onDidChangeModel((e=>this.stop()))),this._register(this._editor.onDidChangeModelLanguage((e=>this.stop()))),this._register(p.RW.onDidChange((e=>this.stop()))),this._register(this._editor.onKeyUp((e=>9===e.keyCode&&this.stop())))}static get(e){return e.getContribution(InspectTokensController.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new InspectTokensWidget(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};y.ID="editor.contrib.inspectTokens",y=__decorate([__param(1,_.Z),__param(2,f.O)],y);class InspectTokens extends g.R6{constructor(){super({id:"editor.action.inspectTokens",label:w.ug.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,o){const s=y.get(o);s&&s.launch()}}function renderTokenText(e){let o="";for(let s=0,l=e.length;s<l;s++){const l=e.charCodeAt(s);switch(l){case 9:o+="→";break;case 32:o+="·";break;default:o+=String.fromCharCode(l)}}return o}function getSafeTokenizationSupport(e,o){const s=p.RW.get(o);if(s)return s;const l=e.encodeLanguageId(o);return{getInitialState:()=>m.TJ,tokenize:(e,s,l)=>(0,m.Ri)(o,l),tokenizeEncoded:(e,o,s)=>(0,m.Dy)(l,s)}}class InspectTokensWidget extends u.JT{constructor(e,o){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=o,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=getSafeTokenizationSupport(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition((e=>this._compute(this._editor.getPosition())))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return InspectTokensWidget._ID}_compute(e){const o=this._getTokensAtLine(e.lineNumber);let s=0;for(let l=o.tokens1.length-1;l>=0;l--){const d=o.tokens1[l];if(e.column-1>=d.offset){s=l;break}}let u=0;for(let l=o.tokens2.length>>>1;l>=0;l--)if(e.column-1>=o.tokens2[l<<1]){u=l;break}const g=this._model.getLineContent(e.lineNumber);let p="";if(s<o.tokens1.length){const e=o.tokens1[s].offset,l=s+1<o.tokens1.length?o.tokens1[s+1].offset:g.length;p=g.substring(e,l)}(0,l.mc)(this._domNode,(0,l.$)("h2.tm-token",void 0,renderTokenText(p),(0,l.$)("span.tm-token-length",void 0,`${p.length} ${1===p.length?"char":"chars"}`))),(0,l.R3)(this._domNode,(0,l.$)("hr.tokens-inspect-separator",{style:"clear:both"}));const m=1+(u<<1)<o.tokens2.length?this._decodeMetadata(o.tokens2[1+(u<<1)]):null;(0,l.R3)(this._domNode,(0,l.$)("table.tm-metadata-table",void 0,(0,l.$)("tbody",void 0,(0,l.$)("tr",void 0,(0,l.$)("td.tm-metadata-key",void 0,"language"),(0,l.$)("td.tm-metadata-value",void 0,`${m?m.languageId:"-?-"}`)),(0,l.$)("tr",void 0,(0,l.$)("td.tm-metadata-key",void 0,"token type"),(0,l.$)("td.tm-metadata-value",void 0,`${m?this._tokenTypeToString(m.tokenType):"-?-"}`)),(0,l.$)("tr",void 0,(0,l.$)("td.tm-metadata-key",void 0,"font style"),(0,l.$)("td.tm-metadata-value",void 0,`${m?this._fontStyleToString(m.fontStyle):"-?-"}`)),(0,l.$)("tr",void 0,(0,l.$)("td.tm-metadata-key",void 0,"foreground"),(0,l.$)("td.tm-metadata-value",void 0,`${m?d.Il.Format.CSS.formatHex(m.foreground):"-?-"}`)),(0,l.$)("tr",void 0,(0,l.$)("td.tm-metadata-key",void 0,"background"),(0,l.$)("td.tm-metadata-value",void 0,`${m?d.Il.Format.CSS.formatHex(m.background):"-?-"}`))))),(0,l.R3)(this._domNode,(0,l.$)("hr.tokens-inspect-separator")),s<o.tokens1.length&&(0,l.R3)(this._domNode,(0,l.$)("span.tm-token-type",void 0,o.tokens1[s].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const o=p.RW.getColorMap(),s=p.NX.getLanguageId(e),l=p.NX.getTokenType(e),d=p.NX.getFontStyle(e),u=p.NX.getForeground(e),g=p.NX.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(s),tokenType:l,fontStyle:d,foreground:o[u],background:o[g]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let o="";return 1&e&&(o+="italic "),2&e&&(o+="bold "),4&e&&(o+="underline "),8&e&&(o+="strikethrough "),0===o.length&&(o="---"),o}_getTokensAtLine(e){const o=this._getStateBeforeLine(e),s=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,o),l=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,o);return{startState:o,tokens1:s.tokens,tokens2:l.tokens,endState:s.endState}}_getStateBeforeLine(e){let o=this._tokenizationSupport.getInitialState();for(let s=1;s<e;s++){const e=this._tokenizationSupport.tokenize(this._model.getLineContent(s),!0,o);o=e.endState}return o}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}InspectTokensWidget._ID="editor.contrib.inspectTokensWidget",(0,g._K)(y.ID,y),(0,g.Qr)(InspectTokens),(0,b.Ic)(((e,o)=>{const s=e.getColor(C.CNo);if(s){const l=e.type===S.e.HIGH_CONTRAST?2:1;o.addRule(`.monaco-editor .tokens-inspect-widget { border: ${l}px solid ${s}; }`),o.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${s}; }`)}const l=e.getColor(C.yJx);l&&o.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${l}; }`);const d=e.getColor(C.Sbf);d&&o.addRule(`.monaco-editor .tokens-inspect-widget { color: ${d}; }`)}))},1732:function(e,o,s){"use strict";s.r(o),s.d(o,{GotoLineAction:function(){return GotoLineAction},StandaloneCommandsQuickAccessProvider:function(){return W}});var l=s(9872),d=s(725),u=s(913),g=s(1640),p=s(1212),m=s(9488),f=s(8401),_=s(3580);function exceptionToErrorMessage(e,o){return o&&(e.stack||e.stacktrace)?_.N("stackTrace.format","{0}: {1}",detectSystemErrorMessage(e),stackToString(e.stack)||stackToString(e.stacktrace)):detectSystemErrorMessage(e)}function stackToString(e){return Array.isArray(e)?e.join("\n"):e}function detectSystemErrorMessage(e){return"string"===typeof e.code&&"number"===typeof e.errno&&"string"===typeof e.syscall?_.N("nodeExceptionMessage","A system error occurred ({0})",e.message):e.message||_.N("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function toErrorMessage(e=null,o=!1){if(!e)return _.N("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(e)){const s=m.kX(e),l=toErrorMessage(s[0],o);return s.length>1?_.N("error.moreErrors","{0} ({1} errors in total)",l,s.length):l}if(f.HD(e))return e;if(e.detail){const s=e.detail;if(s.error)return exceptionToErrorMessage(s.error,o);if(s.exception)return exceptionToErrorMessage(s.exception,o)}return e.stack?exceptionToErrorMessage(e,o):e.message?e.message:_.N("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var C,b=s(7301),w=s(5392),S=s(5976),y=s(3702),L=s(4603),x=s(4565),k=s(3108),N=s(8820),D=s(2065),E=s(1847),T=s(5393),I=s(1050),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function isPicksWithActive(e){const o=e;return Array.isArray(o.items)}function isFastAndSlowPicks(e){const o=e;return!!o.picks&&o.additionalPicks instanceof Promise}(function(e){e[e["NO_ACTION"]=0]="NO_ACTION",e[e["CLOSE_PICKER"]=1]="CLOSE_PICKER",e[e["REFRESH_PICKER"]=2]="REFRESH_PICKER",e[e["REMOVE_ITEM"]=3]="REMOVE_ITEM"})(C||(C={}));class PickerQuickAccessProvider extends S.JT{constructor(e,o){super(),this.prefix=e,this.options=o}provide(e,o){var s;const l=new S.SL;let d;e.canAcceptInBackground=!!(null===(s=this.options)||void 0===s?void 0:s.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const u=l.add(new S.XK),updatePickerItems=()=>__awaiter(this,void 0,void 0,(function*(){const s=u.value=new S.SL;null===d||void 0===d||d.dispose(!0),e.busy=!1,d=new I.A(o);const l=d.token,g=e.value.substr(this.prefix.length).trim(),p=this._getPicks(g,s,l),applyPicks=(o,s)=>{var l;let d,u;if(isPicksWithActive(o)?(d=o.items,u=o.active):d=o,0===d.length){if(s)return!1;g.length>0&&(null===(l=this.options)||void 0===l?void 0:l.noResultsPick)&&(d=[this.options.noResultsPick])}return e.items=d,u&&(e.activeItems=[u]),!0};if(null===p);else if(isFastAndSlowPicks(p)){let o=!1,s=!1;yield Promise.all([(()=>__awaiter(this,void 0,void 0,(function*(){yield(0,T.Vs)(PickerQuickAccessProvider.FAST_PICKS_RACE_DELAY),l.isCancellationRequested||s||(o=applyPicks(p.picks,!0))})))(),(()=>__awaiter(this,void 0,void 0,(function*(){e.busy=!0;try{const d=yield p.additionalPicks;if(l.isCancellationRequested)return;let u,g,m,f;if(isPicksWithActive(p.picks)?(u=p.picks.items,g=p.picks.active):u=p.picks,isPicksWithActive(d)?(m=d.items,f=d.active):m=d,m.length>0||!o){let o;if(!g&&!f){const s=e.activeItems[0];s&&-1!==u.indexOf(s)&&(o=s)}applyPicks({items:[...u,...m],active:g||f||o})}}finally{l.isCancellationRequested||(e.busy=!1),s=!0}})))()])}else if(p instanceof Promise){e.busy=!0;try{const o=yield p;if(l.isCancellationRequested)return;applyPicks(o)}finally{l.isCancellationRequested||(e.busy=!1)}}else applyPicks(p)}));return l.add(e.onDidChangeValue((()=>updatePickerItems()))),updatePickerItems(),l.add(e.onDidAccept((o=>{const[s]=e.selectedItems;"function"===typeof(null===s||void 0===s?void 0:s.accept)&&(o.inBackground||e.hide(),s.accept(e.keyMods,o))}))),l.add(e.onDidTriggerItemButton((({button:s,item:l})=>__awaiter(this,void 0,void 0,(function*(){var d,u;if("function"===typeof l.trigger){const g=null!==(u=null===(d=l.buttons)||void 0===d?void 0:d.indexOf(s))&&void 0!==u?u:-1;if(g>=0){const s=l.trigger(g,e.keyMods),d="number"===typeof s?s:yield s;if(o.isCancellationRequested)return;switch(d){case C.NO_ACTION:break;case C.CLOSE_PICKER:e.hide();break;case C.REFRESH_PICKER:updatePickerItems();break;case C.REMOVE_ITEM:{const o=e.items.indexOf(l);if(-1!==o){const s=e.items.slice(),l=s.splice(o,1),d=e.activeItems.filter((e=>e!==l[0])),u=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=s,d&&(e.activeItems=d),e.keepScrollPosition=u}break}}}}}))))),l}}PickerQuickAccessProvider.FAST_PICKS_RACE_DELAY=200;var A=s(7060),M=s(829),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},commandsQuickAccess_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let R=class AbstractCommandsQuickAccessProvider extends PickerQuickAccessProvider{constructor(e,o,s,l,d,u){super(AbstractCommandsQuickAccessProvider.PREFIX,e),this.instantiationService=o,this.keybindingService=s,this.commandService=l,this.telemetryService=d,this.dialogService=u,this.commandsHistory=this._register(this.instantiationService.createInstance(P)),this.options=e}_getPicks(e,o,s){return commandsQuickAccess_awaiter(this,void 0,void 0,(function*(){const l=yield this.getCommandPicks(o,s);if(s.isCancellationRequested)return[];const d=[];for(const o of l){const s=(0,f.f6)(AbstractCommandsQuickAccessProvider.WORD_FILTER(e,o.label)),l=o.commandAlias?(0,f.f6)(AbstractCommandsQuickAccessProvider.WORD_FILTER(e,o.commandAlias)):void 0;s||l?(o.highlights={label:s,detail:this.options.showAlias?l:void 0},d.push(o)):e===o.commandId&&d.push(o)}const u=new Map;for(const e of d){const o=u.get(e.label);o?(e.description=e.commandId,o.description=o.commandId):u.set(e.label,e)}d.sort(((e,o)=>{const s=this.commandsHistory.peek(e.commandId),l=this.commandsHistory.peek(o.commandId);return s&&l?s>l?-1:1:s?-1:l?1:e.label.localeCompare(o.label)}));const g=[];let p=!1;for(let e=0;e<d.length;e++){const o=d[e],s=this.keybindingService.lookupKeybinding(o.commandId),l=s?(0,_.N)("commandPickAriaLabelWithKeybinding","{0}, {1}",o.label,s.getAriaLabel()):o.label;0===e&&this.commandsHistory.peek(o.commandId)&&(g.push({type:"separator",label:(0,_.N)("recentlyUsed","recently used")}),p=!0),0!==e&&p&&!this.commandsHistory.peek(o.commandId)&&(g.push({type:"separator",label:(0,_.N)("morecCommands","other commands")}),p=!1),g.push(Object.assign(Object.assign({},o),{ariaLabel:l,detail:this.options.showAlias&&o.commandAlias!==o.label?o.commandAlias:void 0,keybinding:s,accept:()=>commandsQuickAccess_awaiter(this,void 0,void 0,(function*(){this.commandsHistory.push(o.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:o.commandId,from:"quick open"});try{yield this.commandService.executeCommand(o.commandId)}catch(e){(0,b.n2)(e)||this.dialogService.show(L.Z.Error,(0,_.N)("canNotRun","Command '{0}' resulted in an error ({1})",o.label,toErrorMessage(e)))}}))}))}return g}))}};R.PREFIX=">",R.WORD_FILTER=(0,w.or)(w.Ji,w.KZ,w.ir),R=__decorate([__param(1,D.TG),__param(2,E.d),__param(3,x.Hy),__param(4,M.b),__param(5,N.S)],R);let P=class CommandsHistory extends S.JT{constructor(e,o){super(),this.storageService=e,this.configurationService=o,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((()=>this.updateConfiguration())))}updateConfiguration(){this.configuredCommandsHistoryLength=CommandsHistory.getConfiguredCommandHistoryLength(this.configurationService),CommandsHistory.cache&&CommandsHistory.cache.limit!==this.configuredCommandsHistoryLength&&(CommandsHistory.cache.limit=this.configuredCommandsHistoryLength,CommandsHistory.saveState(this.storageService))}load(){const e=this.storageService.get(CommandsHistory.PREF_KEY_CACHE,0);let o;if(e)try{o=JSON.parse(e)}catch(l){}const s=CommandsHistory.cache=new y.z6(this.configuredCommandsHistoryLength,1);if(o){let e;e=o.usesLRU?o.entries:o.entries.sort(((e,o)=>e.value-o.value)),e.forEach((e=>s.set(e.key,e.value)))}CommandsHistory.counter=this.storageService.getNumber(CommandsHistory.PREF_KEY_COUNTER,0,CommandsHistory.counter)}push(e){CommandsHistory.cache&&(CommandsHistory.cache.set(e,CommandsHistory.counter++),CommandsHistory.saveState(this.storageService))}peek(e){var o;return null===(o=CommandsHistory.cache)||void 0===o?void 0:o.peek(e)}static saveState(e){if(!CommandsHistory.cache)return;const o={usesLRU:!0,entries:[]};CommandsHistory.cache.forEach(((e,s)=>o.entries.push({key:s,value:e}))),e.store(CommandsHistory.PREF_KEY_CACHE,JSON.stringify(o),0,0),e.store(CommandsHistory.PREF_KEY_COUNTER,CommandsHistory.counter,0,0)}static getConfiguredCommandHistoryLength(e){var o,s;const l=e.getValue(),d=null===(s=null===(o=l.workbench)||void 0===o?void 0:o.commandPalette)||void 0===s?void 0:s.history;return"number"===typeof d?d:CommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH}};P.DEFAULT_COMMANDS_HISTORY_LENGTH=50,P.PREF_KEY_CACHE="commandPalette.mru.cache",P.PREF_KEY_COUNTER="commandPalette.mru.counter",P.counter=1,P=__decorate([__param(0,A.Uy),__param(1,k.Ui)],P);class AbstractEditorCommandsQuickAccessProvider extends R{constructor(e,o,s,l,d,u){super(e,o,s,l,d,u)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const o=[];for(const s of e.getSupportedActions())o.push({commandId:s.id,commandAlias:s.alias,label:(0,p.x$)(s.label)||s.id});return o}}var O=s(6830),F=s(9102),B=s(1157),standaloneCommandsQuickAccess_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},standaloneCommandsQuickAccess_param=function(e,o){return function(s,l){o(s,l,e)}},standaloneCommandsQuickAccess_awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let W=class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider{constructor(e,o,s,l,d,u){super({showAlias:!1},e,s,l,d,u),this.codeEditorService=o}get activeTextEditorControl(){return(0,f.f6)(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return standaloneCommandsQuickAccess_awaiter(this,void 0,void 0,(function*(){return this.getCodeEditorCommandPicks()}))}};W=standaloneCommandsQuickAccess_decorate([standaloneCommandsQuickAccess_param(0,D.TG),standaloneCommandsQuickAccess_param(1,g.$),standaloneCommandsQuickAccess_param(2,E.d),standaloneCommandsQuickAccess_param(3,x.Hy),standaloneCommandsQuickAccess_param(4,M.b),standaloneCommandsQuickAccess_param(5,N.S)],W),l.B.as(d.IP.Quickaccess).registerQuickAccessProvider({ctor:W,prefix:W.PREFIX,helpEntries:[{description:u.UX.quickCommandHelp,needsEditor:!0}]});class GotoLineAction extends O.R6{constructor(){super({id:"editor.action.quickCommand",label:u.UX.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:F.u.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(B.eJ).quickAccess.show(W.PREFIX)}}(0,O.Qr)(GotoLineAction)},2078:function(e,o,s){"use strict";s.r(o),s.d(o,{GotoLineAction:function(){return GotoLineAction},StandaloneGotoLineQuickAccessProvider:function(){return L}});var l=s(5976),d=s(5520),u=s(3943),g=s(3580);class AbstractGotoLineQuickAccessProvider extends u.X{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const o=(0,g.N)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:o}],e.ariaLabel=o,l.JT.None}provideWithTextEditor(e,o,s){const u=e.editor,g=new l.SL;g.add(o.onDidAccept((s=>{const[l]=o.selectedItems;if(l){if(!this.isValidLineNumber(u,l.lineNumber))return;this.gotoLocation(e,{range:this.toRange(l.lineNumber,l.column),keyMods:o.keyMods,preserveFocus:s.inBackground}),s.inBackground||o.hide()}})));const updatePickerAndEditor=()=>{const e=this.parsePosition(u,o.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length)),s=this.getPickLabel(u,e.lineNumber,e.column);if(o.items=[{lineNumber:e.lineNumber,column:e.column,label:s}],o.ariaLabel=s,!this.isValidLineNumber(u,e.lineNumber))return void this.clearDecorations(u);const l=this.toRange(e.lineNumber,e.column);u.revealRangeInCenter(l,0),this.addDecorations(u,l)};updatePickerAndEditor(),g.add(o.onDidChangeValue((()=>updatePickerAndEditor())));const p=(0,d.Pi)(u);if(p){const e=p.getOptions(),o=e.get(60);2===o.renderType&&(p.updateOptions({lineNumbers:"on"}),g.add((0,l.OF)((()=>p.updateOptions({lineNumbers:"relative"})))))}return g}toRange(e=1,o=1){return{startLineNumber:e,startColumn:o,endLineNumber:e,endColumn:o}}parsePosition(e,o){const s=o.split(/,|:|#/).map((e=>parseInt(e,10))).filter((e=>!isNaN(e))),l=this.lineCount(e)+1;return{lineNumber:s[0]>0?s[0]:l+s[0],column:s[1]}}getPickLabel(e,o,s){if(this.isValidLineNumber(e,o))return this.isValidColumn(e,o,s)?(0,g.N)("gotoLineColumnLabel","Go to line {0} and character {1}.",o,s):(0,g.N)("gotoLineLabel","Go to line {0}.",o);const l=e.getPosition()||{lineNumber:1,column:1},d=this.lineCount(e);return d>1?(0,g.N)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",l.lineNumber,l.column,d):(0,g.N)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",l.lineNumber,l.column)}isValidLineNumber(e,o){return!(!o||"number"!==typeof o)&&(o>0&&o<=this.lineCount(e))}isValidColumn(e,o,s){if(!s||"number"!==typeof s)return!1;const l=this.getModel(e);if(!l)return!1;const d={lineNumber:o,column:s};return l.validatePosition(d).equals(d)}lineCount(e){var o,s;return null!==(s=null===(o=this.getModel(e))||void 0===o?void 0:o.getLineCount())&&void 0!==s?s:0}}AbstractGotoLineQuickAccessProvider.PREFIX=":";var p=s(9872),m=s(725),f=s(1640),_=s(8401),C=s(913),b=s(4669),w=s(6830),S=s(9102),y=s(1157),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let L=class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=b.ju.None}get activeTextEditorControl(){return(0,_.f6)(this.editorService.getFocusedCodeEditor())}};L=__decorate([__param(0,f.$)],L),p.B.as(m.IP.Quickaccess).registerQuickAccessProvider({ctor:L,prefix:L.PREFIX,helpEntries:[{description:C.qq.gotoLineActionLabel,needsEditor:!0}]});class GotoLineAction extends w.R6{constructor(){super({id:"editor.action.gotoLine",label:C.qq.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:S.u.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(y.eJ).quickAccess.show(L.PREFIX)}}(0,w.Qr)(GotoLineAction)},6816:function(e,o,s){"use strict";s.r(o),s.d(o,{GotoLineAction:function(){return GotoLineAction},StandaloneGotoSymbolQuickAccessProvider:function(){return W}});s(8609),s(1713);var l=s(5393),d=s(1050),u=s(3046),g=s(5392),p=s(5336),m=s(1432),f=s(2677);const _=[void 0,[]];function scoreFuzzy2(e,o,s=0,l=0){const d=o;return d.values&&d.values.length>1?doScoreFuzzy2Multiple(e,d.values,s,l):doScoreFuzzy2Single(e,o,s,l)}function doScoreFuzzy2Multiple(e,o,s,l){let d=0;const u=[];for(const g of o){const[o,p]=doScoreFuzzy2Single(e,g,s,l);if("number"!==typeof o)return _;d+=o,u.push(...p)}return[d,normalizeMatches(u)]}function doScoreFuzzy2Single(e,o,s,l){const d=(0,g.EW)(o.original,o.originalLowercase,s,e,e.toLowerCase(),l,!0);return d?[d[0],(0,g.mB)(d)]:_}Object.freeze({score:0});function normalizeMatches(e){const o=e.sort(((e,o)=>e.start-o.start)),s=[];let l;for(const d of o)l&&matchOverlaps(l,d)?(l.start=Math.min(l.start,d.start),l.end=Math.max(l.end,d.end)):(l=d,s.push(d));return s}function matchOverlaps(e,o){return!(e.end<o.start)&&!(o.end<e.start)}function queryExpectsExactMatch(e){return e.startsWith('"')&&e.endsWith('"')}const C=" ";function prepareQuery(e){"string"!==typeof e&&(e="");const o=e.toLowerCase(),{pathNormalized:s,normalized:l,normalizedLowercase:d}=normalizeQuery(e),u=s.indexOf(p.ir)>=0,g=queryExpectsExactMatch(e);let m;const f=e.split(C);if(f.length>1)for(const p of f){const e=queryExpectsExactMatch(p),{pathNormalized:o,normalized:s,normalizedLowercase:l}=normalizeQuery(p);s&&(m||(m=[]),m.push({original:p,originalLowercase:p.toLowerCase(),pathNormalized:o,normalized:s,normalizedLowercase:l,expectContiguousMatch:e}))}return{original:e,originalLowercase:o,pathNormalized:s,normalized:l,normalizedLowercase:d,values:m,containsPathSeparator:u,expectContiguousMatch:g}}function normalizeQuery(e){let o;o=m.ED?e.replace(/\//g,p.ir):e.replace(/\\/g,p.ir);const s=(0,f.R1)(o).replace(/\s|"/g,"");return{pathNormalized:o,normalized:s,normalizedLowercase:s.toLowerCase()}}function pieceToQuery(e){return Array.isArray(e)?prepareQuery(e.map((e=>e.original)).join(C)):prepareQuery(e.original)}var b=s(5976),w=s(4314),S=s(3155),y=s(335),L=s(3943),x=s(3580),k=s(1922),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};let N=class AbstractGotoSymbolQuickAccessProvider extends L.X{constructor(e,o,s=Object.create(null)){super(s),this._languageFeaturesService=e,this._outlineModelService=o,this.options=s,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,(0,x.N)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),b.JT.None}provideWithTextEditor(e,o,s){const l=e.editor,d=this.getModel(l);return d?this._languageFeaturesService.documentSymbolProvider.has(d)?this.doProvideWithEditorSymbols(e,d,o,s):this.doProvideWithoutEditorSymbols(e,d,o,s):b.JT.None}doProvideWithoutEditorSymbols(e,o,s,l){const d=new b.SL;return this.provideLabelPick(s,(0,x.N)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(()=>{__awaiter(this,void 0,void 0,(function*(){const u=yield this.waitForLanguageSymbolRegistry(o,d);u&&!l.isCancellationRequested&&d.add(this.doProvideWithEditorSymbols(e,o,s,l))}))})(),d}provideLabelPick(e,o){e.items=[{label:o,index:0,kind:14}],e.ariaLabel=o}waitForLanguageSymbolRegistry(e,o){return __awaiter(this,void 0,void 0,(function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const s=new l.CR,d=o.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(d.dispose(),s.complete(!0))})));return o.add((0,b.OF)((()=>s.complete(!1)))),s.p}))}doProvideWithEditorSymbols(e,o,s,l){const u=e.editor,g=new b.SL;g.add(s.onDidAccept((o=>{const[l]=s.selectedItems;l&&l.range&&(this.gotoLocation(e,{range:l.range.selection,keyMods:s.keyMods,preserveFocus:o.inBackground}),o.inBackground||s.hide())}))),g.add(s.onDidTriggerItemButton((({item:o})=>{o&&o.range&&(this.gotoLocation(e,{range:o.range.selection,keyMods:s.keyMods,forceSideBySide:!0}),s.hide())})));const p=this.getDocumentSymbols(o,l);let m;const updatePickerItems=()=>__awaiter(this,void 0,void 0,(function*(){null===m||void 0===m||m.dispose(!0),s.busy=!1,m=new d.A(l),s.busy=!0;try{const e=prepareQuery(s.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim()),o=yield this.doGetSymbolPicks(p,e,void 0,m.token);if(l.isCancellationRequested)return;o.length>0?s.items=o:e.original.length>0?this.provideLabelPick(s,(0,x.N)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(s,(0,x.N)("noSymbolResults","No editor symbols"))}finally{l.isCancellationRequested||(s.busy=!1)}}));g.add(s.onDidChangeValue((()=>updatePickerItems()))),updatePickerItems();let f=!0;return g.add(s.onDidChangeActive((()=>{const[e]=s.activeItems;if(e&&e.range){if(f)return void(f=!1);u.revealRangeInCenter(e.range.selection,0),this.addDecorations(u,e.range.decoration)}}))),g}doGetSymbolPicks(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){const d=yield e;if(l.isCancellationRequested)return[];const g=0===o.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX),p=g?1:0;let m,_;o.values&&o.values.length>1?(m=pieceToQuery(o.values[0]),_=pieceToQuery(o.values.slice(1))):m=o;const C=[];for(let L=0;L<d.length;L++){const k=d[L],N=(0,f.fy)(k.name),T=`$(${S.uZ.toIcon(k.kind).id}) ${N}`,I=T.length-N.length;let A,M,R,P,O=k.containerName;if((null===s||void 0===s?void 0:s.extraContainerLabel)&&(O=O?`${s.extraContainerLabel} • ${O}`:s.extraContainerLabel),o.original.length>p){let B=!1;if(m!==o&&([A,M]=scoreFuzzy2(T,Object.assign(Object.assign({},o),{values:void 0}),p,I),"number"===typeof A&&(B=!0)),"number"!==typeof A&&([A,M]=scoreFuzzy2(T,m,p,I),"number"!==typeof A))continue;if(!B&&_){if(O&&_.original.length>0&&([R,P]=scoreFuzzy2(O,_)),"number"!==typeof R)continue;"number"===typeof A&&(A+=R)}}const F=k.tags&&k.tags.indexOf(1)>=0;C.push({index:L,kind:k.kind,score:A,label:T,ariaLabel:N,description:O,highlights:F?void 0:{label:M,description:P},range:{selection:w.e.collapseToStart(k.selectionRange),decoration:k.range},strikethrough:F,buttons:(()=>{var e,o;const s=(null===(e=this.options)||void 0===e?void 0:e.openSideBySideDirection)?null===(o=this.options)||void 0===o?void 0:o.openSideBySideDirection():void 0;if(s)return[{iconClass:"right"===s?u.lA.splitHorizontal.classNames:u.lA.splitVertical.classNames,tooltip:"right"===s?(0,x.N)("openToSide","Open to the Side"):(0,x.N)("openToBottom","Open to the Bottom")}]})()})}const b=C.sort(((e,o)=>g?this.compareByKindAndScore(e,o):this.compareByScore(e,o)));let y=[];if(g){let W,V,H=0;function updateLastSeparatorLabel(){V&&"number"===typeof W&&H>0&&(V.label=(0,f.WU)(E[W]||D,H))}for(const z of b)W!==z.kind?(updateLastSeparatorLabel(),W=z.kind,H=1,V={type:"separator"},y.push(V)):H++,y.push(z);updateLastSeparatorLabel()}else b.length>0&&(y=[{label:(0,x.N)("symbols","symbols ({0})",C.length),type:"separator"},...b]);return y}))}compareByScore(e,o){if("number"!==typeof e.score&&"number"===typeof o.score)return 1;if("number"===typeof e.score&&"number"!==typeof o.score)return-1;if("number"===typeof e.score&&"number"===typeof o.score){if(e.score>o.score)return-1;if(e.score<o.score)return 1}return e.index<o.index?-1:e.index>o.index?1:0}compareByKindAndScore(e,o){const s=E[e.kind]||D,l=E[o.kind]||D,d=s.localeCompare(l);return 0===d?this.compareByScore(e,o):d}getDocumentSymbols(e,o){return __awaiter(this,void 0,void 0,(function*(){const s=yield this._outlineModelService.getOrCreate(e,o);return o.isCancellationRequested?[]:s.asListOfDocumentSymbols()}))}};N.PREFIX="@",N.SCOPE_PREFIX=":",N.PREFIX_BY_CATEGORY=`${N.PREFIX}${N.SCOPE_PREFIX}`,N=__decorate([__param(0,k.p),__param(1,y.Je)],N);const D=(0,x.N)("property","properties ({0})"),E={[5]:(0,x.N)("method","methods ({0})"),[11]:(0,x.N)("function","functions ({0})"),[8]:(0,x.N)("_constructor","constructors ({0})"),[12]:(0,x.N)("variable","variables ({0})"),[4]:(0,x.N)("class","classes ({0})"),[22]:(0,x.N)("struct","structs ({0})"),[23]:(0,x.N)("event","events ({0})"),[24]:(0,x.N)("operator","operators ({0})"),[10]:(0,x.N)("interface","interfaces ({0})"),[2]:(0,x.N)("namespace","namespaces ({0})"),[3]:(0,x.N)("package","packages ({0})"),[25]:(0,x.N)("typeParameter","type parameters ({0})"),[1]:(0,x.N)("modules","modules ({0})"),[6]:(0,x.N)("property","properties ({0})"),[9]:(0,x.N)("enum","enumerations ({0})"),[21]:(0,x.N)("enumMember","enumeration members ({0})"),[14]:(0,x.N)("string","strings ({0})"),[0]:(0,x.N)("file","files ({0})"),[17]:(0,x.N)("array","arrays ({0})"),[15]:(0,x.N)("number","numbers ({0})"),[16]:(0,x.N)("boolean","booleans ({0})"),[18]:(0,x.N)("object","objects ({0})"),[19]:(0,x.N)("key","keys ({0})"),[7]:(0,x.N)("field","fields ({0})"),[13]:(0,x.N)("constant","constants ({0})")};var T=s(9872),I=s(725),A=s(1640),M=s(8401),R=s(913),P=s(4669),O=s(6830),F=s(9102),B=s(1157),standaloneGotoSymbolQuickAccess_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},standaloneGotoSymbolQuickAccess_param=function(e,o){return function(s,l){o(s,l,e)}};let W=class StandaloneGotoSymbolQuickAccessProvider extends N{constructor(e,o,s){super(o,s),this.editorService=e,this.onDidActiveTextEditorControlChange=P.ju.None}get activeTextEditorControl(){return(0,M.f6)(this.editorService.getFocusedCodeEditor())}};W=standaloneGotoSymbolQuickAccess_decorate([standaloneGotoSymbolQuickAccess_param(0,A.$),standaloneGotoSymbolQuickAccess_param(1,k.p),standaloneGotoSymbolQuickAccess_param(2,y.Je)],W),T.B.as(I.IP.Quickaccess).registerQuickAccessProvider({ctor:W,prefix:N.PREFIX,helpEntries:[{description:R.aq.quickOutlineActionLabel,prefix:N.PREFIX,needsEditor:!0},{description:R.aq.quickOutlineByCategoryActionLabel,prefix:N.PREFIX_BY_CATEGORY,needsEditor:!0}]});class GotoLineAction extends O.R6{constructor(){super({id:"editor.action.quickOutline",label:R.aq.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:F.u.hasDocumentSymbolProvider,kbOpts:{kbExpr:F.u.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(B.eJ).quickAccess.show(N.PREFIX)}}(0,O.Qr)(GotoLineAction)},669:function(e,o,s){"use strict";s.r(o);var l=s(9872),d=s(725),u=s(913),g=s(5976),p=s(3580),m=s(1157),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let f=class HelpQuickAccessProvider{constructor(e){this.quickInputService=e,this.registry=l.B.as(d.IP.Quickaccess)}provide(e){const o=new g.SL;o.add(e.onDidAccept((()=>{const[o]=e.selectedItems;o&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})}))),o.add(e.onDidChangeValue((e=>{const o=this.registry.getQuickAccessProvider(e.substr(HelpQuickAccessProvider.PREFIX.length));o&&o.prefix&&o.prefix!==HelpQuickAccessProvider.PREFIX&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})})));const{editorProviders:s,globalProviders:l}=this.getQuickAccessProviders();return e.items=0===s.length||0===l.length?[...0===s.length?l:s]:[{label:(0,p.N)("globalCommands","global commands"),type:"separator"},...l,{label:(0,p.N)("editorCommands","editor commands"),type:"separator"},...s],o}getQuickAccessProviders(){const e=[],o=[];for(const s of this.registry.getQuickAccessProviders().sort(((e,o)=>e.prefix.localeCompare(o.prefix))))if(s.prefix!==HelpQuickAccessProvider.PREFIX)for(const l of s.helpEntries){const d=l.prefix||s.prefix,u=d||"…";(l.needsEditor?o:e).push({prefix:d,label:u,ariaLabel:(0,p.N)("helpPickAriaLabel","{0}, {1}",u,l.description),description:l.description})}return{editorProviders:o,globalProviders:e}}};f.PREFIX="?",f=__decorate([__param(0,m.eJ)],f),l.B.as(d.IP.Quickaccess).registerQuickAccessProvider({ctor:f,prefix:"",helpEntries:[{description:u.ld.helpQuickAccessActionLabel,needsEditor:!0}]})},5048:function(e,o,s){"use strict";s.r(o),s.d(o,{StandaloneReferencesController:function(){return C}});var l=s(6830),d=s(1640),u=s(9010),g=s(3108),p=s(8819),m=s(2065),f=s(9422),_=s(7060),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};let C=class StandaloneReferencesController extends u.J{constructor(e,o,s,l,d,u,g){super(!0,e,o,s,l,d,u,g)}};C=__decorate([__param(1,p.i6),__param(2,d.$),__param(3,f.lT),__param(4,m.TG),__param(5,_.Uy),__param(6,g.Ui)],C),(0,l._K)(u.J.ID,C)},5662:function(e,o,s){"use strict";s.r(o);var l=s(6830),d=s(4156),u=s(913);class ToggleHighContrast extends l.R6{constructor(){super({id:"editor.action.toggleHighContrast",label:u.xi.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,o){const s=e.get(d.Z);this._originalThemeName?(s.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=s.getColorTheme().themeName,s.setTheme("hc-black"))}}(0,l.Qr)(ToggleHighContrast)},4156:function(e,o,s){"use strict";s.d(o,{Z:function(){return d}});var l=s(2065);const d=(0,l.yh)("themeService")},9585:function(e,o,s){"use strict";s.d(o,{TG:function(){return x}});var l=s(2100),d=Object.defineProperty,u=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,__reExport=(e,o,s,l)=>{if(o&&"object"===typeof o||"function"===typeof o)for(let m of g(o))p.call(e,m)||!s&&"default"===m||d(e,m,{get:()=>o[m],enumerable:!(l=u(o,m))||l.enumerable});return e},m="4.5.5",f={};
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/__reExport(f,l);var _=(e=>(e[e["None"]=0]="None",e[e["CommonJS"]=1]="CommonJS",e[e["AMD"]=2]="AMD",e[e["UMD"]=3]="UMD",e[e["System"]=4]="System",e[e["ES2015"]=5]="ES2015",e[e["ESNext"]=99]="ESNext",e))(_||{}),C=(e=>(e[e["None"]=0]="None",e[e["Preserve"]=1]="Preserve",e[e["React"]=2]="React",e[e["ReactNative"]=3]="ReactNative",e[e["ReactJSX"]=4]="ReactJSX",e[e["ReactJSXDev"]=5]="ReactJSXDev",e))(C||{}),b=(e=>(e[e["CarriageReturnLineFeed"]=0]="CarriageReturnLineFeed",e[e["LineFeed"]=1]="LineFeed",e))(b||{}),w=(e=>(e[e["ES3"]=0]="ES3",e[e["ES5"]=1]="ES5",e[e["ES2015"]=2]="ES2015",e[e["ES2016"]=3]="ES2016",e[e["ES2017"]=4]="ES2017",e[e["ES2018"]=5]="ES2018",e[e["ES2019"]=6]="ES2019",e[e["ES2020"]=7]="ES2020",e[e["ESNext"]=99]="ESNext",e[e["JSON"]=100]="JSON",e[e["Latest"]=99]="Latest",e))(w||{}),S=(e=>(e[e["Classic"]=1]="Classic",e[e["NodeJs"]=2]="NodeJs",e))(S||{}),y=class{_onDidChange=new f.Emitter;_onDidExtraLibsChange=new f.Emitter;_extraLibs;_removedExtraLibs;_eagerModelSync;_compilerOptions;_diagnosticsOptions;_workerOptions;_onDidExtraLibsChangeTimeout;_inlayHintsOptions;constructor(e,o,s,l){this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(o),this.setWorkerOptions(s),this.setInlayHintsOptions(l),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,o){let s;if(s="undefined"===typeof o?`ts:extralib-${Math.random().toString(36).substring(2,15)}`:o,this._extraLibs[s]&&this._extraLibs[s].content===e)return{dispose:()=>{}};let l=1;return this._removedExtraLibs[s]&&(l=this._removedExtraLibs[s]+1),this._extraLibs[s]&&(l=this._extraLibs[s].version+1),this._extraLibs[s]={content:e,version:l},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let e=this._extraLibs[s];e&&e.version===l&&(delete this._extraLibs[s],this._removedExtraLibs[s]=l,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(const o in this._extraLibs)this._removedExtraLibs[o]=this._extraLibs[o].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(const o of e){const e=o.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,s=o.content;let l=1;this._removedExtraLibs[e]&&(l=this._removedExtraLibs[e]+1),this._extraLibs[e]={content:s,version:l}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){-1===this._onDidExtraLibsChangeTimeout&&(this._onDidExtraLibsChangeTimeout=window.setTimeout((()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)}),0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}},L=m,x=new y({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),k=new y({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),getTypeScriptWorker=()=>getMode().then((e=>e.getTypeScriptWorker())),getJavaScriptWorker=()=>getMode().then((e=>e.getJavaScriptWorker()));function getMode(){return s.e(8401).then(s.bind(s,1653))}f.languages.typescript={ModuleKind:_,JsxEmit:C,NewLineKind:b,ScriptTarget:w,ModuleResolutionKind:S,typescriptVersion:L,typescriptDefaults:x,javascriptDefaults:k,getTypeScriptWorker:getTypeScriptWorker,getJavaScriptWorker:getJavaScriptWorker},f.languages.onLanguage("typescript",(()=>getMode().then((e=>e.setupTypeScript(x))))),f.languages.onLanguage("javascript",(()=>getMode().then((e=>e.setupJavaScript(k)))))},3580:function(e,o,s){"use strict";function _format(e,o){let s;return s=0===o.length?e:e.replace(/\{(\d+)\}/g,(function(e,s){const l=s[0];return"undefined"!==typeof o[l]?o[l]:e})),s}function localize(e,o,...s){return _format(o,s)}s.d(o,{N:function(){return localize}})},1106:function(e,o,s){"use strict";s.d(o,{F:function(){return u},U:function(){return g}});var l=s(8819),d=s(2065);const u=(0,d.yh)("accessibilityService"),g=new l.uy("accessibilityModeEnabled",!1)},4167:function(e,o,s){"use strict";s.d(o,{Mm:function(){return E},Id:function(){return createActionViewItem},vr:function(){return createAndFillInActionBarActions}});var l=s(5321),d=s(9069),u=s(6033),g=s(553),p=s(4741),m=s(4669);class BaseDropdown extends p.Wi{constructor(e,o){super(),this._onDidChangeVisibility=this._register(new m.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=(0,l.R3)(e,(0,l.$)(".monaco-dropdown")),this._label=(0,l.R3)(this._element,(0,l.$)(".dropdown-label"));let s=o.labelRenderer;s||(s=e=>(e.textContent=o.label||"",null));for(const d of[l.tw.CLICK,l.tw.MOUSE_DOWN,g.t.Tap])this._register((0,l.nm)(this.element,d,(e=>l.zB.stop(e,!0))));for(const d of[l.tw.MOUSE_DOWN,g.t.Tap])this._register((0,l.nm)(this._label,d,(e=>{e instanceof MouseEvent&&e.detail>1||(this.visible?this.hide():this.show())})));this._register((0,l.nm)(this._label,l.tw.KEY_UP,(e=>{const o=new d.y(e);(o.equals(3)||o.equals(10))&&(l.zB.stop(e,!0),this.visible?this.hide():this.show())})));const u=s(this._label);u&&this._register(u),this._register(g.o.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class DropdownMenu extends BaseDropdown{constructor(e,o){super(e,o),this._actions=[],this._contextMenuProvider=o.contextMenuProvider,this.actions=o.actions||[],this.actionProvider=o.actionProvider,this.menuClassName=o.menuClassName||"",this.menuAsChild=!!o.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class DropdownMenuActionViewItem extends u.Y{constructor(e,o,s,l=Object.create(null)){super(null,e,l),this.actionItem=null,this._onDidChangeVisibility=this._register(new m.Q5),this.menuActionsOrProvider=o,this.contextMenuProvider=s,this.options=l,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const labelRenderer=e=>{this.element=(0,l.R3)(e,(0,l.$)("a.action-label"));let o=[];return"string"===typeof this.options.classNames?o=this.options.classNames.split(/\s+/g).filter((e=>!!e)):this.options.classNames&&(o=this.options.classNames),o.find((e=>"icon"===e))||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},o=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:labelRenderer,menuAsChild:this.options.menuAsChild,actions:o?this.menuActionsOrProvider:void 0,actionProvider:o?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new DropdownMenu(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility((e=>{var o;null===(o=this.element)||void 0===o||o.setAttribute("aria-expanded",`${e}`),this._onDidChangeVisibility.fire(e)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const e=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return e.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,o;const s=!this.getAction().enabled;null===(e=this.actionItem)||void 0===e||e.classList.toggle("disabled",s),null===(o=this.element)||void 0===o||o.classList.toggle("disabled",s)}}var f=s(8030),_=s(5976),C=s(1432),b=s(3580),w=s(4144),S=s(8819),y=s(5606),L=s(2065),x=s(1847),k=s(9422),N=s(7060),D=s(7781),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}},__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function createAndFillInActionBarActions(e,o,s,l,d,u,g){const p=e.getActions(o),m="string"===typeof l?e=>e===l:l;return fillInActions(p,s,!1,m,d,u,g),asDisposable(p)}function asDisposable(e){const o=new _.SL;for(const[,s]of e)for(const e of s)o.add(e);return o}function fillInActions(e,o,s,l=(e=>"navigation"===e),d=Number.MAX_SAFE_INTEGER,u=(()=>!1),g=!1){let m,f;Array.isArray(o)?(m=o,f=o):(m=o.primary,f=o.secondary);const _=new Set;for(const[C,b]of e){let e;l(C)?(e=m,e.length>0&&g&&e.push(new p.Z0)):(e=f,e.length>0&&e.push(new p.Z0));for(let o of b){s&&(o=o instanceof w.U8&&o.alt?o.alt:o);const l=e.push(o);o instanceof p.wY&&_.add({group:C,action:o,index:l-1})}}for(const{group:p,action:C,index:b}of _){const e=l(p)?m:f,o=C.actions;(o.length<=1||e.length+o.length-2<=d)&&u(C,p,e.length)&&e.splice(b,1,...o)}if(m!==f&&m.length>d){const e=m.splice(d,m.length-d);f.unshift(...e,new p.Z0)}}let E=class MenuEntryActionViewItem extends u.g{constructor(e,o,s,d,u){super(void 0,e,{icon:!(!e.class&&!e.item.icon),label:!e.class&&!e.item.icon,draggable:null===o||void 0===o?void 0:o.draggable}),this._keybindingService=s,this._notificationService=d,this._contextKeyService=u,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new _.XK),this._altKey=l._q.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return __awaiter(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(o){this._notificationService.error(o)}}))}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let o=!1,s=this._altKey.keyStatus.altKey||(C.ED||C.IJ)&&this._altKey.keyStatus.shiftKey;const updateAltState=()=>{const e=o&&s;e!==this._wantsAltCommand&&(this._wantsAltCommand=e,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event((e=>{s=e.altKey||(C.ED||C.IJ)&&e.shiftKey,updateAltState()}))),this._register((0,l.nm)(e,"mouseleave",(e=>{o=!1,updateAltState()}))),this._register((0,l.nm)(e,"mouseenter",(e=>{o=!0,updateAltState()})))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),o=e&&e.getLabel(),s=this._commandAction.tooltip||this._commandAction.label;let l=o?(0,b.N)("titleAndKb","{0} ({1})",s,o):s;if(!this._wantsAltCommand&&this._menuItemAction.alt){const e=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),s=o&&o.getLabel(),d=s?(0,b.N)("titleAndKb","{0} ({1})",e,s):e;l+=`\n[${f.xo.modifierLabels[C.OS].altKey}] ${d}`}this.label.title=l}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var o;this._itemClassDispose.value=void 0;const{element:s,label:d}=this;if(!s||!d)return;const u=this._commandAction.checked&&(null===(o=e.toggled)||void 0===o?void 0:o.icon)?e.toggled.icon:e.icon;if(u)if(D.kS.isThemeIcon(u)){const e=D.kS.asClassNameArray(u);d.classList.add(...e),this._itemClassDispose.value=(0,_.OF)((()=>{d.classList.remove(...e)}))}else u.light&&d.style.setProperty("--menu-entry-icon-light",(0,l.wY)(u.light)),u.dark&&d.style.setProperty("--menu-entry-icon-dark",(0,l.wY)(u.dark)),d.classList.add("icon"),this._itemClassDispose.value=(0,_.OF)((()=>{d.classList.remove("icon"),d.style.removeProperty("--menu-entry-icon-light"),d.style.removeProperty("--menu-entry-icon-dark")}))}};E=__decorate([__param(2,x.d),__param(3,k.lT),__param(4,S.i6)],E);let T=class SubmenuEntryActionViewItem extends DropdownMenuActionViewItem{constructor(e,o,s){var l,d;const u=Object.assign({},null!==o&&void 0!==o?o:Object.create(null),{menuAsChild:null!==(l=null===o||void 0===o?void 0:o.menuAsChild)&&void 0!==l&&l,classNames:null!==(d=null===o||void 0===o?void 0:o.classNames)&&void 0!==d?d:D.kS.isThemeIcon(e.item.icon)?D.kS.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},s,u)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:o}=this._action.item;o&&!D.kS.isThemeIcon(o)&&(this.element.classList.add("icon"),o.light&&this.element.style.setProperty("--menu-entry-icon-light",(0,l.wY)(o.light)),o.dark&&this.element.style.setProperty("--menu-entry-icon-dark",(0,l.wY)(o.dark)))}}};T=__decorate([__param(2,y.i)],T);let I=class DropdownWithDefaultActionViewItem extends u.Y{constructor(e,o,s,l,d,u,g,m){var f,_,C;let b;super(null,e),this._keybindingService=s,this._notificationService=l,this._contextMenuService=d,this._menuService=u,this._instaService=g,this._storageService=m,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let S=m.get(this._storageKey,1);S&&(b=e.actions.find((e=>S===e.id))),b||(b=e.actions[0]),this._defaultAction=this._instaService.createInstance(E,b,void 0);const y=Object.assign({},null!==o&&void 0!==o?o:Object.create(null),{menuAsChild:null===(f=null===o||void 0===o?void 0:o.menuAsChild)||void 0===f||f,classNames:null!==(_=null===o||void 0===o?void 0:o.classNames)&&void 0!==_?_:["codicon","codicon-chevron-down"],actionRunner:null!==(C=null===o||void 0===o?void 0:o.actionRunner)&&void 0!==C?C:new p.Wi});this._dropdown=new DropdownMenuActionViewItem(e,e.actions,this._contextMenuService,y),this._dropdown.actionRunner.onDidRun((e=>{e.action instanceof w.U8&&this.update(e.action)}))}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(E,e,void 0),this._defaultAction.actionRunner=new class extends p.Wi{runAction(e,o){return __awaiter(this,void 0,void 0,(function*(){yield e.run(void 0)}))}},this._container&&this._defaultAction.render((0,l.Ce)(this._container,(0,l.$)(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const o=(0,l.$)(".action-container");this._defaultAction.render((0,l.R3)(this._container,o)),this._register((0,l.nm)(o,l.tw.KEY_DOWN,(e=>{const o=new d.y(e);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())})));const s=(0,l.$)(".dropdown-action-container");this._dropdown.render((0,l.R3)(this._container,s)),this._register((0,l.nm)(s,l.tw.KEY_DOWN,(e=>{var o;const s=new d.y(e);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),null===(o=this._defaultAction.element)||void 0===o||o.focus(),s.stopPropagation())})))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};function createActionViewItem(e,o,s){return o instanceof w.U8?e.createInstance(E,o,void 0):o instanceof w.NZ?o.item.rememberDefaultAction?e.createInstance(I,o,s):e.createInstance(T,o,s):void 0}I=__decorate([__param(2,x.d),__param(3,k.lT),__param(4,y.i),__param(5,w.co),__param(6,L.TG),__param(7,N.Uy)],I)},4144:function(e,o,s){"use strict";s.d(o,{BH:function(){return S},NZ:function(){return SubmenuItemAction},U8:function(){return y},co:function(){return w},eH:function(){return MenuId},vr:function(){return isIMenuItem}});var l=s(4741),d=s(3046),u=s(4669),g=s(3725),p=s(5976),m=s(1741),f=s(4565),_=s(8819),C=s(2065),b=s(7781),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};function isIMenuItem(e){return void 0!==e.command}class MenuId{constructor(e){this.id=MenuId._idPool++,this._debugName=e}}MenuId._idPool=0,MenuId.CommandPalette=new MenuId("CommandPalette"),MenuId.DebugBreakpointsContext=new MenuId("DebugBreakpointsContext"),MenuId.DebugCallStackContext=new MenuId("DebugCallStackContext"),MenuId.DebugConsoleContext=new MenuId("DebugConsoleContext"),MenuId.DebugVariablesContext=new MenuId("DebugVariablesContext"),MenuId.DebugWatchContext=new MenuId("DebugWatchContext"),MenuId.DebugToolBar=new MenuId("DebugToolBar"),MenuId.EditorContext=new MenuId("EditorContext"),MenuId.SimpleEditorContext=new MenuId("SimpleEditorContext"),MenuId.EditorContextCopy=new MenuId("EditorContextCopy"),MenuId.EditorContextPeek=new MenuId("EditorContextPeek"),MenuId.EditorTitle=new MenuId("EditorTitle"),MenuId.EditorTitleRun=new MenuId("EditorTitleRun"),MenuId.EditorTitleContext=new MenuId("EditorTitleContext"),MenuId.EmptyEditorGroup=new MenuId("EmptyEditorGroup"),MenuId.EmptyEditorGroupContext=new MenuId("EmptyEditorGroupContext"),MenuId.ExplorerContext=new MenuId("ExplorerContext"),MenuId.ExtensionContext=new MenuId("ExtensionContext"),MenuId.GlobalActivity=new MenuId("GlobalActivity"),MenuId.LayoutControlMenuSubmenu=new MenuId("LayoutControlMenuSubmenu"),MenuId.LayoutControlMenu=new MenuId("LayoutControlMenu"),MenuId.MenubarMainMenu=new MenuId("MenubarMainMenu"),MenuId.MenubarAppearanceMenu=new MenuId("MenubarAppearanceMenu"),MenuId.MenubarDebugMenu=new MenuId("MenubarDebugMenu"),MenuId.MenubarEditMenu=new MenuId("MenubarEditMenu"),MenuId.MenubarCopy=new MenuId("MenubarCopy"),MenuId.MenubarFileMenu=new MenuId("MenubarFileMenu"),MenuId.MenubarGoMenu=new MenuId("MenubarGoMenu"),MenuId.MenubarHelpMenu=new MenuId("MenubarHelpMenu"),MenuId.MenubarLayoutMenu=new MenuId("MenubarLayoutMenu"),MenuId.MenubarNewBreakpointMenu=new MenuId("MenubarNewBreakpointMenu"),MenuId.MenubarPanelAlignmentMenu=new MenuId("MenubarPanelAlignmentMenu"),MenuId.MenubarPanelPositionMenu=new MenuId("MenubarPanelPositionMenu"),MenuId.MenubarPreferencesMenu=new MenuId("MenubarPreferencesMenu"),MenuId.MenubarRecentMenu=new MenuId("MenubarRecentMenu"),MenuId.MenubarSelectionMenu=new MenuId("MenubarSelectionMenu"),MenuId.MenubarSwitchEditorMenu=new MenuId("MenubarSwitchEditorMenu"),MenuId.MenubarSwitchGroupMenu=new MenuId("MenubarSwitchGroupMenu"),MenuId.MenubarTerminalMenu=new MenuId("MenubarTerminalMenu"),MenuId.MenubarViewMenu=new MenuId("MenubarViewMenu"),MenuId.MenubarHomeMenu=new MenuId("MenubarHomeMenu"),MenuId.OpenEditorsContext=new MenuId("OpenEditorsContext"),MenuId.ProblemsPanelContext=new MenuId("ProblemsPanelContext"),MenuId.SCMChangeContext=new MenuId("SCMChangeContext"),MenuId.SCMResourceContext=new MenuId("SCMResourceContext"),MenuId.SCMResourceFolderContext=new MenuId("SCMResourceFolderContext"),MenuId.SCMResourceGroupContext=new MenuId("SCMResourceGroupContext"),MenuId.SCMSourceControl=new MenuId("SCMSourceControl"),MenuId.SCMTitle=new MenuId("SCMTitle"),MenuId.SearchContext=new MenuId("SearchContext"),MenuId.StatusBarWindowIndicatorMenu=new MenuId("StatusBarWindowIndicatorMenu"),MenuId.StatusBarRemoteIndicatorMenu=new MenuId("StatusBarRemoteIndicatorMenu"),MenuId.TestItem=new MenuId("TestItem"),MenuId.TestItemGutter=new MenuId("TestItemGutter"),MenuId.TestPeekElement=new MenuId("TestPeekElement"),MenuId.TestPeekTitle=new MenuId("TestPeekTitle"),MenuId.TouchBarContext=new MenuId("TouchBarContext"),MenuId.TitleBarContext=new MenuId("TitleBarContext"),MenuId.TunnelContext=new MenuId("TunnelContext"),MenuId.TunnelPrivacy=new MenuId("TunnelPrivacy"),MenuId.TunnelProtocol=new MenuId("TunnelProtocol"),MenuId.TunnelPortInline=new MenuId("TunnelInline"),MenuId.TunnelTitle=new MenuId("TunnelTitle"),MenuId.TunnelLocalAddressInline=new MenuId("TunnelLocalAddressInline"),MenuId.TunnelOriginInline=new MenuId("TunnelOriginInline"),MenuId.ViewItemContext=new MenuId("ViewItemContext"),MenuId.ViewContainerTitle=new MenuId("ViewContainerTitle"),MenuId.ViewContainerTitleContext=new MenuId("ViewContainerTitleContext"),MenuId.ViewTitle=new MenuId("ViewTitle"),MenuId.ViewTitleContext=new MenuId("ViewTitleContext"),MenuId.CommentThreadTitle=new MenuId("CommentThreadTitle"),MenuId.CommentThreadActions=new MenuId("CommentThreadActions"),MenuId.CommentTitle=new MenuId("CommentTitle"),MenuId.CommentActions=new MenuId("CommentActions"),MenuId.InteractiveToolbar=new MenuId("InteractiveToolbar"),MenuId.InteractiveCellTitle=new MenuId("InteractiveCellTitle"),MenuId.InteractiveCellExecute=new MenuId("InteractiveCellExecute"),MenuId.InteractiveInputExecute=new MenuId("InteractiveInputExecute"),MenuId.NotebookToolbar=new MenuId("NotebookToolbar"),MenuId.NotebookCellTitle=new MenuId("NotebookCellTitle"),MenuId.NotebookCellInsert=new MenuId("NotebookCellInsert"),MenuId.NotebookCellBetween=new MenuId("NotebookCellBetween"),MenuId.NotebookCellListTop=new MenuId("NotebookCellTop"),MenuId.NotebookCellExecute=new MenuId("NotebookCellExecute"),MenuId.NotebookCellExecutePrimary=new MenuId("NotebookCellExecutePrimary"),MenuId.NotebookDiffCellInputTitle=new MenuId("NotebookDiffCellInputTitle"),MenuId.NotebookDiffCellMetadataTitle=new MenuId("NotebookDiffCellMetadataTitle"),MenuId.NotebookDiffCellOutputsTitle=new MenuId("NotebookDiffCellOutputsTitle"),MenuId.NotebookOutputToolbar=new MenuId("NotebookOutputToolbar"),MenuId.NotebookEditorLayoutConfigure=new MenuId("NotebookEditorLayoutConfigure"),MenuId.BulkEditTitle=new MenuId("BulkEditTitle"),MenuId.BulkEditContext=new MenuId("BulkEditContext"),MenuId.TimelineItemContext=new MenuId("TimelineItemContext"),MenuId.TimelineTitle=new MenuId("TimelineTitle"),MenuId.TimelineTitleContext=new MenuId("TimelineTitleContext"),MenuId.AccountsContext=new MenuId("AccountsContext"),MenuId.PanelTitle=new MenuId("PanelTitle"),MenuId.AuxiliaryBarTitle=new MenuId("AuxiliaryBarTitle"),MenuId.TerminalInstanceContext=new MenuId("TerminalInstanceContext"),MenuId.TerminalEditorInstanceContext=new MenuId("TerminalEditorInstanceContext"),MenuId.TerminalNewDropdownContext=new MenuId("TerminalNewDropdownContext"),MenuId.TerminalTabContext=new MenuId("TerminalTabContext"),MenuId.TerminalTabEmptyAreaContext=new MenuId("TerminalTabEmptyAreaContext"),MenuId.TerminalInlineTabContext=new MenuId("TerminalInlineTabContext"),MenuId.WebviewContext=new MenuId("WebviewContext"),MenuId.InlineCompletionsActions=new MenuId("InlineCompletionsActions"),MenuId.NewFile=new MenuId("NewFile");const w=(0,C.yh)("menuService"),S=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new u.Q5,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:e=>e===MenuId.CommandPalette}}addCommand(e){return this.addCommands(g.$.single(e))}addCommands(e){for(const o of e)this._commands.set(o.id,o);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),(0,p.OF)((()=>{let o=!1;for(const s of e)o=this._commands.delete(s.id)||o;o&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)}))}getCommand(e){return this._commands.get(e)}getCommands(){const e=new Map;return this._commands.forEach(((o,s)=>e.set(s,o))),e}appendMenuItem(e,o){return this.appendMenuItems(g.$.single({id:e,item:o}))}appendMenuItems(e){const o=new Set,s=new m.S;for(const{id:l,item:d}of e){let e=this._menuItems.get(l);e||(e=new m.S,this._menuItems.set(l,e)),s.push(e.push(d)),o.add(l)}return this._onDidChangeMenu.fire(o),(0,p.OF)((()=>{if(s.size>0){for(let e of s)e();this._onDidChangeMenu.fire(o),s.clear()}}))}getMenuItems(e){let o;return o=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===MenuId.CommandPalette&&this._appendImplicitItems(o),o}_appendImplicitItems(e){const o=new Set;for(const s of e)isIMenuItem(s)&&(o.add(s.command.id),s.alt&&o.add(s.alt.id));this._commands.forEach(((s,l)=>{o.has(l)||e.push({command:s})}))}};class SubmenuItemAction extends l.wY{constructor(e,o,s,l){super(`submenuitem.${e.submenu.id}`,"string"===typeof e.title?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=o,this._contextKeyService=s,this._options=l}get actions(){const e=[],o=this._menuService.createMenu(this.item.submenu,this._contextKeyService),s=o.getActions(this._options);o.dispose();for(const[,d]of s)d.length>0&&(e.push(...d),e.push(new l.Z0));return e.length&&e.pop(),e}}let y=class MenuItemAction{constructor(e,o,s,l,u){var g,p;if(this._commandService=u,this.id=e.id,this.label=(null===s||void 0===s?void 0:s.renderShortTitle)&&e.shortTitle?"string"===typeof e.shortTitle?e.shortTitle:e.shortTitle.value:"string"===typeof e.title?e.title:e.title.value,this.tooltip=null!==(p="string"===typeof e.tooltip?e.tooltip:null===(g=e.tooltip)||void 0===g?void 0:g.value)&&void 0!==p?p:"",this.enabled=!e.precondition||l.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const o=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=l.contextMatchesRules(o.condition),this.checked&&o.tooltip&&(this.tooltip="string"===typeof o.tooltip?o.tooltip:o.tooltip.value),o.title&&(this.label="string"===typeof o.title?o.title:o.title.value)}this.item=e,this.alt=o?new MenuItemAction(o,void 0,s,l,u):void 0,this._options=s,b.kS.isThemeIcon(e.icon)&&(this.class=d.dT.asClassName(e.icon))}dispose(){}run(...e){var o,s;let l=[];return(null===(o=this._options)||void 0===o?void 0:o.arg)&&(l=[...l,this._options.arg]),(null===(s=this._options)||void 0===s?void 0:s.shouldForwardArgs)&&(l=[...l,...e]),this._commandService.executeCommand(this.id,...l)}};y=__decorate([__param(3,_.i6),__param(4,f.Hy)],y)},4972:function(e,o,s){"use strict";s.d(o,{p:function(){return d}});var l=s(2065);const d=(0,l.yh)("clipboardService")},4565:function(e,o,s){"use strict";s.d(o,{Hy:function(){return f},P0:function(){return _}});var l=s(4669),d=s(3725),u=s(5976),g=s(1741),p=s(8401),m=s(2065);const f=(0,m.yh)("commandService"),_=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new l.Q5,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,o){if(!e)throw new Error("invalid command");if("string"===typeof e){if(!o)throw new Error("invalid command");return this.registerCommand({id:e,handler:o})}if(e.description){const o=[];for(let l of e.description.args)o.push(l.constraint);const s=e.handler;e.handler=function(e,...l){return(0,p.D8)(l,o),s(e,...l)}}const{id:s}=e;let l=this._commands.get(s);l||(l=new g.S,this._commands.set(s,l));let d=l.unshift(e),m=(0,u.OF)((()=>{d();const e=this._commands.get(s);(null===e||void 0===e?void 0:e.isEmpty())&&this._commands.delete(s)}));return this._onDidRegisterCommand.fire(s),m}registerCommandAlias(e,o){return _.registerCommand(e,((e,...s)=>e.get(f).executeCommand(o,...s)))}getCommand(e){const o=this._commands.get(e);if(o&&!o.isEmpty())return d.$.first(o)}getCommands(){const e=new Map;for(const o of this._commands.keys()){const s=this.getCommand(o);s&&e.set(o,s)}return e}};_.registerCommand("noop",(()=>{}))},3108:function(e,o,s){"use strict";s.d(o,{KV:function(){return addToValueTree},Mt:function(){return getConfigurationValue},Od:function(){return toValuesTree},Ui:function(){return d},xL:function(){return removeFromValueTree}});var l=s(2065);const d=(0,l.yh)("configurationService");function toValuesTree(e,o){const s=Object.create(null);for(let l in e)addToValueTree(s,l,e[l],o);return s}function addToValueTree(e,o,s,l){const d=o.split("."),u=d.pop();let g=e;for(let m=0;m<d.length;m++){let e=d[m],s=g[e];switch(typeof s){case"undefined":s=g[e]=Object.create(null);break;case"object":break;default:return void l(`Ignoring ${o} as ${d.slice(0,m+1).join(".")} is ${JSON.stringify(s)}`)}g=s}if("object"===typeof g&&null!==g)try{g[u]=s}catch(p){l(`Ignoring ${o} as ${d.join(".")} is ${JSON.stringify(g)}`)}else l(`Ignoring ${o} as ${d.join(".")} is ${JSON.stringify(g)}`)}function removeFromValueTree(e,o){const s=o.split(".");doRemoveFromValueTree(e,s)}function doRemoveFromValueTree(e,o){const s=o.shift();if(0!==o.length){if(-1!==Object.keys(e).indexOf(s)){const l=e[s];"object"!==typeof l||Array.isArray(l)||(doRemoveFromValueTree(l,o),0===Object.keys(l).length&&delete e[s])}}else delete e[s]}function getConfigurationValue(e,o,s){function accessSetting(e,o){let s=e;for(const l of o){if("object"!==typeof s||null===s)return;s=s[l]}return s}const l=o.split("."),d=accessSetting(e,l);return"undefined"===typeof d?s:d}},3193:function(e,o,s){"use strict";s.d(o,{IP:function(){return f},eU:function(){return E},ny:function(){return overrideIdentifiersFromKey}});var l=s(9488),d=s(4669),u=s(8401),g=s(3580),p=s(1294),m=s(9872);const f={Configuration:"base.contributions.configuration"},_={properties:{},patternProperties:{}},C={properties:{},patternProperties:{}},b={properties:{},patternProperties:{}},w={properties:{},patternProperties:{}},S={properties:{},patternProperties:{}},y={properties:{},patternProperties:{}},L="vscode://schemas/settings/resourceLanguage",x=m.B.as(p.I.JSONContribution);class ConfigurationRegistry{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new d.Q5,this._onDidUpdateConfiguration=new d.Q5,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:g.N("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},x.registerSchema(L,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,o=!0){this.registerConfigurations([e],o)}registerConfigurations(e,o=!0){const s=this.doRegisterConfigurations(e,o);x.registerSchema(L,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:s})}registerDefaultConfigurations(e){var o;const s=[],l=[];for(const{overrides:d,source:p}of e)for(const e in d)if(s.push(e),E.test(e)){const s=Object.assign(Object.assign({},(null===(o=this.configurationDefaultsOverrides.get(e))||void 0===o?void 0:o.value)||{}),d[e]);this.configurationDefaultsOverrides.set(e,{source:p,value:s});const m={type:"object",default:s,description:g.N("defaultLanguageConfiguration.description","Configure settings to be overridden for {0} language.",e),$ref:L,defaultDefaultValue:s,source:u.HD(p)?void 0:p};l.push(...overrideIdentifiersFromKey(e)),this.configurationProperties[e]=m,this.defaultLanguageConfigurationOverridesNode.properties[e]=m}else{this.configurationDefaultsOverrides.set(e,{value:d[e],source:p});const o=this.configurationProperties[e];o&&(this.updatePropertyDefaultValue(e,o),this.updateSchema(e,o))}this.registerOverrideIdentifiers(l),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:s,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const o of e)this.overrideIdentifiers.add(o);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,o){const s=[];return e.forEach((e=>{s.push(...this.validateAndRegisterProperties(e,o,e.extensionInfo,e.restrictedProperties)),this.configurationContributors.push(e),this.registerJSONConfiguration(e)})),s}validateAndRegisterProperties(e,o=!0,s,l,d=3){d=u.Jp(e.scope)?d:e.scope;let g=[],p=e.properties;if(p)for(let f in p){if(o&&validateProperty(f)){delete p[f];continue}const e=p[f];e.source=s,e.defaultDefaultValue=p[f].default,this.updatePropertyDefaultValue(f,e),E.test(f)?e.scope=void 0:(e.scope=u.Jp(e.scope)?d:e.scope,e.restricted=u.Jp(e.restricted)?!!(null===l||void 0===l?void 0:l.includes(f)):e.restricted),!p[f].hasOwnProperty("included")||p[f].included?(this.configurationProperties[f]=p[f],!p[f].deprecationMessage&&p[f].markdownDeprecationMessage&&(p[f].deprecationMessage=p[f].markdownDeprecationMessage),g.push(f)):(this.excludedConfigurationProperties[f]=p[f],delete p[f])}let m=e.allOf;if(m)for(let u of m)g.push(...this.validateAndRegisterProperties(u,o,s,l,d));return g}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const register=e=>{let o=e.properties;if(o)for(const l in o)this.updateSchema(l,o[l]);let s=e.allOf;s&&s.forEach(register)};register(e)}updateSchema(e,o){switch(_.properties[e]=o,o.scope){case 1:C.properties[e]=o;break;case 2:b.properties[e]=o;break;case 6:w.properties[e]=o;break;case 3:S.properties[e]=o;break;case 4:y.properties[e]=o;break;case 5:y.properties[e]=o,this.resourceLanguageSettingsSchema.properties[e]=o;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const o=`[${e}]`,s={type:"object",description:g.N("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:g.N("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:L};this.updatePropertyDefaultValue(o,s),_.properties[o]=s,C.properties[o]=s,b.properties[o]=s,w.properties[o]=s,S.properties[o]=s,y.properties[o]=s}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){const e={type:"object",description:g.N("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:g.N("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:L};_.patternProperties[D]=e,C.patternProperties[D]=e,b.patternProperties[D]=e,w.patternProperties[D]=e,S.patternProperties[D]=e,y.patternProperties[D]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,o){const s=this.configurationDefaultsOverrides.get(e);let l=null===s||void 0===s?void 0:s.value,d=null===s||void 0===s?void 0:s.source;u.o8(l)&&(l=o.defaultDefaultValue,d=void 0),u.o8(l)&&(l=getDefaultValue(o.type)),o.default=l,o.defaultValueSource=d}}const k="\\[([^\\]]+)\\]",N=new RegExp(k,"g"),D=`^(${k})+$`,E=new RegExp(D);function overrideIdentifiersFromKey(e){const o=[];if(E.test(e)){let s=N.exec(e);while(null===s||void 0===s?void 0:s.length){const l=s[1].trim();l&&o.push(l),s=N.exec(e)}}return(0,l.EB)(o)}function getDefaultValue(e){const o=Array.isArray(e)?e[0]:e;switch(o){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const T=new ConfigurationRegistry;function validateProperty(e){return e.trim()?E.test(e)?g.N("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==T.getConfigurationProperties()[e]?g.N("config.property.duplicate","Cannot register '{0}'. This property is already registered.",e):null:g.N("config.property.empty","Cannot register an empty property")}m.B.add(f.Configuration,T)},8819:function(e,o,s){"use strict";s.d(o,{Ao:function(){return ContextKeyExpr},Eq:function(){return f},Fb:function(){return expressionsAreEqualWithConstantSubstitution},K8:function(){return implies},i6:function(){return m},uy:function(){return RawContextKey}});var l=s(1432),d=s(2677),u=s(2065);const g=new Map;g.set("false",!1),g.set("true",!0),g.set("isMac",l.dz),g.set("isLinux",l.IJ),g.set("isWindows",l.ED),g.set("isWeb",l.$L),g.set("isMacNative",l.dz&&!l.$L),g.set("isEdge",l.un),g.set("isFirefox",l.vU),g.set("isChrome",l.i7),g.set("isSafari",l.G6);const p=Object.prototype.hasOwnProperty;class ContextKeyExpr{static has(e){return ContextKeyDefinedExpr.create(e)}static equals(e,o){return ContextKeyEqualsExpr.create(e,o)}static regex(e,o){return ContextKeyRegexExpr.create(e,o)}static not(e){return ContextKeyNotExpr.create(e)}static and(...e){return ContextKeyAndExpr.create(e,null)}static or(...e){return ContextKeyOrExpr.create(e,null,!0)}static deserialize(e,o=!1){if(e)return this._deserializeOrExpression(e,o)}static _deserializeOrExpression(e,o){let s=e.split("||");return ContextKeyOrExpr.create(s.map((e=>this._deserializeAndExpression(e,o))),null,!0)}static _deserializeAndExpression(e,o){let s=e.split("&&");return ContextKeyAndExpr.create(s.map((e=>this._deserializeOne(e,o))),null)}static _deserializeOne(e,o){if(e=e.trim(),e.indexOf("!=")>=0){let s=e.split("!=");return ContextKeyNotEqualsExpr.create(s[0].trim(),this._deserializeValue(s[1],o))}if(e.indexOf("==")>=0){let s=e.split("==");return ContextKeyEqualsExpr.create(s[0].trim(),this._deserializeValue(s[1],o))}if(e.indexOf("=~")>=0){let s=e.split("=~");return ContextKeyRegexExpr.create(s[0].trim(),this._deserializeRegexValue(s[1],o))}if(e.indexOf(" in ")>=0){let o=e.split(" in ");return ContextKeyInExpr.create(o[0].trim(),o[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const o=e.split(">=");return ContextKeyGreaterEqualsExpr.create(o[0].trim(),o[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const o=e.split(">");return ContextKeyGreaterExpr.create(o[0].trim(),o[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const o=e.split("<=");return ContextKeySmallerEqualsExpr.create(o[0].trim(),o[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const o=e.split("<");return ContextKeySmallerExpr.create(o[0].trim(),o[1].trim())}return/^\!\s*/.test(e)?ContextKeyNotExpr.create(e.substr(1).trim()):ContextKeyDefinedExpr.create(e)}static _deserializeValue(e,o){if(e=e.trim(),"true"===e)return!0;if("false"===e)return!1;let s=/^'([^']*)'$/.exec(e);return s?s[1].trim():e}static _deserializeRegexValue(e,o){if((0,d.m5)(e)){if(o)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let s=e.indexOf("/"),l=e.lastIndexOf("/");if(s===l||s<0){if(o)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let u=e.slice(s+1,l),g="i"===e[l+1]?"i":"";try{return new RegExp(u,g)}catch(p){if(o)throw new Error(`bad regexp-value '${e}', parse error: ${p}`);return console.warn(`bad regexp-value '${e}', parse error: ${p}`),null}}}function expressionsAreEqualWithConstantSubstitution(e,o){const s=e?e.substituteConstants():void 0,l=o?o.substituteConstants():void 0;return!s&&!l||!(!s||!l)&&s.equals(l)}function cmp(e,o){return e.cmp(o)}class ContextKeyFalseExpr{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return ContextKeyTrueExpr.INSTANCE}}ContextKeyFalseExpr.INSTANCE=new ContextKeyFalseExpr;class ContextKeyTrueExpr{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return ContextKeyFalseExpr.INSTANCE}}ContextKeyTrueExpr.INSTANCE=new ContextKeyTrueExpr;class ContextKeyDefinedExpr{constructor(e,o){this.key=e,this.negated=o,this.type=2}static create(e,o=null){const s=g.get(e);return"boolean"===typeof s?s?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:new ContextKeyDefinedExpr(e,o)}cmp(e){return e.type!==this.type?this.type-e.type:cmp1(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=g.get(this.key);return"boolean"===typeof e?e?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotExpr.create(this.key,this)),this.negated}}class ContextKeyEqualsExpr{constructor(e,o,s){this.key=e,this.value=o,this.negated=s,this.type=4}static create(e,o,s=null){if("boolean"===typeof o)return o?ContextKeyDefinedExpr.create(e,s):ContextKeyNotExpr.create(e,s);const l=g.get(e);if("boolean"===typeof l){const e=l?"true":"false";return o===e?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE}return new ContextKeyEqualsExpr(e,o,s)}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=g.get(this.key);if("boolean"===typeof e){const o=e?"true":"false";return this.value===o?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyInExpr{constructor(e,o){this.key=e,this.valueKey=o,this.type=10,this.negated=null}static create(e,o){return new ContextKeyInExpr(e,o)}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}substituteConstants(){return this}evaluate(e){const o=e.getValue(this.valueKey),s=e.getValue(this.key);return Array.isArray(o)?o.indexOf(s)>=0:"string"===typeof s&&"object"===typeof o&&null!==o&&p.call(o,s)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=ContextKeyNotInExpr.create(this)),this.negated}}class ContextKeyNotInExpr{constructor(e){this._actual=e,this.type=11}static create(e){return new ContextKeyNotInExpr(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class ContextKeyNotEqualsExpr{constructor(e,o,s){this.key=e,this.value=o,this.negated=s,this.type=5}static create(e,o,s=null){if("boolean"===typeof o)return o?ContextKeyNotExpr.create(e,s):ContextKeyDefinedExpr.create(e,s);const l=g.get(e);if("boolean"===typeof l){const e=l?"true":"false";return o===e?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE}return new ContextKeyNotEqualsExpr(e,o,s)}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=g.get(this.key);if("boolean"===typeof e){const o=e?"true":"false";return this.value===o?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyNotExpr{constructor(e,o){this.key=e,this.negated=o,this.type=3}static create(e,o=null){const s=g.get(e);return"boolean"===typeof s?s?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:new ContextKeyNotExpr(e,o)}cmp(e){return e.type!==this.type?this.type-e.type:cmp1(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=g.get(this.key);return"boolean"===typeof e?e?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyDefinedExpr.create(this.key,this)),this.negated}}function withFloatOrStr(e,o){if("string"===typeof e){const o=parseFloat(e);isNaN(o)||(e=o)}return"string"===typeof e||"number"===typeof e?o(e):ContextKeyFalseExpr.INSTANCE}class ContextKeyGreaterExpr{constructor(e,o,s){this.key=e,this.value=o,this.negated=s,this.type=12}static create(e,o,s=null){return withFloatOrStr(o,(o=>new ContextKeyGreaterExpr(e,o,s)))}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeySmallerEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyGreaterEqualsExpr{constructor(e,o,s){this.key=e,this.value=o,this.negated=s,this.type=13}static create(e,o,s=null){return withFloatOrStr(o,(o=>new ContextKeyGreaterEqualsExpr(e,o,s)))}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeySmallerExpr.create(this.key,this.value,this)),this.negated}}class ContextKeySmallerExpr{constructor(e,o,s){this.key=e,this.value=o,this.negated=s,this.type=14}static create(e,o,s=null){return withFloatOrStr(o,(o=>new ContextKeySmallerExpr(e,o,s)))}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyGreaterEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeySmallerEqualsExpr{constructor(e,o,s){this.key=e,this.value=o,this.negated=s,this.type=15}static create(e,o,s=null){return withFloatOrStr(o,(o=>new ContextKeySmallerEqualsExpr(e,o,s)))}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyGreaterExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyRegexExpr{constructor(e,o){this.key=e,this.regexp=o,this.type=7,this.negated=null}static create(e,o){return new ContextKeyRegexExpr(e,o)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const o=this.regexp?this.regexp.source:"",s=e.regexp?e.regexp.source:"";return o<s?-1:o>s?1:0}equals(e){if(e.type===this.type){const o=this.regexp?this.regexp.source:"",s=e.regexp?e.regexp.source:"";return this.key===e.key&&o===s}return!1}substituteConstants(){return this}evaluate(e){let o=e.getValue(this.key);return!!this.regexp&&this.regexp.test(o)}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotRegexExpr.create(this)),this.negated}}class ContextKeyNotRegexExpr{constructor(e){this._actual=e,this.type=8}static create(e){return new ContextKeyNotRegexExpr(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function eliminateConstantsInArray(e){let o=null;for(let s=0,l=e.length;s<l;s++){const l=e[s].substituteConstants();if(e[s]!==l&&null===o){o=[];for(let l=0;l<s;l++)o[l]=e[l]}null!==o&&(o[s]=l)}return null===o?e:o}class ContextKeyAndExpr{constructor(e,o){this.expr=e,this.negated=o,this.type=6}static create(e,o){return ContextKeyAndExpr._normalizeArr(e,o)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let o=0,s=this.expr.length;o<s;o++){const s=cmp(this.expr[o],e.expr[o]);if(0!==s)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let o=0,s=this.expr.length;o<s;o++)if(!this.expr[o].equals(e.expr[o]))return!1;return!0}return!1}substituteConstants(){const e=eliminateConstantsInArray(this.expr);return e===this.expr?this:ContextKeyAndExpr.create(e,this.negated)}evaluate(e){for(let o=0,s=this.expr.length;o<s;o++)if(!this.expr[o].evaluate(e))return!1;return!0}static _normalizeArr(e,o){const s=[];let l=!1;for(const d of e)if(d)if(1!==d.type){if(0===d.type)return ContextKeyFalseExpr.INSTANCE;6!==d.type?s.push(d):s.push(...d.expr)}else l=!0;if(0===s.length&&l)return ContextKeyTrueExpr.INSTANCE;if(0!==s.length){if(1===s.length)return s[0];s.sort(cmp);for(let e=1;e<s.length;e++)s[e-1].equals(s[e])&&(s.splice(e,1),e--);if(1===s.length)return s[0];while(s.length>1){const e=s[s.length-1];if(9!==e.type)break;s.pop();const o=s.pop(),l=0===s.length,d=ContextKeyOrExpr.create(e.expr.map((e=>ContextKeyAndExpr.create([e,o],null))),null,l);d&&(s.push(d),s.sort(cmp))}return 1===s.length?s[0]:new ContextKeyAndExpr(s,o)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(let o of this.expr)e.push(...o.keys());return e}negate(){if(!this.negated){const e=[];for(let o of this.expr)e.push(o.negate());this.negated=ContextKeyOrExpr.create(e,this,!0)}return this.negated}}class ContextKeyOrExpr{constructor(e,o){this.expr=e,this.negated=o,this.type=9}static create(e,o,s){return ContextKeyOrExpr._normalizeArr(e,o,s)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let o=0,s=this.expr.length;o<s;o++){const s=cmp(this.expr[o],e.expr[o]);if(0!==s)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let o=0,s=this.expr.length;o<s;o++)if(!this.expr[o].equals(e.expr[o]))return!1;return!0}return!1}substituteConstants(){const e=eliminateConstantsInArray(this.expr);return e===this.expr?this:ContextKeyOrExpr.create(e,this.negated,!1)}evaluate(e){for(let o=0,s=this.expr.length;o<s;o++)if(this.expr[o].evaluate(e))return!0;return!1}static _normalizeArr(e,o,s){let l=[],d=!1;if(e){for(let o=0,s=e.length;o<s;o++){const s=e[o];if(s)if(0!==s.type){if(1===s.type)return ContextKeyTrueExpr.INSTANCE;9!==s.type?l.push(s):l=l.concat(s.expr)}else d=!0}if(0===l.length&&d)return ContextKeyFalseExpr.INSTANCE;l.sort(cmp)}if(0!==l.length){if(1===l.length)return l[0];for(let e=1;e<l.length;e++)l[e-1].equals(l[e])&&(l.splice(e,1),e--);if(1===l.length)return l[0];if(s){for(let e=0;e<l.length;e++)for(let o=e+1;o<l.length;o++)implies(l[e],l[o])&&(l.splice(o,1),o--);if(1===l.length)return l[0]}return new ContextKeyOrExpr(l,o)}}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(let o of this.expr)e.push(...o.keys());return e}negate(){if(!this.negated){let e=[];for(let o of this.expr)e.push(o.negate());while(e.length>1){const o=e.shift(),s=e.shift(),l=[];for(const e of getTerminals(o))for(const o of getTerminals(s))l.push(ContextKeyAndExpr.create([e,o],null));const d=0===e.length;e.unshift(ContextKeyOrExpr.create(l,null,d))}this.negated=e[0]}return this.negated}}class RawContextKey extends ContextKeyDefinedExpr{constructor(e,o,s){super(e,null),this._defaultValue=o,"object"===typeof s?RawContextKey._info.push(Object.assign(Object.assign({},s),{key:e})):!0!==s&&RawContextKey._info.push({key:e,description:s,type:null!==o&&void 0!==o?typeof o:void 0})}static all(){return RawContextKey._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return ContextKeyEqualsExpr.create(this.key,e)}}RawContextKey._info=[];const m=(0,u.yh)("contextKeyService"),f="setContext";function cmp1(e,o){return e<o?-1:e>o?1:0}function cmp2(e,o,s,l){return e<s?-1:e>s?1:o<l?-1:o>l?1:0}function implies(e,o){if(6===o.type&&9!==e.type&&6!==e.type)for(const d of o.expr)if(e.equals(d))return!0;const s=e.negate(),l=getTerminals(s).concat(getTerminals(o));l.sort(cmp);for(let d=0;d<l.length;d++){const e=l[d],o=e.negate();for(let s=d+1;s<l.length;s++){const e=l[s];if(o.equals(e))return!0}}return!1}function getTerminals(e){return 9===e.type?e.expr:[e]}},9282:function(e,o,s){"use strict";s.d(o,{cv:function(){return g},d0:function(){return p}});var l=s(1432),d=s(3580),u=s(8819);new u.uy("isMac",l.dz,(0,d.N)("isMac","Whether the operating system is macOS")),new u.uy("isLinux",l.IJ,(0,d.N)("isLinux","Whether the operating system is Linux"));const g=new u.uy("isWindows",l.ED,(0,d.N)("isWindows","Whether the operating system is Windows")),p=(new u.uy("isWeb",l.$L,(0,d.N)("isWeb","Whether the platform is a web browser")),new u.uy("isMacNative",l.dz&&!l.$L,(0,d.N)("isMacNative","Whether the operating system is macOS on a non-browser platform")),new u.uy("isIOS",l.gn,(0,d.N)("isIOS","Whether the operating system is iOS")),new u.uy("isDevelopment",!1,!0),"inputFocus");new u.uy(p,!1,(0,d.N)("inputFocus","Whether keyboard focus is inside an input box"))},5606:function(e,o,s){"use strict";s.d(o,{i:function(){return u},u:function(){return d}});var l=s(2065);const d=(0,l.yh)("contextViewService"),u=(0,l.yh)("contextMenuService")},8820:function(e,o,s){"use strict";s.d(o,{S:function(){return d}});var l=s(2065);const d=(0,l.yh)("dialogService")},7466:function(e,o,s){"use strict";s.d(o,{Yb:function(){return D},Nq:function(){return E},iX:function(){return L}});var l=s(5321),d=s(3331),u=s(1338),g=s(3794),p=s(4669),m=s(3580);const f=m.N("defaultLabel","input");class FindInput extends g.${constructor(e,o,s,g){super(),this._showOptionButtons=s,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new p.Q5),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new p.Q5),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new p.Q5),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new p.Q5),this._onKeyUp=this._register(new p.Q5),this._onCaseSensitiveKeyDown=this._register(new p.Q5),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new p.Q5),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=o,this.placeholder=g.placeholder||"",this.validation=g.validation,this.label=g.label||f,this.inputActiveOptionBorder=g.inputActiveOptionBorder,this.inputActiveOptionForeground=g.inputActiveOptionForeground,this.inputActiveOptionBackground=g.inputActiveOptionBackground,this.inputBackground=g.inputBackground,this.inputForeground=g.inputForeground,this.inputBorder=g.inputBorder,this.inputValidationInfoBorder=g.inputValidationInfoBorder,this.inputValidationInfoBackground=g.inputValidationInfoBackground,this.inputValidationInfoForeground=g.inputValidationInfoForeground,this.inputValidationWarningBorder=g.inputValidationWarningBorder,this.inputValidationWarningBackground=g.inputValidationWarningBackground,this.inputValidationWarningForeground=g.inputValidationWarningForeground,this.inputValidationErrorBorder=g.inputValidationErrorBorder,this.inputValidationErrorBackground=g.inputValidationErrorBackground,this.inputValidationErrorForeground=g.inputValidationErrorForeground;const m=g.appendCaseSensitiveLabel||"",_=g.appendWholeWordsLabel||"",C=g.appendRegexLabel||"",b=g.history||[],w=!!g.flexibleHeight,S=!!g.flexibleWidth,y=g.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new u.p(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:b,showHistoryHint:g.showHistoryHint,flexibleHeight:w,flexibleWidth:S,flexibleMaxHeight:y})),this.regex=this._register(new d.am({appendTitle:C,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.regex.onKeyDown((e=>{this._onRegexKeyDown.fire(e)}))),this.wholeWords=this._register(new d.n3({appendTitle:_,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this.caseSensitive=this._register(new d.vk({appendTitle:m,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.caseSensitive.onKeyDown((e=>{this._onCaseSensitiveKeyDown.fire(e)}))),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let L=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,(e=>{if(e.equals(15)||e.equals(17)||e.equals(9)){let o=L.indexOf(document.activeElement);if(o>=0){let s=-1;e.equals(17)?s=(o+1)%L.length:e.equals(15)&&(s=0===o?L.length-1:o-1),e.equals(9)?(L[o].blur(),this.inputBox.focus()):s>=0&&L[s].focus(),l.zB.stop(e,!0)}}})),this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this._showOptionButtons?"block":"none",this.controls.appendChild(this.caseSensitive.domNode),this.controls.appendChild(this.wholeWords.domNode),this.controls.appendChild(this.regex.domNode),this.domNode.appendChild(this.controls),e&&e.appendChild(this.domNode),this._register(l.nm(this.inputBox.inputElement,"compositionstart",(e=>{this.imeSessionInProgress=!0}))),this._register(l.nm(this.inputBox.inputElement,"compositionend",(e=>{this.imeSessionInProgress=!1,this._onInput.fire()}))),this.onkeydown(this.inputBox.inputElement,(e=>this._onKeyDown.fire(e))),this.onkeyup(this.inputBox.inputElement,(e=>this._onKeyUp.fire(e))),this.oninput(this.inputBox.inputElement,(e=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(e=>this._onMouseDown.fire(e)))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const o={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(o)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}var _=s(6229),C=s(3046);const b=m.N("defaultLabel","input"),w=m.N("label.preserveCaseCheckbox","Preserve Case");class PreserveCaseCheckbox extends _.X{constructor(e){super({icon:C.lA.preserveCase,title:w+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class ReplaceInput extends g.${constructor(e,o,s,d){super(),this._showOptionButtons=s,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new p.Q5),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new p.Q5),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new p.Q5),this._onInput=this._register(new p.Q5),this._onKeyUp=this._register(new p.Q5),this._onPreserveCaseKeyDown=this._register(new p.Q5),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=o,this.placeholder=d.placeholder||"",this.validation=d.validation,this.label=d.label||b,this.inputActiveOptionBorder=d.inputActiveOptionBorder,this.inputActiveOptionForeground=d.inputActiveOptionForeground,this.inputActiveOptionBackground=d.inputActiveOptionBackground,this.inputBackground=d.inputBackground,this.inputForeground=d.inputForeground,this.inputBorder=d.inputBorder,this.inputValidationInfoBorder=d.inputValidationInfoBorder,this.inputValidationInfoBackground=d.inputValidationInfoBackground,this.inputValidationInfoForeground=d.inputValidationInfoForeground,this.inputValidationWarningBorder=d.inputValidationWarningBorder,this.inputValidationWarningBackground=d.inputValidationWarningBackground,this.inputValidationWarningForeground=d.inputValidationWarningForeground,this.inputValidationErrorBorder=d.inputValidationErrorBorder,this.inputValidationErrorBackground=d.inputValidationErrorBackground,this.inputValidationErrorForeground=d.inputValidationErrorForeground;const g=d.appendPreserveCaseLabel||"",m=d.history||[],f=!!d.flexibleHeight,_=!!d.flexibleWidth,C=d.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new u.p(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:m,showHistoryHint:d.showHistoryHint,flexibleHeight:f,flexibleWidth:_,flexibleMaxHeight:C})),this.preserveCase=this._register(new PreserveCaseCheckbox({appendTitle:g,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.preserveCase.onKeyDown((e=>{this._onPreserveCaseKeyDown.fire(e)}))),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let w=[this.preserveCase.domNode];this.onkeydown(this.domNode,(e=>{if(e.equals(15)||e.equals(17)||e.equals(9)){let o=w.indexOf(document.activeElement);if(o>=0){let s=-1;e.equals(17)?s=(o+1)%w.length:e.equals(15)&&(s=0===o?w.length-1:o-1),e.equals(9)?(w[o].blur(),this.inputBox.focus()):s>=0&&w[s].focus(),l.zB.stop(e,!0)}}}));let S=document.createElement("div");S.className="controls",S.style.display=this._showOptionButtons?"block":"none",S.appendChild(this.preserveCase.domNode),this.domNode.appendChild(S),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,(e=>this._onKeyDown.fire(e))),this.onkeyup(this.inputBox.inputElement,(e=>this._onKeyUp.fire(e))),this.oninput(this.inputBox.inputElement,(e=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(e=>this._onMouseDown.fire(e)))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const o={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(o)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var S=s(8819),y=s(9989),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const L=new S.uy("suggestWidgetVisible",!1,(0,m.N)("suggestWidgetVisible","Whether suggestion are visible")),x="historyNavigationWidget",k="historyNavigationForwardsEnabled",N="historyNavigationBackwardsEnabled";function bindContextScopedWidget(e,o,s){new S.uy(s,o).bindTo(e)}function createWidgetScopedContextKeyService(e,o){return e.createScoped(o.target)}function getContextScopedWidget(e,o){return e.getContext(document.activeElement).getValue(o)}function createAndBindHistoryNavigationWidgetScopedContextKeyService(e,o){const s=createWidgetScopedContextKeyService(e,o);bindContextScopedWidget(s,o,x);const l=new S.uy(k,!0).bindTo(s),d=new S.uy(N,!0).bindTo(s);return{scopedContextKeyService:s,historyNavigationForwardsEnablement:l,historyNavigationBackwardsEnablement:d}}let D=class ContextScopedFindInput extends FindInput{constructor(e,o,s,l,d=!1){super(e,o,d,s),this._register(createAndBindHistoryNavigationWidgetScopedContextKeyService(l,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};D=__decorate([__param(3,S.i6)],D);let E=class ContextScopedReplaceInput extends ReplaceInput{constructor(e,o,s,l,d=!1){super(e,o,d,s),this._register(createAndBindHistoryNavigationWidgetScopedContextKeyService(l,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};E=__decorate([__param(3,S.i6)],E),y.W.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:S.Ao.and(S.Ao.has(x),S.Ao.equals(N,!0),L.isEqualTo(!1)),primary:16,secondary:[528],handler:e=>{const o=getContextScopedWidget(e.get(S.i6),x);if(o){const e=o.historyNavigator;e.showPreviousValue()}}}),y.W.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:S.Ao.and(S.Ao.has(x),S.Ao.equals(k,!0),L.isEqualTo(!1)),primary:18,secondary:[530],handler:e=>{const o=getContextScopedWidget(e.get(S.i6),x);if(o){const e=o.historyNavigator;e.showNextValue()}}})},7108:function(e,o,s){"use strict";s.d(o,{M:function(){return SyncDescriptor}});class SyncDescriptor{constructor(e,o=[],s=!1){this.ctor=e,this.staticArguments=o,this.supportsDelayedInstantiation=s}}},5026:function(e,o,s){"use strict";s.d(o,{d:function(){return getSingletonServiceDescriptors},z:function(){return registerSingleton}});var l=s(7108);const d=[];function registerSingleton(e,o,s){o instanceof l.M||(o=new l.M(o,[],s)),d.push([e,o])}function getSingletonServiceDescriptors(){return d}},2065:function(e,o,s){"use strict";var l;s.d(o,{I8:function(){return l},TG:function(){return d},yh:function(){return createDecorator}}),function(e){function getServiceDependencies(o){return o[e.DI_DEPENDENCIES]||[]}e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=getServiceDependencies}(l||(l={}));const d=createDecorator("instantiationService");function storeServiceDependency(e,o,s){o[l.DI_TARGET]===o?o[l.DI_DEPENDENCIES].push({id:e,index:s}):(o[l.DI_DEPENDENCIES]=[{id:e,index:s}],o[l.DI_TARGET]=o)}function createDecorator(e){if(l.serviceIds.has(e))return l.serviceIds.get(e);const id=function(e,o,s){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");storeServiceDependency(id,e,s)};return id.toString=()=>e,l.serviceIds.set(e,id),id}},972:function(e,o,s){"use strict";s.d(o,{y:function(){return ServiceCollection}});class ServiceCollection{constructor(...e){this._entries=new Map;for(let[o,s]of e)this.set(o,s)}set(e,o){const s=this._entries.get(e);return this._entries.set(e,o),s}get(e){return this._entries.get(e)}}},1294:function(e,o,s){"use strict";s.d(o,{I:function(){return u}});var l=s(4669),d=s(9872);const u={JSONContribution:"base.contributions.json"};function normalizeId(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}class JSONContributionRegistry{constructor(){this._onDidChangeSchema=new l.Q5,this.schemasById={}}registerSchema(e,o){this.schemasById[normalizeId(e)]=o,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const g=new JSONContributionRegistry;d.B.add(u.JSONContribution,g)},1847:function(e,o,s){"use strict";s.d(o,{d:function(){return d}});var l=s(2065);const d=(0,l.yh)("keybindingService")},9989:function(e,o,s){"use strict";s.d(o,{W:function(){return p}});var l=s(8313),d=s(1432),u=s(4565),g=s(9872);class KeybindingsRegistryImpl{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(1===d.OS){if(e&&e.win)return e.win}else if(2===d.OS){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const o=KeybindingsRegistryImpl.bindToCurrentPlatform(e);if(o&&o.primary){const s=(0,l.gm)(o.primary,d.OS);s&&this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when)}if(o&&Array.isArray(o.secondary))for(let s=0,u=o.secondary.length;s<u;s++){const u=o.secondary[s],g=(0,l.gm)(u,d.OS);g&&this._registerDefaultKeybinding(g,e.id,e.args,e.weight,-s-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),u.P0.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||(e>=31&&e<=56||(80===e||81===e||82===e||83===e||84===e||85===e||86===e||110===e||111===e||87===e||88===e||89===e||90===e||91===e||92===e))}_assertNoCtrlAlt(e,o){e.ctrlKey&&e.altKey&&!e.metaKey&&KeybindingsRegistryImpl._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",o)}_registerDefaultKeybinding(e,o,s,l,u,g){1===d.OS&&this._assertNoCtrlAlt(e.parts[0],o),this._coreKeybindings.push({keybinding:e.parts,command:o,commandArgs:s,when:g,weight1:l,weight2:u,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(sorter)),this._cachedMergedKeybindings.slice(0)}}const p=new KeybindingsRegistryImpl,m={EditorModes:"platform.keybindingsRegistry"};function sorter(e,o){return e.weight1!==o.weight1?e.weight1-o.weight1:e.command<o.command?-1:e.command>o.command?1:e.weight2-o.weight2}g.B.add(m.EditorModes,p)},4349:function(e,o,s){"use strict";s.d(o,{e:function(){return d}});var l=s(2065);const d=(0,l.yh)("labelService")},9785:function(e,o,s){"use strict";s.d(o,{Lw:function(){return G},XN:function(){return q},ls:function(){return Le},ev:function(){return Ce},CQ:function(){return Y},PS:function(){return ie},uJ:function(){return oe}});var l=s(5321),d=s(9488),u=s(1050),g=s(4669),p=s(5976),m=s(9047);class PagedRenderer{constructor(e,o){this.renderer=e,this.modelProvider=o}get templateId(){return this.renderer.templateId}renderTemplate(e){const o=this.renderer.renderTemplate(e);return{data:o,disposable:p.JT.None}}renderElement(e,o,s,l){if(s.disposable&&s.disposable.dispose(),!s.data)return;const d=this.modelProvider();if(d.isResolved(e))return this.renderer.renderElement(d.get(e),e,s.data,l);const g=new u.A,p=d.resolve(e,g.token);s.disposable={dispose:()=>g.cancel()},this.renderer.renderPlaceholder(e,s.data),p.then((o=>this.renderer.renderElement(o,e,s.data,l)))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class PagedAccessibilityProvider{constructor(e,o){this.modelProvider=e,this.accessibilityProvider=o}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const o=this.modelProvider();return o.isResolved(e)?this.accessibilityProvider.getAriaLabel(o.get(e)):null}}function fromPagedListOptions(e,o){return Object.assign(Object.assign({},o),{accessibilityProvider:o.accessibilityProvider&&new PagedAccessibilityProvider(e,o.accessibilityProvider)})}class PagedList{constructor(e,o,s,l,d={}){const modelProvider=()=>this.model,u=l.map((e=>new PagedRenderer(e,modelProvider)));this.list=new m.aV(e,o,s,u,fromPagedListOptions(modelProvider,d))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return g.ju.map(this.list.onMouseDblClick,(({element:e,index:o,browserEvent:s})=>({element:void 0===e?void 0:this._model.get(e),index:o,browserEvent:s})))}get onPointer(){return g.ju.map(this.list.onPointer,(({element:e,index:o,browserEvent:s})=>({element:void 0===e?void 0:this._model.get(e),index:o,browserEvent:s})))}get onDidChangeSelection(){return g.ju.map(this.list.onDidChangeSelection,(({elements:e,indexes:o,browserEvent:s})=>({elements:e.map((e=>this._model.get(e))),indexes:o,browserEvent:s})))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,(0,d.w6)(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((e=>this.model.get(e)))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var f=s(3937);class TableListRenderer{constructor(e,o,s){this.columns=e,this.getColumnSize=s,this.templateId=TableListRenderer.TemplateId,this.renderedTemplates=new Set;const l=new Map(o.map((e=>[e.templateId,e])));this.renderers=[];for(const d of e){const e=l.get(d.templateId);if(!e)throw new Error(`Table cell renderer for template id ${d.templateId} not found.`);this.renderers.push(e)}}renderTemplate(e){const o=(0,l.R3)(e,(0,l.$)(".monaco-table-tr")),s=[],d=[];for(let g=0;g<this.columns.length;g++){const e=this.renderers[g],u=(0,l.R3)(o,(0,l.$)(".monaco-table-td",{"data-col-index":g}));u.style.width=`${this.getColumnSize(g)}px`,s.push(u),d.push(e.renderTemplate(u))}const u={container:e,cellContainers:s,cellTemplateData:d};return this.renderedTemplates.add(u),u}renderElement(e,o,s,l){for(let d=0;d<this.columns.length;d++){const u=this.columns[d],g=u.project(e),p=this.renderers[d];p.renderElement(g,o,s.cellTemplateData[d],l)}}disposeElement(e,o,s,l){for(let d=0;d<this.columns.length;d++){const u=this.renderers[d];if(u.disposeElement){const g=this.columns[d],p=g.project(e);u.disposeElement(p,o,s.cellTemplateData[d],l)}}}disposeTemplate(e){for(let o=0;o<this.columns.length;o++){const s=this.renderers[o];s.disposeTemplate(e.cellTemplateData[o])}(0,l.PO)(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,o){for(const{cellContainers:s}of this.renderedTemplates)s[e].style.width=`${o}px`}}function asListVirtualDelegate(e){return{getHeight(o){return e.getHeight(o)},getTemplateId(){return TableListRenderer.TemplateId}}}TableListRenderer.TemplateId="row";class ColumnHeader{constructor(e,o){this.column=e,this.index=o,this._onDidLayout=new g.Q5,this.onDidLayout=this._onDidLayout.event,this.element=(0,l.$)(".monaco-table-th",{"data-col-index":o,title:e.tooltip},e.label)}get minimumSize(){var e;return null!==(e=this.column.minimumWidth)&&void 0!==e?e:120}get maximumSize(){var e;return null!==(e=this.column.maximumWidth)&&void 0!==e?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return null!==(e=this.column.onDidChangeWidthConstraints)&&void 0!==e?e:g.ju.None}layout(e){this._onDidLayout.fire([this.index,e])}}class Table{constructor(e,o,s,d,u,_){this.virtualDelegate=s,this.domId="table_id_"+ ++Table.InstanceCount,this.disposables=new p.SL,this.cachedWidth=0,this.cachedHeight=0,this.domNode=(0,l.R3)(o,(0,l.$)(`.monaco-table.${this.domId}`));const C=d.map(((e,o)=>new ColumnHeader(e,o))),b={size:C.reduce(((e,o)=>e+o.column.weight),0),views:C.map((e=>({size:e.column.weight,view:e})))};this.splitview=this.disposables.add(new f.z(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:b})),this.splitview.el.style.height=`${s.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${s.headerRowHeight}px`;const w=new TableListRenderer(d,u,(e=>this.splitview.getViewSize(e)));this.list=this.disposables.add(new m.aV(e,this.domNode,asListVirtualDelegate(s),[w],_)),g.ju.any(...C.map((e=>e.onDidLayout)))((([e,o])=>w.layoutColumn(e,o)),null,this.disposables),this.splitview.onDidSashReset((e=>{const o=d.reduce(((e,o)=>e+o.weight),0),s=d[e].weight/o*this.cachedWidth;this.splitview.resizeView(e,s)}),null,this.disposables),this.styleElement=(0,l.dS)(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,o,s=[]){this.list.splice(e,o,s)}getHTMLElement(){return this.domNode}style(e){const o=[];o.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight+1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`),this.styleElement.textContent=o.join("\n"),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}Table.InstanceCount=0;var _,C=s(2010),b=s(3547),w=s(4850),S=s(9069);(function(e){e[e["Unknown"]=0]="Unknown",e[e["Twistie"]=1]="Twistie",e[e["Element"]=2]="Element"})(_||(_={}));class TreeError extends Error{constructor(e,o){super(`TreeError [${e}] ${o}`)}}class WeakMapper{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let o=this._map.get(e);return o||(o=this.fn(e),this._map.set(e,o)),o}}var y=s(5393),L=s(2571),x=s(3725);function isFilterResult(e){return"object"===typeof e&&"visibility"in e&&"data"in e}function getVisibleState(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function isCollapsibleStateUpdate(e){return"boolean"===typeof e.collapsible}class IndexTreeModel{constructor(e,o,s,l={}){this.user=e,this.list=o,this.rootRef=[],this.eventBufferer=new g.E7,this._onDidChangeCollapseState=new g.Q5,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new g.Q5,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new g.Q5,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new y.vp(y.ne),this.collapseByDefault="undefined"!==typeof l.collapseByDefault&&l.collapseByDefault,this.filter=l.filter,this.autoExpandSingleChildren="undefined"!==typeof l.autoExpandSingleChildren&&l.autoExpandSingleChildren,this.root={parent:void 0,element:s,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,o,s=x.$.empty(),l={}){if(0===e.length)throw new TreeError(this.user,"Invalid tree location");l.diffIdentityProvider?this.spliceSmart(l.diffIdentityProvider,e,o,s,l):this.spliceSimple(e,o,s,l)}spliceSmart(e,o,s,l,d,u){var g;void 0===l&&(l=x.$.empty()),void 0===u&&(u=null!==(g=d.diffDepth)&&void 0!==g?g:0);const{parentNode:p}=this.getParentNodeWithListIndex(o);if(!p.lastDiffIds)return this.spliceSimple(o,s,l,d);const m=[...l],f=o[o.length-1],_=new L.Hs({getElements:()=>p.lastDiffIds},{getElements:()=>[...p.children.slice(0,f),...m,...p.children.slice(f+s)].map((o=>e.getId(o.element).toString()))}).ComputeDiff(!1);if(_.quitEarly)return p.lastDiffIds=void 0,this.spliceSimple(o,s,m,d);const C=o.slice(0,-1),recurseSplice=(o,s,l)=>{if(u>0)for(let g=0;g<l;g++)o--,s--,this.spliceSmart(e,[...C,o,0],Number.MAX_SAFE_INTEGER,m[s].children,d,u-1)};let b=Math.min(p.children.length,f+s),w=m.length;for(const S of _.changes.sort(((e,o)=>o.originalStart-e.originalStart)))recurseSplice(b,w,b-(S.originalStart+S.originalLength)),b=S.originalStart,w=S.modifiedStart-f,this.spliceSimple([...C,b],S.originalLength,x.$.slice(m,w,w+S.modifiedLength),d);recurseSplice(b,w,b)}spliceSimple(e,o,s=x.$.empty(),{onDidCreateNode:l,onDidDeleteNode:u,diffIdentityProvider:g}){const{parentNode:p,listIndex:m,revealed:f,visible:_}=this.getParentNodeWithListIndex(e),C=[],b=x.$.map(s,(e=>this.createTreeNode(e,p,p.visible?1:0,f,C,l))),w=e[e.length-1],S=p.children.length>0;let y=0;for(let d=w;d>=0&&d<p.children.length;d--){const e=p.children[d];if(e.visible){y=e.visibleChildIndex;break}}const L=[];let k=0,N=0;for(const d of b)L.push(d),N+=d.renderNodeCount,d.visible&&(d.visibleChildIndex=y+k++);const D=(0,d.db)(p.children,w,o,L);g?p.lastDiffIds?(0,d.db)(p.lastDiffIds,w,o,L.map((e=>g.getId(e.element).toString()))):p.lastDiffIds=p.children.map((e=>g.getId(e.element).toString())):p.lastDiffIds=void 0;let E=0;for(const d of D)d.visible&&E++;if(0!==E)for(let d=w+L.length;d<p.children.length;d++){const e=p.children[d];e.visible&&(e.visibleChildIndex-=E)}if(p.visibleChildrenCount+=k-E,f&&_){const e=D.reduce(((e,o)=>e+(o.visible?o.renderNodeCount:0)),0);this._updateAncestorsRenderNodeCount(p,N-e),this.list.splice(m,e,C)}if(D.length>0&&u){const visit=e=>{u(e),e.children.forEach(visit)};D.forEach(visit)}this._onDidSplice.fire({insertedNodes:L,deletedNodes:D});const T=p.children.length>0;S!==T&&this.setCollapsible(e.slice(0,-1),T);let I=p;while(I){if(2===I.visibility){this.refilterDelayer.trigger((()=>this.refilter()));break}I=I.parent}}rerender(e){if(0===e.length)throw new TreeError(this.user,"Invalid tree location");const{node:o,listIndex:s,revealed:l}=this.getTreeNodeWithListIndex(e);o.visible&&l&&this.list.splice(s,1,[o])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:o,visible:s,revealed:l}=this.getTreeNodeWithListIndex(e);return s&&l?o:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,o){const s=this.getTreeNode(e);"undefined"===typeof o&&(o=!s.collapsible);const l={collapsible:o};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,l)))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,o,s){const l=this.getTreeNode(e);"undefined"===typeof o&&(o=!l.collapsed);const d={collapsed:o,recursive:s||!1};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,d)))}_setCollapseState(e,o){const{node:s,listIndex:l,revealed:d}=this.getTreeNodeWithListIndex(e),u=this._setListNodeCollapseState(s,l,d,o);if(s!==this.root&&this.autoExpandSingleChildren&&u&&!isCollapsibleStateUpdate(o)&&s.collapsible&&!s.collapsed&&!o.recursive){let l=-1;for(let e=0;e<s.children.length;e++){const o=s.children[e];if(o.visible){if(l>-1){l=-1;break}l=e}}l>-1&&this._setCollapseState([...e,l],o)}return u}_setListNodeCollapseState(e,o,s,l){const d=this._setNodeCollapseState(e,l,!1);if(!s||!e.visible||!d)return d;const u=e.renderNodeCount,g=this.updateNodeAfterCollapseChange(e),p=u-(-1===o?0:1);return this.list.splice(o+1,p,g.slice(1)),d}_setNodeCollapseState(e,o,s){let l;if(e===this.root?l=!1:(isCollapsibleStateUpdate(o)?(l=e.collapsible!==o.collapsible,e.collapsible=o.collapsible):e.collapsible?(l=e.collapsed!==o.collapsed,e.collapsed=o.collapsed):l=!1,l&&this._onDidChangeCollapseState.fire({node:e,deep:s})),!isCollapsibleStateUpdate(o)&&o.recursive)for(const d of e.children)l=this._setNodeCollapseState(d,o,!0)||l;return l}expandTo(e){this.eventBufferer.bufferEvents((()=>{let o=this.getTreeNode(e);while(o.parent)o=o.parent,e=e.slice(0,e.length-1),o.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})}))}refilter(){const e=this.root.renderNodeCount,o=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,o),this.refilterDelayer.cancel()}createTreeNode(e,o,s,l,d,u){const g={parent:o,element:e.element,children:[],depth:o.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"===typeof e.collapsible?e.collapsible:"undefined"!==typeof e.collapsed,collapsed:"undefined"===typeof e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},p=this._filterNode(g,s);g.visibility=p,l&&d.push(g);const m=e.children||x.$.empty(),f=l&&0!==p&&!g.collapsed,_=x.$.map(m,(e=>this.createTreeNode(e,g,p,f,d,u)));let C=0,b=1;for(const w of _)g.children.push(w),b+=w.renderNodeCount,w.visible&&(w.visibleChildIndex=C++);return g.collapsible=g.collapsible||g.children.length>0,g.visibleChildrenCount=C,g.visible=2===p?C>0:1===p,g.visible?g.collapsed||(g.renderNodeCount=b):(g.renderNodeCount=0,l&&d.pop()),u&&u(g),g}updateNodeAfterCollapseChange(e){const o=e.renderNodeCount,s=[];return this._updateNodeAfterCollapseChange(e,s),this._updateAncestorsRenderNodeCount(e.parent,s.length-o),s}_updateNodeAfterCollapseChange(e,o){if(!1===e.visible)return 0;if(o.push(e),e.renderNodeCount=1,!e.collapsed)for(const s of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(s,o);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const o=e.renderNodeCount,s=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,s),this._updateAncestorsRenderNodeCount(e.parent,s.length-o),s}_updateNodeAfterFilterChange(e,o,s,l=!0){let d;if(e!==this.root){if(d=this._filterNode(e,o),0===d)return e.visible=!1,e.renderNodeCount=0,!1;l&&s.push(e)}const u=s.length;e.renderNodeCount=e===this.root?0:1;let g=!1;if(e.collapsed&&0===d)e.visibleChildrenCount=0;else{let o=0;for(const u of e.children)g=this._updateNodeAfterFilterChange(u,d,s,l&&!e.collapsed)||g,u.visible&&(u.visibleChildIndex=o++);e.visibleChildrenCount=o}return e!==this.root&&(e.visible=2===d?g:1===d,e.visibility=d),e.visible?e.collapsed||(e.renderNodeCount+=s.length-u):(e.renderNodeCount=0,l&&s.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,o){if(0!==o)while(e)e.renderNodeCount+=o,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,o){const s=this.filter?this.filter.filter(e.element,o):1;return"boolean"===typeof s?(e.filterData=void 0,s?1:0):isFilterResult(s)?(e.filterData=s.data,getVisibleState(s.visibility)):(e.filterData=void 0,getVisibleState(s))}hasTreeNode(e,o=this.root){if(!e||0===e.length)return!0;const[s,...l]=e;return!(s<0||s>o.children.length)&&this.hasTreeNode(l,o.children[s])}getTreeNode(e,o=this.root){if(!e||0===e.length)return o;const[s,...l]=e;if(s<0||s>o.children.length)throw new TreeError(this.user,"Invalid tree location");return this.getTreeNode(l,o.children[s])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:o,listIndex:s,revealed:l,visible:d}=this.getParentNodeWithListIndex(e),u=e[e.length-1];if(u<0||u>o.children.length)throw new TreeError(this.user,"Invalid tree location");const g=o.children[u];return{node:g,listIndex:s,revealed:l,visible:d&&g.visible}}getParentNodeWithListIndex(e,o=this.root,s=0,l=!0,d=!0){const[u,...g]=e;if(u<0||u>o.children.length)throw new TreeError(this.user,"Invalid tree location");for(let p=0;p<u;p++)s+=o.children[p].renderNodeCount;return l=l&&!o.collapsed,d=d&&o.visible,0===g.length?{parentNode:o,listIndex:s,revealed:l,visible:d}:this.getParentNodeWithListIndex(g,o.children[u],s+1,l,d)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const o=[];let s=e;while(s.parent)o.push(s.parent.children.indexOf(s)),s=s.parent;return o.reverse()}getParentNodeLocation(e){return 0===e.length?void 0:1===e.length?[]:(0,d.JH)(e)[0]}getFirstElementChild(e){const o=this.getTreeNode(e);if(0!==o.children.length)return o.children[0].element}}var k,N=s(3046),D=s(6626),E=s(5392),T=s(9870),I=s(1432),A=s(3580);class TreeElementsDragAndDropData extends C.kX{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function asTreeDragAndDropData(e){return e instanceof C.kX?new TreeElementsDragAndDropData(e):e}class TreeNodeListDragAndDrop{constructor(e,o){this.modelProvider=e,this.dnd=o,this.autoExpandDisposable=p.JT.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,o){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),o)}onDragStart(e,o){this.dnd.onDragStart&&this.dnd.onDragStart(asTreeDragAndDropData(e),o)}onDragOver(e,o,s,l,u=!0){const g=this.dnd.onDragOver(asTreeDragAndDropData(e),o&&o.element,s,l),p=this.autoExpandNode!==o;if(p&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=o),"undefined"===typeof o)return g;if(p&&"boolean"!==typeof g&&g.autoExpand&&(this.autoExpandDisposable=(0,y.Vg)((()=>{const e=this.modelProvider(),s=e.getNodeLocation(o);e.isCollapsed(s)&&e.setCollapsed(s,!1),this.autoExpandNode=void 0}),500)),"boolean"===typeof g||!g.accept||"undefined"===typeof g.bubble||g.feedback){if(!u){const e="boolean"===typeof g?g:g.accept,o="boolean"===typeof g?void 0:g.effect;return{accept:e,effect:o,feedback:[s]}}return g}if(1===g.bubble){const s=this.modelProvider(),d=s.getNodeLocation(o),u=s.getParentNodeLocation(d),g=s.getNode(u),p=u&&s.getListIndex(u);return this.onDragOver(e,g,p,l,!1)}const m=this.modelProvider(),f=m.getNodeLocation(o),_=m.getListIndex(f),C=m.getListRenderCount(f);return Object.assign(Object.assign({},g),{feedback:(0,d.w6)(_,_+C)})}drop(e,o,s,l){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(asTreeDragAndDropData(e),o&&o.element,s,l)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function asListOptions(e,o){return o&&Object.assign(Object.assign({},o),{identityProvider:o.identityProvider&&{getId(e){return o.identityProvider.getId(e.element)}},dnd:o.dnd&&new TreeNodeListDragAndDrop(e,o.dnd),multipleSelectionController:o.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return o.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return o.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:o.accessibilityProvider&&Object.assign(Object.assign({},o.accessibilityProvider),{getSetSize(o){const s=e(),l=s.getNodeLocation(o),d=s.getParentNodeLocation(l),u=s.getNode(d);return u.visibleChildrenCount},getPosInSet(e){return e.visibleChildIndex+1},isChecked:o.accessibilityProvider&&o.accessibilityProvider.isChecked?e=>o.accessibilityProvider.isChecked(e.element):void 0,getRole:o.accessibilityProvider&&o.accessibilityProvider.getRole?e=>o.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel(e){return o.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return o.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:o.accessibilityProvider&&o.accessibilityProvider.getWidgetRole?()=>o.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:o.accessibilityProvider&&o.accessibilityProvider.getAriaLevel?e=>o.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:o.accessibilityProvider.getActiveDescendantId&&(e=>o.accessibilityProvider.getActiveDescendantId(e.element))}),keyboardNavigationLabelProvider:o.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},o.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return o.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),enableKeyboardNavigation:o.simpleKeyboardNavigation})}class ComposedTreeDelegate{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,o){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,o)}}(function(e){e["None"]="none",e["OnHover"]="onHover",e["Always"]="always"})(k||(k={}));class EventCollection{constructor(e,o=[]){this._elements=o,this.onDidChange=g.ju.forEach(e,(e=>this._elements=e))}get elements(){return this._elements}}class TreeRenderer{constructor(e,o,s,l,d={}){this.renderer=e,this.modelProvider=o,this.activeNodes=l,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=TreeRenderer.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new D.r,this.activeIndentNodes=new Set,this.indentGuidesDisposable=p.JT.None,this.disposables=new p.SL,this.templateId=e.templateId,this.updateOptions(d),g.ju.map(s,(e=>e.node))(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if("undefined"!==typeof e.indent&&(this.indent=(0,T.uZ)(e.indent,0,40)),"undefined"!==typeof e.renderIndentGuides){const o=e.renderIndentGuides!==k.None;if(o!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=o,this.indentGuidesDisposable.dispose(),o)){const e=new p.SL;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}"undefined"!==typeof e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const o=(0,l.R3)(e,(0,l.$)(".monaco-tl-row")),s=(0,l.R3)(o,(0,l.$)(".monaco-tl-indent")),d=(0,l.R3)(o,(0,l.$)(".monaco-tl-twistie")),u=(0,l.R3)(o,(0,l.$)(".monaco-tl-contents")),g=this.renderer.renderTemplate(u);return{container:e,indent:s,twistie:d,indentGuidesDisposable:p.JT.None,templateData:g}}renderElement(e,o,s,l){"number"===typeof l&&(this.renderedNodes.set(e,{templateData:s,height:l}),this.renderedElements.set(e.element,e));const d=TreeRenderer.DefaultIndent+(e.depth-1)*this.indent;s.twistie.style.paddingLeft=`${d}px`,s.indent.style.width=d+this.indent-16+"px",this.renderTwistie(e,s),"number"===typeof l&&this.renderIndentGuides(e,s),this.renderer.renderElement(e,o,s.templateData,l)}disposeElement(e,o,s,l){s.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,o,s.templateData,l),"number"===typeof l&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const o=this.renderedElements.get(e);o&&this.onDidChangeNodeTwistieState(o)}onDidChangeNodeTwistieState(e){const o=this.renderedNodes.get(e);o&&(this.renderTwistie(e,o.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,o.templateData))}renderTwistie(e,o){o.twistie.classList.remove(...N.lA.treeItemExpanded.classNamesArray);let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,o.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||o.twistie.classList.add(...N.lA.treeItemExpanded.classNamesArray),o.twistie.classList.add("collapsible"),o.twistie.classList.toggle("collapsed",e.collapsed)):o.twistie.classList.remove("collapsible","collapsed"),e.collapsible?o.container.setAttribute("aria-expanded",String(!e.collapsed)):o.container.removeAttribute("aria-expanded")}renderIndentGuides(e,o){if((0,l.PO)(o.indent),o.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const s=new p.SL,d=this.modelProvider();let u=e;while(1){const e=d.getNodeLocation(u),g=d.getParentNodeLocation(e);if(!g)break;const m=d.getNode(g),f=(0,l.$)(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(m)&&f.classList.add("active"),0===o.indent.childElementCount?o.indent.appendChild(f):o.indent.insertBefore(f,o.indent.firstElementChild),this.renderedIndentGuides.add(m,f),s.add((0,p.OF)((()=>this.renderedIndentGuides.delete(m,f)))),u=m}o.indentGuidesDisposable=s}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const o=new Set,s=this.modelProvider();e.forEach((e=>{const l=s.getNodeLocation(e);try{const d=s.getParentNodeLocation(l);e.collapsible&&e.children.length>0&&!e.collapsed?o.add(e):d&&o.add(s.getNode(d))}catch(d){}})),this.activeIndentNodes.forEach((e=>{o.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.remove("active")))})),o.forEach((e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.add("active")))})),this.activeIndentNodes=o}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,p.B9)(this.disposables)}}TreeRenderer.DefaultIndent=8;class TypeFilter{constructor(e,o,s){this.tree=e,this.keyboardNavigationLabelProvider=o,this._filter=s,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new p.SL,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,o){if(this._filter){const s=this._filter.filter(e,o);if(this.tree.options.simpleKeyboardNavigation)return s;let l;if(l="boolean"===typeof s?s?1:0:isFilterResult(s)?getVisibleState(s.visibility):s,0===l)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:E.CL.Default,visibility:!0};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),l=Array.isArray(s)?s:[s];for(const d of l){const e=d&&d.toString();if("undefined"===typeof e)return{data:E.CL.Default,visibility:!0};const o=(0,E.EW)(this._pattern,this._lowercasePattern,0,e,e.toLowerCase(),0,!0);if(o)return this._matchCount++,1===l.length?{data:o,visibility:!0}:{data:{label:e,score:o},visibility:!0}}return this.tree.options.filterOnType?2:{data:E.CL.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,p.B9)(this.disposables)}}class TypeFilterController{constructor(e,o,s,d,u){this.tree=e,this.view=s,this.filter=d,this.keyboardNavigationDelegate=u,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new g.Q5,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new g.Q5,this.enabledDisposables=new p.SL,this.disposables=new p.SL,this.domNode=(0,l.$)(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add((0,l.nm)(this.domNode,"dragstart",(()=>this.onDragStart()))),this.messageDomNode=(0,l.R3)(s.getHTMLElement(),(0,l.$)(".monaco-list-type-filter-message")),this.labelDomNode=(0,l.R3)(this.domNode,(0,l.$)("span.label"));const m=(0,l.R3)(this.domNode,(0,l.$)(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=(0,l.R3)(m,(0,l.$)("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add((0,l.nm)(this.filterOnTypeDomNode,"input",(()=>this.onDidChangeFilterOnType()))),this.clearDomNode=(0,l.R3)(m,(0,l.$)("button.clear"+N.lA.treeFilterClear.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=(0,A.N)("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,o.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),"undefined"!==typeof e.filterOnType&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),"undefined"!==typeof e.automaticKeyboardNavigation&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new w.Y(this.view.getHTMLElement(),"keydown")),o=g.ju.chain(e.event).filter((e=>!(0,m.cK)(e.target)||e.target===this.filterOnTypeDomNode)).filter((e=>"Dead"!==e.key&&!/^Media/.test(e.key))).map((e=>new S.y(e))).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter((()=>this.automaticKeyboardNavigation||this.triggered)).filter((e=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(e)&&!(18===e.keyCode||16===e.keyCode||15===e.keyCode||17===e.keyCode)||(this.pattern.length>0||this.triggered)&&(9===e.keyCode||1===e.keyCode)&&!e.altKey&&!e.ctrlKey&&!e.metaKey||1===e.keyCode&&(I.dz?e.altKey&&!e.metaKey:e.ctrlKey)&&!e.shiftKey)).forEach((e=>{e.stopPropagation(),e.preventDefault()})).event,s=this.enabledDisposables.add(new w.Y(this.clearDomNode,"click"));g.ju.chain(g.ju.any(o,s.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){"string"===typeof e?this.onInput(e):e instanceof MouseEvent||9===e.keyCode||1===e.keyCode&&(I.dz?e.altKey:e.ctrlKey)?this.onInput(""):1===e.keyCode?this.onInput(0===this.pattern.length?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const o=this.view.getHTMLElement();e&&!this.domNode.parentElement?o.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,(e=>!E.CL.isDefault(e.filterData)));const s=this.tree.getFocus();if(s.length>0){const e=s[0];null===this.tree.getRelativeTop(e)&&this.tree.reveal(e,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:o}=(0,l.i)(e),s=e.clientWidth,d=s/2,u=this.domNode.clientWidth,g=new p.SL;let m=this.positionClassName;const updatePosition=()=>{switch(m){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=s-u-6+"px";break}},onDragOver=e=>{e.preventDefault();const s=e.clientX-o;e.dataTransfer&&(e.dataTransfer.dropEffect="none"),m=s<d?"nw":"ne",updatePosition()},onDragEnd=()=>{this.positionClassName=m,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",(0,p.B9)(g)};updatePosition(),this.domNode.classList.remove(m),this.domNode.classList.add("dragging"),g.add((0,p.OF)((()=>this.domNode.classList.remove("dragging")))),g.add((0,l.nm)(document,"dragover",(e=>onDragOver(e)))),g.add((0,l.nm)(this.domNode,"dragend",(()=>onDragEnd()))),b.P$.CurrentDragAndDropData=new b.TN("vscode-ui"),g.add((0,p.OF)((()=>b.P$.CurrentDragAndDropData=void 0)))}onDidSpliceModel(){this._enabled&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...N.lA.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.classList.add(...N.lA.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.title=(0,A.N)("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...N.lA.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.classList.add(...N.lA.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.title=(0,A.N)("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=(0,A.N)("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=(0,A.N)("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"…"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!(this.enabled&&this.pattern&&!this.filterOnType)||(this.filter.totalCount>0&&this.filter.matchCount<=1||!E.CL.isDefault(e.filterData))}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),(0,p.B9)(this.disposables)}}function asTreeMouseEvent(e){let o=_.Unknown;return(0,l.uU)(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?o=_.Twistie:(0,l.uU)(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(o=_.Element),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:o}}function dfs(e,o){o(e),e.children.forEach((e=>dfs(e,o)))}class Trait{constructor(e,o){this.getFirstViewElementWithTrait=e,this.identityProvider=o,this.nodes=[],this._onDidChange=new g.Q5,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,o){!(null===o||void 0===o?void 0:o.__forceEvent)&&(0,d.fS)(this.nodes,e)||this._set(e,!1,o)}_set(e,o,s){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!o){const e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:s})}}get(){return this.elements||(this.elements=this.nodes.map((e=>e.element))),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:o}){if(!this.identityProvider){const e=this.createNodeSet(),visit=o=>e.delete(o);return o.forEach((e=>dfs(e,visit))),void this.set([...e.values()])}const s=new Set,deletedNodesVisitor=e=>s.add(this.identityProvider.getId(e.element).toString());o.forEach((e=>dfs(e,deletedNodesVisitor)));const l=new Map,insertedNodesVisitor=e=>l.set(this.identityProvider.getId(e.element).toString(),e);e.forEach((e=>dfs(e,insertedNodesVisitor)));const d=[];for(const u of this.nodes){const e=this.identityProvider.getId(u.element).toString(),o=s.has(e);if(o){const o=l.get(e);o&&d.push(o)}else d.push(u)}if(this.nodes.length>0&&0===d.length){const e=this.getFirstViewElementWithTrait();e&&d.push(e)}this._set(d,!0)}createNodeSet(){const e=new Set;for(const o of this.nodes)e.add(o);return e}}class TreeNodeListMouseController extends m.sx{constructor(e,o){super(e),this.tree=o}onViewPointer(e){if((0,m.cK)(e.browserEvent.target)||(0,m.hD)(e.browserEvent.target))return;const o=e.element;if(!o)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const s=e.browserEvent.target,l=s.classList.contains("monaco-tl-twistie")||s.classList.contains("monaco-icon-label")&&s.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let d=!1;if(d="function"===typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(o.element):!!this.tree.expandOnlyOnTwistieClick,d&&!l&&2!==e.browserEvent.detail)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e);if(o.collapsible){const s=this.tree.model,u=s.getNodeLocation(o),g=e.browserEvent.altKey;if(this.tree.setFocus([u]),s.setCollapsed(u,void 0,g),d&&l)return}super.onViewPointer(e)}onDoubleClick(e){const o=e.browserEvent.target.classList.contains("monaco-tl-twistie");!o&&this.tree.expandOnDoubleClick&&super.onDoubleClick(e)}}class TreeNodeList extends m.aV{constructor(e,o,s,l,d,u,g,p){super(e,o,s,l,p),this.focusTrait=d,this.selectionTrait=u,this.anchorTrait=g}createMouseController(e){return new TreeNodeListMouseController(this,e.tree)}splice(e,o,s=[]){if(super.splice(e,o,s),0===s.length)return;const l=[],u=[];let g;s.forEach(((o,s)=>{this.focusTrait.has(o)&&l.push(e+s),this.selectionTrait.has(o)&&u.push(e+s),this.anchorTrait.has(o)&&(g=e+s)})),l.length>0&&super.setFocus((0,d.EB)([...super.getFocus(),...l])),u.length>0&&super.setSelection((0,d.EB)([...super.getSelection(),...u])),"number"===typeof g&&super.setAnchor(g)}setFocus(e,o,s=!1){super.setFocus(e,o),s||this.focusTrait.set(e.map((e=>this.element(e))),o)}setSelection(e,o,s=!1){super.setSelection(e,o),s||this.selectionTrait.set(e.map((e=>this.element(e))),o)}setAnchor(e,o=!1){super.setAnchor(e),o||("undefined"===typeof e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class AbstractTree{constructor(e,o,s,d,u={}){this._user=e,this._options=u,this.eventBufferer=new g.E7,this.disposables=new p.SL,this._onWillRefilter=new g.Q5,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new g.Q5;const f=new ComposedTreeDelegate(s),_=new g.ZD,C=new g.ZD,b=new EventCollection(C.event);this.renderers=d.map((e=>new TreeRenderer(e,(()=>this.model),_.event,b,u)));for(let l of this.renderers)this.disposables.add(l);let w;u.keyboardNavigationLabelProvider&&(w=new TypeFilter(this,u.keyboardNavigationLabelProvider,u.filter),u=Object.assign(Object.assign({},u),{filter:w}),this.disposables.add(w)),this.focus=new Trait((()=>this.view.getFocusedElements()[0]),u.identityProvider),this.selection=new Trait((()=>this.view.getSelectedElements()[0]),u.identityProvider),this.anchor=new Trait((()=>this.view.getAnchorElement()),u.identityProvider),this.view=new TreeNodeList(e,o,f,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},asListOptions((()=>this.model),u)),{tree:this})),this.model=this.createModel(e,this.view,u),_.input=this.model.onDidChangeCollapseState;const y=g.ju.forEach(this.model.onDidSplice,(e=>{this.eventBufferer.bufferEvents((()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)}))}));if(y((()=>null),null,this.disposables),C.input=g.ju.chain(g.ju.any(y,this.focus.onDidChange,this.selection.onDidChange)).debounce((()=>null),0).map((()=>{const e=new Set;for(const o of this.focus.getNodes())e.add(o);for(const o of this.selection.getNodes())e.add(o);return[...e.values()]})).event,!1!==u.keyboardSupport){const e=g.ju.chain(this.view.onKeyDown).filter((e=>!(0,m.cK)(e.target))).map((e=>new S.y(e)));e.filter((e=>15===e.keyCode)).on(this.onLeftArrow,this,this.disposables),e.filter((e=>17===e.keyCode)).on(this.onRightArrow,this,this.disposables),e.filter((e=>10===e.keyCode)).on(this.onSpace,this,this.disposables)}if(u.keyboardNavigationLabelProvider){const e=u.keyboardNavigationDelegate||m.WK;this.typeFilterController=new TypeFilterController(this,this.model,this.view,w,e),this.focusNavigationFilter=e=>this.typeFilterController.shouldAllowFocus(e),this.disposables.add(this.typeFilterController)}this.styleElement=(0,l.dS)(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===k.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return g.ju.map(this.view.onMouseDblClick,asTreeMouseEvent)}get onPointer(){return g.ju.map(this.view.onPointer,asTreeMouseEvent)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return g.ju.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return"undefined"===typeof this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return"undefined"===typeof this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const o of this.renderers)o.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===k.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,o){this.view.layout(e,o)}style(e){const o=`.${this.view.domId}`,s=[];e.treeIndentGuidesStroke&&(s.push(`.monaco-list${o}:hover .monaco-tl-indent > .indent-guide, .monaco-list${o}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),s.push(`.monaco-list${o} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=s.join("\n"),this.view.style(e)}getParentElement(e){const o=this.model.getParentNodeLocation(e),s=this.model.getNode(o);return s.element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,o=!1){return this.model.setCollapsed(e,!0,o)}expand(e,o=!1){return this.model.setCollapsed(e,!1,o)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,o){return this.model.setCollapsible(e,o)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,o){const s=e.map((e=>this.model.getNode(e)));this.selection.set(s,o);const l=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setSelection(l,o,!0)}getSelection(){return this.selection.get()}setFocus(e,o){const s=e.map((e=>this.model.getNode(e)));this.focus.set(s,o);const l=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setFocus(l,o,!0)}focusNext(e=1,o=!1,s,l=this.focusNavigationFilter){this.view.focusNext(e,o,s,l)}getFocus(){return this.focus.get()}reveal(e,o){this.model.expandTo(e);const s=this.model.getListIndex(e);-1!==s&&this.view.reveal(s,o)}getRelativeTop(e){const o=this.model.getListIndex(e);return-1===o?null:this.view.getRelativeTop(o)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const o=this.view.getFocusedElements();if(0===o.length)return;const s=o[0],l=this.model.getNodeLocation(s),d=this.model.setCollapsed(l,!0);if(!d){const e=this.model.getParentNodeLocation(l);if(!e)return;const o=this.model.getListIndex(e);this.view.reveal(o),this.view.setFocus([o])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const o=this.view.getFocusedElements();if(0===o.length)return;const s=o[0],l=this.model.getNodeLocation(s),d=this.model.setCollapsed(l,!1);if(!d){if(!s.children.some((e=>e.visible)))return;const[e]=this.view.getFocus(),o=e+1;this.view.reveal(o),this.view.setFocus([o])}}onSpace(e){e.preventDefault(),e.stopPropagation();const o=this.view.getFocusedElements();if(0===o.length)return;const s=o[0],l=this.model.getNodeLocation(s),d=e.browserEvent.altKey;this.model.setCollapsed(l,void 0,d)}dispose(){(0,p.B9)(this.disposables),this.view.dispose()}}class ObjectTreeModel{constructor(e,o,s={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new IndexTreeModel(e,o,null,s),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,s.sorter&&(this.sorter={compare(e,o){return s.sorter.compare(e.element,o.element)}}),this.identityProvider=s.identityProvider}setChildren(e,o=x.$.empty(),s={}){const l=this.getElementLocation(e);this._setChildren(l,this.preserveCollapseState(o),s)}_setChildren(e,o=x.$.empty(),s){const l=new Set,d=new Set,onDidCreateNode=e=>{var o;if(null===e.element)return;const u=e;if(l.add(u.element),this.nodes.set(u.element,u),this.identityProvider){const e=this.identityProvider.getId(u.element).toString();d.add(e),this.nodesByIdentity.set(e,u)}null===(o=s.onDidCreateNode)||void 0===o||o.call(s,u)},onDidDeleteNode=e=>{var o;if(null===e.element)return;const u=e;if(l.has(u.element)||this.nodes.delete(u.element),this.identityProvider){const e=this.identityProvider.getId(u.element).toString();d.has(e)||this.nodesByIdentity.delete(e)}null===(o=s.onDidDeleteNode)||void 0===o||o.call(s,u)};this.model.splice([...e,0],Number.MAX_VALUE,o,Object.assign(Object.assign({},s),{onDidCreateNode:onDidCreateNode,onDidDeleteNode:onDidDeleteNode}))}preserveCollapseState(e=x.$.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),x.$.map(e,(e=>{let o=this.nodes.get(e.element);if(!o&&this.identityProvider){const s=this.identityProvider.getId(e.element).toString();o=this.nodesByIdentity.get(s)}if(!o)return Object.assign(Object.assign({},e),{children:this.preserveCollapseState(e.children)});const s="boolean"===typeof e.collapsible?e.collapsible:o.collapsible,l="undefined"!==typeof e.collapsed?e.collapsed:o.collapsed;return Object.assign(Object.assign({},e),{collapsible:s,collapsed:l,children:this.preserveCollapseState(e.children)})}))}rerender(e){const o=this.getElementLocation(e);this.model.rerender(o)}getFirstElementChild(e=null){const o=this.getElementLocation(e);return this.model.getFirstElementChild(o)}has(e){return this.nodes.has(e)}getListIndex(e){const o=this.getElementLocation(e);return this.model.getListIndex(o)}getListRenderCount(e){const o=this.getElementLocation(e);return this.model.getListRenderCount(o)}isCollapsible(e){const o=this.getElementLocation(e);return this.model.isCollapsible(o)}setCollapsible(e,o){const s=this.getElementLocation(e);return this.model.setCollapsible(s,o)}isCollapsed(e){const o=this.getElementLocation(e);return this.model.isCollapsed(o)}setCollapsed(e,o,s){const l=this.getElementLocation(e);return this.model.setCollapsed(l,o,s)}expandTo(e){const o=this.getElementLocation(e);this.model.expandTo(o)}refilter(){this.model.refilter()}getNode(e=null){if(null===e)return this.model.getNode(this.model.rootRef);const o=this.nodes.get(e);if(!o)throw new TreeError(this.user,`Tree element not found: ${e}`);return o}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new TreeError(this.user,"Invalid getParentNodeLocation call");const o=this.nodes.get(e);if(!o)throw new TreeError(this.user,`Tree element not found: ${e}`);const s=this.model.getNodeLocation(o),l=this.model.getParentNodeLocation(s),d=this.model.getNode(l);return d.element}getElementLocation(e){if(null===e)return[];const o=this.nodes.get(e);if(!o)throw new TreeError(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(o)}}function noCompress(e){const o=[e.element],s=e.incompressible||!1;return{element:{elements:o,incompressible:s},children:x.$.map(x.$.from(e.children),noCompress),collapsible:e.collapsible,collapsed:e.collapsed}}function compress(e){const o=[e.element],s=e.incompressible||!1;let l,d;while(1){if([d,l]=x.$.consume(x.$.from(e.children),2),1!==d.length)break;if(d[0].incompressible)break;e=d[0],o.push(e.element)}return{element:{elements:o,incompressible:s},children:x.$.map(x.$.concat(d,l),compress),collapsible:e.collapsible,collapsed:e.collapsed}}function _decompress(e,o=0){let s;return s=o<e.element.elements.length-1?[_decompress(e,o+1)]:x.$.map(x.$.from(e.children),(e=>_decompress(e,0))),0===o&&e.element.incompressible?{element:e.element.elements[o],children:s,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[o],children:s,collapsible:e.collapsible,collapsed:e.collapsed}}function decompress(e){return _decompress(e,0)}function splice(e,o,s){return e.element===o?Object.assign(Object.assign({},e),{children:s}):Object.assign(Object.assign({},e),{children:x.$.map(x.$.from(e.children),(e=>splice(e,o,s)))})}const wrapIdentityProvider=e=>({getId(o){return o.elements.map((o=>e.getId(o).toString())).join("\0")}});class CompressedObjectTreeModel{constructor(e,o,s={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new ObjectTreeModel(e,o,s),this.enabled="undefined"===typeof s.compressionEnabled||s.compressionEnabled,this.identityProvider=s.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,o=x.$.empty(),s){const l=s.diffIdentityProvider&&wrapIdentityProvider(s.diffIdentityProvider);if(null===e){const e=x.$.map(o,this.enabled?compress:noCompress);return void this._setChildren(null,e,{diffIdentityProvider:l,diffDepth:1/0})}const d=this.nodes.get(e);if(!d)throw new Error("Unknown compressed tree node");const u=this.model.getNode(d),g=this.model.getParentNodeLocation(d),p=this.model.getNode(g),m=decompress(u),f=splice(m,e,o),_=(this.enabled?compress:noCompress)(f),C=p.children.map((e=>e===u?_:e));this._setChildren(p.element,C,{diffIdentityProvider:l,diffDepth:u.depth-p.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const o=this.model.getNode(),s=o.children,l=x.$.map(s,decompress),d=x.$.map(l,e?compress:noCompress);this._setChildren(null,d,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,o,s){const l=new Set,onDidCreateNode=e=>{for(const o of e.element.elements)l.add(o),this.nodes.set(o,e.element)},onDidDeleteNode=e=>{for(const o of e.element.elements)l.has(o)||this.nodes.delete(o)};this.model.setChildren(e,o,Object.assign(Object.assign({},s),{onDidCreateNode:onDidCreateNode,onDidDeleteNode:onDidDeleteNode}))}has(e){return this.nodes.has(e)}getListIndex(e){const o=this.getCompressedNode(e);return this.model.getListIndex(o)}getListRenderCount(e){const o=this.getCompressedNode(e);return this.model.getListRenderCount(o)}getNode(e){if("undefined"===typeof e)return this.model.getNode();const o=this.getCompressedNode(e);return this.model.getNode(o)}getNodeLocation(e){const o=this.model.getNodeLocation(e);return null===o?null:o.elements[o.elements.length-1]}getParentNodeLocation(e){const o=this.getCompressedNode(e),s=this.model.getParentNodeLocation(o);return null===s?null:s.elements[s.elements.length-1]}getFirstElementChild(e){const o=this.getCompressedNode(e);return this.model.getFirstElementChild(o)}isCollapsible(e){const o=this.getCompressedNode(e);return this.model.isCollapsible(o)}setCollapsible(e,o){const s=this.getCompressedNode(e);return this.model.setCollapsible(s,o)}isCollapsed(e){const o=this.getCompressedNode(e);return this.model.isCollapsed(o)}setCollapsed(e,o,s){const l=this.getCompressedNode(e);return this.model.setCollapsed(l,o,s)}expandTo(e){const o=this.getCompressedNode(e);this.model.expandTo(o)}rerender(e){const o=this.getCompressedNode(e);this.model.rerender(o)}refilter(){this.model.refilter()}getCompressedNode(e){if(null===e)return null;const o=this.nodes.get(e);if(!o)throw new TreeError(this.user,`Tree element not found: ${e}`);return o}}const DefaultElementMapper=e=>e[e.length-1];class CompressedTreeNodeWrapper{constructor(e,o){this.unwrapper=e,this.node=o}get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((e=>new CompressedTreeNodeWrapper(this.unwrapper,e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function mapList(e,o){return{splice(s,l,d){o.splice(s,l,d.map((o=>e.map(o))))},updateElementHeight(e,s){o.updateElementHeight(e,s)}}}function mapOptions(e,o){return Object.assign(Object.assign({},o),{identityProvider:o.identityProvider&&{getId(s){return o.identityProvider.getId(e(s))}},sorter:o.sorter&&{compare(e,s){return o.sorter.compare(e.elements[0],s.elements[0])}},filter:o.filter&&{filter(s,l){return o.filter.filter(e(s),l)}}})}class CompressibleObjectTreeModel{constructor(e,o,s={}){this.rootRef=null,this.elementMapper=s.elementMapper||DefaultElementMapper;const compressedNodeUnwrapper=e=>this.elementMapper(e.elements);this.nodeMapper=new WeakMapper((e=>new CompressedTreeNodeWrapper(compressedNodeUnwrapper,e))),this.model=new CompressedObjectTreeModel(e,mapList(this.nodeMapper,o),mapOptions(compressedNodeUnwrapper,s))}get onDidSplice(){return g.ju.map(this.model.onDidSplice,(({insertedNodes:e,deletedNodes:o})=>({insertedNodes:e.map((e=>this.nodeMapper.map(e))),deletedNodes:o.map((e=>this.nodeMapper.map(e)))})))}get onDidChangeCollapseState(){return g.ju.map(this.model.onDidChangeCollapseState,(({node:e,deep:o})=>({node:this.nodeMapper.map(e),deep:o})))}get onDidChangeRenderNodeCount(){return g.ju.map(this.model.onDidChangeRenderNodeCount,(e=>this.nodeMapper.map(e)))}setChildren(e,o=x.$.empty(),s={}){this.model.setChildren(e,o,s)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const o=this.model.getFirstElementChild(e);return null===o||"undefined"===typeof o?o:this.elementMapper(o.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,o){return this.model.setCollapsible(e,o)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,o,s){return this.model.setCollapsed(e,o,s)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var M=s(9898),__decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g};class ObjectTree extends AbstractTree{constructor(e,o,s,l,d={}){super(e,o,s,l,d),this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,o=x.$.empty(),s){this.model.setChildren(e,o,s)}rerender(e){void 0!==e?this.model.rerender(e):this.view.rerender()}hasElement(e){return this.model.has(e)}createModel(e,o,s){return new ObjectTreeModel(e,o,s)}}class CompressibleRenderer{constructor(e,o){this._compressedTreeNodeProvider=e,this.renderer=o,this.templateId=o.templateId,o.onDidChangeTwistieState&&(this.onDidChangeTwistieState=o.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){const o=this.renderer.renderTemplate(e);return{compressedTreeNode:void 0,data:o}}renderElement(e,o,s,l){const d=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);1===d.element.elements.length?(s.compressedTreeNode=void 0,this.renderer.renderElement(e,o,s.data,l)):(s.compressedTreeNode=d,this.renderer.renderCompressedElements(d,o,s.data,l))}disposeElement(e,o,s,l){s.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(s.compressedTreeNode,o,s.data,l):this.renderer.disposeElement&&this.renderer.disposeElement(e,o,s.data,l)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,o){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,o)}}function asObjectTreeOptions(e,o){return o&&Object.assign(Object.assign({},o),{keyboardNavigationLabelProvider:o.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(s){let l;try{l=e().getCompressedTreeNode(s)}catch(d){return o.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(s)}return 1===l.element.elements.length?o.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(s):o.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(l.element.elements)}}})}__decorate([M.H],CompressibleRenderer.prototype,"compressedTreeNodeProvider",null);class CompressibleObjectTree extends ObjectTree{constructor(e,o,s,l,d={}){const compressedTreeNodeProvider=()=>this,u=l.map((e=>new CompressibleRenderer(compressedTreeNodeProvider,e)));super(e,o,s,u,asObjectTreeOptions(compressedTreeNodeProvider,d))}setChildren(e,o=x.$.empty(),s){this.model.setChildren(e,o,s)}createModel(e,o,s){return new CompressibleObjectTreeModel(e,o,s)}updateOptions(e={}){super.updateOptions(e),"undefined"!==typeof e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var R=s(7301),P=s(8401),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};function createAsyncDataTreeNode(e){return Object.assign(Object.assign({},e),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function isAncestor(e,o){return!!o.parent&&(o.parent===e||isAncestor(e,o.parent))}function intersects(e,o){return e===o||isAncestor(e,o)||isAncestor(o,e)}class AsyncDataTreeNodeWrapper{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map((e=>new AsyncDataTreeNodeWrapper(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class AsyncDataTreeRenderer{constructor(e,o,s){this.renderer=e,this.nodeMapper=o,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){const o=this.renderer.renderTemplate(e);return{templateData:o}}renderElement(e,o,s,l){this.renderer.renderElement(this.nodeMapper.map(e),o,s.templateData,l)}renderTwistie(e,o){return e.slow?(o.classList.add(...N.lA.treeItemLoading.classNamesArray),!0):(o.classList.remove(...N.lA.treeItemLoading.classNamesArray),!1)}disposeElement(e,o,s,l){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),o,s.templateData,l)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function asTreeEvent(e){return{browserEvent:e.browserEvent,elements:e.elements.map((e=>e.element))}}function asyncDataTree_asTreeMouseEvent(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}class AsyncDataTreeElementsDragAndDropData extends C.kX{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function asAsyncDataTreeDragAndDropData(e){return e instanceof C.kX?new AsyncDataTreeElementsDragAndDropData(e):e}class AsyncDataTreeNodeListDragAndDrop{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,o){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),o)}onDragStart(e,o){this.dnd.onDragStart&&this.dnd.onDragStart(asAsyncDataTreeDragAndDropData(e),o)}onDragOver(e,o,s,l,d=!0){return this.dnd.onDragOver(asAsyncDataTreeDragAndDropData(e),o&&o.element,s,l)}drop(e,o,s,l){this.dnd.drop(asAsyncDataTreeDragAndDropData(e),o&&o.element,s,l)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function asyncDataTree_asObjectTreeOptions(e){return e&&Object.assign(Object.assign({},e),{collapseByDefault:!0,identityProvider:e.identityProvider&&{getId(o){return e.identityProvider.getId(o.element)}},dnd:e.dnd&&new AsyncDataTreeNodeListDragAndDrop(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(o){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},o),{element:o.element}))},isSelectionRangeChangeEvent(o){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},o),{element:o.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?o=>e.accessibilityProvider.getRole(o.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?o=>{var s;return!!(null===(s=e.accessibilityProvider)||void 0===s?void 0:s.isChecked(o.element))}:void 0,getAriaLabel(o){return e.accessibilityProvider.getAriaLabel(o.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(o=>e.accessibilityProvider.getAriaLevel(o.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(o=>e.accessibilityProvider.getActiveDescendantId(o.element))}),filter:e.filter&&{filter(o,s){return e.filter.filter(o.element,s)}},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(o){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(o.element)}}),sorter:void 0,expandOnlyOnTwistieClick:"undefined"===typeof e.expandOnlyOnTwistieClick?void 0:"function"!==typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:o=>e.expandOnlyOnTwistieClick(o.element),additionalScrollHeight:e.additionalScrollHeight})}function asyncDataTree_dfs(e,o){o(e),e.children.forEach((e=>asyncDataTree_dfs(e,o)))}class AsyncDataTree{constructor(e,o,s,l,d,u={}){this.user=e,this.dataSource=d,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new g.Q5,this._onDidChangeNodeSlowState=new g.Q5,this.nodeMapper=new WeakMapper((e=>new AsyncDataTreeNodeWrapper(e))),this.disposables=new p.SL,this.identityProvider=u.identityProvider,this.autoExpandSingleChildren="undefined"!==typeof u.autoExpandSingleChildren&&u.autoExpandSingleChildren,this.sorter=u.sorter,this.collapseByDefault=u.collapseByDefault,this.tree=this.createTree(e,o,s,l,u),this.root=createAsyncDataTreeNode({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return g.ju.map(this.tree.onDidChangeFocus,asTreeEvent)}get onDidChangeSelection(){return g.ju.map(this.tree.onDidChangeSelection,asTreeEvent)}get onMouseDblClick(){return g.ju.map(this.tree.onMouseDblClick,asyncDataTree_asTreeMouseEvent)}get onPointer(){return g.ju.map(this.tree.onPointer,asyncDataTree_asTreeMouseEvent)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,o,s,l,d){const u=new ComposedTreeDelegate(s),g=l.map((e=>new AsyncDataTreeRenderer(e,this.nodeMapper,this._onDidChangeNodeSlowState.event))),p=asyncDataTree_asObjectTreeOptions(d)||{};return new ObjectTree(e,o,u,g,p)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,o){this.tree.layout(e,o)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,o){return __awaiter(this,void 0,void 0,(function*(){this.refreshPromises.forEach((e=>e.cancel())),this.refreshPromises.clear(),this.root.element=e;const s=o&&{viewState:o,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,s),s&&(this.tree.setFocus(s.focus),this.tree.setSelection(s.selection)),o&&"number"===typeof o.scrollTop&&(this.scrollTop=o.scrollTop)}))}_updateChildren(e=this.root.element,o=!0,s=!1,l,d){return __awaiter(this,void 0,void 0,(function*(){if("undefined"===typeof this.root.element)throw new TreeError(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield g.ju.toPromise(this._onDidRender.event));const u=this.getDataNode(e);if(yield this.refreshAndRenderNode(u,o,l,d),s)try{this.tree.rerender(u)}catch(p){}}))}rerender(e){if(void 0===e||e===this.root.element)return void this.tree.rerender();const o=this.getDataNode(e);this.tree.rerender(o)}getNode(e=this.root.element){const o=this.getDataNode(e),s=this.tree.getNode(o===this.root?null:o);return this.nodeMapper.map(s)}collapse(e,o=!1){const s=this.getDataNode(e);return this.tree.collapse(s===this.root?null:s,o)}expand(e,o=!1){return __awaiter(this,void 0,void 0,(function*(){if("undefined"===typeof this.root.element)throw new TreeError(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield g.ju.toPromise(this._onDidRender.event));const s=this.getDataNode(e);if(this.tree.hasElement(s)&&!this.tree.isCollapsible(s))return!1;if(s.refreshPromise&&(yield this.root.refreshPromise,yield g.ju.toPromise(this._onDidRender.event)),s!==this.root&&!s.refreshPromise&&!this.tree.isCollapsed(s))return!1;const l=this.tree.expand(s===this.root?null:s,o);return s.refreshPromise&&(yield this.root.refreshPromise,yield g.ju.toPromise(this._onDidRender.event)),l}))}setSelection(e,o){const s=e.map((e=>this.getDataNode(e)));this.tree.setSelection(s,o)}getSelection(){const e=this.tree.getSelection();return e.map((e=>e.element))}setFocus(e,o){const s=e.map((e=>this.getDataNode(e)));this.tree.setFocus(s,o)}getFocus(){const e=this.tree.getFocus();return e.map((e=>e.element))}reveal(e,o){this.tree.reveal(this.getDataNode(e),o)}getParentElement(e){const o=this.tree.getParentElement(this.getDataNode(e));return o&&o.element}getFirstElementChild(e=this.root.element){const o=this.getDataNode(e),s=this.tree.getFirstElementChild(o===this.root?null:o);return s&&s.element}getDataNode(e){const o=this.nodes.get(e===this.root.element?null:e);if(!o)throw new TreeError(this.user,`Data tree node not found: ${e}`);return o}refreshAndRenderNode(e,o,s,l){return __awaiter(this,void 0,void 0,(function*(){yield this.refreshNode(e,o,s),this.render(e,s,l)}))}refreshNode(e,o,s){return __awaiter(this,void 0,void 0,(function*(){let l;return this.subTreeRefreshPromises.forEach(((d,u)=>{!l&&intersects(u,e)&&(l=d.then((()=>this.refreshNode(e,o,s))))})),l||this.doRefreshSubTree(e,o,s)}))}doRefreshSubTree(e,o,s){return __awaiter(this,void 0,void 0,(function*(){let l;e.refreshPromise=new Promise((e=>l=e)),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally((()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}));try{const d=yield this.doRefreshNode(e,o,s);e.stale=!1,yield y.jT.settled(d.map((e=>this.doRefreshSubTree(e,o,s))))}finally{l()}}))}doRefreshNode(e,o,s){return __awaiter(this,void 0,void 0,(function*(){let l;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){const o=this.doGetChildren(e);if((0,P.TW)(o))l=Promise.resolve(o);else{const s=(0,y.Vs)(800);s.then((()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)}),(e=>null)),l=o.finally((()=>s.cancel()))}}else l=Promise.resolve(x.$.empty());try{const d=yield l;return this.setChildren(e,d,o,s)}catch(d){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),(0,R.n2)(d))return[];throw d}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}))}doGetChildren(e){let o=this.refreshPromises.get(e);if(o)return o;const s=this.dataSource.getChildren(e.element);return(0,P.TW)(s)?this.processChildren(s):(o=(0,y.PG)((()=>__awaiter(this,void 0,void 0,(function*(){return this.processChildren(yield s)})))),this.refreshPromises.set(e,o),o.finally((()=>{this.refreshPromises.delete(e)})))}_onDidChangeCollapseState({node:e,deep:o}){null!==e.element&&!e.collapsed&&e.element.stale&&(o?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(R.dL))}setChildren(e,o,s,l){const d=[...o];if(0===e.children.length&&0===d.length)return[];const u=new Map,g=new Map;for(const f of e.children)if(u.set(f.element,f),this.identityProvider){const e=this.tree.isCollapsed(f);g.set(f.id,{node:f,collapsed:e})}const p=[],m=d.map((o=>{const d=!!this.dataSource.hasChildren(o);if(!this.identityProvider){const s=createAsyncDataTreeNode({element:o,parent:e,hasChildren:d});return d&&this.collapseByDefault&&!this.collapseByDefault(o)&&(s.collapsedByDefault=!1,p.push(s)),s}const m=this.identityProvider.getId(o).toString(),f=g.get(m);if(f){const e=f.node;return u.delete(e.element),this.nodes.delete(e.element),this.nodes.set(o,e),e.element=o,e.hasChildren=d,s?f.collapsed?(e.children.forEach((e=>asyncDataTree_dfs(e,(e=>this.nodes.delete(e.element))))),e.children.splice(0,e.children.length),e.stale=!0):p.push(e):d&&this.collapseByDefault&&!this.collapseByDefault(o)&&(e.collapsedByDefault=!1,p.push(e)),e}const _=createAsyncDataTreeNode({element:o,parent:e,id:m,hasChildren:d});return l&&l.viewState.focus&&l.viewState.focus.indexOf(m)>-1&&l.focus.push(_),l&&l.viewState.selection&&l.viewState.selection.indexOf(m)>-1&&l.selection.push(_),l&&l.viewState.expanded&&l.viewState.expanded.indexOf(m)>-1?p.push(_):d&&this.collapseByDefault&&!this.collapseByDefault(o)&&(_.collapsedByDefault=!1,p.push(_)),_}));for(const f of u.values())asyncDataTree_dfs(f,(e=>this.nodes.delete(e.element)));for(const f of m)this.nodes.set(f.element,f);return e.children.splice(0,e.children.length,...m),e!==this.root&&this.autoExpandSingleChildren&&1===m.length&&0===p.length&&(m[0].collapsedByDefault=!1,p.push(m[0])),p}render(e,o,s){const l=e.children.map((e=>this.asTreeElement(e,o))),d=s&&Object.assign(Object.assign({},s),{diffIdentityProvider:s.diffIdentityProvider&&{getId(e){return s.diffIdentityProvider.getId(e.element)}}});this.tree.setChildren(e===this.root?null:e,l,d),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,o){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let s;return s=!(o&&o.viewState.expanded&&e.id&&o.viewState.expanded.indexOf(e.id)>-1)&&e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?x.$.map(e.children,(e=>this.asTreeElement(e,o))):[],collapsible:e.hasChildren,collapsed:s}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class CompressibleAsyncDataTreeNodeWrapper{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map((e=>e.element)),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((e=>new CompressibleAsyncDataTreeNodeWrapper(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class CompressibleAsyncDataTreeRenderer{constructor(e,o,s,l){this.renderer=e,this.nodeMapper=o,this.compressibleNodeMapperProvider=s,this.onDidChangeTwistieState=l,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){const o=this.renderer.renderTemplate(e);return{templateData:o}}renderElement(e,o,s,l){this.renderer.renderElement(this.nodeMapper.map(e),o,s.templateData,l)}renderCompressedElements(e,o,s,l){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),o,s.templateData,l)}renderTwistie(e,o){return e.slow?(o.classList.add(...N.lA.treeItemLoading.classNamesArray),!0):(o.classList.remove(...N.lA.treeItemLoading.classNamesArray),!1)}disposeElement(e,o,s,l){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),o,s.templateData,l)}disposeCompressedElements(e,o,s,l){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),o,s.templateData,l)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,p.B9)(this.disposables)}}function asCompressibleObjectTreeOptions(e){const o=e&&asyncDataTree_asObjectTreeOptions(e);return o&&Object.assign(Object.assign({},o),{keyboardNavigationLabelProvider:o.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},o.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(o){return e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(o.map((e=>e.element)))}})})}class CompressibleAsyncDataTree extends AsyncDataTree{constructor(e,o,s,l,d,u,g={}){super(e,o,s,d,u,g),this.compressionDelegate=l,this.compressibleNodeMapper=new WeakMapper((e=>new CompressibleAsyncDataTreeNodeWrapper(e))),this.filter=g.filter}createTree(e,o,s,l,d){const u=new ComposedTreeDelegate(s),g=l.map((e=>new CompressibleAsyncDataTreeRenderer(e,this.nodeMapper,(()=>this.compressibleNodeMapper),this._onDidChangeNodeSlowState.event))),p=asCompressibleObjectTreeOptions(d)||{};return new CompressibleObjectTree(e,o,u,g,p)}asTreeElement(e,o){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,o))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,o){if(!this.identityProvider)return super.render(e,o);const getId=e=>this.identityProvider.getId(e).toString(),getUncompressedIds=e=>{const o=new Set;for(const s of e){const e=this.tree.getCompressedTreeNode(s===this.root?null:s);if(e.element)for(const s of e.element.elements)o.add(getId(s.element))}return o},s=getUncompressedIds(this.tree.getSelection()),l=getUncompressedIds(this.tree.getFocus());super.render(e,o);const d=this.getSelection();let u=!1;const g=this.getFocus();let p=!1;const visit=e=>{const o=e.element;if(o)for(let m=0;m<o.elements.length;m++){const e=getId(o.elements[m].element),f=o.elements[o.elements.length-1].element;s.has(e)&&-1===d.indexOf(f)&&(d.push(f),u=!0),l.has(e)&&-1===g.indexOf(f)&&(g.push(f),p=!0)}e.children.forEach(visit)};visit(this.tree.getCompressedTreeNode(e===this.root?null:e)),u&&this.setSelection(d),p&&this.setFocus(g)}processChildren(e){return this.filter&&(e=x.$.filter(e,(e=>{const o=this.filter.filter(e,1),s=getVisibility(o);if(2===s)throw new Error("Recursive tree visibility not supported in async data compressed trees");return 1===s}))),super.processChildren(e)}}function getVisibility(e){return"boolean"===typeof e?e?1:0:isFilterResult(e)?getVisibleState(e.visibility):getVisibleState(e)}class DataTree extends AbstractTree{constructor(e,o,s,l,d,u={}){super(e,o,s,l,u),this.user=e,this.dataSource=d,this.identityProvider=u.identityProvider}createModel(e,o,s){return new ObjectTreeModel(e,o,s)}}var O=s(1106),F=s(3108),B=s(3193),W=s(8819),V=s(9282),H=s(2065),z=s(1847),U=s(9872),K=s(8810),j=s(7781),listService_decorate=function(e,o,s,l){var d,u=arguments.length,g=u<3?o:null===l?l=Object.getOwnPropertyDescriptor(o,s):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(e,o,s,l);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(g=(u<3?d(g):u>3?d(o,s,g):d(o,s))||g);return u>3&&g&&Object.defineProperty(o,s,g),g},__param=function(e,o){return function(s,l){o(s,l,e)}};const G=(0,H.yh)("listService");let q=class ListService{constructor(e){this._themeService=e,this.disposables=new p.SL,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var o,s;e!==this._lastFocusedWidget&&(null===(o=this._lastFocusedWidget)||void 0===o||o.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,null===(s=this._lastFocusedWidget)||void 0===s||s.getHTMLElement().classList.add("last-focused"))}register(e,o){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const e=new m.wD((0,l.dS)(),"");this.disposables.add((0,K.Jl)(e,this._themeService))}if(this.lists.some((o=>o.widget===e)))throw new Error("Cannot register the same widget multiple times");const s={widget:e,extraContextKeys:o};return this.lists.push(s),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),(0,p.F8)(e.onDidFocus((()=>this.setLastFocusedList(e))),(0,p.OF)((()=>this.lists.splice(this.lists.indexOf(s),1))),e.onDidDispose((()=>{this.lists=this.lists.filter((e=>e!==s)),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)})))}dispose(){this.disposables.dispose()}};q=listService_decorate([__param(0,j.XE)],q);const Q=new W.uy("listFocus",!0),Z=new W.uy("listSupportsMultiselect",!0),Y=W.Ao.and(Q,W.Ao.not(V.d0)),J=new W.uy("listHasSelectionOrFocus",!1),X=new W.uy("listDoubleSelection",!1),ee=new W.uy("listMultiSelection",!1),te=new W.uy("listSelectionNavigation",!1),ie=new W.uy("treeElementCanCollapse",!1),ne=new W.uy("treeElementHasParent",!1),oe=new W.uy("treeElementCanExpand",!1),se=new W.uy("treeElementHasChild",!1),re="listAutomaticKeyboardNavigation";function createScopedContextKeyService(e,o){const s=e.createScoped(o.getHTMLElement());return Q.bindTo(s),s}const ae="workbench.list.multiSelectModifier",le="workbench.list.openMode",ce="workbench.list.horizontalScrolling",de="workbench.list.keyboardNavigation",he="workbench.list.automaticKeyboardNavigation",ue="workbench.tree.indent",ge="workbench.tree.renderIndentGuides",pe="workbench.list.smoothScrolling",me="workbench.list.mouseWheelScrollSensitivity",fe="workbench.list.fastScrollSensitivity",_e="workbench.tree.expandMode";function useAltAsMultipleSelectionModifier(e){return"alt"===e.getValue(ae)}class MultipleSelectionController extends p.JT{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(ae)&&(this.useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(this.configurationService))})))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:(0,m.Zo)(e)}isSelectionRangeChangeEvent(e){return(0,m.wn)(e)}}function toWorkbenchListOptions(e,o,s){var l;const d=new p.SL,u=Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(e){return s.mightProducePrintableCharacter(e)}},smoothScrolling:Boolean(o.getValue(pe)),mouseWheelScrollSensitivity:o.getValue(me),fastScrollSensitivity:o.getValue(fe),multipleSelectionController:null!==(l=e.multipleSelectionController)&&void 0!==l?l:d.add(new MultipleSelectionController(o))});return[u,d]}let Ce=class WorkbenchList extends m.aV{constructor(e,o,s,l,d,u,g,p,m,f){const _="undefined"!==typeof d.horizontalScrolling?d.horizontalScrolling:Boolean(m.getValue(ce)),[C,b]=toWorkbenchListOptions(d,m,f);super(e,o,s,l,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},(0,K.o)(p.getColorTheme(),K.O2)),C),{horizontalScrolling:_})),this.disposables.add(b),this.contextKeyService=createScopedContextKeyService(u,this),this.themeService=p,this.listSupportsMultiSelect=Z.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==d.multipleSelectionSupport);const w=te.bindTo(this.contextKeyService);w.set(Boolean(d.selectionNavigation)),this.listHasSelectionOrFocus=J.bindTo(this.contextKeyService),this.listDoubleSelection=X.bindTo(this.contextKeyService),this.listMultiSelection=ee.bindTo(this.contextKeyService),this.horizontalScrolling=d.horizontalScrolling,this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(m),this.disposables.add(this.contextKeyService),this.disposables.add(g.register(this)),d.overrideStyles&&this.updateStyles(d.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),o=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||o.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),o=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||o.length>0)}))),this.disposables.add(m.onDidChangeConfiguration((e=>{e.affectsConfiguration(ae)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(m));let o={};if(e.affectsConfiguration(ce)&&void 0===this.horizontalScrolling){const e=Boolean(m.getValue(ce));o=Object.assign(Object.assign({},o),{horizontalScrolling:e})}if(e.affectsConfiguration(pe)){const e=Boolean(m.getValue(pe));o=Object.assign(Object.assign({},o),{smoothScrolling:e})}if(e.affectsConfiguration(me)){const e=m.getValue(me);o=Object.assign(Object.assign({},o),{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration(fe)){const e=m.getValue(fe);o=Object.assign(Object.assign({},o),{fastScrollSensitivity:e})}Object.keys(o).length>0&&this.updateOptions(o)}))),this.navigator=new ListResourceNavigator(this,Object.assign({configurationService:m},d)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var o;null===(o=this._styler)||void 0===o||o.dispose(),this._styler=(0,K.Jl)(this,this.themeService,e)}dispose(){var e;null===(e=this._styler)||void 0===e||e.dispose(),super.dispose()}};Ce=listService_decorate([__param(5,W.i6),__param(6,G),__param(7,j.XE),__param(8,F.Ui),__param(9,z.d)],Ce);let ve=class WorkbenchPagedList extends PagedList{constructor(e,o,s,l,d,u,g,m,f,_){const C="undefined"!==typeof d.horizontalScrolling?d.horizontalScrolling:Boolean(f.getValue(ce)),[b,w]=toWorkbenchListOptions(d,f,_);super(e,o,s,l,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},(0,K.o)(m.getColorTheme(),K.O2)),b),{horizontalScrolling:C})),this.disposables=new p.SL,this.disposables.add(w),this.contextKeyService=createScopedContextKeyService(u,this),this.themeService=m,this.horizontalScrolling=d.horizontalScrolling,this.listSupportsMultiSelect=Z.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==d.multipleSelectionSupport);const S=te.bindTo(this.contextKeyService);S.set(Boolean(d.selectionNavigation)),this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(f),this.disposables.add(this.contextKeyService),this.disposables.add(g.register(this)),d.overrideStyles&&this.updateStyles(d.overrideStyles),d.overrideStyles&&this.disposables.add((0,K.Jl)(this,m,d.overrideStyles)),this.disposables.add(f.onDidChangeConfiguration((e=>{e.affectsConfiguration(ae)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(f));let o={};if(e.affectsConfiguration(ce)&&void 0===this.horizontalScrolling){const e=Boolean(f.getValue(ce));o=Object.assign(Object.assign({},o),{horizontalScrolling:e})}if(e.affectsConfiguration(pe)){const e=Boolean(f.getValue(pe));o=Object.assign(Object.assign({},o),{smoothScrolling:e})}if(e.affectsConfiguration(me)){const e=f.getValue(me);o=Object.assign(Object.assign({},o),{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration(fe)){const e=f.getValue(fe);o=Object.assign(Object.assign({},o),{fastScrollSensitivity:e})}Object.keys(o).length>0&&this.updateOptions(o)}))),this.navigator=new ListResourceNavigator(this,Object.assign({configurationService:f},d)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var o;null===(o=this._styler)||void 0===o||o.dispose(),this._styler=(0,K.Jl)(this,this.themeService,e)}dispose(){var e;null===(e=this._styler)||void 0===e||e.dispose(),this.disposables.dispose(),super.dispose()}};ve=listService_decorate([__param(5,W.i6),__param(6,G),__param(7,j.XE),__param(8,F.Ui),__param(9,z.d)],ve);let be=class WorkbenchTable extends Table{constructor(e,o,s,l,d,u,g,p,m,f,_){const C="undefined"!==typeof u.horizontalScrolling?u.horizontalScrolling:Boolean(f.getValue(ce)),[b,w]=toWorkbenchListOptions(u,f,_);super(e,o,s,l,d,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},(0,K.o)(m.getColorTheme(),K.O2)),b),{horizontalScrolling:C})),this.disposables.add(w),this.contextKeyService=createScopedContextKeyService(g,this),this.themeService=m,this.listSupportsMultiSelect=Z.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==u.multipleSelectionSupport);const S=te.bindTo(this.contextKeyService);S.set(Boolean(u.selectionNavigation)),this.listHasSelectionOrFocus=J.bindTo(this.contextKeyService),this.listDoubleSelection=X.bindTo(this.contextKeyService),this.listMultiSelection=ee.bindTo(this.contextKeyService),this.horizontalScrolling=u.horizontalScrolling,this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(f),this.disposables.add(this.contextKeyService),this.disposables.add(p.register(this)),u.overrideStyles&&this.updateStyles(u.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),o=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||o.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),o=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||o.length>0)}))),this.disposables.add(f.onDidChangeConfiguration((e=>{e.affectsConfiguration(ae)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(f));let o={};if(e.affectsConfiguration(ce)&&void 0===this.horizontalScrolling){const e=Boolean(f.getValue(ce));o=Object.assign(Object.assign({},o),{horizontalScrolling:e})}if(e.affectsConfiguration(pe)){const e=Boolean(f.getValue(pe));o=Object.assign(Object.assign({},o),{smoothScrolling:e})}if(e.affectsConfiguration(me)){const e=f.getValue(me);o=Object.assign(Object.assign({},o),{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration(fe)){const e=f.getValue(fe);o=Object.assign(Object.assign({},o),{fastScrollSensitivity:e})}Object.keys(o).length>0&&this.updateOptions(o)}))),this.navigator=new TableResourceNavigator(this,Object.assign({configurationService:f},u)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var o;null===(o=this._styler)||void 0===o||o.dispose(),this._styler=(0,K.Jl)(this,this.themeService,e)}dispose(){var e;null===(e=this._styler)||void 0===e||e.dispose(),this.disposables.dispose(),super.dispose()}};be=listService_decorate([__param(6,W.i6),__param(7,G),__param(8,j.XE),__param(9,F.Ui),__param(10,z.d)],be);class ResourceNavigator extends p.JT{constructor(e,o){var s;super(),this.widget=e,this._onDidOpen=this._register(new g.Q5),this.onDidOpen=this._onDidOpen.event,this._register(g.ju.filter(this.widget.onDidChangeSelection,(e=>e.browserEvent instanceof KeyboardEvent))((e=>this.onSelectionFromKeyboard(e)))),this._register(this.widget.onPointer((e=>this.onPointer(e.element,e.browserEvent)))),this._register(this.widget.onMouseDblClick((e=>this.onMouseDblClick(e.element,e.browserEvent)))),"boolean"!==typeof(null===o||void 0===o?void 0:o.openOnSingleClick)&&(null===o||void 0===o?void 0:o.configurationService)?(this.openOnSingleClick="doubleClick"!==(null===o||void 0===o?void 0:o.configurationService.getValue(le)),this._register(null===o||void 0===o?void 0:o.configurationService.onDidChangeConfiguration((()=>{this.openOnSingleClick="doubleClick"!==(null===o||void 0===o?void 0:o.configurationService.getValue(le))})))):this.openOnSingleClick=null===(s=null===o||void 0===o?void 0:o.openOnSingleClick)||void 0===s||s}onSelectionFromKeyboard(e){if(1!==e.elements.length)return;const o=e.browserEvent,s="boolean"!==typeof o.preserveFocus||o.preserveFocus,l="boolean"===typeof o.pinned?o.pinned:!s,d=!1;this._open(this.getSelectedElement(),s,l,d,e.browserEvent)}onPointer(e,o){if(!this.openOnSingleClick)return;const s=2===o.detail;if(s)return;const l=1===o.button,d=!0,u=l,g=o.ctrlKey||o.metaKey||o.altKey;this._open(e,d,u,g,o)}onMouseDblClick(e,o){if(!o)return;const s=o.target,l=s.classList.contains("monaco-tl-twistie")||s.classList.contains("monaco-icon-label")&&s.classList.contains("folder-icon")&&o.offsetX<16;if(l)return;const d=!1,u=!0,g=o.ctrlKey||o.metaKey||o.altKey;this._open(e,d,u,g,o)}_open(e,o,s,l,d){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:o,pinned:s,revealIfVisible:!0},sideBySide:l,element:e,browserEvent:d})}}class ListResourceNavigator extends ResourceNavigator{constructor(e,o){super(e,o),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class TableResourceNavigator extends ResourceNavigator{constructor(e,o){super(e,o)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class TreeResourceNavigator extends ResourceNavigator{constructor(e,o){super(e,o)}getSelectedElement(){var e;return null!==(e=this.widget.getSelection()[0])&&void 0!==e?e:void 0}}function createKeyboardNavigationEventFilter(e,o){let s=!1;return l=>{if(l.toKeybinding().isModifierKey())return!1;if(s)return s=!1,!1;const d=o.softDispatch(l,e);return d&&d.enterChord?(s=!0,!1):(s=!1,!0)}}let we=class WorkbenchObjectTree extends ObjectTree{constructor(e,o,s,l,d,u,g,p,m,f,_){const{options:C,getAutomaticKeyboardNavigation:b,disposable:w}=workbenchTreeDataPreamble(o,d,u,m,f,_);super(e,o,s,l,C),this.disposables.add(w),this.internals=new ke(this,d,b,d.overrideStyles,u,g,p,m,_),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};we=listService_decorate([__param(5,W.i6),__param(6,G),__param(7,j.XE),__param(8,F.Ui),__param(9,z.d),__param(10,O.F)],we);let Se=class WorkbenchCompressibleObjectTree extends CompressibleObjectTree{constructor(e,o,s,l,d,u,g,p,m,f,_){const{options:C,getAutomaticKeyboardNavigation:b,disposable:w}=workbenchTreeDataPreamble(o,d,u,m,f,_);super(e,o,s,l,C),this.disposables.add(w),this.internals=new ke(this,d,b,d.overrideStyles,u,g,p,m,_),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Se=listService_decorate([__param(5,W.i6),__param(6,G),__param(7,j.XE),__param(8,F.Ui),__param(9,z.d),__param(10,O.F)],Se);let ye=class WorkbenchDataTree extends DataTree{constructor(e,o,s,l,d,u,g,p,m,f,_,C){const{options:b,getAutomaticKeyboardNavigation:w,disposable:S}=workbenchTreeDataPreamble(o,u,g,f,_,C);super(e,o,s,l,d,b),this.disposables.add(S),this.internals=new ke(this,u,w,u.overrideStyles,g,p,m,f,C),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};ye=listService_decorate([__param(6,W.i6),__param(7,G),__param(8,j.XE),__param(9,F.Ui),__param(10,z.d),__param(11,O.F)],ye);let Le=class WorkbenchAsyncDataTree extends AsyncDataTree{constructor(e,o,s,l,d,u,g,p,m,f,_,C){const{options:b,getAutomaticKeyboardNavigation:w,disposable:S}=workbenchTreeDataPreamble(o,u,g,f,_,C);super(e,o,s,l,d,b),this.disposables.add(S),this.internals=new ke(this,u,w,u.overrideStyles,g,p,m,f,C),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Le=listService_decorate([__param(6,W.i6),__param(7,G),__param(8,j.XE),__param(9,F.Ui),__param(10,z.d),__param(11,O.F)],Le);let xe=class WorkbenchCompressibleAsyncDataTree extends CompressibleAsyncDataTree{constructor(e,o,s,l,d,u,g,p,m,f,_,C,b){const{options:w,getAutomaticKeyboardNavigation:S,disposable:y}=workbenchTreeDataPreamble(o,g,p,_,C,b);super(e,o,s,l,d,u,w),this.disposables.add(y),this.internals=new ke(this,g,S,g.overrideStyles,p,m,f,_,b),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};function workbenchTreeDataPreamble(e,o,s,l,d,u){var g;const getAutomaticKeyboardNavigation=()=>{let e=Boolean(s.getContextKeyValue(re));return e&&(e=Boolean(l.getValue(he))),e},p=u.isScreenReaderOptimized(),m=o.simpleKeyboardNavigation||p?"simple":l.getValue(de),f=void 0!==o.horizontalScrolling?o.horizontalScrolling:Boolean(l.getValue(ce)),[_,C]=toWorkbenchListOptions(o,l,d),b=o.additionalScrollHeight;return{getAutomaticKeyboardNavigation:getAutomaticKeyboardNavigation,disposable:C,options:Object.assign(Object.assign({keyboardSupport:!1},_),{indent:"number"===typeof l.getValue(ue)?l.getValue(ue):void 0,renderIndentGuides:l.getValue(ge),smoothScrolling:Boolean(l.getValue(pe)),automaticKeyboardNavigation:getAutomaticKeyboardNavigation(),simpleKeyboardNavigation:"simple"===m,filterOnType:"filter"===m,horizontalScrolling:f,keyboardNavigationEventFilter:createKeyboardNavigationEventFilter(e,d),additionalScrollHeight:b,hideTwistiesOfChildlessElements:o.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:null!==(g=o.expandOnlyOnTwistieClick)&&void 0!==g?g:"doubleClick"===l.getValue(_e)})}}xe=listService_decorate([__param(7,W.i6),__param(8,G),__param(9,j.XE),__param(10,F.Ui),__param(11,z.d),__param(12,O.F)],xe);let ke=class WorkbenchTreeInternals{constructor(e,o,s,l,d,u,g,p,m){this.tree=e,this.themeService=g,this.disposables=[],this.contextKeyService=createScopedContextKeyService(d,e),this.listSupportsMultiSelect=Z.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==o.multipleSelectionSupport);const f=te.bindTo(this.contextKeyService);f.set(Boolean(o.selectionNavigation)),this.hasSelectionOrFocus=J.bindTo(this.contextKeyService),this.hasDoubleSelection=X.bindTo(this.contextKeyService),this.hasMultiSelection=ee.bindTo(this.contextKeyService),this.treeElementCanCollapse=ie.bindTo(this.contextKeyService),this.treeElementHasParent=ne.bindTo(this.contextKeyService),this.treeElementCanExpand=oe.bindTo(this.contextKeyService),this.treeElementHasChild=se.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(p);const _=new Set;_.add(re);const updateKeyboardNavigation=()=>{const o=m.isScreenReaderOptimized(),s=o?"simple":p.getValue(de);e.updateOptions({simpleKeyboardNavigation:"simple"===s,filterOnType:"filter"===s})};this.updateStyleOverrides(l);const updateCollapseContextKeys=()=>{const o=e.getFocus()[0];if(!o)return;const s=e.getNode(o);this.treeElementCanCollapse.set(s.collapsible&&!s.collapsed),this.treeElementHasParent.set(!!e.getParentElement(o)),this.treeElementCanExpand.set(s.collapsible&&s.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(o))};this.disposables.push(this.contextKeyService,u.register(e),e.onDidChangeSelection((()=>{const o=e.getSelection(),s=e.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.hasSelectionOrFocus.set(o.length>0||s.length>0),this.hasMultiSelection.set(o.length>1),this.hasDoubleSelection.set(2===o.length)}))})),e.onDidChangeFocus((()=>{const o=e.getSelection(),s=e.getFocus();this.hasSelectionOrFocus.set(o.length>0||s.length>0),updateCollapseContextKeys()})),e.onDidChangeCollapseState(updateCollapseContextKeys),e.onDidChangeModel(updateCollapseContextKeys),p.onDidChangeConfiguration((l=>{let d={};if(l.affectsConfiguration(ae)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(p)),l.affectsConfiguration(ue)){const e=p.getValue(ue);d=Object.assign(Object.assign({},d),{indent:e})}if(l.affectsConfiguration(ge)){const e=p.getValue(ge);d=Object.assign(Object.assign({},d),{renderIndentGuides:e})}if(l.affectsConfiguration(pe)){const e=Boolean(p.getValue(pe));d=Object.assign(Object.assign({},d),{smoothScrolling:e})}if(l.affectsConfiguration(de)&&updateKeyboardNavigation(),l.affectsConfiguration(he)&&(d=Object.assign(Object.assign({},d),{automaticKeyboardNavigation:s()})),l.affectsConfiguration(ce)&&void 0===o.horizontalScrolling){const e=Boolean(p.getValue(ce));d=Object.assign(Object.assign({},d),{horizontalScrolling:e})}if(l.affectsConfiguration(_e)&&void 0===o.expandOnlyOnTwistieClick&&(d=Object.assign(Object.assign({},d),{expandOnlyOnTwistieClick:"doubleClick"===p.getValue(_e)})),l.affectsConfiguration(me)){const e=p.getValue(me);d=Object.assign(Object.assign({},d),{mouseWheelScrollSensitivity:e})}if(l.affectsConfiguration(fe)){const e=p.getValue(fe);d=Object.assign(Object.assign({},d),{fastScrollSensitivity:e})}Object.keys(d).length>0&&e.updateOptions(d)})),this.contextKeyService.onDidChangeContext((o=>{o.affectsSome(_)&&e.updateOptions({automaticKeyboardNavigation:s()})})),m.onDidChangeScreenReaderOptimized((()=>updateKeyboardNavigation()))),this.navigator=new TreeResourceNavigator(e,Object.assign({configurationService:p},o)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){(0,p.B9)(this.styler),this.styler=e?(0,K.Jl)(this.tree,this.themeService,e):p.JT.None}dispose(){this.disposables=(0,p.B9)(this.disposables),(0,p.B9)(this.styler),this.styler=void 0}};ke=listService_decorate([__param(4,W.i6),__param(5,G),__param(6,j.XE),__param(7,F.Ui),__param(8,O.F)],ke);const Ne=U.B.as(B.IP.Configuration);Ne.registerConfiguration({id:"workbench",order:7,title:(0,A.N)("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[ae]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[(0,A.N)("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),(0,A.N)("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:(0,A.N)({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[le]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,A.N)({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[ce]:{type:"boolean",default:!1,description:(0,A.N)("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[ue]:{type:"number",default:8,minimum:4,maximum:40,description:(0,A.N)("tree indent setting","Controls tree indentation in pixels.")},[ge]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:(0,A.N)("render tree indent guides","Controls whether the tree should render indent guides.")},[pe]:{type:"boolean",default:!1,description:(0,A.N)("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[me]:{type:"number",default:1,description:(0,A.N)("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[fe]:{type:"number",default:5,description:(0,A.N)("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[de]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[(0,A.N)("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),(0,A.N)("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),(0,A.N)("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:(0,A.N)("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[he]:{type:"boolean",default:!0,markdownDescription:(0,A.N)("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[_e]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,A.N)("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}})},3557:function(e,o,s){"use strict";s.d(o,{$V:function(){return LogService},VZ:function(){return g},in:function(){return p},kw:function(){return ConsoleLogger}});var l=s(4669),d=s(5976),u=s(2065);const g=(0,u.yh)("logService");var p;(function(e){e[e["Trace"]=0]="Trace",e[e["Debug"]=1]="Debug",e[e["Info"]=2]="Info",e[e["Warning"]=3]="Warning",e[e["Error"]=4]="Error",e[e["Critical"]=5]="Critical",e[e["Off"]=6]="Off"})(p||(p={}));const m=p.Info;class AbstractLogger extends d.JT{constructor(){super(...arguments),this.level=m,this._onDidChangeLogLevel=this._register(new l.Q5)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class ConsoleLogger extends AbstractLogger{constructor(e=m){super(),this.setLevel(e)}trace(e,...o){this.getLevel()<=p.Trace&&console.log("%cTRACE","color: #888",e,...o)}debug(e,...o){this.getLevel()<=p.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...o)}info(e,...o){this.getLevel()<=p.Info&&console.log("%c INFO","color: #33f",e,...o)}error(e,...o){this.getLevel()<=p.Error&&console.log("%c  ERR","color: #f33",e,...o)}dispose(){}}class LogService extends d.JT{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...o){this.logger.trace(e,...o)}debug(e,...o){this.logger.debug(e,...o)}info(e,...o){this.logger.info(e,...o)}error(e,...o){this.logger.error(e,...o)}}},8674:function(e,o,s){"use strict";s.d(o,{H0:function(){return d},ZL:function(){return l},lT:function(){return m}});var l,d,u=s(4603),g=s(3580),p=s(2065);(function(e){e[e["Hint"]=1]="Hint",e[e["Info"]=2]="Info",e[e["Warning"]=4]="Warning",e[e["Error"]=8]="Error"})(l||(l={})),function(e){function compare(e,o){return o-e}e.compare=compare;const o=Object.create(null);function toString(e){return o[e]||""}function fromSeverity(o){switch(o){case u.Z.Error:return e.Error;case u.Z.Warning:return e.Warning;case u.Z.Info:return e.Info;case u.Z.Ignore:return e.Hint}}function toSeverity(o){switch(o){case e.Error:return u.Z.Error;case e.Warning:return u.Z.Warning;case e.Info:return u.Z.Info;case e.Hint:return u.Z.Ignore}}o[e.Error]=(0,g.N)("sev.error","Error"),o[e.Warning]=(0,g.N)("sev.warning","Warning"),o[e.Info]=(0,g.N)("sev.info","Info"),e.toString=toString,e.fromSeverity=fromSeverity,e.toSeverity=toSeverity}(l||(l={})),function(e){const o="";function makeKey(e){return makeKeyOptionalMessage(e,!0)}function makeKeyOptionalMessage(e,s){let d=[o];return e.source?d.push(e.source.replace("¦","\\¦")):d.push(o),e.code?"string"===typeof e.code?d.push(e.code.replace("¦","\\¦")):d.push(e.code.value.replace("¦","\\¦")):d.push(o),void 0!==e.severity&&null!==e.severity?d.push(l.toString(e.severity)):d.push(o),e.message&&s?d.push(e.message.replace("¦","\\¦")):d.push(o),void 0!==e.startLineNumber&&null!==e.startLineNumber?d.push(e.startLineNumber.toString()):d.push(o),void 0!==e.startColumn&&null!==e.startColumn?d.push(e.startColumn.toString()):d.push(o),void 0!==e.endLineNumber&&null!==e.endLineNumber?d.push(e.endLineNumber.toString()):d.push(o),void 0!==e.endColumn&&null!==e.endColumn?d.push(e.endColumn.toString()):d.push(o),d.push(o),d.join("¦")}e.makeKey=makeKey,e.makeKeyOptionalMessage=makeKeyOptionalMessage}(d||(d={}));const m=(0,p.yh)("markerService")},9422:function(e,o,s){"use strict";s.d(o,{EO:function(){return NoOpNotification},lT:function(){return g},zb:function(){return u}});var l=s(4603),d=s(2065),u=l.Z;const g=(0,d.yh)("notificationService");class NoOpNotification{}},988:function(e,o,s){"use strict";s.d(o,{Gs:function(){return matchesSomeScheme},SW:function(){return m},v4:function(){return p},xI:function(){return extractSelection},xn:function(){return matchesScheme}});var l=s(5976),d=s(2677),u=s(666),g=s(2065),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};const p=(0,g.yh)("openerService"),m=Object.freeze({_serviceBrand:void 0,registerOpener(){return l.JT.None},registerValidator(){return l.JT.None},registerExternalUriResolver(){return l.JT.None},setDefaultExternalOpener(){},registerExternalOpener(){return l.JT.None},open(){return __awaiter(this,void 0,void 0,(function*(){return!1}))},resolveExternalUri(e){return __awaiter(this,void 0,void 0,(function*(){return{resolved:e,dispose(){}}}))}});function matchesScheme(e,o){return u.o.isUri(e)?(0,d.qq)(e.scheme,o):(0,d.ok)(e,o+":")}function matchesSomeScheme(e,...o){return o.some((o=>matchesScheme(e,o)))}function extractSelection(e){let o;const s=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return s&&(o={startLineNumber:parseInt(s[1]),startColumn:s[2]?parseInt(s[2]):1,endLineNumber:s[4]?parseInt(s[4]):void 0,endColumn:s[4]?s[5]?parseInt(s[5]):1:void 0},e=e.with({fragment:""})),{selection:o,uri:e}}},535:function(e,o,s){"use strict";s.d(o,{Ex:function(){return Progress},ek:function(){return d}});var l=s(2065);Object.freeze({total(){},worked(){},done(){}});class Progress{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}Progress.None=Object.freeze({report(){}});const d=(0,l.yh)("editorProgressService")},725:function(e,o,s){"use strict";s.d(o,{IP:function(){return p},Ry:function(){return l}});var l,d=s(9488),u=s(5976),g=s(9872);(function(e){e[e["PRESERVE"]=0]="PRESERVE",e[e["LAST"]=1]="LAST"})(l||(l={}));const p={Quickaccess:"workbench.contributions.quickaccess"};class QuickAccessRegistry{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort(((e,o)=>o.prefix.length-e.prefix.length)),(0,u.OF)((()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)}))}getQuickAccessProviders(){return(0,d.kX)([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){const o=e&&this.providers.find((o=>e.startsWith(o.prefix)))||void 0;return o||this.defaultProvider}}g.B.add(p.Quickaccess,new QuickAccessRegistry)},1157:function(e,o,s){"use strict";s.d(o,{eJ:function(){return u},jG:function(){return d.jG}});var l=s(2065),d=s(7746);const u=(0,l.yh)("quickInputService")},9872:function(e,o,s){"use strict";s.d(o,{B:function(){return u}});var l=s(5146),d=s(8401);class RegistryImpl{constructor(){this.data=new Map}add(e,o){l.ok(d.HD(e)),l.ok(d.Kn(o)),l.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,o)}as(e){return this.data.get(e)||null}}const u=new RegistryImpl},7060:function(e,o,s){"use strict";s.d(o,{Uy:function(){return _},vm:function(){return InMemoryStorageService},fk:function(){return C}});var l,d=s(4669),u=s(5976),g=s(8401),p=s(5393),__awaiter=function(e,o,s,l){function adopt(e){return e instanceof s?e:new s((function(o){o(e)}))}return new(s||(s=Promise))((function(s,d){function fulfilled(e){try{step(l.next(e))}catch(o){d(o)}}function rejected(e){try{step(l["throw"](e))}catch(o){d(o)}}function step(e){e.done?s(e.value):adopt(e.value).then(fulfilled,rejected)}step((l=l.apply(e,o||[])).next())}))};(function(e){e[e["None"]=0]="None",e[e["Initialized"]=1]="Initialized",e[e["Closed"]=2]="Closed"})(l||(l={}));class Storage extends u.JT{constructor(e,o=Object.create(null)){super(),this.database=e,this.options=o,this._onDidChangeStorage=this._register(new d.Q5),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=l.None,this.cache=new Map,this.flushDelayer=new p.rH(Storage.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal((e=>this.onDidChangeItemsExternal(e))))}onDidChangeItemsExternal(e){var o,s;null===(o=e.changed)||void 0===o||o.forEach(((e,o)=>this.accept(o,e))),null===(s=e.deleted)||void 0===s||s.forEach((e=>this.accept(e,void 0)))}accept(e,o){if(this.state===l.Closed)return;let s=!1;if((0,g.Jp)(o))s=this.cache.delete(e);else{const l=this.cache.get(e);l!==o&&(this.cache.set(e,o),s=!0)}s&&this._onDidChangeStorage.fire(e)}get(e,o){const s=this.cache.get(e);return(0,g.Jp)(s)?o:s}getBoolean(e,o){const s=this.get(e);return(0,g.Jp)(s)?o:"true"===s}getNumber(e,o){const s=this.get(e);return(0,g.Jp)(s)?o:parseInt(s,10)}set(e,o){return __awaiter(this,void 0,void 0,(function*(){if(this.state===l.Closed)return;if((0,g.Jp)(o))return this.delete(e);const s=String(o),d=this.cache.get(e);return d!==s?(this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()):void 0}))}delete(e){return __awaiter(this,void 0,void 0,(function*(){if(this.state===l.Closed)return;const o=this.cache.delete(e);return o?(this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()):void 0}))}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return __awaiter(this,void 0,void 0,(function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally((()=>{var e;if(!this.hasPending)while(this.whenFlushedCallbacks.length)null===(e=this.whenFlushedCallbacks.pop())||void 0===e||e()}))}))}doFlush(e){return __awaiter(this,void 0,void 0,(function*(){return this.flushDelayer.trigger((()=>this.flushPending()),e)}))}dispose(){this.flushDelayer.dispose(),super.dispose()}}Storage.DEFAULT_FLUSH_DELAY=100;class InMemoryStorageDatabase{constructor(){this.onDidChangeItemsExternal=d.ju.None,this.items=new Map}updateItems(e){return __awaiter(this,void 0,void 0,(function*(){e.insert&&e.insert.forEach(((e,o)=>this.items.set(o,e))),e.delete&&e.delete.forEach((e=>this.items.delete(e)))}))}}var m=s(2065);const f="__$__targetStorageMarker",_=(0,m.yh)("storageService");var C;(function(e){e[e["NONE"]=0]="NONE",e[e["SHUTDOWN"]=1]="SHUTDOWN"})(C||(C={}));class AbstractStorageService extends u.JT{constructor(e={flushInterval:AbstractStorageService.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new d.K3),this._onDidChangeTarget=this._register(new d.K3),this._onWillSaveState=this._register(new d.Q5),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,o){o===f?(0===e?this._globalKeyTargets=void 0:1===e&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:o,target:this.getKeyTargets(e)[o]})}get(e,o,s){var l;return null===(l=this.getStorage(o))||void 0===l?void 0:l.get(e,s)}getBoolean(e,o,s){var l;return null===(l=this.getStorage(o))||void 0===l?void 0:l.getBoolean(e,s)}getNumber(e,o,s){var l;return null===(l=this.getStorage(o))||void 0===l?void 0:l.getNumber(e,s)}store(e,o,s,l){(0,g.Jp)(o)?this.remove(e,s):this.withPausedEmitters((()=>{var d;this.updateKeyTarget(e,s,l),null===(d=this.getStorage(s))||void 0===d||d.set(e,o)}))}remove(e,o){this.withPausedEmitters((()=>{var s;this.updateKeyTarget(e,o,void 0),null===(s=this.getStorage(o))||void 0===s||s.delete(e)}))}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,o,s){var l,d;const u=this.getKeyTargets(o);"number"===typeof s?u[e]!==s&&(u[e]=s,null===(l=this.getStorage(o))||void 0===l||l.set(f,JSON.stringify(u))):"number"===typeof u[e]&&(delete u[e],null===(d=this.getStorage(o))||void 0===d||d.set(f,JSON.stringify(u)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return 0===e?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const o=this.get(f,e);if(o)try{return JSON.parse(o)}catch(s){}return Object.create(null)}}AbstractStorageService.DEFAULT_FLUSH_INTERVAL=6e4;class InMemoryStorageService extends AbstractStorageService{constructor(){super(),this.globalStorage=this._register(new Storage(new InMemoryStorageDatabase)),this.workspaceStorage=this._register(new Storage(new InMemoryStorageDatabase)),this._register(this.workspaceStorage.onDidChangeStorage((e=>this.emitDidChangeValue(1,e)))),this._register(this.globalStorage.onDidChangeStorage((e=>this.emitDidChangeValue(0,e))))}getStorage(e){return 0===e?this.globalStorage:this.workspaceStorage}}},829:function(e,o,s){"use strict";s.d(o,{b:function(){return d}});var l=s(2065);const d=(0,l.yh)("telemetryService")},3910:function(e,o,s){"use strict";s.d(o,{$DX:function(){return Gt},$d5:function(){return Et},ABB:function(){return ne},AS1:function(){return Tt},AWI:function(){return Te},BOY:function(){return bi},C3g:function(){return H},CA6:function(){return fi},CNo:function(){return $e},Cdg:function(){return Ut},CzK:function(){return nt},D0T:function(){return ve},D1_:function(){return we},DEr:function(){return Kt},Dut:function(){return me},E3h:function(){return qt},EPQ:function(){return B},EQn:function(){return Bt},ES4:function(){return Re},EiJ:function(){return He},F3d:function(){return Nt},F9q:function(){return ut},Fm_:function(){return ai},Fu1:function(){return tt},GO4:function(){return Y},Gj_:function(){return ui},Gwp:function(){return It},HCL:function(){return Xe},Hfx:function(){return be},Hz8:function(){return jt},IPX:function(){return _},IYc:function(){return di},Ido:function(){return w},Itd:function(){return mi},Ivo:function(){return gi},JpG:function(){return vi},K19:function(){return Ie},LLc:function(){return mt},L_H:function(){return re},L_t:function(){return ft},LoV:function(){return Ge},M6C:function(){return wt},MUv:function(){return Be},NOs:function(){return Ce},NPS:function(){return Vt},Ng6:function(){return Se},OLZ:function(){return wi},OZR:function(){return K},Oop:function(){return vt},P4M:function(){return rt},P6G:function(){return registerColor},P6Y:function(){return ht},PRb:function(){return M},PX0:function(){return At},PpC:function(){return Ze},Pvw:function(){return P},QO2:function(){return asCssVariableName},R80:function(){return y},RV_:function(){return W},Rzx:function(){return Pe},SPM:function(){return li},SUG:function(){return V},SUY:function(){return ci},Saq:function(){return Pt},Sbf:function(){return je},Snq:function(){return resolveColorValue},SwI:function(){return D},T83:function(){return pe},Tnx:function(){return St},UnT:function(){return Ot},VVv:function(){return Qe},Vqd:function(){return zt},XEs:function(){return R},XL$:function(){return gt},XZx:function(){return S},Xy4:function(){return _i},YI3:function(){return F},ZGJ:function(){return Qt},ZnX:function(){return transparent},_2n:function(){return Ct},_Yy:function(){return qe},_bK:function(){return _t},_lC:function(){return O},_t9:function(){return U},_wn:function(){return te},b6y:function(){return le},b7$:function(){return Z},bKB:function(){return Je},brw:function(){return Ci},c63:function(){return ge},cbQ:function(){return Ht},cvW:function(){return _e},dCr:function(){return bt},dRz:function(){return b},dt_:function(){return A},etL:function(){return ie},fEB:function(){return fe},few:function(){return ue},g8u:function(){return X},g_n:function(){return Oe},gkn:function(){return ze},gpD:function(){return ce},hEj:function(){return Ae},hX8:function(){return Ye},hzo:function(){return at},j51:function(){return ct},j5u:function(){return Q},jUe:function(){return We},jbW:function(){return $t},kJk:function(){return ke},kVY:function(){return pi},keg:function(){return ot},kvU:function(){return xt},kwl:function(){return oneOf},lRK:function(){return L},lUq:function(){return Zt},lWp:function(){return Ee},lXJ:function(){return ae},loF:function(){return xe},mHy:function(){return pt},mV1:function(){return Dt},nyM:function(){return Fe},oQ$:function(){return De},oSI:function(){return Rt},opG:function(){return Ne},ov3:function(){return hi},pW3:function(){return he},paE:function(){return z},phM:function(){return et},pnM:function(){return Ve},ptc:function(){return Ue},qeD:function(){return ee},rg2:function(){return yt},rh:function(){return E},s$:function(){return kt},sEe:function(){return T},sKV:function(){return it},sgC:function(){return N},tZ6:function(){return Le},uoC:function(){return de},url:function(){return k},uxu:function(){return Ft},vGG:function(){return Mt},xL1:function(){return x},xi6:function(){return lt},yJx:function(){return Ke},yb5:function(){return Me},ynu:function(){return oe},ypS:function(){return st},ytC:function(){return Lt},zJb:function(){return I},zKr:function(){return ye},zOm:function(){return dt},zRJ:function(){return se}});var l=s(5393),d=s(1264),u=s(4669),g=s(8401),p=s(3580),m=s(1294),f=s(9872);function asCssVariableName(e){return`--vscode-${e.replace(/\./g,"-")}`}const _={ColorContribution:"base.contributions.colors"};class ColorRegistry{constructor(){this._onDidChangeSchema=new u.Q5,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,o,s,l=!1,d){let u={id:e,description:s,defaults:o,needsTransparency:l,deprecationMessage:d};this.colorsById[e]=u;let g={type:"string",description:s,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return d&&(g.deprecationMessage=d),this.colorSchema.properties[e]=g,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(s),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map((e=>this.colorsById[e]))}resolveDefaultColor(e,o){const s=this.colorsById[e];if(s&&s.defaults){const e=s.defaults[o.type];return resolveColorValue(e,o)}}getColorSchema(){return this.colorSchema}toString(){let sorter=(e,o)=>{let s=-1===e.indexOf(".")?0:1,l=-1===o.indexOf(".")?0:1;return s!==l?s-l:e.localeCompare(o)};return Object.keys(this.colorsById).sort(sorter).map((e=>`- \`${e}\`: ${this.colorsById[e].description}`)).join("\n")}}const C=new ColorRegistry;function registerColor(e,o,s,l,d){return C.registerColor(e,o,s,l,d)}f.B.add(_.ColorContribution,C);const b=registerColor("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},p.N("foreground","Overall foreground color. This color is only used if not overridden by a component.")),w=registerColor("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},p.N("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),S=(registerColor("descriptionForeground",{light:"#717171",dark:transparent(b,.7),hc:transparent(b,.7)},p.N("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),registerColor("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},p.N("iconForeground","The default color for icons in the workbench."))),y=registerColor("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},p.N("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),L=registerColor("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},p.N("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),x=registerColor("contrastActiveBorder",{light:null,dark:null,hc:y},p.N("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),k=(registerColor("selection.background",{light:null,dark:null,hc:null},p.N("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),registerColor("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hc:d.Il.black},p.N("textSeparatorForeground","Color for text separators.")),registerColor("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},p.N("textLinkForeground","Foreground color for links in text."))),N=registerColor("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},p.N("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),D=(registerColor("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hc:"#D7BA7D"},p.N("textPreformatForeground","Foreground color for preformatted text segments.")),registerColor("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hc:null},p.N("textBlockQuoteBackground","Background color for block quotes in text.")),registerColor("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hc:d.Il.white},p.N("textBlockQuoteBorder","Border color for block quotes in text.")),registerColor("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:d.Il.black},p.N("textCodeBlockBackground","Background color for code blocks in text."))),E=registerColor("widget.shadow",{dark:transparent(d.Il.black,.36),light:transparent(d.Il.black,.16),hc:null},p.N("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),T=registerColor("input.background",{dark:"#3C3C3C",light:d.Il.white,hc:d.Il.black},p.N("inputBoxBackground","Input box background.")),I=registerColor("input.foreground",{dark:b,light:b,hc:b},p.N("inputBoxForeground","Input box foreground.")),A=registerColor("input.border",{dark:null,light:null,hc:L},p.N("inputBoxBorder","Input box border.")),M=registerColor("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:L},p.N("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),R=(registerColor("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hc:null},p.N("inputOption.hoverBackground","Background color of activated options in input fields.")),registerColor("inputOption.activeBackground",{dark:transparent(y,.4),light:transparent(y,.2),hc:d.Il.transparent},p.N("inputOption.activeBackground","Background hover color of options in input fields."))),P=registerColor("inputOption.activeForeground",{dark:d.Il.white,light:d.Il.black,hc:null},p.N("inputOption.activeForeground","Foreground color of activated options in input fields.")),O=(registerColor("input.placeholderForeground",{light:transparent(b,.5),dark:transparent(b,.5),hc:transparent(b,.7)},p.N("inputPlaceholderForeground","Input box foreground color for placeholder text.")),registerColor("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:d.Il.black},p.N("inputValidationInfoBackground","Input validation background color for information severity."))),F=registerColor("inputValidation.infoForeground",{dark:null,light:null,hc:null},p.N("inputValidationInfoForeground","Input validation foreground color for information severity.")),B=registerColor("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:L},p.N("inputValidationInfoBorder","Input validation border color for information severity.")),W=registerColor("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:d.Il.black},p.N("inputValidationWarningBackground","Input validation background color for warning severity.")),V=registerColor("inputValidation.warningForeground",{dark:null,light:null,hc:null},p.N("inputValidationWarningForeground","Input validation foreground color for warning severity.")),H=registerColor("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:L},p.N("inputValidationWarningBorder","Input validation border color for warning severity.")),z=registerColor("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:d.Il.black},p.N("inputValidationErrorBackground","Input validation background color for error severity.")),U=registerColor("inputValidation.errorForeground",{dark:null,light:null,hc:null},p.N("inputValidationErrorForeground","Input validation foreground color for error severity.")),K=registerColor("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:L},p.N("inputValidationErrorBorder","Input validation border color for error severity.")),j=registerColor("dropdown.background",{dark:"#3C3C3C",light:d.Il.white,hc:d.Il.black},p.N("dropdownBackground","Dropdown background.")),G=(registerColor("dropdown.listBackground",{dark:null,light:null,hc:d.Il.black},p.N("dropdownListBackground","Dropdown list background.")),registerColor("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:d.Il.white},p.N("dropdownForeground","Dropdown foreground."))),q=registerColor("dropdown.border",{dark:j,light:"#CECECE",hc:L},p.N("dropdownBorder","Dropdown border.")),Q=(registerColor("checkbox.background",{dark:j,light:j,hc:j},p.N("checkbox.background","Background color of checkbox widget.")),registerColor("checkbox.foreground",{dark:G,light:G,hc:G},p.N("checkbox.foreground","Foreground color of checkbox widget.")),registerColor("checkbox.border",{dark:q,light:q,hc:q},p.N("checkbox.border","Border color of checkbox widget.")),registerColor("button.foreground",{dark:d.Il.white,light:d.Il.white,hc:d.Il.white},p.N("buttonForeground","Button foreground color."))),Z=registerColor("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},p.N("buttonBackground","Button background color.")),Y=registerColor("button.hoverBackground",{dark:lighten(Z,.2),light:darken(Z,.2),hc:null},p.N("buttonHoverBackground","Button background color when hovering.")),J=(registerColor("button.border",{dark:L,light:L,hc:L},p.N("buttonBorder","Button border color.")),registerColor("button.secondaryForeground",{dark:d.Il.white,light:d.Il.white,hc:d.Il.white},p.N("buttonSecondaryForeground","Secondary button foreground color.")),registerColor("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hc:null},p.N("buttonSecondaryBackground","Secondary button background color."))),X=(registerColor("button.secondaryHoverBackground",{dark:lighten(J,.2),light:darken(J,.2),hc:null},p.N("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),registerColor("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:d.Il.black},p.N("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count."))),ee=registerColor("badge.foreground",{dark:d.Il.white,light:"#333",hc:d.Il.white},p.N("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),te=registerColor("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},p.N("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),ie=registerColor("scrollbarSlider.background",{dark:d.Il.fromHex("#797979").transparent(.4),light:d.Il.fromHex("#646464").transparent(.4),hc:transparent(L,.6)},p.N("scrollbarSliderBackground","Scrollbar slider background color.")),ne=registerColor("scrollbarSlider.hoverBackground",{dark:d.Il.fromHex("#646464").transparent(.7),light:d.Il.fromHex("#646464").transparent(.7),hc:transparent(L,.8)},p.N("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),oe=registerColor("scrollbarSlider.activeBackground",{dark:d.Il.fromHex("#BFBFBF").transparent(.4),light:d.Il.fromHex("#000000").transparent(.6),hc:L},p.N("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),se=registerColor("progressBar.background",{dark:d.Il.fromHex("#0E70C0"),light:d.Il.fromHex("#0E70C0"),hc:L},p.N("progressBarBackground","Background color of the progress bar that can show for long running operations.")),re=registerColor("editorError.background",{dark:null,light:null,hc:null},p.N("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),ae=registerColor("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},p.N("editorError.foreground","Foreground color of error squigglies in the editor.")),le=registerColor("editorError.border",{dark:null,light:null,hc:d.Il.fromHex("#E47777").transparent(.8)},p.N("errorBorder","Border color of error boxes in the editor.")),ce=registerColor("editorWarning.background",{dark:null,light:null,hc:null},p.N("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),de=registerColor("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},p.N("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),he=registerColor("editorWarning.border",{dark:null,light:null,hc:d.Il.fromHex("#FFCC00").transparent(.8)},p.N("warningBorder","Border color of warning boxes in the editor.")),ue=registerColor("editorInfo.background",{dark:null,light:null,hc:null},p.N("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),ge=registerColor("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},p.N("editorInfo.foreground","Foreground color of info squigglies in the editor.")),pe=registerColor("editorInfo.border",{dark:null,light:null,hc:d.Il.fromHex("#3794FF").transparent(.8)},p.N("infoBorder","Border color of info boxes in the editor.")),me=registerColor("editorHint.foreground",{dark:d.Il.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},p.N("editorHint.foreground","Foreground color of hint squigglies in the editor.")),fe=registerColor("editorHint.border",{dark:null,light:null,hc:d.Il.fromHex("#eeeeee").transparent(.8)},p.N("hintBorder","Border color of hint boxes in the editor.")),_e=(registerColor("sash.hoverBorder",{dark:y,light:y,hc:y},p.N("sashActiveBorder","Border color of active sashes.")),registerColor("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:d.Il.black},p.N("editorBackground","Editor background color."))),Ce=registerColor("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:d.Il.white},p.N("editorForeground","Editor default foreground color.")),ve=registerColor("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},p.N("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),be=registerColor("editorWidget.foreground",{dark:b,light:b,hc:b},p.N("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),we=registerColor("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:L},p.N("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),Se=registerColor("editorWidget.resizeBorder",{light:null,dark:null,hc:null},p.N("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),ye=registerColor("quickInput.background",{dark:ve,light:ve,hc:ve},p.N("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Le=registerColor("quickInput.foreground",{dark:be,light:be,hc:be},p.N("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),xe=registerColor("quickInputTitle.background",{dark:new d.Il(new d.VS(255,255,255,.105)),light:new d.Il(new d.VS(0,0,0,.06)),hc:"#000000"},p.N("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),ke=registerColor("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:d.Il.white},p.N("pickerGroupForeground","Quick picker color for grouping labels.")),Ne=registerColor("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:d.Il.white},p.N("pickerGroupBorder","Quick picker color for grouping borders.")),De=registerColor("keybindingLabel.background",{dark:new d.Il(new d.VS(128,128,128,.17)),light:new d.Il(new d.VS(221,221,221,.4)),hc:d.Il.transparent},p.N("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Ee=registerColor("keybindingLabel.foreground",{dark:d.Il.fromHex("#CCCCCC"),light:d.Il.fromHex("#555555"),hc:d.Il.white},p.N("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Te=registerColor("keybindingLabel.border",{dark:new d.Il(new d.VS(51,51,51,.6)),light:new d.Il(new d.VS(204,204,204,.4)),hc:new d.Il(new d.VS(111,195,223))},p.N("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Ie=registerColor("keybindingLabel.bottomBorder",{dark:new d.Il(new d.VS(68,68,68,.6)),light:new d.Il(new d.VS(187,187,187,.4)),hc:new d.Il(new d.VS(111,195,223))},p.N("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Ae=registerColor("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},p.N("editorSelectionBackground","Color of the editor selection.")),Me=registerColor("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},p.N("editorSelectionForeground","Color of the selected text for high contrast.")),Re=registerColor("editor.inactiveSelectionBackground",{light:transparent(Ae,.5),dark:transparent(Ae,.5),hc:transparent(Ae,.5)},p.N("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Pe=registerColor("editor.selectionHighlightBackground",{light:lessProminent(Ae,_e,.3,.6),dark:lessProminent(Ae,_e,.3,.6),hc:null},p.N("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),Oe=registerColor("editor.selectionHighlightBorder",{light:null,dark:null,hc:x},p.N("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),Fe=registerColor("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},p.N("editorFindMatch","Color of the current search match.")),Be=registerColor("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},p.N("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),We=registerColor("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},p.N("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Ve=registerColor("editor.findMatchBorder",{light:null,dark:null,hc:x},p.N("editorFindMatchBorder","Border color of the current search match.")),He=registerColor("editor.findMatchHighlightBorder",{light:null,dark:null,hc:x},p.N("findMatchHighlightBorder","Border color of the other search matches.")),ze=registerColor("editor.findRangeHighlightBorder",{dark:null,light:null,hc:transparent(x,.4)},p.N("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Ue=(registerColor("searchEditor.findMatchBackground",{light:transparent(Be,.66),dark:transparent(Be,.66),hc:Be},p.N("searchEditor.queryMatch","Color of the Search Editor query matches.")),registerColor("searchEditor.findMatchBorder",{light:transparent(He,.66),dark:transparent(He,.66),hc:He},p.N("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches.")),registerColor("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},p.N("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0)),Ke=registerColor("editorHoverWidget.background",{light:ve,dark:ve,hc:ve},p.N("hoverBackground","Background color of the editor hover.")),je=registerColor("editorHoverWidget.foreground",{light:be,dark:be,hc:be},p.N("hoverForeground","Foreground color of the editor hover.")),$e=registerColor("editorHoverWidget.border",{light:we,dark:we,hc:we},p.N("hoverBorder","Border color of the editor hover.")),Ge=registerColor("editorHoverWidget.statusBarBackground",{dark:lighten(Ke,.2),light:darken(Ke,.05),hc:ve},p.N("statusBarBackground","Background color of the editor hover status bar.")),qe=registerColor("editorLink.activeForeground",{dark:"#4E94CE",light:d.Il.blue,hc:d.Il.cyan},p.N("activeLinkForeground","Color of active links.")),Qe=registerColor("editorInlayHint.foreground",{dark:transparent(ee,.8),light:transparent(ee,.8),hc:ee},p.N("editorInlayHintForeground","Foreground color of inline hints")),Ze=registerColor("editorInlayHint.background",{dark:transparent(X,.6),light:transparent(X,.3),hc:X},p.N("editorInlayHintBackground","Background color of inline hints")),Ye=registerColor("editorInlayHint.typeForeground",{dark:Qe,light:Qe,hc:Qe},p.N("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Je=registerColor("editorInlayHint.typeBackground",{dark:Ze,light:Ze,hc:Ze},p.N("editorInlayHintBackgroundTypes","Background color of inline hints for types")),Xe=registerColor("editorInlayHint.parameterForeground",{dark:Qe,light:Qe,hc:Qe},p.N("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),et=registerColor("editorInlayHint.parameterBackground",{dark:Ze,light:Ze,hc:Ze},p.N("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),tt=registerColor("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},p.N("editorLightBulbForeground","The color used for the lightbulb actions icon.")),it=registerColor("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},p.N("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),nt=new d.Il(new d.VS(155,185,85,.2)),ot=new d.Il(new d.VS(255,0,0,.2)),st=registerColor("diffEditor.insertedTextBackground",{dark:nt,light:nt,hc:null},p.N("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),rt=registerColor("diffEditor.removedTextBackground",{dark:ot,light:ot,hc:null},p.N("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),at=registerColor("diffEditor.insertedLineBackground",{dark:null,light:null,hc:null},p.N("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),lt=registerColor("diffEditor.removedLineBackground",{dark:null,light:null,hc:null},p.N("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),ct=registerColor("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hc:null},p.N("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),dt=registerColor("diffEditorGutter.removedLineBackground",{dark:null,light:null,hc:null},p.N("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),ht=registerColor("diffEditorOverview.insertedForeground",{dark:null,light:null,hc:null},p.N("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),ut=registerColor("diffEditorOverview.removedForeground",{dark:null,light:null,hc:null},p.N("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),gt=registerColor("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},p.N("diffEditorInsertedOutline","Outline color for the text that got inserted.")),pt=registerColor("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},p.N("diffEditorRemovedOutline","Outline color for text that got removed.")),mt=registerColor("diffEditor.border",{dark:null,light:null,hc:L},p.N("diffEditorBorder","Border color between the two text editors.")),ft=registerColor("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},p.N("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),_t=registerColor("list.focusBackground",{dark:null,light:null,hc:null},p.N("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ct=registerColor("list.focusForeground",{dark:null,light:null,hc:null},p.N("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vt=registerColor("list.focusOutline",{dark:y,light:y,hc:x},p.N("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),bt=registerColor("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},p.N("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),wt=registerColor("list.activeSelectionForeground",{dark:d.Il.white,light:d.Il.white,hc:null},p.N("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),St=registerColor("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},p.N("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),yt=registerColor("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},p.N("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Lt=registerColor("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},p.N("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),xt=registerColor("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},p.N("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),kt=registerColor("list.inactiveFocusBackground",{dark:null,light:null,hc:null},p.N("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Nt=registerColor("list.inactiveFocusOutline",{dark:null,light:null,hc:null},p.N("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Dt=registerColor("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},p.N("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Et=registerColor("list.hoverForeground",{dark:null,light:null,hc:null},p.N("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Tt=registerColor("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},p.N("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),It=registerColor("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:y},p.N("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),At=registerColor("list.focusHighlightForeground",{dark:It,light:ifDefinedThenElse(bt,It,"#9DDDFF"),hc:It},p.N("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),Mt=(registerColor("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hc:"#B89500"},p.N("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),registerColor("list.errorForeground",{dark:"#F88070",light:"#B01011",hc:null},p.N("listErrorForeground","Foreground color of list items containing errors.")),registerColor("list.warningForeground",{dark:"#CCA700",light:"#855F00",hc:null},p.N("listWarningForeground","Foreground color of list items containing warnings.")),registerColor("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:d.Il.black},p.N("listFilterWidgetBackground","Background color of the type filter widget in lists and trees."))),Rt=registerColor("listFilterWidget.outline",{dark:d.Il.transparent,light:d.Il.transparent,hc:"#f38518"},p.N("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Pt=registerColor("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:L},p.N("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),Ot=(registerColor("list.filterMatchBackground",{dark:Be,light:Be,hc:null},p.N("listFilterMatchHighlight","Background color of the filtered match.")),registerColor("list.filterMatchBorder",{dark:He,light:He,hc:L},p.N("listFilterMatchHighlightBorder","Border color of the filtered match.")),registerColor("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},p.N("treeIndentGuidesStroke","Tree stroke color for the indentation guides."))),Ft=registerColor("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},p.N("tableColumnsBorder","Table border color between columns.")),Bt=registerColor("tree.tableOddRowsBackground",{dark:transparent(b,.04),light:transparent(b,.04),hc:null},p.N("tableOddRowsBackgroundColor","Background color for odd table rows.")),Wt=(registerColor("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hc:"#A7A8A9"},p.N("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. ")),registerColor("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,p.N("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead"))),Vt=registerColor("quickInputList.focusForeground",{dark:wt,light:wt,hc:wt},p.N("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Ht=registerColor("quickInputList.focusIconForeground",{dark:St,light:St,hc:St},p.N("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),zt=registerColor("quickInputList.focusBackground",{dark:oneOf(Wt,bt),light:oneOf(Wt,bt),hc:null},p.N("quickInput.listFocusBackground","Quick picker background color for the focused item.")),Ut=registerColor("menu.border",{dark:null,light:null,hc:L},p.N("menuBorder","Border color of menus.")),Kt=registerColor("menu.foreground",{dark:G,light:b,hc:G},p.N("menuForeground","Foreground color of menu items.")),jt=registerColor("menu.background",{dark:j,light:j,hc:j},p.N("menuBackground","Background color of menu items.")),$t=registerColor("menu.selectionForeground",{dark:wt,light:wt,hc:wt},p.N("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Gt=registerColor("menu.selectionBackground",{dark:bt,light:bt,hc:bt},p.N("menuSelectionBackground","Background color of the selected menu item in menus.")),qt=registerColor("menu.selectionBorder",{dark:null,light:null,hc:x},p.N("menuSelectionBorder","Border color of the selected menu item in menus.")),Qt=registerColor("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:L},p.N("menuSeparatorBackground","Color of a separator menu item in menus.")),Zt=registerColor("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},p.N("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),Yt=(registerColor("toolbar.hoverOutline",{dark:null,light:null,hc:x},p.N("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),registerColor("toolbar.activeBackground",{dark:lighten(Zt,.1),light:darken(Zt,.1),hc:null},p.N("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),registerColor("editor.snippetTabstopHighlightBackground",{dark:new d.Il(new d.VS(124,124,124,.3)),light:new d.Il(new d.VS(10,50,100,.2)),hc:new d.Il(new d.VS(124,124,124,.3))},p.N("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),registerColor("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},p.N("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),registerColor("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},p.N("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),registerColor("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new d.Il(new d.VS(10,50,100,.5)),hc:"#525252"},p.N("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),registerColor("breadcrumb.foreground",{light:transparent(b,.8),dark:transparent(b,.8),hc:transparent(b,.8)},p.N("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),registerColor("breadcrumb.background",{light:_e,dark:_e,hc:_e},p.N("breadcrumbsBackground","Background color of breadcrumb items.")),registerColor("breadcrumb.focusForeground",{light:darken(b,.2),dark:lighten(b,.1),hc:lighten(b,.1)},p.N("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),registerColor("breadcrumb.activeSelectionForeground",{light:darken(b,.2),dark:lighten(b,.1),hc:lighten(b,.1)},p.N("breadcrumbsSelectedForegound","Color of selected breadcrumb items.")),registerColor("breadcrumbPicker.background",{light:ve,dark:ve,hc:ve},p.N("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),.5),Jt=d.Il.fromHex("#40C8AE").transparent(Yt),Xt=d.Il.fromHex("#40A6FF").transparent(Yt),ei=d.Il.fromHex("#606060").transparent(.4),ti=.4,ii=1,ni=registerColor("merge.currentHeaderBackground",{dark:Jt,light:Jt,hc:null},p.N("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),oi=(registerColor("merge.currentContentBackground",{dark:transparent(ni,ti),light:transparent(ni,ti),hc:transparent(ni,ti)},p.N("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),registerColor("merge.incomingHeaderBackground",{dark:Xt,light:Xt,hc:null},p.N("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),si=(registerColor("merge.incomingContentBackground",{dark:transparent(oi,ti),light:transparent(oi,ti),hc:transparent(oi,ti)},p.N("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),registerColor("merge.commonHeaderBackground",{dark:ei,light:ei,hc:null},p.N("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),ri=(registerColor("merge.commonContentBackground",{dark:transparent(si,ti),light:transparent(si,ti),hc:transparent(si,ti)},p.N("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),registerColor("merge.border",{dark:null,light:null,hc:"#C3DF6F"},p.N("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."))),ai=(registerColor("editorOverviewRuler.currentContentForeground",{dark:transparent(ni,ii),light:transparent(ni,ii),hc:ri},p.N("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),registerColor("editorOverviewRuler.incomingContentForeground",{dark:transparent(oi,ii),light:transparent(oi,ii),hc:ri},p.N("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),registerColor("editorOverviewRuler.commonContentForeground",{dark:transparent(si,ii),light:transparent(si,ii),hc:ri},p.N("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),registerColor("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},p.N("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0)),li=registerColor("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},p.N("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ci=registerColor("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},p.N("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),di=registerColor("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},p.N("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),hi=registerColor("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},p.N("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),ui=registerColor("minimap.errorHighlight",{dark:new d.Il(new d.VS(255,18,18,.7)),light:new d.Il(new d.VS(255,18,18,.7)),hc:new d.Il(new d.VS(255,50,50,1))},p.N("minimapError","Minimap marker color for errors.")),gi=registerColor("minimap.warningHighlight",{dark:de,light:de,hc:he},p.N("overviewRuleWarning","Minimap marker color for warnings.")),pi=registerColor("minimap.background",{dark:null,light:null,hc:null},p.N("minimapBackground","Minimap background color.")),mi=registerColor("minimap.foregroundOpacity",{dark:d.Il.fromHex("#000f"),light:d.Il.fromHex("#000f"),hc:d.Il.fromHex("#000f")},p.N("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),fi=registerColor("minimapSlider.background",{light:transparent(ie,.5),dark:transparent(ie,.5),hc:transparent(ie,.5)},p.N("minimapSliderBackground","Minimap slider background color.")),_i=registerColor("minimapSlider.hoverBackground",{light:transparent(ne,.5),dark:transparent(ne,.5),hc:transparent(ne,.5)},p.N("minimapSliderHoverBackground","Minimap slider background color when hovering.")),Ci=registerColor("minimapSlider.activeBackground",{light:transparent(oe,.5),dark:transparent(oe,.5),hc:transparent(oe,.5)},p.N("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),vi=registerColor("problemsErrorIcon.foreground",{dark:ae,light:ae,hc:ae},p.N("problemsErrorIconForeground","The color used for the problems error icon.")),bi=registerColor("problemsWarningIcon.foreground",{dark:de,light:de,hc:de},p.N("problemsWarningIconForeground","The color used for the problems warning icon.")),wi=registerColor("problemsInfoIcon.foreground",{dark:ge,light:ge,hc:ge},p.N("problemsInfoIconForeground","The color used for the problems info icon."));registerColor("charts.foreground",{dark:b,light:b,hc:b},p.N("chartsForeground","The foreground color used in charts.")),registerColor("charts.lines",{dark:transparent(b,.5),light:transparent(b,.5),hc:transparent(b,.5)},p.N("chartsLines","The color used for horizontal lines in charts.")),registerColor("charts.red",{dark:ae,light:ae,hc:ae},p.N("chartsRed","The red color used in chart visualizations.")),registerColor("charts.blue",{dark:ge,light:ge,hc:ge},p.N("chartsBlue","The blue color used in chart visualizations.")),registerColor("charts.yellow",{dark:de,light:de,hc:de},p.N("chartsYellow","The yellow color used in chart visualizations.")),registerColor("charts.orange",{dark:ci,light:ci,hc:ci},p.N("chartsOrange","The orange color used in chart visualizations.")),registerColor("charts.green",{dark:"#89D185",light:"#388A34",hc:"#89D185"},p.N("chartsGreen","The green color used in chart visualizations.")),registerColor("charts.purple",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},p.N("chartsPurple","The purple color used in chart visualizations."));function executeTransform(e,o){var s,l,u;switch(e.op){case 0:return null===(s=resolveColorValue(e.value,o))||void 0===s?void 0:s.darken(e.factor);case 1:return null===(l=resolveColorValue(e.value,o))||void 0===l?void 0:l.lighten(e.factor);case 2:return null===(u=resolveColorValue(e.value,o))||void 0===u?void 0:u.transparent(e.factor);case 3:for(const s of e.values){const e=resolveColorValue(s,o);if(e)return e}return;case 5:return resolveColorValue(o.defines(e.if)?e.then:e.else,o);case 4:{const s=resolveColorValue(e.value,o);if(!s)return;const l=resolveColorValue(e.background,o);return l?s.isDarkerThan(l)?d.Il.getLighterColor(s,l,e.factor).transparent(e.transparency):d.Il.getDarkerColor(s,l,e.factor).transparent(e.transparency):s.transparent(e.factor*e.transparency)}default:throw(0,g.vE)(e)}}function darken(e,o){return{op:0,value:e,factor:o}}function lighten(e,o){return{op:1,value:e,factor:o}}function transparent(e,o){return{op:2,value:e,factor:o}}function oneOf(...e){return{op:3,values:e}}function ifDefinedThenElse(e,o,s){return{op:5,if:e,then:o,else:s}}function lessProminent(e,o,s,l){return{op:4,value:e,background:o,factor:s,transparency:l}}function resolveColorValue(e,o){if(null!==e)return"string"===typeof e?"#"===e[0]?d.Il.fromHex(e):o.getColor(e):e instanceof d.Il?e:"object"===typeof e?executeTransform(e,o):void 0}const Si="vscode://schemas/workbench-colors";let yi=f.B.as(m.I.JSONContribution);yi.registerSchema(Si,C.getColorSchema());const Li=new l.pY((()=>yi.notifySchemaChanged(Si)),200);C.onDidChangeSchema((()=>{Li.isScheduled()||Li.schedule()}))},9554:function(e,o,s){"use strict";s.d(o,{Ks:function(){return getIconRegistry},q5:function(){return registerIcon},s_:function(){return L}});var l=s(5393),d=s(3046),u=s(4669),g=s(3580),p=s(1294),m=s(9872),f=s(7781);const _={IconContribution:"base.contributions.icons"};var C;(function(e){function getDefinition(e,o){let s=e.defaults;while(f.kS.isThemeIcon(s)){const e=b.getIcon(s.id);if(!e)return;s=e.defaults}return s}e.getDefinition=getDefinition})(C||(C={}));class IconRegistry{constructor(){this._onDidChange=new u.Q5,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:(0,g.N)("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:(0,g.N)("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${d.dT.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,o,s,l){const d=this.iconsById[e];if(d){if(s&&!d.description){d.description=s,this.iconSchema.properties[e].markdownDescription=`${s} $(${e})`;const o=this.iconReferenceSchema.enum.indexOf(e);-1!==o&&(this.iconReferenceSchema.enumDescriptions[o]=s),this._onDidChange.fire()}return d}let u={id:e,description:s,defaults:o,deprecationMessage:l};this.iconsById[e]=u;let g={$ref:"#/definitions/icons"};return l&&(g.deprecationMessage=l),s&&(g.markdownDescription=`${s}: $(${e})`),this.iconSchema.properties[e]=g,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(s||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map((e=>this.iconsById[e]))}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const sorter=(e,o)=>e.id.localeCompare(o.id),classNames=e=>{while(f.kS.isThemeIcon(e.defaults))e=this.iconsById[e.defaults.id];return`codicon codicon-${e?e.id:""}`};let e=[];e.push("| preview     | identifier                        | default codicon ID                | description"),e.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const o=Object.keys(this.iconsById).map((e=>this.iconsById[e]));for(const s of o.filter((e=>!!e.description)).sort(sorter))e.push(`|<i class="${classNames(s)}"></i>|${s.id}|${f.kS.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);e.push("| preview     | identifier                        "),e.push("| ----------- | --------------------------------- |");for(const s of o.filter((e=>!f.kS.isThemeIcon(e.defaults))).sort(sorter))e.push(`|<i class="${classNames(s)}"></i>|${s.id}|`);return e.join("\n")}}const b=new IconRegistry;function registerIcon(e,o,s,l){return b.registerIcon(e,o,s,l)}function getIconRegistry(){return b}function initialize(){for(const e of d.lA.getAll())b.registerIcon(e.id,e.definition,e.description)}m.B.add(_.IconContribution,b),initialize();const w="vscode://schemas/icons";let S=m.B.as(p.I.JSONContribution);S.registerSchema(w,b.getIconSchema());const y=new l.pY((()=>S.notifySchemaChanged(w)),200);b.onDidChange((()=>{y.isScheduled()||y.schedule()}));const L=registerIcon("widget-close",d.lA.close,(0,g.N)("widgetClose","Icon for the close action in widgets."));registerIcon("goto-previous-location",d.lA.arrowUp,(0,g.N)("previousChangeIcon","Icon for goto previous editor location.")),registerIcon("goto-next-location",d.lA.arrowDown,(0,g.N)("nextChangeIcon","Icon for goto next editor location.")),f.kS.modify(d.lA.sync,"spin"),f.kS.modify(d.lA.loading,"spin")},8810:function(e,o,s){"use strict";s.d(o,{Jl:function(){return attachListStyler},O2:function(){return d},WZ:function(){return attachBadgeStyler},o:function(){return computeStyles},tj:function(){return attachMenuStyler}});var l=s(3910);function computeStyles(e,o){const s=Object.create(null);for(let d in o){const u=o[d];u&&(s[d]=(0,l.Snq)(u,e))}return s}function attachStyler(e,o,s){function applyStyles(){const l=computeStyles(e.getColorTheme(),o);"function"===typeof s?s(l):s.style(l)}return applyStyles(),e.onDidColorThemeChange(applyStyles)}function attachBadgeStyler(e,o,s){return attachStyler(o,{badgeBackground:(null===s||void 0===s?void 0:s.badgeBackground)||l.g8u,badgeForeground:(null===s||void 0===s?void 0:s.badgeForeground)||l.qeD,badgeBorder:l.lRK},e)}function attachListStyler(e,o,s){return attachStyler(o,Object.assign(Object.assign({},d),s||{}),e)}const d={listFocusBackground:l._bK,listFocusForeground:l._2n,listFocusOutline:l.Oop,listActiveSelectionBackground:l.dCr,listActiveSelectionForeground:l.M6C,listActiveSelectionIconForeground:l.Tnx,listFocusAndSelectionBackground:l.dCr,listFocusAndSelectionForeground:l.M6C,listInactiveSelectionBackground:l.rg2,listInactiveSelectionIconForeground:l.kvU,listInactiveSelectionForeground:l.ytC,listInactiveFocusBackground:l.s$,listInactiveFocusOutline:l.F3d,listHoverBackground:l.mV1,listHoverForeground:l.$d5,listDropBackground:l.AS1,listSelectionOutline:l.xL1,listHoverOutline:l.xL1,listFilterWidgetBackground:l.vGG,listFilterWidgetOutline:l.oSI,listFilterWidgetNoMatchesOutline:l.Saq,listMatchesShadow:l.rh,treeIndentGuidesStroke:l.UnT,tableColumnsBorder:l.uxu,tableOddRowsBackgroundColor:l.EQn},u={shadowColor:l.rh,borderColor:l.Cdg,foregroundColor:l.DEr,backgroundColor:l.Hz8,selectionForegroundColor:l.jbW,selectionBackgroundColor:l.$DX,selectionBorderColor:l.E3h,separatorColor:l.ZGJ,scrollbarShadow:l._wn,scrollbarSliderBackground:l.etL,scrollbarSliderHoverBackground:l.ABB,scrollbarSliderActiveBackground:l.ynu};function attachMenuStyler(e,o,s){return attachStyler(o,Object.assign(Object.assign({},u),s),e)}},2321:function(e,o,s){"use strict";var l;s.d(o,{e:function(){return l}}),function(e){e["DARK"]="dark",e["LIGHT"]="light",e["HIGH_CONTRAST"]="hc"}(l||(l={}))},7781:function(e,o,s){"use strict";s.d(o,{EN:function(){return themeColorFromId},IP:function(){return b},Ic:function(){return registerThemingParticipant},XE:function(){return f},bB:function(){return Themable},kS:function(){return C},m6:function(){return getThemeTypeSelector}});var l=s(3046),d=s(4669),u=s(5976),g=s(2065),p=s(9872),m=s(2321);const f=(0,g.yh)("themeService");var _,C;function themeColorFromId(e){return{id:e}}function getThemeTypeSelector(e){switch(e){case m.e.DARK:return"vs-dark";case m.e.HIGH_CONTRAST:return"hc-black";default:return"vs"}}(function(e){function isThemeColor(e){return e&&"object"===typeof e&&"string"===typeof e.id}e.isThemeColor=isThemeColor})(_||(_={})),function(e){function isThemeIcon(e){return e&&"object"===typeof e&&"string"===typeof e.id&&("undefined"===typeof e.color||_.isThemeColor(e.color))}e.isThemeIcon=isThemeIcon;const o=new RegExp(`^\\$\\((${l.dT.iconNameExpression}(?:${l.dT.iconModifierExpression})?)\\)$`);function fromString(e){const s=o.exec(e);if(!s)return;let[,l]=s;return{id:l}}function fromId(e){return{id:e}}function modify(e,o){let s=e.id;const l=s.lastIndexOf("~");return-1!==l&&(s=s.substring(0,l)),o&&(s=`${s}~${o}`),{id:s}}function getModifier(e){const o=e.id.lastIndexOf("~");if(-1!==o)return e.id.substring(o+1)}function isEqual(e,o){var s,l;return e.id===o.id&&(null===(s=e.color)||void 0===s?void 0:s.id)===(null===(l=o.color)||void 0===l?void 0:l.id)}function asThemeIcon(e,o){return{id:e.id,color:o?themeColorFromId(o):void 0}}e.fromString=fromString,e.fromId=fromId,e.modify=modify,e.getModifier=getModifier,e.isEqual=isEqual,e.asThemeIcon=asThemeIcon,e.asClassNameArray=l.dT.asClassNameArray,e.asClassName=l.dT.asClassName,e.asCSSSelector=l.dT.asCSSSelector}(C||(C={}));const b={ThemingContribution:"base.contributions.theming"};class ThemingRegistry{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new d.Q5}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),(0,u.OF)((()=>{const o=this.themingParticipants.indexOf(e);this.themingParticipants.splice(o,1)}))}getThemingParticipants(){return this.themingParticipants}}let w=new ThemingRegistry;function registerThemingParticipant(e){return w.onColorThemeChange(e)}p.B.add(b.ThemingContribution,w);class Themable extends u.JT{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange((e=>this.onThemeChange(e))))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}},4862:function(e,o,s){"use strict";s.d(o,{Xt:function(){return UndoRedoGroup},YO:function(){return ResourceEditStackSnapshot},gJ:function(){return UndoRedoSource},tJ:function(){return d}});var l=s(2065);const d=(0,l.yh)("undoRedoService");class ResourceEditStackSnapshot{constructor(e,o){this.resource=e,this.elements=o}}class UndoRedoGroup{constructor(){this.id=UndoRedoGroup._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}}UndoRedoGroup._ID=0,UndoRedoGroup.None=new UndoRedoGroup;class UndoRedoSource{constructor(){this.id=UndoRedoSource._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}}UndoRedoSource._ID=0,UndoRedoSource.None=new UndoRedoSource},382:function(e,o,s){"use strict";s.d(o,{A6:function(){return p},eb:function(){return isSingleFolderWorkspaceIdentifier},ec:function(){return g},md:function(){return WorkspaceFolder},uT:function(){return toWorkspaceIdentifier}});var l=s(3580),d=(s(3702),s(666)),u=s(2065);const g=(0,u.yh)("contextService");function isSingleFolderWorkspaceIdentifier(e){const o=e;return"string"===typeof(null===o||void 0===o?void 0:o.id)&&d.o.isUri(o.uri)}function toWorkspaceIdentifier(e){return e.configuration?{id:e.id,configPath:e.configuration}:1===e.folders.length?{id:e.id,uri:e.folders[0].uri}:void 0}class WorkspaceFolder{constructor(e,o){this.raw=o,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const p="code-workspace";(0,l.N)("codeWorkspace","Code Workspace")},3425:function(e,o,s){"use strict";s.d(o,{Y:function(){return d}});var l=s(2065);const d=(0,l.yh)("workspaceTrustManagementService")},9528:function(e,o,s){var l,d,u;!function(g){"use strict";function t(e,o){this.options={},e=e||this.options;var s={frequency:350,peak:1};for(var l in this.inputNode=this.filterNode=m.context.createBiquadFilter(),this.filterNode.type=o,this.outputNode=p.context.createGain(),this.filterNode.connect(this.outputNode),s)this[l]=e[l],this[l]=void 0===this[l]||null===this[l]?s[l]:this[l]}function i(){var e,o,s=m.context.sampleRate*this.time,l=p.context.createBuffer(2,s,m.context.sampleRate),d=l.getChannelData(0),u=l.getChannelData(1);for(o=0;s>o;o++)e=this.reverse?s-o:o,d[o]=(2*Math.random()-1)*Math.pow(1-e/s,this.decay),u[o]=(2*Math.random()-1)*Math.pow(1-e/s,this.decay);this.reverbNode.buffer&&(this.inputNode.disconnect(this.reverbNode),this.reverbNode.disconnect(this.wetGainNode),this.reverbNode=p.context.createConvolver(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode)),this.reverbNode.buffer=l}function n(e){for(var o=m.context.sampleRate,s=new Float32Array(o),l=Math.PI/180,d=0;o>d;d++){var u=2*d/o-1;s[d]=(3+e)*u*20*l/(Math.PI+e*Math.abs(u))}return s}var p={},m=p,f=e.exports,_=s.amdO;f?e.exports=p:_?(d=[],l=p,u="function"===typeof l?l.apply(o,d):l,void 0===u||(e.exports=u)):g.Pizzicato=g.Pz=p;var C=g.AudioContext||g.webkitAudioContext;if(C){p.context=new C;var b=p.context.createGain();b.connect(p.context.destination),p.Util={isString:function(e){return"[object String]"===toString.call(e)},isObject:function(e){return"[object Object]"===toString.call(e)},isFunction:function(e){return"[object Function]"===toString.call(e)},isNumber:function(e){return"[object Number]"===toString.call(e)&&e===+e},isArray:function(e){return"[object Array]"===toString.call(e)},isInRange:function(e,o,s){return!!(m.Util.isNumber(e)&&m.Util.isNumber(o)&&m.Util.isNumber(s))&&(e>=o&&s>=e)},isBool:function(e){return"boolean"==typeof e},isOscillator:function(e){return e&&"[object OscillatorNode]"===e.toString()},isAudioBufferSourceNode:function(e){return e&&"[object AudioBufferSourceNode]"===e.toString()},isSound:function(e){return e instanceof m.Sound},isEffect:function(e){for(var o in p.Effects)if(e instanceof p.Effects[o])return!0;return!1},normalize:function(e,o,s){return m.Util.isNumber(e)&&m.Util.isNumber(o)&&m.Util.isNumber(s)?(s-o)*e/1+o:void 0},getDryLevel:function(e){return!m.Util.isNumber(e)||e>1||0>e?0:.5>=e?1:1-2*(e-.5)},getWetLevel:function(e){return!m.Util.isNumber(e)||e>1||0>e?0:e>=.5?1:1-2*(.5-e)}};var w=p.context.createGain(),S=Object.getPrototypeOf(Object.getPrototypeOf(w)),y=S.connect;S.connect=function(e){var o=m.Util.isEffect(e)?e.inputNode:e;return y.call(this,o),e},Object.defineProperty(p,"volume",{enumerable:!0,get:function(){return b.gain.value},set:function(e){m.Util.isInRange(e,0,1)&&b&&(b.gain.value=e)}}),Object.defineProperty(p,"masterGainNode",{enumerable:!1,get:function(){return b},set:function(e){console.error("Can't set the master gain node")}}),p.Events={on:function(e,o,s){if(e&&o){this._events=this._events||{};var l=this._events[e]||(this._events[e]=[]);l.push({callback:o,context:s||this,handler:this})}},trigger:function(e){var o,s,l,d;if(e&&(this._events=this._events||{},o=this._events[e]||(this._events[e]=[]))){for(s=Math.max(0,arguments.length-1),l=[],d=0;s>d;d++)l[d]=arguments[d+1];for(d=0;d<o.length;d++)o[d].callback.apply(o[d].context,l)}},off:function(e){e?this._events[e]=void 0:this._events={}}},p.Sound=function(e,o){function i(e){var o=["wave","file","input","script","sound"];if(e&&!l.isFunction(e)&&!l.isString(e)&&!l.isObject(e))return"Description type not supported. Initialize a sound using an object, a function or a string.";if(l.isObject(e)){if(!l.isString(e.source)||-1===o.indexOf(e.source))return"Specified source not supported. Sources can be wave, file, input or script";if(!("file"!==e.source||e.options&&e.options.path))return"A path is needed for sounds with a file source";if(!("script"!==e.source||e.options&&e.options.audioFunction))return"An audio function is needed for sounds with a script source"}}function n(e,o){e=e||{},this.getRawSourceNode=function(){var o=this.sourceNode?this.sourceNode.frequency.value:e.frequency,s=p.context.createOscillator();return s.type=e.type||"sine",s.frequency.value=o||440,s},this.sourceNode=this.getRawSourceNode(),this.sourceNode.gainSuccessor=m.context.createGain(),this.sourceNode.connect(this.sourceNode.gainSuccessor),l.isFunction(o)&&o()}function a(e,o){e=l.isArray(e)?e:[e];var d=new XMLHttpRequest;d.open("GET",e[0],!0),d.responseType="arraybuffer",d.onload=function(d){p.context.decodeAudioData(d.target.response,function(e){s.getRawSourceNode=function(){var o=p.context.createBufferSource();return o.loop=this.loop,o.buffer=e,o},l.isFunction(o)&&o()}.bind(s),function(s){return console.error("Error decoding audio file "+e[0]),e.length>1?(e.shift(),void a(e,o)):(s=s||new Error("Error decoding audio file "+e[0]),void(l.isFunction(o)&&o(s)))}.bind(s))},d.onreadystatechange=function(o){4===d.readyState&&200!==d.status&&console.error("Error while fetching "+e[0]+". "+d.statusText)},d.send()}function r(e,o){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia||navigator.mediaDevices.getUserMedia){var d=function(e){s.getRawSourceNode=function(){return p.context.createMediaStreamSource(e)},l.isFunction(o)&&o()}.bind(s),n=function(e){l.isFunction(o)&&o(e)};navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(d)["catch"](n):navigator.getUserMedia({audio:!0},d,n)}else console.error("Your browser does not support getUserMedia")}function c(e,o){var s=l.isFunction(e)?e:e.audioFunction,d=l.isObject(e)&&e.bufferSize?e.bufferSize:null;if(!d)try{p.context.createScriptProcessor()}catch(m){d=2048}this.getRawSourceNode=function(){var e=p.context.createScriptProcessor(d,1,1);return e.onaudioprocess=s,e}}function h(e,o){this.getRawSourceNode=e.sound.getRawSourceNode,e.sound.sourceNode&&m.Util.isOscillator(e.sound.sourceNode)&&(this.sourceNode=this.getRawSourceNode(),this.frequency=e.sound.frequency)}var s=this,l=p.Util,d=i(e),u=l.isObject(e)&&l.isObject(e.options),g=.04,f=.04;if(d)throw console.error(d),new Error("Error initializing Pizzicato Sound: "+d);this.detached=u&&e.options.detached,this.masterVolume=p.context.createGain(),this.fadeNode=p.context.createGain(),this.fadeNode.gain.value=0,this.detached||this.masterVolume.connect(p.masterGainNode),this.lastTimePlayed=0,this.effects=[],this.effectConnectors=[],this.playing=this.paused=!1,this.loop=u&&e.options.loop,this.attack=u&&l.isNumber(e.options.attack)?e.options.attack:g,this.volume=u&&l.isNumber(e.options.volume)?e.options.volume:1,u&&l.isNumber(e.options.release)?this.release=e.options.release:u&&l.isNumber(e.options.sustain)?(console.warn("'sustain' is deprecated. Use 'release' instead."),this.release=e.options.sustain):this.release=f,e?l.isString(e)?a.bind(this)(e,o):l.isFunction(e)?c.bind(this)(e,o):"file"===e.source?a.bind(this)(e.options.path,o):"wave"===e.source?n.bind(this)(e.options,o):"input"===e.source?r.bind(this)(e,o):"script"===e.source?c.bind(this)(e.options,o):"sound"===e.source&&h.bind(this)(e.options,o):n.bind(this)({},o)},p.Sound.prototype=Object.create(p.Events,{play:{enumerable:!0,value:function(e,o){this.playing||(m.Util.isNumber(o)||(o=this.offsetTime||0),m.Util.isNumber(e)||(e=0),this.playing=!0,this.paused=!1,this.sourceNode=this.getSourceNode(),this.applyAttack(),m.Util.isFunction(this.sourceNode.start)&&(this.lastTimePlayed=p.context.currentTime-o,this.sourceNode.start(m.context.currentTime+e,o)),this.trigger("play"))}},stop:{enumerable:!0,value:function(){(this.paused||this.playing)&&(this.paused=this.playing=!1,this.stopWithRelease(),this.offsetTime=0,this.trigger("stop"))}},pause:{enumerable:!0,value:function(){if(!this.paused&&this.playing){this.paused=!0,this.playing=!1,this.stopWithRelease();var e=m.context.currentTime-this.lastTimePlayed;this.sourceNode.buffer?this.offsetTime=e%(this.sourceNode.buffer.length/m.context.sampleRate):this.offsetTime=e,this.trigger("pause")}}},clone:{enumerable:!0,value:function(){for(var e=new p.Sound({source:"sound",options:{loop:this.loop,attack:this.attack,release:this.release,volume:this.volume,sound:this}}),o=0;o<this.effects.length;o++)e.addEffect(this.effects[o]);return e}},onEnded:{enumerable:!0,value:function(e){return function(){this.sourceNode&&this.sourceNode!==e||(this.playing&&this.stop(),this.paused||this.trigger("end"))}}},addEffect:{enumerable:!0,value:function(e){if(!m.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var o=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.fadeNode;o.disconnect(),o.connect(e);var s=m.context.createGain();return this.effectConnectors.push(s),e.connect(s),s.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var o=this.effects.indexOf(e);if(-1===o)return console.warn("Cannot remove effect that is not applied to this sound."),this;var s=this.playing;s&&this.pause();var l=0===o?this.fadeNode:this.effectConnectors[o-1];l.disconnect();var d,u=this.effectConnectors[o];return u.disconnect(),e.disconnect(u),this.effectConnectors.splice(o,1),this.effects.splice(o,1),d=o>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[o],l.connect(d),s&&this.play(),this}},connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},connectEffects:{enumerable:!0,value:function(){for(var e=[],o=0;o<this.effects.length;o++){var s=o===this.effects.length-1,l=s?this.masterVolume:this.effects[o+1].inputNode;e[o]=m.context.createGain(),this.effects[o].outputNode.disconnect(this.effectConnectors[o]),this.effects[o].outputNode.connect(l)}}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){m.Util.isInRange(e,0,1)&&this.masterVolume&&(this.masterVolume.gain.value=e)}},frequency:{enumerable:!0,get:function(){return this.sourceNode&&m.Util.isOscillator(this.sourceNode)?this.sourceNode.frequency.value:null},set:function(e){this.sourceNode&&m.Util.isOscillator(this.sourceNode)&&(this.sourceNode.frequency.value=e)}},sustain:{enumerable:!0,get:function(){return console.warn("'sustain' is deprecated. Use 'release' instead."),this.release},set:function(e){console.warn("'sustain' is deprecated. Use 'release' instead."),m.Util.isInRange(e,0,10)&&(this.release=e)}},getSourceNode:{enumerable:!0,value:function(){if(this.sourceNode){var e=this.sourceNode;e.gainSuccessor.gain.setValueAtTime(e.gainSuccessor.gain.value,m.context.currentTime),e.gainSuccessor.gain.linearRampToValueAtTime(1e-4,m.context.currentTime+.2),setTimeout((function(){e.disconnect(),e.gainSuccessor.disconnect()}),200)}var o=this.getRawSourceNode();return o.gainSuccessor=m.context.createGain(),o.connect(o.gainSuccessor),o.gainSuccessor.connect(this.fadeNode),this.fadeNode.connect(this.getInputNode()),m.Util.isAudioBufferSourceNode(o)&&(o.onended=this.onEnded(o).bind(this)),o}},getInputNode:{enumerable:!0,value:function(){return this.effects.length>0?this.effects[0].inputNode:this.masterVolume}},applyAttack:{enumerable:!1,value:function(){if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(m.context.currentTime),this.attack){var e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,o=this.attack;e||(o=(1-this.fadeNode.gain.value)*this.attack),this.fadeNode.gain.setTargetAtTime(1,m.context.currentTime,2*o)}else this.fadeNode.gain.setTargetAtTime(1,m.context.currentTime,.001)}},stopWithRelease:{enumerable:!1,value:function(e){var o=this.sourceNode,i=function(){return m.Util.isFunction(o.stop)?o.stop(0):o.disconnect()};if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(m.context.currentTime),!this.release)return this.fadeNode.gain.setTargetAtTime(0,m.context.currentTime,.001),void i();var s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,l=this.release;s||(l=this.fadeNode.gain.value*this.release),this.fadeNode.gain.setTargetAtTime(1e-5,m.context.currentTime,l/5),window.setTimeout((function(){i()}),1e3*l)}}}),p.Group=function(e){e=e||[],this.mergeGainNode=m.context.createGain(),this.masterVolume=m.context.createGain(),this.sounds=[],this.effects=[],this.effectConnectors=[],this.mergeGainNode.connect(this.masterVolume),this.masterVolume.connect(m.masterGainNode);for(var o=0;o<e.length;o++)this.addSound(e[o])},p.Group.prototype=Object.create(m.Events,{connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},addSound:{enumerable:!0,value:function(e){return m.Util.isSound(e)?this.sounds.indexOf(e)>-1?void console.warn("The Pizzicato.Sound object was already added to this group"):e.detached?void console.warn("Groups do not support detached sounds. You can manually create an audio graph to group detached sounds together."):(e.disconnect(m.masterGainNode),e.connect(this.mergeGainNode),void this.sounds.push(e)):void console.error("You can only add Pizzicato.Sound objects")}},removeSound:{enumerable:!0,value:function(e){var o=this.sounds.indexOf(e);return-1===o?void console.warn("Cannot remove a sound that is not part of this group."):(e.disconnect(this.mergeGainNode),e.connect(m.masterGainNode),void this.sounds.splice(o,1))}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){m.Util.isInRange(e,0,1)&&(this.masterVolume.gain.value=e)}},play:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].play();this.trigger("play")}},stop:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].stop();this.trigger("stop")}},pause:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].pause();this.trigger("pause")}},addEffect:{enumerable:!0,value:function(e){if(!m.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var o=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.mergeGainNode;o.disconnect(),o.connect(e);var s=m.context.createGain();return this.effectConnectors.push(s),e.connect(s),s.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var o=this.effects.indexOf(e);if(-1===o)return console.warn("Cannot remove effect that is not applied to this group."),this;var s=0===o?this.mergeGainNode:this.effectConnectors[o-1];s.disconnect();var l,d=this.effectConnectors[o];return d.disconnect(),e.disconnect(d),this.effectConnectors.splice(o,1),this.effects.splice(o,1),l=o>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[o],s.connect(l),this}}}),p.Effects={};var L=Object.create(null,{connect:{enumerable:!0,value:function(e){return this.outputNode.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.outputNode.disconnect(e),this}}});p.Effects.Delay=function(e){this.options={},e=e||this.options;var o={feedback:.5,time:.3,mix:.5};for(var s in this.inputNode=p.context.createGain(),this.outputNode=p.context.createGain(),this.dryGainNode=p.context.createGain(),this.wetGainNode=p.context.createGain(),this.feedbackGainNode=p.context.createGain(),this.delayNode=p.context.createDelay(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.delayNode),this.inputNode.connect(this.delayNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]},p.Effects.Delay.prototype=Object.create(L,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=p.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=p.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){m.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),p.Effects.Compressor=function(e){this.options={},e=e||this.options;var o={threshold:-24,knee:30,attack:.003,release:.25,ratio:12};for(var s in this.inputNode=this.compressorNode=p.context.createDynamicsCompressor(),this.outputNode=p.context.createGain(),this.compressorNode.connect(this.outputNode),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]},p.Effects.Compressor.prototype=Object.create(L,{threshold:{enumerable:!0,get:function(){return this.compressorNode.threshold.value},set:function(e){p.Util.isInRange(e,-100,0)&&(this.compressorNode.threshold.value=e)}},knee:{enumerable:!0,get:function(){return this.compressorNode.knee.value},set:function(e){p.Util.isInRange(e,0,40)&&(this.compressorNode.knee.value=e)}},attack:{enumerable:!0,get:function(){return this.compressorNode.attack.value},set:function(e){p.Util.isInRange(e,0,1)&&(this.compressorNode.attack.value=e)}},release:{enumerable:!0,get:function(){return this.compressorNode.release.value},set:function(e){p.Util.isInRange(e,0,1)&&(this.compressorNode.release.value=e)}},ratio:{enumerable:!0,get:function(){return this.compressorNode.ratio.value},set:function(e){p.Util.isInRange(e,1,20)&&(this.compressorNode.ratio.value=e)}},getCurrentGainReduction:function(){return this.compressorNode.reduction}}),p.Effects.LowPassFilter=function(e){t.call(this,e,"lowpass")},p.Effects.HighPassFilter=function(e){t.call(this,e,"highpass")};var x=Object.create(L,{frequency:{enumerable:!0,get:function(){return this.filterNode.frequency.value},set:function(e){p.Util.isInRange(e,10,22050)&&(this.filterNode.frequency.value=e)}},peak:{enumerable:!0,get:function(){return this.filterNode.Q.value},set:function(e){p.Util.isInRange(e,1e-4,1e3)&&(this.filterNode.Q.value=e)}}});p.Effects.LowPassFilter.prototype=x,p.Effects.HighPassFilter.prototype=x,p.Effects.Distortion=function(e){this.options={},e=e||this.options;var o={gain:.5};for(var s in this.waveShaperNode=p.context.createWaveShaper(),this.inputNode=this.outputNode=this.waveShaperNode,o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]},p.Effects.Distortion.prototype=Object.create(L,{gain:{enumerable:!0,get:function(){return this.options.gain},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.gain=e,this.adjustGain())}},adjustGain:{writable:!1,configurable:!1,enumerable:!1,value:function(){for(var e,o=m.Util.isNumber(this.options.gain)?parseInt(100*this.options.gain,10):50,s=44100,l=new Float32Array(s),d=Math.PI/180,u=0;s>u;++u)e=2*u/s-1,l[u]=(3+o)*e*20*d/(Math.PI+o*Math.abs(e));this.waveShaperNode.curve=l}}}),p.Effects.Flanger=function(e){this.options={},e=e||this.options;var o={time:.45,speed:.2,depth:.1,feedback:.1,mix:.5};for(var s in this.inputNode=p.context.createGain(),this.outputNode=p.context.createGain(),this.inputFeedbackNode=p.context.createGain(),this.wetGainNode=p.context.createGain(),this.dryGainNode=p.context.createGain(),this.delayNode=p.context.createDelay(),this.oscillatorNode=p.context.createOscillator(),this.gainNode=p.context.createGain(),this.feedbackNode=p.context.createGain(),this.oscillatorNode.type="sine",this.inputNode.connect(this.inputFeedbackNode),this.inputNode.connect(this.dryGainNode),this.inputFeedbackNode.connect(this.delayNode),this.inputFeedbackNode.connect(this.wetGainNode),this.delayNode.connect(this.wetGainNode),this.delayNode.connect(this.feedbackNode),this.feedbackNode.connect(this.inputFeedbackNode),this.oscillatorNode.connect(this.gainNode),this.gainNode.connect(this.delayNode.delayTime),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),this.oscillatorNode.start(0),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]},p.Effects.Flanger.prototype=Object.create(L,{time:{enumberable:!0,get:function(){return this.options.time},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.time=e,this.delayNode.delayTime.value=m.Util.normalize(e,.001,.02))}},speed:{enumberable:!0,get:function(){return this.options.speed},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.speed=e,this.oscillatorNode.frequency.value=m.Util.normalize(e,.5,5))}},depth:{enumberable:!0,get:function(){return this.options.depth},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.depth=e,this.gainNode.gain.value=m.Util.normalize(e,5e-4,.005))}},feedback:{enumberable:!0,get:function(){return this.options.feedback},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.feedback=e,this.feedbackNode.gain.value=m.Util.normalize(e,0,.8))}},mix:{enumberable:!0,get:function(){return this.options.mix},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=p.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=p.Util.getWetLevel(this.mix))}}}),p.Effects.StereoPanner=function(e){this.options={},e=e||this.options;var o={pan:0};for(var s in this.inputNode=p.context.createGain(),this.outputNode=p.context.createGain(),p.context.createStereoPanner?(this.pannerNode=p.context.createStereoPanner(),this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):p.context.createPanner?(console.warn("Your browser does not support the StereoPannerNode. Will use PannerNode instead."),this.pannerNode=p.context.createPanner(),this.pannerNode.type="equalpower",this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):(console.warn("Your browser does not support the Panner effect."),this.inputNode.connect(this.outputNode)),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]},p.Effects.StereoPanner.prototype=Object.create(L,{pan:{enumerable:!0,get:function(){return this.options.pan},set:function(e){if(m.Util.isInRange(e,-1,1)&&(this.options.pan=e,this.pannerNode)){var o=this.pannerNode.toString().indexOf("StereoPannerNode")>-1;o?this.pannerNode.pan.value=e:this.pannerNode.setPosition(e,0,1-Math.abs(e))}}}}),p.Effects.Convolver=function(e,o){this.options={},e=e||this.options;var s=this,l=new XMLHttpRequest,d={mix:.5};for(var u in this.callback=o,this.inputNode=p.context.createGain(),this.convolverNode=p.context.createConvolver(),this.outputNode=p.context.createGain(),this.wetGainNode=p.context.createGain(),this.dryGainNode=p.context.createGain(),this.inputNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),d)this[u]=e[u],this[u]=void 0===this[u]||null===this[u]?d[u]:this[u];return e.impulse?(l.open("GET",e.impulse,!0),l.responseType="arraybuffer",l.onload=function(e){var o=e.target.response;p.context.decodeAudioData(o,(function(e){s.convolverNode.buffer=e,s.callback&&m.Util.isFunction(s.callback)&&s.callback()}),(function(e){e=e||new Error("Error decoding impulse file"),s.callback&&m.Util.isFunction(s.callback)&&s.callback(e)}))},l.onreadystatechange=function(o){4===l.readyState&&200!==l.status&&console.error("Error while fetching "+e.impulse+". "+l.statusText)},void l.send()):void console.error("No impulse file specified.")},p.Effects.Convolver.prototype=Object.create(L,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=p.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=p.Util.getWetLevel(this.mix))}}}),p.Effects.PingPongDelay=function(e){this.options={},e=e||this.options;var o={feedback:.5,time:.3,mix:.5};for(var s in this.inputNode=p.context.createGain(),this.outputNode=p.context.createGain(),this.delayNodeLeft=p.context.createDelay(),this.delayNodeRight=p.context.createDelay(),this.dryGainNode=p.context.createGain(),this.wetGainNode=p.context.createGain(),this.feedbackGainNode=p.context.createGain(),this.channelMerger=p.context.createChannelMerger(2),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNodeLeft.connect(this.channelMerger,0,0),this.delayNodeRight.connect(this.channelMerger,0,1),this.delayNodeLeft.connect(this.delayNodeRight),this.feedbackGainNode.connect(this.delayNodeLeft),this.delayNodeRight.connect(this.feedbackGainNode),this.inputNode.connect(this.feedbackGainNode),this.channelMerger.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]},p.Effects.PingPongDelay.prototype=Object.create(L,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=p.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=p.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){m.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNodeLeft.delayTime.value=e,this.delayNodeRight.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),p.Effects.Reverb=function(e){this.options={},e=e||this.options;var o={mix:.5,time:.01,decay:.01,reverse:!1};for(var s in this.inputNode=p.context.createGain(),this.reverbNode=p.context.createConvolver(),this.outputNode=p.context.createGain(),this.wetGainNode=p.context.createGain(),this.dryGainNode=p.context.createGain(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s];i.bind(this)()},p.Effects.Reverb.prototype=Object.create(L,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=p.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=p.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){m.Util.isInRange(e,1e-4,10)&&(this.options.time=e,i.bind(this)())}},decay:{enumerable:!0,get:function(){return this.options.decay},set:function(e){m.Util.isInRange(e,1e-4,10)&&(this.options.decay=e,i.bind(this)())}},reverse:{enumerable:!0,get:function(){return this.options.reverse},set:function(e){m.Util.isBool(e)&&(this.options.reverse=e,i.bind(this)())}}}),p.Effects.Tremolo=function(e){this.options={},e=e||this.options;var o={speed:4,depth:1,mix:.8};for(var s in this.inputNode=p.context.createGain(),this.outputNode=p.context.createGain(),this.dryGainNode=p.context.createGain(),this.wetGainNode=p.context.createGain(),this.tremoloGainNode=p.context.createGain(),this.tremoloGainNode.gain.value=0,this.lfoNode=p.context.createOscillator(),this.shaperNode=p.context.createWaveShaper(),this.shaperNode.curve=new Float32Array([0,1]),this.shaperNode.connect(this.tremoloGainNode.gain),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.lfoNode.connect(this.shaperNode),this.lfoNode.type="sine",this.lfoNode.start(0),this.inputNode.connect(this.tremoloGainNode),this.tremoloGainNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]},p.Effects.Tremolo.prototype=Object.create(L,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=p.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=p.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){m.Util.isInRange(e,0,20)&&(this.options.speed=e,this.lfoNode.frequency.value=e)}},depth:{enumerable:!0,get:function(){return this.options.depth},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.depth=e,this.shaperNode.curve=new Float32Array([1-e,1]))}}}),p.Effects.DubDelay=function(e){this.options={},e=e||this.options;var o={feedback:.6,time:.7,mix:.5,cutoff:700};for(var s in this.inputNode=p.context.createGain(),this.outputNode=p.context.createGain(),this.dryGainNode=p.context.createGain(),this.wetGainNode=p.context.createGain(),this.feedbackGainNode=p.context.createGain(),this.delayNode=p.context.createDelay(),this.bqFilterNode=p.context.createBiquadFilter(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.bqFilterNode),this.bqFilterNode.connect(this.delayNode),this.delayNode.connect(this.feedbackGainNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]},p.Effects.DubDelay.prototype=Object.create(L,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=p.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=p.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){m.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}},cutoff:{enumerable:!0,get:function(){return this.options.cutoff},set:function(e){m.Util.isInRange(e,0,4e3)&&(this.options.cutoff=e,this.bqFilterNode.frequency.value=this.cutoff)}}}),p.Effects.RingModulator=function(e){this.options={},e=e||this.options;var o={speed:30,distortion:1,mix:.5};for(var s in this.inputNode=p.context.createGain(),this.outputNode=p.context.createGain(),this.dryGainNode=p.context.createGain(),this.wetGainNode=p.context.createGain(),this.vIn=p.context.createOscillator(),this.vIn.start(0),this.vInGain=p.context.createGain(),this.vInGain.gain.value=.5,this.vInInverter1=p.context.createGain(),this.vInInverter1.gain.value=-1,this.vInInverter2=p.context.createGain(),this.vInInverter2.gain.value=-1,this.vInDiode1=new v(p.context),this.vInDiode2=new v(p.context),this.vInInverter3=p.context.createGain(),this.vInInverter3.gain.value=-1,this.vcInverter1=p.context.createGain(),this.vcInverter1.gain.value=-1,this.vcDiode3=new v(p.context),this.vcDiode4=new v(p.context),this.outGain=p.context.createGain(),this.outGain.gain.value=3,this.compressor=p.context.createDynamicsCompressor(),this.compressor.threshold.value=-24,this.compressor.ratio.value=16,this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.vcInverter1),this.inputNode.connect(this.vcDiode4.node),this.vcInverter1.connect(this.vcDiode3.node),this.vIn.connect(this.vInGain),this.vInGain.connect(this.vInInverter1),this.vInGain.connect(this.vcInverter1),this.vInGain.connect(this.vcDiode4.node),this.vInInverter1.connect(this.vInInverter2),this.vInInverter1.connect(this.vInDiode2.node),this.vInInverter2.connect(this.vInDiode1.node),this.vInDiode1.connect(this.vInInverter3),this.vInDiode2.connect(this.vInInverter3),this.vInInverter3.connect(this.compressor),this.vcDiode3.connect(this.compressor),this.vcDiode4.connect(this.compressor),this.compressor.connect(this.outGain),this.outGain.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),o)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?o[s]:this[s]};var v=function(e){this.context=e,this.node=this.context.createWaveShaper(),this.vb=.2,this.vl=.4,this.h=1,this.setCurve()};return v.prototype.setDistortion=function(e){return this.h=e,this.setCurve()},v.prototype.setCurve=function(){var e,o,s,l,d,u,g;for(o=1024,d=new Float32Array(o),e=u=0,g=d.length;g>=0?g>u:u>g;e=g>=0?++u:--u)s=(e-o/2)/(o/2),s=Math.abs(s),l=s<=this.vb?0:this.vb<s&&s<=this.vl?this.h*(Math.pow(s-this.vb,2)/(2*this.vl-2*this.vb)):this.h*s-this.h*this.vl+this.h*(Math.pow(this.vl-this.vb,2)/(2*this.vl-2*this.vb)),d[e]=l;return this.node.curve=d},v.prototype.connect=function(e){return this.node.connect(e)},p.Effects.RingModulator.prototype=Object.create(L,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=p.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=p.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){m.Util.isInRange(e,0,2e3)&&(this.options.speed=e,this.vIn.frequency.value=e)}},distortion:{enumerable:!0,get:function(){return this.options.distortion},set:function(e){if(m.Util.isInRange(e,.2,50)){this.options.distortion=parseFloat(e,10);for(var o=[this.vInDiode1,this.vInDiode2,this.vcDiode3,this.vcDiode4],s=0,l=o.length;l>s;s++)o[s].setDistortion(e)}}}}),p.Effects.Quadrafuzz=function(e){this.options={},e=e||this.options;var o={lowGain:.6,midLowGain:.8,midHighGain:.5,highGain:.6};this.inputNode=m.context.createGain(),this.outputNode=m.context.createGain(),this.dryGainNode=m.context.createGain(),this.wetGainNode=m.context.createGain(),this.lowpassLeft=m.context.createBiquadFilter(),this.lowpassLeft.type="lowpass",this.lowpassLeft.frequency.value=147,this.lowpassLeft.Q.value=.7071,this.bandpass1Left=m.context.createBiquadFilter(),this.bandpass1Left.type="bandpass",this.bandpass1Left.frequency.value=587,this.bandpass1Left.Q.value=.7071,this.bandpass2Left=m.context.createBiquadFilter(),this.bandpass2Left.type="bandpass",this.bandpass2Left.frequency.value=2490,this.bandpass2Left.Q.value=.7071,this.highpassLeft=m.context.createBiquadFilter(),this.highpassLeft.type="highpass",this.highpassLeft.frequency.value=4980,this.highpassLeft.Q.value=.7071,this.overdrives=[];for(var s=0;4>s;s++)this.overdrives[s]=m.context.createWaveShaper(),this.overdrives[s].curve=n();this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode);var l=[this.lowpassLeft,this.bandpass1Left,this.bandpass2Left,this.highpassLeft];for(s=0;s<l.length;s++)this.wetGainNode.connect(l[s]),l[s].connect(this.overdrives[s]),this.overdrives[s].connect(this.outputNode);for(var d in o)this[d]=e[d],this[d]=void 0===this[d]||null===this[d]?o[d]:this[d]},p.Effects.Quadrafuzz.prototype=Object.create(L,{lowGain:{enumerable:!0,get:function(){return this.options.lowGain},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.lowGain=e,this.overdrives[0].curve=n(m.Util.normalize(this.lowGain,0,150)))}},midLowGain:{enumerable:!0,get:function(){return this.options.midLowGain},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.midLowGain=e,this.overdrives[1].curve=n(m.Util.normalize(this.midLowGain,0,150)))}},midHighGain:{enumerable:!0,get:function(){return this.options.midHighGain},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.midHighGain=e,this.overdrives[2].curve=n(m.Util.normalize(this.midHighGain,0,150)))}},highGain:{enumerable:!0,get:function(){return this.options.highGain},set:function(e){m.Util.isInRange(e,0,1)&&(this.options.highGain=e,this.overdrives[3].curve=n(m.Util.normalize(this.highGain,0,150)))}}}),p}console.error("No AudioContext found in this environment. Please ensure your window or global object contains a working AudioContext constructor function.")}("undefined"!=typeof window?window:s.g)},5205:function(e,o,s){"use strict";s.d(o,{z:function(){return register}});var l,isLocalhost=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function register(e,o){void 0===o&&(o={});var s=o.registrationOptions;void 0===s&&(s={}),delete o.registrationOptions;var emit=function(e){var s=[],l=arguments.length-1;while(l-- >0)s[l]=arguments[l+1];o&&o[e]&&o[e].apply(o,s)};"serviceWorker"in navigator&&l.then((function(){isLocalhost()?(checkValidServiceWorker(e,emit,s),navigator.serviceWorker.ready.then((function(e){emit("ready",e)})).catch((function(e){return handleError(emit,e)}))):(registerValidSW(e,emit,s),navigator.serviceWorker.ready.then((function(e){emit("ready",e)})).catch((function(e){return handleError(emit,e)})))}))}function handleError(e,o){navigator.onLine||e("offline"),e("error",o)}function registerValidSW(e,o,s){navigator.serviceWorker.register(e,s).then((function(e){o("registered",e),e.waiting?o("updated",e):e.onupdatefound=function(){o("updatefound",e);var s=e.installing;s.onstatechange=function(){"installed"===s.state&&(navigator.serviceWorker.controller?o("updated",e):o("cached",e))}}})).catch((function(e){return handleError(o,e)}))}function checkValidServiceWorker(e,o,s){fetch(e).then((function(l){404===l.status?(o("error",new Error("Service worker not found at "+e)),unregister()):-1===l.headers.get("content-type").indexOf("javascript")?(o("error",new Error("Expected "+e+" to have javascript content-type, but received "+l.headers.get("content-type"))),unregister()):registerValidSW(e,o,s)})).catch((function(e){return handleError(o,e)}))}function unregister(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){return handleError(emit,e)}))}"undefined"!==typeof window&&(l="undefined"!==typeof Promise?new Promise((function(e){return window.addEventListener("load",e)})):{then:function(e){return window.addEventListener("load",e)}})},1633:function(e){(function(){var o,s,pipe=function(e,o){e.value=o},l=Object.create(null,{activate:{writable:!0,value:function(e){e?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(e)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(e){this._lastBypassValue!==e&&(this._bypass=e,this.activate(!e),this._lastBypassValue=e)}},connect:{value:function(e){this.output.connect(e)}},disconnect:{value:function(e){this.output.disconnect(e)}},connectInOrder:{value:function(e){var o=e.length-1;while(o--){if(!e[o].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",e[o]);e[o+1].input?e[o].connect(e[o+1].input):e[o].connect(e[o+1])}}},getDefaults:{value:function(){var e={};for(var o in this.defaults)e[o]=this.defaults[o].value;return e}},automate:{value:function(e,s,l,d){var u,g=d?~~(d/1e3):o.currentTime,p=l?~~(l/1e3):0,m=this.defaults[e],f=this[e];f?m.automatable?(l?(u="linearRampToValueAtTime",f.cancelScheduledValues(g),f.setValueAtTime(f.value,g)):u="setValueAtTime",f[u](s,p+g)):f=s:console.error("Invalid Property for "+this.name)}}}),d="float",u="boolean",g="string",p="int";function definition(){return Tuna}function Tuna(e){if(!(this instanceof Tuna))return new Tuna(e);var l="undefined"===typeof window?{}:window;if(l.AudioContext||(l.AudioContext=l.webkitAudioContext),e||(console.log("tuna.js: Missing audio context! Creating a new context for you."),e=l.AudioContext&&new l.AudioContext),!e)throw new Error("Tuna cannot initialize because this environment does not support web audio.");connectify(e),o=e,s=this}function connectify(e){if(!0!==e.__connectified__){var o=e.createGain(),s=Object.getPrototypeOf(Object.getPrototypeOf(o)),d=s.connect;s.connect=shimConnect,e.__connectified__=!0}function shimConnect(){var e=arguments[0];return arguments[0]=l.isPrototypeOf?l.isPrototypeOf(e)?e.input:e:e.input||e,d.apply(this,arguments),e}}function dbToWAVolume(e){return Math.max(0,Math.round(100*Math.pow(2,e/6))/100)}function fmod(e,o){var s,l,d=0,u=0,g=0,p=0;return s=e.toExponential().match(/^.\.?(.*)e(.+)$/),d=parseInt(s[2],10)-(s[1]+"").length,s=o.toExponential().match(/^.\.?(.*)e(.+)$/),u=parseInt(s[2],10)-(s[1]+"").length,u>d&&(d=u),l=e%o,d<-100||d>20?(g=Math.round(Math.log(l)/Math.log(10)),p=Math.pow(10,g),(l/p).toFixed(g-d)*p):parseFloat(l.toFixed(-d))}function sign(e){return 0===e?1:Math.abs(e)/e}function tanh(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function initValue(e,o){return void 0===e?o:e}e.exports?e.exports=Tuna:window.define("Tuna",definition),Tuna.prototype.Bitcrusher=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=o.createGain(),this.activateNode=o.createGain(),this.processor=o.createScriptProcessor(this.bufferSize,1,1),this.output=o.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var s,l,d,u,g,p=0,m=0;this.processor.onaudioprocess=function(e){for(s=e.inputBuffer.getChannelData(0),l=e.outputBuffer.getChannelData(0),d=Math.pow(.5,this.bits),g=s.length,u=0;u<g;u++)p+=this.normfreq,p>=1&&(p-=1,m=d*Math.floor(s[u]/d+.5)),l[u]=m},this.bits=e.bits||this.defaults.bits.value,this.normfreq=initValue(e.normfreq,this.defaults.normfreq.value),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Bitcrusher.prototype=Object.create(l,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:p},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:p},bypass:{value:!1,automatable:!1,type:u},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:d}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(e){this.processor.bits=e}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(e){this.processor.normfreq=e}}}),Tuna.prototype.Cabinet=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.activateNode=o.createGain(),this.convolver=this.newConvolver(e.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=o.createGain(),this.output=o.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupNode.gain.value=initValue(e.makeupGain,this.defaults.makeupGain.value),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Cabinet.prototype=Object.create(l,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:u}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.setTargetAtTime(e,o.currentTime,.01)}},newConvolver:{value:function(e){return new s.Convolver({impulse:e,dryLevel:0,wetLevel:1})}}}),Tuna.prototype.Chorus=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.attenuator=this.activateNode=o.createGain(),this.splitter=o.createChannelSplitter(2),this.delayL=o.createDelay(),this.delayR=o.createDelay(),this.feedbackGainNodeLR=o.createGain(),this.feedbackGainNodeRL=o.createGain(),this.merger=o.createChannelMerger(2),this.output=o.createGain(),this.lfoL=new s.LFO({target:this.delayL.delayTime,callback:pipe}),this.lfoR=new s.LFO({target:this.delayR.delayTime,callback:pipe}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=initValue(e.feedback,this.defaults.feedback.value),this.rate=initValue(e.rate,this.defaults.rate.value),this.delay=initValue(e.delay,this.defaults.delay.value),this.depth=initValue(e.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Chorus.prototype=Object.create(l,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:d},delay:{value:.0045,min:0,max:1,automatable:!1,type:d},depth:{value:.7,min:0,max:1,automatable:!1,type:d},rate:{value:1.5,min:0,max:8,automatable:!1,type:d},bypass:{value:!1,automatable:!1,type:u}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(e){this._delay=2*Math.pow(10,e)*2e-4,this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeLR.gain.setTargetAtTime(this._feedback,o.currentTime,.01),this.feedbackGainNodeRL.gain.setTargetAtTime(this._feedback,o.currentTime,.01)}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),Tuna.prototype.Compressor=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.compNode=this.activateNode=o.createDynamicsCompressor(),this.makeupNode=o.createGain(),this.output=o.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=initValue(e.automakeup,this.defaults.automakeup.value),this.automakeup?this.makeupNode.gain.value=dbToWAVolume(this.computeMakeup()):this.makeupNode.gain.value=dbToWAVolume(initValue(e.makeupGain,this.defaults.makeupGain.value)),this.threshold=initValue(e.threshold,this.defaults.threshold.value),this.release=initValue(e.release,this.defaults.release.value),this.attack=initValue(e.attack,this.defaults.attack.value),this.ratio=e.ratio||this.defaults.ratio.value,this.knee=initValue(e.knee,this.defaults.knee.value),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Compressor.prototype=Object.create(l,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:d},release:{value:250,min:10,max:2e3,automatable:!0,type:d},makeupGain:{value:1,min:1,max:100,automatable:!0,type:d},attack:{value:1,min:0,max:1e3,automatable:!0,type:d},ratio:{value:4,min:1,max:50,automatable:!0,type:d},knee:{value:5,min:0,max:40,automatable:!0,type:d},automakeup:{value:!1,automatable:!1,type:u},bypass:{value:!1,automatable:!1,type:u}}},computeMakeup:{value:function(){var e=4,o=this.compNode;return-(o.threshold.value-o.threshold.value/o.ratio.value)/e}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(e){this._automakeup=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(e){this.compNode.threshold.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(e){this.compNode.ratio.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(e){this.compNode.knee.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(e){this.compNode.attack.value=e/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(e){this.compNode.release.value=e/1e3}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.setTargetAtTime(dbToWAVolume(e),o.currentTime,.01)}}}),Tuna.prototype.Convolver=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.activateNode=o.createGain(),this.convolver=o.createConvolver(),this.dry=o.createGain(),this.filterLow=o.createBiquadFilter(),this.filterHigh=o.createBiquadFilter(),this.wet=o.createGain(),this.output=o.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dry.gain.value=initValue(e.dryLevel,this.defaults.dryLevel.value),this.wet.gain.value=initValue(e.wetLevel,this.defaults.wetLevel.value),this.filterHigh.frequency.value=e.highCut||this.defaults.highCut.value,this.filterLow.frequency.value=e.lowCut||this.defaults.lowCut.value,this.output.gain.value=initValue(e.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.buffer=e.impulse||"../impulses/ir_rev_short.wav",this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Convolver.prototype=Object.create(l,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:d},lowCut:{value:20,min:20,max:22050,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d},wetLevel:{value:1,min:0,max:1,automatable:!0,type:d},level:{value:1,min:0,max:1,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:u}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(e){this.filterLow.frequency.setTargetAtTime(e,o.currentTime,.01)}},highCut:{get:function(){return this.filterHigh.frequency},set:function(e){this.filterHigh.frequency.setTargetAtTime(e,o.currentTime,.01)}},level:{get:function(){return this.output.gain},set:function(e){this.output.gain.setTargetAtTime(e,o.currentTime,.01)}},dryLevel:{get:function(){return this.dry.gain},set:function(e){this.dry.gain.setTargetAtTime(e,o.currentTime,.01)}},wetLevel:{get:function(){return this.wet.gain},set:function(e){this.wet.gain.setTargetAtTime(e,o.currentTime,.01)}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(e){var s=this.convolver,l=new XMLHttpRequest;e?(l.open("GET",e,!0),l.responseType="arraybuffer",l.onreadystatechange=function(){4===l.readyState&&(l.status<300&&l.status>199||302===l.status)&&o.decodeAudioData(l.response,(function(e){s.buffer=e}),(function(e){e&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+e)}))},l.send(null)):console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),Tuna.prototype.Delay=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.activateNode=o.createGain(),this.dry=o.createGain(),this.wet=o.createGain(),this.filter=o.createBiquadFilter(),this.delay=o.createDelay(10),this.feedbackNode=o.createGain(),this.output=o.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=e.delayTime||this.defaults.delayTime.value,this.feedbackNode.gain.value=initValue(e.feedback,this.defaults.feedback.value),this.wet.gain.value=initValue(e.wetLevel,this.defaults.wetLevel.value),this.dry.gain.value=initValue(e.dryLevel,this.defaults.dryLevel.value),this.filter.frequency.value=e.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Delay.prototype=Object.create(l,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:d},feedback:{value:.45,min:0,max:.9,automatable:!0,type:d},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:u}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(e){this.delay.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.setTargetAtTime(e,o.currentTime,.01)}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(e){this.dry.gain.setTargetAtTime(e,o.currentTime,.01)}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(e){this.feedbackNode.gain.setTargetAtTime(e,o.currentTime,.01)}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.setTargetAtTime(e,o.currentTime,.01)}}}),Tuna.prototype.Filter=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.activateNode=o.createGain(),this.filter=o.createBiquadFilter(),this.output=o.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.filter.frequency.value=e.frequency||this.defaults.frequency.value,this.Q=e.resonance||this.defaults.Q.value,this.filterType=initValue(e.filterType,this.defaults.filterType.value),this.filter.gain.value=initValue(e.gain,this.defaults.gain.value),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Filter.prototype=Object.create(l,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:d},Q:{value:1,min:.001,max:100,automatable:!0,type:d},gain:{value:0,min:-40,max:40,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:u},filterType:{value:"lowpass",automatable:!1,type:g}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(e){this.filter.type=e}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(e){this.filter.Q.value=e}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(e){this.filter.gain.setTargetAtTime(e,o.currentTime,.01)}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.setTargetAtTime(e,o.currentTime,.01)}}}),Tuna.prototype.Gain=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.activateNode=o.createGain(),this.gainNode=o.createGain(),this.output=o.createGain(),this.activateNode.connect(this.gainNode),this.gainNode.connect(this.output),this.gainNode.gain.value=initValue(e.gain,this.defaults.gain.value),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Gain.prototype=Object.create(l,{name:{value:"Gain"},defaults:{writable:!0,value:{bypass:{value:!1,automatable:!1,type:u},gain:{value:1,automatable:!0,type:d}}},gain:{enumerable:!0,get:function(){return this.gainNode.gain},set:function(e){this.gainNode.gain.setTargetAtTime(e,o.currentTime,.01)}}}),Tuna.prototype.MoogFilter=function(e){var s,l,d,u,g,p,m,f,_,C,b,w,S,y,L;e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=o.createGain(),this.activateNode=o.createGain(),this.processor=o.createScriptProcessor(this.bufferSize,1,1),this.output=o.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output),s=l=d=u=g=p=m=f=0,this.processor.onaudioprocess=function(e){for(_=e.inputBuffer.getChannelData(0),C=e.outputBuffer.getChannelData(0),b=1.16*this.cutoff,L=b*b*.35013*(b*b),w=this.resonance*(1-.15*b*b),y=_.length,S=0;S<y;S++)_[S]-=f*w,_[S]*=L,g=_[S]+.3*s+(1-b)*g,s=_[S],p=g+.3*l+(1-b)*p,l=g,m=p+.3*d+(1-b)*m,d=p,f=m+.3*u+(1-b)*f,u=m,C[S]=f},this.cutoff=initValue(e.cutoff,this.defaults.cutoff.value),this.resonance=initValue(e.resonance,this.defaults.resonance.value),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.MoogFilter.prototype=Object.create(l,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:p},bypass:{value:!1,automatable:!1,type:u},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:d},resonance:{value:3.5,min:0,max:4,automatable:!1,type:d}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(e){this.processor.cutoff=e}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(e){this.processor.resonance=e}}}),Tuna.prototype.Overdrive=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.activateNode=o.createGain(),this.inputDrive=o.createGain(),this.waveshaper=o.createWaveShaper(),this.outputDrive=o.createGain(),this.output=o.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=initValue(e.drive,this.defaults.drive.value),this.outputGain=initValue(e.outputGain,this.defaults.outputGain.value),this.curveAmount=initValue(e.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=initValue(e.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Overdrive.prototype=Object.create(l,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:.197,min:0,max:1,automatable:!0,type:d,scaled:!0},outputGain:{value:-9.154,min:-46,max:0,automatable:!0,type:d,scaled:!0},curveAmount:{value:.979,min:0,max:1,automatable:!1,type:d},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:p},bypass:{value:!1,automatable:!1,type:u}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(e){this.inputDrive.gain.value=e}},curveAmount:{get:function(){return this._curveAmount},set:function(e){this._curveAmount=e,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(e){this._outputGain=dbToWAVolume(e),this.outputDrive.gain.setValueAtTime(this._outputGain,o.currentTime,.01)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(e){this._algorithmIndex=e,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(e,o,s){e=Math.min(e,.9999);var l,d,u=2*e/(1-e);for(l=0;l<o;l++)d=2*l/o-1,s[l]=(1+u)*d/(1+u*Math.abs(d))},function(e,o,s){var l,d,u;for(l=0;l<o;l++)d=2*l/o-1,u=(.5*Math.pow(d+1.4,2)-1)*(u>=0?5.8:1.2),s[l]=tanh(u)},function(e,o,s){var l,d,u,g=1-e;for(l=0;l<o;l++)d=2*l/o-1,u=d<0?-Math.pow(Math.abs(d),g+.04):Math.pow(d,g),s[l]=tanh(2*u)},function(e,o,s){var l,d,u,g,p=1-e>.99?.99:1-e;for(l=0;l<o;l++)d=2*l/o-1,g=Math.abs(d),g<p?u=g:g>p?u=p+(g-p)/(1+Math.pow((g-p)/(1-p),2)):g>1&&(u=g),s[l]=sign(d)*u*(1/((p+1)/2))},function(e,o,s){var l,d;for(l=0;l<o;l++)d=2*l/o-1,s[l]=d<-.08905?-3/4*(1-Math.pow(1-(Math.abs(d)-.032857),12)+1/3*(Math.abs(d)-.032847))+.01:d>=-.08905&&d<.320018?d*d*-6.153+3.9375*d:.630035},function(e,o,s){var l,d,u=2+Math.round(14*e),g=Math.round(Math.pow(2,u-1));for(l=0;l<o;l++)d=2*l/o-1,s[l]=Math.round(d*g)/g}]}}),Tuna.prototype.Panner=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.activateNode=o.createGain(),this.panner=o.createStereoPanner(),this.output=o.createGain(),this.activateNode.connect(this.panner),this.panner.connect(this.output),this.pan=initValue(e.pan,this.defaults.pan.value),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Panner.prototype=Object.create(l,{name:{value:"Panner"},defaults:{writable:!0,value:{bypass:{value:!1,automatable:!1,type:u},pan:{value:0,min:-1,max:1,automatable:!0,type:d}}},pan:{enumerable:!0,get:function(){return this.panner.pan},set:function(e){this.panner.pan.value=e}}}),Tuna.prototype.Phaser=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.splitter=this.activateNode=o.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=o.createGain(),this.feedbackGainNodeR=o.createGain(),this.merger=o.createChannelMerger(2),this.filteredSignal=o.createGain(),this.output=o.createGain(),this.lfoL=new s.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new s.LFO({target:this.filtersR,callback:this.callback});var l=this.stage;while(l--)this.filtersL[l]=o.createBiquadFilter(),this.filtersR[l]=o.createBiquadFilter(),this.filtersL[l].type="allpass",this.filtersR[l].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=initValue(e.rate,this.defaults.rate.value),this.baseModulationFrequency=e.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=initValue(e.depth,this.defaults.depth.value),this.feedback=initValue(e.feedback,this.defaults.feedback.value),this.stereoPhase=initValue(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Phaser.prototype=Object.create(l,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:d},depth:{value:.6,min:0,max:1,automatable:!1,type:d},feedback:{value:.7,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:d},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:d},bypass:{value:!1,automatable:!1,type:u}}},callback:{value:function(e,o){for(var s=0;s<4;s++)e[s].frequency.value=o}},depth:{get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(e){this._baseModulationFrequency=e,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this.depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeL.gain.setTargetAtTime(this._feedback,o.currentTime,.01),this.feedbackGainNodeR.gain.setTargetAtTime(this._feedback,o.currentTime,.01)}},stereoPhase:{get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var o=this.lfoL._phase+this._stereoPhase*Math.PI/180;o=fmod(o,2*Math.PI),this.lfoR._phase=o}}}),Tuna.prototype.PingPongDelay=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.wet=o.createGain(),this.stereoToMonoMix=o.createGain(),this.feedbackLevel=o.createGain(),this.output=o.createGain(),this.delayLeft=o.createDelay(10),this.delayRight=o.createDelay(10),this.activateNode=o.createGain(),this.splitter=o.createChannelSplitter(2),this.merger=o.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wet),this.wet.connect(this.delayLeft),this.feedbackLevel.connect(this.wet),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==e.delayTimeLeft?e.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==e.delayTimeRight?e.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==e.feedback?e.feedback:this.defaults.feedback.value,this.wet.gain.value=void 0!==e.wetLevel?e.wetLevel:this.defaults.wetLevel.value,this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.PingPongDelay.prototype=Object.create(l,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(e){this._delayTimeLeft=e,this.delayLeft.delayTime.value=e/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(e){this._delayTimeRight=e,this.delayRight.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.setTargetAtTime(e,o.currentTime,.01)}},feedback:{enumerable:!0,get:function(){return this.feedbackLevel.gain},set:function(e){this.feedbackLevel.gain.setTargetAtTime(e,o.currentTime,.01)}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:p},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:p},feedback:{value:.3,min:0,max:1,automatable:!0,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:u}}}}),Tuna.prototype.Tremolo=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.splitter=this.activateNode=o.createChannelSplitter(2),this.amplitudeL=o.createGain(),this.amplitudeR=o.createGain(),this.merger=o.createChannelMerger(2),this.output=o.createGain(),this.lfoL=new s.LFO({target:this.amplitudeL.gain,callback:pipe}),this.lfoR=new s.LFO({target:this.amplitudeR.gain,callback:pipe}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=e.rate||this.defaults.rate.value,this.intensity=initValue(e.intensity,this.defaults.intensity.value),this.stereoPhase=initValue(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.Tremolo.prototype=Object.create(l,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:d},rate:{value:5,min:.1,max:11,automatable:!1,type:d},bypass:{value:!1,automatable:!1,type:u}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(e){this._intensity=e,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var o=this.lfoL._phase+this._stereoPhase*Math.PI/180;o=fmod(o,2*Math.PI),this.lfoR.phase=o}}}),Tuna.prototype.WahWah=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.activateNode=o.createGain(),this.envelopeFollower=new s.EnvelopeFollower({target:this,callback:function(e,o){e.sweep=o}}),this.filterBp=o.createBiquadFilter(),this.filterPeaking=o.createBiquadFilter(),this.output=o.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=initValue(e.automode,this.defaults.automode.value),this.resonance=e.resonance||this.defaults.resonance.value,this.sensitivity=initValue(e.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=initValue(e.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=e.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=initValue(e.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.WahWah.prototype=Object.create(l,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:u},baseFrequency:{value:.153,min:0,max:1,automatable:!1,type:d},excursionOctaves:{value:3.3,min:1,max:6,automatable:!1,type:d},sweep:{value:.35,min:0,max:1,automatable:!1,type:d},resonance:{value:19,min:1,max:100,automatable:!1,type:d},sensitivity:{value:-.5,min:-1,max:1,automatable:!1,type:d},bypass:{value:!1,automatable:!1,type:u}}},automode:{get:function(){return this._automode},set:function(e){this._automode=e,e?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{writable:!0,value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=Math.min(22050,this._baseFrequency+this._excursionFrequency*this._sweep),this.filterPeaking.frequency.value=Math.min(22050,this._baseFrequency+this._excursionFrequency*this._sweep)}catch(e){clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep},set:function(e){this._sweep=Math.pow(e>1?1:e<0?0:e,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=50*Math.pow(10,2*e),this._excursionFrequency=Math.min(o.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(e){this._excursionOctaves=e,this._excursionFrequency=Math.min(o.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(e){this._sensitivity=Math.pow(10,e)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(e){this._resonance=e,this.filterPeaking.Q.value=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),Tuna.prototype.EnvelopeFollower=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.jsNode=this.output=o.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=initValue(e.attackTime,this.defaults.attackTime.value),this.releaseTime=initValue(e.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=e.target||{},this.callback=e.callback||function(){},this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.EnvelopeFollower.prototype=Object.create(l,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:d},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:d},bypass:{value:!1,automatable:!1,type:u}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(e){this._attackTime=e,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(e){this._releaseTime=e,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(e){"function"===typeof e?this._callback=e:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){this.activated=e,e?(this.jsNode.connect(o.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null),this.activateCallback&&this.activateCallback(e)}},returnCompute:{value:function(e){return function(o){e.compute(o)}}},compute:{value:function(e){var o,s,l,d,u=e.inputBuffer.getChannelData(0).length,g=e.inputBuffer.numberOfChannels;for(s=l=d=0,s=0;s<g;++s)for(d=0;d<u;++d)o=e.inputBuffer.getChannelData(s)[d],l+=o*o;l=Math.sqrt(l/g),this._envelope<l?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*l):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*l),this._callback(this._target,this._envelope)}}}),Tuna.prototype.LFO=function(e){e||(e=this.getDefaults()),this.input=o.createGain(),this.output=o.createScriptProcessor(256,1,1),this.activateNode=o.destination,this.frequency=initValue(e.frequency,this.defaults.frequency.value),this.offset=initValue(e.offset,this.defaults.offset.value),this.oscillation=initValue(e.oscillation,this.defaults.oscillation.value),this.phase=initValue(e.phase,this.defaults.phase.value),this.target=e.target||{},this.output.onaudioprocess=this.callback(e.callback||function(){}),this.bypass=e.bypass||this.defaults.bypass.value},Tuna.prototype.LFO.prototype=Object.create(l,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:d},offset:{value:.85,min:0,max:22049,automatable:!1,type:d},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:d},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:d},bypass:{value:!1,automatable:!1,type:u}}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate}},offset:{get:function(){return this._offset},set:function(e){this._offset=e}},oscillation:{get:function(){return this._oscillation},set:function(e){this._oscillation=e}},phase:{get:function(){return this._phase},set:function(e){this._phase=e}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){e?(this.output.connect(o.destination),this.activateCallback&&this.activateCallback(e)):this.output.disconnect()}},callback:{value:function(e){var o=this;return function(){o._phase+=o._phaseInc,o._phase>2*Math.PI&&(o._phase=0),e(o._target,o._offset+o._oscillation*Math.sin(o._phase))}}}}),Tuna.toString=Tuna.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}})()},3744:function(e,o){"use strict";o.Z=(e,o)=>{const s=e.__vccOpts||e;for(const[l,d]of o)s[l]=d;return s}},3907:function(e,o,s){"use strict";s.d(o,{MT:function(){return createStore}});var l=s(6252),d=s(2262);function getDevtoolsGlobalHook(){return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__}function getTarget(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{}}const u="function"===typeof Proxy,g="devtools-plugin:setup",p="plugin:settings:set";let m,f;function isPerformanceSupported(){var e;return void 0!==m||("undefined"!==typeof window&&window.performance?(m=!0,f=window.performance):"undefined"!==typeof s.g&&(null===(e=s.g.perf_hooks)||void 0===e?void 0:e.performance)?(m=!0,f=s.g.perf_hooks.performance):m=!1),m}function now(){return isPerformanceSupported()?f.now():Date.now()}class ApiProxy{constructor(e,o){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=o;const s={};if(e.settings)for(const g in e.settings){const o=e.settings[g];s[g]=o.defaultValue}const l=`__vue-devtools-plugin-settings__${e.id}`;let d=Object.assign({},s);try{const e=localStorage.getItem(l),o=JSON.parse(e);Object.assign(d,o)}catch(u){}this.fallbacks={getSettings(){return d},setSettings(e){try{localStorage.setItem(l,JSON.stringify(e))}catch(u){}d=e},now(){return now()}},o&&o.on(p,((e,o)=>{e===this.plugin.id&&this.fallbacks.setSettings(o)})),this.proxiedOn=new Proxy({},{get:(e,o)=>this.target?this.target.on[o]:(...e)=>{this.onQueue.push({method:o,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,o)=>this.target?this.target[o]:"on"===o?this.proxiedOn:Object.keys(this.fallbacks).includes(o)?(...e)=>(this.targetQueue.push({method:o,args:e,resolve:()=>{}}),this.fallbacks[o](...e)):(...e)=>new Promise((s=>{this.targetQueue.push({method:o,args:e,resolve:s})}))})}async setRealTarget(e){this.target=e;for(const o of this.onQueue)this.target.on[o.method](...o.args);for(const o of this.targetQueue)o.resolve(await this.target[o.method](...o.args))}}function setupDevtoolsPlugin(e,o){const s=e,l=getTarget(),d=getDevtoolsGlobalHook(),p=u&&s.enableEarlyProxy;if(!d||!l.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&p){const e=p?new ApiProxy(s,d):null,u=l.__VUE_DEVTOOLS_PLUGINS__=l.__VUE_DEVTOOLS_PLUGINS__||[];u.push({pluginDescriptor:s,setupFn:o,proxy:e}),e&&o(e.proxiedTarget)}else d.emit(g,e,o)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var _="store";function forEachValue(e,o){Object.keys(e).forEach((function(s){return o(e[s],s)}))}function isObject(e){return null!==e&&"object"===typeof e}function isPromise(e){return e&&"function"===typeof e.then}function partial(e,o){return function(){return e(o)}}function genericSubscribe(e,o,s){return o.indexOf(e)<0&&(s&&s.prepend?o.unshift(e):o.push(e)),function(){var s=o.indexOf(e);s>-1&&o.splice(s,1)}}function resetStore(e,o){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var s=e.state;installModule(e,s,[],e._modules.root,!0),resetStoreState(e,s,o)}function resetStoreState(e,o,s){var u=e._state,g=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var p=e._wrappedGetters,m={},f={},_=(0,d.B)(!0);_.run((function(){forEachValue(p,(function(o,s){m[s]=partial(o,e),f[s]=(0,l.Fl)((function(){return m[s]()})),Object.defineProperty(e.getters,s,{get:function(){return f[s].value},enumerable:!0})}))})),e._state=(0,d.qj)({data:o}),e._scope=_,e.strict&&enableStrictMode(e),u&&s&&e._withCommit((function(){u.data=null})),g&&g.stop()}function installModule(e,o,s,l,d){var u=!s.length,g=e._modules.getNamespace(s);if(l.namespaced&&(e._modulesNamespaceMap[g],e._modulesNamespaceMap[g]=l),!u&&!d){var p=getNestedState(o,s.slice(0,-1)),m=s[s.length-1];e._withCommit((function(){p[m]=l.state}))}var f=l.context=makeLocalContext(e,g,s);l.forEachMutation((function(o,s){var l=g+s;registerMutation(e,l,o,f)})),l.forEachAction((function(o,s){var l=o.root?s:g+s,d=o.handler||o;registerAction(e,l,d,f)})),l.forEachGetter((function(o,s){var l=g+s;registerGetter(e,l,o,f)})),l.forEachChild((function(l,u){installModule(e,o,s.concat(u),l,d)}))}function makeLocalContext(e,o,s){var l=""===o,d={dispatch:l?e.dispatch:function(s,l,d){var u=unifyObjectStyle(s,l,d),g=u.payload,p=u.options,m=u.type;return p&&p.root||(m=o+m),e.dispatch(m,g)},commit:l?e.commit:function(s,l,d){var u=unifyObjectStyle(s,l,d),g=u.payload,p=u.options,m=u.type;p&&p.root||(m=o+m),e.commit(m,g,p)}};return Object.defineProperties(d,{getters:{get:l?function(){return e.getters}:function(){return makeLocalGetters(e,o)}},state:{get:function(){return getNestedState(e.state,s)}}}),d}function makeLocalGetters(e,o){if(!e._makeLocalGettersCache[o]){var s={},l=o.length;Object.keys(e.getters).forEach((function(d){if(d.slice(0,l)===o){var u=d.slice(l);Object.defineProperty(s,u,{get:function(){return e.getters[d]},enumerable:!0})}})),e._makeLocalGettersCache[o]=s}return e._makeLocalGettersCache[o]}function registerMutation(e,o,s,l){var d=e._mutations[o]||(e._mutations[o]=[]);d.push((function wrappedMutationHandler(o){s.call(e,l.state,o)}))}function registerAction(e,o,s,l){var d=e._actions[o]||(e._actions[o]=[]);d.push((function wrappedActionHandler(o){var d=s.call(e,{dispatch:l.dispatch,commit:l.commit,getters:l.getters,state:l.state,rootGetters:e.getters,rootState:e.state},o);return isPromise(d)||(d=Promise.resolve(d)),e._devtoolHook?d.catch((function(o){throw e._devtoolHook.emit("vuex:error",o),o})):d}))}function registerGetter(e,o,s,l){e._wrappedGetters[o]||(e._wrappedGetters[o]=function wrappedGetter(e){return s(l.state,l.getters,e.state,e.getters)})}function enableStrictMode(e){(0,l.YP)((function(){return e._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function getNestedState(e,o){return o.reduce((function(e,o){return e[o]}),e)}function unifyObjectStyle(e,o,s){return isObject(e)&&e.type&&(s=o,o=e,e=e.type),{type:e,payload:o,options:s}}var C="vuex bindings",b="vuex:mutations",w="vuex:actions",S="vuex",y=0;function addDevtools(e,o){setupDevtoolsPlugin({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[C]},(function(s){s.addTimelineLayer({id:b,label:"Vuex Mutations",color:L}),s.addTimelineLayer({id:w,label:"Vuex Actions",color:L}),s.addInspector({id:S,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),s.on.getInspectorTree((function(s){if(s.app===e&&s.inspectorId===S)if(s.filter){var l=[];flattenStoreForInspectorTree(l,o._modules.root,s.filter,""),s.rootNodes=l}else s.rootNodes=[formatStoreForInspectorTree(o._modules.root,"")]})),s.on.getInspectorState((function(s){if(s.app===e&&s.inspectorId===S){var l=s.nodeId;makeLocalGetters(o,l),s.state=formatStoreForInspectorState(getStoreModule(o._modules,l),"root"===l?o.getters:o._makeLocalGettersCache,l)}})),s.on.editInspectorState((function(s){if(s.app===e&&s.inspectorId===S){var l=s.nodeId,d=s.path;"root"!==l&&(d=l.split("/").filter(Boolean).concat(d)),o._withCommit((function(){s.set(o._state.data,d,s.state.value)}))}})),o.subscribe((function(e,o){var l={};e.payload&&(l.payload=e.payload),l.state=o,s.notifyComponentUpdate(),s.sendInspectorTree(S),s.sendInspectorState(S),s.addTimelineEvent({layerId:b,event:{time:Date.now(),title:e.type,data:l}})})),o.subscribeAction({before:function(e,o){var l={};e.payload&&(l.payload=e.payload),e._id=y++,e._time=Date.now(),l.state=o,s.addTimelineEvent({layerId:w,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:l}})},after:function(e,o){var l={},d=Date.now()-e._time;l.duration={_custom:{type:"duration",display:d+"ms",tooltip:"Action duration",value:d}},e.payload&&(l.payload=e.payload),l.state=o,s.addTimelineEvent({layerId:w,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:l}})}})}))}var L=8702998,x=6710886,k=16777215,N={label:"namespaced",textColor:k,backgroundColor:x};function extractNameFromPath(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function formatStoreForInspectorTree(e,o){return{id:o||"root",label:extractNameFromPath(o),tags:e.namespaced?[N]:[],children:Object.keys(e._children).map((function(s){return formatStoreForInspectorTree(e._children[s],o+s+"/")}))}}function flattenStoreForInspectorTree(e,o,s,l){l.includes(s)&&e.push({id:l||"root",label:l.endsWith("/")?l.slice(0,l.length-1):l||"Root",tags:o.namespaced?[N]:[]}),Object.keys(o._children).forEach((function(d){flattenStoreForInspectorTree(e,o._children[d],s,l+d+"/")}))}function formatStoreForInspectorState(e,o,s){o="root"===s?o:o[s];var l=Object.keys(o),d={state:Object.keys(e.state).map((function(o){return{key:o,editable:!0,value:e.state[o]}}))};if(l.length){var u=transformPathsToObjectTree(o);d.getters=Object.keys(u).map((function(e){return{key:e.endsWith("/")?extractNameFromPath(e):e,editable:!1,value:canThrow((function(){return u[e]}))}}))}return d}function transformPathsToObjectTree(e){var o={};return Object.keys(e).forEach((function(s){var l=s.split("/");if(l.length>1){var d=o,u=l.pop();l.forEach((function(e){d[e]||(d[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),d=d[e]._custom.value})),d[u]=canThrow((function(){return e[s]}))}else o[s]=canThrow((function(){return e[s]}))})),o}function getStoreModule(e,o){var s=o.split("/").filter((function(e){return e}));return s.reduce((function(e,l,d){var u=e[l];if(!u)throw new Error('Missing module "'+l+'" for path "'+o+'".');return d===s.length-1?u:u._children}),"root"===o?e:e.root._children)}function canThrow(e){try{return e()}catch(o){return o}}var D=function Module(e,o){this.runtime=o,this._children=Object.create(null),this._rawModule=e;var s=e.state;this.state=("function"===typeof s?s():s)||{}},E={namespaced:{configurable:!0}};E.namespaced.get=function(){return!!this._rawModule.namespaced},D.prototype.addChild=function addChild(e,o){this._children[e]=o},D.prototype.removeChild=function removeChild(e){delete this._children[e]},D.prototype.getChild=function getChild(e){return this._children[e]},D.prototype.hasChild=function hasChild(e){return e in this._children},D.prototype.update=function update(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},D.prototype.forEachChild=function forEachChild(e){forEachValue(this._children,e)},D.prototype.forEachGetter=function forEachGetter(e){this._rawModule.getters&&forEachValue(this._rawModule.getters,e)},D.prototype.forEachAction=function forEachAction(e){this._rawModule.actions&&forEachValue(this._rawModule.actions,e)},D.prototype.forEachMutation=function forEachMutation(e){this._rawModule.mutations&&forEachValue(this._rawModule.mutations,e)},Object.defineProperties(D.prototype,E);var T=function ModuleCollection(e){this.register([],e,!1)};function update(e,o,s){if(o.update(s),s.modules)for(var l in s.modules){if(!o.getChild(l))return void 0;update(e.concat(l),o.getChild(l),s.modules[l])}}T.prototype.get=function get(e){return e.reduce((function(e,o){return e.getChild(o)}),this.root)},T.prototype.getNamespace=function getNamespace(e){var o=this.root;return e.reduce((function(e,s){return o=o.getChild(s),e+(o.namespaced?s+"/":"")}),"")},T.prototype.update=function update$1(e){update([],this.root,e)},T.prototype.register=function register(e,o,s){var l=this;void 0===s&&(s=!0);var d=new D(o,s);if(0===e.length)this.root=d;else{var u=this.get(e.slice(0,-1));u.addChild(e[e.length-1],d)}o.modules&&forEachValue(o.modules,(function(o,d){l.register(e.concat(d),o,s)}))},T.prototype.unregister=function unregister(e){var o=this.get(e.slice(0,-1)),s=e[e.length-1],l=o.getChild(s);l&&l.runtime&&o.removeChild(s)},T.prototype.isRegistered=function isRegistered(e){var o=this.get(e.slice(0,-1)),s=e[e.length-1];return!!o&&o.hasChild(s)};function createStore(e){return new I(e)}var I=function Store(e){var o=this;void 0===e&&(e={});var s=e.plugins;void 0===s&&(s=[]);var l=e.strict;void 0===l&&(l=!1);var d=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new T(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=d;var u=this,g=this,p=g.dispatch,m=g.commit;this.dispatch=function boundDispatch(e,o){return p.call(u,e,o)},this.commit=function boundCommit(e,o,s){return m.call(u,e,o,s)},this.strict=l;var f=this._modules.root.state;installModule(this,f,[],this._modules.root),resetStoreState(this,f),s.forEach((function(e){return e(o)}))},A={state:{configurable:!0}};I.prototype.install=function install(e,o){e.provide(o||_,this),e.config.globalProperties.$store=this;var s=void 0!==this._devtools&&this._devtools;s&&addDevtools(e,this)},A.state.get=function(){return this._state.data},A.state.set=function(e){0},I.prototype.commit=function commit(e,o,s){var l=this,d=unifyObjectStyle(e,o,s),u=d.type,g=d.payload,p=(d.options,{type:u,payload:g}),m=this._mutations[u];m&&(this._withCommit((function(){m.forEach((function commitIterator(e){e(g)}))})),this._subscribers.slice().forEach((function(e){return e(p,l.state)})))},I.prototype.dispatch=function dispatch(e,o){var s=this,l=unifyObjectStyle(e,o),d=l.type,u=l.payload,g={type:d,payload:u},p=this._actions[d];if(p){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(g,s.state)}))}catch(f){0}var m=p.length>1?Promise.all(p.map((function(e){return e(u)}))):p[0](u);return new Promise((function(e,o){m.then((function(o){try{s._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(g,s.state)}))}catch(f){0}e(o)}),(function(e){try{s._actionSubscribers.filter((function(e){return e.error})).forEach((function(o){return o.error(g,s.state,e)}))}catch(f){0}o(e)}))}))}},I.prototype.subscribe=function subscribe(e,o){return genericSubscribe(e,this._subscribers,o)},I.prototype.subscribeAction=function subscribeAction(e,o){var s="function"===typeof e?{before:e}:e;return genericSubscribe(s,this._actionSubscribers,o)},I.prototype.watch=function watch$1(e,o,s){var d=this;return(0,l.YP)((function(){return e(d.state,d.getters)}),o,Object.assign({},s))},I.prototype.replaceState=function replaceState(e){var o=this;this._withCommit((function(){o._state.data=e}))},I.prototype.registerModule=function registerModule(e,o,s){void 0===s&&(s={}),"string"===typeof e&&(e=[e]),this._modules.register(e,o),installModule(this,this.state,e,this._modules.get(e),s.preserveState),resetStoreState(this,this.state)},I.prototype.unregisterModule=function unregisterModule(e){var o=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var s=getNestedState(o.state,e.slice(0,-1));delete s[e[e.length-1]]})),resetStore(this)},I.prototype.hasModule=function hasModule(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},I.prototype.hotUpdate=function hotUpdate(e){this._modules.update(e),resetStore(this,!0)},I.prototype._withCommit=function _withCommit(e){var o=this._committing;this._committing=!0,e(),this._committing=o},Object.defineProperties(I.prototype,A);normalizeNamespace((function(e,o){var s={};return normalizeMap(o).forEach((function(o){var l=o.key,d=o.val;s[l]=function mappedState(){var o=this.$store.state,s=this.$store.getters;if(e){var l=getModuleByNamespace(this.$store,"mapState",e);if(!l)return;o=l.context.state,s=l.context.getters}return"function"===typeof d?d.call(this,o,s):o[d]},s[l].vuex=!0})),s})),normalizeNamespace((function(e,o){var s={};return normalizeMap(o).forEach((function(o){var l=o.key,d=o.val;s[l]=function mappedMutation(){var o=[],s=arguments.length;while(s--)o[s]=arguments[s];var l=this.$store.commit;if(e){var u=getModuleByNamespace(this.$store,"mapMutations",e);if(!u)return;l=u.context.commit}return"function"===typeof d?d.apply(this,[l].concat(o)):l.apply(this.$store,[d].concat(o))}})),s})),normalizeNamespace((function(e,o){var s={};return normalizeMap(o).forEach((function(o){var l=o.key,d=o.val;d=e+d,s[l]=function mappedGetter(){if(!e||getModuleByNamespace(this.$store,"mapGetters",e))return this.$store.getters[d]},s[l].vuex=!0})),s})),normalizeNamespace((function(e,o){var s={};return normalizeMap(o).forEach((function(o){var l=o.key,d=o.val;s[l]=function mappedAction(){var o=[],s=arguments.length;while(s--)o[s]=arguments[s];var l=this.$store.dispatch;if(e){var u=getModuleByNamespace(this.$store,"mapActions",e);if(!u)return;l=u.context.dispatch}return"function"===typeof d?d.apply(this,[l].concat(o)):l.apply(this.$store,[d].concat(o))}})),s}));function normalizeMap(e){return isValidMap(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(o){return{key:o,val:e[o]}})):[]}function isValidMap(e){return Array.isArray(e)||isObject(e)}function normalizeNamespace(e){return function(o,s){return"string"!==typeof o?(s=o,o=""):"/"!==o.charAt(o.length-1)&&(o+="/"),e(o,s)}}function getModuleByNamespace(e,o,s){var l=e._modulesNamespaceMap[s];return l}},7299:function(e,o,s){"use strict";s.d(o,{Z:function(){return D}}),String.prototype.seed=String.prototype.seed||Math.round(Math.random()*Math.pow(2,32)),String.prototype.hashCode=function(){const e=this.toString();let o,s;const l=3&e.length,d=e.length-l;let u=String.prototype.seed;const g=3432918353,p=461845907;let m=0;while(m<d)s=255&e.charCodeAt(m)|(255&e.charCodeAt(++m))<<8|(255&e.charCodeAt(++m))<<16|(255&e.charCodeAt(++m))<<24,++m,s=(65535&s)*g+(((s>>>16)*g&65535)<<16)&4294967295,s=s<<15|s>>>17,s=(65535&s)*p+(((s>>>16)*p&65535)<<16)&4294967295,u^=s,u=u<<13|u>>>19,o=5*(65535&u)+((5*(u>>>16)&65535)<<16)&4294967295,u=27492+(65535&o)+((58964+(o>>>16)&65535)<<16);switch(s=0,l){case 3:s^=(255&e.charCodeAt(m+2))<<16;case 2:s^=(255&e.charCodeAt(m+1))<<8;case 1:s^=255&e.charCodeAt(m),s=(65535&s)*g+(((s>>>16)*g&65535)<<16)&4294967295,s=s<<15|s>>>17,s=(65535&s)*p+(((s>>>16)*p&65535)<<16)&4294967295,u^=s}return u^=e.length,u^=u>>>16,u=2246822507*(65535&u)+((2246822507*(u>>>16)&65535)<<16)&4294967295,u^=u>>>13,u=3266489909*(65535&u)+((3266489909*(u>>>16)&65535)<<16)&4294967295,u^=u>>>16,u>>>0},
/*! https://mths.be/codepointat v0.2.0 by @mathias */
String.prototype.codePointAt||function(){var e=function(){let e;try{const o={},s=Object.defineProperty;e=s(o,o,o)&&s}catch(y){}return e}();const codePointAt=function(e){if(null==this)throw TypeError();const o=String(this),s=o.length;let l=e?Number(e):0;if(l!==l&&(l=0),l<0||l>=s)return;const d=o.charCodeAt(l);let u;return d>=55296&&d<=56319&&s>l+1&&(u=o.charCodeAt(l+1),u>=56320&&u<=57343)?1024*(d-55296)+u-56320+65536:d};e?e(String.prototype,"codePointAt",{value:codePointAt,configurable:!0,writable:!0}):String.prototype.codePointAt=codePointAt}(),
/*! https://mths.be/fromcodepoint v0.2.1 by @mathias */
String.fromCodePoint||function(){const e=function(){let e;try{const o={},s=Object.defineProperty;e=s(o,o,o)&&s}catch(y){}return e}(),o=String.fromCharCode,s=Math.floor,fromCodePoint=function(e){const l=16384,d=[];let u,g,p=-1;const m=arguments.length;if(!m)return"";let f="";while(++p<m){let e=Number(arguments[p]);if(!isFinite(e)||e<0||e>1114111||s(e)!==e)throw RangeError("Invalid code point: "+e);e<=65535?d.push(e):(e-=65536,u=55296+(e>>10),g=e%1024+56320,d.push(u,g)),(p+1===m||d.length>l)&&(f+=o.apply(null,d),d.length=0)}return f};e?e(String,"fromCodePoint",{value:fromCodePoint,configurable:!0,writable:!0}):String.fromCodePoint=fromCodePoint}();class Token{constructor(){this.source=null,this.type=null,this.channel=null,this.start=null,this.stop=null,this.tokenIndex=null,this.line=null,this.column=null,this._text=null}getTokenSource(){return this.source[0]}getInputStream(){return this.source[1]}get text(){return this._text}set text(e){this._text=e}}function equalArrays(e,o){if(!Array.isArray(e)||!Array.isArray(o))return!1;if(e===o)return!0;if(e.length!==o.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==o[s]&&(!e[s].equals||!e[s].equals(o[s])))return!1;return!0}Token.INVALID_TYPE=0,Token.EPSILON=-2,Token.MIN_USER_TOKEN_TYPE=1,Token.EOF=-1,Token.DEFAULT_CHANNEL=0,Token.HIDDEN_CHANNEL=1;class HashCode{constructor(){this.count=0,this.hash=0}update(){for(let e=0;e<arguments.length;e++){const o=arguments[e];if(null!=o)if(Array.isArray(o))this.update.apply(this,o);else{let e=0;switch(typeof o){case"undefined":case"function":continue;case"number":case"boolean":e=o;break;case"string":e=o.hashCode();break;default:o.updateHashCode?o.updateHashCode(this):console.log("No updateHashCode for "+o.toString());continue}e*=3432918353,e=e<<15|e>>>17,e*=461845907,this.count=this.count+1;let s=this.hash^e;s=s<<13|s>>>19,s=5*s+3864292196,this.hash=s}}}finish(){let e=this.hash^4*this.count;return e^=e>>>16,e*=2246822507,e^=e>>>13,e*=3266489909,e^=e>>>16,e}static hashStuff(){const e=new HashCode;return e.update.apply(e,arguments),e.finish()}}function standardHashCodeFunction(e){return e?e.hashCode():-1}function standardEqualsFunction(e,o){return e?e.equals(o):e===o}function valueToString(e){return null===e?"null":e}function arrayToString(e){return Array.isArray(e)?"["+e.map(valueToString).join(", ")+"]":"null"}const l="h-";class HashSet{constructor(e,o){this.data={},this.hashFunction=e||standardHashCodeFunction,this.equalsFunction=o||standardEqualsFunction}add(e){const o=l+this.hashFunction(e);if(o in this.data){const s=this.data[o];for(let o=0;o<s.length;o++)if(this.equalsFunction(e,s[o]))return s[o];return s.push(e),e}return this.data[o]=[e],e}has(e){return null!=this.get(e)}get(e){const o=l+this.hashFunction(e);if(o in this.data){const s=this.data[o];for(let o=0;o<s.length;o++)if(this.equalsFunction(e,s[o]))return s[o]}return null}values(){return Object.keys(this.data).filter((e=>e.startsWith(l))).flatMap((e=>this.data[e]),this)}toString(){return arrayToString(this.values())}get length(){return Object.keys(this.data).filter((e=>e.startsWith(l))).map((e=>this.data[e].length),this).reduce(((e,o)=>e+o),0)}}class SemanticContext{hashCode(){const e=new HashCode;return this.updateHashCode(e),e.finish()}evaluate(e,o){}evalPrecedence(e,o){return this}static andContext(e,o){if(null===e||e===SemanticContext.NONE)return o;if(null===o||o===SemanticContext.NONE)return e;const s=new AND(e,o);return 1===s.opnds.length?s.opnds[0]:s}static orContext(e,o){if(null===e)return o;if(null===o)return e;if(e===SemanticContext.NONE||o===SemanticContext.NONE)return SemanticContext.NONE;const s=new OR(e,o);return 1===s.opnds.length?s.opnds[0]:s}}class AND extends SemanticContext{constructor(e,o){super();const s=new HashSet;e instanceof AND?e.opnds.map((function(e){s.add(e)})):s.add(e),o instanceof AND?o.opnds.map((function(e){s.add(e)})):s.add(o);const l=filterPrecedencePredicates(s);if(l.length>0){let e=null;l.map((function(o){(null===e||o.precedence<e.precedence)&&(e=o)})),s.add(e)}this.opnds=Array.from(s.values())}equals(e){return this===e||e instanceof AND&&equalArrays(this.opnds,e.opnds)}updateHashCode(e){e.update(this.opnds,"AND")}evaluate(e,o){for(let s=0;s<this.opnds.length;s++)if(!this.opnds[s].evaluate(e,o))return!1;return!0}evalPrecedence(e,o){let s=!1;const l=[];for(let u=0;u<this.opnds.length;u++){const d=this.opnds[u],g=d.evalPrecedence(e,o);if(s|=g!==d,null===g)return null;g!==SemanticContext.NONE&&l.push(g)}if(!s)return this;if(0===l.length)return SemanticContext.NONE;let d=null;return l.map((function(e){d=null===d?e:SemanticContext.andContext(d,e)})),d}toString(){const e=this.opnds.map((e=>e.toString()));return(e.length>3?e.slice(3):e).join("&&")}}class OR extends SemanticContext{constructor(e,o){super();const s=new HashSet;e instanceof OR?e.opnds.map((function(e){s.add(e)})):s.add(e),o instanceof OR?o.opnds.map((function(e){s.add(e)})):s.add(o);const l=filterPrecedencePredicates(s);if(l.length>0){const e=l.sort((function(e,o){return e.compareTo(o)})),o=e[e.length-1];s.add(o)}this.opnds=Array.from(s.values())}equals(e){return this===e||e instanceof OR&&equalArrays(this.opnds,e.opnds)}updateHashCode(e){e.update(this.opnds,"OR")}evaluate(e,o){for(let s=0;s<this.opnds.length;s++)if(this.opnds[s].evaluate(e,o))return!0;return!1}evalPrecedence(e,o){let s=!1;const l=[];for(let u=0;u<this.opnds.length;u++){const d=this.opnds[u],g=d.evalPrecedence(e,o);if(s|=g!==d,g===SemanticContext.NONE)return SemanticContext.NONE;null!==g&&l.push(g)}if(!s)return this;if(0===l.length)return null;const d=null;return l.map((function(e){return null===d?e:SemanticContext.orContext(d,e)})),d}toString(){const e=this.opnds.map((e=>e.toString()));return(e.length>3?e.slice(3):e).join("||")}}function filterPrecedencePredicates(e){const o=[];return e.values().map((function(e){e instanceof SemanticContext.PrecedencePredicate&&o.push(e)})),o}function checkParams(e,o){if(null===e){const e={state:null,alt:null,context:null,semanticContext:null};return o&&(e.reachesIntoOuterContext=0),e}{const s={};return s.state=e.state||null,s.alt=void 0===e.alt?null:e.alt,s.context=e.context||null,s.semanticContext=e.semanticContext||null,o&&(s.reachesIntoOuterContext=e.reachesIntoOuterContext||0,s.precedenceFilterSuppressed=e.precedenceFilterSuppressed||!1),s}}class ATNConfig{constructor(e,o){this.checkContext(e,o),e=checkParams(e),o=checkParams(o,!0),this.state=null!==e.state?e.state:o.state,this.alt=null!==e.alt?e.alt:o.alt,this.context=null!==e.context?e.context:o.context,this.semanticContext=null!==e.semanticContext?e.semanticContext:null!==o.semanticContext?o.semanticContext:SemanticContext.NONE,this.reachesIntoOuterContext=o.reachesIntoOuterContext,this.precedenceFilterSuppressed=o.precedenceFilterSuppressed}checkContext(e,o){null!==e.context&&void 0!==e.context||null!==o&&null!==o.context&&void 0!==o.context||(this.context=null)}hashCode(){const e=new HashCode;return this.updateHashCode(e),e.finish()}updateHashCode(e){e.update(this.state.stateNumber,this.alt,this.context,this.semanticContext)}equals(e){return this===e||e instanceof ATNConfig&&(this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&(null===this.context?null===e.context:this.context.equals(e.context))&&this.semanticContext.equals(e.semanticContext)&&this.precedenceFilterSuppressed===e.precedenceFilterSuppressed)}hashCodeForConfigSet(){const e=new HashCode;return e.update(this.state.stateNumber,this.alt,this.semanticContext),e.finish()}equalsForConfigSet(e){return this===e||e instanceof ATNConfig&&(this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&this.semanticContext.equals(e.semanticContext))}toString(){return"("+this.state+","+this.alt+(null!==this.context?",["+this.context.toString()+"]":"")+(this.semanticContext!==SemanticContext.NONE?","+this.semanticContext.toString():"")+(this.reachesIntoOuterContext>0?",up="+this.reachesIntoOuterContext:"")+")"}}class Interval{constructor(e,o){this.start=e,this.stop=o}clone(){return new Interval(this.start,this.stop)}contains(e){return e>=this.start&&e<this.stop}toString(){return this.start===this.stop-1?this.start.toString():this.start.toString()+".."+(this.stop-1).toString()}get length(){return this.stop-this.start}}Interval.INVALID_INTERVAL=new Interval(-1,-2);class IntervalSet{constructor(){this.intervals=null,this.readOnly=!1}first(e){return null===this.intervals||0===this.intervals.length?Token.INVALID_TYPE:this.intervals[0].start}addOne(e){this.addInterval(new Interval(e,e+1))}addRange(e,o){this.addInterval(new Interval(e,o+1))}addInterval(e){if(null===this.intervals)this.intervals=[],this.intervals.push(e.clone());else{for(let o=0;o<this.intervals.length;o++){const s=this.intervals[o];if(e.stop<s.start)return void this.intervals.splice(o,0,e);if(e.stop===s.start)return void(this.intervals[o]=new Interval(e.start,s.stop));if(e.start<=s.stop)return this.intervals[o]=new Interval(Math.min(s.start,e.start),Math.max(s.stop,e.stop)),void this.reduce(o)}this.intervals.push(e.clone())}}addSet(e){return null!==e.intervals&&e.intervals.forEach((e=>this.addInterval(e)),this),this}reduce(e){if(e<this.intervals.length-1){const o=this.intervals[e],s=this.intervals[e+1];o.stop>=s.stop?(this.intervals.splice(e+1,1),this.reduce(e)):o.stop>=s.start&&(this.intervals[e]=new Interval(o.start,s.stop),this.intervals.splice(e+1,1))}}complement(e,o){const s=new IntervalSet;return s.addInterval(new Interval(e,o+1)),null!==this.intervals&&this.intervals.forEach((e=>s.removeRange(e))),s}contains(e){if(null===this.intervals)return!1;for(let o=0;o<this.intervals.length;o++)if(this.intervals[o].contains(e))return!0;return!1}removeRange(e){if(e.start===e.stop-1)this.removeOne(e.start);else if(null!==this.intervals){let o=0;for(let s=0;s<this.intervals.length;s++){const s=this.intervals[o];if(e.stop<=s.start)return;if(e.start>s.start&&e.stop<s.stop){this.intervals[o]=new Interval(s.start,e.start);const l=new Interval(e.stop,s.stop);return void this.intervals.splice(o,0,l)}e.start<=s.start&&e.stop>=s.stop?(this.intervals.splice(o,1),o-=1):e.start<s.stop?this.intervals[o]=new Interval(s.start,e.start):e.stop<s.stop&&(this.intervals[o]=new Interval(e.stop,s.stop)),o+=1}}}removeOne(e){if(null!==this.intervals)for(let o=0;o<this.intervals.length;o++){const s=this.intervals[o];if(e<s.start)return;if(e===s.start&&e===s.stop-1)return void this.intervals.splice(o,1);if(e===s.start)return void(this.intervals[o]=new Interval(s.start+1,s.stop));if(e===s.stop-1)return void(this.intervals[o]=new Interval(s.start,s.stop-1));if(e<s.stop-1){const l=new Interval(s.start,e);return s.start=e+1,void this.intervals.splice(o,0,l)}}}toString(e,o,s){return e=e||null,o=o||null,s=s||!1,null===this.intervals?"{}":null!==e||null!==o?this.toTokenString(e,o):s?this.toCharString():this.toIndexString()}toCharString(){const e=[];for(let o=0;o<this.intervals.length;o++){const s=this.intervals[o];s.stop===s.start+1?s.start===Token.EOF?e.push("<EOF>"):e.push("'"+String.fromCharCode(s.start)+"'"):e.push("'"+String.fromCharCode(s.start)+"'..'"+String.fromCharCode(s.stop-1)+"'")}return e.length>1?"{"+e.join(", ")+"}":e[0]}toIndexString(){const e=[];for(let o=0;o<this.intervals.length;o++){const s=this.intervals[o];s.stop===s.start+1?s.start===Token.EOF?e.push("<EOF>"):e.push(s.start.toString()):e.push(s.start.toString()+".."+(s.stop-1).toString())}return e.length>1?"{"+e.join(", ")+"}":e[0]}toTokenString(e,o){const s=[];for(let l=0;l<this.intervals.length;l++){const d=this.intervals[l];for(let l=d.start;l<d.stop;l++)s.push(this.elementName(e,o,l))}return s.length>1?"{"+s.join(", ")+"}":s[0]}elementName(e,o,s){return s===Token.EOF?"<EOF>":s===Token.EPSILON?"<EPSILON>":e[s]||o[s]}get length(){return this.intervals.map((e=>e.length)).reduce(((e,o)=>e+o))}}class ATNState{constructor(){this.atn=null,this.stateNumber=ATNState.INVALID_STATE_NUMBER,this.stateType=null,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.nextTokenWithinRule=null}toString(){return this.stateNumber}equals(e){return e instanceof ATNState&&this.stateNumber===e.stateNumber}isNonGreedyExitState(){return!1}addTransition(e,o){void 0===o&&(o=-1),0===this.transitions.length?this.epsilonOnlyTransitions=e.isEpsilon:this.epsilonOnlyTransitions!==e.isEpsilon&&(this.epsilonOnlyTransitions=!1),-1===o?this.transitions.push(e):this.transitions.splice(o,1,e)}}ATNState.INVALID_TYPE=0,ATNState.BASIC=1,ATNState.RULE_START=2,ATNState.BLOCK_START=3,ATNState.PLUS_BLOCK_START=4,ATNState.STAR_BLOCK_START=5,ATNState.TOKEN_START=6,ATNState.RULE_STOP=7,ATNState.BLOCK_END=8,ATNState.STAR_LOOP_BACK=9,ATNState.STAR_LOOP_ENTRY=10,ATNState.PLUS_LOOP_BACK=11,ATNState.LOOP_END=12,ATNState.serializationNames=["INVALID","BASIC","RULE_START","BLOCK_START","PLUS_BLOCK_START","STAR_BLOCK_START","TOKEN_START","RULE_STOP","BLOCK_END","STAR_LOOP_BACK","STAR_LOOP_ENTRY","PLUS_LOOP_BACK","LOOP_END"],ATNState.INVALID_STATE_NUMBER=-1;class RuleStopState extends ATNState{constructor(){return super(),this.stateType=ATNState.RULE_STOP,this}}class Transition{constructor(e){if(void 0===e||null===e)throw"target cannot be null.";this.target=e,this.isEpsilon=!1,this.label=null}}Transition.EPSILON=1,Transition.RANGE=2,Transition.RULE=3,Transition.PREDICATE=4,Transition.ATOM=5,Transition.ACTION=6,Transition.SET=7,Transition.NOT_SET=8,Transition.WILDCARD=9,Transition.PRECEDENCE=10,Transition.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"],Transition.serializationTypes={EpsilonTransition:Transition.EPSILON,RangeTransition:Transition.RANGE,RuleTransition:Transition.RULE,PredicateTransition:Transition.PREDICATE,AtomTransition:Transition.ATOM,ActionTransition:Transition.ACTION,SetTransition:Transition.SET,NotSetTransition:Transition.NOT_SET,WildcardTransition:Transition.WILDCARD,PrecedencePredicateTransition:Transition.PRECEDENCE};class RuleTransition extends Transition{constructor(e,o,s,l){super(e),this.ruleIndex=o,this.precedence=s,this.followState=l,this.serializationType=Transition.RULE,this.isEpsilon=!0}matches(e,o,s){return!1}}class SetTransition extends Transition{constructor(e,o){super(e),this.serializationType=Transition.SET,void 0!==o&&null!==o?this.label=o:(this.label=new IntervalSet,this.label.addOne(Token.INVALID_TYPE))}matches(e,o,s){return this.label.contains(e)}toString(){return this.label.toString()}}class NotSetTransition extends SetTransition{constructor(e,o){super(e,o),this.serializationType=Transition.NOT_SET}matches(e,o,s){return e>=o&&e<=s&&!super.matches(e,o,s)}toString(){return"~"+super.toString()}}class WildcardTransition extends Transition{constructor(e){super(e),this.serializationType=Transition.WILDCARD}matches(e,o,s){return e>=o&&e<=s}toString(){return"."}}class AbstractPredicateTransition extends Transition{constructor(e){super(e)}}class Tree{}class SyntaxTree extends Tree{}class ParseTree extends SyntaxTree{}class RuleNode extends ParseTree{getRuleContext(){throw new Error("missing interface implementation")}}class TerminalNode extends ParseTree{}class ErrorNode extends TerminalNode{}function escapeWhitespace(e,o){return e=e.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),o&&(e=e.replace(/ /g,"·")),e}const d={toStringTree:function(e,o,s){o=o||null,s=s||null,null!==s&&(o=s.ruleNames);let l=d.getNodeText(e,o);l=escapeWhitespace(l,!1);const u=e.getChildCount();if(0===u)return l;let g="("+l+" ";u>0&&(l=d.toStringTree(e.getChild(0),o),g=g.concat(l));for(let p=1;p<u;p++)l=d.toStringTree(e.getChild(p),o),g=g.concat(" "+l);return g=g.concat(")"),g},getNodeText:function(e,o,s){if(o=o||null,s=s||null,null!==s&&(o=s.ruleNames),null!==o){if(e instanceof RuleNode){const s=e.getRuleContext(),l=s.getAltNumber();return 0!=l?o[e.ruleIndex]+":"+l:o[e.ruleIndex]}if(e instanceof ErrorNode)return e.toString();if(e instanceof TerminalNode&&null!==e.symbol)return e.symbol.text}const l=e.getPayload();return l instanceof Token?l.text:e.getPayload().toString()},getChildren:function(e){const o=[];for(let s=0;s<e.getChildCount();s++)o.push(e.getChild(s));return o},getAncestors:function(e){let o=[];e=e.getParent();while(null!==e)o=[e].concat(o),e=e.getParent();return o},findAllTokenNodes:function(e,o){return d.findAllNodes(e,o,!0)},findAllRuleNodes:function(e,o){return d.findAllNodes(e,o,!1)},findAllNodes:function(e,o,s){const l=[];return d._findAllNodes(e,o,s,l),l},_findAllNodes:function(e,o,s,l){s&&e instanceof TerminalNode?e.symbol.type===o&&l.push(e):!s&&e instanceof RuleNode&&e.ruleIndex===o&&l.push(e);for(let u=0;u<e.getChildCount();u++)d._findAllNodes(e.getChild(u),o,s,l)},descendants:function(e){let o=[e];for(let s=0;s<e.getChildCount();s++)o=o.concat(d.descendants(e.getChild(s)));return o}};var u=d;class RuleContext extends RuleNode{constructor(e,o){super(),this.parentCtx=e||null,this.invokingState=o||-1}depth(){let e=0,o=this;while(null!==o)o=o.parentCtx,e+=1;return e}isEmpty(){return-1===this.invokingState}getSourceInterval(){return Interval.INVALID_INTERVAL}getRuleContext(){return this}getPayload(){return this}getText(){return 0===this.getChildCount()?"":this.children.map((function(e){return e.getText()})).join("")}getAltNumber(){return 0}setAltNumber(e){}getChild(e){return null}getChildCount(){return 0}accept(e){return e.visitChildren(this)}toStringTree(e,o){return u.toStringTree(this,e,o)}toString(e,o){e=e||null,o=o||null;let s=this,l="[";while(null!==s&&s!==o){if(null===e)s.isEmpty()||(l+=s.invokingState);else{const o=s.ruleIndex,d=o>=0&&o<e.length?e[o]:""+o;l+=d}null===s.parentCtx||null===e&&s.parentCtx.isEmpty()||(l+=" "),s=s.parentCtx}return l+="]",l}}class PredictionContext{constructor(e){this.cachedHashCode=e}isEmpty(){return this===PredictionContext.EMPTY}hasEmptyPath(){return this.getReturnState(this.length-1)===PredictionContext.EMPTY_RETURN_STATE}hashCode(){return this.cachedHashCode}updateHashCode(e){e.update(this.cachedHashCode)}}PredictionContext.EMPTY=null,PredictionContext.EMPTY_RETURN_STATE=2147483647,PredictionContext.globalNodeCount=1,PredictionContext.id=PredictionContext.globalNodeCount;class ArrayPredictionContext extends PredictionContext{constructor(e,o){const s=new HashCode;s.update(e,o);const l=s.finish();return super(l),this.parents=e,this.returnStates=o,this}isEmpty(){return this.returnStates[0]===PredictionContext.EMPTY_RETURN_STATE}getParent(e){return this.parents[e]}getReturnState(e){return this.returnStates[e]}equals(e){return this===e||e instanceof ArrayPredictionContext&&(this.hashCode()===e.hashCode()&&(equalArrays(this.returnStates,e.returnStates)&&equalArrays(this.parents,e.parents)))}toString(){if(this.isEmpty())return"[]";{let e="[";for(let o=0;o<this.returnStates.length;o++)o>0&&(e+=", "),this.returnStates[o]!==PredictionContext.EMPTY_RETURN_STATE?(e+=this.returnStates[o],null!==this.parents[o]?e=e+" "+this.parents[o]:e+="null"):e+="$";return e+"]"}}get length(){return this.returnStates.length}}class SingletonPredictionContext extends PredictionContext{constructor(e,o){let s=0;const l=new HashCode;null!==e?l.update(e,o):l.update(1),s=l.finish(),super(s),this.parentCtx=e,this.returnState=o}getParent(e){return this.parentCtx}getReturnState(e){return this.returnState}equals(e){return this===e||e instanceof SingletonPredictionContext&&(this.hashCode()===e.hashCode()&&(this.returnState===e.returnState&&(null==this.parentCtx?null==e.parentCtx:this.parentCtx.equals(e.parentCtx))))}toString(){const e=null===this.parentCtx?"":this.parentCtx.toString();return 0===e.length?this.returnState===PredictionContext.EMPTY_RETURN_STATE?"$":""+this.returnState:this.returnState+" "+e}get length(){return 1}static create(e,o){return o===PredictionContext.EMPTY_RETURN_STATE&&null===e?PredictionContext.EMPTY:new SingletonPredictionContext(e,o)}}class EmptyPredictionContext extends SingletonPredictionContext{constructor(){super(null,PredictionContext.EMPTY_RETURN_STATE)}isEmpty(){return!0}getParent(e){return null}getReturnState(e){return this.returnState}equals(e){return this===e}toString(){return"$"}}PredictionContext.EMPTY=new EmptyPredictionContext;const g="h-";class HashMap_HashMap{constructor(e,o){this.data={},this.hashFunction=e||standardHashCodeFunction,this.equalsFunction=o||standardEqualsFunction}set(e,o){const s=g+this.hashFunction(e);if(s in this.data){const l=this.data[s];for(let s=0;s<l.length;s++){const d=l[s];if(this.equalsFunction(e,d.key)){const e=d.value;return d.value=o,e}}return l.push({key:e,value:o}),o}return this.data[s]=[{key:e,value:o}],o}containsKey(e){const o=g+this.hashFunction(e);if(o in this.data){const s=this.data[o];for(let o=0;o<s.length;o++){const l=s[o];if(this.equalsFunction(e,l.key))return!0}}return!1}get(e){const o=g+this.hashFunction(e);if(o in this.data){const s=this.data[o];for(let o=0;o<s.length;o++){const l=s[o];if(this.equalsFunction(e,l.key))return l.value}}return null}entries(){return Object.keys(this.data).filter((e=>e.startsWith(g))).flatMap((e=>this.data[e]),this)}getKeys(){return this.entries().map((e=>e.key))}getValues(){return this.entries().map((e=>e.value))}toString(){const e=this.entries().map((e=>"{"+e.key+":"+e.value+"}"));return"["+e.join(", ")+"]"}get length(){return Object.keys(this.data).filter((e=>e.startsWith(g))).map((e=>this.data[e].length),this).reduce(((e,o)=>e+o),0)}}function predictionContextFromRuleContext(e,o){if(void 0!==o&&null!==o||(o=RuleContext.EMPTY),null===o.parentCtx||o===RuleContext.EMPTY)return PredictionContext.EMPTY;const s=predictionContextFromRuleContext(e,o.parentCtx),l=e.states[o.invokingState],d=l.transitions[0];return SingletonPredictionContext.create(s,d.followState.stateNumber)}function getCachedPredictionContext(e,o,s){if(e.isEmpty())return e;let l=s.get(e)||null;if(null!==l)return l;if(l=o.get(e),null!==l)return s.set(e,l),l;let d=!1,u=[];for(let p=0;p<u.length;p++){const l=getCachedPredictionContext(e.getParent(p),o,s);if(d||l!==e.getParent(p)){if(!d){u=[];for(let o=0;o<e.length;o++)u[o]=e.getParent(o);d=!0}u[p]=l}}if(!d)return o.add(e),s.set(e,e),e;let g=null;return g=0===u.length?PredictionContext.EMPTY:1===u.length?SingletonPredictionContext.create(u[0],e.getReturnState(0)):new ArrayPredictionContext(u,e.returnStates),o.add(g),s.set(g,g),s.set(e,g),g}function merge(e,o,s,l){if(e===o)return e;if(e instanceof SingletonPredictionContext&&o instanceof SingletonPredictionContext)return mergeSingletons(e,o,s,l);if(s){if(e instanceof EmptyPredictionContext)return e;if(o instanceof EmptyPredictionContext)return o}return e instanceof SingletonPredictionContext&&(e=new ArrayPredictionContext([e.getParent()],[e.returnState])),o instanceof SingletonPredictionContext&&(o=new ArrayPredictionContext([o.getParent()],[o.returnState])),mergeArrays(e,o,s,l)}function mergeArrays(e,o,s,l){if(null!==l){let s=l.get(e,o);if(null!==s)return s;if(s=l.get(o,e),null!==s)return s}let d=0,u=0,g=0,p=[],m=[];while(d<e.returnStates.length&&u<o.returnStates.length){const f=e.parents[d],_=o.parents[u];if(e.returnStates[d]===o.returnStates[u]){const o=e.returnStates[d],C=o===PredictionContext.EMPTY_RETURN_STATE&&null===f&&null===_,b=null!==f&&null!==_&&f===_;C||b?(m[g]=f,p[g]=o):(m[g]=merge(f,_,s,l),p[g]=o),d+=1,u+=1}else e.returnStates[d]<o.returnStates[u]?(m[g]=f,p[g]=e.returnStates[d],d+=1):(m[g]=_,p[g]=o.returnStates[u],u+=1);g+=1}if(d<e.returnStates.length)for(let _=d;_<e.returnStates.length;_++)m[g]=e.parents[_],p[g]=e.returnStates[_],g+=1;else for(let _=u;_<o.returnStates.length;_++)m[g]=o.parents[_],p[g]=o.returnStates[_],g+=1;if(g<m.length){if(1===g){const s=SingletonPredictionContext.create(m[0],p[0]);return null!==l&&l.set(e,o,s),s}m=m.slice(0,g),p=p.slice(0,g)}const f=new ArrayPredictionContext(m,p);return f===e?(null!==l&&l.set(e,o,e),e):f===o?(null!==l&&l.set(e,o,o),o):(combineCommonParents(m),null!==l&&l.set(e,o,f),f)}function combineCommonParents(e){const o=new HashMap_HashMap;for(let s=0;s<e.length;s++){const l=e[s];o.containsKey(l)||o.set(l,l)}for(let s=0;s<e.length;s++)e[s]=o.get(e[s])}function mergeSingletons(e,o,s,l){if(null!==l){let s=l.get(e,o);if(null!==s)return s;if(s=l.get(o,e),null!==s)return s}const d=mergeRoot(e,o,s);if(null!==d)return null!==l&&l.set(e,o,d),d;if(e.returnState===o.returnState){const d=merge(e.parentCtx,o.parentCtx,s,l);if(d===e.parentCtx)return e;if(d===o.parentCtx)return o;const u=SingletonPredictionContext.create(d,e.returnState);return null!==l&&l.set(e,o,u),u}{let s=null;if((e===o||null!==e.parentCtx&&e.parentCtx===o.parentCtx)&&(s=e.parentCtx),null!==s){const d=[e.returnState,o.returnState];e.returnState>o.returnState&&(d[0]=o.returnState,d[1]=e.returnState);const u=[s,s],g=new ArrayPredictionContext(u,d);return null!==l&&l.set(e,o,g),g}const d=[e.returnState,o.returnState];let u=[e.parentCtx,o.parentCtx];e.returnState>o.returnState&&(d[0]=o.returnState,d[1]=e.returnState,u=[o.parentCtx,e.parentCtx]);const g=new ArrayPredictionContext(u,d);return null!==l&&l.set(e,o,g),g}}function mergeRoot(e,o,s){if(s){if(e===PredictionContext.EMPTY)return PredictionContext.EMPTY;if(o===PredictionContext.EMPTY)return PredictionContext.EMPTY}else{if(e===PredictionContext.EMPTY&&o===PredictionContext.EMPTY)return PredictionContext.EMPTY;if(e===PredictionContext.EMPTY){const e=[o.returnState,PredictionContext.EMPTY_RETURN_STATE],s=[o.parentCtx,null];return new ArrayPredictionContext(s,e)}if(o===PredictionContext.EMPTY){const o=[e.returnState,PredictionContext.EMPTY_RETURN_STATE],s=[e.parentCtx,null];return new ArrayPredictionContext(s,o)}}return null}class BitSet{constructor(){this.data=[]}add(e){this.data[e]=!0}or(e){Object.keys(e.data).map((e=>this.add(e)),this)}remove(e){delete this.data[e]}has(e){return!0===this.data[e]}values(){return Object.keys(this.data)}minValue(){return Math.min.apply(null,this.values())}hashCode(){return HashCode.hashStuff(this.values())}equals(e){return e instanceof BitSet&&equalArrays(this.data,e.data)}toString(){return"{"+this.values().join(", ")+"}"}get length(){return this.values().length}}class LL1Analyzer{constructor(e){this.atn=e}getDecisionLookahead(e){if(null===e)return null;const o=e.transitions.length,s=[];for(let l=0;l<o;l++){s[l]=new IntervalSet;const o=new HashSet,d=!1;this._LOOK(e.transition(l).target,null,PredictionContext.EMPTY,s[l],o,new BitSet,d,!1),(0===s[l].length||s[l].contains(LL1Analyzer.HIT_PRED))&&(s[l]=null)}return s}LOOK(e,o,s){const l=new IntervalSet,d=!0;s=s||null;const u=null!==s?predictionContextFromRuleContext(e.atn,s):null;return this._LOOK(e,o,u,l,new HashSet,new BitSet,d,!0),l}_LOOK(e,o,s,l,d,u,g,p){const m=new ATNConfig({state:e,alt:0,context:s},null);if(!d.has(m)){if(d.add(m),e===o){if(null===s)return void l.addOne(Token.EPSILON);if(s.isEmpty()&&p)return void l.addOne(Token.EOF)}if(e instanceof RuleStopState){if(null===s)return void l.addOne(Token.EPSILON);if(s.isEmpty()&&p)return void l.addOne(Token.EOF);if(s!==PredictionContext.EMPTY){const m=u.has(e.ruleIndex);try{u.remove(e.ruleIndex);for(let e=0;e<s.length;e++){const m=this.atn.states[s.getReturnState(e)];this._LOOK(m,o,s.getParent(e),l,d,u,g,p)}}finally{m&&u.add(e.ruleIndex)}return}}for(let m=0;m<e.transitions.length;m++){const f=e.transitions[m];if(f.constructor===RuleTransition){if(u.has(f.target.ruleIndex))continue;const e=SingletonPredictionContext.create(s,f.followState.stateNumber);try{u.add(f.target.ruleIndex),this._LOOK(f.target,o,e,l,d,u,g,p)}finally{u.remove(f.target.ruleIndex)}}else if(f instanceof AbstractPredicateTransition)g?this._LOOK(f.target,o,s,l,d,u,g,p):l.addOne(LL1Analyzer.HIT_PRED);else if(f.isEpsilon)this._LOOK(f.target,o,s,l,d,u,g,p);else if(f.constructor===WildcardTransition)l.addRange(Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType);else{let e=f.label;null!==e&&(f instanceof NotSetTransition&&(e=e.complement(Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType)),l.addSet(e))}}}}}LL1Analyzer.HIT_PRED=Token.INVALID_TYPE;class ATN{constructor(e,o){this.grammarType=e,this.maxTokenType=o,this.states=[],this.decisionToState=[],this.ruleToStartState=[],this.ruleToStopState=null,this.modeNameToStartState={},this.ruleToTokenType=null,this.lexerActions=null,this.modeToStartState=[]}nextTokensInContext(e,o){const s=new LL1Analyzer(this);return s.LOOK(e,null,o)}nextTokensNoContext(e){return null!==e.nextTokenWithinRule||(e.nextTokenWithinRule=this.nextTokensInContext(e,null),e.nextTokenWithinRule.readOnly=!0),e.nextTokenWithinRule}nextTokens(e,o){return void 0===o?this.nextTokensNoContext(e):this.nextTokensInContext(e,o)}addState(e){null!==e&&(e.atn=this,e.stateNumber=this.states.length),this.states.push(e)}removeState(e){this.states[e.stateNumber]=null}defineDecisionState(e){return this.decisionToState.push(e),e.decision=this.decisionToState.length-1,e.decision}getDecisionState(e){return 0===this.decisionToState.length?null:this.decisionToState[e]}getExpectedTokens(e,o){if(e<0||e>=this.states.length)throw"Invalid state number.";const s=this.states[e];let l=this.nextTokens(s);if(!l.contains(Token.EPSILON))return l;const d=new IntervalSet;d.addSet(l),d.removeOne(Token.EPSILON);while(null!==o&&o.invokingState>=0&&l.contains(Token.EPSILON)){const e=this.states[o.invokingState],s=e.transitions[0];l=this.nextTokens(s.followState),d.addSet(l),d.removeOne(Token.EPSILON),o=o.parentCtx}return l.contains(Token.EPSILON)&&d.addOne(Token.EOF),d}}ATN.INVALID_ALT_NUMBER=0;var p={LEXER:0,PARSER:1};class BasicState extends ATNState{constructor(){super(),this.stateType=ATNState.BASIC}}class DecisionState extends ATNState{constructor(){return super(),this.decision=-1,this.nonGreedy=!1,this}}class BlockStartState extends DecisionState{constructor(){return super(),this.endState=null,this}}class BlockEndState extends ATNState{constructor(){return super(),this.stateType=ATNState.BLOCK_END,this.startState=null,this}}class LoopEndState extends ATNState{constructor(){return super(),this.stateType=ATNState.LOOP_END,this.loopBackState=null,this}}class RuleStartState extends ATNState{constructor(){return super(),this.stateType=ATNState.RULE_START,this.stopState=null,this.isPrecedenceRule=!1,this}}class TokensStartState extends DecisionState{constructor(){return super(),this.stateType=ATNState.TOKEN_START,this}}class PlusLoopbackState extends DecisionState{constructor(){return super(),this.stateType=ATNState.PLUS_LOOP_BACK,this}}class StarLoopbackState extends ATNState{constructor(){return super(),this.stateType=ATNState.STAR_LOOP_BACK,this}}class StarLoopEntryState extends DecisionState{constructor(){return super(),this.stateType=ATNState.STAR_LOOP_ENTRY,this.loopBackState=null,this.isPrecedenceDecision=null,this}}class PlusBlockStartState extends BlockStartState{constructor(){return super(),this.stateType=ATNState.PLUS_BLOCK_START,this.loopBackState=null,this}}class StarBlockStartState extends BlockStartState{constructor(){return super(),this.stateType=ATNState.STAR_BLOCK_START,this}}class BasicBlockStartState extends BlockStartState{constructor(){return super(),this.stateType=ATNState.BLOCK_START,this}}class AtomTransition extends Transition{constructor(e,o){super(e),this.label_=o,this.label=this.makeLabel(),this.serializationType=Transition.ATOM}makeLabel(){const e=new IntervalSet;return e.addOne(this.label_),e}matches(e,o,s){return this.label_===e}toString(){return this.label_}}class RangeTransition extends Transition{constructor(e,o,s){super(e),this.serializationType=Transition.RANGE,this.start=o,this.stop=s,this.label=this.makeLabel()}makeLabel(){const e=new IntervalSet;return e.addRange(this.start,this.stop),e}matches(e,o,s){return e>=this.start&&e<=this.stop}toString(){return"'"+String.fromCharCode(this.start)+"'..'"+String.fromCharCode(this.stop)+"'"}}class ActionTransition extends Transition{constructor(e,o,s,l){super(e),this.serializationType=Transition.ACTION,this.ruleIndex=o,this.actionIndex=void 0===s?-1:s,this.isCtxDependent=void 0!==l&&l,this.isEpsilon=!0}matches(e,o,s){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}}class EpsilonTransition extends Transition{constructor(e,o){super(e),this.serializationType=Transition.EPSILON,this.isEpsilon=!0,this.outermostPrecedenceReturn=o}matches(e,o,s){return!1}toString(){return"epsilon"}}class Predicate extends SemanticContext{constructor(e,o,s){super(),this.ruleIndex=void 0===e?-1:e,this.predIndex=void 0===o?-1:o,this.isCtxDependent=void 0!==s&&s}evaluate(e,o){const s=this.isCtxDependent?o:null;return e.sempred(s,this.ruleIndex,this.predIndex)}updateHashCode(e){e.update(this.ruleIndex,this.predIndex,this.isCtxDependent)}equals(e){return this===e||e instanceof Predicate&&(this.ruleIndex===e.ruleIndex&&this.predIndex===e.predIndex&&this.isCtxDependent===e.isCtxDependent)}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}SemanticContext.NONE=new Predicate;class PredicateTransition extends AbstractPredicateTransition{constructor(e,o,s,l){super(e),this.serializationType=Transition.PREDICATE,this.ruleIndex=o,this.predIndex=s,this.isCtxDependent=l,this.isEpsilon=!0}matches(e,o,s){return!1}getPredicate(){return new Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}}class PrecedencePredicate extends SemanticContext{constructor(e){super(),this.precedence=void 0===e?0:e}evaluate(e,o){return e.precpred(o,this.precedence)}evalPrecedence(e,o){return e.precpred(o,this.precedence)?SemanticContext.NONE:null}compareTo(e){return this.precedence-e.precedence}updateHashCode(e){e.update(this.precedence)}equals(e){return this===e||e instanceof PrecedencePredicate&&this.precedence===e.precedence}toString(){return"{"+this.precedence+">=prec}?"}}SemanticContext.PrecedencePredicate=PrecedencePredicate;class PrecedencePredicateTransition extends AbstractPredicateTransition{constructor(e,o){super(e),this.serializationType=Transition.PRECEDENCE,this.precedence=o,this.isEpsilon=!0}matches(e,o,s){return!1}getPredicate(){return new PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}}class ATNDeserializationOptions{constructor(e){void 0===e&&(e=null),this.readOnly=!1,this.verifyATN=null===e||e.verifyATN,this.generateRuleBypassTransitions=null!==e&&e.generateRuleBypassTransitions}}ATNDeserializationOptions.defaultOptions=new ATNDeserializationOptions,ATNDeserializationOptions.defaultOptions.readOnly=!0;var m={CHANNEL:0,CUSTOM:1,MODE:2,MORE:3,POP_MODE:4,PUSH_MODE:5,SKIP:6,TYPE:7};class LexerAction{constructor(e){this.actionType=e,this.isPositionDependent=!1}hashCode(){const e=new HashCode;return this.updateHashCode(e),e.finish()}updateHashCode(e){e.update(this.actionType)}equals(e){return this===e}}class LexerSkipAction extends LexerAction{constructor(){super(m.SKIP)}execute(e){e.skip()}toString(){return"skip"}}LexerSkipAction.INSTANCE=new LexerSkipAction;class LexerChannelAction extends LexerAction{constructor(e){super(m.CHANNEL),this.channel=e}execute(e){e._channel=this.channel}updateHashCode(e){e.update(this.actionType,this.channel)}equals(e){return this===e||e instanceof LexerChannelAction&&this.channel===e.channel}toString(){return"channel("+this.channel+")"}}class LexerCustomAction extends LexerAction{constructor(e,o){super(m.CUSTOM),this.ruleIndex=e,this.actionIndex=o,this.isPositionDependent=!0}execute(e){e.action(null,this.ruleIndex,this.actionIndex)}updateHashCode(e){e.update(this.actionType,this.ruleIndex,this.actionIndex)}equals(e){return this===e||e instanceof LexerCustomAction&&(this.ruleIndex===e.ruleIndex&&this.actionIndex===e.actionIndex)}}class LexerMoreAction extends LexerAction{constructor(){super(m.MORE)}execute(e){e.more()}toString(){return"more"}}LexerMoreAction.INSTANCE=new LexerMoreAction;class LexerTypeAction extends LexerAction{constructor(e){super(m.TYPE),this.type=e}execute(e){e.type=this.type}updateHashCode(e){e.update(this.actionType,this.type)}equals(e){return this===e||e instanceof LexerTypeAction&&this.type===e.type}toString(){return"type("+this.type+")"}}class LexerPushModeAction extends LexerAction{constructor(e){super(m.PUSH_MODE),this.mode=e}execute(e){e.pushMode(this.mode)}updateHashCode(e){e.update(this.actionType,this.mode)}equals(e){return this===e||e instanceof LexerPushModeAction&&this.mode===e.mode}toString(){return"pushMode("+this.mode+")"}}class LexerPopModeAction extends LexerAction{constructor(){super(m.POP_MODE)}execute(e){e.popMode()}toString(){return"popMode"}}LexerPopModeAction.INSTANCE=new LexerPopModeAction;class LexerModeAction extends LexerAction{constructor(e){super(m.MODE),this.mode=e}execute(e){e.mode(this.mode)}updateHashCode(e){e.update(this.actionType,this.mode)}equals(e){return this===e||e instanceof LexerModeAction&&this.mode===e.mode}toString(){return"mode("+this.mode+")"}}const f=4;function initArray(e,o){const s=[];return s[e-1]=o,s.map((function(e){return o}))}class ATNDeserializer{constructor(e){void 0!==e&&null!==e||(e=ATNDeserializationOptions.defaultOptions),this.deserializationOptions=e,this.stateFactories=null,this.actionFactories=null}deserialize(e){const o=this.reset(e);this.checkVersion(o),o&&this.skipUUID();const s=this.readATN();this.readStates(s,o),this.readRules(s,o),this.readModes(s);const l=[];return this.readSets(s,l,this.readInt.bind(this)),o&&this.readSets(s,l,this.readInt32.bind(this)),this.readEdges(s,l),this.readDecisions(s),this.readLexerActions(s,o),this.markPrecedenceDecisions(s),this.verifyATN(s),this.deserializationOptions.generateRuleBypassTransitions&&s.grammarType===p.PARSER&&(this.generateRuleBypassTransitions(s),this.verifyATN(s)),s}reset(e){const o=e.charCodeAt?e.charCodeAt(0):e[0];if(o===f-1){const adjust=function(e){const o=e.charCodeAt(0);return o>1?o-2:o+65534},o=e.split("").map(adjust);return o[0]=e.charCodeAt(0),this.data=o,this.pos=0,!0}return this.data=e,this.pos=0,!1}skipUUID(){let e=0;while(e++<8)this.readInt()}checkVersion(e){const o=this.readInt();if(!e&&o!==f)throw"Could not deserialize ATN with version "+o+" (expected "+f+")."}readATN(){const e=this.readInt(),o=this.readInt();return new ATN(e,o)}readStates(e,o){let s,l,d;const u=[],g=[],p=this.readInt();for(let _=0;_<p;_++){const s=this.readInt();if(s===ATNState.INVALID_TYPE){e.addState(null);continue}let l=this.readInt();o&&65535===l&&(l=-1);const d=this.stateFactory(s,l);if(s===ATNState.LOOP_END){const e=this.readInt();u.push([d,e])}else if(d instanceof BlockStartState){const e=this.readInt();g.push([d,e])}e.addState(d)}for(s=0;s<u.length;s++)l=u[s],l[0].loopBackState=e.states[l[1]];for(s=0;s<g.length;s++)l=g[s],l[0].endState=e.states[l[1]];let m=this.readInt();for(s=0;s<m;s++)d=this.readInt(),e.states[d].nonGreedy=!0;let f=this.readInt();for(s=0;s<f;s++)d=this.readInt(),e.states[d].isPrecedenceRule=!0}readRules(e,o){let s;const l=this.readInt();for(e.grammarType===p.LEXER&&(e.ruleToTokenType=initArray(l,0)),e.ruleToStartState=initArray(l,0),s=0;s<l;s++){const l=this.readInt();if(e.ruleToStartState[s]=e.states[l],e.grammarType===p.LEXER){let l=this.readInt();o&&65535===l&&(l=Token.EOF),e.ruleToTokenType[s]=l}}for(e.ruleToStopState=initArray(l,0),s=0;s<e.states.length;s++){const o=e.states[s];o instanceof RuleStopState&&(e.ruleToStopState[o.ruleIndex]=o,e.ruleToStartState[o.ruleIndex].stopState=o)}}readModes(e){const o=this.readInt();for(let s=0;s<o;s++){let o=this.readInt();e.modeToStartState.push(e.states[o])}}readSets(e,o,s){const l=this.readInt();for(let d=0;d<l;d++){const e=new IntervalSet;o.push(e);const l=this.readInt(),d=this.readInt();0!==d&&e.addOne(-1);for(let o=0;o<l;o++){const o=s(),l=s();e.addRange(o,l)}}}readEdges(e,o){let s,l,d,u,g;const p=this.readInt();for(s=0;s<p;s++){const s=this.readInt(),l=this.readInt(),d=this.readInt(),g=this.readInt(),p=this.readInt(),m=this.readInt();u=this.edgeFactory(e,d,s,l,g,p,m,o);const f=e.states[s];f.addTransition(u)}for(s=0;s<e.states.length;s++)for(d=e.states[s],l=0;l<d.transitions.length;l++){const o=d.transitions[l];if(!(o instanceof RuleTransition))continue;let s=-1;e.ruleToStartState[o.target.ruleIndex].isPrecedenceRule&&0===o.precedence&&(s=o.target.ruleIndex),u=new EpsilonTransition(o.followState,s),e.ruleToStopState[o.target.ruleIndex].addTransition(u)}for(s=0;s<e.states.length;s++){if(d=e.states[s],d instanceof BlockStartState){if(null===d.endState)throw"IllegalState";if(null!==d.endState.startState)throw"IllegalState";d.endState.startState=d}if(d instanceof PlusLoopbackState)for(l=0;l<d.transitions.length;l++)g=d.transitions[l].target,g instanceof PlusBlockStartState&&(g.loopBackState=d);else if(d instanceof StarLoopbackState)for(l=0;l<d.transitions.length;l++)g=d.transitions[l].target,g instanceof StarLoopEntryState&&(g.loopBackState=d)}}readDecisions(e){const o=this.readInt();for(let s=0;s<o;s++){const o=this.readInt(),l=e.states[o];e.decisionToState.push(l),l.decision=s}}readLexerActions(e,o){if(e.grammarType===p.LEXER){const s=this.readInt();e.lexerActions=initArray(s,null);for(let l=0;l<s;l++){const s=this.readInt();let d=this.readInt();o&&65535===d&&(d=-1);let u=this.readInt();o&&65535===u&&(u=-1),e.lexerActions[l]=this.lexerActionFactory(s,d,u)}}}generateRuleBypassTransitions(e){let o;const s=e.ruleToStartState.length;for(o=0;o<s;o++)e.ruleToTokenType[o]=e.maxTokenType+o+1;for(o=0;o<s;o++)this.generateRuleBypassTransition(e,o)}generateRuleBypassTransition(e,o){let s,l;const d=new BasicBlockStartState;d.ruleIndex=o,e.addState(d);const u=new BlockEndState;u.ruleIndex=o,e.addState(u),d.endState=u,e.defineDecisionState(d),u.startState=d;let g=null,p=null;if(e.ruleToStartState[o].isPrecedenceRule){for(p=null,s=0;s<e.states.length;s++)if(l=e.states[s],this.stateIsEndStateFor(l,o)){p=l,g=l.loopBackState.transitions[0];break}if(null===g)throw"Couldn't identify final state of the precedence rule prefix section."}else p=e.ruleToStopState[o];for(s=0;s<e.states.length;s++){l=e.states[s];for(let e=0;e<l.transitions.length;e++){const o=l.transitions[e];o!==g&&(o.target===p&&(o.target=u))}}const m=e.ruleToStartState[o],f=m.transitions.length;while(f>0)d.addTransition(m.transitions[f-1]),m.transitions=m.transitions.slice(-1);e.ruleToStartState[o].addTransition(new EpsilonTransition(d)),u.addTransition(new EpsilonTransition(p));const _=new BasicState;e.addState(_),_.addTransition(new AtomTransition(u,e.ruleToTokenType[o])),d.addTransition(new EpsilonTransition(_))}stateIsEndStateFor(e,o){if(e.ruleIndex!==o)return null;if(!(e instanceof StarLoopEntryState))return null;const s=e.transitions[e.transitions.length-1].target;return s instanceof LoopEndState&&s.epsilonOnlyTransitions&&s.transitions[0].target instanceof RuleStopState?e:null}markPrecedenceDecisions(e){for(let o=0;o<e.states.length;o++){const s=e.states[o];if(s instanceof StarLoopEntryState&&e.ruleToStartState[s.ruleIndex].isPrecedenceRule){const e=s.transitions[s.transitions.length-1].target;e instanceof LoopEndState&&e.epsilonOnlyTransitions&&e.transitions[0].target instanceof RuleStopState&&(s.isPrecedenceDecision=!0)}}}verifyATN(e){if(this.deserializationOptions.verifyATN)for(let o=0;o<e.states.length;o++){const s=e.states[o];if(null!==s)if(this.checkCondition(s.epsilonOnlyTransitions||s.transitions.length<=1),s instanceof PlusBlockStartState)this.checkCondition(null!==s.loopBackState);else if(s instanceof StarLoopEntryState)if(this.checkCondition(null!==s.loopBackState),this.checkCondition(2===s.transitions.length),s.transitions[0].target instanceof StarBlockStartState)this.checkCondition(s.transitions[1].target instanceof LoopEndState),this.checkCondition(!s.nonGreedy);else{if(!(s.transitions[0].target instanceof LoopEndState))throw"IllegalState";this.checkCondition(s.transitions[1].target instanceof StarBlockStartState),this.checkCondition(s.nonGreedy)}else s instanceof StarLoopbackState?(this.checkCondition(1===s.transitions.length),this.checkCondition(s.transitions[0].target instanceof StarLoopEntryState)):s instanceof LoopEndState?this.checkCondition(null!==s.loopBackState):s instanceof RuleStartState?this.checkCondition(null!==s.stopState):s instanceof BlockStartState?this.checkCondition(null!==s.endState):s instanceof BlockEndState?this.checkCondition(null!==s.startState):s instanceof DecisionState?this.checkCondition(s.transitions.length<=1||s.decision>=0):this.checkCondition(s.transitions.length<=1||s instanceof RuleStopState)}}checkCondition(e,o){if(!e)throw void 0!==o&&null!==o||(o="IllegalState"),o}readInt(){return this.data[this.pos++]}readInt32(){const e=this.readInt(),o=this.readInt();return e|o<<16}edgeFactory(e,o,s,l,d,u,g,p){const m=e.states[l];switch(o){case Transition.EPSILON:return new EpsilonTransition(m);case Transition.RANGE:return new RangeTransition(m,0!==g?Token.EOF:d,u);case Transition.RULE:return new RuleTransition(e.states[d],u,g,m);case Transition.PREDICATE:return new PredicateTransition(m,d,u,0!==g);case Transition.PRECEDENCE:return new PrecedencePredicateTransition(m,d);case Transition.ATOM:return new AtomTransition(m,0!==g?Token.EOF:d);case Transition.ACTION:return new ActionTransition(m,d,u,0!==g);case Transition.SET:return new SetTransition(m,p[d]);case Transition.NOT_SET:return new NotSetTransition(m,p[d]);case Transition.WILDCARD:return new WildcardTransition(m);default:throw"The specified transition type: "+o+" is not valid."}}stateFactory(e,o){if(null===this.stateFactories){const e=[];e[ATNState.INVALID_TYPE]=null,e[ATNState.BASIC]=()=>new BasicState,e[ATNState.RULE_START]=()=>new RuleStartState,e[ATNState.BLOCK_START]=()=>new BasicBlockStartState,e[ATNState.PLUS_BLOCK_START]=()=>new PlusBlockStartState,e[ATNState.STAR_BLOCK_START]=()=>new StarBlockStartState,e[ATNState.TOKEN_START]=()=>new TokensStartState,e[ATNState.RULE_STOP]=()=>new RuleStopState,e[ATNState.BLOCK_END]=()=>new BlockEndState,e[ATNState.STAR_LOOP_BACK]=()=>new StarLoopbackState,e[ATNState.STAR_LOOP_ENTRY]=()=>new StarLoopEntryState,e[ATNState.PLUS_LOOP_BACK]=()=>new PlusLoopbackState,e[ATNState.LOOP_END]=()=>new LoopEndState,this.stateFactories=e}if(e>this.stateFactories.length||null===this.stateFactories[e])throw"The specified state type "+e+" is not valid.";{const s=this.stateFactories[e]();if(null!==s)return s.ruleIndex=o,s}}lexerActionFactory(e,o,s){if(null===this.actionFactories){const e=[];e[m.CHANNEL]=(e,o)=>new LexerChannelAction(e),e[m.CUSTOM]=(e,o)=>new LexerCustomAction(e,o),e[m.MODE]=(e,o)=>new LexerModeAction(e),e[m.MORE]=(e,o)=>LexerMoreAction.INSTANCE,e[m.POP_MODE]=(e,o)=>LexerPopModeAction.INSTANCE,e[m.PUSH_MODE]=(e,o)=>new LexerPushModeAction(e),e[m.SKIP]=(e,o)=>LexerSkipAction.INSTANCE,e[m.TYPE]=(e,o)=>new LexerTypeAction(e),this.actionFactories=e}if(e>this.actionFactories.length||null===this.actionFactories[e])throw"The specified lexer action type "+e+" is not valid.";return this.actionFactories[e](o,s)}}class ErrorListener{syntaxError(e,o,s,l,d,u){}reportAmbiguity(e,o,s,l,d,u,g){}reportAttemptingFullContext(e,o,s,l,d,u){}reportContextSensitivity(e,o,s,l,d,u){}}class ConsoleErrorListener extends ErrorListener{constructor(){super()}syntaxError(e,o,s,l,d,u){console.error("line "+s+":"+l+" "+d)}}ConsoleErrorListener.INSTANCE=new ConsoleErrorListener;class ProxyErrorListener extends ErrorListener{constructor(e){if(super(),null===e)throw"delegates";return this.delegates=e,this}syntaxError(e,o,s,l,d,u){this.delegates.map((g=>g.syntaxError(e,o,s,l,d,u)))}reportAmbiguity(e,o,s,l,d,u,g){this.delegates.map((p=>p.reportAmbiguity(e,o,s,l,d,u,g)))}reportAttemptingFullContext(e,o,s,l,d,u){this.delegates.map((g=>g.reportAttemptingFullContext(e,o,s,l,d,u)))}reportContextSensitivity(e,o,s,l,d,u){this.delegates.map((g=>g.reportContextSensitivity(e,o,s,l,d,u)))}}class Recognizer{constructor(){this._listeners=[ConsoleErrorListener.INSTANCE],this._interp=null,this._stateNumber=-1}checkVersion(e){const o="4.11.0";o!==e&&console.log("ANTLR runtime and generated code versions disagree: "+o+"!="+e)}addErrorListener(e){this._listeners.push(e)}removeErrorListeners(){this._listeners=[]}getLiteralNames(){return Object.getPrototypeOf(this).constructor.literalNames||[]}getSymbolicNames(){return Object.getPrototypeOf(this).constructor.symbolicNames||[]}getTokenNames(){if(!this.tokenNames){const e=this.getLiteralNames(),o=this.getSymbolicNames(),s=e.length>o.length?e.length:o.length;this.tokenNames=[];for(let l=0;l<s;l++)this.tokenNames[l]=e[l]||o[l]||"<INVALID"}return this.tokenNames}getTokenTypeMap(){const e=this.getTokenNames();if(null===e)throw"The current recognizer does not provide a list of token names.";let o=this.tokenTypeMapCache[e];return void 0===o&&(o=e.reduce((function(e,o,s){e[o]=s})),o.EOF=Token.EOF,this.tokenTypeMapCache[e]=o),o}getRuleIndexMap(){const e=this.ruleNames;if(null===e)throw"The current recognizer does not provide a list of rule names.";let o=this.ruleIndexMapCache[e];return void 0===o&&(o=e.reduce((function(e,o,s){e[o]=s})),this.ruleIndexMapCache[e]=o),o}getTokenType(e){const o=this.getTokenTypeMap()[e];return void 0!==o?o:Token.INVALID_TYPE}getErrorHeader(e){const o=e.getOffendingToken().line,s=e.getOffendingToken().column;return"line "+o+":"+s}getTokenErrorDisplay(e){if(null===e)return"<no token>";let o=e.text;return null===o&&(o=e.type===Token.EOF?"<EOF>":"<"+e.type+">"),o=o.replace("\n","\\n").replace("\r","\\r").replace("\t","\\t"),"'"+o+"'"}getErrorListenerDispatch(){return new ProxyErrorListener(this._listeners)}sempred(e,o,s){return!0}precpred(e,o){return!0}get state(){return this._stateNumber}set state(e){this._stateNumber=e}}Recognizer.tokenTypeMapCache={},Recognizer.ruleIndexMapCache={};class CommonToken extends Token{constructor(e,o,s,l,d){super(),this.source=void 0!==e?e:CommonToken.EMPTY_SOURCE,this.type=void 0!==o?o:null,this.channel=void 0!==s?s:Token.DEFAULT_CHANNEL,this.start=void 0!==l?l:-1,this.stop=void 0!==d?d:-1,this.tokenIndex=-1,null!==this.source[0]?(this.line=e[0].line,this.column=e[0].column):this.column=-1}clone(){const e=new CommonToken(this.source,this.type,this.channel,this.start,this.stop);return e.tokenIndex=this.tokenIndex,e.line=this.line,e.column=this.column,e.text=this.text,e}toString(){let e=this.text;return e=null!==e?e.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):"<no text>","[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+e+"',<"+this.type+">"+(this.channel>0?",channel="+this.channel:"")+","+this.line+":"+this.column+"]"}get text(){if(null!==this._text)return this._text;const e=this.getInputStream();if(null===e)return null;const o=e.size;return this.start<o&&this.stop<o?e.getText(this.start,this.stop):"<EOF>"}set text(e){this._text=e}}CommonToken.EMPTY_SOURCE=[null,null];class TokenFactory{}class CommonTokenFactory extends TokenFactory{constructor(e){super(),this.copyText=void 0!==e&&e}create(e,o,s,l,d,u,g,p){const m=new CommonToken(e,o,l,d,u);return m.line=g,m.column=p,null!==s?m.text=s:this.copyText&&null!==e[1]&&(m.text=e[1].getText(d,u)),m}createThin(e,o){const s=new CommonToken(null,e);return s.text=o,s}}CommonTokenFactory.DEFAULT=new CommonTokenFactory;class RecognitionException extends Error{constructor(e){super(e.message),Error.captureStackTrace&&Error.captureStackTrace(this,RecognitionException),this.message=e.message,this.recognizer=e.recognizer,this.input=e.input,this.ctx=e.ctx,this.offendingToken=null,this.offendingState=-1,null!==this.recognizer&&(this.offendingState=this.recognizer.state)}getExpectedTokens(){return null!==this.recognizer?this.recognizer.atn.getExpectedTokens(this.offendingState,this.ctx):null}toString(){return this.message}}class LexerNoViableAltException extends RecognitionException{constructor(e,o,s,l){super({message:"",recognizer:e,input:o,ctx:null}),this.startIndex=s,this.deadEndConfigs=l}toString(){let e="";return this.startIndex>=0&&this.startIndex<this.input.size&&(e=this.input.getText(new Interval(this.startIndex,this.startIndex))),"LexerNoViableAltException"+e}}class Lexer extends Recognizer{constructor(e){super(),this._input=e,this._factory=CommonTokenFactory.DEFAULT,this._tokenFactorySourcePair=[this,e],this._interp=null,this._token=null,this._tokenStartCharIndex=-1,this._tokenStartLine=-1,this._tokenStartColumn=-1,this._hitEOF=!1,this._channel=Token.DEFAULT_CHANNEL,this._type=Token.INVALID_TYPE,this._modeStack=[],this._mode=Lexer.DEFAULT_MODE,this._text=null}reset(){null!==this._input&&this._input.seek(0),this._token=null,this._type=Token.INVALID_TYPE,this._channel=Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartColumn=-1,this._tokenStartLine=-1,this._text=null,this._hitEOF=!1,this._mode=Lexer.DEFAULT_MODE,this._modeStack=[],this._interp.reset()}nextToken(){if(null===this._input)throw"nextToken requires a non-null input stream.";const e=this._input.mark();try{for(;;){if(this._hitEOF)return this.emitEOF(),this._token;this._token=null,this._channel=Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartColumn=this._interp.column,this._tokenStartLine=this._interp.line,this._text=null;let e=!1;for(;;){this._type=Token.INVALID_TYPE;let s=Lexer.SKIP;try{s=this._interp.match(this._input,this._mode)}catch(o){if(!(o instanceof RecognitionException))throw console.log(o.stack),o;this.notifyListeners(o),this.recover(o)}if(this._input.LA(1)===Token.EOF&&(this._hitEOF=!0),this._type===Token.INVALID_TYPE&&(this._type=s),this._type===Lexer.SKIP){e=!0;break}if(this._type!==Lexer.MORE)break}if(!e)return null===this._token&&this.emit(),this._token}}finally{this._input.release(e)}}skip(){this._type=Lexer.SKIP}more(){this._type=Lexer.MORE}mode(e){this._mode=e}pushMode(e){this._interp.debug&&console.log("pushMode "+e),this._modeStack.push(this._mode),this.mode(e)}popMode(){if(0===this._modeStack.length)throw"Empty Stack";return this._interp.debug&&console.log("popMode back to "+this._modeStack.slice(0,-1)),this.mode(this._modeStack.pop()),this._mode}emitToken(e){this._token=e}emit(){const e=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.getCharIndex()-1,this._tokenStartLine,this._tokenStartColumn);return this.emitToken(e),e}emitEOF(){const e=this.column,o=this.line,s=this._factory.create(this._tokenFactorySourcePair,Token.EOF,null,Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,o,e);return this.emitToken(s),s}getCharIndex(){return this._input.index}getAllTokens(){const e=[];let o=this.nextToken();while(o.type!==Token.EOF)e.push(o),o=this.nextToken();return e}notifyListeners(e){const o=this._tokenStartCharIndex,s=this._input.index,l=this._input.getText(o,s),d="token recognition error at: '"+this.getErrorDisplay(l)+"'",u=this.getErrorListenerDispatch();u.syntaxError(this,null,this._tokenStartLine,this._tokenStartColumn,d,e)}getErrorDisplay(e){const o=[];for(let s=0;s<e.length;s++)o.push(e[s]);return o.join("")}getErrorDisplayForChar(e){return e.charCodeAt(0)===Token.EOF?"<EOF>":"\n"===e?"\\n":"\t"===e?"\\t":"\r"===e?"\\r":e}getCharErrorDisplay(e){return"'"+this.getErrorDisplayForChar(e)+"'"}recover(e){this._input.LA(1)!==Token.EOF&&(e instanceof LexerNoViableAltException?this._interp.consume(this._input):this._input.consume())}get inputStream(){return this._input}set inputStream(e){this._input=null,this._tokenFactorySourcePair=[this,this._input],this.reset(),this._input=e,this._tokenFactorySourcePair=[this,this._input]}get sourceName(){return this._input.sourceName}get type(){return this._type}set type(e){this._type=e}get line(){return this._interp.line}set line(e){this._interp.line=e}get column(){return this._interp.column}set column(e){this._interp.column=e}get text(){return null!==this._text?this._text:this._interp.getText(this._input)}set text(e){this._text=e}}function hashATNConfig(e){return e.hashCodeForConfigSet()}function equalATNConfigs(e,o){return e===o||null!==e&&null!==o&&e.equalsForConfigSet(o)}Lexer.DEFAULT_MODE=0,Lexer.MORE=-2,Lexer.SKIP=-3,Lexer.DEFAULT_TOKEN_CHANNEL=Token.DEFAULT_CHANNEL,Lexer.HIDDEN=Token.HIDDEN_CHANNEL,Lexer.MIN_CHAR_VALUE=0,Lexer.MAX_CHAR_VALUE=1114111;class ATNConfigSet{constructor(e){this.configLookup=new HashSet(hashATNConfig,equalATNConfigs),this.fullCtx=void 0===e||e,this.readOnly=!1,this.configs=[],this.uniqueAlt=0,this.conflictingAlts=null,this.hasSemanticContext=!1,this.dipsIntoOuterContext=!1,this.cachedHashCode=-1}add(e,o){if(void 0===o&&(o=null),this.readOnly)throw"This set is readonly";e.semanticContext!==SemanticContext.NONE&&(this.hasSemanticContext=!0),e.reachesIntoOuterContext>0&&(this.dipsIntoOuterContext=!0);const s=this.configLookup.add(e);if(s===e)return this.cachedHashCode=-1,this.configs.push(e),!0;const l=!this.fullCtx,d=merge(s.context,e.context,l,o);return s.reachesIntoOuterContext=Math.max(s.reachesIntoOuterContext,e.reachesIntoOuterContext),e.precedenceFilterSuppressed&&(s.precedenceFilterSuppressed=!0),s.context=d,!0}getStates(){const e=new HashSet;for(let o=0;o<this.configs.length;o++)e.add(this.configs[o].state);return e}getPredicates(){const e=[];for(let o=0;o<this.configs.length;o++){const s=this.configs[o].semanticContext;s!==SemanticContext.NONE&&e.push(s.semanticContext)}return e}optimizeConfigs(e){if(this.readOnly)throw"This set is readonly";if(0!==this.configLookup.length)for(let o=0;o<this.configs.length;o++){const s=this.configs[o];s.context=e.getCachedContext(s.context)}}addAll(e){for(let o=0;o<e.length;o++)this.add(e[o]);return!1}equals(e){return this===e||e instanceof ATNConfigSet&&equalArrays(this.configs,e.configs)&&this.fullCtx===e.fullCtx&&this.uniqueAlt===e.uniqueAlt&&this.conflictingAlts===e.conflictingAlts&&this.hasSemanticContext===e.hasSemanticContext&&this.dipsIntoOuterContext===e.dipsIntoOuterContext}hashCode(){const e=new HashCode;return e.update(this.configs),e.finish()}updateHashCode(e){this.readOnly?(-1===this.cachedHashCode&&(this.cachedHashCode=this.hashCode()),e.update(this.cachedHashCode)):e.update(this.hashCode())}isEmpty(){return 0===this.configs.length}contains(e){if(null===this.configLookup)throw"This method is not implemented for readonly sets.";return this.configLookup.contains(e)}containsFast(e){if(null===this.configLookup)throw"This method is not implemented for readonly sets.";return this.configLookup.containsFast(e)}clear(){if(this.readOnly)throw"This set is readonly";this.configs=[],this.cachedHashCode=-1,this.configLookup=new HashSet}setReadonly(e){this.readOnly=e,e&&(this.configLookup=null)}toString(){return arrayToString(this.configs)+(this.hasSemanticContext?",hasSemanticContext="+this.hasSemanticContext:"")+(this.uniqueAlt!==ATN.INVALID_ALT_NUMBER?",uniqueAlt="+this.uniqueAlt:"")+(null!==this.conflictingAlts?",conflictingAlts="+this.conflictingAlts:"")+(this.dipsIntoOuterContext?",dipsIntoOuterContext":"")}get items(){return this.configs}get length(){return this.configs.length}}class DFAState{constructor(e,o){return null===e&&(e=-1),null===o&&(o=new ATNConfigSet),this.stateNumber=e,this.configs=o,this.edges=null,this.isAcceptState=!1,this.prediction=0,this.lexerActionExecutor=null,this.requiresFullContext=!1,this.predicates=null,this}getAltSet(){const e=new HashSet;if(null!==this.configs)for(let o=0;o<this.configs.length;o++){const s=this.configs[o];e.add(s.alt)}return 0===e.length?null:e}equals(e){return this===e||e instanceof DFAState&&this.configs.equals(e.configs)}toString(){let e=this.stateNumber+":"+this.configs;return this.isAcceptState&&(e+="=>",null!==this.predicates?e+=this.predicates:e+=this.prediction),e}hashCode(){const e=new HashCode;return e.update(this.configs),e.finish()}}class ATNSimulator{constructor(e,o){return this.atn=e,this.sharedContextCache=o,this}getCachedContext(e){if(null===this.sharedContextCache)return e;const o=new HashMap_HashMap;return getCachedPredictionContext(e,this.sharedContextCache,o)}}ATNSimulator.ERROR=new DFAState(2147483647,new ATNConfigSet);class OrderedATNConfigSet extends ATNConfigSet{constructor(){super(),this.configLookup=new HashSet}}class LexerATNConfig extends ATNConfig{constructor(e,o){super(e,o);const s=e.lexerActionExecutor||null;return this.lexerActionExecutor=s||(null!==o?o.lexerActionExecutor:null),this.passedThroughNonGreedyDecision=null!==o&&this.checkNonGreedyDecision(o,this.state),this.hashCodeForConfigSet=LexerATNConfig.prototype.hashCode,this.equalsForConfigSet=LexerATNConfig.prototype.equals,this}updateHashCode(e){e.update(this.state.stateNumber,this.alt,this.context,this.semanticContext,this.passedThroughNonGreedyDecision,this.lexerActionExecutor)}equals(e){return this===e||e instanceof LexerATNConfig&&this.passedThroughNonGreedyDecision===e.passedThroughNonGreedyDecision&&(this.lexerActionExecutor?this.lexerActionExecutor.equals(e.lexerActionExecutor):!e.lexerActionExecutor)&&super.equals(e)}checkNonGreedyDecision(e,o){return e.passedThroughNonGreedyDecision||o instanceof DecisionState&&o.nonGreedy}}class LexerIndexedCustomAction extends LexerAction{constructor(e,o){super(o.actionType),this.offset=e,this.action=o,this.isPositionDependent=!0}execute(e){this.action.execute(e)}updateHashCode(e){e.update(this.actionType,this.offset,this.action)}equals(e){return this===e||e instanceof LexerIndexedCustomAction&&(this.offset===e.offset&&this.action===e.action)}}class LexerActionExecutor{constructor(e){return this.lexerActions=null===e?[]:e,this.cachedHashCode=HashCode.hashStuff(e),this}fixOffsetBeforeMatch(e){let o=null;for(let s=0;s<this.lexerActions.length;s++)!this.lexerActions[s].isPositionDependent||this.lexerActions[s]instanceof LexerIndexedCustomAction||(null===o&&(o=this.lexerActions.concat([])),o[s]=new LexerIndexedCustomAction(e,this.lexerActions[s]));return null===o?this:new LexerActionExecutor(o)}execute(e,o,s){let l=!1;const d=o.index;try{for(let u=0;u<this.lexerActions.length;u++){let g=this.lexerActions[u];if(g instanceof LexerIndexedCustomAction){const e=g.offset;o.seek(s+e),g=g.action,l=s+e!==d}else g.isPositionDependent&&(o.seek(d),l=!1);g.execute(e)}}finally{l&&o.seek(d)}}hashCode(){return this.cachedHashCode}updateHashCode(e){e.update(this.cachedHashCode)}equals(e){if(this===e)return!0;if(e instanceof LexerActionExecutor){if(this.cachedHashCode!=e.cachedHashCode)return!1;if(this.lexerActions.length!=e.lexerActions.length)return!1;{const o=this.lexerActions.length;for(let s=0;s<o;++s)if(!this.lexerActions[s].equals(e.lexerActions[s]))return!1;return!0}}return!1}static append(e,o){if(null===e)return new LexerActionExecutor([o]);const s=e.lexerActions.concat([o]);return new LexerActionExecutor(s)}}function resetSimState(e){e.index=-1,e.line=0,e.column=-1,e.dfaState=null}class SimState{constructor(){resetSimState(this)}reset(){resetSimState(this)}}class LexerATNSimulator extends ATNSimulator{constructor(e,o,s,l){super(o,l),this.decisionToDFA=s,this.recog=e,this.startIndex=-1,this.line=1,this.column=0,this.mode=Lexer.DEFAULT_MODE,this.prevAccept=new SimState}copyState(e){this.column=e.column,this.line=e.line,this.mode=e.mode,this.startIndex=e.startIndex}match(e,o){this.mode=o;const s=e.mark();try{this.startIndex=e.index,this.prevAccept.reset();const l=this.decisionToDFA[o];return null===l.s0?this.matchATN(e):this.execATN(e,l.s0)}finally{e.release(s)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this.line=1,this.column=0,this.mode=Lexer.DEFAULT_MODE}matchATN(e){const o=this.atn.modeToStartState[this.mode];LexerATNSimulator.debug&&console.log("matchATN mode "+this.mode+" start: "+o);const s=this.mode,l=this.computeStartState(e,o),d=l.hasSemanticContext;l.hasSemanticContext=!1;const u=this.addDFAState(l);d||(this.decisionToDFA[this.mode].s0=u);const g=this.execATN(e,u);return LexerATNSimulator.debug&&console.log("DFA after matchATN: "+this.decisionToDFA[s].toLexerString()),g}execATN(e,o){LexerATNSimulator.debug&&console.log("start state closure="+o.configs),o.isAcceptState&&this.captureSimState(this.prevAccept,e,o);let s=e.LA(1),l=o;for(;;){LexerATNSimulator.debug&&console.log("execATN loop starting closure: "+l.configs);let o=this.getExistingTargetState(l,s);if(null===o&&(o=this.computeTargetState(e,l,s)),o===ATNSimulator.ERROR)break;if(s!==Token.EOF&&this.consume(e),o.isAcceptState&&(this.captureSimState(this.prevAccept,e,o),s===Token.EOF))break;s=e.LA(1),l=o}return this.failOrAccept(this.prevAccept,e,l.configs,s)}getExistingTargetState(e,o){if(null===e.edges||o<LexerATNSimulator.MIN_DFA_EDGE||o>LexerATNSimulator.MAX_DFA_EDGE)return null;let s=e.edges[o-LexerATNSimulator.MIN_DFA_EDGE];return void 0===s&&(s=null),LexerATNSimulator.debug&&null!==s&&console.log("reuse state "+e.stateNumber+" edge to "+s.stateNumber),s}computeTargetState(e,o,s){const l=new OrderedATNConfigSet;return this.getReachableConfigSet(e,o.configs,l,s),0===l.items.length?(l.hasSemanticContext||this.addDFAEdge(o,s,ATNSimulator.ERROR),ATNSimulator.ERROR):this.addDFAEdge(o,s,null,l)}failOrAccept(e,o,s,l){if(null!==this.prevAccept.dfaState){const s=e.dfaState.lexerActionExecutor;return this.accept(o,s,this.startIndex,e.index,e.line,e.column),e.dfaState.prediction}if(l===Token.EOF&&o.index===this.startIndex)return Token.EOF;throw new LexerNoViableAltException(this.recog,o,this.startIndex,s)}getReachableConfigSet(e,o,s,l){let d=ATN.INVALID_ALT_NUMBER;for(let u=0;u<o.items.length;u++){const g=o.items[u],p=g.alt===d;if(!p||!g.passedThroughNonGreedyDecision){LexerATNSimulator.debug&&console.log("testing %s at %s\n",this.getTokenName(l),g.toString(this.recog,!0));for(let o=0;o<g.state.transitions.length;o++){const u=g.state.transitions[o],m=this.getReachableTarget(u,l);if(null!==m){let o=g.lexerActionExecutor;null!==o&&(o=o.fixOffsetBeforeMatch(e.index-this.startIndex));const u=l===Token.EOF,f=new LexerATNConfig({state:m,lexerActionExecutor:o},g);this.closure(e,f,s,p,!0,u)&&(d=g.alt)}}}}}accept(e,o,s,l,d,u){LexerATNSimulator.debug&&console.log("ACTION %s\n",o),e.seek(l),this.line=d,this.column=u,null!==o&&null!==this.recog&&o.execute(this.recog,e,s)}getReachableTarget(e,o){return e.matches(o,0,Lexer.MAX_CHAR_VALUE)?e.target:null}computeStartState(e,o){const s=PredictionContext.EMPTY,l=new OrderedATNConfigSet;for(let d=0;d<o.transitions.length;d++){const u=o.transitions[d].target,g=new LexerATNConfig({state:u,alt:d+1,context:s},null);this.closure(e,g,l,!1,!1,!1)}return l}closure(e,o,s,l,d,u){let g=null;if(LexerATNSimulator.debug&&console.log("closure("+o.toString(this.recog,!0)+")"),o.state instanceof RuleStopState){if(LexerATNSimulator.debug&&(null!==this.recog?console.log("closure at %s rule stop %s\n",this.recog.ruleNames[o.state.ruleIndex],o):console.log("closure at rule stop %s\n",o)),null===o.context||o.context.hasEmptyPath()){if(null===o.context||o.context.isEmpty())return s.add(o),!0;s.add(new LexerATNConfig({state:o.state,context:PredictionContext.EMPTY},o)),l=!0}if(null!==o.context&&!o.context.isEmpty())for(let p=0;p<o.context.length;p++)if(o.context.getReturnState(p)!==PredictionContext.EMPTY_RETURN_STATE){const m=o.context.getParent(p),f=this.atn.states[o.context.getReturnState(p)];g=new LexerATNConfig({state:f,context:m},o),l=this.closure(e,g,s,l,d,u)}return l}o.state.epsilonOnlyTransitions||l&&o.passedThroughNonGreedyDecision||s.add(o);for(let p=0;p<o.state.transitions.length;p++){const m=o.state.transitions[p];g=this.getEpsilonTarget(e,o,m,s,d,u),null!==g&&(l=this.closure(e,g,s,l,d,u))}return l}getEpsilonTarget(e,o,s,l,d,u){let g=null;if(s.serializationType===Transition.RULE){const e=SingletonPredictionContext.create(o.context,s.followState.stateNumber);g=new LexerATNConfig({state:s.target,context:e},o)}else{if(s.serializationType===Transition.PRECEDENCE)throw"Precedence predicates are not supported in lexers.";if(s.serializationType===Transition.PREDICATE)LexerATNSimulator.debug&&console.log("EVAL rule "+s.ruleIndex+":"+s.predIndex),l.hasSemanticContext=!0,this.evaluatePredicate(e,s.ruleIndex,s.predIndex,d)&&(g=new LexerATNConfig({state:s.target},o));else if(s.serializationType===Transition.ACTION)if(null===o.context||o.context.hasEmptyPath()){const e=LexerActionExecutor.append(o.lexerActionExecutor,this.atn.lexerActions[s.actionIndex]);g=new LexerATNConfig({state:s.target,lexerActionExecutor:e},o)}else g=new LexerATNConfig({state:s.target},o);else s.serializationType===Transition.EPSILON?g=new LexerATNConfig({state:s.target},o):s.serializationType!==Transition.ATOM&&s.serializationType!==Transition.RANGE&&s.serializationType!==Transition.SET||u&&s.matches(Token.EOF,0,Lexer.MAX_CHAR_VALUE)&&(g=new LexerATNConfig({state:s.target},o))}return g}evaluatePredicate(e,o,s,l){if(null===this.recog)return!0;if(!l)return this.recog.sempred(null,o,s);const d=this.column,u=this.line,g=e.index,p=e.mark();try{return this.consume(e),this.recog.sempred(null,o,s)}finally{this.column=d,this.line=u,e.seek(g),e.release(p)}}captureSimState(e,o,s){e.index=o.index,e.line=this.line,e.column=this.column,e.dfaState=s}addDFAEdge(e,o,s,l){if(void 0===s&&(s=null),void 0===l&&(l=null),null===s&&null!==l){const e=l.hasSemanticContext;if(l.hasSemanticContext=!1,s=this.addDFAState(l),e)return s}return o<LexerATNSimulator.MIN_DFA_EDGE||o>LexerATNSimulator.MAX_DFA_EDGE||(LexerATNSimulator.debug&&console.log("EDGE "+e+" -> "+s+" upon "+o),null===e.edges&&(e.edges=[]),e.edges[o-LexerATNSimulator.MIN_DFA_EDGE]=s),s}addDFAState(e){const o=new DFAState(null,e);let s=null;for(let g=0;g<e.items.length;g++){const o=e.items[g];if(o.state instanceof RuleStopState){s=o;break}}null!==s&&(o.isAcceptState=!0,o.lexerActionExecutor=s.lexerActionExecutor,o.prediction=this.atn.ruleToTokenType[s.state.ruleIndex]);const l=this.decisionToDFA[this.mode],d=l.states.get(o);if(null!==d)return d;const u=o;return u.stateNumber=l.states.length,e.setReadonly(!0),u.configs=e,l.states.add(u),u}getDFA(e){return this.decisionToDFA[e]}getText(e){return e.getText(this.startIndex,e.index-1)}consume(e){const o=e.LA(1);o==="\n".charCodeAt(0)?(this.line+=1,this.column=0):this.column+=1,e.consume()}getTokenName(e){return-1===e?"EOF":"'"+String.fromCharCode(e)+"'"}}LexerATNSimulator.debug=!1,LexerATNSimulator.dfa_debug=!1,LexerATNSimulator.MIN_DFA_EDGE=0,LexerATNSimulator.MAX_DFA_EDGE=127;class PredPrediction{constructor(e,o){this.alt=o,this.pred=e}toString(){return"("+this.pred+", "+this.alt+")"}}class AltDict{constructor(){this.data={}}get(e){return this.data["k-"+e]||null}set(e,o){this.data["k-"+e]=o}values(){return Object.keys(this.data).filter((e=>e.startsWith("k-"))).map((e=>this.data[e]),this)}}const _={SLL:0,LL:1,LL_EXACT_AMBIG_DETECTION:2,hasSLLConflictTerminatingPrediction:function(e,o){if(_.allConfigsInRuleStopStates(o))return!0;if(e===_.SLL&&o.hasSemanticContext){const e=new ATNConfigSet;for(let s=0;s<o.items.length;s++){let l=o.items[s];l=new ATNConfig({semanticContext:SemanticContext.NONE},l),e.add(l)}o=e}const s=_.getConflictingAltSubsets(o);return _.hasConflictingAltSet(s)&&!_.hasStateAssociatedWithOneAlt(o)},hasConfigInRuleStopState:function(e){for(let o=0;o<e.items.length;o++){const s=e.items[o];if(s.state instanceof RuleStopState)return!0}return!1},allConfigsInRuleStopStates:function(e){for(let o=0;o<e.items.length;o++){const s=e.items[o];if(!(s.state instanceof RuleStopState))return!1}return!0},resolvesToJustOneViableAlt:function(e){return _.getSingleViableAlt(e)},allSubsetsConflict:function(e){return!_.hasNonConflictingAltSet(e)},hasNonConflictingAltSet:function(e){for(let o=0;o<e.length;o++){const s=e[o];if(1===s.length)return!0}return!1},hasConflictingAltSet:function(e){for(let o=0;o<e.length;o++){const s=e[o];if(s.length>1)return!0}return!1},allSubsetsEqual:function(e){let o=null;for(let s=0;s<e.length;s++){const l=e[s];if(null===o)o=l;else if(l!==o)return!1}return!0},getUniqueAlt:function(e){const o=_.getAlts(e);return 1===o.length?o.minValue():ATN.INVALID_ALT_NUMBER},getAlts:function(e){const o=new BitSet;return e.map((function(e){o.or(e)})),o},getConflictingAltSubsets:function(e){const o=new HashMap_HashMap;return o.hashFunction=function(e){HashCode.hashStuff(e.state.stateNumber,e.context)},o.equalsFunction=function(e,o){return e.state.stateNumber===o.state.stateNumber&&e.context.equals(o.context)},e.items.map((function(e){let s=o.get(e);null===s&&(s=new BitSet,o.set(e,s)),s.add(e.alt)})),o.getValues()},getStateToAltMap:function(e){const o=new AltDict;return e.items.map((function(e){let s=o.get(e.state);null===s&&(s=new BitSet,o.set(e.state,s)),s.add(e.alt)})),o},hasStateAssociatedWithOneAlt:function(e){const o=_.getStateToAltMap(e).values();for(let s=0;s<o.length;s++)if(1===o[s].length)return!0;return!1},getSingleViableAlt:function(e){let o=null;for(let s=0;s<e.length;s++){const l=e[s],d=l.minValue();if(null===o)o=d;else if(o!==d)return ATN.INVALID_ALT_NUMBER}return o}};var C=_;class NoViableAltException extends RecognitionException{constructor(e,o,s,l,d,u){u=u||e._ctx,l=l||e.getCurrentToken(),s=s||e.getCurrentToken(),o=o||e.getInputStream(),super({message:"",recognizer:e,input:o,ctx:u}),this.deadEndConfigs=d,this.startToken=s,this.offendingToken=l}}class DoubleDict{constructor(e){this.defaultMapCtor=e||HashMap_HashMap,this.cacheMap=new this.defaultMapCtor}get(e,o){const s=this.cacheMap.get(e)||null;return null===s?null:s.get(o)||null}set(e,o,s){let l=this.cacheMap.get(e)||null;null===l&&(l=new this.defaultMapCtor,this.cacheMap.set(e,l)),l.set(o,s)}}class ParserATNSimulator extends ATNSimulator{constructor(e,o,s,l){super(o,l),this.parser=e,this.decisionToDFA=s,this.predictionMode=C.LL,this._input=null,this._startIndex=0,this._outerContext=null,this._dfa=null,this.mergeCache=null,this.debug=!1,this.debug_closure=!1,this.debug_add=!1,this.debug_list_atn_decisions=!1,this.dfa_debug=!1,this.retry_debug=!1}reset(){}adaptivePredict(e,o,s){(this.debug||this.debug_list_atn_decisions)&&console.log("adaptivePredict decision "+o+" exec LA(1)=="+this.getLookaheadName(e)+" line "+e.LT(1).line+":"+e.LT(1).column),this._input=e,this._startIndex=e.index,this._outerContext=s;const l=this.decisionToDFA[o];this._dfa=l;const d=e.mark(),u=e.index;try{let o;if(o=l.precedenceDfa?l.getPrecedenceStartState(this.parser.getPrecedence()):l.s0,null===o){null===s&&(s=RuleContext.EMPTY),(this.debug||this.debug_list_atn_decisions)&&console.log("predictATN decision "+l.decision+" exec LA(1)=="+this.getLookaheadName(e)+", outerContext="+s.toString(this.parser.ruleNames));const d=!1;let u=this.computeStartState(l.atnStartState,RuleContext.EMPTY,d);l.precedenceDfa?(l.s0.configs=u,u=this.applyPrecedenceFilter(u),o=this.addDFAState(l,new DFAState(null,u)),l.setPrecedenceStartState(this.parser.getPrecedence(),o)):(o=this.addDFAState(l,new DFAState(null,u)),l.s0=o)}const g=this.execATN(l,o,e,u,s);return this.debug&&console.log("DFA after predictATN: "+l.toString(this.parser.literalNames,this.parser.symbolicNames)),g}finally{this._dfa=null,this.mergeCache=null,e.seek(u),e.release(d)}}execATN(e,o,s,l,d){let u;(this.debug||this.debug_list_atn_decisions)&&console.log("execATN decision "+e.decision+" exec LA(1)=="+this.getLookaheadName(s)+" line "+s.LT(1).line+":"+s.LT(1).column);let g=o;this.debug&&console.log("s0 = "+o);let p=s.LA(1);for(;;){let o=this.getExistingTargetState(g,p);if(null===o&&(o=this.computeTargetState(e,g,p)),o===ATNSimulator.ERROR){const e=this.noViableAlt(s,d,g.configs,l);if(s.seek(l),u=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(g.configs,d),u!==ATN.INVALID_ALT_NUMBER)return u;throw e}if(o.requiresFullContext&&this.predictionMode!==C.SLL){let g=null;if(null!==o.predicates){this.debug&&console.log("DFA state has preds in DFA sim LL failover");const e=s.index;if(e!==l&&s.seek(l),g=this.evalSemanticContext(o.predicates,d,!0),1===g.length)return this.debug&&console.log("Full LL avoided"),g.minValue();e!==l&&s.seek(e)}this.dfa_debug&&console.log("ctx sensitive state "+d+" in "+o);const p=!0,m=this.computeStartState(e.atnStartState,d,p);return this.reportAttemptingFullContext(e,g,o.configs,l,s.index),u=this.execATNWithFullContext(e,o,m,s,l,d),u}if(o.isAcceptState){if(null===o.predicates)return o.prediction;const u=s.index;s.seek(l);const g=this.evalSemanticContext(o.predicates,d,!0);if(0===g.length)throw this.noViableAlt(s,d,o.configs,l);return 1===g.length||this.reportAmbiguity(e,o,l,u,!1,g,o.configs),g.minValue()}g=o,p!==Token.EOF&&(s.consume(),p=s.LA(1))}}getExistingTargetState(e,o){const s=e.edges;return null===s?null:s[o+1]||null}computeTargetState(e,o,s){const l=this.computeReachSet(o.configs,s,!1);if(null===l)return this.addDFAEdge(e,o,s,ATNSimulator.ERROR),ATNSimulator.ERROR;let d=new DFAState(null,l);const u=this.getUniqueAlt(l);if(this.debug){const e=C.getConflictingAltSubsets(l);console.log("SLL altSubSets="+arrayToString(e)+", configs="+l+", predict="+u+", allSubsetsConflict="+C.allSubsetsConflict(e)+", conflictingAlts="+this.getConflictingAlts(l))}return u!==ATN.INVALID_ALT_NUMBER?(d.isAcceptState=!0,d.configs.uniqueAlt=u,d.prediction=u):C.hasSLLConflictTerminatingPrediction(this.predictionMode,l)&&(d.configs.conflictingAlts=this.getConflictingAlts(l),d.requiresFullContext=!0,d.isAcceptState=!0,d.prediction=d.configs.conflictingAlts.minValue()),d.isAcceptState&&d.configs.hasSemanticContext&&(this.predicateDFAState(d,this.atn.getDecisionState(e.decision)),null!==d.predicates&&(d.prediction=ATN.INVALID_ALT_NUMBER)),d=this.addDFAEdge(e,o,s,d),d}predicateDFAState(e,o){const s=o.transitions.length,l=this.getConflictingAltsOrUniqueAlt(e.configs),d=this.getPredsForAmbigAlts(l,e.configs,s);null!==d?(e.predicates=this.getPredicatePredictions(l,d),e.prediction=ATN.INVALID_ALT_NUMBER):e.prediction=l.minValue()}execATNWithFullContext(e,o,s,l,d,u){(this.debug||this.debug_list_atn_decisions)&&console.log("execATNWithFullContext "+s);const g=!0;let p,m=!1,f=s;l.seek(d);let _=l.LA(1),b=-1;for(;;){if(p=this.computeReachSet(f,_,g),null===p){const e=this.noViableAlt(l,u,f,d);l.seek(d);const o=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(f,u);if(o!==ATN.INVALID_ALT_NUMBER)return o;throw e}const e=C.getConflictingAltSubsets(p);if(this.debug&&console.log("LL altSubSets="+e+", predict="+C.getUniqueAlt(e)+", resolvesToJustOneViableAlt="+C.resolvesToJustOneViableAlt(e)),p.uniqueAlt=this.getUniqueAlt(p),p.uniqueAlt!==ATN.INVALID_ALT_NUMBER){b=p.uniqueAlt;break}if(this.predictionMode!==C.LL_EXACT_AMBIG_DETECTION){if(b=C.resolvesToJustOneViableAlt(e),b!==ATN.INVALID_ALT_NUMBER)break}else if(C.allSubsetsConflict(e)&&C.allSubsetsEqual(e)){m=!0,b=C.getSingleViableAlt(e);break}f=p,_!==Token.EOF&&(l.consume(),_=l.LA(1))}return p.uniqueAlt!==ATN.INVALID_ALT_NUMBER?(this.reportContextSensitivity(e,b,p,d,l.index),b):(this.reportAmbiguity(e,o,d,l.index,m,null,p),b)}computeReachSet(e,o,s){this.debug&&console.log("in computeReachSet, starting closure: "+e),null===this.mergeCache&&(this.mergeCache=new DoubleDict);const l=new ATNConfigSet(s);let d=null;for(let g=0;g<e.items.length;g++){const u=e.items[g];if(this.debug&&console.log("testing "+this.getTokenName(o)+" at "+u),u.state instanceof RuleStopState)(s||o===Token.EOF)&&(null===d&&(d=[]),d.push(u),this.debug_add&&console.log("added "+u+" to skippedStopStates"));else for(let e=0;e<u.state.transitions.length;e++){const s=u.state.transitions[e],d=this.getReachableTarget(s,o);if(null!==d){const e=new ATNConfig({state:d},u);l.add(e,this.mergeCache),this.debug_add&&console.log("added "+e+" to intermediate")}}}let u=null;if(null===d&&o!==Token.EOF&&(1===l.items.length||this.getUniqueAlt(l)!==ATN.INVALID_ALT_NUMBER)&&(u=l),null===u){u=new ATNConfigSet(s);const e=new HashSet,d=o===Token.EOF;for(let o=0;o<l.items.length;o++)this.closure(l.items[o],u,e,!1,s,d)}if(o===Token.EOF&&(u=this.removeAllConfigsNotInRuleStopState(u,u===l)),null!==d&&(!s||!C.hasConfigInRuleStopState(u)))for(let g=0;g<d.length;g++)u.add(d[g],this.mergeCache);return 0===u.items.length?null:u}removeAllConfigsNotInRuleStopState(e,o){if(C.allConfigsInRuleStopStates(e))return e;const s=new ATNConfigSet(e.fullCtx);for(let l=0;l<e.items.length;l++){const d=e.items[l];if(d.state instanceof RuleStopState)s.add(d,this.mergeCache);else if(o&&d.state.epsilonOnlyTransitions){const e=this.atn.nextTokens(d.state);if(e.contains(Token.EPSILON)){const e=this.atn.ruleToStopState[d.state.ruleIndex];s.add(new ATNConfig({state:e},d),this.mergeCache)}}}return s}computeStartState(e,o,s){const l=predictionContextFromRuleContext(this.atn,o),d=new ATNConfigSet(s);for(let u=0;u<e.transitions.length;u++){const o=e.transitions[u].target,g=new ATNConfig({state:o,alt:u+1,context:l},null),p=new HashSet;this.closure(g,d,p,!0,s,!1)}return d}applyPrecedenceFilter(e){let o;const s=[],l=new ATNConfigSet(e.fullCtx);for(let d=0;d<e.items.length;d++){if(o=e.items[d],1!==o.alt)continue;const u=o.semanticContext.evalPrecedence(this.parser,this._outerContext);null!==u&&(s[o.state.stateNumber]=o.context,u!==o.semanticContext?l.add(new ATNConfig({semanticContext:u},o),this.mergeCache):l.add(o,this.mergeCache))}for(let d=0;d<e.items.length;d++)if(o=e.items[d],1!==o.alt){if(!o.precedenceFilterSuppressed){const e=s[o.state.stateNumber]||null;if(null!==e&&e.equals(o.context))continue}l.add(o,this.mergeCache)}return l}getReachableTarget(e,o){return e.matches(o,0,this.atn.maxTokenType)?e.target:null}getPredsForAmbigAlts(e,o,s){let l=[];for(let u=0;u<o.items.length;u++){const s=o.items[u];e.has(s.alt)&&(l[s.alt]=SemanticContext.orContext(l[s.alt]||null,s.semanticContext))}let d=0;for(let u=1;u<s+1;u++){const e=l[u]||null;null===e?l[u]=SemanticContext.NONE:e!==SemanticContext.NONE&&(d+=1)}return 0===d&&(l=null),this.debug&&console.log("getPredsForAmbigAlts result "+arrayToString(l)),l}getPredicatePredictions(e,o){const s=[];let l=!1;for(let d=1;d<o.length;d++){const u=o[d];null!==e&&e.has(d)&&s.push(new PredPrediction(u,d)),u!==SemanticContext.NONE&&(l=!0)}return l?s:null}getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(e,o){const s=this.splitAccordingToSemanticValidity(e,o),l=s[0],d=s[1];let u=this.getAltThatFinishedDecisionEntryRule(l);return u!==ATN.INVALID_ALT_NUMBER||d.items.length>0&&(u=this.getAltThatFinishedDecisionEntryRule(d),u!==ATN.INVALID_ALT_NUMBER)?u:ATN.INVALID_ALT_NUMBER}getAltThatFinishedDecisionEntryRule(e){const o=[];for(let s=0;s<e.items.length;s++){const l=e.items[s];(l.reachesIntoOuterContext>0||l.state instanceof RuleStopState&&l.context.hasEmptyPath())&&o.indexOf(l.alt)<0&&o.push(l.alt)}return 0===o.length?ATN.INVALID_ALT_NUMBER:Math.min.apply(null,o)}splitAccordingToSemanticValidity(e,o){const s=new ATNConfigSet(e.fullCtx),l=new ATNConfigSet(e.fullCtx);for(let d=0;d<e.items.length;d++){const u=e.items[d];if(u.semanticContext!==SemanticContext.NONE){const e=u.semanticContext.evaluate(this.parser,o);e?s.add(u):l.add(u)}else s.add(u)}return[s,l]}evalSemanticContext(e,o,s){const l=new BitSet;for(let d=0;d<e.length;d++){const u=e[d];if(u.pred===SemanticContext.NONE){if(l.add(u.alt),!s)break;continue}const g=u.pred.evaluate(this.parser,o);if((this.debug||this.dfa_debug)&&console.log("eval pred "+u+"="+g),g&&((this.debug||this.dfa_debug)&&console.log("PREDICT "+u.alt),l.add(u.alt),!s))break}return l}closure(e,o,s,l,d,u){const g=0;this.closureCheckingStopState(e,o,s,l,d,g,u)}closureCheckingStopState(e,o,s,l,d,u,g){if((this.debug||this.debug_closure)&&(console.log("closure("+e.toString(this.parser,!0)+")"),e.reachesIntoOuterContext>50))throw"problem";if(e.state instanceof RuleStopState){if(!e.context.isEmpty()){for(let p=0;p<e.context.length;p++){if(e.context.getReturnState(p)===PredictionContext.EMPTY_RETURN_STATE){if(d){o.add(new ATNConfig({state:e.state,context:PredictionContext.EMPTY},e),this.mergeCache);continue}this.debug&&console.log("FALLING off rule "+this.getRuleName(e.state.ruleIndex)),this.closure_(e,o,s,l,d,u,g);continue}const m=this.atn.states[e.context.getReturnState(p)],f=e.context.getParent(p),_={state:m,alt:e.alt,context:f,semanticContext:e.semanticContext},C=new ATNConfig(_,null);C.reachesIntoOuterContext=e.reachesIntoOuterContext,this.closureCheckingStopState(C,o,s,l,d,u-1,g)}return}if(d)return void o.add(e,this.mergeCache);this.debug&&console.log("FALLING off rule "+this.getRuleName(e.state.ruleIndex))}this.closure_(e,o,s,l,d,u,g)}closure_(e,o,s,l,d,u,g){const p=e.state;p.epsilonOnlyTransitions||o.add(e,this.mergeCache);for(let m=0;m<p.transitions.length;m++){if(0===m&&this.canDropLoopEntryEdgeInLeftRecursiveRule(e))continue;const f=p.transitions[m],_=l&&!(f instanceof ActionTransition),C=this.getEpsilonTarget(e,f,_,0===u,d,g);if(null!==C){let l=u;if(e.state instanceof RuleStopState){if(null!==this._dfa&&this._dfa.precedenceDfa&&f.outermostPrecedenceReturn===this._dfa.atnStartState.ruleIndex&&(C.precedenceFilterSuppressed=!0),C.reachesIntoOuterContext+=1,s.add(C)!==C)continue;o.dipsIntoOuterContext=!0,l-=1,this.debug&&console.log("dips into outer ctx: "+C)}else{if(!f.isEpsilon&&s.add(C)!==C)continue;f instanceof RuleTransition&&l>=0&&(l+=1)}this.closureCheckingStopState(C,o,s,_,d,l,g)}}}canDropLoopEntryEdgeInLeftRecursiveRule(e){const o=e.state;if(o.stateType!==ATNState.STAR_LOOP_ENTRY)return!1;if(o.stateType!==ATNState.STAR_LOOP_ENTRY||!o.isPrecedenceDecision||e.context.isEmpty()||e.context.hasEmptyPath())return!1;const s=e.context.length;for(let g=0;g<s;g++){const s=this.atn.states[e.context.getReturnState(g)];if(s.ruleIndex!==o.ruleIndex)return!1}const l=o.transitions[0].target,d=l.endState.stateNumber,u=this.atn.states[d];for(let g=0;g<s;g++){const s=e.context.getReturnState(g),l=this.atn.states[s];if(1!==l.transitions.length||!l.transitions[0].isEpsilon)return!1;const d=l.transitions[0].target;if((l.stateType!==ATNState.BLOCK_END||d!==o)&&(l!==u&&d!==u&&(d.stateType!==ATNState.BLOCK_END||1!==d.transitions.length||!d.transitions[0].isEpsilon||d.transitions[0].target!==o)))return!1}return!0}getRuleName(e){return null!==this.parser&&e>=0?this.parser.ruleNames[e]:"<rule "+e+">"}getEpsilonTarget(e,o,s,l,d,u){switch(o.serializationType){case Transition.RULE:return this.ruleTransition(e,o);case Transition.PRECEDENCE:return this.precedenceTransition(e,o,s,l,d);case Transition.PREDICATE:return this.predTransition(e,o,s,l,d);case Transition.ACTION:return this.actionTransition(e,o);case Transition.EPSILON:return new ATNConfig({state:o.target},e);case Transition.ATOM:case Transition.RANGE:case Transition.SET:return u&&o.matches(Token.EOF,0,1)?new ATNConfig({state:o.target},e):null;default:return null}}actionTransition(e,o){if(this.debug){const e=-1===o.actionIndex?65535:o.actionIndex;console.log("ACTION edge "+o.ruleIndex+":"+e)}return new ATNConfig({state:o.target},e)}precedenceTransition(e,o,s,l,d){this.debug&&(console.log("PRED (collectPredicates="+s+") "+o.precedence+">=_p, ctx dependent=true"),null!==this.parser&&console.log("context surrounding pred is "+arrayToString(this.parser.getRuleInvocationStack())));let u=null;if(s&&l)if(d){const s=this._input.index;this._input.seek(this._startIndex);const l=o.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(s),l&&(u=new ATNConfig({state:o.target},e))}else{const s=SemanticContext.andContext(e.semanticContext,o.getPredicate());u=new ATNConfig({state:o.target,semanticContext:s},e)}else u=new ATNConfig({state:o.target},e);return this.debug&&console.log("config from pred transition="+u),u}predTransition(e,o,s,l,d){this.debug&&(console.log("PRED (collectPredicates="+s+") "+o.ruleIndex+":"+o.predIndex+", ctx dependent="+o.isCtxDependent),null!==this.parser&&console.log("context surrounding pred is "+arrayToString(this.parser.getRuleInvocationStack())));let u=null;if(s&&(o.isCtxDependent&&l||!o.isCtxDependent))if(d){const s=this._input.index;this._input.seek(this._startIndex);const l=o.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(s),l&&(u=new ATNConfig({state:o.target},e))}else{const s=SemanticContext.andContext(e.semanticContext,o.getPredicate());u=new ATNConfig({state:o.target,semanticContext:s},e)}else u=new ATNConfig({state:o.target},e);return this.debug&&console.log("config from pred transition="+u),u}ruleTransition(e,o){this.debug&&console.log("CALL rule "+this.getRuleName(o.target.ruleIndex)+", ctx="+e.context);const s=o.followState,l=SingletonPredictionContext.create(e.context,s.stateNumber);return new ATNConfig({state:o.target,context:l},e)}getConflictingAlts(e){const o=C.getConflictingAltSubsets(e);return C.getAlts(o)}getConflictingAltsOrUniqueAlt(e){let o=null;return e.uniqueAlt!==ATN.INVALID_ALT_NUMBER?(o=new BitSet,o.add(e.uniqueAlt)):o=e.conflictingAlts,o}getTokenName(e){if(e===Token.EOF)return"EOF";if(null!==this.parser&&null!==this.parser.literalNames){if(!(e>=this.parser.literalNames.length&&e>=this.parser.symbolicNames.length)){const o=this.parser.literalNames[e]||this.parser.symbolicNames[e];return o+"<"+e+">"}console.log(e+" ttype out of range: "+this.parser.literalNames),console.log(""+this.parser.getInputStream().getTokens())}return""+e}getLookaheadName(e){return this.getTokenName(e.LA(1))}dumpDeadEndConfigs(e){console.log("dead end configs: ");const o=e.getDeadEndConfigs();for(let s=0;s<o.length;s++){const e=o[s];let l="no edges";if(e.state.transitions.length>0){const o=e.state.transitions[0];if(o instanceof AtomTransition)l="Atom "+this.getTokenName(o.label);else if(o instanceof SetTransition){const e=o instanceof NotSetTransition;l=(e?"~":"")+"Set "+o.set}}console.error(e.toString(this.parser,!0)+":"+l)}}noViableAlt(e,o,s,l){return new NoViableAltException(this.parser,e,e.get(l),e.LT(1),s,o)}getUniqueAlt(e){let o=ATN.INVALID_ALT_NUMBER;for(let s=0;s<e.items.length;s++){const l=e.items[s];if(o===ATN.INVALID_ALT_NUMBER)o=l.alt;else if(l.alt!==o)return ATN.INVALID_ALT_NUMBER}return o}addDFAEdge(e,o,s,l){if(this.debug&&console.log("EDGE "+o+" -> "+l+" upon "+this.getTokenName(s)),null===l)return null;if(l=this.addDFAState(e,l),null===o||s<-1||s>this.atn.maxTokenType)return l;if(null===o.edges&&(o.edges=[]),o.edges[s+1]=l,this.debug){const o=null===this.parser?null:this.parser.literalNames,s=null===this.parser?null:this.parser.symbolicNames;console.log("DFA=\n"+e.toString(o,s))}return l}addDFAState(e,o){if(o===ATNSimulator.ERROR)return o;const s=e.states.get(o);return null!==s?s:(o.stateNumber=e.states.length,o.configs.readOnly||(o.configs.optimizeConfigs(this),o.configs.setReadonly(!0)),e.states.add(o),this.debug&&console.log("adding new DFA state: "+o),o)}reportAttemptingFullContext(e,o,s,l,d){if(this.debug||this.retry_debug){const o=new Interval(l,d+1);console.log("reportAttemptingFullContext decision="+e.decision+":"+s+", input="+this.parser.getTokenStream().getText(o))}null!==this.parser&&this.parser.getErrorListenerDispatch().reportAttemptingFullContext(this.parser,e,l,d,o,s)}reportContextSensitivity(e,o,s,l,d){if(this.debug||this.retry_debug){const o=new Interval(l,d+1);console.log("reportContextSensitivity decision="+e.decision+":"+s+", input="+this.parser.getTokenStream().getText(o))}null!==this.parser&&this.parser.getErrorListenerDispatch().reportContextSensitivity(this.parser,e,l,d,o,s)}reportAmbiguity(e,o,s,l,d,u,g){if(this.debug||this.retry_debug){const e=new Interval(s,l+1);console.log("reportAmbiguity "+u+":"+g+", input="+this.parser.getTokenStream().getText(e))}null!==this.parser&&this.parser.getErrorListenerDispatch().reportAmbiguity(this.parser,e,s,l,d,u,g)}}var b={ATN:ATN,ATNDeserializer:ATNDeserializer,LexerATNSimulator:LexerATNSimulator,ParserATNSimulator:ParserATNSimulator,PredictionMode:C};class DFASerializer{constructor(e,o,s){this.dfa=e,this.literalNames=o||[],this.symbolicNames=s||[]}toString(){if(null===this.dfa.s0)return null;let e="";const o=this.dfa.sortedStates();for(let s=0;s<o.length;s++){const l=o[s];if(null!==l.edges){const o=l.edges.length;for(let s=0;s<o;s++){const o=l.edges[s]||null;null!==o&&2147483647!==o.stateNumber&&(e=e.concat(this.getStateString(l)),e=e.concat("-"),e=e.concat(this.getEdgeLabel(s)),e=e.concat("->"),e=e.concat(this.getStateString(o)),e=e.concat("\n"))}}}return 0===e.length?null:e}getEdgeLabel(e){return 0===e?"EOF":null!==this.literalNames||null!==this.symbolicNames?this.literalNames[e-1]||this.symbolicNames[e-1]:String.fromCharCode(e-1)}getStateString(e){const o=(e.isAcceptState?":":"")+"s"+e.stateNumber+(e.requiresFullContext?"^":"");return e.isAcceptState?null!==e.predicates?o+"=>"+arrayToString(e.predicates):o+"=>"+e.prediction.toString():o}}class LexerDFASerializer extends DFASerializer{constructor(e){super(e,null)}getEdgeLabel(e){return"'"+String.fromCharCode(e)+"'"}}class DFA{constructor(e,o){if(void 0===o&&(o=0),this.atnStartState=e,this.decision=o,this._states=new HashSet,this.s0=null,this.precedenceDfa=!1,e instanceof StarLoopEntryState&&e.isPrecedenceDecision){this.precedenceDfa=!0;const e=new DFAState(null,new ATNConfigSet);e.edges=[],e.isAcceptState=!1,e.requiresFullContext=!1,this.s0=e}}getPrecedenceStartState(e){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";return e<0||e>=this.s0.edges.length?null:this.s0.edges[e]||null}setPrecedenceStartState(e,o){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";e<0||(this.s0.edges[e]=o)}setPrecedenceDfa(e){if(this.precedenceDfa!==e){if(this._states=new HashSet,e){const e=new DFAState(null,new ATNConfigSet);e.edges=[],e.isAcceptState=!1,e.requiresFullContext=!1,this.s0=e}else this.s0=null;this.precedenceDfa=e}}sortedStates(){const e=this._states.values();return e.sort((function(e,o){return e.stateNumber-o.stateNumber}))}toString(e,o){if(e=e||null,o=o||null,null===this.s0)return"";const s=new DFASerializer(this,e,o);return s.toString()}toLexerString(){if(null===this.s0)return"";const e=new LexerDFASerializer(this);return e.toString()}get states(){return this._states}}var w={DFA:DFA,DFASerializer:DFASerializer,LexerDFASerializer:LexerDFASerializer,PredPrediction:PredPrediction};class ParseTreeListener{visitTerminal(e){}visitErrorNode(e){}enterEveryRule(e){}exitEveryRule(e){}}class ParseTreeVisitor{visit(e){return Array.isArray(e)?e.map((function(e){return e.accept(this)}),this):e.accept(this)}visitChildren(e){return e.children?this.visit(e.children):null}visitTerminal(e){}visitErrorNode(e){}}class ParseTreeWalker{walk(e,o){const s=o instanceof ErrorNode||void 0!==o.isErrorNode&&o.isErrorNode();if(s)e.visitErrorNode(o);else if(o instanceof TerminalNode)e.visitTerminal(o);else{this.enterRule(e,o);for(let s=0;s<o.getChildCount();s++){const l=o.getChild(s);this.walk(e,l)}this.exitRule(e,o)}}enterRule(e,o){const s=o.getRuleContext();e.enterEveryRule(s),s.enterRule(e)}exitRule(e,o){const s=o.getRuleContext();s.exitRule(e),e.exitEveryRule(s)}}ParseTreeWalker.DEFAULT=new ParseTreeWalker;var S={Trees:u,RuleNode:RuleNode,ErrorNode:ErrorNode,TerminalNode:TerminalNode,ParseTreeListener:ParseTreeListener,ParseTreeVisitor:ParseTreeVisitor,ParseTreeWalker:ParseTreeWalker};class InputMismatchException extends RecognitionException{constructor(e){super({message:"",recognizer:e,input:e.getInputStream(),ctx:e._ctx}),this.offendingToken=e.getCurrentToken()}}class FailedPredicateException extends RecognitionException{constructor(e,o,s){super({message:formatMessage(o,s||null),recognizer:e,input:e.getInputStream(),ctx:e._ctx});const l=e._interp.atn.states[e.state],d=l.transitions[0];d instanceof PredicateTransition?(this.ruleIndex=d.ruleIndex,this.predicateIndex=d.predIndex):(this.ruleIndex=0,this.predicateIndex=0),this.predicate=o,this.offendingToken=e.getCurrentToken()}}function formatMessage(e,o){return null!==o?o:"failed predicate: {"+e+"}?"}class DiagnosticErrorListener extends ErrorListener{constructor(e){super(),e=e||!0,this.exactOnly=e}reportAmbiguity(e,o,s,l,d,u,g){if(this.exactOnly&&!d)return;const p="reportAmbiguity d="+this.getDecisionDescription(e,o)+": ambigAlts="+this.getConflictingAlts(u,g)+", input='"+e.getTokenStream().getText(new Interval(s,l))+"'";e.notifyErrorListeners(p)}reportAttemptingFullContext(e,o,s,l,d,u){const g="reportAttemptingFullContext d="+this.getDecisionDescription(e,o)+", input='"+e.getTokenStream().getText(new Interval(s,l))+"'";e.notifyErrorListeners(g)}reportContextSensitivity(e,o,s,l,d,u){const g="reportContextSensitivity d="+this.getDecisionDescription(e,o)+", input='"+e.getTokenStream().getText(new Interval(s,l))+"'";e.notifyErrorListeners(g)}getDecisionDescription(e,o){const s=o.decision,l=o.atnStartState.ruleIndex,d=e.ruleNames;if(l<0||l>=d.length)return""+s;const u=d[l]||null;return null===u||0===u.length?""+s:`${s} (${u})`}getConflictingAlts(e,o){if(null!==e)return e;const s=new BitSet;for(let l=0;l<o.items.length;l++)s.add(o.items[l].alt);return`{${s.values().join(", ")}}`}}class ParseCancellationException extends Error{constructor(){super(),Error.captureStackTrace(this,ParseCancellationException)}}class ErrorStrategy{reset(e){}recoverInline(e){}recover(e,o){}sync(e){}inErrorRecoveryMode(e){}reportError(e){}}class DefaultErrorStrategy extends ErrorStrategy{constructor(){super(),this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.lastErrorStates=null,this.nextTokensContext=null,this.nextTokenState=0}reset(e){this.endErrorCondition(e)}beginErrorCondition(e){this.errorRecoveryMode=!0}inErrorRecoveryMode(e){return this.errorRecoveryMode}endErrorCondition(e){this.errorRecoveryMode=!1,this.lastErrorStates=null,this.lastErrorIndex=-1}reportMatch(e){this.endErrorCondition(e)}reportError(e,o){this.inErrorRecoveryMode(e)||(this.beginErrorCondition(e),o instanceof NoViableAltException?this.reportNoViableAlternative(e,o):o instanceof InputMismatchException?this.reportInputMismatch(e,o):o instanceof FailedPredicateException?this.reportFailedPredicate(e,o):(console.log("unknown recognition error type: "+o.constructor.name),console.log(o.stack),e.notifyErrorListeners(o.getOffendingToken(),o.getMessage(),o)))}recover(e,o){this.lastErrorIndex===e.getInputStream().index&&null!==this.lastErrorStates&&this.lastErrorStates.indexOf(e.state)>=0&&e.consume(),this.lastErrorIndex=e._input.index,null===this.lastErrorStates&&(this.lastErrorStates=[]),this.lastErrorStates.push(e.state);const s=this.getErrorRecoverySet(e);this.consumeUntil(e,s)}sync(e){if(this.inErrorRecoveryMode(e))return;const o=e._interp.atn.states[e.state],s=e.getTokenStream().LA(1),l=e.atn.nextTokens(o);if(l.contains(s))return this.nextTokensContext=null,void(this.nextTokenState=ATNState.INVALID_STATE_NUMBER);if(l.contains(Token.EPSILON))null===this.nextTokensContext&&(this.nextTokensContext=e._ctx,this.nextTokensState=e._stateNumber);else switch(o.stateType){case ATNState.BLOCK_START:case ATNState.STAR_BLOCK_START:case ATNState.PLUS_BLOCK_START:case ATNState.STAR_LOOP_ENTRY:if(null!==this.singleTokenDeletion(e))return;throw new InputMismatchException(e);case ATNState.PLUS_LOOP_BACK:case ATNState.STAR_LOOP_BACK:{this.reportUnwantedToken(e);const o=new IntervalSet;o.addSet(e.getExpectedTokens());const s=o.addSet(this.getErrorRecoverySet(e));this.consumeUntil(e,s)}break;default:}}reportNoViableAlternative(e,o){const s=e.getTokenStream();let l;l=null!==s?o.startToken.type===Token.EOF?"<EOF>":s.getText(new Interval(o.startToken.tokenIndex,o.offendingToken.tokenIndex)):"<unknown input>";const d="no viable alternative at input "+this.escapeWSAndQuote(l);e.notifyErrorListeners(d,o.offendingToken,o)}reportInputMismatch(e,o){const s="mismatched input "+this.getTokenErrorDisplay(o.offendingToken)+" expecting "+o.getExpectedTokens().toString(e.literalNames,e.symbolicNames);e.notifyErrorListeners(s,o.offendingToken,o)}reportFailedPredicate(e,o){const s=e.ruleNames[e._ctx.ruleIndex],l="rule "+s+" "+o.message;e.notifyErrorListeners(l,o.offendingToken,o)}reportUnwantedToken(e){if(this.inErrorRecoveryMode(e))return;this.beginErrorCondition(e);const o=e.getCurrentToken(),s=this.getTokenErrorDisplay(o),l=this.getExpectedTokens(e),d="extraneous input "+s+" expecting "+l.toString(e.literalNames,e.symbolicNames);e.notifyErrorListeners(d,o,null)}reportMissingToken(e){if(this.inErrorRecoveryMode(e))return;this.beginErrorCondition(e);const o=e.getCurrentToken(),s=this.getExpectedTokens(e),l="missing "+s.toString(e.literalNames,e.symbolicNames)+" at "+this.getTokenErrorDisplay(o);e.notifyErrorListeners(l,o,null)}recoverInline(e){const o=this.singleTokenDeletion(e);if(null!==o)return e.consume(),o;if(this.singleTokenInsertion(e))return this.getMissingSymbol(e);throw new InputMismatchException(e)}singleTokenInsertion(e){const o=e.getTokenStream().LA(1),s=e._interp.atn,l=s.states[e.state],d=l.transitions[0].target,u=s.nextTokens(d,e._ctx);return!!u.contains(o)&&(this.reportMissingToken(e),!0)}singleTokenDeletion(e){const o=e.getTokenStream().LA(2),s=this.getExpectedTokens(e);if(s.contains(o)){this.reportUnwantedToken(e),e.consume();const o=e.getCurrentToken();return this.reportMatch(e),o}return null}getMissingSymbol(e){const o=e.getCurrentToken(),s=this.getExpectedTokens(e),l=s.first();let d;d=l===Token.EOF?"<missing EOF>":"<missing "+e.literalNames[l]+">";let u=o;const g=e.getTokenStream().LT(-1);return u.type===Token.EOF&&null!==g&&(u=g),e.getTokenFactory().create(u.source,l,d,Token.DEFAULT_CHANNEL,-1,-1,u.line,u.column)}getExpectedTokens(e){return e.getExpectedTokens()}getTokenErrorDisplay(e){if(null===e)return"<no token>";let o=e.text;return null===o&&(o=e.type===Token.EOF?"<EOF>":"<"+e.type+">"),this.escapeWSAndQuote(o)}escapeWSAndQuote(e){return e=e.replace(/\n/g,"\\n"),e=e.replace(/\r/g,"\\r"),e=e.replace(/\t/g,"\\t"),"'"+e+"'"}getErrorRecoverySet(e){const o=e._interp.atn;let s=e._ctx;const l=new IntervalSet;while(null!==s&&s.invokingState>=0){const e=o.states[s.invokingState],d=e.transitions[0],u=o.nextTokens(d.followState);l.addSet(u),s=s.parentCtx}return l.removeOne(Token.EPSILON),l}consumeUntil(e,o){let s=e.getTokenStream().LA(1);while(s!==Token.EOF&&!o.contains(s))e.consume(),s=e.getTokenStream().LA(1)}}class BailErrorStrategy extends DefaultErrorStrategy{constructor(){super()}recover(e,o){let s=e._ctx;while(null!==s)s.exception=o,s=s.parentCtx;throw new ParseCancellationException(o)}recoverInline(e){this.recover(e,new InputMismatchException(e))}sync(e){}}var y={RecognitionException:RecognitionException,NoViableAltException:NoViableAltException,LexerNoViableAltException:LexerNoViableAltException,InputMismatchException:InputMismatchException,FailedPredicateException:FailedPredicateException,DiagnosticErrorListener:DiagnosticErrorListener,BailErrorStrategy:BailErrorStrategy,DefaultErrorStrategy:DefaultErrorStrategy,ErrorListener:ErrorListener};class InputStream{constructor(e,o){if(this.name="<empty>",this.strdata=e,this.decodeToUnicodeCodePoints=o||!1,this._index=0,this.data=[],this.decodeToUnicodeCodePoints)for(let s=0;s<this.strdata.length;){const e=this.strdata.codePointAt(s);this.data.push(e),s+=e<=65535?1:2}else{this.data=new Array(this.strdata.length);for(let e=0;e<this.strdata.length;e++){const o=this.strdata.charCodeAt(e);this.data[e]=o}}this._size=this.data.length}reset(){this._index=0}consume(){if(this._index>=this._size)throw"cannot consume EOF";this._index+=1}LA(e){if(0===e)return 0;e<0&&(e+=1);const o=this._index+e-1;return o<0||o>=this._size?Token.EOF:this.data[o]}LT(e){return this.LA(e)}mark(){return-1}release(e){}seek(e){e<=this._index?this._index=e:this._index=Math.min(e,this._size)}getText(e,o){if(o>=this._size&&(o=this._size-1),e>=this._size)return"";if(this.decodeToUnicodeCodePoints){let s="";for(let l=e;l<=o;l++)s+=String.fromCodePoint(this.data[l]);return s}return this.strdata.slice(e,o+1)}toString(){return this.strdata}get index(){return this._index}get size(){return this._size}}var L=s(3654),x={fromString:function(e){return new InputStream(e,!0)},fromBlob:function(e,o,s,l){const d=new window.FileReader;d.onload=function(e){const o=new InputStream(e.target.result,!0);s(o)},d.onerror=l,d.readAsText(e,o)},fromBuffer:function(e,o){return new InputStream(e.toString(o),!0)},fromPath:function(e,o,s){L.readFile(e,o,(function(e,o){let l=null;null!==o&&(l=new InputStream(o,!0)),s(e,l)}))},fromPathSync:function(e,o){const s=L.readFileSync(e,o);return new InputStream(s,!0)}};class FileStream extends InputStream{constructor(e,o){const s=L.readFileSync(e,"utf8");super(s,o),this.fileName=e}}class TokenStream{}class BufferedTokenStream extends TokenStream{constructor(e){super(),this.tokenSource=e,this.tokens=[],this.index=-1,this.fetchedEOF=!1}mark(){return 0}release(e){}reset(){this.seek(0)}seek(e){this.lazyInit(),this.index=this.adjustSeekIndex(e)}get(e){return this.lazyInit(),this.tokens[e]}consume(){let e=!1;if(e=this.index>=0&&(this.fetchedEOF?this.index<this.tokens.length-1:this.index<this.tokens.length),!e&&this.LA(1)===Token.EOF)throw"cannot consume EOF";this.sync(this.index+1)&&(this.index=this.adjustSeekIndex(this.index+1))}sync(e){const o=e-this.tokens.length+1;if(o>0){const e=this.fetch(o);return e>=o}return!0}fetch(e){if(this.fetchedEOF)return 0;for(let o=0;o<e;o++){const e=this.tokenSource.nextToken();if(e.tokenIndex=this.tokens.length,this.tokens.push(e),e.type===Token.EOF)return this.fetchedEOF=!0,o+1}return e}getTokens(e,o,s){if(void 0===s&&(s=null),e<0||o<0)return null;this.lazyInit();const l=[];o>=this.tokens.length&&(o=this.tokens.length-1);for(let d=e;d<o;d++){const e=this.tokens[d];if(e.type===Token.EOF)break;(null===s||s.contains(e.type))&&l.push(e)}return l}LA(e){return this.LT(e).type}LB(e){return this.index-e<0?null:this.tokens[this.index-e]}LT(e){if(this.lazyInit(),0===e)return null;if(e<0)return this.LB(-e);const o=this.index+e-1;return this.sync(o),o>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[o]}adjustSeekIndex(e){return e}lazyInit(){-1===this.index&&this.setup()}setup(){this.sync(0),this.index=this.adjustSeekIndex(0)}setTokenSource(e){this.tokenSource=e,this.tokens=[],this.index=-1,this.fetchedEOF=!1}nextTokenOnChannel(e,o){if(this.sync(e),e>=this.tokens.length)return-1;let s=this.tokens[e];while(s.channel!==this.channel){if(s.type===Token.EOF)return-1;e+=1,this.sync(e),s=this.tokens[e]}return e}previousTokenOnChannel(e,o){while(e>=0&&this.tokens[e].channel!==o)e-=1;return e}getHiddenTokensToRight(e,o){if(void 0===o&&(o=-1),this.lazyInit(),e<0||e>=this.tokens.length)throw e+" not in 0.."+this.tokens.length-1;const s=this.nextTokenOnChannel(e+1,Lexer.DEFAULT_TOKEN_CHANNEL),l=e+1,d=-1===s?this.tokens.length-1:s;return this.filterForChannel(l,d,o)}getHiddenTokensToLeft(e,o){if(void 0===o&&(o=-1),this.lazyInit(),e<0||e>=this.tokens.length)throw e+" not in 0.."+this.tokens.length-1;const s=this.previousTokenOnChannel(e-1,Lexer.DEFAULT_TOKEN_CHANNEL);if(s===e-1)return null;const l=s+1,d=e-1;return this.filterForChannel(l,d,o)}filterForChannel(e,o,s){const l=[];for(let d=e;d<o+1;d++){const e=this.tokens[d];-1===s?e.channel!==Lexer.DEFAULT_TOKEN_CHANNEL&&l.push(e):e.channel===s&&l.push(e)}return 0===l.length?null:l}getSourceName(){return this.tokenSource.getSourceName()}getText(e){this.lazyInit(),this.fill(),void 0!==e&&null!==e||(e=new Interval(0,this.tokens.length-1));let o=e.start;o instanceof Token&&(o=o.tokenIndex);let s=e.stop;if(s instanceof Token&&(s=s.tokenIndex),null===o||null===s||o<0||s<0)return"";s>=this.tokens.length&&(s=this.tokens.length-1);let l="";for(let d=o;d<s+1;d++){const e=this.tokens[d];if(e.type===Token.EOF)break;l+=e.text}return l}fill(){this.lazyInit();while(1e3===this.fetch(1e3));}}class CommonTokenStream extends BufferedTokenStream{constructor(e,o){super(e),this.channel=void 0===o?Token.DEFAULT_CHANNEL:o}adjustSeekIndex(e){return this.nextTokenOnChannel(e,this.channel)}LB(e){if(0===e||this.index-e<0)return null;let o=this.index,s=1;while(s<=e)o=this.previousTokenOnChannel(o-1,this.channel),s+=1;return o<0?null:this.tokens[o]}LT(e){if(this.lazyInit(),0===e)return null;if(e<0)return this.LB(-e);let o=this.index,s=1;while(s<e)this.sync(o+1)&&(o=this.nextTokenOnChannel(o+1,this.channel)),s+=1;return this.tokens[o]}getNumberOfOnChannelTokens(){let e=0;this.fill();for(let o=0;o<this.tokens.length;o++){const s=this.tokens[o];if(s.channel===this.channel&&(e+=1),s.type===Token.EOF)break}return e}}class TraceListener extends ParseTreeListener{constructor(e){super(),this.parser=e}enterEveryRule(e){console.log("enter   "+this.parser.ruleNames[e.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}visitTerminal(e){console.log("consume "+e.symbol+" rule "+this.parser.ruleNames[this.parser._ctx.ruleIndex])}exitEveryRule(e){console.log("exit    "+this.parser.ruleNames[e.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}}class Parser extends Recognizer{constructor(e){super(),this._input=null,this._errHandler=new DefaultErrorStrategy,this._precedenceStack=[],this._precedenceStack.push(0),this._ctx=null,this.buildParseTrees=!0,this._tracer=null,this._parseListeners=null,this._syntaxErrors=0,this.setInputStream(e)}reset(){null!==this._input&&this._input.seek(0),this._errHandler.reset(this),this._ctx=null,this._syntaxErrors=0,this.setTrace(!1),this._precedenceStack=[],this._precedenceStack.push(0),null!==this._interp&&this._interp.reset()}match(e){let o=this.getCurrentToken();return o.type===e?(this._errHandler.reportMatch(this),this.consume()):(o=this._errHandler.recoverInline(this),this.buildParseTrees&&-1===o.tokenIndex&&this._ctx.addErrorNode(o)),o}matchWildcard(){let e=this.getCurrentToken();return e.type>0?(this._errHandler.reportMatch(this),this.consume()):(e=this._errHandler.recoverInline(this),this._buildParseTrees&&-1===e.tokenIndex&&this._ctx.addErrorNode(e)),e}getParseListeners(){return this._parseListeners||[]}addParseListener(e){if(null===e)throw"listener";null===this._parseListeners&&(this._parseListeners=[]),this._parseListeners.push(e)}removeParseListener(e){if(null!==this._parseListeners){const o=this._parseListeners.indexOf(e);o>=0&&this._parseListeners.splice(o,1),0===this._parseListeners.length&&(this._parseListeners=null)}}removeParseListeners(){this._parseListeners=null}triggerEnterRuleEvent(){if(null!==this._parseListeners){const e=this._ctx;this._parseListeners.forEach((function(o){o.enterEveryRule(e),e.enterRule(o)}))}}triggerExitRuleEvent(){if(null!==this._parseListeners){const e=this._ctx;this._parseListeners.slice(0).reverse().forEach((function(o){e.exitRule(o),o.exitEveryRule(e)}))}}getTokenFactory(){return this._input.tokenSource._factory}setTokenFactory(e){this._input.tokenSource._factory=e}getATNWithBypassAlts(){const e=this.getSerializedATN();if(null===e)throw"The current parser does not support an ATN with bypass alternatives.";let o=this.bypassAltsAtnCache[e];if(null===o){const s=new ATNDeserializationOptions;s.generateRuleBypassTransitions=!0,o=new ATNDeserializer(s).deserialize(e),this.bypassAltsAtnCache[e]=o}return o}getInputStream(){return this.getTokenStream()}setInputStream(e){this.setTokenStream(e)}getTokenStream(){return this._input}setTokenStream(e){this._input=null,this.reset(),this._input=e}getCurrentToken(){return this._input.LT(1)}notifyErrorListeners(e,o,s){o=o||null,s=s||null,null===o&&(o=this.getCurrentToken()),this._syntaxErrors+=1;const l=o.line,d=o.column,u=this.getErrorListenerDispatch();u.syntaxError(this,o,l,d,e,s)}consume(){const e=this.getCurrentToken();e.type!==Token.EOF&&this.getInputStream().consume();const o=null!==this._parseListeners&&this._parseListeners.length>0;if(this.buildParseTrees||o){let s;s=this._errHandler.inErrorRecoveryMode(this)?this._ctx.addErrorNode(e):this._ctx.addTokenNode(e),s.invokingState=this.state,o&&this._parseListeners.forEach((function(e){s instanceof ErrorNode||void 0!==s.isErrorNode&&s.isErrorNode()?e.visitErrorNode(s):s instanceof TerminalNode&&e.visitTerminal(s)}))}return e}addContextToParseTree(){null!==this._ctx.parentCtx&&this._ctx.parentCtx.addChild(this._ctx)}enterRule(e,o,s){this.state=o,this._ctx=e,this._ctx.start=this._input.LT(1),this.buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this._ctx.stop=this._input.LT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx.parentCtx}enterOuterAlt(e,o){e.setAltNumber(o),this.buildParseTrees&&this._ctx!==e&&null!==this._ctx.parentCtx&&(this._ctx.parentCtx.removeLastChild(),this._ctx.parentCtx.addChild(e)),this._ctx=e}getPrecedence(){return 0===this._precedenceStack.length?-1:this._precedenceStack[this._precedenceStack.length-1]}enterRecursionRule(e,o,s,l){this.state=o,this._precedenceStack.push(l),this._ctx=e,this._ctx.start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(e,o,s){const l=this._ctx;l.parentCtx=e,l.invokingState=o,l.stop=this._input.LT(-1),this._ctx=e,this._ctx.start=l.start,this.buildParseTrees&&this._ctx.addChild(l),this.triggerEnterRuleEvent()}unrollRecursionContexts(e){this._precedenceStack.pop(),this._ctx.stop=this._input.LT(-1);const o=this._ctx,s=this.getParseListeners();if(null!==s&&s.length>0)while(this._ctx!==e)this.triggerExitRuleEvent(),this._ctx=this._ctx.parentCtx;else this._ctx=e;o.parentCtx=e,this.buildParseTrees&&null!==e&&e.addChild(o)}getInvokingContext(e){let o=this._ctx;while(null!==o){if(o.ruleIndex===e)return o;o=o.parentCtx}return null}precpred(e,o){return o>=this._precedenceStack[this._precedenceStack.length-1]}inContext(e){return!1}isExpectedToken(e){const o=this._interp.atn;let s=this._ctx;const l=o.states[this.state];let d=o.nextTokens(l);if(d.contains(e))return!0;if(!d.contains(Token.EPSILON))return!1;while(null!==s&&s.invokingState>=0&&d.contains(Token.EPSILON)){const l=o.states[s.invokingState],u=l.transitions[0];if(d=o.nextTokens(u.followState),d.contains(e))return!0;s=s.parentCtx}return!(!d.contains(Token.EPSILON)||e!==Token.EOF)}getExpectedTokens(){return this._interp.atn.getExpectedTokens(this.state,this._ctx)}getExpectedTokensWithinCurrentRule(){const e=this._interp.atn,o=e.states[this.state];return e.nextTokens(o)}getRuleIndex(e){const o=this.getRuleIndexMap()[e];return null!==o?o:-1}getRuleInvocationStack(e){e=e||null,null===e&&(e=this._ctx);const o=[];while(null!==e){const s=e.ruleIndex;s<0?o.push("n/a"):o.push(this.ruleNames[s]),e=e.parentCtx}return o}getDFAStrings(){return this._interp.decisionToDFA.toString()}dumpDFA(){let e=!1;for(let o=0;o<this._interp.decisionToDFA.length;o++){const s=this._interp.decisionToDFA[o];s.states.length>0&&(e&&console.log(),this.printer.println("Decision "+s.decision+":"),this.printer.print(s.toString(this.literalNames,this.symbolicNames)),e=!0)}}getSourceName(){return this._input.sourceName}setTrace(e){e?(null!==this._tracer&&this.removeParseListener(this._tracer),this._tracer=new TraceListener(this),this.addParseListener(this._tracer)):(this.removeParseListener(this._tracer),this._tracer=null)}}Parser.bypassAltsAtnCache={};class PredictionContextCache{constructor(){this.cache=new HashMap_HashMap}add(e){if(e===PredictionContext.EMPTY)return PredictionContext.EMPTY;const o=this.cache.get(e)||null;return null!==o?o:(this.cache.set(e,e),e)}get(e){return this.cache.get(e)||null}get length(){return this.cache.length}}class TerminalNodeImpl extends TerminalNode{constructor(e){super(),this.parentCtx=null,this.symbol=e}getChild(e){return null}getSymbol(){return this.symbol}getParent(){return this.parentCtx}getPayload(){return this.symbol}getSourceInterval(){if(null===this.symbol)return Interval.INVALID_INTERVAL;const e=this.symbol.tokenIndex;return new Interval(e,e)}getChildCount(){return 0}accept(e){return e.visitTerminal(this)}getText(){return this.symbol.text}toString(){return this.symbol.type===Token.EOF?"<EOF>":this.symbol.text}}class ErrorNodeImpl extends TerminalNodeImpl{constructor(e){super(e)}isErrorNode(){return!0}accept(e){return e.visitErrorNode(this)}}class ParserRuleContext extends RuleContext{constructor(e,o){e=e||null,o=o||null,super(e,o),this.ruleIndex=-1,this.children=null,this.start=null,this.stop=null,this.exception=null}copyFrom(e){this.parentCtx=e.parentCtx,this.invokingState=e.invokingState,this.children=null,this.start=e.start,this.stop=e.stop,e.children&&(this.children=[],e.children.map((function(e){e instanceof ErrorNodeImpl&&(this.children.push(e),e.parentCtx=this)}),this))}enterRule(e){}exitRule(e){}addChild(e){return null===this.children&&(this.children=[]),this.children.push(e),e}removeLastChild(){null!==this.children&&this.children.pop()}addTokenNode(e){const o=new TerminalNodeImpl(e);return this.addChild(o),o.parentCtx=this,o}addErrorNode(e){const o=new ErrorNodeImpl(e);return this.addChild(o),o.parentCtx=this,o}getChild(e,o){if(o=o||null,null===this.children||e<0||e>=this.children.length)return null;if(null===o)return this.children[e];for(let s=0;s<this.children.length;s++){const l=this.children[s];if(l instanceof o){if(0===e)return l;e-=1}}return null}getToken(e,o){if(null===this.children||o<0||o>=this.children.length)return null;for(let s=0;s<this.children.length;s++){const l=this.children[s];if(l instanceof TerminalNode&&l.symbol.type===e){if(0===o)return l;o-=1}}return null}getTokens(e){if(null===this.children)return[];{const o=[];for(let s=0;s<this.children.length;s++){const l=this.children[s];l instanceof TerminalNode&&l.symbol.type===e&&o.push(l)}return o}}getTypedRuleContext(e,o){return this.getChild(o,e)}getTypedRuleContexts(e){if(null===this.children)return[];{const o=[];for(let s=0;s<this.children.length;s++){const l=this.children[s];l instanceof e&&o.push(l)}return o}}getChildCount(){return null===this.children?0:this.children.length}getSourceInterval(){return null===this.start||null===this.stop?Interval.INVALID_INTERVAL:new Interval(this.start.tokenIndex,this.stop.tokenIndex)}}RuleContext.EMPTY=new ParserRuleContext;var k={arrayToString:arrayToString};const N={atn:b,dfa:w,tree:S,error:y,Token:Token,CommonToken:CommonToken,CharStreams:x,InputStream:InputStream,FileStream:FileStream,CommonTokenStream:CommonTokenStream,Lexer:Lexer,Parser:Parser,PredictionContextCache:PredictionContextCache,ParserRuleContext:ParserRuleContext,Interval:Interval,IntervalSet:IntervalSet,LL1Analyzer:LL1Analyzer,Utils:k};var D=N},2201:function(e,o,s){"use strict";s.d(o,{p7:function(){return createRouter},r5:function(){return createWebHashHistory}});var l=s(6252),d=s(2262);
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const u="undefined"!==typeof window;function isESModule(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const g=Object.assign;function applyToParams(e,o){const s={};for(const l in o){const d=o[l];s[l]=p(d)?d.map(e):e(d)}return s}const noop=()=>{},p=Array.isArray;const m=/\/$/,removeTrailingSlash=e=>e.replace(m,"");function parseURL(e,o,s="/"){let l,d={},u="",g="";const p=o.indexOf("#");let m=o.indexOf("?");return p<m&&p>=0&&(m=-1),m>-1&&(l=o.slice(0,m),u=o.slice(m+1,p>-1?p:o.length),d=e(u)),p>-1&&(l=l||o.slice(0,p),g=o.slice(p,o.length)),l=resolveRelativePath(null!=l?l:o,s),{fullPath:l+(u&&"?")+u+g,path:l,query:d,hash:g}}function stringifyURL(e,o){const s=o.query?e(o.query):"";return o.path+(s&&"?")+s+(o.hash||"")}function stripBase(e,o){return o&&e.toLowerCase().startsWith(o.toLowerCase())?e.slice(o.length)||"/":e}function isSameRouteLocation(e,o,s){const l=o.matched.length-1,d=s.matched.length-1;return l>-1&&l===d&&isSameRouteRecord(o.matched[l],s.matched[d])&&isSameRouteLocationParams(o.params,s.params)&&e(o.query)===e(s.query)&&o.hash===s.hash}function isSameRouteRecord(e,o){return(e.aliasOf||e)===(o.aliasOf||o)}function isSameRouteLocationParams(e,o){if(Object.keys(e).length!==Object.keys(o).length)return!1;for(const s in e)if(!isSameRouteLocationParamsValue(e[s],o[s]))return!1;return!0}function isSameRouteLocationParamsValue(e,o){return p(e)?isEquivalentArray(e,o):p(o)?isEquivalentArray(o,e):e===o}function isEquivalentArray(e,o){return p(o)?e.length===o.length&&e.every(((e,s)=>e===o[s])):1===e.length&&e[0]===o}function resolveRelativePath(e,o){if(e.startsWith("/"))return e;if(!e)return o;const s=o.split("/"),l=e.split("/");let d,u,g=s.length-1;for(d=0;d<l.length;d++)if(u=l[d],"."!==u){if(".."!==u)break;g>1&&g--}return s.slice(0,g).join("/")+"/"+l.slice(d-(d===l.length?1:0)).join("/")}var f,_;(function(e){e["pop"]="pop",e["push"]="push"})(f||(f={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(_||(_={}));function normalizeBase(e){if(!e)if(u){const o=document.querySelector("base");e=o&&o.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),removeTrailingSlash(e)}const C=/^[^#]+#/;function createHref(e,o){return e.replace(C,"#")+o}function getElementPosition(e,o){const s=document.documentElement.getBoundingClientRect(),l=e.getBoundingClientRect();return{behavior:o.behavior,left:l.left-s.left-(o.left||0),top:l.top-s.top-(o.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let o;if("el"in e){const s=e.el,l="string"===typeof s&&s.startsWith("#");0;const d="string"===typeof s?l?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!d)return;o=getElementPosition(d,e)}else o=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(o):window.scrollTo(null!=o.left?o.left:window.pageXOffset,null!=o.top?o.top:window.pageYOffset)}function getScrollKey(e,o){const s=history.state?history.state.position-o:-1;return s+e}const b=new Map;function saveScrollPosition(e,o){b.set(e,o)}function getSavedScrollPosition(e){const o=b.get(e);return b.delete(e),o}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,o){const{pathname:s,search:l,hash:d}=o,u=e.indexOf("#");if(u>-1){let o=d.includes(e.slice(u))?e.slice(u).length:1,s=d.slice(o);return"/"!==s[0]&&(s="/"+s),stripBase(s,"")}const g=stripBase(s,e);return g+l+d}function useHistoryListeners(e,o,s,l){let d=[],u=[],p=null;const popStateHandler=({state:u})=>{const g=createCurrentLocation(e,location),m=s.value,C=o.value;let b=0;if(u){if(s.value=g,o.value=u,p&&p===m)return void(p=null);b=C?u.position-C.position:0}else l(g);d.forEach((e=>{e(s.value,m,{delta:b,type:f.pop,direction:b?b>0?_.forward:_.back:_.unknown})}))};function pauseListeners(){p=s.value}function listen(e){d.push(e);const teardown=()=>{const o=d.indexOf(e);o>-1&&d.splice(o,1)};return u.push(teardown),teardown}function beforeUnloadListener(){const{history:e}=window;e.state&&e.replaceState(g({},e.state,{scroll:computeScrollPosition()}),"")}function destroy(){for(const e of u)e();u=[],window.removeEventListener("popstate",popStateHandler),window.removeEventListener("beforeunload",beforeUnloadListener)}return window.addEventListener("popstate",popStateHandler),window.addEventListener("beforeunload",beforeUnloadListener),{pauseListeners:pauseListeners,listen:listen,destroy:destroy}}function buildState(e,o,s,l=!1,d=!1){return{back:e,current:o,forward:s,replaced:l,position:window.history.length,scroll:d?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:o,location:s}=window,l={value:createCurrentLocation(e,s)},d={value:o.state};function changeLocation(l,u,g){const p=e.indexOf("#"),m=p>-1?(s.host&&document.querySelector("base")?e:e.slice(p))+l:createBaseLocation()+e+l;try{o[g?"replaceState":"pushState"](u,"",m),d.value=u}catch(f){console.error(f),s[g?"replace":"assign"](m)}}function replace(e,s){const u=g({},o.state,buildState(d.value.back,e,d.value.forward,!0),s,{position:d.value.position});changeLocation(e,u,!0),l.value=e}function push(e,s){const u=g({},d.value,o.state,{forward:e,scroll:computeScrollPosition()});changeLocation(u.current,u,!0);const p=g({},buildState(l.value,e,null),{position:u.position+1},s);changeLocation(e,p,!1),l.value=e}return d.value||changeLocation(l.value,{back:null,current:l.value,forward:null,position:o.length-1,replaced:!0,scroll:null},!0),{location:l,state:d,push:push,replace:replace}}function createWebHistory(e){e=normalizeBase(e);const o=useHistoryStateNavigation(e),s=useHistoryListeners(e,o.state,o.location,o.replace);function go(e,o=!0){o||s.pauseListeners(),history.go(e)}const l=g({location:"",base:e,go:go,createHref:createHref.bind(null,e)},o,s);return Object.defineProperty(l,"location",{enumerable:!0,get:()=>o.location.value}),Object.defineProperty(l,"state",{enumerable:!0,get:()=>o.state.value}),l}function createWebHashHistory(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return"string"===typeof e||e&&"object"===typeof e}function isRouteName(e){return"string"===typeof e||"symbol"===typeof e}const w={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},S=Symbol("");var y;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(y||(y={}));function createRouterError(e,o){return g(new Error,{type:e,[S]:!0},o)}function isNavigationFailure(e,o){return e instanceof Error&&S in e&&(null==o||!!(e.type&o))}const L="[^/]+?",x={sensitive:!1,strict:!1,start:!0,end:!0},k=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,o){const s=g({},x,o),l=[];let d=s.start?"^":"";const u=[];for(const g of e){const e=g.length?[]:[90];s.strict&&!g.length&&(d+="/");for(let o=0;o<g.length;o++){const l=g[o];let p=40+(s.sensitive?.25:0);if(0===l.type)o||(d+="/"),d+=l.value.replace(k,"\\$&"),p+=40;else if(1===l.type){const{value:e,repeatable:s,optional:m,regexp:_}=l;u.push({name:e,repeatable:s,optional:m});const C=_||L;if(C!==L){p+=10;try{new RegExp(`(${C})`)}catch(f){throw new Error(`Invalid custom RegExp for param "${e}" (${C}): `+f.message)}}let b=s?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;o||(b=m&&g.length<2?`(?:/${b})`:"/"+b),m&&(b+="?"),d+=b,p+=20,m&&(p+=-8),s&&(p+=-20),".*"===C&&(p+=-50)}e.push(p)}l.push(e)}if(s.strict&&s.end){const e=l.length-1;l[e][l[e].length-1]+=.7000000000000001}s.strict||(d+="/?"),s.end?d+="$":s.strict&&(d+="(?:/|$)");const m=new RegExp(d,s.sensitive?"":"i");function parse(e){const o=e.match(m),s={};if(!o)return null;for(let l=1;l<o.length;l++){const e=o[l]||"",d=u[l-1];s[d.name]=e&&d.repeatable?e.split("/"):e}return s}function stringify(o){let s="",l=!1;for(const d of e){l&&s.endsWith("/")||(s+="/"),l=!1;for(const e of d)if(0===e.type)s+=e.value;else if(1===e.type){const{value:u,repeatable:g,optional:m}=e,f=u in o?o[u]:"";if(p(f)&&!g)throw new Error(`Provided param "${u}" is an array but it is not repeatable (* or + modifiers)`);const _=p(f)?f.join("/"):f;if(!_){if(!m)throw new Error(`Missing required param "${u}"`);d.length<2&&(s.endsWith("/")?s=s.slice(0,-1):l=!0)}s+=_}}return s||"/"}return{re:m,score:l,keys:u,parse:parse,stringify:stringify}}function compareScoreArray(e,o){let s=0;while(s<e.length&&s<o.length){const l=o[s]-e[s];if(l)return l;s++}return e.length<o.length?1===e.length&&80===e[0]?-1:1:e.length>o.length?1===o.length&&80===o[0]?1:-1:0}function comparePathParserScore(e,o){let s=0;const l=e.score,d=o.score;while(s<l.length&&s<d.length){const e=compareScoreArray(l[s],d[s]);if(e)return e;s++}if(1===Math.abs(d.length-l.length)){if(isLastScoreNegative(l))return 1;if(isLastScoreNegative(d))return-1}return d.length-l.length}function isLastScoreNegative(e){const o=e[e.length-1];return e.length>0&&o[o.length-1]<0}const N={type:0,value:""},D=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if("/"===e)return[[N]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function crash(e){throw new Error(`ERR (${o})/"${p}": ${e}`)}let o=0,s=o;const l=[];let d;function finalizeSegment(){d&&l.push(d),d=[]}let u,g=0,p="",m="";function consumeBuffer(){p&&(0===o?d.push({type:0,value:p}):1===o||2===o||3===o?(d.length>1&&("*"===u||"+"===u)&&crash(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),d.push({type:1,value:p,regexp:m,repeatable:"*"===u||"+"===u,optional:"*"===u||"?"===u})):crash("Invalid state to consume buffer"),p="")}function addCharToBuffer(){p+=u}while(g<e.length)if(u=e[g++],"\\"!==u||2===o)switch(o){case 0:"/"===u?(p&&consumeBuffer(),finalizeSegment()):":"===u?(consumeBuffer(),o=1):addCharToBuffer();break;case 4:addCharToBuffer(),o=s;break;case 1:"("===u?o=2:D.test(u)?addCharToBuffer():(consumeBuffer(),o=0,"*"!==u&&"?"!==u&&"+"!==u&&g--);break;case 2:")"===u?"\\"==m[m.length-1]?m=m.slice(0,-1)+u:o=3:m+=u;break;case 3:consumeBuffer(),o=0,"*"!==u&&"?"!==u&&"+"!==u&&g--,m="";break;default:crash("Unknown state");break}else s=o,o=4;return 2===o&&crash(`Unfinished custom RegExp for param "${p}"`),consumeBuffer(),finalizeSegment(),l}function createRouteRecordMatcher(e,o,s){const l=tokensToParser(tokenizePath(e.path),s);const d=g(l,{record:e,parent:o,children:[],alias:[]});return o&&!d.record.aliasOf===!o.record.aliasOf&&o.children.push(d),d}function createRouterMatcher(e,o){const s=[],l=new Map;function getRecordMatcher(e){return l.get(e)}function addRoute(e,s,l){const d=!l,u=normalizeRouteRecord(e);u.aliasOf=l&&l.record;const p=mergeOptions(o,e),m=[u];if("alias"in e){const o="string"===typeof e.alias?[e.alias]:e.alias;for(const e of o)m.push(g({},u,{components:l?l.record.components:u.components,path:e,aliasOf:l?l.record:u}))}let f,_;for(const o of m){const{path:g}=o;if(s&&"/"!==g[0]){const e=s.record.path,l="/"===e[e.length-1]?"":"/";o.path=s.record.path+(g&&l+g)}if(f=createRouteRecordMatcher(o,s,p),l?l.alias.push(f):(_=_||f,_!==f&&_.alias.push(f),d&&e.name&&!isAliasRecord(f)&&removeRoute(e.name)),u.children){const e=u.children;for(let o=0;o<e.length;o++)addRoute(e[o],f,l&&l.children[o])}l=l||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&insertMatcher(f)}return _?()=>{removeRoute(_)}:noop}function removeRoute(e){if(isRouteName(e)){const o=l.get(e);o&&(l.delete(e),s.splice(s.indexOf(o),1),o.children.forEach(removeRoute),o.alias.forEach(removeRoute))}else{const o=s.indexOf(e);o>-1&&(s.splice(o,1),e.record.name&&l.delete(e.record.name),e.children.forEach(removeRoute),e.alias.forEach(removeRoute))}}function getRoutes(){return s}function insertMatcher(e){let o=0;while(o<s.length&&comparePathParserScore(e,s[o])>=0&&(e.record.path!==s[o].record.path||!isRecordChildOf(e,s[o])))o++;s.splice(o,0,e),e.record.name&&!isAliasRecord(e)&&l.set(e.record.name,e)}function resolve(e,o){let d,u,p,m={};if("name"in e&&e.name){if(d=l.get(e.name),!d)throw createRouterError(1,{location:e});0,p=d.record.name,m=g(paramsFromLocation(o.params,d.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&paramsFromLocation(e.params,d.keys.map((e=>e.name)))),u=d.stringify(m)}else if("path"in e)u=e.path,d=s.find((e=>e.re.test(u))),d&&(m=d.parse(u),p=d.record.name);else{if(d=o.name?l.get(o.name):s.find((e=>e.re.test(o.path))),!d)throw createRouterError(1,{location:e,currentLocation:o});p=d.record.name,m=g({},o.params,e.params),u=d.stringify(m)}const f=[];let _=d;while(_)f.unshift(_.record),_=_.parent;return{name:p,path:u,params:m,matched:f,meta:mergeMetaFields(f)}}return o=mergeOptions({strict:!1,end:!0,sensitive:!1},o),e.forEach((e=>addRoute(e))),{addRoute:addRoute,resolve:resolve,removeRoute:removeRoute,getRoutes:getRoutes,getRecordMatcher:getRecordMatcher}}function paramsFromLocation(e,o){const s={};for(const l of o)l in e&&(s[l]=e[l]);return s}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const o={},s=e.props||!1;if("component"in e)o.default=s;else for(const l in e.components)o[l]="boolean"===typeof s?s:s[l];return o}function isAliasRecord(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce(((e,o)=>g(e,o.meta)),{})}function mergeOptions(e,o){const s={};for(const l in e)s[l]=l in o?o[l]:e[l];return s}function isRecordChildOf(e,o){return o.children.some((o=>o===e||isRecordChildOf(e,o)))}const E=/#/g,T=/&/g,I=/\//g,A=/=/g,M=/\?/g,R=/\+/g,P=/%5B/g,O=/%5D/g,F=/%5E/g,B=/%60/g,W=/%7B/g,V=/%7C/g,H=/%7D/g,z=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(V,"|").replace(P,"[").replace(O,"]")}function encodeHash(e){return commonEncode(e).replace(W,"{").replace(H,"}").replace(F,"^")}function encodeQueryValue(e){return commonEncode(e).replace(R,"%2B").replace(z,"+").replace(E,"%23").replace(T,"%26").replace(B,"`").replace(W,"{").replace(H,"}").replace(F,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(A,"%3D")}function encodePath(e){return commonEncode(e).replace(E,"%23").replace(M,"%3F")}function encodeParam(e){return null==e?"":encodePath(e).replace(I,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch(o){}return""+e}function parseQuery(e){const o={};if(""===e||"?"===e)return o;const s="?"===e[0],l=(s?e.slice(1):e).split("&");for(let d=0;d<l.length;++d){const e=l[d].replace(R," "),s=e.indexOf("="),u=decode(s<0?e:e.slice(0,s)),g=s<0?null:decode(e.slice(s+1));if(u in o){let e=o[u];p(e)||(e=o[u]=[e]),e.push(g)}else o[u]=g}return o}function stringifyQuery(e){let o="";for(let s in e){const l=e[s];if(s=encodeQueryKey(s),null==l){void 0!==l&&(o+=(o.length?"&":"")+s);continue}const d=p(l)?l.map((e=>e&&encodeQueryValue(e))):[l&&encodeQueryValue(l)];d.forEach((e=>{void 0!==e&&(o+=(o.length?"&":"")+s,null!=e&&(o+="="+e))}))}return o}function normalizeQuery(e){const o={};for(const s in e){const l=e[s];void 0!==l&&(o[s]=p(l)?l.map((e=>null==e?null:""+e)):null==l?l:""+l)}return o}const U=Symbol(""),K=Symbol(""),j=Symbol(""),G=Symbol(""),q=Symbol("");function useCallbacks(){let e=[];function add(o){return e.push(o),()=>{const s=e.indexOf(o);s>-1&&e.splice(s,1)}}function reset(){e=[]}return{add:add,list:()=>e,reset:reset}}function guardToPromiseFn(e,o,s,l,d){const u=l&&(l.enterCallbacks[d]=l.enterCallbacks[d]||[]);return()=>new Promise(((g,p)=>{const next=e=>{!1===e?p(createRouterError(4,{from:s,to:o})):e instanceof Error?p(e):isRouteLocation(e)?p(createRouterError(2,{from:o,to:e})):(u&&l.enterCallbacks[d]===u&&"function"===typeof e&&u.push(e),g())},m=e.call(l&&l.instances[d],o,s,next);let f=Promise.resolve(m);e.length<3&&(f=f.then(next)),f.catch((e=>p(e)))}))}function extractComponentsGuards(e,o,s,l){const d=[];for(const u of e){0;for(const e in u.components){let g=u.components[e];if("beforeRouteEnter"===o||u.instances[e])if(isRouteComponent(g)){const p=g.__vccOpts||g,m=p[o];m&&d.push(guardToPromiseFn(m,s,l,u,e))}else{let p=g();0,d.push((()=>p.then((d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${u.path}"`));const g=isESModule(d)?d.default:d;u.components[e]=g;const p=g.__vccOpts||g,m=p[o];return m&&guardToPromiseFn(m,s,l,u,e)()}))))}}}return d}function isRouteComponent(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const o=(0,l.f3)(j),s=(0,l.f3)(G),u=(0,l.Fl)((()=>o.resolve((0,d.SU)(e.to)))),g=(0,l.Fl)((()=>{const{matched:e}=u.value,{length:o}=e,l=e[o-1],d=s.matched;if(!l||!d.length)return-1;const g=d.findIndex(isSameRouteRecord.bind(null,l));if(g>-1)return g;const p=getOriginalPath(e[o-2]);return o>1&&getOriginalPath(l)===p&&d[d.length-1].path!==p?d.findIndex(isSameRouteRecord.bind(null,e[o-2])):g})),p=(0,l.Fl)((()=>g.value>-1&&includesParams(s.params,u.value.params))),m=(0,l.Fl)((()=>g.value>-1&&g.value===s.matched.length-1&&isSameRouteLocationParams(s.params,u.value.params)));function navigate(s={}){return guardEvent(s)?o[(0,d.SU)(e.replace)?"replace":"push"]((0,d.SU)(e.to)).catch(noop):Promise.resolve()}return{route:u,href:(0,l.Fl)((()=>u.value.href)),isActive:p,isExactActive:m,navigate:navigate}}const Q=(0,l.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:useLink,setup(e,{slots:o}){const s=(0,d.qj)(useLink(e)),{options:u}=(0,l.f3)(j),g=(0,l.Fl)((()=>({[getLinkClass(e.activeClass,u.linkActiveClass,"router-link-active")]:s.isActive,[getLinkClass(e.exactActiveClass,u.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive})));return()=>{const d=o.default&&o.default(s);return e.custom?d:(0,l.h)("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:g.value},d)}}}),Z=Q;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const o=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(o))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,o){for(const s in o){const l=o[s],d=e[s];if("string"===typeof l){if(l!==d)return!1}else if(!p(d)||d.length!==l.length||l.some(((e,o)=>e!==d[o])))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,o,s)=>null!=e?e:null!=o?o:s,Y=(0,l.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:o,slots:s}){const u=(0,l.f3)(q),p=(0,l.Fl)((()=>e.route||u.value)),m=(0,l.f3)(K,0),f=(0,l.Fl)((()=>{let e=(0,d.SU)(m);const{matched:o}=p.value;let s;while((s=o[e])&&!s.components)e++;return e})),_=(0,l.Fl)((()=>p.value.matched[f.value]));(0,l.JJ)(K,(0,l.Fl)((()=>f.value+1))),(0,l.JJ)(U,_),(0,l.JJ)(q,p);const C=(0,d.iH)();return(0,l.YP)((()=>[C.value,_.value,e.name]),(([e,o,s],[l,d,u])=>{o&&(o.instances[s]=e,d&&d!==o&&e&&e===l&&(o.leaveGuards.size||(o.leaveGuards=d.leaveGuards),o.updateGuards.size||(o.updateGuards=d.updateGuards))),!e||!o||d&&isSameRouteRecord(o,d)&&l||(o.enterCallbacks[s]||[]).forEach((o=>o(e)))}),{flush:"post"}),()=>{const d=p.value,u=e.name,m=_.value,f=m&&m.components[u];if(!f)return normalizeSlot(s.default,{Component:f,route:d});const b=m.props[u],w=b?!0===b?d.params:"function"===typeof b?b(d):b:null,onVnodeUnmounted=e=>{e.component.isUnmounted&&(m.instances[u]=null)},S=(0,l.h)(f,g({},w,o,{onVnodeUnmounted:onVnodeUnmounted,ref:C}));return normalizeSlot(s.default,{Component:S,route:d})||S}}});function normalizeSlot(e,o){if(!e)return null;const s=e(o);return 1===s.length?s[0]:s}const J=Y;function createRouter(e){const o=createRouterMatcher(e.routes,e),s=e.parseQuery||parseQuery,m=e.stringifyQuery||stringifyQuery,_=e.history;const C=useCallbacks(),b=useCallbacks(),S=useCallbacks(),y=(0,d.XI)(w);let L=w;u&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=applyToParams.bind(null,(e=>""+e)),k=applyToParams.bind(null,encodeParam),N=applyToParams.bind(null,decode);function addRoute(e,s){let l,d;return isRouteName(e)?(l=o.getRecordMatcher(e),d=s):d=e,o.addRoute(d,l)}function removeRoute(e){const s=o.getRecordMatcher(e);s&&o.removeRoute(s)}function getRoutes(){return o.getRoutes().map((e=>e.record))}function hasRoute(e){return!!o.getRecordMatcher(e)}function resolve(e,l){if(l=g({},l||y.value),"string"===typeof e){const d=parseURL(s,e,l.path),u=o.resolve({path:d.path},l),p=_.createHref(d.fullPath);return g(d,u,{params:N(u.params),hash:decode(d.hash),redirectedFrom:void 0,href:p})}let d;if("path"in e)d=g({},e,{path:parseURL(s,e.path,l.path).path});else{const o=g({},e.params);for(const e in o)null==o[e]&&delete o[e];d=g({},e,{params:k(e.params)}),l.params=k(l.params)}const u=o.resolve(d,l),p=e.hash||"";u.params=x(N(u.params));const f=stringifyURL(m,g({},e,{hash:encodeHash(p),path:u.path})),C=_.createHref(f);return g({fullPath:f,hash:p,query:m===stringifyQuery?normalizeQuery(e.query):e.query||{}},u,{redirectedFrom:void 0,href:C})}function locationAsObject(e){return"string"===typeof e?parseURL(s,e,y.value.path):g({},e)}function checkCanceledNavigation(e,o){if(L!==e)return createRouterError(8,{from:o,to:e})}function push(e){return pushWithRedirect(e)}function replace(e){return push(g(locationAsObject(e),{replace:!0}))}function handleRedirectRecord(e){const o=e.matched[e.matched.length-1];if(o&&o.redirect){const{redirect:s}=o;let l="function"===typeof s?s(e):s;return"string"===typeof l&&(l=l.includes("?")||l.includes("#")?l=locationAsObject(l):{path:l},l.params={}),g({query:e.query,hash:e.hash,params:"path"in l?{}:e.params},l)}}function pushWithRedirect(e,o){const s=L=resolve(e),l=y.value,d=e.state,u=e.force,p=!0===e.replace,f=handleRedirectRecord(s);if(f)return pushWithRedirect(g(locationAsObject(f),{state:"object"===typeof f?g({},d,f.state):d,force:u,replace:p}),o||s);const _=s;let C;return _.redirectedFrom=o,!u&&isSameRouteLocation(m,l,s)&&(C=createRouterError(16,{to:_,from:l}),handleScroll(l,l,!0,!1)),(C?Promise.resolve(C):navigate(_,l)).catch((e=>isNavigationFailure(e)?isNavigationFailure(e,2)?e:markAsReady(e):triggerError(e,_,l))).then((e=>{if(e){if(isNavigationFailure(e,2))return pushWithRedirect(g({replace:p},locationAsObject(e.to),{state:"object"===typeof e.to?g({},d,e.to.state):d,force:u}),o||_)}else e=finalizeNavigation(_,l,!0,p,d);return triggerAfterEach(_,l,e),e}))}function checkCanceledNavigationAndReject(e,o){const s=checkCanceledNavigation(e,o);return s?Promise.reject(s):Promise.resolve()}function navigate(e,o){let s;const[l,d,u]=extractChangingRecords(e,o);s=extractComponentsGuards(l.reverse(),"beforeRouteLeave",e,o);for(const p of l)p.leaveGuards.forEach((l=>{s.push(guardToPromiseFn(l,e,o))}));const g=checkCanceledNavigationAndReject.bind(null,e,o);return s.push(g),runGuardQueue(s).then((()=>{s=[];for(const l of C.list())s.push(guardToPromiseFn(l,e,o));return s.push(g),runGuardQueue(s)})).then((()=>{s=extractComponentsGuards(d,"beforeRouteUpdate",e,o);for(const l of d)l.updateGuards.forEach((l=>{s.push(guardToPromiseFn(l,e,o))}));return s.push(g),runGuardQueue(s)})).then((()=>{s=[];for(const l of e.matched)if(l.beforeEnter&&!o.matched.includes(l))if(p(l.beforeEnter))for(const d of l.beforeEnter)s.push(guardToPromiseFn(d,e,o));else s.push(guardToPromiseFn(l.beforeEnter,e,o));return s.push(g),runGuardQueue(s)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),s=extractComponentsGuards(u,"beforeRouteEnter",e,o),s.push(g),runGuardQueue(s)))).then((()=>{s=[];for(const l of b.list())s.push(guardToPromiseFn(l,e,o));return s.push(g),runGuardQueue(s)})).catch((e=>isNavigationFailure(e,8)?e:Promise.reject(e)))}function triggerAfterEach(e,o,s){for(const l of S.list())l(e,o,s)}function finalizeNavigation(e,o,s,l,d){const p=checkCanceledNavigation(e,o);if(p)return p;const m=o===w,f=u?history.state:{};s&&(l||m?_.replace(e.fullPath,g({scroll:m&&f&&f.scroll},d)):_.push(e.fullPath,d)),y.value=e,handleScroll(e,o,s,m),markAsReady()}let D;function setupListeners(){D||(D=_.listen(((e,o,s)=>{if(!R.listening)return;const l=resolve(e),d=handleRedirectRecord(l);if(d)return void pushWithRedirect(g(d,{replace:!0}),l).catch(noop);L=l;const p=y.value;u&&saveScrollPosition(getScrollKey(p.fullPath,s.delta),computeScrollPosition()),navigate(l,p).catch((e=>isNavigationFailure(e,12)?e:isNavigationFailure(e,2)?(pushWithRedirect(e.to,l).then((e=>{isNavigationFailure(e,20)&&!s.delta&&s.type===f.pop&&_.go(-1,!1)})).catch(noop),Promise.reject()):(s.delta&&_.go(-s.delta,!1),triggerError(e,l,p)))).then((e=>{e=e||finalizeNavigation(l,p,!1),e&&(s.delta&&!isNavigationFailure(e,8)?_.go(-s.delta,!1):s.type===f.pop&&isNavigationFailure(e,20)&&_.go(-1,!1)),triggerAfterEach(l,p,e)})).catch(noop)})))}let E,T=useCallbacks(),I=useCallbacks();function triggerError(e,o,s){markAsReady(e);const l=I.list();return l.length?l.forEach((l=>l(e,o,s))):console.error(e),Promise.reject(e)}function isReady(){return E&&y.value!==w?Promise.resolve():new Promise(((e,o)=>{T.add([e,o])}))}function markAsReady(e){return E||(E=!e,setupListeners(),T.list().forEach((([o,s])=>e?s(e):o())),T.reset()),e}function handleScroll(o,s,d,g){const{scrollBehavior:p}=e;if(!u||!p)return Promise.resolve();const m=!d&&getSavedScrollPosition(getScrollKey(o.fullPath,0))||(g||!d)&&history.state&&history.state.scroll||null;return(0,l.Y3)().then((()=>p(o,s,m))).then((e=>e&&scrollToPosition(e))).catch((e=>triggerError(e,o,s)))}const go=e=>_.go(e);let A;const M=new Set,R={currentRoute:y,listening:!0,addRoute:addRoute,removeRoute:removeRoute,hasRoute:hasRoute,getRoutes:getRoutes,resolve:resolve,options:e,push:push,replace:replace,go:go,back:()=>go(-1),forward:()=>go(1),beforeEach:C.add,beforeResolve:b.add,afterEach:S.add,onError:I.add,isReady:isReady,install(e){const o=this;e.component("RouterLink",Z),e.component("RouterView",J),e.config.globalProperties.$router=o,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,d.SU)(y)}),u&&!A&&y.value===w&&(A=!0,push(_.location).catch((e=>{0})));const s={};for(const d in w)s[d]=(0,l.Fl)((()=>y.value[d]));e.provide(j,o),e.provide(G,(0,d.qj)(s)),e.provide(q,y);const g=e.unmount;M.add(e),e.unmount=function(){M.delete(e),M.size<1&&(L=w,D&&D(),D=null,y.value=w,A=!1,E=!1),g()}}};return R}function runGuardQueue(e){return e.reduce(((e,o)=>e.then((()=>o()))),Promise.resolve())}function extractChangingRecords(e,o){const s=[],l=[],d=[],u=Math.max(o.matched.length,e.matched.length);for(let g=0;g<u;g++){const u=o.matched[g];u&&(e.matched.find((e=>isSameRouteRecord(e,u)))?l.push(u):s.push(u));const p=e.matched[g];p&&(o.matched.find((e=>isSameRouteRecord(e,p)))||d.push(p))}return[s,l,d]}}}]);
//# sourceMappingURL=chunk-vendors.64ac8fc8.js.map